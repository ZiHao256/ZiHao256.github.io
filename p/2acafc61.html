<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>rustlings | ZiHao's Blog</title><meta name="keywords" content="Rust"><meta name="author" content="zihao"><meta name="copyright" content="zihao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="è¯´æ¥æƒ­æ„§ï¼Œå¤§ä¸‰å¯’å‡çš„æ—¶å€™å­¦è¿‡ä¸€æ¬¡Rustï¼Œä½†æ˜¯åªæ˜¯è¿‡äº†ä¸€éè¯­æ³•ï¼Œå¹¶ä¸”æ²¡æœ‰çœŸæ­£æœ‰é¡¹ç›®å®è·µï¼Œæ‰€ä»¥å¾ˆå¿«å°±é—å¿˜äº†ã€‚ è¿™æ¬¡å¼€å§‹å°è¯•å®è·µ&#x2F;é¡¹ç›®é©±åŠ¨å­¦ä¹ ï¼Œæ­£å¥½æœ€è¿‘éœ€è¦å†™ä¸€ä¸ªWebé¡¹ç›®ï¼Œå°è¯•ä½¿ç”¨Rustæ¥ç¼–å†™ï¼Œä»¥å·©å›ºå¯¹Rustçš„å­¦ä¹ ã€‚ é¦–å…ˆç”¨rustlingså¯¹Rustçš„åŸºæœ¬è¯­æ³•ä½“ç³»è¿›è¡Œæœ€å°åŒ–å­¦ä¹  åç»­ä¼šæ ¹æ®éœ€è¦æ¥æ‹“å±•å¯¹ç›¸å…³æ¦‚å¿µæ·±å…¥çš„å­¦ä¹ ï¼ˆthe book&#x2F;async&#x2F;rustdocï¼‰    rustlings">
<meta property="og:type" content="article">
<meta property="og:title" content="rustlings">
<meta property="og:url" content="https://zihao256.github.io/p/2acafc61.html">
<meta property="og:site_name" content="ZiHao&#39;s Blog">
<meta property="og:description" content="è¯´æ¥æƒ­æ„§ï¼Œå¤§ä¸‰å¯’å‡çš„æ—¶å€™å­¦è¿‡ä¸€æ¬¡Rustï¼Œä½†æ˜¯åªæ˜¯è¿‡äº†ä¸€éè¯­æ³•ï¼Œå¹¶ä¸”æ²¡æœ‰çœŸæ­£æœ‰é¡¹ç›®å®è·µï¼Œæ‰€ä»¥å¾ˆå¿«å°±é—å¿˜äº†ã€‚ è¿™æ¬¡å¼€å§‹å°è¯•å®è·µ&#x2F;é¡¹ç›®é©±åŠ¨å­¦ä¹ ï¼Œæ­£å¥½æœ€è¿‘éœ€è¦å†™ä¸€ä¸ªWebé¡¹ç›®ï¼Œå°è¯•ä½¿ç”¨Rustæ¥ç¼–å†™ï¼Œä»¥å·©å›ºå¯¹Rustçš„å­¦ä¹ ã€‚ é¦–å…ˆç”¨rustlingså¯¹Rustçš„åŸºæœ¬è¯­æ³•ä½“ç³»è¿›è¡Œæœ€å°åŒ–å­¦ä¹  åç»­ä¼šæ ¹æ®éœ€è¦æ¥æ‹“å±•å¯¹ç›¸å…³æ¦‚å¿µæ·±å…¥çš„å­¦ä¹ ï¼ˆthe book&#x2F;async&#x2F;rustdocï¼‰    rustlings">
<meta property="og:locale">
<meta property="og:image" content="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven6.jpg">
<meta property="article:published_time" content="2023-11-28T09:46:15.000Z">
<meta property="article:modified_time" content="2023-11-28T11:03:12.329Z">
<meta property="article:author" content="zihao">
<meta property="article:tag" content="Rust">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven6.jpg"><link rel="shortcut icon" href="https://github.com/ZiHao256/ZiHao256.github.io/blob/hexo/images/stitch.JPG?raw=true"><link rel="canonical" href="https://zihao256.github.io/p/2acafc61"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'rustlings',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2023-11-28 19:03:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4263496_xe5w6zp8g5c.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="ZiHao's Blog" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}</style></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://github.com/ZiHao256/ZiHao256.github.io/blob/hexo/images/stitch.JPG?raw=true" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">64</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">44</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">16</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/log"><i class="fa-fw fas fa-book"></i><span> Log</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fa fa-camera-retro"></i><span> Gallery</span></a></li><li><a class="site-page child" href="/Map/"><i class="fa-fw fa fa-map-signs"></i><span> Map</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven6.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">ZiHao's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/log"><i class="fa-fw fas fa-book"></i><span> Log</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fa fa-camera-retro"></i><span> Gallery</span></a></li><li><a class="site-page child" href="/Map/"><i class="fa-fw fa fa-map-signs"></i><span> Map</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">rustlings</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-28T09:46:15.000Z" title="Created 2023-11-28 17:46:15">2023-11-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-11-28T11:03:12.329Z" title="Updated 2023-11-28 19:03:12">2023-11-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E6%97%A0%E6%AD%A2%E5%A2%83/">å­¦æ— æ­¢å¢ƒ</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E6%97%A0%E6%AD%A2%E5%A2%83/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/">ç¼–ç¨‹è¯­è¨€å­¦ä¹ </a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">12.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>51min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="rustlings"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/p/2acafc61.html#post-comment"><span class="gitalk-comment-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>è¯´æ¥æƒ­æ„§ï¼Œå¤§ä¸‰å¯’å‡çš„æ—¶å€™å­¦è¿‡ä¸€æ¬¡Rustï¼Œä½†æ˜¯åªæ˜¯è¿‡äº†ä¸€éè¯­æ³•ï¼Œå¹¶ä¸”æ²¡æœ‰çœŸæ­£æœ‰é¡¹ç›®å®è·µï¼Œæ‰€ä»¥å¾ˆå¿«å°±é—å¿˜äº†ã€‚</p>
<p>è¿™æ¬¡å¼€å§‹å°è¯•å®è·µ/é¡¹ç›®é©±åŠ¨å­¦ä¹ ï¼Œæ­£å¥½æœ€è¿‘éœ€è¦å†™ä¸€ä¸ªWebé¡¹ç›®ï¼Œå°è¯•ä½¿ç”¨Rustæ¥ç¼–å†™ï¼Œä»¥å·©å›ºå¯¹Rustçš„å­¦ä¹ ã€‚</p>
<p>é¦–å…ˆç”¨rustlingså¯¹Rustçš„åŸºæœ¬è¯­æ³•ä½“ç³»è¿›è¡Œæœ€å°åŒ–å­¦ä¹ </p>
<p>åç»­ä¼šæ ¹æ®éœ€è¦æ¥æ‹“å±•å¯¹ç›¸å…³æ¦‚å¿µæ·±å…¥çš„å­¦ä¹ ï¼ˆthe book/async/rustdocï¼‰</p>
</blockquote>
<ul>
<li><input checked="" disabled="" type="checkbox"> rustlingsï¼šéœ€è¦å®Œæ•´åšä¸€éï¼Œå¹¶æŠŠç›¸å…³æ¦‚å¿µæ±‡æ€»åˆ°æ­¤é¡µé¢ï¼Œåç»­ä½œä¸ºå¤ä¹ /å­—å…¸æŸ¥é˜…</li>
<li><input disabled="" type="checkbox"> the bookï¼šæ ¹æ®éœ€è¦å¯¹Rustä¸­çš„æ¦‚å¿µè¿›è¡Œå¤ä¹ ï¼Œä½œä¸ºå­—å…¸æŸ¥çœ‹</li>
<li><input disabled="" type="checkbox"> Asynchronous Programmingï¼šwebç¼–ç¨‹ä¸­æ¶‰åŠåˆ°å¼‚æ­¥æ—¶å†æ·±å…¥å­¦ä¹ </li>
</ul>
<hr>
<p>[toc]</p>
<h1 id="Book-Chapter-Mapping"><a href="#Book-Chapter-Mapping" class="headerlink" title="Book Chapter Mapping"></a>Book Chapter Mapping</h1><table>
<thead>
<tr>
<th>Exercise</th>
<th>Book Chapter</th>
</tr>
</thead>
<tbody><tr>
<td>variables</td>
<td>Â§3.1</td>
</tr>
<tr>
<td>functions</td>
<td>Â§3.3</td>
</tr>
<tr>
<td>if</td>
<td>Â§3.5</td>
</tr>
<tr>
<td>primitive_types</td>
<td>Â§3.2, Â§4.3</td>
</tr>
<tr>
<td>vecs</td>
<td>Â§8.1</td>
</tr>
<tr>
<td>move_semantics</td>
<td>Â§4.1-2</td>
</tr>
<tr>
<td>structs</td>
<td>Â§5.1, Â§5.3</td>
</tr>
<tr>
<td>enums</td>
<td>Â§6, Â§18.3</td>
</tr>
<tr>
<td>strings</td>
<td>Â§8.2</td>
</tr>
<tr>
<td>modules</td>
<td>Â§7</td>
</tr>
<tr>
<td>hashmaps</td>
<td>Â§8.3</td>
</tr>
<tr>
<td>options</td>
<td>Â§10.1</td>
</tr>
<tr>
<td>error_handling</td>
<td>Â§9</td>
</tr>
<tr>
<td>generics</td>
<td>Â§10</td>
</tr>
<tr>
<td>traits</td>
<td>Â§10.2</td>
</tr>
<tr>
<td>tests</td>
<td>Â§11.1</td>
</tr>
<tr>
<td>lifetimes</td>
<td>Â§10.3</td>
</tr>
<tr>
<td>iterators</td>
<td>Â§13.2-4</td>
</tr>
<tr>
<td>threads</td>
<td>Â§16.1-3</td>
</tr>
<tr>
<td>smart_pointers</td>
<td>Â§15, Â§16.3</td>
</tr>
<tr>
<td>macros</td>
<td>Â§19.6</td>
</tr>
<tr>
<td>clippy</td>
<td>Â§21.4</td>
</tr>
<tr>
<td>conversions</td>
<td>rustdoc</td>
</tr>
</tbody></table>
<hr>
<h1 id="1-Intro"><a href="#1-Intro" class="headerlink" title="1.Intro"></a>1.Intro</h1><p>Rust uses the <code>print!</code> and <code>println!</code> macros to print text to the console.</p>
<h2 id="Further-information"><a href="#Further-information" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><a target="_blank" rel="noopener" href="https://doc.rust-lang.org/rust-by-example/hello.html">Hello World</a></li>
<li><a target="_blank" rel="noopener" href="https://doc.rust-lang.org/rust-by-example/hello/print.html">Formatted print</a></li>
</ul>
<h1 id="Formatted-print"><a href="#Formatted-print" class="headerlink" title="Formatted print"></a>Formatted print</h1><ul>
<li>Rustä¸­å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—ä»¥<code>!</code>ç»“å°¾çš„å®å®šä¹‰æ¥å­—ç¬¦ä¸²åŒ–å˜é‡ã€æ ¼å¼åŒ–ï¼Œå¹¶å°†å…¶å†™å…¥<code>String</code>æˆ–è€…<code>io::stdout/stderr</code></li>
<li>Rustä¸­å­—ç¬¦ä¸²åŒ–å˜é‡çš„å ä½ç¬¦ï¼ˆç±»ä¼¼äºCä¸­çš„<code>%</code>ï¼‰ä¸º<code>&#123;&#125;</code><ul>
<li><code>&#123;name&#125;</code>æŒ‡å®šå­—ç¬¦ä¸²åŒ–å˜é‡çš„åå­—    </li>
<li><code>&#123;:&#125;</code>åœ¨<code>:</code>åè¾“å…¥<code>format character</code>ï¼Œå¯ä»¥æŒ‡å®šå­—ç¬¦ä¸²åŒ–çš„å½¢å¼</li>
<li>ä½¿ç”¨<code>&gt;</code>æˆ–è€…<code>&lt;</code>å¯ä»¥åœ¨å·¦å³ä¸¤è¾¹ä½¿ç”¨ç©ºæ ¼æˆ–è€…0ç­‰å¡«å……è‡³æŒ‡å®šé•¿åº¦</li>
</ul>
</li>
</ul>
<ul>
<li>Rustä¸­ï¼Œä½¿ç”¨ç±»ä¼¼äºC++ä¸­çš„<code>interface</code>æˆ–è€…<code>abstract class</code>çš„<code>trait</code>æ¥å®ç°ä¸€éƒ¨åˆ†å¤šæ€æ€§<ul>
<li>ä¾‹å¦‚ï¼Œå®ç°äº†<code>fmt::Display</code>çš„ç±»å‹æ‰èƒ½ä½¿ç”¨<code>&#123;&#125;</code>æ ‡å¿—ç¬¦æ¥å­—ç¬¦ä¸²åŒ–è¯¥ç±»å‹çš„å˜é‡</li>
<li>åªéœ€è¦ç»§æ‰¿<code>fmt::Debug</code>å°±èƒ½ä½¿ç”¨<code>&#123;&#125;</code>æ ‡å¿—</li>
</ul>
</li>
</ul>
<hr>
<h1 id="2-Variables"><a href="#2-Variables" class="headerlink" title="2. Variables"></a>2. Variables</h1><p>In Rust, variables are immutable by default.<br>When a variable is immutable, once a value is bound to a name, you canâ€™t change that value.<br>You can make them mutable by adding <code>mut</code> in front of the variable name.</p>
<h2 id="Further-information-1"><a href="#Further-information-1" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html">Variables and Mutability</a></li>
</ul>
<h1 id="Variables-and-Mutability"><a href="#Variables-and-Mutability" class="headerlink" title="Variables and Mutability"></a>Variables and Mutability</h1><p>mut</p>
<ul>
<li>Rustä¸­ä½¿ç”¨letå£°æ˜çš„å˜é‡é»˜è®¤æ˜¯immutable<ul>
<li>ä¿è¯å¹¶å‘å®‰å…¨</li>
</ul>
</li>
<li>åœ¨å˜é‡åå‰<code>mut</code>ä½¿å¾—å…¶å¯ä»¥mutable</li>
</ul>
<p>constant</p>
<ul>
<li>ç±»ä¼¼äºC/C++ä¸­çš„const</li>
<li>éœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹</li>
</ul>
<p>shadow</p>
<ul>
<li>å¯ä»¥åœ¨åŒä¸€ä½œç”¨åŸŸï¼Œä½¿ç”¨<code>let</code>å£°æ˜åå­—ç›¸åŒçš„ä¸¤ä¸ªå˜é‡</li>
<li>ç¬¬äºŒä¸ªä¼šæŠŠç¬¬ä¸€ä¸ª<code>overshadow</code></li>
<li>å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©<ol>
<li>ç›´æ¥å£°æ˜ä¸º<code>mut</code></li>
<li>ä½¿ç”¨<code>let</code>æ¥overshadow</li>
</ol>
</li>
</ul>
<hr>
<h1 id="3-Functions"><a href="#3-Functions" class="headerlink" title="3.Functions"></a>3.Functions</h1><p>Here, youâ€™ll learn how to write functions and how the Rust compiler can help you debug errors even<br>in more complex code.</p>
<h2 id="Further-information-2"><a href="#Further-information-2" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch03-03-how-functions-work.html">How Functions Work</a></li>
</ul>
<h1 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h1><ul>
<li>å‡½æ•°åï¼šsnake_case</li>
</ul>
<h2 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h2><ul>
<li>parameterå’Œargumentï¼šå‡½æ•°å®šä¹‰å’Œè°ƒç”¨æ—¶</li>
<li>å‡½æ•°ç­¾åä¸­ï¼Œå¿…é¡»æ˜¾å¼åœ°ç»™å‡ºparameterçš„ç±»å‹</li>
</ul>
<h2 id="Statement-and-Expressions"><a href="#Statement-and-Expressions" class="headerlink" title="Statement and Expressions"></a>Statement and Expressions</h2><ul>
<li>Rustçš„ä¸€å¤§ç‰¹ç‚¹ï¼šåŸºäºExpressionçš„è¯­è¨€<ul>
<li>åŒºåˆ«äºStatement<ul>
<li>æœ‰è¿”å›å€¼</li>
<li>ä¸ä»¥<code>;</code>ç»“å°¾ï¼šexpressionä»¥;ç»“å°¾åˆ™ä¼šå˜ä¸ºstatement</li>
</ul>
</li>
</ul>
</li>
<li>åŒºåˆ«äºC/C++ï¼šRustçš„èµ‹å€¼è¯­å¥æ— è¿”å›å€¼</li>
<li>Rustä¸­çš„Expressionï¼š<ul>
<li>åŸºæœ¬æ“ä½œç¬¦è¿ç®—</li>
<li>å‡½æ•°è°ƒç”¨</li>
<li>macro:<ul>
<li>print!ç­‰å½¢å¼åŒ–å­—ç¬¦ä¸²çš„å®åˆ™æ˜¯è¿”å›ä¸ºvoidï¼Ÿ</li>
</ul>
</li>
<li>èŠ±æ‹¬å·åˆ›å»ºçš„æ–°ä½œç”¨åŸŸ</li>
</ul>
</li>
</ul>
<h2 id="Functions-with-return-values"><a href="#Functions-with-return-values" class="headerlink" title="Functions with return values"></a>Functions with return values</h2><ul>
<li>å¿…é¡»åœ¨å‡½æ•°ç­¾åä½¿ç”¨<code>-&gt;</code>æ˜¾å¼åœ°å£°æ˜</li>
<li>å‡½æ•°ä¸­è¿”å›çš„æ–¹å¼<ul>
<li>æ˜¾å¼return</li>
<li>éšå¼åœ°è¿”å›æœ€åä¸€ä¸ªexpresionçš„è¿”å›å€¼</li>
</ul>
</li>
</ul>
<hr>
<h1 id="4-If"><a href="#4-If" class="headerlink" title="4.If"></a>4.If</h1><p><code>if</code>, the most basic (but still surprisingly versatile!) type of control flow, is what youâ€™ll learn here.</p>
<h2 id="Further-information-3"><a href="#Further-information-3" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch03-05-control-flow.html#if-expressions">Control Flow - if expressions</a></li>
</ul>
<h1 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h1><h2 id="if-Expression"><a href="#if-Expression" class="headerlink" title="if Expression"></a>if Expression</h2><ul>
<li>conditionå¿…é¡»æ˜¯bool<ul>
<li>å¼ºé™æ€ç±»å‹ï¼šä¸ä¼šè‡ªåŠ¨å°†æ•´å‹éšå¼åœ°è½¬æ¢ä¸ºbool</li>
</ul>
</li>
<li>Rustæ¨èæœ€å¤šä½¿ç”¨ä¸€ä¸ª<code>else if</code>åˆ†æ”¯ï¼Œå¦åˆ™ä½¿ç”¨<code>match</code>æ¥é‡æ„ä»£ç </li>
<li><code>if</code>æ˜¯ä¸€ä¸ªExpressionï¼Œå¯ä»¥ç”¨åœ¨letå£°æ˜çš„å³ä¾§<ul>
<li>ä½†æ˜¯éœ€è¦ç¡®ä¿æ¯ä¸ªåˆ†æ”¯çš„æœ€åä¸€è¡Œä¸ºExpression</li>
<li>å¹¶ä¸”æ¯ä¸ªåˆ†æ”¯çš„Expressionè¿”å›çš„ç±»å‹éœ€è¦ä¸€è‡´</li>
</ul>
</li>
</ul>
<h2 id="Repetition-with-Loops"><a href="#Repetition-with-Loops" class="headerlink" title="Repetition with Loops"></a>Repetition with Loops</h2><h3 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h3><ul>
<li>breakç»“æŸå¾ªç¯<ul>
<li><code>break value;</code>ä½¿å¾—loopä¹Ÿå¯ä»¥åƒ<code>if Expression</code>ä¸€æ ·è¿”å›å€¼</li>
</ul>
</li>
<li>continueè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</li>
<li>å¯¹äºåµŒå¥—loopè¯­å¥<ul>
<li>breakå’Œcontinueé»˜è®¤ä½œç”¨äºå½“å‰ä½œç”¨åŸŸæœ€å†…å±‚çš„loop</li>
<li>å¯ä»¥ä½¿ç”¨<code>&#39;label: loop&#123;&#125;</code>æ¥ç»™loopåŠ æ ‡ç­¾ï¼Œå¹¶ä½¿ç”¨<code>break &#39;label;</code>æ¥ä½¿å¾—breakä½œç”¨äºæ ‡ç­¾loop</li>
</ul>
</li>
</ul>
<h3 id="conditional-loop-with-while"><a href="#conditional-loop-with-while" class="headerlink" title="conditional loop with while"></a>conditional loop with while</h3><p>å®ç°conditional loop</p>
<h3 id="Looping-Through-a-Collection-with-for"><a href="#Looping-Through-a-Collection-with-for" class="headerlink" title="Looping Through a Collection with for"></a>Looping Through a Collection with for</h3><ul>
<li><code>for element in variable&#123;&#125;</code>æ¥éå†ä¸€ä¸ªCollectionï¼ˆå®ç°äº†<code>Iterator</code>traitï¼‰å˜é‡<ul>
<li>æ›´å®‰å…¨ã€æ›´å¿«</li>
<li>ç±»ä¼¼äºC++ä¸­çš„<code>for range</code></li>
</ul>
</li>
<li><code>for i in (lb..hb)</code><ul>
<li>å¯ä»¥ä½¿ç”¨<code>Range</code>è¡¨è¾¾å¼ï¼ˆå®ç°äº†<code>Iterator</code>traitï¼‰æ¥è¿›è¡Œç‰¹å®šæ•°é‡çš„å¾ªç¯</li>
</ul>
</li>
</ul>
<hr>
<h1 id="5-Primitive-Types"><a href="#5-Primitive-Types" class="headerlink" title="5.Primitive Types"></a>5.Primitive Types</h1><p>Rust has a couple of basic types that are directly implemented into the<br>compiler. In this section, weâ€™ll go through the most important ones.</p>
<h2 id="Further-information-4"><a href="#Further-information-4" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/book/ch03-02-data-types.html">Data Types</a></li>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/book/ch04-03-slices.html">The Slice Type</a><h1 id="Data-Types"><a href="#Data-Types" class="headerlink" title="Data Types"></a>Data Types</h1></li>
<li>è™½ç„¶Ruståœ¨å£°æ˜å˜é‡æ—¶å¾ˆæ–¹ä¾¿ï¼Œä¸ç”¨æŒ‡å®šç±»å‹ï¼ˆç±»ä¼¼äºC++ä¸­autoï¼‰ï¼Œå› ä¸ºç¼–è¯‘å™¨èƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶æ¨æ–­<code>let</code>å£°æ˜çš„å˜é‡æ˜¯ä»€ä¹ˆ</li>
<li>Rustæ˜¯å¼ºé™æ€ç±»å‹è¯­è¨€ï¼Œå³å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±æ¨æ–­å‡ºæ‰€æœ‰å˜é‡çš„ç±»å‹<ul>
<li>æ¨æ–­éœ€è¦è¶³å¤Ÿå¤šçš„ä¿¡æ¯ï¼šåˆå§‹å€¼ã€å¦‚ä½•ä½¿ç”¨çš„</li>
</ul>
</li>
<li>åœ¨ä¸€ä¸ªå€¼å¯èƒ½æœ‰å¤šç§ç±»å‹çš„æƒ…å†µï¼Œå¿…é¡»ä½¿ç”¨<code>type annotation</code>æ˜¾å¼åœ°ç»™å‡º</li>
</ul>
<h2 id="Scalar-Types"><a href="#Scalar-Types" class="headerlink" title="Scalar Types"></a>Scalar Types</h2><ul>
<li>intergers, floating-point numbers, booleans, characters</li>
<li>ä»…ä»…ä»£è¡¨ä¸€ä¸ªå€¼</li>
</ul>
<h3 id="Interger-Types"><a href="#Interger-Types" class="headerlink" title="Interger Types"></a>Interger Types</h3><p>ç±»ä¼¼äºC++ä¸­ï¼Œåªæ˜¯ç±»å‹åä¸åŒ</p>
<ul>
<li>å…¶ä¸­æœ‰ç¬¦å·æ•°åº•å±‚ä½¿ç”¨<code>Two&#39;s Complement</code>ï¼Œåœ¨<code>Release</code>æ¨¡å¼å…è®¸<code>overflow</code>ï¼Œä¼šä»æœ€å°å€¼å¼€å§‹é‡æ–°è®¡ç®—</li>
<li>å¯ä»¥ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦overflow</li>
</ul>
<h3 id="Floating-point-numbers"><a href="#Floating-point-numbers" class="headerlink" title="Floating-point numbers"></a>Floating-point numbers</h3><ul>
<li>IEEE-754æ ‡å‡†</li>
</ul>
<h3 id="The-Character-Type"><a href="#The-Character-Type" class="headerlink" title="The Character Type"></a>The Character Type</h3><ul>
<li>Rustä¸­çš„charç±»å‹å 4 Bytes</li>
<li>ä½¿ç”¨Unicodeç¼–ç </li>
</ul>
<h2 id="Compound-Types"><a href="#Compound-Types" class="headerlink" title="Compound Types"></a>Compound Types</h2><ul>
<li>å°†å¤šä¸ªå€¼ç»„ç»‡åˆ°ä¸€ä¸ªç±»å‹</li>
<li>tuple, array</li>
</ul>
<h3 id="tuple-type"><a href="#tuple-type" class="headerlink" title="tuple type"></a>tuple type</h3><ul>
<li>æ³¨æ„ï¼š<ul>
<li>ä¸€æ—¦å®šä¹‰ï¼Œå¤§å°å°±ä¸å¯æ”¹åŠ¨</li>
<li>å¯ä»¥ç»„ç»‡ä¸åŒç±»å‹çš„å€¼</li>
</ul>
</li>
<li>è®¿é—®ï¼š<ul>
<li><code>pattern matching</code>ï¼šè§£æ„ä¸€ä¸ªtuple</li>
<li>ä½¿ç”¨è¿ç®—ç¬¦<code>.</code></li>
</ul>
</li>
</ul>
<h3 id="array-type"><a href="#array-type" class="headerlink" title="array type"></a>array type</h3><ul>
<li>å£°æ˜/å®šä¹‰<ul>
<li><code>type annotation</code>: <ul>
<li><code>[type; size]</code></li>
</ul>
</li>
<li>åˆå§‹åŒ–æ‰€æœ‰å…ƒç´ ä¸ºåŒä¸€å€¼<ul>
<li><code>[inited_value; size]</code></li>
</ul>
</li>
</ul>
</li>
<li>æ³¨æ„<ul>
<li>åªèƒ½ç»„ç»‡ä¸€ç§ç±»å‹çš„å€¼</li>
<li>Rustä¸­arrayçš„å¤§å°å›ºå®š</li>
</ul>
</li>
<li>è®¿é—®ï¼š<ul>
<li>è¿ç®—ç¬¦<code>[]</code></li>
<li>å¦‚æœè®¿é—®è¶…å‡ºæ•°ç»„èŒƒå›´:<code>panic</code></li>
</ul>
</li>
<li><code>Array Slice</code>: ä¸ºäº†æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œåªèƒ½å¼•ç”¨æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²æ¥åˆ›å»º<ul>
<li>å¯ä»¥ä½¿ç”¨<code>&amp;a[begin..end]</code>å¼•ç”¨ä¸€ä¸ªä¸å¯å˜çš„æ•°ç»„Slice</li>
<li><code>&amp;mut</code>å¼•ç”¨å…ƒç´ å¯å˜æ•°ç»„çš„å¯å˜ æ•°ç»„Slice</li>
</ul>
</li>
</ul>
<hr>
<h1 id="6-Vectors"><a href="#6-Vectors" class="headerlink" title="6.Vectors"></a>6.Vectors</h1><p>Vectors are one of the most-used Rust data structures. In other programming<br>languages, theyâ€™d simply be called Arrays, but since Rust operates on a<br>bit of a lower level, an array in Rust is stored on the stack (meaning it<br>canâ€™t grow or shrink, and the size needs to be known at compile time),<br>and a Vector is stored in the heap (where these restrictions do not apply).</p>
<p>Vectors are a bit of a later chapter in the book, but we think that theyâ€™re<br>useful enough to talk about them a bit earlier. We shall be talking about<br>the other useful data structure, hash maps, later.</p>
<h2 id="Further-information-5"><a href="#Further-information-5" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/book/ch08-01-vectors.html">Storing Lists of Values with Vectors</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/primitive.slice.html#method.iter_mut"><code>iter_mut</code></a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.map"><code>map</code></a></li>
</ul>
<h1 id="Storing-Lists-of-Values-with-Vectors"><a href="#Storing-Lists-of-Values-with-Vectors" class="headerlink" title="Storing Lists of Values with Vectors"></a>Storing Lists of Values with Vectors</h1><ul>
<li>ç›¸æ¯”äº<code>Array</code>ç±»å‹ï¼Œ<code>Vector</code>ç±»å‹ä½¿ç”¨<code>Heap</code>å†…å­˜æ¥å­˜å‚¨å˜é‡å€¼</li>
</ul>
<h2 id="Creating"><a href="#Creating" class="headerlink" title="Creating"></a>Creating</h2><ul>
<li>Vectorç±»ä¼¼äºC++ä¸­çš„vectorï¼Œéƒ½æ˜¯æ¨¡ç‰ˆç±»ï¼Œå› æ­¤åœ¨æŒ‡å®šVectorç±»å‹æ—¶éœ€è¦æŒ‡å®šå†…éƒ¨å…ƒç´ ç±»å‹</li>
</ul>
<ol>
<li>ä½¿ç”¨æ„é€ å‡½æ•°<code>new</code>: <code>Vec::new()</code><ol>
<li>å¿…é¡»ä½¿ç”¨<code>type annotation</code></li>
<li>å› ä¸ºåˆå§‹åŒ–æ—¶å†…éƒ¨æ— åˆå§‹å€¼ï¼Œç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç±»å‹</li>
</ol>
</li>
<li>ä½¿ç”¨å®: <code>vec![x,x]</code></li>
</ol>
<h2 id="Updating"><a href="#Updating" class="headerlink" title="Updating"></a>Updating</h2><ul>
<li>éœ€è¦ä½¿ç”¨<code>mut</code>æ ‡è¯†ç¬¦åˆå§‹åŒ–vector</li>
<li><code>push</code>æ–¹æ³•</li>
</ul>
<h2 id="Reading"><a href="#Reading" class="headerlink" title="Reading"></a>Reading</h2><ul>
<li>å› ä¸ºvectorå­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œä¸ºäº†å†…å­˜å®‰å…¨ï¼Œåªèƒ½é€šè¿‡å¼•ç”¨æ¥è®¿é—®vectorä¸­çš„å…ƒç´ <ol>
<li><code>&amp;[]</code>ï¼š<ol>
<li>è¶…å‡ºç•Œé™ä¼š<code>panic</code></li>
</ol>
</li>
<li><code>get</code>æ–¹æ³•ï¼šè¿”å›<code>Option&lt;&amp;T&gt;</code><ol>
<li>å¯ä»¥å¤„ç†<code>None</code>çš„æƒ…å†µ</li>
</ol>
</li>
</ol>
</li>
</ul>
<p>vectorä¸­å…ƒç´ çš„å¼•ç”¨è§„åˆ™ï¼š</p>
<ul>
<li>ç”±äºå­˜å‚¨åœ¨heapä¸­ï¼Œå¹¶ä¸”vectoréœ€è¦å®ç°å¯å˜é•¿åº¦ï¼Œå› æ­¤Rustéœ€è¦ç¡®ä¿å¯¹åŒä¸€ä¸ªæ•°ç»„å…ƒç´ å¤šæ¬¡å¼•ç”¨/å¹¶å‘å®‰å…¨<ul>
<li><code>immutable reference</code>å’Œ<code>mutable reference</code>ä¹‹é—´çš„å…³ç³»ç±»ä¼¼äºè¯»å†™é”</li>
<li>å¹¶ä¸”åœ¨æœ‰<code>immutabl reference</code>å­˜åœ¨æ—¶ï¼Œä¹Ÿä¸å¯ä»¥é€šè¿‡vecå˜é‡æ›´æ”¹å†…å®¹<ul>
<li>å› ä¸ºéšæ—¶å¯èƒ½å› ä¸ºvectorå®¹é‡ä¸å¤Ÿè€Œéœ€è¦æ›´æ”¹å­˜å‚¨ä½ç½®</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Iterating"><a href="#Iterating" class="headerlink" title="Iterating"></a>Iterating</h2><ul>
<li><code>for i in &amp;v&#123;&#125;</code>: è¿”å›å¯¹vecä¸­å…ƒç´ çš„ä¸å¯å˜å¼•ç”¨</li>
<li><code>for i in &amp;mut v&#123;&#125;</code>: è¿”å›å¯å˜å¼•ç”¨<ul>
<li>åœ¨æ”¹å˜å…ƒç´ æ—¶ï¼šéœ€è¦ä½¿ç”¨<code>*</code>è§£å¼•ç”¨</li>
<li>ğŸ™‹ï¼šå’ŒC++ç›¸æ¯”ï¼š<ul>
<li>Rustä¸­è®¿é—®ä¸€ä¸ªå¼•ç”¨å…ƒç´ ä¸éœ€è¦è§£å¼•ç”¨ï¼Œä½†æ˜¯æ”¹å˜å†…å®¹æ—¶éœ€è¦è§£å¼•ç”¨ï¼Ÿ</li>
<li>C++ä¸­ä¼¼ä¹å¯¹å¼•ç”¨å…ƒç´ ç›´æ¥è®¿é—®å’Œæ”¹å˜</li>
</ul>
</li>
<li><code>iter_mut</code>æ–¹æ³•ï¼Œå¯ä»¥ä»¥<code>&amp;mut T</code>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥æ›¿ä»£<code>for i in &amp;mut v&#123;&#125;</code></li>
</ul>
</li>
<li>å¯ä»¥å¯¹Iteratorä½¿ç”¨<code>iter().map()</code>ç»„åˆæ‹³ï¼Œå¿«é€Ÿæ„å»ºå¦ä¸€ä¸ª<code>Collection</code></li>
</ul>
<h2 id="MostCommonWays-Using-an-Enum-to-Store-Multiple-Types"><a href="#MostCommonWays-Using-an-Enum-to-Store-Multiple-Types" class="headerlink" title="MostCommonWays: Using an Enum to Store Multiple Types"></a>MostCommonWays: Using an Enum to Store Multiple Types</h2><ul>
<li><code>enum</code>å¯ä»¥åœ¨å®šä¹‰æ—¶æŒ‡å®šå†…éƒ¨çš„æ‰€æœ‰<code>enum variant</code><ul>
<li><code>enum variant</code>å¯ä»¥åˆå§‹åŒ–ä¸ºä¸åŒç±»å‹</li>
<li>ä½†æ˜¯æ‰€æœ‰<code>enum variant</code>éƒ½è¢«è§†ä¸ºåŒä¸€ç§ç±»å‹<code>enum EnumName</code></li>
</ul>
</li>
<li>å› æ­¤å¯ä»¥ä½¿ç”¨vectorå­˜å‚¨<code>enum EnumName</code>ç±»å‹çš„å˜é‡ï¼Œå› ä¸ºè¯¥ç±»å‹çš„å­˜å‚¨å¤§å°åœ¨å®šä¹‰<code>enum variants</code>æ—¶å°±å›ºå®šäº†</li>
<li>é…åˆ<code>match</code>æ¥è®¿é—®vectorå†…éƒ¨çš„<code>enum</code>å…ƒç´ </li>
</ul>
<hr>
<h1 id="7-Move-Semantics"><a href="#7-Move-Semantics" class="headerlink" title="7.Move Semantics"></a>7.Move Semantics</h1><p>These exercises are adapted from <a target="_blank" rel="noopener" href="https://github.com/pnkfelix">pnkfelix</a>â€˜s <a target="_blank" rel="noopener" href="https://pnkfelix.github.io/rust-examples-icfp2014/">Rust Tutorial</a> â€“ Thank you Felix!!!</p>
<h2 id="Further-information-6"><a href="#Further-information-6" class="headerlink" title="Further information"></a>Further information</h2><p>For this section, the book links are especially important.</p>
<ul>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html">Ownership</a></li>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html">Reference and borrowing</a></li>
</ul>
<h1 id="Ownership"><a href="#Ownership" class="headerlink" title="Ownership"></a>Ownership</h1><p>æ€»çš„æ¥è¯´ï¼ŒRustå¯¹å †å†…å­˜æ•°æ®çš„æ‰€æœ‰æƒæœºåˆ¶ï¼Œç±»ä¼¼äºC++ä¸­çš„<code>std::unique_ptr</code></p>
<ul>
<li><p>Referenceså’ŒBorrowingç±»ä¼¼äº<code>std::make_shared</code></p>
</li>
<li><p>Ownershipæ˜¯ä¸€ç³»åˆ—è§„åˆ™ï¼šRustç”¨äºç¡®ä¿ç¨‹åºå¦‚ä½•æ­£ç¡®çš„ç®¡ç†å†…å­˜</p>
<ul>
<li>Jvav: ä½¿ç”¨Garbage Collection</li>
<li>C: ç¨‹åºå‘˜æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html#the-stack-and-the-heap">Stack vs. Heap</a></p>
<ul>
<li>Stackï¼šLIFOï¼Œå­˜å‚¨å±€éƒ¨å˜é‡ï¼Œç¼–è¯‘æ—¶å¤§å°å°±å·²çŸ¥</li>
<li>Heapï¼šless organizedï¼Œå­˜å‚¨å¯å˜é•¿åº¦çš„ç»“æ„å†…å®¹ï¼Œå¹¶å°†æŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆå­˜å…¥Stack</li>
</ul>
</li>
</ul>
<h2 id="Ownership-Rules"><a href="#Ownership-Rules" class="headerlink" title="Ownership Rules"></a>Ownership Rules</h2><blockquote>
<p>Each value in Rust has an owner.<br>There can only be one owner at a time.<br>When the owner goes out of scope, the value will be dropped.</p>
</blockquote>
<ul>
<li>ç±»æ¯”C++ä¸­çš„<code>std::uniquer_ptr</code>, <code>std::unique_lock</code>ç­‰<code>RAII</code>æœºåˆ¶</li>
</ul>
<h2 id="Variable-Scope"><a href="#Variable-Scope" class="headerlink" title="Variable Scope"></a>Variable Scope</h2><ul>
<li>ä»è¯¥å˜é‡å®šä¹‰ï¼Œåˆ°å‡½æ•°ä½“æˆ–è€…<code>&#123;&#125;</code>çš„æœ«ç«¯</li>
</ul>
<h2 id="The-String-Type"><a href="#The-String-Type" class="headerlink" title="The String Type"></a>The String Type</h2><ul>
<li><code>String</code>ç±»ä¸<code>string literial</code>ä¸åŒ<ul>
<li><code>String</code>å­˜å‚¨åœ¨Heapï¼Œå¹¶ä¸”æ˜¯<code>mutable</code></li>
<li><code>String</code>ç›´æ¥ç¡¬ç¼–ç åˆ°ä»£ç ä¸­ï¼Œå¹¶ä¸”æ˜¯<code>immutable</code></li>
</ul>
</li>
</ul>
<h2 id="Memory-and-Allocation"><a href="#Memory-and-Allocation" class="headerlink" title="Memory and Allocation"></a>Memory and Allocation</h2><ul>
<li>å¯¹äºèƒ½å¤Ÿä¸»åŠ¨ç”³è¯·heapç©ºé—´çš„è¯­è¨€ï¼Œæ­£ç¡®çš„é‡Šæ”¾heapå†…å­˜ä¹Ÿå¾ˆå…³é”®<ol>
<li>ä½¿ç”¨Garbage Collectionç³»ç»Ÿ</li>
<li>æ‰‹åŠ¨ä¸»åŠ¨é‡Šæ”¾ï¼šå¯èƒ½ä¼šé”™è¯¯é‡Šæ”¾<ol>
<li>double free</li>
<li>æ‚¬ç©ºæŒ‡é’ˆ</li>
</ol>
</li>
<li>Rustï¼šä½¿ç”¨æ‰€æœ‰æƒæœºåˆ¶â€”â€”ç¡®ä¿èƒ½å¤Ÿåœ¨æ•°æ®æœ€åä¸€æ¬¡ä½¿ç”¨åæ­£ç¡®é‡Šæ”¾å†…å­˜ä¸€æ¬¡</li>
</ol>
</li>
<li>Rustçš„å®ç°ï¼šå¯¹å †å†…å­˜æ•°æ®çš„æœ€åä¸€ä¸ªçš„å¼•ç”¨å‡ºäº†ä½œç”¨åŸŸä¹‹åï¼ŒRustè°ƒç”¨å…¶dropå‡½æ•°å®Œæˆå¯¹heapç©ºé—´é‡Šæ”¾<ul>
<li>ç±»ä¼¼äºC++ä¸­çš„RAII</li>
</ul>
</li>
</ul>
<h2 id="Variables-and-Data-Interacting-with-Move"><a href="#Variables-and-Data-Interacting-with-Move" class="headerlink" title="Variables and Data Interacting with Move"></a>Variables and Data Interacting with Move</h2><p>é€šè¿‡å·²æœ‰çš„Stringå˜é‡æ„é€ æ–°String(ç›´æ¥èµ‹å€¼æˆ–è€…ä½œä¸ºå‡½æ•°arguments)ï¼š</p>
<ul>
<li>æŒ‰ç†æ¥è¯´åº”è¯¥å¦‚ä¸‹ï¼šä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶æŒ‡å‘ä¸€ä¸ªå¯¹å†…å­˜ç©ºé—´</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/11/image.png" alt="image"></p>
<p>ä½†æ˜¯ç”±äºRustçš„æ‰€æœ‰æƒæœºåˆ¶ï¼šä¼šå°†å †å†…å­˜ç©ºé—´çš„æ‰€æœ‰æƒMoveç»™ç¬¬äºŒä¸ªStringå˜é‡ï¼Œé¿å…ä¸¤ä¸ªStringå˜é‡ä¸¤æ¬¡è°ƒç”¨dropæ–¹æ³•ï¼Œå¯¼è‡´double freeé”™è¯¯</p>
<ul>
<li>ç±»ä¼¼äºC++ä¸­çš„<code>Move Assignment Operator</code>/<code>Constructor</code></li>
<li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/11/image-1.png" alt="image-1"></li>
</ul>
<h2 id="Variables-and-Data-Interacting-with-Clone"><a href="#Variables-and-Data-Interacting-with-Clone" class="headerlink" title="Variables and Data Interacting with Clone"></a>Variables and Data Interacting with Clone</h2><ul>
<li>Rusté»˜è®¤ä¸ä¼šéšå¼åœ°å¯¹ä»»ä½•å †æ•°æ®å¯¹è±¡ä½¿ç”¨deep copy</li>
<li>ä½†æ˜¯å †å†…å­˜å¯¹è±¡å¯ä»¥æ˜¾å¼åœ°è°ƒç”¨<code>clone</code>æ–¹æ³•æ¥å®Œæˆdeep copy</li>
</ul>
<h2 id="Stack-Only-Data-Copy"><a href="#Stack-Only-Data-Copy" class="headerlink" title="Stack-Only Data: Copy"></a>Stack-Only Data: Copy</h2><ul>
<li>å¯¹ä»»ä½•ç¼–è¯‘æ—¶æœŸå°±å·²çŸ¥å¤§å°çš„æ•°æ®ç±»å‹ï¼ˆå†…ç½®ç±»å‹ï¼‰ï¼ŒRusté»˜è®¤å…¶èµ‹å€¼æ“ä½œä½¿ç”¨Cloneï¼Œå› ä¸ºå¼€é”€å¯å¿½ç•¥ä¸è®°</li>
<li>Rustå¯ä»¥ä¸ºå¸Œæœ›ä½¿ç”¨Cloneæ“ä½œçš„è‡ªå®šä¹‰ç±»å‹å®ç°<code>Copy</code>trait<ul>
<li>ç±»ä¼¼äºC++ä¸­<code>move assignment = delete</code>æ“ä½œ</li>
<li><code>Copy</code>traitå’Œ<code>Drop</code>traitäº’æ–¥</li>
</ul>
</li>
</ul>
<h2 id="Ownership-and-Functions"><a href="#Ownership-and-Functions" class="headerlink" title="Ownership and Functions"></a>Ownership and Functions</h2><ul>
<li>å¯¹äºä¼ å…¥å‡½æ•°argumentçš„å˜é‡ï¼Œå…¶æ‰€æœ‰æƒæœºåˆ¶ä¸èµ‹å€¼ç±»ä¼¼ï¼Œå³Moveè¿˜æ˜¯Copyè¿™æ˜¯ä¸€ä¸ªé—®é¢˜</li>
</ul>
<h2 id="Return-Values-and-Scope"><a href="#Return-Values-and-Scope" class="headerlink" title="Return Values and Scope"></a>Return Values and Scope</h2><ul>
<li>å¯ä»¥å°†å‡½æ•°å†…éƒ¨è·å¾—çš„å †å†…å­˜æ•°æ®çš„æ‰€æœ‰æƒï¼Œé€šè¿‡è¿”å›å€¼Move</li>
</ul>
<h1 id="Reference-and-borrowing"><a href="#Reference-and-borrowing" class="headerlink" title="Reference and borrowing"></a>Reference and borrowing</h1><ul>
<li>Rustçš„Borrowingï¼šå¯¹æŸä¸ªownå †å†…å­˜æ•°æ®çš„å˜é‡åˆ›å»ºReferenceï¼Œå¯ä»¥åœ¨ä¸Moveæ‰€æœ‰æƒçš„æƒ…å†µä¸‹ï¼Œä½¿å¾—å¯ä»¥é€šè¿‡å¦ä¸€ä¸ªå˜é‡è®¿é—®æ•°æ®å†…å®¹ï¼Œå³å¦ä¸€ä¸ªå˜é‡å¹¶ä¸æ‹¥æœ‰è¯¥æ•°æ®<ul>
<li>å› æ­¤å½“å¼•ç”¨ç±»å‹å‡ºscopeæ—¶ï¼Œå¹¶ä¸ä¼šè°ƒç”¨drop</li>
<li>ç±»ä¼¼äºæŒ‡é’ˆï¼Œä½†æ˜¯ç¼–è¯‘å™¨ç¡®ä¿å…¶æŒ‡å‘æœ‰æ•ˆçš„å†…å®¹</li>
</ul>
</li>
<li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/11/image-2.png" alt="image-2"></li>
</ul>
<h2 id="Mutable-References"><a href="#Mutable-References" class="headerlink" title="Mutable References"></a>Mutable References</h2><ul>
<li><code>&amp;mut v</code>å¯ä»¥åˆ›å»ºå¯å˜å¼•ç”¨<ul>
<li>ç±»ä¼¼äºå˜é‡å®šä¹‰ï¼Œç”¨äºåˆ›å»ºå¼•ç”¨ç±»å‹çš„<code>&amp;</code>é»˜è®¤ä¹Ÿæ˜¯<code>immutable</code></li>
</ul>
</li>
</ul>
<p>ç±»ä¼¼äºè¯»å†™é”ï¼šé¿å…æ•°æ®ç«äº‰ï¼Œä½†æ˜¯åŒºåˆ«æ˜¯Ruståœ¨ç¼–è¯‘æœŸé—´å°±é¿å…äº†</p>
<ul>
<li>ä¸€ä¸ªå †å†…å­˜æ•°æ®åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ª<code>mutable reference</code><ul>
<li><blockquote>
<p>The restriction preventing multiple mutable references to the same data at the same time allows for mutation but in a very controlled fashion</p>
</blockquote>
</li>
</ul>
</li>
<li>å¯ä»¥åŒæ—¶æœ‰å¤šä¸ª<code>immutabl references</code></li>
<li><code>mutable reference</code>å’Œ<code>immutable reference</code>ä¸èƒ½åŒæ—¶å‡ºç°</li>
<li>Hintï¼šåŒä¸€æ—¶é—´æ˜¯æŒ‡Scopeæ˜¯<code>overlap</code>çš„ï¼ŒRustä¼šå°†æœ€åä¸€æ¬¡å˜é‡ä½¿ç”¨ä½œä¸º<code>end of scope</code></li>
</ul>
<h2 id="Dangling-References"><a href="#Dangling-References" class="headerlink" title="Dangling References"></a>Dangling References</h2><ul>
<li>ç±»ä¼¼äºC++ä¸­çš„æ‚¬ç©ºæŒ‡é’ˆ</li>
<li>Rustçš„ç¼–è¯‘å™¨ä¼šé€šè¿‡<code>ownership</code>å’Œ<code>borrowing</code>æœºåˆ¶ç¡®ä¿<code>reference</code>çš„æ­£ç¡®æ€§</li>
</ul>
<hr>
<h1 id="8-Structs"><a href="#8-Structs" class="headerlink" title="8.Structs"></a>8.Structs</h1><p>Rust has three struct types: a classic C struct, a tuple struct, and a unit struct.</p>
<h2 id="Further-information-7"><a href="#Further-information-7" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch05-01-defining-structs.html">Structures</a></li>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html">Method Syntax</a></li>
</ul>
<h2 id="Structures"><a href="#Structures" class="headerlink" title="Structures"></a>Structures</h2><ul>
<li><p>ä¸Rustçš„Tuple</p>
<ul>
<li>ç›¸åŒç‚¹ï¼šèƒ½å¤Ÿç»„ç»‡å…¶å¤šä¸ªç±»å‹ä¸åŒçš„ç›¸å…³æ•°æ®</li>
<li>ä¸åŒç‚¹ï¼šstructç±»å‹å®šä¹‰éœ€è¦ç»™æ¯ä¸ªfiledå˜é‡åï¼Œå¹¶ä¸”è®¿é—®ä½¿ç”¨å˜é‡å</li>
</ul>
</li>
<li><p>å®šä¹‰å’Œåˆå§‹åŒ–ä¸€ä¸ªstructå¯¹è±¡ï¼š<code>T &#123;t1: value1,&#125;</code></p>
</li>
<li><p>èµ‹å€¼æ“ä½œåˆ™å’Œå…¶ä»–æ•°æ®ç±»å‹ä¸€è‡´ï¼šä»»ä½•è¿”å›è¯¥ç±»å‹çš„Expression</p>
</li>
</ul>
<h3 id="Using-the-Field-Init-Shorthand"><a href="#Using-the-Field-Init-Shorthand" class="headerlink" title="Using the Field Init Shorthand"></a>Using the <code>Field Init Shorthand</code></h3><ul>
<li>å¦‚æœæœ‰å·²å®šä¹‰çš„å˜é‡åå’Œstructç±»å‹ä¸­æˆå‘˜å˜é‡åç›¸åŒï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡åè€Œä¸æ˜¯<code>name:value</code>æ¥åˆå§‹åŒ–</li>
</ul>
<h3 id="Creating-Instances-from-other-Instances-with-Struct-Update-Syntax"><a href="#Creating-Instances-from-other-Instances-with-Struct-Update-Syntax" class="headerlink" title="Creating Instances from other Instances with Struct Update Syntax"></a>Creating Instances from other Instances with <code>Struct Update Syntax</code></h3><ul>
<li><code>struct update syntax</code>ï¼š<code>..v2</code>å…¶ä»–æœªæ˜¾å¼åœ°ç»™æ–°å®ä¾‹åˆå§‹å€¼çš„filedï¼Œä½¿ç”¨v2çš„filedæ¥åˆå§‹åŒ–  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let v1 = T &#123;</span><br><span class="line">    field1: value,</span><br><span class="line">    ..v2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Hintï¼šæœ¬è´¨ä¸Šæ˜¯Moveäº†èµ‹å€¼å®ä¾‹çš„field<ul>
<li>å› æ­¤è¯¥è¯­æ³•åï¼Œåªèƒ½ä½¿ç”¨æœªè¢«<code>move</code>çš„filed</li>
</ul>
</li>
</ul>
<h2 id="Tuple-Struct-without-named-fields-to-create-differenct-types"><a href="#Tuple-Struct-without-named-fields-to-create-differenct-types" class="headerlink" title="Tuple Struct: without named fields to create differenct types"></a>Tuple Struct: without named fields to create differenct types</h2><ul>
<li>structå’Œtupleç±»å‹çš„æ‹¼æ¥ç‰ˆ<ul>
<li>å¯ä»¥ä½¿ç”¨Tuple Structçš„ç±»å‹åæ¥åŒºåˆ«ä¸åŒçš„tuple structå®ä¾‹</li>
<li>ä¸éœ€è¦ç»™filedå‘½åï¼Œé€šè¿‡ä¸‹æ ‡è®¿é—®</li>
</ul>
</li>
</ul>
<h2 id="Unit-Struct"><a href="#Unit-Struct" class="headerlink" title="Unit Struct"></a>Unit Struct</h2><ul>
<li>å®šä¹‰Unit Structï¼š<code>struct T;</code></li>
<li>å®šä¹‰å®ä¾‹ï¼š<code>let v = T;</code></li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸‰ç§Structå®šä¹‰å…³é”®è¯ç›¸åŒï¼Œåªæ˜¯å®šä¹‰æ—¶structç±»å‹ååçš„æ‹¬å·ç§ç±»ä¸åŒ</li>
</ul>
<h1 id="Method-Syntax"><a href="#Method-Syntax" class="headerlink" title="Method Syntax"></a>Method Syntax</h1><ul>
<li>ç±»ä¼¼äºC++ä¸­çš„æ–¹æ³•ï¼šå®šä¹‰äºç±»å†…éƒ¨<ul>
<li>å®šä¹‰äº<code>struct</code>, <code>enum</code>, <code>trait object</code>å†…éƒ¨</li>
<li>æ˜¾å¼åœ°å°†<code>self</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</li>
</ul>
</li>
</ul>
<h2 id="Defining-Methods"><a href="#Defining-Methods" class="headerlink" title="Defining Methods"></a>Defining Methods</h2><ul>
<li><p>Rustå°†ä¸€ä¸ª<code>struct</code>çš„æ‰€æœ‰æ–¹æ³•éƒ½å®ç°åœ¨ä¸€ä¸ªBlock:<code>impl T &#123;&#125;</code>ä¸­</p>
<ul>
<li>ç±»ä¼¼äºC++ä¸­çš„Classçš„å‘½åç©ºé—´ï¼š</li>
</ul>
</li>
<li><p>ä¸€ä¸ª<code>struct</code>çš„æ¯ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯<code>self/&amp;self/&amp;mut self</code>ï¼šåˆ†åˆ«å¯¹åº”äºä¼ å…¥æ‰€æœ‰æƒï¼Œä¼ å…¥immutable referenceï¼Œä¼ å…¥mutable reference</p>
<ul>
<li>Rustä¸­ç»™è¢«å®ç°çš„<code>struct</code>åä¸€ä¸ªåˆ«åâ€”â€”<code>Self</code></li>
<li><code>self</code>å®é™…ä¸Šç­‰æ•ˆäºâ€”â€”<code>self: Self</code><ul>
<li>åŒç†<code>&amp;self</code>ç­‰æ•ˆäº<code>self: &amp;Self</code></li>
</ul>
</li>
</ul>
</li>
<li><p>é€šè¿‡è¿ç®—ç¬¦<code>.</code>æ¥ä½¿ç”¨method</p>
</li>
<li><p>Rustå®ç°äº†<code>automatic referencing and dereferencing</code>ï¼š</p>
<ul>
<li>å› æ­¤ä¸åŒäº<code>C++</code>å¯¹äºç±»å®ä¾‹æŒ‡é’ˆè°ƒç”¨æ–¹æ³•ï¼šä½¿ç”¨<code>-&gt;</code></li>
</ul>
</li>
</ul>
<h2 id="Associated-Functions"><a href="#Associated-Functions" class="headerlink" title="Associated Functions"></a>Associated Functions</h2><p>å®šä¹‰åœ¨<code>impl T:&#123;&#125;</code>ä¸­çš„éƒ½å«åš<code>associated functions</code>ï¼Œå› ä¸ºä¸<code>T</code>éƒ½ç›¸å…³ã€‚ç±»ä¼¼äºC++ä¸­çš„å‘½åç©ºé—´ï¼Œå®šä¹‰äºæ­¤çš„ä¸ä¸€å®šä»¥ç±»å®ä¾‹ä¸ºå‚æ•°</p>
<ul>
<li>Method: ç¬¬ä¸€ä¸ªå‚æ•°ä¸º<code>Self</code></li>
<li>Tool Functions: é€šå¸¸ç”¨äºä½œ<code>Constructor</code>ï¼Œä¾‹å¦‚<code>String::new()</code><ul>
<li>è¯¥å‡½æ•°çš„è°ƒç”¨<code>T::f()</code></li>
</ul>
</li>
</ul>
<hr>
<h1 id="9-Enums"><a href="#9-Enums" class="headerlink" title="9.Enums"></a>9.Enums</h1><p>Rust allows you to define types called â€œenumsâ€ which enumerate possible values.<br>Enums are a feature in many languages, but their capabilities differ in each language. Rustâ€™s enums are most similar to algebraic data types in functional languages, such as F#, OCaml, and Haskell.<br>Useful in combination with enums is Rustâ€™s â€œpattern matchingâ€ facility, which makes it easy to run different code for different values of an enumeration.</p>
<h2 id="Further-information-8"><a href="#Further-information-8" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch06-00-enums.html">Enums</a></li>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch18-03-pattern-syntax.html">Pattern syntax</a><h1 id="Enums-å¼ºå¤§çš„å¾ˆï¼Œå†…éƒ¨enum-varientæœ‰ç€structçš„åŠŸèƒ½"><a href="#Enums-å¼ºå¤§çš„å¾ˆï¼Œå†…éƒ¨enum-varientæœ‰ç€structçš„åŠŸèƒ½" class="headerlink" title="Enums(å¼ºå¤§çš„å¾ˆï¼Œå†…éƒ¨enum varientæœ‰ç€structçš„åŠŸèƒ½)"></a>Enums(å¼ºå¤§çš„å¾ˆï¼Œå†…éƒ¨enum varientæœ‰ç€structçš„åŠŸèƒ½)</h1><h2 id="Defining-an-Enum"><a href="#Defining-an-Enum" class="headerlink" title="Defining an Enum"></a>Defining an Enum</h2></li>
<li>struct: å°†ä¸€ç»„filedsç»„ç»‡åœ¨ä¸€èµ·</li>
<li>enumï¼šå°†ä¸€ç»„å¯èƒ½çš„å€¼ï¼Œç»„ç»‡åœ¨ä¸€èµ·<ul>
<li><code>enum varients</code>: ä»£è¡¨è¯¥<code>enum</code>ç±»å‹å¯èƒ½çš„å€¼ï¼Œç±»ä¼¼äºå­ç±»ä¸çˆ¶ç±»çš„å…³ç³»ï¼Œä»–ä»¬çš„ç±»å‹ä¸€è‡´ï¼ˆ<code>enum</code>ç±»å‹ï¼‰ï¼Œä½†æ˜¯å€¼ä¸åŒ</li>
</ul>
</li>
</ul>
<h3 id="Enum-Values"><a href="#Enum-Values" class="headerlink" title="Enum Values"></a>Enum Values</h3><ul>
<li><p>å³<code>enum varients</code>ï¼Œå®šä¹‰<code>enum</code>å®ä¾‹æ—¶ï¼š</p>
<ul>
<li><code>let v = E::varient</code></li>
</ul>
</li>
<li><p>æ¯ä¸ª<code>enum varient</code>å¯ä»¥æœ‰<code>assciated data</code></p>
<ul>
<li>æ¯ä¸ª<code>associated data</code>å®é™…ä¸Šç±»ä¼¼äº<code>struct</code>ç±»å‹ï¼šç»„ç»‡å¤šç§ä¸åŒç±»å‹çš„å€¼<ul>
<li>ç±»ä¼¼ä¸‰ç§<code>struct</code>ç±»å‹â€”â€”ååˆ†å¼ºå¤§ï¼Œ<del>è¿™è¿˜è¦ä»€ä¹ˆè‡ªè¡Œè½¦</del></li>
</ul>
</li>
<li>å¹¶ä¸”åœ¨åˆå§‹åŒ–ä¸€ä¸ª<code>enum varient</code>å®ä¾‹æ—¶ï¼Œ<code>E::varient()</code>æˆä¸ºäº†ä¸€ä¸ª<code>Constructor</code></li>
</ul>
</li>
<li><p>ç±»ä¼¼äºstructç±»å‹ï¼Œä¹Ÿå¯ä»¥ä¸º<code>enum</code>ç±»å‹å®ç°Method</p>
</li>
</ul>
<h3 id="Optin-Enum-Advantages-Over-Null-Values"><a href="#Optin-Enum-Advantages-Over-Null-Values" class="headerlink" title="Optin Enum: Advantages Over Null Values"></a><code>Optin</code> Enum: Advantages Over Null Values</h3><ul>
<li>æ ‡å‡†åº“å†…ç½®ä¸€ä¸ª<code>enum</code>ç±»å‹<code>Option</code>ï¼šå¼ºåˆ¶æˆ–è€…ç¡®ä¿ç¨‹åºçŒ¿å¤„ç†æ‰€æœ‰æƒ…å†µï¼ˆå€¼ä¸ºNULLï¼‰<ul>
<li>```<br>enum Option<T> {<pre><code>Some(T),
None
</code></pre>
}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">- Rustæ˜¯é™æ€å¼ºç±»å‹è¯­è¨€ï¼Œå¿…ç„¶`Option&lt;T&gt;`å’Œ`T`æ˜¯ä¸åŒç±»å‹ï¼Œä¹Ÿä¸èƒ½ç›´æ¥ç›¸äº’æ“ä½œ</span><br><span class="line">  - å¿…é¡»å…ˆä»`Option&lt;T&gt;`è½¬æ¢ä¸º`T`:https://doc.rust-lang.org/std/option/enum.Option.html</span><br><span class="line">    - ä¾‹å¦‚ä½¿ç”¨`match`æ¯”è¾ƒ`enum varients`ï¼Œå¹¶åœ¨`match arm`ä¸­bindingå…¶å†…éƒ¨çš„å€¼</span><br><span class="line">    - è¿™å°±æ˜¯Rustç¡®ä¿ç¨‹åºçŒ¿å¤„ç†Noneæƒ…å†µçš„ç­–ç•¥</span><br><span class="line">  - ä¸C++ä¸­çš„`Option`æ¨¡ç‰ˆç±»ä¸åŒï¼šC++ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨`-&gt;`æ¥è®¿é—®å…¶å†…éƒ¨æ•°æ®ï¼ˆé¦–å…ˆç¡®ä¿ä¸æ˜¯Noneï¼‰</span><br><span class="line"></span><br><span class="line">## `match` Control Flow Construct</span><br><span class="line">- `match`å¯ä»¥å°†ä»»æ„ä¸€ä¸ªç±»å‹ï¼ˆé€šå¸¸ä¸º`enum`ï¼‰çš„å€¼ä¸ä¸€ç³»åˆ—`pattern`ï¼ˆé€šå¸¸ä¸º`enum varients`ï¼‰è¿›è¡ŒåŒ¹é…</span><br><span class="line">  - æ¯”`if`åªèƒ½åŒ¹é…å¸ƒå°”è¡¨è¾¾å¼å¼ºå¤§çš„å¤š</span><br><span class="line"></span><br><span class="line">- æ¯ä¸ª`pattern`å¯¹åº”ä¸€ä¸ª`matching arm`</span><br><span class="line">  - æ¯ä¸ª`matching arm`æ˜¯éœ€è¦æ‰§è¡Œçš„ä»£ç ï¼Œ**éœ€è¦ç¡®ä¿æ¯ä¸ª`arm`è¿”å›ç±»å‹ä¸€è‡´çš„å€¼**ï¼Œå³`matching arm`æ˜¯ä¸€ä¸ª`expression`</span><br><span class="line"></span><br><span class="line">### Patterns That Bind to Values</span><br><span class="line">- å¯¹äº`enum`ç±»å‹çš„matchï¼Œå¯ä»¥åœ¨`match arm`ä¸­å°†`enum varient`å†…éƒ¨`associated data`ç»‘å®šç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä½¿å¾—èƒ½åœ¨`match arm`ä¸­è®¿é—®</span><br><span class="line">  - ç±»ä¼¼äº`tuple`è§£æ„å„ä¸ªå…ƒç´ </span><br><span class="line"></span><br><span class="line">### Matching with `Option&lt;T&gt;`</span><br><span class="line">- `match` + `enum` å¤§æ³•å¥½</span><br><span class="line">- &gt; match against an enum, bind a variable to the data inside, and then execute code based on it.</span><br><span class="line"></span><br><span class="line">### Matched Are Exhausive</span><br><span class="line">- Rustä¸­`match`ä¼šç©·å°½ç»™å®šå€¼çš„æ‰€æœ‰`pattern`</span><br><span class="line"></span><br><span class="line">### Catch-all Patterns and the `_`</span><br><span class="line">- Rustå…è®¸æˆ‘ä»¬åªæ˜¾å¼åœ°ç‰¹æ®Šå¤„ç†ä¸€éƒ¨åˆ†`pattern`ï¼Œå…¶ä»–çš„åˆ™é»˜è®¤å¤„ç†æˆ–è€…å¿½è§†</span><br><span class="line">  - åœ¨æœ€åä¸€ä¸ª`pattern`</span><br><span class="line">    - ä½¿ç”¨ä¸€ä¸ªå˜é‡å`other`ï¼šå¯ä»¥å°†å€¼ç»‘å®šåˆ°è¯¥å˜é‡</span><br><span class="line">    - ä½¿ç”¨`_`: ä¸ç»‘å®šå€¼</span><br><span class="line">      - ä½†æ˜¯éœ€è¦ç¡®ä¿æ¯ä¸ª`match arm`è¿”å›å€¼ç±»å‹ä¸€è‡´ï¼š`()`åˆ™ä¸ºè¿”å›voidï¼Ÿ</span><br><span class="line"></span><br><span class="line">## Concise Control Flow with `if let`</span><br><span class="line">- `if let`è¯­æ³•ç³–ï¼Œé€‚ç”¨äºåªå¸Œæœ›å¤„ç†ä¸€ä¸ªå€¼çš„ä¸€ç§æƒ…å†µ</span><br><span class="line">  - `if let pattern(binding) = matched_value &#123;use binding&#125; else &#123;&#125;`</span><br><span class="line">  - ä»¥æ›´å°‘çš„ä»£ç å®ç°äº†ä¸‹è¿°`match`ç›¸åŒçš„åŠŸèƒ½</span><br></pre></td></tr></table></figure>
let new_v = match matched_value{<pre><code>pattern(binding) =&gt; &#123;use binding&#125;,
_ =&gt; &#123;&#125;
</code></pre>
}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Pattern</span><br><span class="line">æœ‰ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨:å¯ä»¥ä½¿ç”¨`tuple`åŒ…è£¹å¤šä¸ªè¿”å›`Enum`ç±»å‹çš„è¡¨è¾¾å¼ï¼Œå¹¶ä½¿ç”¨`tuple`è§£æ„æ¥åŒæ—¶`match`ã€‚</span><br><span class="line">- ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`match arm`çš„æ•°é‡æ˜¯å¤šä¸ªè¡¨è¾¾å¼å¯èƒ½ç»“æœçš„å…¨æ’åˆ—ï¼Œå¯ä»¥ä½¿ç”¨`_`æ¥å¿½ç•¥ä¸€äº›ä¸éœ€è¦çš„</span><br><span class="line">- å¯ä»¥å½“å­—å…¸æ¥æŸ¥é˜…ï¼š[Pattern syntax](https://doc.rust-lang.org/book/ch18-03-pattern-syntax.html)</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># 10.Strings</span><br><span class="line"></span><br><span class="line">Rust has two string types, a string slice (`&amp;str`) and an owned string (`String`).</span><br><span class="line">We&#x27;re not going to dictate when you should use which one, but we&#x27;ll show you how</span><br><span class="line">to identify and create them, as well as use them.</span><br><span class="line"></span><br><span class="line">## Further information</span><br><span class="line"></span><br><span class="line">- [âœ…] [Strings](https://doc.rust-lang.org/book/ch08-02-strings.html)</span><br><span class="line"></span><br><span class="line"># Storing UTF-8 Encoded Test with Strings</span><br><span class="line">- Rustä¸­çš„Stringæ˜¯`Collection`: åº•å±‚å®ç°ä¸º</span><br><span class="line">  - `a collection of Bytes`</span><br><span class="line">  - `some methods to help interupt Bytes as text`</span><br><span class="line"></span><br><span class="line">## What is String?</span><br><span class="line">- `String`ï¼š</span><br><span class="line">  - Rustæ ‡å‡†åº“å®ç°çš„</span><br><span class="line">- `str`ï¼š`[..]`</span><br><span class="line">  - string sliceï¼Œ</span><br><span class="line">  - ç”±Rust Coreå®ç°ï¼Œå¸¸ä»¥`&amp;str`çš„å½¢å¼ä½¿ç”¨</span><br><span class="line">- Hint:</span><br><span class="line">  - ä¸¤ä¸ªä¸åŒçš„ç±»å‹ï¼Œä½†éƒ½æ˜¯`UTF-8`ç¼–ç </span><br><span class="line">  - å¯ä»¥å°†`&amp;String`å¼ºåˆ¶è½¬æ¢/éšå¼è½¬æ¢ä¸º`&amp;[..]`å³`&amp;str`</span><br><span class="line"></span><br><span class="line">## Creating a New String</span><br><span class="line">- Rustä¸­çš„Stringåº•å±‚å®ç°æ˜¯åŸºäº`Vec&lt;T&gt;`ï¼Œå› æ­¤Stringå¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„method</span><br><span class="line"></span><br><span class="line">Createï¼š</span><br><span class="line">- åˆ›å»ºä¸€ä¸ªç©ºStringï¼š`String::new()`</span><br><span class="line">- ä»ä¸€ä¸ª`string literal`åˆ›å»ºï¼š</span><br><span class="line">  - `.to_string()`</span><br><span class="line">  - `String::from()`</span><br><span class="line"></span><br><span class="line">## Updating a String</span><br><span class="line">### Appending to a String with `push_str` and `push`</span><br><span class="line">- æ–¹æ³•`push_str()`ï¼šå°†`str`append</span><br><span class="line">  - ä¼šä»¥å¼•ç”¨çš„æ–¹å¼ä¼ å…¥ï¼Œå¹¶appendåˆ°å°¾éƒ¨ï¼šå³ä»¥`&amp;str`string sliceçš„å½¢å¼</span><br><span class="line">- æ–¹æ³•`push()`åªèƒ½appendä¸€ä¸ªchar</span><br><span class="line"></span><br><span class="line">### Concatenation with the `+` Operator or the `format!` Macro</span><br><span class="line">`+`å’Œ`format!`çš„å­¦ä¹ èƒ½åŠ æ·±å¯¹Rustæ‰€æœ‰æƒæœºåˆ¶çš„ç†è§£</span><br><span class="line">- ä¸¤ç§æ–¹æ³•å¯ä»¥æ ¹æ®ä¸¤ä¸ªå·²å®šä¹‰çš„Stringæ‹¼æ¥</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>+<code>: åº•å±‚å®ç°ä¸º</code>fn add(self, s: &amp;str) -&gt; String</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ä¼šå°†`+`å·¦ä¾§Stringçš„æ‰€æœ‰æƒæ‹¿èµ°ï¼Œ</span><br><span class="line">- å°†å³ä¾§`&amp;String`å¼ºåˆ¶è½¬æ¢ä¸º`&amp;[..]`å³`&amp;str`</span><br><span class="line">- å¹¶è¿”å›å·¦ä¾§Stringçš„æ‰€æœ‰æƒ</span><br><span class="line">- Hintï¼šå› æ­¤è™½ç„¶çœ‹æ¥æ–°å»ºäº†ä¸€ä¸ªStringï¼Œä½†å®é™…ä¸Šæ˜¯åœ¨å·¦ä¾§Stringçš„åŸºç¡€ä¸Šappend</span><br><span class="line"></span><br><span class="line">`format!`å®ï¼š</span><br><span class="line">- å¹¶ä¸ä¼šæ‹¿å»ä»»ä½•Stringçš„æ‰€æœ‰æƒ</span><br><span class="line">- å› æ­¤æ˜¯åœ¨å†…éƒ¨æ–°å»ºäº†ä¸€ä¸ªStringå§</span><br><span class="line"></span><br><span class="line">## Indexing into Strings</span><br><span class="line">- Rustä¸­Stringä¸èƒ½ç›´æ¥ä½¿ç”¨`[]`æ¥ç´¢å¼•å­—ç¬¦</span><br><span class="line"></span><br><span class="line">### Internal Representation</span><br><span class="line">Rustä¸­Stringçš„åº•å±‚å®ç°`Vec&lt;u8&gt;`</span><br><span class="line">- å¹¶ä½¿ç”¨UTF-8ç¼–ç </span><br><span class="line">- å› æ­¤ä½¿ç”¨`[]`å¯èƒ½ä¼šè·å¾—æ— æ•ˆçš„`Byte`å€¼</span><br><span class="line"></span><br><span class="line">### Bytes and Scalar Values and Grapheme Clusters! Oh My!</span><br><span class="line">ç”±äºRustä»¥`Vec&lt;u8&gt;`çš„æ ¼å¼å­˜å‚¨Stringï¼Œå¹¶ç¼–ç ä¸ºUTF-8</span><br><span class="line">- Rustæä¾›ä¸‰ä¸ªè§’åº¦è§£æStringï¼šå› æ­¤ä½¿ç”¨`[]`ä¼šæ··æ·†ä¸‹é¢ä¸‰ç§æ¦‚å¿µ</span><br><span class="line">  - Bytes</span><br><span class="line">  - Scalar Valuesï¼šå³Unicode Scalar Values</span><br><span class="line">  - Grapheme Clusters: æœ€æ¥è¿‘æˆ‘ä»¬è®¤ä¸ºçš„å­—ç¬¦</span><br><span class="line"></span><br><span class="line">### Slicing Strings</span><br><span class="line">Rustä¸å…è®¸`[]`æ¥ç´¢å¼•å•ä¸ªå­—ç¬¦</span><br><span class="line">- Rustæä¾›äº†`[]`+`Range`ï¼Œå…è®¸è·å¾—Stringçš„`&amp;str`åˆ‡ç‰‡</span><br><span class="line">- ä½†æ˜¯å¦‚æœè®¿é—®äº†æ— æ•ˆçš„Byteä¼š`panic`</span><br><span class="line"></span><br><span class="line">### Methods for Iterating Over Strings</span><br><span class="line">å‰é¢æåˆ°äº†Rustæä¾›äº†Stringè§£æçš„ä¸‰ç§è§†è§’ï¼š</span><br><span class="line">- Byteï¼šé€šè¿‡`bytes()`æ–¹æ³•</span><br><span class="line">- Scalar Values: `chars()`æ–¹æ³•</span><br><span class="line">- Grapheme Clusters: æ ‡å‡†åº“ä¸æä¾›</span><br><span class="line"></span><br><span class="line"># `str`, `&amp;str`å’Œ`String`</span><br><span class="line">- `str`: ä¸å¯å˜å­—ç¬¦ä¸²åˆ‡ç‰‡ç±»å‹</span><br><span class="line">- `&amp;str`: ä¸å¯å˜å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å¼•ç”¨ç±»å‹</span><br><span class="line">  - å¯¹`String`æˆ–è€…`literal`çš„å¼•ç”¨</span><br><span class="line">- `String`: å¯å˜ã€ownedçš„å­—ç¬¦ä¸²ç±»å‹</span><br><span class="line">  - </span><br><span class="line"></span><br><span class="line"># exercises</span><br><span class="line">`strings4.rs`:</span><br><span class="line">- `&quot;.into`å’Œ`&quot;.to_owned`</span><br><span class="line">- æ‰€ä»¥è¯´`&amp;str`åªæ˜¯å¯¹`String`ä¸€éƒ¨åˆ†çš„å¼•ç”¨å—</span><br><span class="line">- stræ˜¯æŒ‡`literal`å—</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># 11 Modules</span><br><span class="line"></span><br><span class="line">In this section we&#x27;ll give you an introduction to Rust&#x27;s module system.</span><br><span class="line"></span><br><span class="line">## Further information</span><br><span class="line"></span><br><span class="line">- [âœ…] [The Module System](https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Managing Growing Projects with Packages, Crates and Modules</span><br><span class="line">## Packages and Crates</span><br><span class="line">Crates</span><br><span class="line">- æ˜¯ç¼–è¯‘å™¨ä¸€æ¬¡æ€§èƒ½ç¼–è¯‘çš„æœ€å°å•ä½</span><br><span class="line">- ç”±ä¸€ç³»åˆ—moduleç»„æˆ</span><br><span class="line">- æœ‰ä¸¤ç§</span><br><span class="line">  1. binaryï¼šæœ‰mainå‡½æ•°ï¼Œè¢«ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶</span><br><span class="line">  2. libraryï¼šæ— mainå‡½æ•°ï¼Œå¯ä»¥è¢«binary crateï¼ˆæœ¬é¡¹ç›®æˆ–è€…å…¶ä»–é¡¹ç›®ï¼‰</span><br><span class="line">- crate root:</span><br><span class="line">  - æ¯ä¸ªcrateéƒ½æœ‰çš„ä¸€ä¸ªrsæºæ–‡ä»¶ï¼Œæ˜¯Rustç¼–è¯‘å™¨å¼€å§‹è¿›å…¥çš„æ–‡ä»¶</span><br><span class="line">    - å¯¹äºbinary crate: `src/main.rs`</span><br><span class="line">    - å¯¹äºlibrary crate: `src/lib.rs`</span><br><span class="line">    Packages</span><br><span class="line">- ç”±ä¸€ç³»åˆ—`crate`ç»„æˆï¼Œæ ¹éƒ¨çš„`toml`æ–‡ä»¶ä¼šè¯´æ˜å¦‚ä½•æ„å»ºè¿™äº›`crate`</span><br><span class="line">  - æœ€å¤šä¸€ä¸ªlibrary crate</span><br><span class="line">    - æ”¾ç½®äº`src/lib.rs`</span><br><span class="line">  - å¤šä¸ªbinary crate</span><br><span class="line">    - éœ€è¦æ”¾ç½®äº`src/bin`ç›®å½•ä¸‹</span><br><span class="line"></span><br><span class="line">## Defining Modules to Control Scope and Privacy</span><br><span class="line">### Moduleså¤‡å¿˜å½•ï¼ˆä¸€ç³»åˆ—è§„åˆ™ï¼‰</span><br><span class="line">https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html#modules-cheat-sheet</span><br><span class="line">- ä¸€ä¸ªcrateå¯èƒ½æœ‰å¤šä¸ªmodules</span><br><span class="line"></span><br><span class="line">### Grouping Related Code in Modules</span><br><span class="line">- å®é™…ä¸Šä¸€ä¸ªcrateå°±æ˜¯ä¸€ä¸ªä»¥`crate`moduleä¸ºæ ¹çš„ä¸€ä¸ªmodule tree</span><br><span class="line">  - ç±»ä¼¼äºfile system</span><br><span class="line">- å…¶ä¸­`crate root`æºæ–‡ä»¶å³ä¸º`crate module`æ‰€åœ¨çš„ä½ç½®ï¼Œå› æ­¤ç§°ä¸º`crate root`</span><br><span class="line"></span><br><span class="line">## Paths for Referring to an item in the Module Tree</span><br><span class="line">åœ¨ä¸€ä¸ª`crate`/`modules tree`ä¸­ï¼Œå¦‚ä½•è®¿é—®ä¸€ä¸ªitem: struct, enum, constants, function, method, module</span><br><span class="line">- `use path`ï¼šå¯ä»¥å°†`path`ä¸­çš„itemså¸¦å…¥åˆ°å½“å‰scope</span><br><span class="line">  - `absolute path`</span><br><span class="line">  - `relative path`</span><br><span class="line">- moduleçš„ç›®çš„ä¹‹ä¸€æ˜¯ä¸ºäº†éšè—åŠŸèƒ½çš„å®ç°ï¼Œè€Œåªæš´éœ²æ¥å£</span><br><span class="line">  - å› æ­¤moduleé»˜è®¤æ˜¯privateçš„ï¼Œåªèƒ½é€šè¿‡åŠ pubå…³é”®è¯æ¥æš´éœ²</span><br><span class="line">- modulesä¹‹é—´çš„è®¿é—®æƒé™</span><br><span class="line">  - å­moduleå¯ä»¥è®¿é—®çˆ¶module</span><br><span class="line">    - åä¹‹åˆ™ä¸è¡Œ</span><br><span class="line">  - åœ¨åŒä¸€ä¸ªscopeä¸­çš„ä¸åŒitemä¹‹é—´å¯ä»¥ç›¸äº’è®¿é—®publicçš„item</span><br><span class="line"></span><br><span class="line">### Exposing Paths with the pub Keyword</span><br><span class="line">- pubä½œç”¨çš„å¯¹è±¡ï¼š`module, struct, enum, constrant, functon, method`</span><br><span class="line">  - ä½œç”¨äºmoduleæ—¶ï¼Œåªèƒ½è¯´æ˜èƒ½å¤Ÿå¼•ç”¨è¿™ä¸ªmoduleåå­—ï¼Œå°šä¸”ä¸èƒ½è®¿é—®å†…éƒ¨private items</span><br><span class="line">- å­moduleå¯ä»¥è®¿é—®çˆ¶module</span><br><span class="line">  - åä¹‹ä¸ç„¶</span><br><span class="line">- å…„å¼Ÿmoduleå¯ä»¥ç›¸äº’è®¿é—®</span><br><span class="line">### Relative Paths with super</span><br><span class="line">ç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿä¸­çš„`..`</span><br><span class="line"></span><br><span class="line">### Making Structs and Enums Public</span><br><span class="line">- `struct`ï¼šä»…ä»…pub structå</span><br><span class="line">  - filedå’Œassociated functionéƒ½é»˜è®¤private</span><br><span class="line">- `enum`ï¼špub enumåï¼Œä¼šä½¿å¾—å…¶å†…éƒ¨`varients`éƒ½pub</span><br><span class="line"></span><br><span class="line">## Bringing Paths Into Scope with the use Keyword</span><br></pre></td></tr></table></figure>
<p>use<code>åˆ›å»ºä¸€ä¸ªè·¯å¾„çš„</code>shortcut</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥`shortcut`åªèƒ½è¢«åŒä¸€ä¸ªscopeä¸­ä½¿ç”¨</span><br><span class="line">- å¦‚æœåœ¨å…¶ä»–moduleä¸­ï¼Œ</span><br><span class="line">  1. é‡æ–°åˆ›å»ºä¸€ä¸ªshortcut</span><br><span class="line">  2. ä»¥ç›¸å¯¹è·¯å¾„çš„å½¢å¼ä½¿ç”¨è¯¥shortcut</span><br><span class="line"></span><br><span class="line">### Creating Idiomatic `use` Paths</span><br><span class="line">æƒ³è¦ä½¿ç”¨å…¶ä»–moduleä¸­çš„ä¸åŒitem</span><br><span class="line">- å¯¹äº`function`ï¼šuseåˆ°å…¶çˆ¶module</span><br><span class="line">- å¯¹äº`struct, enum, other items`: use full paths</span><br><span class="line">  - å¦‚æœå¯èƒ½ä¼šæœ‰å†²çªï¼Œåˆ™useåˆ°å…¶çˆ¶module</span><br><span class="line"></span><br><span class="line">### `use ... as` </span><br><span class="line">- è§£å†³ä¸åŒmoduleä¸­ç›¸åŒnameçš„æƒ…å†µ</span><br><span class="line"></span><br><span class="line">### Re-exporting Names with `pub use`</span><br><span class="line">- è¢«useçš„moduleå°±åƒæ˜¯ç›´æ¥å®šä¹‰åœ¨äº†å½“å‰useæ‰€åœ¨çš„module</span><br><span class="line">  - å› æ­¤å¯ä»¥å°†`use`æ‰€åœ¨çš„moduleå½“ä½œæ˜¯è¢«useçš„moduleçš„çˆ¶module</span><br><span class="line"></span><br><span class="line">### Using External Packages</span><br><span class="line">- `std`crate:</span><br><span class="line">  - é»˜è®¤åµŒå…¥åœ¨Rustä¸­ï¼Œå› æ­¤ä¸éœ€è¦å°†å…¶åŠ å…¥`toml`ä½œä¸ºä¾èµ–</span><br><span class="line">  - ä½†æ˜¯éœ€è¦ä½¿ç”¨`use`æ¥å°†æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„itemå¸¦å…¥åˆ°å½“å‰scope</span><br><span class="line">- `external`crate:</span><br><span class="line">  - ä»`crate.io`ä¸­æ‰¾åˆ°</span><br><span class="line">  - `Cargo.toml`ä¸­åŠ å…¥</span><br><span class="line">  - åœ¨è‡ªå·±çš„`crate`ä»£ç ä¸­ä½¿ç”¨useå°†å…¶å¸¦å…¥åˆ°éœ€è¦çš„scopeï¼Œéœ€è¦ä½¿ç”¨ç»å¯¹åœ°å€ä»å¯¹åº”çš„`crate`å¼€å§‹</span><br><span class="line"></span><br><span class="line">### Using Nested Paths to Clean Up Large `use` Lists</span><br><span class="line">- å¯ä»¥ä½¿ç”¨`&#123;&#125;`æ¥å°†å¤šä¸ªpathçš„ä¸åŒéƒ¨åˆ†åŒºåˆ«ï¼Œä½†æ˜¯ç›¸åŒéƒ¨åˆ†åˆå¹¶</span><br><span class="line"></span><br><span class="line">### the Glob Operator</span><br><span class="line">- useä¸­å¯ä»¥ä½¿ç”¨`*`ç¬¦å·ï¼Œæ¥è¡¨ç¤ºå°†è¯¥moduleä¸‹æ‰€æœ‰itemséƒ½å¼•å…¥å½“å‰scope</span><br><span class="line">  - æ…ç”¨</span><br><span class="line"></span><br><span class="line">## Separating Modules into Different Files</span><br><span class="line">å¯ä»¥å°†moduleçš„æºç ä»å•ä¸ªcrate rootæºæ–‡ä»¶ï¼Œåˆ†å‰²åˆ°çœŸæ­£æ„ä¹‰ä¸Šæ ‘å½¢æ–‡ä»¶ç³»ç»Ÿçš„å½¢å¼</span><br><span class="line">- å³ï¼Œå°†æ¯ä¸ªmoduleæºç æ”¾å…¥å•ä¸ªrsæºæ–‡ä»¶ï¼Œåªéœ€è¦åœ¨çˆ¶moduleæºæ–‡ä»¶ä¸­å£°æ˜è¯¥modå³å¯</span><br><span class="line">- ä½†æ˜¯éœ€è¦ç¡®ä¿æºæ–‡ä»¶åä¸modåä¸€è‡´</span><br><span class="line">- é€šè¿‡æ–‡ä»¶å¤¹æ¥ç»„ç»‡æºæ–‡ä»¶çš„ä½ç½®</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># 12 Hashmaps</span><br><span class="line"></span><br><span class="line">A *hash map* allows you to associate a value with a particular key.</span><br><span class="line">You may also know this by the names [*unordered map* in C++](https://en.cppreference.com/w/cpp/container/unordered_map),</span><br><span class="line">[*dictionary* in Python](https://docs.python.org/3/tutorial/datastructures.html#dictionaries) or an *associative array* in other languages.</span><br><span class="line"></span><br><span class="line">This is the other data structure that we&#x27;ve been talking about before, when</span><br><span class="line">talking about Vecs.</span><br><span class="line"></span><br><span class="line">## Further information</span><br><span class="line"></span><br><span class="line">- [âœ…] [Storing Keys with Associated Values in Hash Maps](https://doc.rust-lang.org/book/ch08-03-hash-maps.html)</span><br><span class="line"></span><br><span class="line"># Storing Keys with Associated Values in Hash Maps</span><br><span class="line">- ç±»ä¼¼äºVecç±»å‹ï¼Œä¼ å…¥Hash Mapä¸­çš„owned typeä¼šMove ownership</span><br><span class="line">  - å¦‚æœä¼ å…¥å¼•ç”¨ï¼Œéœ€è¦è€ƒè™‘`lifetime`</span><br><span class="line"></span><br><span class="line">## Updating a Hash Map</span><br><span class="line">å¯¹äºvalueå·²ç»å­˜åœ¨çš„keyï¼Œå¤„ç†valueçš„æƒ…å†µæœ‰ä¸‰ç§</span><br><span class="line">1. overwriteï¼šé»˜è®¤`insert()`å®ç°</span><br><span class="line">2. åªåœ¨key valueä¸å­˜åœ¨çš„æƒ…å†µæ‰æ’å…¥ï¼š`entry(&amp;key).or_insert(value)`</span><br><span class="line">   - entryæ–¹æ³•è¿”å›ç±»ä¼¼äºOption</span><br><span class="line">3. åœ¨key valueå­˜åœ¨æ—¶ï¼ŒåŸºäºå­˜åœ¨çš„valueæ›´æ–°ï¼š`let mut value = entry(&amp;key).or_insert(value)`</span><br><span class="line">   - `*value = new`</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># 13 Options</span><br><span class="line"></span><br><span class="line">Type Option represents an optional value: every Option is either Some and contains a value, or None, and does not.</span><br><span class="line">Option types are very common in Rust code, as they have a number of uses:</span><br><span class="line"></span><br><span class="line">- Initial values</span><br><span class="line">- Return values for functions that are not defined over their entire input range (partial functions)</span><br><span class="line">- Return value for otherwise reporting simple errors, where None is returned on error</span><br><span class="line">- Optional struct fields</span><br><span class="line">- Struct fields that can be loaned or &quot;taken&quot;</span><br><span class="line">- Optional function arguments</span><br><span class="line">- Nullable pointers</span><br><span class="line">- Swapping things out of difficult situations</span><br><span class="line"></span><br><span class="line">## Further Information</span><br><span class="line"></span><br><span class="line">- [x] [Option Enum Format](https://doc.rust-lang.org/stable/book/ch10-01-syntax.html#in-enum-definitions)</span><br><span class="line">- [ ] [Option Module Documentation](https://doc.rust-lang.org/std/option/)</span><br><span class="line">- [ ] [Option Enum Documentation](https://doc.rust-lang.org/std/option/enum.Option.html)</span><br><span class="line">- [x] [if let](https://doc.rust-lang.org/rust-by-example/flow_control/if_let.html)</span><br><span class="line">- [x] [while let](https://doc.rust-lang.org/rust-by-example/flow_control/while_let.html)</span><br><span class="line"></span><br><span class="line"># Option Enum Format</span><br><span class="line">Option&lt;T&gt;</span><br><span class="line">```rust</span><br><span class="line">Option&lt;T&gt;&#123;</span><br><span class="line">    Some(T),</span><br><span class="line">    None</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸»è¦ç”¨äºå¤„ç†Noneçš„æƒ…å†µ</li>
</ul>
<p>Result&lt;T, E&gt;</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Result</span>&lt;T, E&gt;&#123;</span><br><span class="line">    <span class="literal">Ok</span>(T),</span><br><span class="line">    <span class="literal">Err</span>(E)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸»è¦ç”¨äºå¤„ç†Error<h1 id="Documents"><a href="#Documents" class="headerlink" title="Documents"></a>Documents</h1></li>
<li>Option Module</li>
<li>Option Enum<ul>
<li>å¦‚ä½•ç¡®ä¿åœ¨matchæ—¶ä¸ä¼šè½¬ç§»Some(T)å†…éƒ¨çš„æ‰€æœ‰æƒ<ol>
<li>åœ¨patternä¸­çš„bindingå˜é‡å‰åŠ <code>ref</code></li>
<li>matchçš„å˜é‡ä½¿ç”¨<code>as_ref</code>æ–¹æ³•ä»<code>&amp;Option&lt;T&gt;</code>è½¬æ¢ä¸º<code>Option&lt;&amp;T&gt;</code></li>
</ol>
</li>
</ul>
</li>
</ul>
<h1 id="if-let"><a href="#if-let" class="headerlink" title="if let"></a>if let</h1><p>å¯¹äºåªæœ‰ä¸¤ä¸‰ä¸ª<code>enum varients</code>çš„Enumç±»å‹ï¼Œå¯ä»¥ä¸ä½¿ç”¨matchè€Œæ˜¯<code>if let</code>è¿›è¡ŒåŒ¹é…</p>
<h1 id="while-let"><a href="#while-let" class="headerlink" title="while let"></a>while let</h1><p>ç±»ä¼¼äºwhile + if let</p>
<hr>
<h1 id="14-Error-handling"><a href="#14-Error-handling" class="headerlink" title="14 Error handling"></a>14 Error handling</h1><p>Most errors arenâ€™t serious enough to require the program to stop entirely.<br>Sometimes, when a function fails, itâ€™s for a reason that you can easily interpret and respond to.<br>For example, if you try to open a file and that operation fails because the file doesnâ€™t exist, you might want to create the file instead of terminating the process.</p>
<h2 id="Further-information-9"><a href="#Further-information-9" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html">Error Handling</a></li>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch10-01-syntax.html">Generics</a></li>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/rust-by-example/error/result.html">Result</a></li>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/rust-by-example/error/multiple_error_types/boxing_errors.html">Boxing errors</a></li>
</ul>
<h1 id="Recoverable-Errors-with-Result"><a href="#Recoverable-Errors-with-Result" class="headerlink" title="Recoverable Errors with Result"></a>Recoverable Errors with Result</h1><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Result</span></span>&lt;T, E&gt; &#123;</span><br><span class="line">    <span class="literal">Ok</span>(T),</span><br><span class="line">    <span class="literal">Err</span>(E)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç±»ä¼¼äºOptionç±»å‹ï¼Œ<code>T</code>æ˜¯<code>Generic Type Parameter</code></li>
<li>é…åˆ<code>match</code>/<code>if let</code>ç­‰è¯­æ³•ï¼Œæ¥å¤„ç†å¯èƒ½ä¼šå¤±è´¥çš„æ“ä½œ<h2 id="Matching-on-Differences-Errors"><a href="#Matching-on-Differences-Errors" class="headerlink" title="Matching on Differences Errors"></a>Matching on Differences Errors</h2>ä¸¤ç§æ–¹å¼å¤„ç†<code>Result</code>ç±»å‹å˜é‡ï¼š<code>unwrap_or_else</code>æä¾›è¯­æ³•ç³–</li>
</ul>
<ol>
<li>é€šè¿‡å¤šå±‚<code>match</code>è¯­æ³•ï¼Œå¯ä»¥å®ç°å¯¹<code>Result</code>ä¸­<code>Err(E)</code>ä¸­Eç±»å‹çš„åˆ¤æ–­ï¼Œå¹¶ä½œå‡ºä¸åŒçš„å¤„ç†</li>
<li><code>closure</code>ï¼šé€šè¿‡å¯¹<code>Result</code>ç±»å‹è°ƒç”¨closureï¼Œå¯ä»¥ä»¥æ›´å°‘çš„ä»£ç æ¥å¤„ç†ä¸Šè¿°åˆ¤æ–­errorçš„ç§ç±»</li>
</ol>
<ul>
<li><code>unwrap_or_else(|error|&#123;&#125;)</code>ï¼šå®é™…ä¸Šå¯ä»¥æƒ³è±¡è¯¥å‡½æ•°ä¹Ÿæ˜¯ç±»ä¼¼matchï¼Œåšå‡ºä¸¤ç§è¡Œä¸º<ol>
<li><code>unwrap</code>ï¼šå¦‚æœæ˜¯<code>Ok(T)</code>ï¼Œåˆ™ç›´æ¥å°†Tå˜é‡è¿”å›</li>
<li><code>else(|error|&#123;&#125;)</code>ï¼šå¦‚æœæ˜¯<code>Err(E)</code>ï¼Œåˆ™é€šè¿‡<code>closure</code>å°†Eå˜é‡ç»‘å®šåˆ°errorå˜é‡ï¼Œå¹¶åœ¨<code>&#123;&#125;</code>ä¸­å¤„ç†</li>
</ol>
</li>
</ul>
<p>ä½•ä¸º<code>closure</code>ï¼šå‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µ</p>
<ul>
<li>ç‰¹æ€§ï¼š<ul>
<li>æ•è·ç¯å¢ƒå˜é‡ï¼šä»¥ä¸åŒæ–¹å¼æ•è·</li>
<li>åŒ¿å</li>
</ul>
</li>
</ul>
<h2 id="Shortcuts-for-Panic-on-Error-unwrap-and-expect"><a href="#Shortcuts-for-Panic-on-Error-unwrap-and-expect" class="headerlink" title="Shortcuts for Panic on Error: unwrap and expect"></a>Shortcuts for Panic on Error: <code>unwrap</code> and <code>expect</code></h2><p>å¯¹äº<code>Result</code>ç±»å‹ï¼ŒRustæä¾›äº†è®¸å¤šè¯­æ³•ç³–ï¼šè¦ä¹ˆè¿”å›å†…éƒ¨çš„æ•°æ®ï¼Œè¦ä¹ˆ<code>panic!</code>æˆ–è€…ç¨‹åºçŒ¿è‡ªå®šä¹‰å¤„ç†</p>
<ul>
<li><code>unwrap</code></li>
<li><code>expect</code></li>
<li><code>unwrap_or_else</code></li>
</ul>
<h2 id="Propagating-Errors"><a href="#Propagating-Errors" class="headerlink" title="Propagating Errors"></a>Propagating Errors</h2><ul>
<li>å¤„ç†<code>Result</code>æ—¶ï¼Œå¦‚æœæ˜¯<code>Err</code><ul>
<li>åˆ™<code>early return</code>æå‰å°†ç»“æœè¿”å›ç»™è°ƒç”¨è€…ï¼Œç”±è°ƒç”¨è€…å‡½æ•°æ¥è¿›ä¸€æ­¥å¤„ç†</li>
</ul>
</li>
</ul>
<h2 id="A-shortcut-for-propogating-Errors-the-operator"><a href="#A-shortcut-for-propogating-Errors-the-operator" class="headerlink" title="A shortcut for propogating Errors: the ? operator"></a>A shortcut for propogating Errors: the <code>?</code> operator</h2><ul>
<li>å¯¹äº<code>Result</code>å€¼åä½¿ç”¨<code>?</code>å¯ä»¥å®ç°å‘ä¸Šä¼ æ’­<code>Err</code>çš„æ•ˆæœï¼Œå³<ul>
<li>å¦‚æœ<code>?</code>ä½œç”¨çš„å‡½æ•°<ul>
<li>è¿”å›<code>Ok</code>ï¼Œåˆ™æ­£å¸¸æ‰§è¡Œä¸‹é¢çš„æ“ä½œ</li>
<li>è‹¥è¿”å›<code>Err</code>ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥å‡½æ•°ä¸º<code>Err</code>ç±»å‹</li>
</ul>
</li>
</ul>
</li>
<li>å¯ä»¥åœ¨<code>?</code>åæ¥ä¸Šå…¶ä»–å‡½æ•°ï¼ˆ<code>?</code>å‰æ”¾å‡½æ•°è¿”å›çš„ç±»å‹èƒ½è°ƒç”¨çš„å‡½æ•°ï¼Œç”šè‡³å¦‚æœæ˜¯è¿”å›<code>Result</code>ï¼Œåˆ™å¯ä»¥åœ¨åé¢ç»§ç»­åŠ <code>?</code>ï¼‰</li>
</ul>
<h2 id="Where-The-Operator-Can-Be-Used"><a href="#Where-The-Operator-Can-Be-Used" class="headerlink" title="Where The ? Operator Can Be Used"></a>Where The <code>?</code> Operator Can Be Used</h2><ul>
<li><code>?</code>ä¹Ÿå¯ç”¨äºè¿”å›<code>Option</code>ç±»å‹çš„å‡½æ•°</li>
<li><code>?</code>åªèƒ½ç”¨äºè¿”å›ç±»å‹ä¸º<code>Result</code>æˆ–è€…<code>option</code>çš„å‡½æ•°</li>
<li><h2 id="mainå‡½æ•°ä¹Ÿå¯ä»¥è¿”å›Result-lt-Box-lt-dyn-Error-gt-gt-ç±»å‹"><a href="#mainå‡½æ•°ä¹Ÿå¯ä»¥è¿”å›Result-lt-Box-lt-dyn-Error-gt-gt-ç±»å‹" class="headerlink" title="mainå‡½æ•°ä¹Ÿå¯ä»¥è¿”å›Result&lt;(), Box&lt;dyn Error&gt;&gt;ç±»å‹"></a><code>main</code>å‡½æ•°ä¹Ÿå¯ä»¥è¿”å›<code>Result&lt;(), Box&lt;dyn Error&gt;&gt;</code>ç±»å‹</h2></li>
</ul>
<h1 id="Example-for-Results"><a href="#Example-for-Results" class="headerlink" title="Example for Results"></a>Example for Results</h1><h2 id="map-for-Result"><a href="#map-for-Result" class="headerlink" title="map for Result"></a><code>map</code> for <code>Result</code></h2><ul>
<li><code>Option</code>å’Œ<code>Result</code>ç±»å‹éƒ½å®ç°äº†å¾ˆå¤š<code>combinator</code>ï¼Œå¯ä»¥çœå»å†™<code>match</code>çš„ä»£ç <ul>
<li><code>and_then</code></li>
<li><code>map</code></li>
</ul>
</li>
</ul>
<h2 id="early-return"><a href="#early-return" class="headerlink" title="early return"></a><code>early return</code></h2><h1 id="Generic-Data-Types"><a href="#Generic-Data-Types" class="headerlink" title="Generic Data Types"></a>Generic Data Types</h1><ul>
<li>æ³›ç”¨æ•°æ®ç±»å‹ï¼šç”¨äºå®šä¹‰<code>struct</code>, <code>enum</code>,<code>function</code>,<code>muthod</code><ul>
<li>ç±»ä¼¼äºC++ä¸­çš„æ¨¡ç‰ˆç±»å‹å‚æ•°</li>
</ul>
</li>
</ul>
<h2 id="In-Function-Definition"><a href="#In-Function-Definition" class="headerlink" title="In Function Definition"></a>In Function Definition</h2><ul>
<li><p>å°†Generic Type Parameterä½¿ç”¨å°–æ‹¬å·å†™åœ¨å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨ä¹‹é—´ï¼š</p>
<ul>
<li><code>fn fun_name&lt;T&gt;() -&gt; ()</code>ï¼š</li>
</ul>
</li>
<li><p>å¦‚æœåœ¨å‡½æ•°ä½“æœ‰æ¶‰åŠåˆ°<code>T</code>ç±»å‹å˜é‡çš„æ¯”è¾ƒï¼š</p>
<ul>
<li>å¿…é¡»é™åˆ¶è¯¥å‡½æ•°çš„è°ƒç”¨èŒƒå›´:å®ç°<code>std::cmp::PartialOrd</code> traitçš„ç±»å‹æ‰èƒ½ä¼ å…¥</li>
</ul>
</li>
</ul>
<h2 id="In-struct-enum-Definitions"><a href="#In-struct-enum-Definitions" class="headerlink" title="In struct/enum Definitions"></a>In struct/enum Definitions</h2><ul>
<li><p>å°†Generic Type Parameterå†™åœ¨struct/enumåä¹‹åï¼š</p>
<ul>
<li><code>struct Point&lt;T&gt;&#123;&#125;</code></li>
<li><code>enum Point&lt;T&gt;&#123;&#125;</code></li>
</ul>
</li>
<li><p>å¯ä»¥åœ¨å°–æ‹¬å·å†…æŒ‡å®šå¤šä¸ªgeneric type parameters</p>
</li>
</ul>
<h2 id="In-method-Definitions"><a href="#In-method-Definitions" class="headerlink" title="In method Definitions"></a>In method Definitions</h2><ul>
<li><p><code>impl&lt;T&gt; Stru&lt;T&gt;&#123;&#125;</code></p>
<ul>
<li><code>impl</code>å…³é”®è¯åå¿…é¡»æœ‰generic type parameterï¼Œç”¨äºè¯´æ˜è¯¥<code>impl</code>å—æ˜¯ä¸º<code>Str&lt;T&gt;</code>å®ç°çš„ï¼Œ</li>
</ul>
</li>
<li><p>åœ¨<code>impl</code>åæŒ‡å®šgeneric type parameterä¹‹åï¼Œå°±ä¸éœ€è¦åœ¨<code>method</code>åå’Œå‚æ•°åˆ—è¡¨ä¹‹é—´åŠ generic type parameter</p>
</li>
<li><p><strong>Hint</strong>ï¼šè¯¥<code>method</code>ä¹Ÿå¯ä»¥é¢å¤–åœ¨<code>method</code>åå’Œå‚æ•°åˆ—è¡¨ä¹‹é—´åŠ è‡ªå·±çš„<code>generic type para</code></p>
</li>
</ul>
<h2 id="Performance-of-Code-Using-Generics"><a href="#Performance-of-Code-Using-Generics" class="headerlink" title="Performance of Code Using Generics"></a>Performance of Code Using Generics</h2><ul>
<li>ä½¿ç”¨<code>generic type parameters</code>ä¸ä¼šå‡æ…¢ç¨‹åºæ‰§è¡Œçš„é¡ºåº</li>
<li><code>Monomorphization</code>â€”â€”å•æ€åŒ–ï¼šä¼šåœ¨ç¨‹åºç¼–è¯‘æ—¶å®Œæˆ<ul>
<li>ç±»ä¼¼äºC++ï¼šåœ¨ç¼–è¯‘æ—¶ï¼Œæ¨ç®—å‡ºå…·ä½“ç±»å‹å¹¶å°†æ³›åŒ–å‡½æ•°å®ç°ä¸ºå¤šä¸ªç‰ˆæœ¬ï¼ˆå¯¹åº”äºä¸åŒç±»å‹ï¼‰</li>
</ul>
</li>
</ul>
<hr>
<h1 id="15-Generics"><a href="#15-Generics" class="headerlink" title="15 Generics"></a>15 Generics</h1><p>Generics is the topic of generalizing types and functionalities to broader cases.<br>This is extremely useful for reducing code duplication in many ways, but can call for rather involving syntax.<br>Namely, being generic requires taking great care to specify over which types a generic type is actually considered valid.<br>The simplest and most common use of generics is for type parameters.</p>
<h2 id="Further-information-10"><a href="#Further-information-10" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/book/ch10-01-syntax.html">Generic Data Types</a></li>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/rust-by-example/generics/bounds.html">Bounds</a></li>
</ul>
<h1 id="Generic-Data-Types-1"><a href="#Generic-Data-Types-1" class="headerlink" title="Generic Data Types"></a>Generic Data Types</h1><ul>
<li>æ³›ç”¨æ•°æ®ç±»å‹ï¼šç”¨äºå®šä¹‰<code>struct</code>, <code>enum</code>,<code>function</code>,<code>muthod</code><ul>
<li>ç±»ä¼¼äºC++ä¸­çš„æ¨¡ç‰ˆç±»å‹å‚æ•°</li>
</ul>
</li>
</ul>
<h2 id="In-Function-Definition-1"><a href="#In-Function-Definition-1" class="headerlink" title="In Function Definition"></a>In Function Definition</h2><ul>
<li><p>å°†Generic Type Parameterä½¿ç”¨å°–æ‹¬å·å†™åœ¨å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨ä¹‹é—´ï¼š</p>
<ul>
<li><code>fn fun_name&lt;T&gt;() -&gt; ()</code>ï¼š</li>
</ul>
</li>
<li><p>å¦‚æœåœ¨å‡½æ•°ä½“æœ‰æ¶‰åŠåˆ°<code>T</code>ç±»å‹å˜é‡: <code>æ¯”è¾ƒ</code>æˆ–è€…è°ƒç”¨æŸä¸ª<code>trait</code>ä¸­çš„<code>method</code>ï¼š</p>
<ul>
<li>å¿…é¡»ä½¿ç”¨<code>Bound</code>é™åˆ¶è¯¥å‡½æ•°çš„è°ƒç”¨èŒƒå›´:<ul>
<li>ä¾‹å¦‚ï¼ŒTçš„æ¯”è¾ƒåªèƒ½ï¼Œå®ç°<code>std::cmp::PartialOrd</code> traitçš„ç±»å‹æ‰èƒ½ä¼ å…¥</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="In-struct-enum-Definitions-1"><a href="#In-struct-enum-Definitions-1" class="headerlink" title="In struct/enum Definitions"></a>In struct/enum Definitions</h2><ul>
<li><p>å°†Generic Type Parameterå†™åœ¨struct/enumåä¹‹åï¼š</p>
<ul>
<li><code>struct Point&lt;T&gt;&#123;&#125;</code></li>
<li><code>enum Point&lt;T&gt;&#123;&#125;</code></li>
</ul>
</li>
<li><p>å¯ä»¥åœ¨å°–æ‹¬å·å†…æŒ‡å®šå¤šä¸ªgeneric type parameters</p>
</li>
</ul>
<h2 id="In-method-Definitions-1"><a href="#In-method-Definitions-1" class="headerlink" title="In method Definitions"></a>In method Definitions</h2><ul>
<li><p><code>impl&lt;T&gt; Stru&lt;T&gt;&#123;&#125;</code></p>
<ul>
<li><code>impl</code>å…³é”®è¯åå¿…é¡»æœ‰generic type parameterï¼Œç”¨äºè¯´æ˜è¯¥<code>impl</code>å—æ˜¯ä¸º<code>Str&lt;T&gt;</code>å®ç°çš„ï¼Œ</li>
</ul>
</li>
<li><p>åœ¨<code>impl</code>åæŒ‡å®šgeneric type parameterä¹‹åï¼Œå°±ä¸éœ€è¦åœ¨<code>method</code>åå’Œå‚æ•°åˆ—è¡¨ä¹‹é—´åŠ generic type parameter</p>
</li>
<li><p><strong>Hint</strong>ï¼šè¯¥<code>method</code>ä¹Ÿå¯ä»¥é¢å¤–åœ¨<code>method</code>åå’Œå‚æ•°åˆ—è¡¨ä¹‹é—´åŠ è‡ªå·±çš„<code>generic type para</code></p>
</li>
</ul>
<h2 id="Performance-of-Code-Using-Generics-1"><a href="#Performance-of-Code-Using-Generics-1" class="headerlink" title="Performance of Code Using Generics"></a>Performance of Code Using Generics</h2><ul>
<li>ä½¿ç”¨<code>generic type parameters</code>ä¸ä¼šå‡æ…¢ç¨‹åºæ‰§è¡Œçš„é¡ºåº</li>
<li><code>Monomorphization</code>â€”â€”å•æ€åŒ–ï¼šä¼šåœ¨ç¨‹åºç¼–è¯‘æ—¶å®Œæˆ<ul>
<li>ç±»ä¼¼äºC++ï¼šåœ¨ç¼–è¯‘æ—¶ï¼Œæ¨ç®—å‡ºå…·ä½“ç±»å‹å¹¶å°†æ³›åŒ–å‡½æ•°å®ç°ä¸ºå¤šä¸ªç‰ˆæœ¬ï¼ˆå¯¹åº”äºä¸åŒç±»å‹ï¼‰</li>
</ul>
</li>
</ul>
<h1 id="Bounds"><a href="#Bounds" class="headerlink" title="Bounds"></a>Bounds</h1><p><code>fn printer&lt;T: Display&gt; ()&#123;&#125;</code>æ˜¯å¯¹<code>Generic Type Parameter</code>çš„é™åˆ¶ï¼š</p>
<ul>
<li>åªæœ‰å®ç°äº†<code>Diskplay</code>traitçš„å…·ä½“ç±»å‹æ‰èƒ½ä½œä¸ºå‚æ•°</li>
<li>å®ç°äº†<code>trait</code>ï¼Œä¾¿å¯ä»¥ä½¿å¾—Tç±»å‹çš„å˜é‡è°ƒç”¨<code>trait</code>ä¸­çš„method</li>
</ul>
<hr>
<h1 id="16-Traits"><a href="#16-Traits" class="headerlink" title="16 Traits"></a>16 Traits</h1><p>A trait is a collection of methods.</p>
<p>Data types can implement traits. To do so, the methods making up the trait are defined for the data type. For example, the <code>String</code> data type implements the <code>From&lt;&amp;str&gt;</code> trait. This allows a user to write <code>String::from(&quot;hello&quot;)</code>.</p>
<p>In this way, traits are somewhat similar to Java interfaces and C++ abstract classes.</p>
<p>Some additional common Rust traits include:</p>
<ul>
<li><code>Clone</code> (the <code>clone</code> method)</li>
<li><code>Display</code> (which allows formatted display via <code>&#123;&#125;</code>)</li>
<li><code>Debug</code> (which allows formatted display via <code>&#123;:?&#125;</code>)</li>
</ul>
<p>Because traits indicate shared behavior between data types, they are useful when writing generics.</p>
<h2 id="Further-information-11"><a href="#Further-information-11" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch10-02-traits.html">Traits</a></li>
</ul>
<h1 id="Traits-Defining-Shared-Behavior"><a href="#Traits-Defining-Shared-Behavior" class="headerlink" title="Traits: Defining Shared Behavior"></a>Traits: Defining Shared Behavior</h1><ul>
<li>æ˜¯ä¸€ç³»åˆ—<code>methods</code>çš„é›†åˆï¼Œå„ç§æ•°æ®ç±»å‹<code>struct</code>, <code>enum</code>ç­‰å¯ä»¥é€šè¿‡å®ç°è¯¥<code>trait</code>æ¥ä½¿ç”¨è¿™äº›<code>method</code><ul>
<li>ç±»ä¼¼äºC++ä¸­çš„æŠ½è±¡ç±»</li>
</ul>
</li>
<li><code>shared behavior</code>: å®ç°äº†åŒä¸€ä¸ªtraitçš„æ•°æ®ç±»å‹å…±äº«è¿™äº›method</li>
<li>å¯ä»¥åœ¨<code>generic type parameter</code>ä¸­ä½¿ç”¨ï¼Œä½œä¸º<code>Bounds</code>æ¥é™åˆ¶èƒ½å¤Ÿä½œä¸ºå‚æ•°çš„ç±»å‹ï¼ˆéƒ½å®ç°äº†æŸä¸ªtraitï¼‰</li>
</ul>
<h2 id="Defining-a-Trait"><a href="#Defining-a-Trait" class="headerlink" title="Defining a Trait"></a>Defining a Trait</h2><ul>
<li>ç±»å‹çš„behavior: ç”±å®ƒèƒ½è°ƒç”¨çš„methodsç»„æˆ<ul>
<li><code>trait</code>ä¸­å®šä¹‰çš„methodåˆ™æ˜¯shared behavior</li>
</ul>
</li>
<li><code>pub trait TName&#123;&#125;</code><ul>
<li>å®šä¹‰å¤šæ¡methodçš„ç­¾å</li>
<li>ä»»ä½•å®ç°äº†è¯¥traitçš„æ•°æ®ç±»å‹å¿…é¡»è¦å®ç°è¿™äº›method</li>
</ul>
</li>
</ul>
<h2 id="Implementing-a-Trait-on-a-Type"><a href="#Implementing-a-Trait-on-a-Type" class="headerlink" title="Implementing a Trait on a Type"></a>Implementing a Trait on a Type</h2><ul>
<li>éœ€è¦å°†è¦å®ç°çš„traitå¼•å…¥å½“å‰<code>scope</code></li>
<li>è¯­æ³•ï¼š<code>impl TName for StructName&#123;&#125;</code></li>
<li>traitå’Œstructç±»å‹è‡³å°‘æœ‰ä¸€ä¸ªéœ€è¦æ—¶<code>local</code>å®šä¹‰çš„</li>
</ul>
<h2 id="Default-Implementation"><a href="#Default-Implementation" class="headerlink" title="Default Implementation"></a>Default Implementation</h2><ul>
<li>å¯ä»¥åœ¨å®šä¹‰<code>tarit</code>æ—¶ï¼Œå®šä¹‰éƒ¨åˆ†<code>method</code>çš„é»˜è®¤å‡½æ•°ä½“ï¼Œä½œä¸º<code>default implementation</code><ul>
<li>å…¶ä»–ç±»å‹å®ç°è¯¥<code>trait</code>æ—¶å¯ä»¥é€‰æ‹©ä½¿ç”¨é»˜è®¤æˆ–è€…è‡ªå·±å®šä¹‰æ¥è¦†ç›–</li>
<li>ç±»ä¼¼äºC++ä¸­çš„è™šå‡½æ•°ï¼Ÿ</li>
</ul>
</li>
</ul>
<h2 id="Traits-as-Parameters"><a href="#Traits-as-Parameters" class="headerlink" title="Traits as Parameters"></a>Traits as Parameters</h2><ul>
<li>ç±»ä¼¼äºä½œä¸º<code>generic type parameter</code>çš„<code>Bound</code><ul>
<li>è¡¨ç¤ºåªæœ‰å®ç°è¯¥traitæ‰èƒ½ä½œä¸ºgeneric typeçš„å®å‚</li>
</ul>
</li>
<li><code>impl TraitName</code>èƒ½å¤Ÿä»¥ç±»å‹çš„ä½œç”¨å®šä¹‰å‡½æ•°ç­¾åï¼š<code>fn notify(item: &amp;impl Summary)&#123;&#125;</code><ul>
<li>è¡¨ç¤ºå®ç°äº†è¯¥traitçš„ç±»å‹éƒ½å¯ä»¥ä½œä¸ºå®å‚</li>
</ul>
</li>
</ul>
<h3 id="Trait-Bound-Syntax"><a href="#Trait-Bound-Syntax" class="headerlink" title="Trait Bound Syntax"></a>Trait Bound Syntax</h3><p>æ›´å¥½çš„è¯­æ³•ï¼š<code>fn notify&lt;T: Summary&gt;(item: &amp;T)</code><br>å„æœ‰ä¼˜ç¼ºç‚¹ï¼š</p>
<ol>
<li><code>impl Trait</code>è¯­æ³•ï¼šç®€æ´</li>
<li><code>&lt;T: Trait&gt;(item: T)</code>è¯­æ³•ï¼šèƒ½è¡¨ç¤ºæ›´å¤æ‚æƒ…å†µ</li>
</ol>
<h3 id="Specifying-Multiple-Trait-Bounds-with"><a href="#Specifying-Multiple-Trait-Bounds-with" class="headerlink" title="Specifying Multiple Trait Bounds with +"></a>Specifying Multiple Trait Bounds with <code>+</code></h3><p>é€šè¿‡<code>+</code>ï¼Œå¯ä»¥å åŠ <code>Trait Bound</code>ï¼š</p>
<ol>
<li><code>impl (T1 + T2)</code></li>
<li><code>&lt;T: T1+T2&gt;(item: T)</code></li>
</ol>
<h3 id="Clearer-Trait-Bounds-with-where-clause"><a href="#Clearer-Trait-Bounds-with-where-clause" class="headerlink" title="Clearer Trait Bounds with where clause"></a>Clearer Trait Bounds with <code>where</code> clause</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">function</span></span>&lt;T, U&gt;(item1:T, item2:U)</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    T: T1+T2,</span><br><span class="line">    U: T2+T3,</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Returning-Types-that-implement-Traits"><a href="#Returning-Types-that-implement-Traits" class="headerlink" title="Returning Types that implement Traits"></a>Returning Types that implement Traits</h2><ul>
<li>ç±»ä¼¼äº<code>impl Trait</code>å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ç±»å‹</li>
<li><code>impl Trait</code>ä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ç±»å‹</li>
<li><strong>Hint:</strong> å‡½æ•°ä½“å†…åªèƒ½è¿”å›ä¸€ç§å…·ä½“ç±»å‹<ul>
<li>å¯èƒ½æ˜¯å› ä¸ºç¼–è¯‘æœŸé—´æ— æ³•åˆ¤æ–­æ˜¯å“ªä¸ªå…·ä½“ç±»å‹</li>
<li>è€Œä½œä¸ºå‡½æ•°å‚æ•°æ—¶æ˜¯èƒ½å¤Ÿæ¨æ–­å…·ä½“ç±»å‹çš„</li>
</ul>
</li>
</ul>
<h2 id="Using-Trait-Bounds-to-Conditionally-Implement-Methods"><a href="#Using-Trait-Bounds-to-Conditionally-Implement-Methods" class="headerlink" title="Using Trait Bounds to Conditionally Implement Methods"></a>Using Trait Bounds to Conditionally Implement Methods</h2><p>ä¸€æ½å­å®ç°ï¼š</p>
<blockquote>
<p>We can also conditionally implement a trait for any type that implements another trait.<br>Implementations of a trait on any type that satisfies the trait bounds are called blanket implementations<br>and are extensively used in the Rust standard library</p>
</blockquote>
<hr>
<h1 id="17-Lifetimes"><a href="#17-Lifetimes" class="headerlink" title="17 Lifetimes"></a>17 Lifetimes</h1><p>Lifetimes tell the compiler how to check whether references live long<br>enough to be valid in any given situation. For example lifetimes say<br>â€œmake sure parameter â€˜aâ€™ lives as long as parameter â€˜bâ€™ so that the return<br>value is validâ€.</p>
<p>They are only necessary on borrows, i.e. references,<br>since copied parameters or moves are owned in their scope and cannot<br>be referenced outside. Lifetimes mean that calling code of e.g. functions<br>can be checked to make sure their arguments are valid. Lifetimes are<br>restrictive of their callers.</p>
<p>If youâ€™d like to learn more about lifetime annotations, the<br><a target="_blank" rel="noopener" href="https://tfpk.github.io/lifetimekata/">lifetimekata</a> project<br>has a similar style of exercises to Rustlings, but is all about<br>learning to write lifetime annotations.</p>
<h2 id="Further-information-12"><a href="#Further-information-12" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/rust-by-example/scope/lifetime.html">Lifetimes (in Rust By Example)</a></li>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch10-03-lifetime-syntax.html">Validating References with Lifetimes</a></li>
</ul>
<h1 id="Validating-References-with-Lifetimes"><a href="#Validating-References-with-Lifetimes" class="headerlink" title="Validating References with Lifetimes"></a>Validating References with Lifetimes</h1><ul>
<li>å¹¶ä¸ä¼šæ”¹å˜<code>argument</code>å’Œ<code>return value</code>çš„<code>lifetime</code>ï¼Œåªæ˜¯æŒ‡æ˜å…³ç³»ï¼Œæˆ–è€…è¯´æ˜¯ç¨‹åºçŒ¿æœŸæœ›è¿™ä¸ªå…³ç³»</li>
<li>é€šè¿‡æ˜¾å¼åœ°å£°æ˜å‡½æ•°ä¸­<code>arguments</code>å’Œ<code>return value</code>/<code>struct instance</code>ä¸<code>field</code>ä¹‹é—´<code>lifetime</code>çš„å…³ç³»ï¼Œä½¿å¾—ç¼–è¯‘å™¨èƒ½å¤Ÿæ¨æ–­å‡ºæ˜¯å¦ä¼šå‘ç”Ÿ<code>dangling reference</code><ul>
<li>Rustçš„<code>Borrow Checker</code>é€šè¿‡ç»™å®šçš„<code>lifetime annotation</code>è¿›è¡Œæ£€æŸ¥</li>
</ul>
</li>
<li>ä¹Ÿæ˜¯ä¸€ç§<code>generics</code><ul>
<li>ç±»ä¼¼äº<code>generic type parameter</code><h2 id="Preventing-Dangling-References-with-Lifetimes"><a href="#Preventing-Dangling-References-with-Lifetimes" class="headerlink" title="Preventing Dangling References with Lifetimes"></a>Preventing Dangling References with Lifetimes</h2></li>
</ul>
</li>
<li>ç±»ä¼¼äºæ‚¬ç©ºæŒ‡é’ˆ</li>
<li>å¸¸å¸¸å‘ç”Ÿåœ¨ï¼šå‡½æ•°æœ‰å¤šä¸ªå¼•ç”¨ç±»å‹çš„<code>parameter</code>ï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸ºå¼•ç”¨ï¼Œå¹¶ä¸”è¿”å›å€¼å¼•ç”¨ä¸ºå‚æ•°ç´¢å¼•ç”¨çš„å¯¹è±¡</li>
</ul>
<h2 id="Borrow-checker"><a href="#Borrow-checker" class="headerlink" title="Borrow checker"></a>Borrow checker</h2><ul>
<li>é€šè¿‡æ¯”è¾ƒ<code>referenced value</code>ä¸<code>reference</code>ä¹‹é—´çš„scopeï¼Œæ¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿ<code>dangling reference</code><ul>
<li><code>referenced value</code>èƒ½å¤Ÿæ¶µç›–<code>reference</code>çš„scope</li>
</ul>
</li>
</ul>
<h2 id="Generic-Lifetimes-in-Functions"><a href="#Generic-Lifetimes-in-Functions" class="headerlink" title="Generic Lifetimes in Functions"></a>Generic Lifetimes in Functions</h2><ul>
<li>å¸¸å¸¸å‘ç”Ÿåœ¨ï¼š<ul>
<li>å‡½æ•°æœ‰å¤šä¸ªå¼•ç”¨ç±»å‹çš„<code>parameter</code>ï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿä¸ºå¼•ç”¨ï¼Œå¹¶ä¸”è¿”å›å€¼å¼•ç”¨ä¸ºå‚æ•°ç´¢å¼•ç”¨çš„å¯¹è±¡</li>
</ul>
</li>
</ul>
<h2 id="Lifetime-Annotation-Syntax"><a href="#Lifetime-Annotation-Syntax" class="headerlink" title="Lifetime Annotation Syntax"></a>Lifetime Annotation Syntax</h2><ul>
<li><code>&amp;&#39;a i32</code></li>
<li><code>&amp;&#39;a mut i32</code></li>
</ul>
<h2 id="Lifetime-Annotation-in-Function-Signatures"><a href="#Lifetime-Annotation-in-Function-Signatures" class="headerlink" title="Lifetime Annotation in Function Signatures"></a>Lifetime Annotation in Function Signatures</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn longest&lt;&#x27;a&gt;(x: &amp;&#x27;a str, y: &amp;&#x27;a str) -&gt; &amp;&#x27;a str</span><br></pre></td></tr></table></figure>

<ul>
<li>é¦–å…ˆï¼Œç”±äºxå’Œyçš„lifetime parameteréƒ½ä¸ºâ€™aï¼Œè®¡ç®—å‡ºå¼•ç”¨å¯¹è±¡ä¸­æœ€å°çš„scope</li>
<li>ç„¶åï¼Œç”±äºreturn valueçš„lifetime parameterä¹Ÿä¸ºâ€™aï¼Œåˆ™è¡¨æ˜ç¨‹åºçŒ¿æœŸæœ›ï¼šè¿”å›å¼•ç”¨çš„scopeåªèƒ½åœ¨ä¸Šé¢è®¡ç®—çš„scopeä¸­æ¶µç›–</li>
<li>borrow checkeré€šè¿‡æ£€æŸ¥è¿”å›å¼•ç”¨æ˜¯å¦å¦‚æœŸæœ›çš„é‚£æ ·ä½¿ç”¨äº†ï¼Œç¡®ä¿ä¸ä¼šdangling</li>
</ul>
<h2 id="Thinking-in-Terms-of-Lifetimes"><a href="#Thinking-in-Terms-of-Lifetimes" class="headerlink" title="Thinking in Terms of Lifetimes"></a>Thinking in Terms of Lifetimes</h2><ul>
<li>lifetimeç”¨äºæŒ‡æ˜å®å‚å’Œè¿”å›å€¼ä¹‹é—´scopeçš„å…³ç³»</li>
</ul>
<h2 id="Lifetime-Annotations-in-Struct-Definitions"><a href="#Lifetime-Annotations-in-Struct-Definitions" class="headerlink" title="Lifetime Annotations in Struct Definitions"></a>Lifetime Annotations in Struct Definitions</h2><h2 id="Lifetime-Elision"><a href="#Lifetime-Elision" class="headerlink" title="Lifetime Elision"></a>Lifetime Elision</h2><p>å¯¹äºå‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„lifetimeï¼Œå¯ä»¥æ ¹æ®<code>Elision</code>è§„åˆ™è‡ªåŠ¨æ¨æ–­ï¼Œä¸‰ä¸ªç®€å•è§„åˆ™</p>
<h2 id="Lifetime-Annotations-in-Method-Definitions"><a href="#Lifetime-Annotations-in-Method-Definitions" class="headerlink" title="Lifetime Annotations in Method Definitions"></a>Lifetime Annotations in Method Definitions</h2><ul>
<li>ç±»ä¼¼äº<code>generic type parameter</code><h2 id="Static-Lifetime"><a href="#Static-Lifetime" class="headerlink" title="Static Lifetime"></a>Static Lifetime</h2></li>
</ul>
<h2 id="Generic-Type-Parameters-Trait-Bounds-and-Lifetimes-Together"><a href="#Generic-Type-Parameters-Trait-Bounds-and-Lifetimes-Together" class="headerlink" title="Generic Type Parameters, Trait Bounds, and Lifetimes Together"></a>Generic Type Parameters, Trait Bounds, and Lifetimes Together</h2><hr>
<h1 id="18-Tests"><a href="#18-Tests" class="headerlink" title="18 Tests"></a>18 Tests</h1><p>Going out of order from the book to cover tests â€“ many of the following exercises will ask you to make tests pass!</p>
<h2 id="Further-information-13"><a href="#Further-information-13" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch11-01-writing-tests.html">Writing Tests</a></li>
</ul>
<h1 id="How-to-Write-Tests"><a href="#How-to-Write-Tests" class="headerlink" title="How to Write Tests"></a>How to Write Tests</h1><ul>
<li>é€šè¿‡<code>cargo test</code>å¯ä»¥æµ‹è¯•æ‰€æœ‰ä»¥<code>#[test]</code>æ ‡æ³¨çš„ä¸º<code>test function</code>çš„å‡½æ•°</li>
<li><code>lib crate</code>ä¼šåˆ›å»ºtest module</li>
</ul>
<h2 id="assert"><a href="#assert" class="headerlink" title="assert!"></a><code>assert!</code></h2><h2 id="assert-eq-assert-ne"><a href="#assert-eq-assert-ne" class="headerlink" title="assert_eq!, assert_ne!"></a><code>assert_eq!</code>, <code>assert_ne!</code></h2><h2 id="should-panic"><a href="#should-panic" class="headerlink" title="should_panic"></a><code>should_panic</code></h2><p>ä¹Ÿæ˜¯Rustä¸­çš„å±æ€§<code>#[should_panic]</code></p>
<hr>
<h1 id="19-Iterators"><a href="#19-Iterators" class="headerlink" title="19 Iterators"></a>19 Iterators</h1><p>This section will teach you about Iterators.</p>
<h2 id="Further-information-14"><a href="#Further-information-14" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch13-02-iterators.html">Iterator</a></li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/std/iter/">Iterator documentation</a></li>
</ul>
<h1 id="Processing-a-Series-of-Items-with-Iterators"><a href="#Processing-a-Series-of-Items-with-Iterators" class="headerlink" title="Processing a Series of Items with Iterators"></a>Processing a Series of Items with Iterators</h1><blockquote>
<p>The iterator pattern allows you to perform some task on a sequence of items in turn.</p>
</blockquote>
<ul>
<li><code>iter()</code>æ–¹æ³•ï¼šè·å¾—ä¸€ä¸ªå®ç°äº†<code>Iterator Trait</code>å˜é‡çš„è¿­ä»£å™¨<ul>
<li>è°ƒç”¨nextæ—¶ï¼Œä¼šå¾—åˆ°å†…éƒ¨æ•°æ®çš„<code>immutable reference</code></li>
</ul>
</li>
<li><code>iter_mut()</code>æ–¹æ³•ï¼š<ul>
<li>è°ƒç”¨nextï¼Œä¼šå¾—åˆ°å†…éƒ¨æ•°æ®çš„<code>mutable reference</code></li>
</ul>
</li>
<li><code>into_iter()</code>ï¼šä¼šè·å¾—å®ç°<code>Iterator</code>å˜é‡çš„æ‰€æœ‰æƒï¼Œå¹¶è¿”å›è¿­ä»£å™¨</li>
</ul>
<p><strong>Hint:</strong> Rustä¸­çš„Iteratoræ˜¯<code>lazy</code>ï¼š</p>
<blockquote>
<p>they have no effect until you call methods that consume the iterator to use it up</p>
</blockquote>
<ul>
<li>éœ€è¦å¯¹è¿­ä»£å™¨è°ƒç”¨<code>consuming adaptor</code>ï¼Œå³ä¼šå–èµ°<code>ownership</code>çš„method</li>
</ul>
<h2 id="The-Iterator-Trait-and-the-next-Method"><a href="#The-Iterator-Trait-and-the-next-Method" class="headerlink" title="The Iterator Trait and the next Method"></a>The <code>Iterator</code> Trait and the <code>next</code> Method</h2><ul>
<li>å®ç°<code>Iterator</code> Traitå¿…é¡»å®ç°<code>next</code>æ–¹æ³•</li>
<li>æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ä¼šå°†æŒ‡é’ˆä¾æ¬¡æŒ‡å‘ä¸‹ä¸€ä¸ª<code>Item</code></li>
</ul>
<h2 id="Method-that-Consume-the-Iterator"><a href="#Method-that-Consume-the-Iterator" class="headerlink" title="Method that Consume the Iterator"></a>Method that Consume the Iterator</h2><ul>
<li><code>consuming adapter</code>ï¼šå†…éƒ¨ä¼šè°ƒç”¨<code>next</code>æ–¹æ³•<ul>
<li>ä¼šè·å–Iteratorçš„æ‰€æœ‰æƒï¼Œå³consume iterator</li>
<li>ç”±äº<code>lazy</code>ç‰¹æ€§ï¼Œå¿…é¡»åœ¨<code>iterator</code>çš„æœ€åè°ƒç”¨<code>consuming adpater</code><ul>
<li><code>collect()</code>ï¼šä¼šæ”¶é›†è¿­ä»£å™¨å‰©ä¸‹çš„<code>item</code>ä¸ºä¸€ä¸ª<code>collection</code>ç±»å‹</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Methods-that-Produce-Other-Iterators"><a href="#Methods-that-Produce-Other-Iterators" class="headerlink" title="Methods that Produce Other Iterators"></a>Methods that Produce Other Iterators</h2><ul>
<li><code>iterator adapter</code>ï¼šå†…éƒ¨ä¸ä¼šè°ƒç”¨<code>next</code>æ–¹æ³•<ul>
<li>ä¸ä¼šè·å¾—Iteratorçš„æ‰€æœ‰æƒ</li>
</ul>
</li>
</ul>
<h2 id="Using-Closures-that-Capture-Their-Environment"><a href="#Using-Closures-that-Capture-Their-Environment" class="headerlink" title="Using Closures that Capture Their Environment"></a>Using Closures that Capture Their Environment</h2><p>è®¸å¤š<code>iterator adpater</code>ä¼šå°†<code>closure</code>ä½œä¸ºå®å‚</p>
<hr>
<h1 id="20-Smart-Pointers"><a href="#20-Smart-Pointers" class="headerlink" title="20 Smart Pointers"></a>20 Smart Pointers</h1><p>In Rust, smart pointers are variables that contain an address in memory and reference some other data, but they also have additional metadata and capabilities.<br>Smart pointers in Rust often own the data they point to, while references only borrow data.</p>
<h2 id="Further-Information"><a href="#Further-Information" class="headerlink" title="Further Information"></a>Further Information</h2><ul>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch15-00-smart-pointers.html">Smart Pointers</a></li>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch16-03-shared-state.html">Shared-State Concurrency</a></li>
<li>[âœ…] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/borrow/enum.Cow.html">Cow Documentation</a></li>
</ul>
<h1 id="Smart-Pointers"><a href="#Smart-Pointers" class="headerlink" title="Smart Pointers"></a>Smart Pointers</h1><ul>
<li>Rustä¸­çš„referenceéƒ½æ˜¯raw pointerï¼šæ²¡æœ‰å…¶ä»–é¢å¤–çš„å…ƒæ•°æ®æˆ–è€…ç©ºé—´</li>
<li>Rustä¸­çš„Smart Pointerï¼šæœ‰é¢å¤–çš„å…ƒæ•°æ®æˆ–è€…ç©ºé—´æ¥å®Œæˆæ›´å¤æ‚çš„ç»´æŠ¤<ul>
<li>æ™ºèƒ½æŒ‡é’ˆ<code>own</code>æ•°æ®</li>
<li>å¿…é¡»å®ç°<code>Deref</code>å’Œ<code>Drop</code>Trait<ul>
<li><code>Deref</code>ä½¿å¾—æ™ºèƒ½æŒ‡é’ˆèƒ½å¤Ÿåƒreferenceä¸€æ ·è¢«<code>*</code>è§£å¼•ç”¨</li>
<li><code>Drop</code>å®šåˆ¶åŒ–æ™ºèƒ½æŒ‡é’ˆçš„é”€æ¯æ“ä½œï¼Œç±»ä¼¼äºC++ä¸­åªèƒ½æŒ‡é’ˆçš„dropå‡½æ•°ï¼Œåœ¨æ™ºèƒ½æŒ‡é’ˆå˜é‡out of scopeåè‡ªåŠ¨å°†heapä¸Šæ•°æ®é”€æ¯</li>
</ul>
</li>
<li>ç±»ä¼¼äºC++ä¸­çš„æ™ºèƒ½æŒ‡é’ˆ</li>
<li>ä¾‹å¦‚<code>Vec</code>,<code>String</code>ï¼šå›¾ä¸­s1å³ä¸ºæ™ºèƒ½æŒ‡é’ˆï¼Œsåˆ™ä¸ºå¼•ç”¨<ul>
<li><img src="../../../../StudyField/github_repositories/rustlings/exercises/06_move_semantics/image-2.png" alt="image-2"></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>reference vs. smart pointer:</p>
<ul>
<li>referenceå ç”¨ç©ºé—´æ›´å°ï¼Œsmart pointerå ç”¨ç©ºé—´æ›´å¤§<ul>
<li>referenceç±»ä¼¼äºraw pointer</li>
</ul>
</li>
<li>referenceåªæ˜¯å¯¹æ•°æ®çš„å¼•ç”¨ï¼Œsmart pointeråˆ™<code>own</code>æ•°æ®</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>Box&lt;T&gt;</code></li>
<li><code>Rc&lt;T&gt;</code></li>
<li><code>Ref&lt;T&gt;</code>,<code>RefMut&lt;T&gt;</code></li>
</ul>
<h2 id="Using-Box-to-Point-to-Data-on-the-Heap"><a href="#Using-Box-to-Point-to-Data-on-the-Heap" class="headerlink" title="Using Box to Point to Data on the Heap"></a>Using Box<T> to Point to Data on the Heap</h2><ul>
<li><code>Box::new()</code>å°†æ•°æ®å­˜å‚¨åœ¨Heapä¸­ï¼Œè€Œ<code>Box</code>å˜é‡å­˜å‚¨åœ¨Stackä¸­</li>
<li><code>Box</code>ï¼šç›¸æ¯”å…¶ä»–æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶èƒ½åŠ›è¾ƒå¼±<ul>
<li>indirectionï¼š<code>Box</code>å˜é‡å­˜å‚¨åœ¨stackï¼Œè€Œå…¶æŒ‡å‘çš„æ•°æ®å­˜å‚¨åœ¨Heapä¸­</li>
<li>heap allocation:</li>
</ul>
</li>
<li>ä½¿ç”¨åœºæ™¯ï¼š<ul>
<li>Boxç±»å‹å¤§å°å›ºå®šï¼šå°†ä¸€ä¸ªç¼–è¯‘æ—¶æ— æ³•ç¡®è®¤å¤§å°çš„ç±»å‹ä½œä¸º<code>Box</code>çš„<code>generic type parameter</code>ï¼Œä¾‹å¦‚é€’å½’ç±»å‹</li>
<li>Boxæ‹¥æœ‰æ‰€æŒ‡å‘æ•°æ®çš„æ‰€æœ‰æƒï¼šå¯ä»¥MoveæŒ‡å‘çš„æ•°æ®ï¼Œè€Œä¸æ˜¯æ‹·è´</li>
<li>Boxæœ‰<code>generic type parameter</code>ï¼šå¯ä»¥æŒ‡å®šå®ç°äº†æŸç§traitçš„ç±»å‹ä½œä¸º<code>generic type parameter</code></li>
</ul>
</li>
</ul>
<h3 id="Using-a-Box-lt-T-gt-to-Store-Data-on-the-Heap"><a href="#Using-a-Box-lt-T-gt-to-Store-Data-on-the-Heap" class="headerlink" title="Using a Box&lt;T&gt; to Store Data on the Heap"></a>Using a <code>Box&lt;T&gt;</code> to Store Data on the Heap</h3><p>ä½¿ç”¨<code>Box</code>çš„<code>associated function</code>-<code>new</code>å¯ä»¥åœ¨Heapä¸Šåˆ›å»ºä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ•°æ®ï¼Œå¹¶ç”±è¯¥Boxå˜é‡æŒ‡å‘å®ƒ</p>
<ul>
<li>ç±»ä¼¼äºC++ä¸­çš„<code>auto p = new int; auto sp = std::unique_ptr(p)</code></li>
</ul>
<h3 id="Enabling-Recursive-Types-with-Boxed"><a href="#Enabling-Recursive-Types-with-Boxed" class="headerlink" title="Enabling Recursive Types with Boxed"></a>Enabling Recursive Types with Boxed</h3><ul>
<li>é€šè¿‡å°†é€’å½’ç±»å‹ä½œä¸º<code>Box</code>çš„<code>generic type parameter</code>ï¼Œå¯ä»¥ä½¿å¾—Rustèƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶ç¡®å®šè¯¥ç±»å‹çš„å¤§å°</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">List</span></span>&#123;</span><br><span class="line">  Cons(<span class="built_in">i32</span>, List),</span><br><span class="line">  Nil</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="img.png" alt="img.png"></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">List</span></span>&#123;</span><br><span class="line">  Cons(<span class="built_in">i32</span>, <span class="built_in">Box</span>&lt;List&gt;),</span><br><span class="line">  Nil</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="img_1.png" alt="img_1.png"></p>
<h2 id="Deref-Trait-Treating-Smart-Pointers-Like-Regular-References"><a href="#Deref-Trait-Treating-Smart-Pointers-Like-Regular-References" class="headerlink" title="Deref Trait: Treating Smart Pointers Like Regular References"></a><code>Deref Trait</code>: Treating Smart Pointers Like Regular References</h2><ul>
<li>å®ç°<code>Deref</code>Traitï¼šèƒ½å¤Ÿä½¿å¾—<code>*</code>ç±»å‹èƒ½å¤Ÿåƒ<code>*</code>regular referenceä¸€æ ·</li>
</ul>
<h3 id="Following-the-Pointer-to-the-Value"><a href="#Following-the-Pointer-to-the-Value" class="headerlink" title="Following the Pointer to the Value"></a>Following the Pointer to the Value</h3><ul>
<li>regular referenceï¼šä¸€ç§æŒ‡é’ˆ<ul>
<li>å¯¹å…¶ä½¿ç”¨è§£å¼•ç”¨æ“ä½œ<code>*</code>ï¼šå°±åƒæ˜¯é¡ºç€æŒ‡é’ˆæ‰¾åˆ°çœŸæ­£çš„æ•°æ®</li>
</ul>
</li>
</ul>
<h3 id="Using-Box-Like-a-Reference"><a href="#Using-Box-Like-a-Reference" class="headerlink" title="Using Box Like a Reference"></a>Using Box<T> Like a Reference</h3><ul>
<li>ä¹Ÿå¯ä»¥å¯¹<code>Box&lt;T&gt;</code>ç±»å‹çš„å˜é‡ä½¿ç”¨è§£å¼•ç”¨<code>*</code>ï¼šä¹Ÿå¯ä»¥å¾—åˆ°å…¶å†…éƒ¨çœŸæ­£çš„æ•°æ®</li>
</ul>
<h3 id="Treating-a-Type-Like-a-Reference-by-Implementing-the-Deref-Trait"><a href="#Treating-a-Type-Like-a-Reference-by-Implementing-the-Deref-Trait" class="headerlink" title="Treating a Type Like a Reference by Implementing the Deref Trait"></a>Treating a Type Like a Reference by Implementing the <code>Deref</code> Trait</h3><ul>
<li>å®ç°<code>Deref</code> Trait:<ul>
<li>å¿…é¡»å®ç°å…¶method<code>deref</code></li>
<li><pre><code class="rust">  impl&lt;T&gt; Deref for MyBox&lt;T&gt;&#123;
    type Target = T;
    fn deref(self: &amp;Self) -&gt; &amp;Self::Target&#123;
        &amp;self.0
    &#125;   
  &#125;
</code></pre>
</li>
</ul>
</li>
<li>å®ç°äº†<code>deref</code>ä¾¿å¯ä»¥åƒ<code>*</code>regular referenceä¸€æ ·ï¼Œ<code>*</code>Type:<ul>
<li><code>* mybox</code> è‡ªåŠ¨è½¬æ¢ä¸º <code>*(mybox.deref())</code></li>
</ul>
</li>
<li>å³ï¼šå¯¹äºå®ç°äº†<code>Deref</code>çš„æ•°æ®ç±»å‹è¿›è¡Œ<code>*</code>è§£å¼•ç”¨ï¼š<ol>
<li>é¦–å…ˆï¼Œè°ƒç”¨<code>deref</code>è½¬æ¢ä¸ºå¯¹å…¶å†…éƒ¨æ•°æ®çš„regular reference</li>
<li>æ¥ç€ï¼Œå¯¹regular referenceè¿›è¡Œè§£å¼•ç”¨å³å¯å¾—åˆ°Tç±»å‹çš„å†…éƒ¨æ•°æ®</li>
</ol>
</li>
</ul>
<h3 id="Implicit-Deref-Coercions-with-Functions-and-Methods"><a href="#Implicit-Deref-Coercions-with-Functions-and-Methods" class="headerlink" title="Implicit Deref Coercions with Functions and Methods"></a><code>Implicit Deref Coercions</code> with Functions and Methods</h3><blockquote>
<p>Deref coercion converts a reference to a type that implements the Deref trait into a reference to another type.</p>
</blockquote>
<ul>
<li>å°†ä¸€ä¸ªå¯¹å®ç°äº†<code>Deref</code>Traitçš„ç±»å‹çš„å¼•ç”¨=&gt;å¯¹Self::Targetç±»å‹çš„å¼•ç”¨<ul>
<li>å³<code>&amp;MyBox&lt;T&gt;</code> =&gt; <code>&amp;T</code>ï¼Œ<code>&amp;String</code> =&gt; <code>&amp;str</code></li>
</ul>
</li>
</ul>
<h3 id="How-Deref-Coercion-Interacts-with-Mutability"><a href="#How-Deref-Coercion-Interacts-with-Mutability" class="headerlink" title="How Deref Coercion Interacts with Mutability"></a>How Deref Coercion Interacts with Mutability</h3><p>Rust does deref coercion when it finds types and trait implementations in three cases:</p>
<ul>
<li>From &amp;T to &amp;U when T: Deref&lt;Target=U&gt;</li>
<li>From &amp;mut T to &amp;mut U when T: DerefMut&lt;Target=U&gt;</li>
<li>From &amp;mut T to &amp;U when T: Deref&lt;Target=U&gt;</li>
</ul>
<h2 id="Drop-Trait-Running-Code-on-Cleanup-with-the-Drop-Trait"><a href="#Drop-Trait-Running-Code-on-Cleanup-with-the-Drop-Trait" class="headerlink" title="Drop Trait: Running Code on Cleanup with the Drop Trait"></a><code>Drop Trait</code>: Running Code on Cleanup with the Drop Trait</h2><ul>
<li>æ¯å½“å®ç°äº†<code>Drop</code>Traitçš„ç±»å‹çš„å®ä¾‹out of scopeï¼Œéƒ½ä¼šè‡ªåŠ¨è°ƒç”¨<code>drop</code>æ–¹æ³•ï¼Œå¹¶å¯¹å…¶heapä¸Šçš„æ•°æ®è¿›è¡Œé‡Šæ”¾ï¼Œæˆ–è€…åšå…¶ä»–å–„åå·¥ä½œ<ul>
<li>ç±»ä¼¼äºC++çš„ææ„å‡½æ•°</li>
<li><code>CMU15-445(2023FALL)</code>çš„<code>Project#2</code>çš„<code>PageGuard</code>å¯èƒ½å°±æ˜¯å€Ÿé‰´äº†è¿™é‡Œçš„æ€æƒ³</li>
</ul>
</li>
</ul>
<h3 id="Dropping-a-Value-Early-with-std-mem-drop"><a href="#Dropping-a-Value-Early-with-std-mem-drop" class="headerlink" title="Dropping a Value Early with std::mem::drop"></a>Dropping a Value Early with <code>std::mem::drop</code></h3><ul>
<li>Rustä¸å…è®¸æ‰‹åŠ¨è°ƒç”¨<code>Drop</code>ä¸­çš„<code>drop</code>æ–¹æ³•</li>
<li>Rustä¹Ÿä¸å…è®¸ç¦æ­¢åœ¨out of scopeæ—¶è‡ªåŠ¨è°ƒç”¨<code>drop</code>æ–¹æ³•<ul>
<li>æ®è¯´æ˜¯ä¸ºäº†é˜²æ­¢<code>double free</code></li>
<li>ä½†æ˜¯<code>PageGuard</code>ä¸­çš„Dropæ˜¯å¯ä»¥æ‰‹åŠ¨é‡Šæ”¾çš„ï¼Œå¯èƒ½å› ä¸ºå’Œå†…å­˜æ²¡æœ‰å¾ˆç´§å¯†çš„è”ç³»</li>
</ul>
</li>
<li>Rustæä¾›äº†<code>std::mem::drop</code>æ¥æå‰æ‰‹åŠ¨é‡Šæ”¾æŸä¸ªvalueï¼ˆä¸å¿…å®ç°Drop Traitï¼‰</li>
</ul>
<h2 id="Rc-the-Reference-Counted-Smart-Pointer"><a href="#Rc-the-Reference-Counted-Smart-Pointer" class="headerlink" title="Rc: the Reference Counted Smart Pointer"></a>Rc<T>: the Reference Counted Smart Pointer</h2><ul>
<li><code>reference counting</code>:<code>Rc</code>ç±»å‹ä¼šè®°å½•ï¼Œå½“å‰å†…éƒ¨æ•°æ®æœ‰å¤šå°‘å¼•ç”¨<ul>
<li>ç±»ä¼¼äºC++ä¸­çš„<code>std::shared_ptr</code></li>
</ul>
</li>
<li><code>Rc&lt;T&gt;</code>ä¸æ˜¯å¤šçº¿ç¨‹å®‰å…¨</li>
<li><code>Rc&lt;T&gt;</code>åªèƒ½è¿”å›å†…éƒ¨æ•°æ®çš„<code>immutable reference</code></li>
<li>é…åˆ<code>RefCell&lt;T&gt;</code>çš„<code>borrow_mut</code>æ–¹æ³•æ‰å¯ä»¥è·å¾—å†…éƒ¨æ•°æ®çš„å¯å˜å¼•ç”¨<ul>
<li><strong>Hint:</strong><code>RefCell</code>çš„<code>reference rule</code>æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œçš„</li>
</ul>
</li>
</ul>
<h3 id="Using-Rc-to-Share-Data"><a href="#Using-Rc-to-Share-Data" class="headerlink" title="Using Rc to Share Data"></a>Using Rc<T> to Share Data</h3><p><code>Rc::clone(&amp;a)</code>ï¼šè¿›è¡Œæµ…æ‹·è´</p>
<ul>
<li>åªå¢åŠ Rcå®ä¾‹<code>a</code>çš„å¼•ç”¨è®¡æ•°</li>
</ul>
<h3 id="Cloning-an-Rc-Increases-the-Reference-Count"><a href="#Cloning-an-Rc-Increases-the-Reference-Count" class="headerlink" title="Cloning an Rc Increases the Reference Count"></a>Cloning an Rc<T> Increases the Reference Count</h3><ul>
<li>æ¯æ¬¡å¯¹<code>Rc</code>å®ä¾‹è°ƒç”¨<code>RC::clone</code>éƒ½ä¼šå¢åŠ å…¶å¼•ç”¨è®¡æ•°</li>
<li>æ¯æ¬¡dropéƒ½ä¼šé™ä½å¼•ç”¨è®¡æ•°</li>
<li>å¯¹<code>Rc</code>å®ä¾‹çš„å¼•ç”¨åˆ†ä¸ºä¸¤ç§ï¼šweakå’Œstrong</li>
<li>é€šè¿‡<code>strong_count</code>å¯ä»¥çœ‹åˆ°å…¶å¼•ç”¨è®¡æ•°</li>
</ul>
<h2 id="RefCell-and-the-Interior-Mutability-Pattern"><a href="#RefCell-and-the-Interior-Mutability-Pattern" class="headerlink" title="RefCell and the Interior Mutability Pattern"></a>RefCell<T> and the Interior Mutability Pattern</h2><ul>
<li><code>Interior Mutability</code>: design pattern in Rust that allows you to mutate data even when there are immutable references to that data<ul>
<li>ä½¿ç”¨<code>unsafe</code>ä»£ç æ¥å®ç°<h3 id="Enforcing-Borrowing-Rules-at-Runtime-with-RefCell"><a href="#Enforcing-Borrowing-Rules-at-Runtime-with-RefCell" class="headerlink" title="Enforcing Borrowing Rules at Runtime with RefCell"></a>Enforcing Borrowing Rules at Runtime with RefCell<T></h3>Here is a recap of the reasons to choose Box<T>, Rc<T>, or RefCell<T>:</li>
</ul>
</li>
<li>Rc<T> enables <strong>multiple owners</strong> of the same data; Box<T> and RefCell<T> have <strong>single owner</strong>. </li>
<li>Box<T> allows immutable or mutable borrows checked at compile time; Rc<T> allows only immutable borrows checked at compile time; RefCell<T> allows immutable or mutable borrows checked at runtime. </li>
<li>Because RefCell<T> allows mutable borrows checked at runtime, you can mutate the value inside the RefCell<T> even when the RefCell<T> is immutable.</li>
</ul>
<h3 id="Interior-Mutability-A-Mutable-Borrow-to-an-Immutable-Value"><a href="#Interior-Mutability-A-Mutable-Borrow-to-an-Immutable-Value" class="headerlink" title="Interior Mutability: A Mutable Borrow to an Immutable Value"></a>Interior Mutability: A Mutable Borrow to an Immutable Value</h3><p>å¯¹äºå‡½æ•°ç­¾åä¸º<code>immutable reference</code>structç±»å‹çš„æƒ…å†µï¼Œå¦‚æœæƒ³æ”¹structå†…éƒ¨filedï¼Œå¹¶ä¸”ä¸å¯æ›´æ”¹å‡½æ•°ç­¾åï¼š</p>
<ul>
<li>å°†fieldçš„ç±»å‹ä½¿ç”¨<code>RefCell</code>åŒ…è£¹ï¼š<code>RefCell&lt;T&gt;</code><ul>
<li>è¿™æ ·åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥å¯¹<code>RefCell&lt;T&gt;</code>è°ƒç”¨<code>borrow_mut</code>è·å¾—å…¶å†…éƒ¨æ•°æ®çš„å¯å˜å¼•ç”¨</li>
<li><code>borrow</code>è·å¾—å…¶ä¸å¯å˜å¼•ç”¨</li>
</ul>
</li>
<li>é€šè¿‡<code>RefCell</code>ï¼Œåªåœ¨å¯¹fieldæ›´æ”¹çš„åœ°æ–¹æ—¶è¯¥fieldæ˜¯<code>mutable</code>ï¼Œåœ¨è¯¥å‡½æ•°å…¶ä»–éƒ¨åˆ†è¯¥Tä»ç„¶è¡¨ç°ä¸º<code>immutable reference</code></li>
</ul>
<h4 id="Keeping-Track-of-Borrows-at-Runtime-with-RefCell"><a href="#Keeping-Track-of-Borrows-at-Runtime-with-RefCell" class="headerlink" title="Keeping Track of Borrows at Runtime with RefCell"></a>Keeping Track of Borrows at Runtime with RefCell<T></h4><ul>
<li>å¯¹äº<code>RefCell&lt;T&gt;</code>çš„<code>reference rule</code>æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥çš„</li>
</ul>
<h3 id="Having-Multiple-Owners-of-Mutable-Data-by-Combining-Rc-and-RefCell"><a href="#Having-Multiple-Owners-of-Mutable-Data-by-Combining-Rc-and-RefCell" class="headerlink" title="Having Multiple Owners of Mutable Data by Combining Rc and RefCell"></a>Having Multiple Owners of Mutable Data by Combining Rc<T> and RefCell<T></h3><ul>
<li><code>Rc&lt;T&gt;</code>åªèƒ½å…è®¸<code>immutable reference</code></li>
<li>Rcå†…éƒ¨åŒ…è£¹RefCellå¯ä»¥é€šè¿‡<code>borrow_mut</code>è·å¾—å¯å˜å¼•ç”¨</li>
</ul>
<h2 id="Reference-Cycles-Can-Leak-Memory"><a href="#Reference-Cycles-Can-Leak-Memory" class="headerlink" title="Reference Cycles Can Leak Memory"></a>Reference Cycles Can Leak Memory</h2><h1 id="Shared-Stated-Concurrency"><a href="#Shared-Stated-Concurrency" class="headerlink" title="Shared-Stated Concurrency"></a>Shared-Stated Concurrency</h1><ul>
<li><code>Mutex&lt;T&gt;</code>-äº’æ–¥ä½“ï¼šç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®<ul>
<li>å…¶æ–¹æ³•<code>lock</code>è¿”å›<code>smart pointer</code>â€”â€”<code>MutexGuard&lt;T&gt;</code>(åŒ…è£¹åœ¨Resultä¸­)ï¼š<ul>
<li>ç±»ä¼¼äº<code>RefCell&lt;T&gt;</code>ï¼Œå…·æœ‰ç›¸åŒçš„APIï¼Œå¹¶ä¸”æ‹¥æœ‰<code>å†…éƒ¨å¯å˜æ€§</code></li>
<li>å®ç°äº†<code>Deref</code>ï¼Œå› æ­¤å¯ä»¥åƒ<code>regular reference</code>ä¸€æ ·ä½¿ç”¨<code>*</code>è§£å¼•ç”¨</li>
<li>å…·æœ‰è§£å¼•ç”¨å¼ºåˆ¶æ€§çš„ç‰¹ç‚¹</li>
</ul>
</li>
</ul>
</li>
<li><code>Arc&lt;T&gt;</code>ç±»ä¼¼äº<code>Rc&lt;T&gt;</code><ul>
<li>å…·æœ‰ç›¸åŒAPIï¼Œå¯¹äºå¼•ç”¨è®¡æ•°å™¨æä¾›åŸå­æ“ä½œï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
<li>å€¼å¾—æ³¨æ„çš„æ˜¯<code>Actix-Web</code>ä¸­çš„<code>web::Data</code>å†…éƒ¨ä½¿ç”¨<code>Arc&lt;T&gt;</code>æ¥å®ç°ï¼Œå› æ­¤å¯ä»¥å¯¹<code>web::Data</code>åŒ…è£¹çš„<code>AppState</code>è¿›è¡Œçº¿ç¨‹å®‰å…¨è®¿é—®<h2 id="Using-Mutexes-to-Allow-Access-to-Data-from-One-Thread-at-a-Time"><a href="#Using-Mutexes-to-Allow-Access-to-Data-from-One-Thread-at-a-Time" class="headerlink" title="Using Mutexes to Allow Access to Data from One Thread at a Time"></a>Using Mutexes to Allow Access to Data from One Thread at a Time</h2><h2 id="The-API-of-Mutex"><a href="#The-API-of-Mutex" class="headerlink" title="The API of Mutex"></a>The API of Mutex<T></h2><h2 id="Sharing-a-Mutex-Between-Multiple-Threads"><a href="#Sharing-a-Mutex-Between-Multiple-Threads" class="headerlink" title="Sharing a Mutex Between Multiple Threads"></a>Sharing a Mutex<T> Between Multiple Threads</h2><h2 id="Multiple-Ownership-with-Multiple-Threads"><a href="#Multiple-Ownership-with-Multiple-Threads" class="headerlink" title="Multiple Ownership with Multiple Threads"></a>Multiple Ownership with Multiple Threads</h2><h2 id="Atomic-Reference-Counting-with-Arc"><a href="#Atomic-Reference-Counting-with-Arc" class="headerlink" title="Atomic Reference Counting with Arc"></a>Atomic Reference Counting with Arc<T></h2><h2 id="Similarities-Between-RefCell-Rc-and-Mutex-Arc"><a href="#Similarities-Between-RefCell-Rc-and-Mutex-Arc" class="headerlink" title="Similarities Between RefCell/Rc and Mutex/Arc"></a>Similarities Between RefCell<T>/Rc<T> and Mutex<T>/Arc<T></h2></li>
</ul>
</li>
</ul>
<h1 id="Clone-On-Write"><a href="#Clone-On-Write" class="headerlink" title="Clone-On-Write"></a>Clone-On-Write</h1><p><code>CMU15-445</code>çš„<code>Porject#0</code>å®ç°ä¸€ä¸ª<code>COW</code>çš„<code>Tree</code>, å¯èƒ½å€Ÿé‰´äº†è¿™é‡Œçš„æ€æƒ³</p>
<blockquote>
<p>// Cow is a clone-on-write smart pointer. It can enclose and provide immutable access to<br>// borrowed data, and clone the data lazily when mutation or ownership is<br>// required. The type is designed to work with general borrowed data via the<br>// Borrow trait.</p>
</blockquote>
<ul>
<li>ä½¿ç”¨<code>Cow&lt;T&gt;</code>ç±»å‹ï¼Œåªæœ‰å½“éœ€è¦ä¿®æ”¹æˆ–è€…ä¼ å…¥äº†æ‰€æœ‰æƒæ—¶ï¼Œæ‰è¿›è¡ŒClone</li>
</ul>
<hr>
<h1 id="21-Threads"><a href="#21-Threads" class="headerlink" title="21 Threads"></a>21 Threads</h1><p>In most current operating systems, an executed programâ€™s code is run in a process, and the operating system manages multiple processes at once.<br>Within your program, you can also have independent parts that run simultaneously. The features that run these independent parts are called threads.</p>
<h2 id="Further-information-15"><a href="#Further-information-15" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/1.4.0/book/dining-philosophers.html">Dining Philosophers example</a></li>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch16-01-threads.html">Using Threads to Run Code Simultaneously</a></li>
</ul>
<h1 id="Using-Threads-to-Run-COde-simultaneously"><a href="#Using-Threads-to-Run-COde-simultaneously" class="headerlink" title="Using Threads to Run COde simultaneously"></a>Using Threads to Run COde simultaneously</h1><p>å’ŒC++ä¸­çº¿ç¨‹çš„ä½¿ç”¨ç±»ä¼¼</p>
<ul>
<li><p>åˆ›å»ºæ–°çº¿ç¨‹ï¼š<code>thread::spawn</code>ï¼Œä¼šè¿”å›<code>JoinHandle</code></p>
<ul>
<li>å‚æ•°ä¸º<code>closure</code>ä¼š<code>capture</code>ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡<ul>
<li><code>move closure</code>ä¼šå°†æ•è·åˆ°çš„å˜é‡è½¬ç§»æ‰€æœ‰æƒ</li>
</ul>
</li>
<li>æ–°çº¿ç¨‹ä¼šæ‰§è¡Œclosureä¸­çš„å†…å®¹</li>
</ul>
</li>
<li><p><code>JoinHandle::join</code>ä¼šä½¿ç­‰å¾…è¯¥çº¿ç¨‹æ‰§è¡Œå®Œ</p>
<ul>
<li><strong>Hint:</strong> <code>join</code>ä¼šè¿”å›<code>Result&lt;T&gt;</code>å…¶ä¸­<code>T</code>ä¸ºçº¿ç¨‹å†…éƒ¨è¿”å›çš„å€¼</li>
</ul>
</li>
<li><p><code>rust</code>ä¸­çš„<code>mpsc</code>å¯ä»¥å®ç°çº¿ç¨‹å®‰å…¨çš„å¤šç”Ÿäº§è€…å’Œå•æ¶ˆè´¹è€…æ¨¡å¼çš„FIFOç®¡é“</p>
</li>
</ul>
<hr>
<h1 id="22-Macros"><a href="#22-Macros" class="headerlink" title="22 Macros"></a>22 Macros</h1><p>Rustâ€™s macro system is very powerful, but also kind of difficult to wrap your<br>head around. Weâ€™re not going to teach you how to write your own fully-featured<br>macros. Instead, weâ€™ll show you how to use and create them.</p>
<p>If youâ€™d like to learn more about writing your own macros, the<br><a target="_blank" rel="noopener" href="https://github.com/tfpk/macrokata">macrokata</a> project has a similar style<br>of exercises to Rustlings, but is all about learning to write Macros.</p>
<h2 id="Further-information-16"><a href="#Further-information-16" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch19-06-macros.html">Macros</a></li>
<li>[] <a target="_blank" rel="noopener" href="https://veykril.github.io/tlborm/">The Little Book of Rust Macros</a></li>
</ul>
<h1 id="Macros"><a href="#Macros" class="headerlink" title="Macros"></a>Macros</h1><ul>
<li><code>metaprogram:</code> ä»rustä»£ç ç”Ÿæˆrustä»£ç </li>
<li>Rustæœ‰å››ç§å®<ul>
<li><code>declarative macro</code>: å†…éƒ¨ä½¿ç”¨ç±»ä¼¼äº<code>match</code>çš„è§£æ„å®ç°</li>
</ul>
</li>
<li><code>macro</code> vs <code>function</code>:<ul>
<li>å¿…é¡»å…ˆå®šä¹‰å®æ‰èƒ½ä½¿ç”¨ï¼Œä½¿ç”¨<code>#[macro_use]</code>å¼•å…¥scope</li>
</ul>
</li>
</ul>
<hr>
<h1 id="23-Clippy"><a href="#23-Clippy" class="headerlink" title="23 Clippy"></a>23 Clippy</h1><p>The Clippy tool is a collection of lints to analyze your code so you can catch common mistakes and improve your Rust code.</p>
<p>If you used the installation script for Rustlings, Clippy should be already installed.<br>If not you can install it manually via <code>rustup component add clippy</code>.</p>
<h2 id="Further-information-17"><a href="#Further-information-17" class="headerlink" title="Further information"></a>Further information</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/rust-lang/rust-clippy">GitHub Repository</a>.</li>
</ul>
<hr>
<h1 id="24-Type-conversions"><a href="#24-Type-conversions" class="headerlink" title="24 Type conversions"></a>24 Type conversions</h1><p>Rust offers a multitude of ways to convert a value of a given type into another type.</p>
<p>The simplest form of type conversion is a type cast expression. It is denoted with the binary operator <code>as</code>. For instance, <code>println!(&quot;&#123;&#125;&quot;, 1 + 1.0);</code> would not compile, since <code>1</code> is an integer while <code>1.0</code> is a float. However, <code>println!(&quot;&#123;&#125;&quot;, 1 as f32 + 1.0)</code> should compile. The exercise <a href="using_as.rs"><code>using_as</code></a> tries to cover this.</p>
<p>Rust also offers traits that facilitate type conversions upon implementation. These traits can be found under the <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/convert/index.html"><code>convert</code></a> module.<br>The traits are the following:</p>
<ul>
<li><code>From</code> and <code>Into</code> covered in <a href="from_into.rs"><code>from_into</code></a></li>
<li><code>TryFrom</code> and <code>TryInto</code> covered in <a href="try_from_into.rs"><code>try_from_into</code></a></li>
<li><code>AsRef</code> and <code>AsMut</code> covered in <a href="as_ref_mut.rs"><code>as_ref_mut</code></a></li>
</ul>
<p>Furthermore, the <code>std::str</code> module offers a trait called <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/str/trait.FromStr.html"><code>FromStr</code></a> which helps with converting strings into target types via the <code>parse</code> method on strings. If properly implemented for a given type <code>Person</code>, then <code>let p: Person = &quot;Mark,20&quot;.parse().unwrap()</code> should both compile and run without panicking.</p>
<p>These should be the main ways <em><strong>within the standard library</strong></em> to convert data into your desired types.</p>
<h2 id="Further-information-18"><a href="#Further-information-18" class="headerlink" title="Further information"></a>Further information</h2><p>These are not directly covered in the book, but the standard library has a great documentation for it.</p>
<ul>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/convert/index.html">conversions</a></li>
<li>[] <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/str/trait.FromStr.html"><code>FromStr</code> trait</a></li>
</ul>
<h1 id="AsRef-AsMut-From-Into-TryFrom-Try-Into"><a href="#AsRef-AsMut-From-Into-TryFrom-Try-Into" class="headerlink" title="AsRef, AsMut, From, Into, TryFrom, Try Into"></a>AsRef, AsMut, From, Into, TryFrom, Try Into</h1><ul>
<li><p>Cheap Conversion: AsRef, AsMut</p>
<ul>
<li>éƒ½æ˜¯æ³›å‹Traitï¼Œå®ç°äº†è¯¥Traitçš„ç±»å‹ï¼Œå¯ä»¥å°†å…¶å¼•ç”¨è½¬æ¢ä¸ºæ³›å‹ç±»å‹çš„å¼•ç”¨</li>
<li>è‡³äºä¸ºä»€ä¹ˆæ˜¯cheapï¼šå› ä¸ºåªæ˜¯æ”¹å˜äº†å¼•ç”¨çš„ç±»å‹ï¼Œå¯¹äºå®é™…æ•°æ®å€¼æ²¡æœ‰æ”¹å˜ï¼Œä¹Ÿæ²¡æœ‰æ”¹å˜å…¶æ‰€æœ‰æƒ</li>
<li><strong>Hint:</strong> é»˜è®¤å¯¹å„ç§æ™ºèƒ½æŒ‡é’ˆå®ç°äº†<code>AsRef/AsMut</code>ï¼Œå³å¯ä»¥å¯ä»¥é€šè¿‡å¯¹æ™ºèƒ½æŒ‡é’ˆè°ƒç”¨<code>as_mut/as_ref</code>è·å¾—å†…éƒ¨æ•°æ®ç±»å‹çš„å¼•ç”¨</li>
<li><strong>Hint:</strong> å®ç°äº†<code>Deref</code>æˆ–è€…<code>MutDeref</code>çš„ç±»å‹ï¼ˆä¾‹å¦‚Boxæˆ–è€…å…¶ä»–æ™ºèƒ½æŒ‡é’ˆï¼‰ï¼Œç”±äº<code>deref coercion</code>ï¼ˆå³å¯¹æ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨ä¼šéšå¼åœ°è½¬æ¢ä¸ºå¯¹å†…éƒ¨æ•°æ®ç±»å‹çš„å¼•ç”¨ï¼‰ï¼Œå› æ­¤å¯¹äºå®ç°äº†<code>AsRef/AsMut</code>çš„ç±»å‹å¯ä»¥ç›´æ¥å¯¹åŒ…è£¹è¯¥ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆè°ƒç”¨<code>as_ref/as_mut</code></li>
</ul>
</li>
<li><p>Consuming/costly Conversion: From, Into, â€¦</p>
<ul>
<li>ä¹Ÿéƒ½æ˜¯æ³›å‹Traitï¼Œå®ç°äº†è¯¥<code>From</code>Traitçš„ç±»å‹ï¼Œå¯ä»¥å°†æ³›å‹ç±»å‹çš„å€¼è½¬æ¢ä¸ºè¯¥ç±»å‹çš„å€¼</li>
<li>consuming/costlyï¼šæ”¹å˜äº†å®é™…æ•°æ®å€¼çš„åº•å±‚å®ç°ï¼Œæ”¹å˜äº†æ‰€æœ‰æƒ</li>
</ul>
</li>
</ul>
<h2 id="From"><a href="#From" class="headerlink" title="From"></a>From</h2><p>å®ç°Fromä¼šè‡ªåŠ¨åœ°ä¸ºå®ç°ç±»å‹å®ç°Into</p>
<ul>
<li>ç®€åŒ–é”™è¯¯å¤„ç†ï¼šä¸ºè‡ªå·±çš„é”™è¯¯ç±»å‹MyErrorå®ç°<code>From</code>æ³›å‹å‚æ•°ä¸ºåº•å±‚é”™è¯¯ç±»å‹<ul>
<li>å¯ä»¥é€šè¿‡<code>?</code>è¯­æ³•ç³–ï¼Œå°†åº•å±‚é”™è¯¯ç±»å‹è‡ªåŠ¨åœ°è½¬æ¢ä¸ºMyError</li>
</ul>
</li>
</ul>
<h2 id="TryFrom"><a href="#TryFrom" class="headerlink" title="TryFrom"></a>TryFrom</h2><p>ä¸Fromç›¸è¿‘ï¼Œä½†æ˜¯è°ƒç”¨fromæ–¹æ³•è¿”å›çš„æ˜¯Resultç±»å‹ï¼Œæ›´åŠ å®‰å…¨æ–¹ä¾¿ï¼Œå¯ä»¥è®©ç¨‹åºçŒ¿è‡ªå·±å†³å®šå¦‚ä½•å¤„ç†ä¸¤ç§æƒ…å†µ</p>
<h1 id="Trait-FromStr"><a href="#Trait-FromStr" class="headerlink" title="Trait: FromStr"></a>Trait: FromStr</h1><blockquote>
<p>è‡ªå·±åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ‰€ç”¨åˆ°çš„crateæ˜¯æ²¡æœ‰ç±»ä¼¼äºThe Bookå¾ˆå‹å–„çš„æ•™ç¨‹ã€‚å°è¯•é€šè¿‡<a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/str/trait.FromStr.html"><code>FromStr</code> trait</a>é”»ç‚¼ä¸€ä¸‹è‡ªå·±è¯»rust æ–‡æ¡£</p>
</blockquote>
<ul>
<li>FromStr: <ul>
<li>æœ€é¡¶éƒ¨å†™äº†FromStræ˜¯ä¸€ä¸ªTraitï¼Œå¹¶ä¸”æä¾›äº†ç®€åŒ–ç‰ˆçš„ç­¾åã€‚</li>
<li>ç‚¹å‡»sourceå¯ä»¥é˜…è¯»æºç ï¼Œä»Šåè‡ªå·±å†™crateå¯ä»¥å‚è€ƒ</li>
<li>ç´§æ¥ç€æä¾›äº†å¯¹è¯¥TraitåŠŸèƒ½çš„æè¿°å’Œä¾‹å­</li>
</ul>
</li>
<li>Required Associated Types: å®ç°è¯¥Traitï¼Œä¹Ÿéœ€è¦ä½¿ç”¨typeå£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹ï¼Œä»¥å…³è”ç±»å‹çš„å½¢å¼</li>
<li>Required Methods: å®ç°è¯¥Traitï¼Œå¿…é¡»è¦å®ç°çš„æ–¹æ³•from_str</li>
<li>Implementorsï¼šä¸€äº›ç­¾åå±•ç¤ºäº†å®ç°äº†è¯¥Traitçš„ç±»å‹</li>
<li>Modulesï¼šFromStræ‰€åœ¨çš„æ¨¡å—ï¼Œå³std::str<ul>
<li>ç´§æ¥ç€æ˜¯è¯¥æ¨¡å—å†…éƒ¨çš„å†…å®¹ï¼š<ul>
<li>Struct</li>
<li>Trait</li>
<li>Function</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>é€šè¿‡é˜…è¯»rustdocï¼Œæˆ‘çŸ¥é“äº†å¿…é¡»å®ç°from_stræ–¹æ³•æ‰èƒ½å®ç°è¯¥FromStr Traitï¼Œä¾¿å¯ä»¥é€šè¿‡strç±»å‹çš„parseæ–¹æ³•éšå¼åœ°å°†str consuming conversionä¸ºå®ç°è¯¥traitçš„ç±»å‹</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://zihao256.github.io">zihao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://zihao256.github.io/p/2acafc61.html">https://zihao256.github.io/p/2acafc61.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Rust/">Rust</a></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven6.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/p/d028ccc3.html"><img class="next-cover" src="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven-yx7vmk.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">åŸºäºActix-Web(Rust)å’ŒVueçš„Webå¼€å‘è®°å½•</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/p/d028ccc3.html" title="åŸºäºActix-Web(Rust)å’ŒVueçš„Webå¼€å‘è®°å½•"><img class="cover" src="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven-yx7vmk.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-13</div><div class="title">åŸºäºActix-Web(Rust)å’ŒVueçš„Webå¼€å‘è®°å½•</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://github.com/ZiHao256/ZiHao256.github.io/blob/hexo/images/stitch.JPG?raw=true" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zihao</div><div class="author-info__description">Why be afraid of the infinity of truth? Joy resides in every step of growth.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">64</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">44</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">16</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ZiHao256"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ZiHao256" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSSé“¾æ¥"><i class="fa fa-rss"></i></a><a class="social-icon" href="mailto:zihao626@gmail.com" target="_blank" title="gmail"><i class="fa-brands fa-google"></i></a><a class="social-icon" href="mailto:zh_ma@stu.xidian.edu.cn" target="_blank" title="xdu-mail"><i class="fa fa-graduation-cap"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">keep moving in 2023</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Book-Chapter-Mapping"><span class="toc-text">Book Chapter Mapping</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Intro"><span class="toc-text">1.Intro</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Formatted-print"><span class="toc-text">Formatted print</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Variables"><span class="toc-text">2. Variables</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-1"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Variables-and-Mutability"><span class="toc-text">Variables and Mutability</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Functions"><span class="toc-text">3.Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-2"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Functions"><span class="toc-text">Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Parameters"><span class="toc-text">Parameters</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Statement-and-Expressions"><span class="toc-text">Statement and Expressions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Functions-with-return-values"><span class="toc-text">Functions with return values</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-If"><span class="toc-text">4.If</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-3"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Control-Flow"><span class="toc-text">Control Flow</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if-Expression"><span class="toc-text">if Expression</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Repetition-with-Loops"><span class="toc-text">Repetition with Loops</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#loop"><span class="toc-text">loop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#conditional-loop-with-while"><span class="toc-text">conditional loop with while</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Looping-Through-a-Collection-with-for"><span class="toc-text">Looping Through a Collection with for</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-Primitive-Types"><span class="toc-text">5.Primitive Types</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-4"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Data-Types"><span class="toc-text">Data Types</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Scalar-Types"><span class="toc-text">Scalar Types</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Interger-Types"><span class="toc-text">Interger Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Floating-point-numbers"><span class="toc-text">Floating-point numbers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Character-Type"><span class="toc-text">The Character Type</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Compound-Types"><span class="toc-text">Compound Types</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tuple-type"><span class="toc-text">tuple type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#array-type"><span class="toc-text">array type</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Vectors"><span class="toc-text">6.Vectors</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-5"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Storing-Lists-of-Values-with-Vectors"><span class="toc-text">Storing Lists of Values with Vectors</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating"><span class="toc-text">Creating</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Updating"><span class="toc-text">Updating</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reading"><span class="toc-text">Reading</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Iterating"><span class="toc-text">Iterating</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MostCommonWays-Using-an-Enum-to-Store-Multiple-Types"><span class="toc-text">MostCommonWays: Using an Enum to Store Multiple Types</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-Move-Semantics"><span class="toc-text">7.Move Semantics</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-6"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ownership"><span class="toc-text">Ownership</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ownership-Rules"><span class="toc-text">Ownership Rules</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Variable-Scope"><span class="toc-text">Variable Scope</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-String-Type"><span class="toc-text">The String Type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Memory-and-Allocation"><span class="toc-text">Memory and Allocation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Variables-and-Data-Interacting-with-Move"><span class="toc-text">Variables and Data Interacting with Move</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Variables-and-Data-Interacting-with-Clone"><span class="toc-text">Variables and Data Interacting with Clone</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stack-Only-Data-Copy"><span class="toc-text">Stack-Only Data: Copy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ownership-and-Functions"><span class="toc-text">Ownership and Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Return-Values-and-Scope"><span class="toc-text">Return Values and Scope</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Reference-and-borrowing"><span class="toc-text">Reference and borrowing</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Mutable-References"><span class="toc-text">Mutable References</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dangling-References"><span class="toc-text">Dangling References</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-Structs"><span class="toc-text">8.Structs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-7"><span class="toc-text">Further information</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Structures"><span class="toc-text">Structures</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-the-Field-Init-Shorthand"><span class="toc-text">Using the Field Init Shorthand</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-Instances-from-other-Instances-with-Struct-Update-Syntax"><span class="toc-text">Creating Instances from other Instances with Struct Update Syntax</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tuple-Struct-without-named-fields-to-create-differenct-types"><span class="toc-text">Tuple Struct: without named fields to create differenct types</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unit-Struct"><span class="toc-text">Unit Struct</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Method-Syntax"><span class="toc-text">Method Syntax</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Defining-Methods"><span class="toc-text">Defining Methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Associated-Functions"><span class="toc-text">Associated Functions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-Enums"><span class="toc-text">9.Enums</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-8"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Enums-%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%BE%88%EF%BC%8C%E5%86%85%E9%83%A8enum-varient%E6%9C%89%E7%9D%80struct%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">Enums(å¼ºå¤§çš„å¾ˆï¼Œå†…éƒ¨enum varientæœ‰ç€structçš„åŠŸèƒ½)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Defining-an-Enum"><span class="toc-text">Defining an Enum</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Enum-Values"><span class="toc-text">Enum Values</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optin-Enum-Advantages-Over-Null-Values"><span class="toc-text">Optin Enum: Advantages Over Null Values</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Documents"><span class="toc-text">Documents</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#if-let"><span class="toc-text">if let</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#while-let"><span class="toc-text">while let</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#14-Error-handling"><span class="toc-text">14 Error handling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-9"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Recoverable-Errors-with-Result"><span class="toc-text">Recoverable Errors with Result</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Matching-on-Differences-Errors"><span class="toc-text">Matching on Differences Errors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shortcuts-for-Panic-on-Error-unwrap-and-expect"><span class="toc-text">Shortcuts for Panic on Error: unwrap and expect</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Propagating-Errors"><span class="toc-text">Propagating Errors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-shortcut-for-propogating-Errors-the-operator"><span class="toc-text">A shortcut for propogating Errors: the ? operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-The-Operator-Can-Be-Used"><span class="toc-text">Where The ? Operator Can Be Used</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#main%E5%87%BD%E6%95%B0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%BF%94%E5%9B%9EResult-lt-Box-lt-dyn-Error-gt-gt-%E7%B1%BB%E5%9E%8B"><span class="toc-text">mainå‡½æ•°ä¹Ÿå¯ä»¥è¿”å›Result&lt;(), Box&lt;dyn Error&gt;&gt;ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Example-for-Results"><span class="toc-text">Example for Results</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#map-for-Result"><span class="toc-text">map for Result</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#early-return"><span class="toc-text">early return</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Generic-Data-Types"><span class="toc-text">Generic Data Types</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#In-Function-Definition"><span class="toc-text">In Function Definition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#In-struct-enum-Definitions"><span class="toc-text">In struct&#x2F;enum Definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#In-method-Definitions"><span class="toc-text">In method Definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-of-Code-Using-Generics"><span class="toc-text">Performance of Code Using Generics</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#15-Generics"><span class="toc-text">15 Generics</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-10"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Generic-Data-Types-1"><span class="toc-text">Generic Data Types</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#In-Function-Definition-1"><span class="toc-text">In Function Definition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#In-struct-enum-Definitions-1"><span class="toc-text">In struct&#x2F;enum Definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#In-method-Definitions-1"><span class="toc-text">In method Definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-of-Code-Using-Generics-1"><span class="toc-text">Performance of Code Using Generics</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Bounds"><span class="toc-text">Bounds</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#16-Traits"><span class="toc-text">16 Traits</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-11"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Traits-Defining-Shared-Behavior"><span class="toc-text">Traits: Defining Shared Behavior</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Defining-a-Trait"><span class="toc-text">Defining a Trait</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Implementing-a-Trait-on-a-Type"><span class="toc-text">Implementing a Trait on a Type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Default-Implementation"><span class="toc-text">Default Implementation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Traits-as-Parameters"><span class="toc-text">Traits as Parameters</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Trait-Bound-Syntax"><span class="toc-text">Trait Bound Syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Specifying-Multiple-Trait-Bounds-with"><span class="toc-text">Specifying Multiple Trait Bounds with +</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Clearer-Trait-Bounds-with-where-clause"><span class="toc-text">Clearer Trait Bounds with where clause</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Returning-Types-that-implement-Traits"><span class="toc-text">Returning Types that implement Traits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Trait-Bounds-to-Conditionally-Implement-Methods"><span class="toc-text">Using Trait Bounds to Conditionally Implement Methods</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#17-Lifetimes"><span class="toc-text">17 Lifetimes</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-12"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Validating-References-with-Lifetimes"><span class="toc-text">Validating References with Lifetimes</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preventing-Dangling-References-with-Lifetimes"><span class="toc-text">Preventing Dangling References with Lifetimes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Borrow-checker"><span class="toc-text">Borrow checker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generic-Lifetimes-in-Functions"><span class="toc-text">Generic Lifetimes in Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lifetime-Annotation-Syntax"><span class="toc-text">Lifetime Annotation Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lifetime-Annotation-in-Function-Signatures"><span class="toc-text">Lifetime Annotation in Function Signatures</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Thinking-in-Terms-of-Lifetimes"><span class="toc-text">Thinking in Terms of Lifetimes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lifetime-Annotations-in-Struct-Definitions"><span class="toc-text">Lifetime Annotations in Struct Definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lifetime-Elision"><span class="toc-text">Lifetime Elision</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lifetime-Annotations-in-Method-Definitions"><span class="toc-text">Lifetime Annotations in Method Definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Static-Lifetime"><span class="toc-text">Static Lifetime</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generic-Type-Parameters-Trait-Bounds-and-Lifetimes-Together"><span class="toc-text">Generic Type Parameters, Trait Bounds, and Lifetimes Together</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#18-Tests"><span class="toc-text">18 Tests</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-13"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-Write-Tests"><span class="toc-text">How to Write Tests</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#assert"><span class="toc-text">assert!</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#assert-eq-assert-ne"><span class="toc-text">assert_eq!, assert_ne!</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#should-panic"><span class="toc-text">should_panic</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#19-Iterators"><span class="toc-text">19 Iterators</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-14"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Processing-a-Series-of-Items-with-Iterators"><span class="toc-text">Processing a Series of Items with Iterators</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Iterator-Trait-and-the-next-Method"><span class="toc-text">The Iterator Trait and the next Method</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Method-that-Consume-the-Iterator"><span class="toc-text">Method that Consume the Iterator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Methods-that-Produce-Other-Iterators"><span class="toc-text">Methods that Produce Other Iterators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Closures-that-Capture-Their-Environment"><span class="toc-text">Using Closures that Capture Their Environment</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#20-Smart-Pointers"><span class="toc-text">20 Smart Pointers</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-Information"><span class="toc-text">Further Information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Smart-Pointers"><span class="toc-text">Smart Pointers</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Box-to-Point-to-Data-on-the-Heap"><span class="toc-text">Using Box to Point to Data on the Heap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-a-Box-lt-T-gt-to-Store-Data-on-the-Heap"><span class="toc-text">Using a Box&lt;T&gt; to Store Data on the Heap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Enabling-Recursive-Types-with-Boxed"><span class="toc-text">Enabling Recursive Types with Boxed</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deref-Trait-Treating-Smart-Pointers-Like-Regular-References"><span class="toc-text">Deref Trait: Treating Smart Pointers Like Regular References</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Following-the-Pointer-to-the-Value"><span class="toc-text">Following the Pointer to the Value</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-Box-Like-a-Reference"><span class="toc-text">Using Box Like a Reference</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Treating-a-Type-Like-a-Reference-by-Implementing-the-Deref-Trait"><span class="toc-text">Treating a Type Like a Reference by Implementing the Deref Trait</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Implicit-Deref-Coercions-with-Functions-and-Methods"><span class="toc-text">Implicit Deref Coercions with Functions and Methods</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-Deref-Coercion-Interacts-with-Mutability"><span class="toc-text">How Deref Coercion Interacts with Mutability</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Drop-Trait-Running-Code-on-Cleanup-with-the-Drop-Trait"><span class="toc-text">Drop Trait: Running Code on Cleanup with the Drop Trait</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Dropping-a-Value-Early-with-std-mem-drop"><span class="toc-text">Dropping a Value Early with std::mem::drop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rc-the-Reference-Counted-Smart-Pointer"><span class="toc-text">Rc: the Reference Counted Smart Pointer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-Rc-to-Share-Data"><span class="toc-text">Using Rc to Share Data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cloning-an-Rc-Increases-the-Reference-Count"><span class="toc-text">Cloning an Rc Increases the Reference Count</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RefCell-and-the-Interior-Mutability-Pattern"><span class="toc-text">RefCell and the Interior Mutability Pattern</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Enforcing-Borrowing-Rules-at-Runtime-with-RefCell"><span class="toc-text">Enforcing Borrowing Rules at Runtime with RefCell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interior-Mutability-A-Mutable-Borrow-to-an-Immutable-Value"><span class="toc-text">Interior Mutability: A Mutable Borrow to an Immutable Value</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Keeping-Track-of-Borrows-at-Runtime-with-RefCell"><span class="toc-text">Keeping Track of Borrows at Runtime with RefCell</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Having-Multiple-Owners-of-Mutable-Data-by-Combining-Rc-and-RefCell"><span class="toc-text">Having Multiple Owners of Mutable Data by Combining Rc and RefCell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference-Cycles-Can-Leak-Memory"><span class="toc-text">Reference Cycles Can Leak Memory</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shared-Stated-Concurrency"><span class="toc-text">Shared-Stated Concurrency</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Mutexes-to-Allow-Access-to-Data-from-One-Thread-at-a-Time"><span class="toc-text">Using Mutexes to Allow Access to Data from One Thread at a Time</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-API-of-Mutex"><span class="toc-text">The API of Mutex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sharing-a-Mutex-Between-Multiple-Threads"><span class="toc-text">Sharing a Mutex Between Multiple Threads</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Multiple-Ownership-with-Multiple-Threads"><span class="toc-text">Multiple Ownership with Multiple Threads</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Atomic-Reference-Counting-with-Arc"><span class="toc-text">Atomic Reference Counting with Arc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Similarities-Between-RefCell-Rc-and-Mutex-Arc"><span class="toc-text">Similarities Between RefCell&#x2F;Rc and Mutex&#x2F;Arc</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Clone-On-Write"><span class="toc-text">Clone-On-Write</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#21-Threads"><span class="toc-text">21 Threads</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-15"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Using-Threads-to-Run-COde-simultaneously"><span class="toc-text">Using Threads to Run COde simultaneously</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#22-Macros"><span class="toc-text">22 Macros</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-16"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Macros"><span class="toc-text">Macros</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#23-Clippy"><span class="toc-text">23 Clippy</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-17"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#24-Type-conversions"><span class="toc-text">24 Type conversions</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-information-18"><span class="toc-text">Further information</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AsRef-AsMut-From-Into-TryFrom-Try-Into"><span class="toc-text">AsRef, AsMut, From, Into, TryFrom, Try Into</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#From"><span class="toc-text">From</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TryFrom"><span class="toc-text">TryFrom</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Trait-FromStr"><span class="toc-text">Trait: FromStr</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/p/2acafc61.html" title="rustlings"><img src="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rustlings"/></a><div class="content"><a class="title" href="/p/2acafc61.html" title="rustlings">rustlings</a><time datetime="2023-11-28T09:46:15.000Z" title="Created 2023-11-28 17:46:15">2023-11-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/d028ccc3.html" title="åŸºäºActix-Web(Rust)å’ŒVueçš„Webå¼€å‘è®°å½•"><img src="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven-yx7vmk.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="åŸºäºActix-Web(Rust)å’ŒVueçš„Webå¼€å‘è®°å½•"/></a><div class="content"><a class="title" href="/p/d028ccc3.html" title="åŸºäºActix-Web(Rust)å’ŒVueçš„Webå¼€å‘è®°å½•">åŸºäºActix-Web(Rust)å’ŒVueçš„Webå¼€å‘è®°å½•</a><time datetime="2023-11-13T13:42:48.000Z" title="Created 2023-11-13 21:42:48">2023-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/517dd8ea.html" title="Project#2: Extendible Hash Index"><img src="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Project#2: Extendible Hash Index"/></a><div class="content"><a class="title" href="/p/517dd8ea.html" title="Project#2: Extendible Hash Index">Project#2: Extendible Hash Index</a><time datetime="2023-10-30T13:56:01.000Z" title="Created 2023-10-30 21:56:01">2023-10-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/76b71367.html" title="Extendible Hash Table"><img src="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/drain.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Extendible Hash Table"/></a><div class="content"><a class="title" href="/p/76b71367.html" title="Extendible Hash Table">Extendible Hash Table</a><time datetime="2023-10-29T13:42:15.000Z" title="Created 2023-10-29 21:42:15">2023-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/1c228cd6.html" title="Project#1: Buffer Pool"><img src="https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Project#1: Buffer Pool"/></a><div class="content"><a class="title" href="/p/1c228cd6.html" title="Project#1: Buffer Pool">Project#1: Buffer Pool</a><time datetime="2023-10-03T05:01:58.000Z" title="Created 2023-10-03 13:01:58">2023-10-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://raw.githubusercontent.com/ZiHao256/ZiHao256.github.io/hexo/images/wallhaven6.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By zihao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://zihao256.github.io/">Blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional Chinese And Simplified Chinese">ç®€</button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '3b2ff3959cccdea73272',
      clientSecret: 'ff54cd4f8d455c066e787ca2dc1684a21094e488',
      repo: 'ZiHao256.github.io',
      owner: 'ZiHao256',
      admin: ['ZiHao256'],
      id: '09a800e9586fc6d6c0d81343b99e9aeb',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/ZiHao256/ZiHao256.github.io/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "Unable to get the data, please make sure the settings are correct."
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="6738460302" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>