<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="ZiHao's Blog" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="ZiHao&#39;s Blog">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="ZiHao&#39;s Blog">
<meta property="og:locale">
<meta property="article:author" content="Zihao Ma">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/page/2/"/>





  <title>ZiHao's Blog</title>
  








<meta name="generator" content="Hexo 5.4.0"><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://GitHub.com/ZiHao256" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZiHao's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
        <li> <a title="æŠŠè¿™ä¸ªé“¾æ¥æ‹–åˆ°ä½ çš„Chromeæ”¶è—å¤¹å·¥å…·æ ä¸­" href='javascript:(function() {
      function c() {
          var e = document.createElement("link");
          e.setAttribute("type", "text/css");
          e.setAttribute("rel", "stylesheet");
          e.setAttribute("href", f);
          e.setAttribute("class", l);
          document.body.appendChild(e)
      }
  
      function h() {
          var e = document.getElementsByClassName(l);
          for (var t = 0; t < e.length; t++) {
              document.body.removeChild(e[t])
          }
      }
  
      function p() {
          var e = document.createElement("div");
          e.setAttribute("class", a);
          document.body.appendChild(e);
          setTimeout(function() {
              document.body.removeChild(e)
          }, 100)
      }
  
      function d(e) {
          return {
              height : e.offsetHeight,
              width : e.offsetWidth
          }
      }
  
      function v(i) {
          var s = d(i);
          return s.height > e && s.height < n && s.width > t && s.width < r
      }
  
      function m(e) {
          var t = e;
          var n = 0;
          while (!!t) {
              n += t.offsetTop;
              t = t.offsetParent
          }
          return n
      }
  
      function g() {
          var e = document.documentElement;
          if (!!window.innerWidth) {
              return window.innerHeight
          } else if (e && !isNaN(e.clientHeight)) {
              return e.clientHeight
          }
          return 0
      }
  
      function y() {
          if (window.pageYOffset) {
              return window.pageYOffset
          }
          return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
      }
  
      function E(e) {
          var t = m(e);
          return t >= w && t <= b + w
      }
  
      function S() {
          var e = document.createElement("audio");
          e.setAttribute("class", l);
          e.src = i;
          e.loop = false;
          e.addEventListener("canplay", function() {
              setTimeout(function() {
                  x(k)
              }, 500);
              setTimeout(function() {
                  N();
                  p();
                  for (var e = 0; e < O.length; e++) {
                      T(O[e])
                  }
              }, 15500)
          }, true);
          e.addEventListener("ended", function() {
              N();
              h()
          }, true);
          e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
          document.body.appendChild(e);
          e.play()
      }
  
      function x(e) {
          e.className += " " + s + " " + o
      }
  
      function T(e) {
          e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
      }
  
      function N() {
          var e = document.getElementsByClassName(s);
          var t = new RegExp("\\b" + s + "\\b");
          for (var n = 0; n < e.length; ) {
              e[n].className = e[n].className.replace(t, "")
          }
      }
  
      var e = 30;
      var t = 30;
      var n = 350;
      var r = 350;
      var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
      var s = "mw-harlem_shake_me";
      var o = "im_first";
      var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
      var a = "mw-strobe_light";
      var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
      var l = "mw_added_css";
      var b = g();
      var w = y();
      var C = document.getElementsByTagName("*");
      var k = null;
      for (var L = 0; L < C.length; L++) {
          var A = C[L];
          if (v(A)) {
              if (E(A)) {
                  k = A;
                  break
              }
          }
      }
      if (A === null) {
          console.warn("Could not find a node of the right size. Please try a different page.");
          return
      }
      c();
      S();
      var O = [];
      for (var L = 0; L < C.length; L++) {
          var A = C[L];
          if (v(A)) {
              O.push(A)
          }
      }
  })()    '>Highä¸€ä¸‹</a> </li>
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heart"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="æœç´¢..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/05/1%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/05/05/1%20%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F/" itemprop="url">1 å˜é‡å’Œå¸¸é‡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-05-05T22:41:19+08:00">
                2021-05-05
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-06T14:21:53+08:00">
                2021-05-06
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Go-LearningNote/" itemprop="url" rel="index">
                    <span itemprop="name">-Go LearningNote</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  6
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id=""><a href="#" class="headerlink" title=""></a></h1><h2 id="1-å˜é‡å’Œå¸¸é‡"><a href="#1-å˜é‡å’Œå¸¸é‡" class="headerlink" title="1 å˜é‡å’Œå¸¸é‡"></a>1 å˜é‡å’Œå¸¸é‡</h2>
          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/05/Hexo%20%E5%8D%9A%E5%AE%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/05/05/Hexo%20%E5%8D%9A%E5%AE%A2/" itemprop="url">Hexo LearningNote</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-05-05T22:40:01+08:00">
                2021-05-05
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-05T22:39:44+08:00">
                2021-05-05
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index">
                    <span itemprop="name">-Blog</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  13
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hexo-åšå®¢"><a href="#Hexo-åšå®¢" class="headerlink" title="Hexo åšå®¢"></a>Hexo åšå®¢</h1><p><a target="_blank" rel="noopener" href="https://io-oi.me/tech/hexo-next-optimization/">æœ€å…¨è¯¦ç»†ï¼ˆğŸ—¡ï¼‰</a></p>
<p>[toc]</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/gdutxiaoxu/article/details/53576018?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161853970416780255223015%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=161853970416780255223015&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-53576018.first_rank_v2_pc_rank_v29&utm_term=Hexo+Github">å‚è€ƒåšå®¢</a></p>
<h1 id="ç¯å¢ƒæ­å»ºçš„å‡†å¤‡"><a href="#ç¯å¢ƒæ­å»ºçš„å‡†å¤‡" class="headerlink" title="ç¯å¢ƒæ­å»ºçš„å‡†å¤‡"></a>ç¯å¢ƒæ­å»ºçš„å‡†å¤‡</h1><ul>
<li><p><strong>Node.js çš„å®‰è£…å’Œå‡†å¤‡</strong></p>
<ul>
<li><img src="C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416102842874.png" alt="image-20210416102842874"></li>
</ul>
</li>
<li><p>å…³äº<code>Node.js</code>å’Œ<code>npm</code>çš„ä»‹ç»: <a target="_blank" rel="noopener" href="https://www.cnblogs.com/duanweishi/p/7729292.html">å‚è€ƒåšå®¢</a></p>
<ul>
<li><p>npm æ˜¯ javascript çš„<strong>åŒ…ç®¡ç†å·¥å…·</strong></p>
</li>
<li><p>npm ä¸ Node.js ä¸€èµ·å‘å¸ƒ</p>
<ul>
<li>npm æ›´æ–°é¢‘ç‡å¿«ï¼Œéœ€å•ç‹¬æ›´æ–°npm<code>npm install npm@latest -g</code></li>
</ul>
</li>
<li><p><strong>å®‰è£…åŒ…</strong>ï¼šå®‰è£…å¯¹åº”çš„åŒ…è‡³å½“å‰ç›®å½•ï¼Œå¹¶åˆ›å»º<code>node_modules</code>æ–‡ä»¶ï¼Œä¸‹è½½åŒ…è¿›å»</p>
<ul>
<li><code>npm install &lt;package_name</code></li>
</ul>
</li>
<li><p><strong><code>package.json</code>:</strong></p>
<ul>
<li>å¯ä»¥çŸ¥é“é¡¹ç›®ä¸­ç”¨äº†ä»€ä¹ˆåŒ…</li>
<li>åŸºæœ¬çš„<code>package.json</code>æ–‡ä»¶ï¼šè‡³å°‘åŒ…å«<ul>
<li>åŒ…å name</li>
<li>ç‰ˆæœ¬ä¿¡æ¯ version</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>åˆ›å»º <code>package.json</code></strong></p>
<ul>
<li><code>npm init</code> : åˆå§‹åŒ–<code>package.json</code>æ–‡ä»¶<ul>
<li>è¿è¡Œåï¼Œå¦‚å®å›ç­”åŸºæœ¬ä¿¡æ¯</li>
</ul>
</li>
<li>ä¸»è¦å­—æ®µå«ä¹‰ï¼š<ul>
<li>name : æ¨¡å—åï¼Œ</li>
<li>version: æ¨¡å—ç‰ˆæœ¬ä¿¡æ¯</li>
<li>description:å…³äºæ¨¡å—åŠŸèƒ½ç®€å•æè¿°ï¼Œè‹¥ä¸ºç©ºï¼Œé»˜è®¤è‘±å½“å‰ç›®å½•çš„<code>README.md</code>æˆ–è€…<code>README</code>è¯»å–ç¬¬ä¸€è¡Œä½œä¸ºé»˜è®¤å€¼</li>
<li>main : æ¨¡å—è¢«å¼•å…¥åï¼Œé¦–å…ˆåŠ è½½çš„æ–‡ä»¶ï¼Œé»˜è®¤ä¸º<code>index.js</code></li>
<li>scripts : å®šä¹‰ä¸€äº›å¸¸ç”¨å‘½ä»¤å…¥å£</li>
</ul>
</li>
<li>npm å¯ä»¥è¿›è¡Œç®€å•é…ç½®å¸¸ç”¨ä¿¡æ¯<ul>
<li><code>npm set init.author.email &quot;2638779206@qq.com&quot;</code></li>
<li><code>npm set init.author.name &quot;zihao&quot;</code> </li>
<li><code>npm set init.license &quot;XDU&quot;</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>å®‰è£…æ¨¡å—</strong></p>
<ul>
<li><code>npm install</code> ä¼šè¯»å–<code>package.json</code>ä»¥å®‰è£…æ¨¡å—<ul>
<li>å®‰è£…çš„æ¨¡å—åˆ†ä¸ºä¸¤ç±»: ç”Ÿäº§ç¯å¢ƒéœ€è¦çš„å®‰è£…åŒ…<code>dependencies</code>.ï¼Œ å¼€å‘ç¯å¢ƒéœ€è¦çš„å®‰è£…åŒ…<code>devDependencies</code></li>
</ul>
</li>
<li>åœ¨å®‰è£…æ¨¡å—æ—¶ï¼Œä¿®æ”¹<code>package.json</code><ul>
<li><code>npm install &lt;packagename&gt; --save</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>é…ç½®npmæºï¼š</strong></p>
<ul>
<li><p>é…ç½®å›½å†…é•œåƒåŠ å¿«ä¸‹è½½é€Ÿåº¦</p>
</li>
<li><p>ä¸´æ—¶ä½¿ç”¨ </p>
<ul>
<li>é€šè¿‡<code>--registry</code>: <code>npm install express --registry https://registry.npm.taobao.org</code></li>
</ul>
</li>
<li><p>å…¨å±€ä½¿ç”¨ï¼š</p>
<ul>
<li>```bash<br>config set registry <a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a><br>  // é…ç½®åå¯é€šè¿‡ä¸‹é¢æ–¹å¼æ¥éªŒè¯æ˜¯å¦æˆåŠŸ<br>  npm config get registry<br>  // æˆ–<br>  npm info express<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* **git çš„å®‰è£…å’Œå‡†å¤‡**</span><br><span class="line">  * ![image-20210416102902488](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416102902488.png)</span><br><span class="line">* **Githubè´¦æˆ·çš„é…ç½®**</span><br><span class="line">  * ä½¿ç”¨äº†ä½›è·³å¢™VPNï¼Œè§£å†³äº†åŠ è½½Githubæ…¢çš„é—®é¢˜</span><br><span class="line">  * æ³¨å†Œ</span><br><span class="line">  * åˆ›å»ºä»£ç åº“</span><br><span class="line">  * ä»£ç åº“è®¾ç½®</span><br><span class="line">    * &#96;Setting&#96;</span><br><span class="line">    * &#96;Pages&#96;</span><br><span class="line">    * &#96;Automatic page generator&#96;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å®‰è£… Hexo</span><br><span class="line"></span><br><span class="line">* åˆ›å»º&#96;Hexo&#96; ç›®å½•</span><br><span class="line">* &#96;gitbash&#96; è¯¥ç›®å½•ï¼š</span><br><span class="line">  * &#96;npm install hexo-cli -g&#96; ï¼š </span><br><span class="line">    * hexo æœ¬èº«æ˜¯ä¸€ä¸ªé™æ€åšå®¢ç”Ÿæˆå·¥å…·ï¼Œå…·å¤‡ç¼–è¯‘markdownã€å‡­å€Ÿä¸»é¢˜æ¨¡æ¿ã€ç”ŸæˆHTMLã€ä¸Šä¼ Gtiç­‰åŸºæœ¬åŠŸèƒ½ï¼Œ&#96;hexo-cli&#96;å°†è¿™äº›åŠŸèƒ½å°è£…ä¸ºå‘½ä»¤ï¼Œæä¾›ç»™ç”¨æˆ·é€šè¿‡&#96;hexo s&#96;ç­‰å‘½ä»¤è°ƒç”¨çš„æ¨¡å—</span><br><span class="line">    * problem:![image-20210416110241054](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110241054.png)</span><br><span class="line">    * solution ï¼š[åšå®¢](https:&#x2F;&#x2F;blog.csdn.net&#x2F;m0_46256147&#x2F;article&#x2F;details&#x2F;104725439)</span><br><span class="line">  * &#96;npm install hexo --save&#96;</span><br><span class="line">    * problem :![image-20210416110617131](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110617131.png)</span><br><span class="line">    * solution [å‚è€ƒåšå®¢](![image-20210416110631231](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110631231.png))</span><br><span class="line">    * problem ![image-20210416110804200](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110804200.png)</span><br><span class="line">    * solution [å‚è€ƒ](https:&#x2F;&#x2F;blog.csdn.net&#x2F;JZevin&#x2F;article&#x2F;details&#x2F;107865683)</span><br><span class="line">    * problem ![image-20210416113337859](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416113337859.png)</span><br><span class="line">    * solution : [å‚è€ƒ](https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_42677762&#x2F;article&#x2F;details&#x2F;112554832?utm_medium&#x3D;distribute.pc_relevant.none-task-blog-baidujs_title-0&amp;spm&#x3D;1001.2101.3001.4242)</span><br><span class="line">  * &#96;hexo -v&#96; æ£€æŸ¥æ˜¯å¦å®‰è£…å¥½</span><br><span class="line">    * ![image-20210416113525387](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416113525387.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ç›¸å…³é…ç½®</span><br><span class="line"></span><br><span class="line">è¿›è¡Œæœ¬åœ°çš„é…ç½®</span><br><span class="line"></span><br><span class="line">* **åˆå§‹åŒ– Hexo**</span><br><span class="line"></span><br><span class="line">  * &#96;hexo init&#96;</span><br><span class="line"></span><br><span class="line">    * problem : ![image-20210416113819617](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416113819617.png)</span><br><span class="line"></span><br><span class="line">      * è¯¥åšå®¢è¯´æ¥ç€ä¸Šé¢çš„æ“ä½œï¼Œä½†æ˜¯ä¸Šé¢çš„æ“ä½œåˆ›å»ºäº†jsonæ–‡ä»¶ç­‰ï¼Œä¸æ˜¯ç©ºçš„ï¼Œæ˜¯å¦å¯ä»¥ç›´æ¥åœ¨è¯¥ç›®å½•ä¸‹åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Ÿ</span><br><span class="line"></span><br><span class="line">    * problem : åˆ›å»ºæ–°æ–‡ä»¶å¤¹åï¼š&#96;hexo init&#96;</span><br><span class="line"></span><br><span class="line">      * ![image-20210416114034172](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416114034172.png)</span><br><span class="line"></span><br><span class="line">        &#96;fatal: unable to access &#39;https:&#x2F;&#x2F;github.com&#x2F;hexojs&#x2F;hexo-starter.git&#x2F;&#39;: Failed to connect to github.com port 443: Timed out&#96;</span><br><span class="line"></span><br><span class="line">      * solution : [å‚è€ƒåšå®¢](https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_44041700&#x2F;article&#x2F;details&#x2F;115599817)</span><br><span class="line"></span><br><span class="line">        * æœçœŸæ˜¯ç½‘ç»œçš„é—®é¢˜ï¼Œå†æŸ¥æŸ¥çœ‹å®Œæ­¤åšå®¢åï¼Œå†æ¬¡è¾“å…¥&#96;hexo init&#96; </span><br><span class="line">        * ![image-20210416115639944](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416115639944.png)</span><br><span class="line"></span><br><span class="line">      * ä½†æ˜¯å¾ˆæ…¢</span><br><span class="line"></span><br><span class="line">        * å¯ä»¥åˆ‡æ¢npmæºè‡³æ·˜å®æºåŠ é€Ÿï¼š</span><br><span class="line">          * &#96;npm install express --registry https:&#x2F;&#x2F;registry.npm.taobao.org&#96;</span><br><span class="line">        * åŠåˆ†é’Ÿå°±å¥½ï¼š</span><br><span class="line">          * ![image-20210416121021641](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416121021641.png)</span><br><span class="line"></span><br><span class="line">  * &#96;npm install&#96;è‡ªåŠ¨å®‰è£…ç»„ä»¶</span><br><span class="line"></span><br><span class="line">    * æ— æŠ¥é”™</span><br><span class="line"></span><br><span class="line">* **é¦–æ¬¡ä½“éªŒhexo**</span><br><span class="line"></span><br><span class="line">  * &#96;hexo g&#96;ï¼šgenerate ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶è‡³ public æ–‡ä»¶å¤¹</span><br><span class="line">    * ä¾¿äºæŸ¥çœ‹ç½‘ç«™ç”Ÿæˆçš„é™æ€æ–‡ä»¶æˆ–è€…æ‰‹åŠ¨éƒ¨ç½²ç½‘ç«™</span><br><span class="line">  * &#96;hexo s&#96;ï¼šserver å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œç”¨äºé¢„è§ˆä¸»é¢˜</span><br><span class="line">    * é»˜è®¤åœ°å€ : http:&#x2F;&#x2F;localhost:4000&#x2F;</span><br><span class="line">    * é¢„è§ˆçš„åŒæ—¶å¯ä»¥ä¿®æ”¹æ–‡ç« å†…å®¹æˆ–ä¸»é¢˜ä»£ç ï¼Œä¿å­˜ååˆ·æ–°é¡µé¢å³å¯</span><br><span class="line">    * å¯¹ Hexo æ ¹ç›®å½• &#96;_config.yml&#96; çš„ä¿®æ”¹ï¼Œéœ€è¦é‡å¯æœ¬åœ°æœåŠ¡å™¨åæ‰èƒ½é¢„è§ˆæ•ˆæœ</span><br><span class="line">  * &#96;hexo new&quot;å­¦ä¹ ç¬”è®° ä¸€&quot; &#96;</span><br><span class="line">    * æ–°å»ºæ ‡é¢˜ä¸ºçš„æ–‡ç« </span><br><span class="line">    * æ–‡ç« æ ‡é¢˜å¯åœ¨å¯¹åº”çš„mdæ–‡ä»¶æ”¹</span><br><span class="line">  * &#96;hexo d &#96;deploy</span><br><span class="line">    * è‡ªåŠ¨ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶ï¼Œå¹¶éƒ¨ç½²åˆ°è®¾å®šçš„ä»“åº“</span><br><span class="line">  * &#96;hexo clean&#96;</span><br><span class="line">    * æ¸…é™¤ç¼“å­˜æ–‡ä»¶ &#96;db.json&#96; å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶&#96;public&#96;</span><br><span class="line"></span><br><span class="line"># å°† hexo ä¸ github page è”ç³»èµ·æ¥</span><br><span class="line"></span><br><span class="line">* **é…ç½® git ä¸ªäººä¿¡æ¯**</span><br><span class="line"></span><br><span class="line">  * è®¾ç½® GIT çš„ user name å’Œ email</span><br><span class="line"></span><br><span class="line">    * &#96;&#96;&#96;bash</span><br><span class="line">      git config --global user.name &quot;ZiHao256&quot;</span><br><span class="line">      git config --global user.email &quot;2638779206@qq.com&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>ç”Ÿæˆå¯†é’¥</p>
<ul>
<li>```bash<br> ssh-keygen -t rsa -C â€œ<a href="mailto:&#50;&#54;&#x33;&#56;&#x37;&#x37;&#57;&#x32;&#48;&#54;&#64;&#113;&#x71;&#x2e;&#x63;&#111;&#109;">&#50;&#54;&#x33;&#56;&#x37;&#x37;&#57;&#x32;&#48;&#54;&#64;&#113;&#x71;&#x2e;&#x63;&#111;&#109;</a>â€œ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">* **é…ç½® Deployment**</span><br><span class="line"></span><br><span class="line">  * åœ¨&#96;_config.yml&#96;æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°Deploymentï¼š</span><br><span class="line"></span><br><span class="line">    * &#96;&#96;&#96;bash</span><br><span class="line">      deploy:</span><br><span class="line">        type: git</span><br><span class="line">        repo: git@github.com:ZiHao256&#x2F;ZiHao256.github.io.git</span><br><span class="line">        branch: master</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="å†™åšå®¢ã€å‘å¸ƒæ–‡ç« "><a href="#å†™åšå®¢ã€å‘å¸ƒæ–‡ç« " class="headerlink" title="å†™åšå®¢ã€å‘å¸ƒæ–‡ç« "></a>å†™åšå®¢ã€å‘å¸ƒæ–‡ç« </h1><ul>
<li><p>æ–°å»ºä¸€ç¯‡åšå®¢</p>
<ul>
<li><code>hexo new post &quot;title&quot;</code></li>
<li>å¯åœ¨<code>source\_posts</code> ä¸­çœ‹åˆ°<code>title.md</code>æ–‡ä»¶</li>
</ul>
</li>
<li><p>æ–°å»ºå¥½åï¼Œä¿®æ”¹mdæ–‡ä»¶</p>
</li>
<li><p>è¿è¡Œç”Ÿæˆã€éƒ¨ç½²æ–‡ç« ï¼š</p>
<ul>
<li><p>ç”Ÿæˆï¼š<code>hexo g</code></p>
</li>
<li><p>éƒ¨ç½²ï¼š<code>hexo d</code></p>
<ul>
<li><p>problem 1 : </p>
<p>![image-20210416124223198](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416124223198.png)</p>
</li>
<li><p>solution : æœªå®‰è£…<code>hexo-deployer-git</code>æ’ä»¶ï¼Œåœ¨<strong>ç«™ç‚¹ç›®å½•</strong>(hexo init ç›®å½•)è¾“å…¥<code>npm install hexo-deployer-git --save</code></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_21808961/article/details/84476504">å‚è€ƒåšå®¢</a></p>
</li>
<li><p>problem 2:</p>
<p>![image-20210416125451770](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416125451770.png) solution:    <code>Please make sure you have the correct access rights and the repository exist</code>: ç¡®ä¿æ‚¨å…·æœ‰æ­£ç¡®çš„è®¿é—®æƒé™å¹¶ä¸”å­˜å‚¨åº“å­˜åœ¨</p>
<p>åŸå› ï¼šå…¬é’¥å‡ºç°é—®é¢˜</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43705131/article/details/107965888">å‚è€ƒåšå®¢</a></p>
<ol>
<li>åˆ é™¤.sshæ–‡ä»¶</li>
<li>é‡æ–°è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±</li>
<li>é‡æ–°ç”Ÿæˆsshå…¬é’¥</li>
<li>é…ç½®github</li>
</ol>
</li>
</ul>
</li>
<li><p>æˆ–ç›´æ¥åœ¨éƒ¨ç½²å‰ç”Ÿæˆï¼š</p>
<ul>
<li><code>hexo d -g #åœ¨éƒ¨ç½²å‰å…ˆç”Ÿæˆ</code></li>
</ul>
</li>
</ul>
</li>
<li><p>éƒ¨ç½²æˆåŠŸåï¼Œåœ¨<code>https://ZiHao256.github.io</code>çœ‹åˆ°ç”Ÿæˆçš„æ–‡ç« </p>
</li>
</ul>
<h1 id="ä¸»é¢˜æ¨è"><a href="#ä¸»é¢˜æ¨è" class="headerlink" title="ä¸»é¢˜æ¨è"></a>ä¸»é¢˜æ¨è</h1><ul>
<li>ä¸»é¢˜é…ç½®æ–‡ä»¶åœ¨<code>_config.yml</code></li>
</ul>
<h2 id="NexTä¸»é¢˜é…ç½®"><a href="#NexTä¸»é¢˜é…ç½®" class="headerlink" title="NexTä¸»é¢˜é…ç½®"></a>NexTä¸»é¢˜é…ç½®</h2><ul>
<li>ç®€æ´ç¾è§‚</li>
<li>æ”¯æŒä¸åŒé£æ ¼</li>
<li>æä¾›å®Œå–„é…ç½®è¯´æ˜</li>
<li>Hexo ä¸¤ä»½ä¸»è¦é…ç½®æ–‡ä»¶ï¼šåç§°éƒ½æ˜¯<code>_config.yml</code><ul>
<li><strong>ç«™ç‚¹é…ç½®æ–‡ä»¶</strong>ç«™ç‚¹æ ¹ç›®å½•ä¸‹ ï¼šHexo æœ¬èº«çš„é…ç½®</li>
<li><strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong>ä¸»é¢˜ç›®å½•ä¸‹ ï¼šç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³é€‰é¡¹</li>
</ul>
</li>
</ul>
<h3 id="1-å®‰è£…NexT"><a href="#1-å®‰è£…NexT" class="headerlink" title="1 å®‰è£…NexT"></a>1 å®‰è£…NexT</h3><ul>
<li>åªéœ€è¦å°†ä¸»é¢˜æ–‡ä»¶æ‹·è´è‡³ <code>themes</code> ç›®å½•ä¸‹ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶</li>
<li>è‹¥ç†Ÿæ‚‰ git ï¼Œå»ºè®®ä½¿ç”¨ å…‹éš†æœ€æ–°ç‰ˆæœ¬çš„æ–¹å¼ï¼Œä¹‹åæ›´æ–°å¯ä»¥ä½¿ç”¨ <code>git pull</code> å¿«é€Ÿæ›´æ–°</li>
<li>å®šä½è‡³Hexo ç«™ç‚¹ç›®å½• <code>cd è‡³ç«™ç‚¹ç›®å½•æ–‡ä»¶</code></li>
<li>ä½¿ç”¨git checkout <code>git clone https://github.com/iissnan/hexo-theme-next themes/next</code><ul>
<li><strong>problem</strong> : git clone å¾ˆæ…¢</li>
<li><strong>solution</strong>  : ä½¿ç”¨å›½å†…é•œåƒç½‘ç«™:<code>github.com.cnpnjs.org</code><ul>
<li>å°†å‘½ä»¤ä¸­çš„<code>github.com</code>æ¢æˆè¿™ä¸ª</li>
<li>æ•ˆæœæ‹”ç¾¤</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-å¯ç”¨ä¸»é¢˜"><a href="#2-å¯ç”¨ä¸»é¢˜" class="headerlink" title="2 å¯ç”¨ä¸»é¢˜"></a>2 å¯ç”¨ä¸»é¢˜</h3><ul>
<li>å½“ å…‹éš†/ä¸‹è½½ è‡³<code>themes</code>ä¸‹åï¼Œæ‰“å¼€ <strong>ç«™ç‚¹é…ç½®æ–‡ä»¶</strong>ï¼Œæ‰¾åˆ° <strong>theme</strong> å­—æ®µï¼Œå°†å…¶å€¼æ”¹ä¸º<strong>ä¸»é¢˜å</strong></li>
<li>éªŒè¯æ˜¯å¦å¯ç”¨æˆåŠŸä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨<code>hexo clean</code>æ¸…é™¤ç¼“å­˜</li>
</ul>
<h3 id="3-éªŒè¯ä¸»é¢˜"><a href="#3-éªŒè¯ä¸»é¢˜" class="headerlink" title="3 éªŒè¯ä¸»é¢˜"></a>3 éªŒè¯ä¸»é¢˜</h3><ul>
<li>é¦–å…ˆï¼Œ<code>hexo g</code>ç”Ÿæˆé™æ€æ–‡ä»¶</li>
<li>å…¶æ¬¡ï¼Œå¯åŠ¨ Hexo æœ¬åœ°ç«™ç‚¹ï¼Œå¹¶å¼€å¯è°ƒè¯•æ¨¡å¼(<code>--debug</code>)<ul>
<li><code>hexo s --debug</code>, è‹¥æœ‰å¼‚å¸¸å¯ä»å‘½ä»¤è¡Œè¾“å‡ºï¼Œå¸®åŠ©debug</li>
</ul>
</li>
<li>ç„¶åï¼Œ<code>https://localhost:4000</code>ï¼Œæ£€æŸ¥æ˜¯å¦è¿è¡Œæ­£å¸¸</li>
<li><strong>problem:</strong> ![image-20210416144717418](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416144717418.png)<ul>
<li><strong>solution</strong> : ![image-20210416145430740](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416145430740.png)</li>
<li><ol>
<li>æ‰‹åŠ¨é…ç½®ï¼šæ–‡ä»¶åå’Œé…ç½®æ–‡ä»¶éƒ½æ— é—®é¢˜</li>
<li>æ›´æ–°ä¸»é¢˜æ–‡ä»¶ï¼š</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="4-ä¸»é¢˜è®¾å®š"><a href="#4-ä¸»é¢˜è®¾å®š" class="headerlink" title="4 ä¸»é¢˜è®¾å®š"></a>4 ä¸»é¢˜è®¾å®š</h3><ul>
<li>scheme : NexT æä¾›çš„ä¸€ç§ç‰¹æ€§ï¼Œå¯æä¾›å¤šç§å¤–è§‚<ul>
<li>Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½ </li>
<li>Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚ </li>
<li>Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–°</li>
</ul>
</li>
</ul>
<h3 id="5-è®¾ç½®è¯­è¨€"><a href="#5-è®¾ç½®è¯­è¨€" class="headerlink" title="5 è®¾ç½®è¯­è¨€"></a>5 è®¾ç½®è¯­è¨€</h3><ul>
<li>ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œå°†<code>language</code>å­—æ®µè®¾ç½®æˆéœ€è¦çš„è¯­è¨€ï¼š<ul>
<li><code>language: zh-Hans</code></li>
</ul>
</li>
</ul>
<h3 id="6-è®¾ç½®èœå•"><a href="#6-è®¾ç½®èœå•" class="headerlink" title="6 è®¾ç½®èœå•"></a>6 è®¾ç½®èœå•</h3><ul>
<li><p><strong>èœå•é…ç½®</strong>ä¸‰ä¸ªéƒ¨åˆ†ï¼š<strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong> ä¸­ å¯¹åº”çš„å­—æ®µ<code>menu</code></p>
<ul>
<li><strong>èœå•é¡¹ï¼š</strong>åç§°å’Œé“¾æ¥<ul>
<li><code>item name:link</code><ul>
<li>item name æ˜¯ä¸€ä¸ªåç§°ï¼Œä¸ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ï¼Œè€Œæ˜¯ç”¨äºåŒ¹é…å›¾æ ‡å’Œç¿»è¯‘</li>
</ul>
</li>
</ul>
</li>
<li><strong>èœå•é¡¹çš„æ˜¾ç¤ºæ–‡æœ¬</strong></li>
<li><strong>èœå•é¡¹å¯¹åº”çš„å›¾æ ‡</strong><ul>
<li>NexT ä½¿ç”¨ <code>Font Awesome</code>æä¾›çš„å›¾æ ‡</li>
</ul>
</li>
</ul>
</li>
<li><p>ç¤ºä¾‹ï¼šè‹¥ç«™ç‚¹åœ¨å­ç›®å½•ä¸­ï¼Œå»æ‰è¿æ¥å‰çš„ <code>/</code></p>
<ul>
<li>```<br>menu:<br>  home: /<br>  archives: /archives<br>  #about: /about<br>  #categories: /categories<br>  tags: /tags<br>  #commonweal: /404.html<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **NexT é»˜è®¤çš„èœå•é¡¹ï¼š**</span><br><span class="line"></span><br><span class="line">  * *é”®å€¼*ï¼š**home**</span><br><span class="line">    * *è®¾å®šå€¼*ï¼šhome:&#x2F;</span><br><span class="line">    * *æ˜¾ç¤ºæ–‡æœ¬*ï¼šä¸»é¡µ</span><br><span class="line">  * **archives**</span><br><span class="line">    * archives:&#x2F;archives</span><br><span class="line">    * å½’æ¡£é¡µ</span><br><span class="line">  * **categories**</span><br><span class="line">    * categories:&#x2F;categories</span><br><span class="line">    * åˆ†ç±»é¡µ</span><br><span class="line">  * **tags**</span><br><span class="line">    * tags:&#x2F;tags</span><br><span class="line">    * æ ‡ç­¾é¡µ</span><br><span class="line">  * **about**</span><br><span class="line">    * about:&#x2F;about</span><br><span class="line">    * å…³äºé¡µ</span><br><span class="line">  * **commonweal**</span><br><span class="line">    * commonweal:&#x2F;404.html</span><br><span class="line">    * å…¬ç›Š 404</span><br><span class="line"></span><br><span class="line">* è®¾ç½®èœå•é¡¹çš„**æ˜¾ç¤ºæ–‡æœ¬ï¼š**</span><br><span class="line"></span><br><span class="line">  * Hexo ç”Ÿæˆçš„æ—¶å€™ï¼Œä½¿ç”¨**èœå•é¡¹çš„åç§°**æŸ¥æ‰¾å¯¹åº”çš„è¯­è¨€ç¿»è¯‘ï¼Œå¹¶ä¸”æå–æ˜¾ç¤ºæ–‡æœ¬</span><br><span class="line">  * æ˜¾ç¤ºæ–‡æœ¬åœ¨NexT ä¸»é¢˜ç›®å½•ä¸‹çš„&#96;language&#x2F;&#123;language&#125;.yml&#96;</span><br><span class="line"></span><br><span class="line">* è®¾ç½®èœå•é¡¹çš„**å›¾æ ‡**ï¼Œå¯¹åº”çš„å­—æ®µ&#96;menu_icons&#96;</span><br><span class="line"></span><br><span class="line">  * è®¾å®šæ ¼å¼&#96;item name:icon name&#96;</span><br><span class="line"></span><br><span class="line">    * icon nameæ˜¯Font Awesome å›¾è¡¨çš„åå­—</span><br><span class="line">    * enable å¯ç”¨äºæ˜¯å¦æ˜¾ç¤ºå›¾æ ‡</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">    * &#96;&#96;&#96;</span><br><span class="line">      menu_icons:</span><br><span class="line">        enable: true</span><br><span class="line">        # Icon Mapping.</span><br><span class="line">        home: home</span><br><span class="line">        about: user</span><br><span class="line">        categories: th</span><br><span class="line">        tags: tags</span><br><span class="line">        archives: archive</span><br><span class="line">        commonweal: heartbeat</span><br><span class="line">      </span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="7-ä¾§æ "><a href="#7-ä¾§æ " class="headerlink" title="7 ä¾§æ "></a>7 ä¾§æ </h3><ul>
<li><p><strong>é»˜è®¤æƒ…å†µ</strong>ï¼šä¾§æ ä»…åœ¨æ–‡ç« é¡µé¢ï¼ˆæ‹¥æœ‰ç›®å½•åˆ—è¡¨æ—¶ï¼‰æ‰æ˜¾ç¤ºï¼Œæ”¾äºå³ä¾§</p>
</li>
<li><p>å¯é€šè¿‡æ§åˆ¶ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>sidebar</code>å­—æ®µæ§åˆ¶ä¾§æ </p>
<ul>
<li><p><strong>ä¾§æ çš„ä½ç½®</strong>ï¼Œ<code>sidebar.position</code>, ç›®å‰ä»…Pisces Schemeæ”¯æŒ</p>
<ul>
<li>left</li>
<li>right</li>
</ul>
</li>
<li><p><strong>ä¾§æ æ˜¾ç¤ºçš„æ—¶æœº</strong>ï¼Œ<code>sidebar.display</code></p>
<ul>
<li><p><strong>post :</strong> é»˜è®¤è¡Œä¸ºï¼Œåœ¨æ–‡ç« é¡µé¢ï¼ˆæ‹¥æœ‰ç›®å½•åˆ—è¡¨ï¼‰æ—¶æ˜¾ç¤º</p>
</li>
<li><p><strong>always:</strong> åœ¨æ‰€æœ‰é¡µé¢ä¸­éƒ½æ˜¾ç¤º</p>
</li>
<li><p><strong>remove:</strong> å®Œå…¨ç§»é™¤</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="8-å¤´åƒ"><a href="#8-å¤´åƒ" class="headerlink" title="8 å¤´åƒ"></a>8 å¤´åƒ</h3><ul>
<li>ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ æ–°å¢<code>avatar</code>å­—æ®µï¼Œå°†å…¶å€¼è®¾ç½®ä¸ºå¤´åƒçš„é“¾æ¥åœ°å€ï¼š<ul>
<li>å®Œæ•´çš„äº’è”ç½‘URLï¼š</li>
<li>ç«™ç‚¹å†…çš„åœ°å€ï¼š<code>å°†å¤´åƒæ”¾ç½®ä¸»é¢˜ç›®å½•ä¸‹çš„ source/uploads/ ï¼ˆæ–°å»ºuploadsç›®å½•è‹¥ä¸å­˜åœ¨ï¼‰ é…ç½®ä¸ºï¼šavatar: /uploads/avatar.png æˆ–è€… æ”¾ç½®åœ¨ source/images/ ç›®å½•ä¸‹ , é…ç½®ä¸ºï¼šavatar: /images/avatar.png</code></li>
</ul>
</li>
</ul>
<h1 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h1><h2 id="ç”Ÿæˆ-åˆ†ç±»-é¡µå¹¶æ·»åŠ -type-å±æ€§"><a href="#ç”Ÿæˆ-åˆ†ç±»-é¡µå¹¶æ·»åŠ -type-å±æ€§" class="headerlink" title="ç”Ÿæˆ åˆ†ç±» é¡µå¹¶æ·»åŠ  type å±æ€§"></a>ç”Ÿæˆ åˆ†ç±» é¡µå¹¶æ·»åŠ  type å±æ€§</h2><ul>
<li><code>hexo new page categories</code>: ç”Ÿæˆåˆ†ç±»é¡µ</li>
<li>æ‰¾åˆ°<code>source/categories/index.md</code><ul>
<li>æ·»åŠ <code>type: &quot;xxx&quot;</code></li>
</ul>
</li>
</ul>
<h2 id="ç»™æ–‡ç« æ·»åŠ -categories-å±æ€§"><a href="#ç»™æ–‡ç« æ·»åŠ -categories-å±æ€§" class="headerlink" title="ç»™æ–‡ç« æ·»åŠ  categories å±æ€§"></a>ç»™æ–‡ç« æ·»åŠ  categories å±æ€§</h2><ul>
<li>æ‰“å¼€æ–‡ç« ï¼Œå†™å…¥<code>categories : -xxx</code></li>
<li>hexo ä¸ä¼šäº§ç”Ÿä¸¤ä¸ªåˆ†ç±»ï¼Œ<strong>è€Œæ˜¯æŠŠåˆ†ç±»åµŒå¥—</strong></li>
</ul>
<h1 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h1><p>ä¸åˆ†ç±»ç±»ä¼¼</p>
<h1 id="ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–"><a href="#ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–" class="headerlink" title="ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–"></a>ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–</h1><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/efbeddc5eb19">å‚è€ƒåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/60424755">å‚è€ƒåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://itrhx.blog.csdn.net/article/details/85420403?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control">cankao</a></p>
<h2 id="ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡"><a href="#ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡" class="headerlink" title="ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡"></a>ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡</h2><h2 id="è®©ç™¾åº¦æ”¶å½•-blog"><a href="#è®©ç™¾åº¦æ”¶å½•-blog" class="headerlink" title="è®©ç™¾åº¦æ”¶å½• blog"></a>è®©ç™¾åº¦æ”¶å½• blog</h2><h2 id="åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»"><a href="#åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»" class="headerlink" title="åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»"></a>åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»</h2><p>åšå®¢1ï¼š</p>
<h3 id="3-1-æ·»åŠ å¤´åƒ"><a href="#3-1-æ·»åŠ å¤´åƒ" class="headerlink" title="3.1 æ·»åŠ å¤´åƒ"></a>3.1 æ·»åŠ å¤´åƒ</h3><h3 id="3-2-è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢"><a href="#3-2-è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢" class="headerlink" title="3.2 è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢"></a>3.2 è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢</h3><h3 id="3-3-ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬"><a href="#3-3-ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬" class="headerlink" title="3.3 ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬"></a>3.3 ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬</h3><h2 id="4-æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦"><a href="#4-æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦" class="headerlink" title="4 æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦"></a>4 æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦</h2><h2 id="5-ä¾§è¾¹æ è®¾ç½®"><a href="#5-ä¾§è¾¹æ è®¾ç½®" class="headerlink" title="5 ä¾§è¾¹æ è®¾ç½®"></a>5 ä¾§è¾¹æ è®¾ç½®</h2><h3 id="5-1-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"><a href="#5-1-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥" class="headerlink" title="5.1 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"></a>5.1 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥</h3><h3 id="5-2-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡"><a href="#5-2-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡" class="headerlink" title="5.2 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡"></a>5.2 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡</h3><h3 id="5-3-RSS"><a href="#5-3-RSS" class="headerlink" title="5.3 RSS"></a>5.3 RSS</h3><p>é…ç½®</p>
<h3 id="5-4-å‹æƒ…é“¾æ¥"><a href="#5-4-å‹æƒ…é“¾æ¥" class="headerlink" title="5.4 å‹æƒ…é“¾æ¥"></a>5.4 å‹æƒ…é“¾æ¥</h3><h2 id="6-ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ"><a href="#6-ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ" class="headerlink" title="6 ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ"></a>6 ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ</h2><h2 id="7-ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿"><a href="#7-ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿" class="headerlink" title="7 ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿"></a>7 ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿</h2><h2 id="8-ä»£ç å—è‡ªå®šä¹‰æ ·å¼"><a href="#8-ä»£ç å—è‡ªå®šä¹‰æ ·å¼" class="headerlink" title="8 ä»£ç å—è‡ªå®šä¹‰æ ·å¼"></a>8 ä»£ç å—è‡ªå®šä¹‰æ ·å¼</h2><h2 id="9-å¼€å¯ç‰ˆæƒå£°æ˜"><a href="#9-å¼€å¯ç‰ˆæƒå£°æ˜" class="headerlink" title="9 å¼€å¯ç‰ˆæƒå£°æ˜"></a>9 å¼€å¯ç‰ˆæƒå£°æ˜</h2><h2 id="10-è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜"><a href="#10-è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜" class="headerlink" title="10 è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜"></a>10 è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜</h2><h2 id="11-åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°fork-me-on-github"><a href="#11-åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°fork-me-on-github" class="headerlink" title="11 åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°fork me on github"></a>11 åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°<code>fork me on github</code></h2><h2 id="12-ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦-å·çš„æ ‡ç­¾"><a href="#12-ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦-å·çš„æ ‡ç­¾" class="headerlink" title="12 ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦ # å·çš„æ ‡ç­¾"></a>12 ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦ # å·çš„æ ‡ç­¾</h2><h2 id="13-æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡"><a href="#13-æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡" class="headerlink" title="13 æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡"></a>13 æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡</h2><h2 id="14"><a href="#14" class="headerlink" title="14"></a>14</h2><h2 id="15-ä¿®æ”¹ç½‘é¡µåº•éƒ¨"><a href="#15-ä¿®æ”¹ç½‘é¡µåº•éƒ¨" class="headerlink" title="15 ä¿®æ”¹ç½‘é¡µåº•éƒ¨"></a>15 ä¿®æ”¹ç½‘é¡µåº•éƒ¨</h2><h3 id="1-ä¿®æ”¹æ¡ƒå¿ƒ"><a href="#1-ä¿®æ”¹æ¡ƒå¿ƒ" class="headerlink" title="1 ä¿®æ”¹æ¡ƒå¿ƒ"></a>1 ä¿®æ”¹æ¡ƒå¿ƒ</h3><h2 id="16"><a href="#16" class="headerlink" title="16"></a>16</h2><h2 id="23-æ–°å»º404ç•Œé¢"><a href="#23-æ–°å»º404ç•Œé¢" class="headerlink" title="23 æ–°å»º404ç•Œé¢"></a>23 æ–°å»º404ç•Œé¢</h2><h2 id="32-ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨"><a href="#32-ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨" class="headerlink" title="32 ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨"></a>32 ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨</h2><h2 id="39-æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹"><a href="#39-æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹" class="headerlink" title="39 æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹"></a>39 æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹</h2><h2 id="è®¾ç½®æ˜¾ç¤ºç›®å½•"><a href="#è®¾ç½®æ˜¾ç¤ºç›®å½•" class="headerlink" title="è®¾ç½®æ˜¾ç¤ºç›®å½•"></a>è®¾ç½®æ˜¾ç¤ºç›®å½•</h2><h2 id="ç»Ÿè®¡å­—æ•°"><a href="#ç»Ÿè®¡å­—æ•°" class="headerlink" title="ç»Ÿè®¡å­—æ•°"></a>ç»Ÿè®¡å­—æ•°</h2><p>åšå®¢2</p>
<h2 id="åŠ å® ç‰©"><a href="#åŠ å® ç‰©" class="headerlink" title="åŠ å® ç‰©"></a>åŠ å® ç‰©</h2><h2 id="ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ"><a href="#ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ" class="headerlink" title="ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ"></a>ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ</h2><h2 id="404-é¡µé¢"><a href="#404-é¡µé¢" class="headerlink" title="404 é¡µé¢"></a>404 é¡µé¢</h2><h1 id="è®¿å®¢æ•°è®¿é—®æ¬¡æ•°"><a href="#è®¿å®¢æ•°è®¿é—®æ¬¡æ•°" class="headerlink" title="è®¿å®¢æ•°è®¿é—®æ¬¡æ•°"></a>è®¿å®¢æ•°è®¿é—®æ¬¡æ•°</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/baidu_34310405/article/details/102665373">https://blog.csdn.net/baidu_34310405/article/details/102665373</a></p>
<h1 id="æ·»åŠ èƒŒæ™¯å›¾ç‰‡"><a href="#æ·»åŠ èƒŒæ™¯å›¾ç‰‡" class="headerlink" title="æ·»åŠ èƒŒæ™¯å›¾ç‰‡"></a>æ·»åŠ èƒŒæ™¯å›¾ç‰‡</h1><p><a target="_blank" rel="noopener" href="https://tding.top/archives/761b6f4d.html">https://tding.top/archives/761b6f4d.html</a></p>
<h1 id="æ·»åŠ è·³åŠ¨çš„å¿ƒ"><a href="#æ·»åŠ è·³åŠ¨çš„å¿ƒ" class="headerlink" title="æ·»åŠ è·³åŠ¨çš„å¿ƒ"></a>æ·»åŠ è·³åŠ¨çš„å¿ƒ</h1><p><a target="_blank" rel="noopener" href="https://io-oi.me/tech/hexo-next-optimization/#%E8%AE%A9%E9%A1%B5%E8%84%9A%E7%9A%84%E5%BF%83%E8%B7%B3%E5%8A%A8%E8%B5%B7%E6%9D%A5">https://io-oi.me/tech/hexo-next-optimization/#%E8%AE%A9%E9%A1%B5%E8%84%9A%E7%9A%84%E5%BF%83%E8%B7%B3%E5%8A%A8%E8%B5%B7%E6%9D%A5</a></p>
<h1 id="ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´"><a href="#ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´" class="headerlink" title="ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´"></a>ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´</h1><p><a target="_blank" rel="noopener" href="https://io-oi.me/tech/hexo-next-optimization/#%E4%BE%A7%E6%A0%8F%E5%8A%A0%E5%85%A5%E5%B7%B2%E8%BF%90%E8%A1%8C%E7%9A%84%E6%97%B6%E9%97%B4">https://io-oi.me/tech/hexo-next-optimization/#%E4%BE%A7%E6%A0%8F%E5%8A%A0%E5%85%A5%E5%B7%B2%E8%BF%90%E8%A1%8C%E7%9A%84%E6%97%B6%E9%97%B4</a></p>
<h1 id="æœ¬åœ°æœç´¢"><a href="#æœ¬åœ°æœç´¢" class="headerlink" title="æœ¬åœ°æœç´¢"></a>æœ¬åœ°æœç´¢</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/266119565">https://zhuanlan.zhihu.com/p/266119565</a></p>
<h1 id="å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜"><a href="#å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜" class="headerlink" title="å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜"></a>å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜</h1><p><a target="_blank" rel="noopener" href="https://www.techgrow.cn/posts/abf4aee1.html">https://www.techgrow.cn/posts/abf4aee1.html</a></p>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/02/SQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/05/02/SQL/" itemprop="url">SQL</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-05-02T00:19:32+08:00">
                2021-05-02
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-02T13:39:40+08:00">
                2021-05-02
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index">
                    <span itemprop="name">-åˆ†å¸ƒå¼æ•°æ®åº“</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  7.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><p>[toc]</p>
<ul>
<li>ä»€ä¹ˆæ˜¯ <code>SQL </code><ul>
<li>è®¿é—®å’Œå¤„ç† **å…³ç³»æ•°æ®åº“ **çš„ <strong>è®¡ç®—æœºæ ‡å‡†è¯­è¨€</strong></li>
</ul>
</li>
<li>ç¼–å†™ç¨‹åºæ—¶ï¼Œåªè¦æ¶‰åŠ <strong>æ“ä½œå…³ç³»æ•°æ®åº“</strong>ï¼Œå°±å¿…é¡»é€šè¿‡ SQL å®Œæˆ</li>
</ul>
<ul>
<li><code>NoSQL</code>: éSQLçš„æ•°æ®åº“ï¼Œéƒ½ä¸æ˜¯å…³ç³»æ•°æ®åº“</li>
</ul>
<h1 id="1-å…³ç³»æ•°æ®åº“æ¦‚è¿°"><a href="#1-å…³ç³»æ•°æ®åº“æ¦‚è¿°" class="headerlink" title="1 å…³ç³»æ•°æ®åº“æ¦‚è¿°"></a>1 å…³ç³»æ•°æ®åº“æ¦‚è¿°</h1><ul>
<li><p>ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“</p>
<ul>
<li>åº”ç”¨ç¨‹åº éœ€è¦ä¿å­˜ç”¨æˆ·çš„æ•°æ®</li>
<li>éšç€åº”ç”¨ç¨‹åºåŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œæ•°æ®é‡ä¹Ÿè¶Šæ¥è¶Šå¤§<ul>
<li>è¯»å†™æ–‡ä»¶å¹¶è§£æå‡ºæ•°æ®ï¼Œéœ€è¦å¤§é‡é‡å¤ä»£ç </li>
<li>ä»å¤§é‡æ•°æ®ä¸­ å¿«é€ŸæŸ¥è¯¢å‡º æŒ‡å®šæ•°æ®ï¼Œéœ€è¦å¤æ‚çš„é€»è¾‘</li>
</ul>
</li>
<li>æ¯ä¸ªåº”ç”¨ç¨‹åº<strong>è®¿é—®æ•°æ®çš„æ¥å£</strong>ä¸åŒï¼Œæ•°æ®éš¾ä»¥å¤ç”¨</li>
</ul>
</li>
<li><p><strong>æ•°æ®åº“</strong>ï¼šä¸“é—¨<strong>ç®¡ç†æ•°æ®</strong>çš„è½¯ä»¶</p>
<ul>
<li><p>åº”ç”¨ç¨‹åºé€šè¿‡æ•°æ®åº“è½¯ä»¶æä¾›çš„æ¥å£æ¥è¯»å†™æ•°æ®</p>
</li>
<li><p>æ•°æ®åº“è½¯ä»¶æ¥ç®¡ç†æ•°æ®å¦‚ä½•å­˜å‚¨è¿›æ–‡ä»¶</p>
</li>
<li><p>```ascii<br> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ application  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<pre><code>   â–²â”‚
   â”‚â”‚
</code></pre>
<p>   readâ”‚â”‚write</p>
<pre><code>   â”‚â”‚
   â”‚â–¼
</code></pre>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   database   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## æ•°æ®æ¨¡å‹</span><br><span class="line"></span><br><span class="line">* æ•°æ®åº“æŒ‰ç…§ **æ•°æ®ç»“æ„** æ¥**ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®**ï¼Œä¸‰ç§æ¨¡å‹</span><br><span class="line"></span><br><span class="line">  * å±‚æ¬¡æ¨¡å‹</span><br><span class="line">  * ç½‘çŠ¶æ¨¡å‹</span><br><span class="line">  * å…³ç³»æ¨¡å‹</span><br><span class="line"></span><br><span class="line">* **å±‚æ¬¡æ¨¡å‹ï¼š**ä¸Šä¸‹çº§çš„å±‚æ¬¡å…³ç³» æ¥ç»„ç»‡æ•°æ®</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;ascii</span><br><span class="line">        		â”Œâ”€â”€â”€â”€â”€â”</span><br><span class="line">                â”‚     â”‚</span><br><span class="line">                â””â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                   â”‚</span><br><span class="line">           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">           â”‚               â”‚</span><br><span class="line">        â”Œâ”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”</span><br><span class="line">        â”‚     â”‚         â”‚     â”‚</span><br><span class="line">        â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜</span><br><span class="line">           â”‚               â”‚</span><br><span class="line">       â”Œâ”€â”€â”€â”´â”€â”€â”€â”       â”Œâ”€â”€â”€â”´â”€â”€â”€â”</span><br><span class="line">       â”‚       â”‚       â”‚       â”‚</span><br><span class="line">    â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”</span><br><span class="line">    â”‚     â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚</span><br><span class="line">    â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>ç½‘çŠ¶æ¨¡å‹ï¼š</strong>æŠŠæ¯ä¸ªæ•°æ®èŠ‚ç‚¹å’Œå…¶ä»–å¾ˆå¤šèŠ‚ç‚¹éƒ½è¿æ¥èµ·æ¥</p>
<ul>
<li>```ascii<pre><code> â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”
</code></pre>
   â”Œâ”€â”‚     â”‚â”€â”€â”€â”€â”€â”€â”‚     â”‚â”€â”€â”<br>   â”‚ â””â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”˜  â”‚<br>   â”‚    â”‚            â”‚     â”‚<br>   â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚<br>   â”‚           â”‚           â”‚<br>â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”<br>â”‚     â”‚â”€â”€â”€â”€â”€â”‚     â”‚â”€â”€â”€â”€â”€â”‚     â”‚<br>â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜<br>   â”‚           â”‚           â”‚<br>   â”‚     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”     â”‚<br>   â”‚     â”‚           â”‚     â”‚<br>   â”‚  â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”  â”‚<br>   â””â”€â”€â”‚     â”‚â”€â”€â”€â”€â”€â”‚     â”‚â”€â”€â”˜<pre><code>  â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **å…³ç³»æ¨¡å‹ï¼š**å°†æ•°æ®å½“ä½œäºŒç»´è¡¨æ ¼ï¼Œä»»ä½•æ•°æ®é€šè¿‡ è¡Œå·+åˆ—å· å”¯ä¸€ç¡®å®š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;ascii</span><br><span class="line">    â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å…³ç³»æ¨¡å‹è·å¾—äº†ç»å¯¹å¸‚åœºä»½é¢</p>
<ul>
<li>ç†è§£å’Œä½¿ç”¨èµ·æ¥æœ€ç®€å•</li>
<li>å…³ç³»æ•°æ®åº“ çš„ å…³ç³»æ¨¡å‹ï¼šåŸºäºæ•°å­¦ç†è®ºå»ºç«‹</li>
</ul>
</li>
<li><p>ç®€è€Œè¨€ä¹‹ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ªç­çº§åç§°ï¼Œå¯ä»¥æŸ¥åˆ°ä¸€æ¡ç­çº§è®°å½•ï¼Œæ ¹æ®ç­çº§IDï¼Œåˆå¯ä»¥æŸ¥åˆ°å¤šæ¡å­¦ç”Ÿè®°å½•ï¼Œè¿™æ ·ï¼ŒäºŒç»´è¡¨ä¹‹é—´å°±é€šè¿‡IDæ˜ å°„å»ºç«‹äº† <strong>â€œä¸€å¯¹å¤šâ€</strong> å…³ç³»ã€‚</p>
</li>
</ul>
<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><ul>
<li><p>ä¸€ä¸ª<strong>å…³ç³»è¡¨ï¼š</strong></p>
<ul>
<li><p>é¡»å®šä¹‰ <strong>æ¯ä¸€åˆ—çš„åç§°</strong>å’Œ<strong>æ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹</strong></p>
</li>
<li><p>å…³ç³»æ•°æ®åº“æ”¯æŒçš„æ ‡å‡†æ•°æ®ç±»å‹ï¼šæ•°å€¼ã€å­—ç¬¦ä¸²ã€æ—¶é—´ç­‰ï¼š</p>
<ul>
<li><table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">ç±»å‹</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">INT</td>
<td align="left">æ•´å‹</td>
<td align="left">4å­—èŠ‚æ•´æ•°ç±»å‹ï¼ŒèŒƒå›´çº¦+/-21äº¿</td>
</tr>
<tr>
<td align="left">BIGINT</td>
<td align="left">é•¿æ•´å‹</td>
<td align="left">8å­—èŠ‚æ•´æ•°ç±»å‹ï¼ŒèŒƒå›´çº¦+/-922äº¿äº¿</td>
</tr>
<tr>
<td align="left">REAL</td>
<td align="left">æµ®ç‚¹å‹</td>
<td align="left">4å­—èŠ‚æµ®ç‚¹æ•°ï¼ŒèŒƒå›´çº¦+/-1038</td>
</tr>
<tr>
<td align="left">DOUBLE</td>
<td align="left">æµ®ç‚¹å‹</td>
<td align="left">8å­—èŠ‚æµ®ç‚¹æ•°ï¼ŒèŒƒå›´çº¦+/-10308</td>
</tr>
<tr>
<td align="left">DECIMAL(M,N)</td>
<td align="left">é«˜ç²¾åº¦å°æ•°</td>
<td align="left">ç”±ç”¨æˆ·æŒ‡å®šç²¾åº¦çš„å°æ•°ï¼Œä¾‹å¦‚ï¼ŒDECIMAL(20,10)è¡¨ç¤ºä¸€å…±20ä½ï¼Œå…¶ä¸­å°æ•°10ä½ï¼Œé€šå¸¸ç”¨äºè´¢åŠ¡è®¡ç®—</td>
</tr>
<tr>
<td align="left">CHAR(N)</td>
<td align="left">å®šé•¿å­—ç¬¦ä¸²</td>
<td align="left">å­˜å‚¨æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼ŒCHAR(100)æ€»æ˜¯å­˜å‚¨100ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td align="left">VARCHAR(N)</td>
<td align="left">å˜é•¿å­—ç¬¦ä¸²</td>
<td align="left">å­˜å‚¨å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼ŒVARCHAR(100)å¯ä»¥å­˜å‚¨0~100ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td align="left">BOOLEAN</td>
<td align="left">å¸ƒå°”ç±»å‹</td>
<td align="left">å­˜å‚¨Trueæˆ–è€…False</td>
</tr>
<tr>
<td align="left">DATE</td>
<td align="left">æ—¥æœŸç±»å‹</td>
<td align="left">å­˜å‚¨æ—¥æœŸï¼Œä¾‹å¦‚ï¼Œ2018-06-22</td>
</tr>
<tr>
<td align="left">TIME</td>
<td align="left">æ—¶é—´ç±»å‹</td>
<td align="left">å­˜å‚¨æ—¶é—´ï¼Œä¾‹å¦‚ï¼Œ12:20:59</td>
</tr>
<tr>
<td align="left">DATETIME</td>
<td align="left">æ—¥æœŸå’Œæ—¶é—´ç±»å‹</td>
<td align="left">å­˜å‚¨æ—¥æœŸ+æ—¶é—´ï¼Œä¾‹å¦‚ï¼Œ2018-06-22 12:20:59</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
</li>
<li><p>è®¸å¤šæ•°æ®ç±»å‹æœ‰åˆ«åï¼š</p>
<ul>
<li>ä¾‹å¦‚<code>REAL</code> : <code>FLOAT(24)</code></li>
</ul>
</li>
<li><p>éœ€è¦æ ¹æ®ä¸šåŠ¡è§„åˆ™ é€‰æ‹©åˆé€‚çš„ç±»å‹ï¼š</p>
<ul>
<li><code>BIGINT</code> : æ»¡è¶³æ•´æ•°å­˜å‚¨çš„éœ€æ±‚</li>
<li><code>VARCHAR(N)</code> ï¼šæ»¡è¶³å­—ç¬¦ä¸²å­˜å‚¨çš„éœ€æ±‚</li>
</ul>
</li>
</ul>
<h2 id="ä¸»æµå…³ç³»æ•°æ®åº“"><a href="#ä¸»æµå…³ç³»æ•°æ®åº“" class="headerlink" title="ä¸»æµå…³ç³»æ•°æ®åº“"></a>ä¸»æµå…³ç³»æ•°æ®åº“</h2><ul>
<li><strong>ä¸»æµçš„å…³ç³»æ•°æ®åº“</strong>ï¼š<ul>
<li>å•†ç”¨æ•°æ®åº“ï¼š<ul>
<li><code>Oracle</code>, <code>SQL Server</code>, <code>DB2</code></li>
</ul>
</li>
<li>å¼€æºæ•°æ®åº“ï¼š<ul>
<li><code>MySQL</code>, <code>PostgreSQL</code></li>
</ul>
</li>
<li>æ¡Œé¢æ•°æ®åº“ï¼š<ul>
<li><code>Access</code> ï¼Œé€‚åˆæ¡Œé¢åº”ç”¨ç¨‹åºä½¿ç”¨</li>
</ul>
</li>
<li>åµŒå…¥å¼æ•°æ®åº“ï¼š<ul>
<li><code>Sqlite</code>, é€‚åˆæ‰‹æœºåº”ç”¨ å’Œæ¡Œé¢ç¨‹åº</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="SQL-1"><a href="#SQL-1" class="headerlink" title="SQL"></a>SQL</h2><ul>
<li><p><strong>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</strong> ï¼šç”¨æ¥è®¿é—®å’Œæ“ä½œ <strong>æ•°æ®åº“ç³»ç»Ÿ</strong></p>
<ul>
<li>å¯ä»¥ <strong>æŸ¥è¯¢ã€æ·»åŠ ã€æ›´æ–°ã€å’Œåˆ é™¤æ•°æ®åº“ä¸­çš„æ•°æ®</strong></li>
<li>å¯ä»¥ <strong>å¯¹æ•°æ®åº“è¿›è¡Œç®¡ç†å’Œç»´æŠ¤æ“ä½œ</strong></li>
</ul>
</li>
<li><p>ä¸åŒçš„æ•°æ®åº“ éƒ½æ”¯æŒ SQL</p>
</li>
<li><p>ä¸åŒçš„æ•°æ®åº“ å¯¹ æ ‡å‡†çš„SQLæ”¯æŒ ä¸å¤ªä¸€è‡´</p>
<ul>
<li>å¤§éƒ¨åˆ†æ•°æ®åº“åœ¨æ ‡å‡†çš„SQLåšäº†<strong>æ‰©å±•</strong></li>
</ul>
</li>
<li><p>åªä½¿ç”¨ANSI ç»„ç»‡å®šä¹‰çš„æ ‡å‡†SQLï¼Œæ‰€æœ‰æ•°æ®åº“éƒ½å¯ä»¥æ”¯æŒ</p>
</li>
</ul>
<ul>
<li>SQL å®šä¹‰çš„å¯¹ æ•°æ®åº“ çš„æ“ä½œï¼š<ul>
<li><code>DDL</code> : <strong>Data Definition Language</strong><ul>
<li>ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ï¼šåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€ä¿®æ”¹è¡¨ç»“æ„ç­‰æ“ä½œ</li>
<li>DDL é€šå¸¸ç”±æ•°æ®åº“ç®¡ç†å‘˜æ‰§è¡Œ</li>
</ul>
</li>
<li><code>DML</code> : <strong>Data Manipulation Language</strong><ul>
<li>ç”¨æˆ·æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°æ•°æ®çš„èƒ½åŠ›</li>
<li>åº”ç”¨ç¨‹åºå¯¹æ•°æ®åº“çš„æ—¥å¸¸æ“ä½œ</li>
</ul>
</li>
<li><code>DQL</code> : <strong>Data Query Language</strong><ul>
<li>ç”¨æˆ·æŸ¥è¯¢æ•°æ®ï¼Œæœ€é¢‘ç¹</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è¯­æ³•ç‰¹ç‚¹"><a href="#è¯­æ³•ç‰¹ç‚¹" class="headerlink" title="è¯­æ³•ç‰¹ç‚¹"></a>è¯­æ³•ç‰¹ç‚¹</h2><ul>
<li>å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™</li>
<li>å¯¹äºè¡¨æ˜å’Œåˆ—åï¼šæœ‰çš„æ•°æ®åº“åŒºåˆ†å¤§å°å†™</li>
<li>åŒä¸€ä¸ªæ•°æ®åº“ï¼šä¸åŒæ“ä½œç³»ç»Ÿå¤§å°å†™ä¸åŒ</li>
<li>çº¦å®šï¼šSQL å…³é”®å­—æ€»æ˜¯å¤§å†™ï¼Œè¡¨åå’Œåˆ—åå‡ä½¿ç”¨å°å†™</li>
</ul>
<h1 id="2-å®‰è£…-MySQL"><a href="#2-å®‰è£…-MySQL" class="headerlink" title="2 å®‰è£… MySQL"></a>2 å®‰è£… MySQL</h1><ul>
<li><p>MySQL <strong>åº”ç”¨æœ€å¹¿æ³›çš„ å¼€æºå…³ç³»æ•°æ®åº“</strong></p>
</li>
<li><p>ä¸å…¶ä»–å…³ç³»æ•°æ®åº“ä¸åŒï¼šMySQL æœ¬èº«å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>SQL æ¥å£</strong>ï¼Œå†…éƒ¨åŒ…å«<strong>å¤šç§æ•°æ®åº“å¼•æ“</strong></p>
<ul>
<li><code>InnoDB</code> :  <strong>æ”¯æŒäº‹åŠ¡çš„æ•°æ®åº“å¼•æ“</strong></li>
<li><code>MyISAM</code> : MySQL æ—©æœŸé›†æˆçš„é»˜è®¤æ•°æ®åº“å¼•æ“ï¼Œ<strong>ä¸æ”¯æŒäº‹åŠ¡</strong></li>
</ul>
</li>
<li><p>åˆ‡æ¢ <strong>MySQL å¼•æ“</strong>ä¸å½±å“è‡ªå·±å†™çš„åº”ç”¨ç¨‹åºä½¿ç”¨ <strong>MySQL æ¥å£</strong></p>
</li>
<li><p>ä½¿ç”¨ MySQL æ—¶ï¼Œä¸åŒçš„è¡¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„<strong>æ•°æ®åº“å¼•æ“</strong></p>
<ul>
<li>æ€»æ˜¯é€‰æ‹©<code>InnoDB</code> å°±å¥½</li>
</ul>
</li>
<li><p>MySQL ä¸€å¼€å§‹ä¾¿æ˜¯<strong>å¼€æº</strong>çš„ï¼ŒåŸºäºæ­¤ï¼Œè¡ç”Ÿå‡ºå„ç§ç‰ˆæœ¬ï¼š</p>
<ul>
<li><code>MariaDB</code><ul>
<li>MySQL åˆ›å§‹äººåˆ›å»ºçš„å¼€æºåˆ†æ”¯ç‰ˆæœ¬ï¼Œä½¿ç”¨<code>XtraDB</code> å¼•æ“</li>
</ul>
</li>
<li><code>Aurora</code><ul>
<li>ç”±Amazonæ”¹è¿›çš„ä¸€ä¸ªMySQLç‰ˆæœ¬ï¼Œä¸“é—¨æä¾›ç»™åœ¨<code>AWS</code>æ‰˜ç®¡<code>MySQL</code>ç”¨æˆ·ï¼Œå·ç§°5å€çš„æ€§èƒ½æå‡ã€‚</li>
</ul>
</li>
<li><code>PolarDB</code><ul>
<li>ç”±<code>Alibaba</code>æ”¹è¿›çš„ä¸€ä¸ªMySQLç‰ˆæœ¬ï¼Œä¸“é—¨æä¾›ç»™åœ¨<a target="_blank" rel="noopener" href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=cz36baxa">é˜¿é‡Œäº‘</a>æ‰˜ç®¡çš„MySQLç”¨æˆ·ï¼Œå·ç§°6å€çš„æ€§èƒ½æå‡ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>MySQL å®˜æ–¹ç‰ˆæœ¬åˆ†å‡ºçš„ç‰ˆæœ¬ï¼šåŠŸèƒ½ä¾æ¬¡é€’å¢ï¼Œå¢åŠ çš„ä¸»è¦åŠŸèƒ½ï¼šç›‘æ§å’Œé›†ç¾¤ç­‰ç®¡ç†åŠŸèƒ½ï¼Œå¯¹åŸºæœ¬çš„SQLåŠŸèƒ½ä¸€æ ·</p>
<ul>
<li><code>Community Edition</code> : ç¤¾åŒºå¼€æºç‰ˆæœ¬ï¼Œå…è´¹</li>
<li><code>Standard Edition</code> : æ ‡å‡†ç‰ˆ</li>
<li><code>Enterprise Edition</code> : ä¼ä¸šç‰ˆ</li>
<li><code>Cluster Carrier Grade Edition</code> : é›†ç¾¤ç‰ˆ</li>
</ul>
</li>
<li><p>å¯ä»¥å®‰è£…å…è´¹çš„<code>Community Edition</code> ï¼Œè¿›è¡Œå­¦ä¹ ã€å¼€å‘ã€æµ‹è¯•</p>
<ul>
<li>éƒ¨ç½²çš„æ—¶å€™ï¼Œé€‰æ‹©é«˜çº§ç‰ˆæœ¬ï¼Œæˆ–è€…äº‘æœåŠ¡å•†æä¾›çš„å…¼å®¹ç‰ˆæœ¬</li>
</ul>
</li>
</ul>
<h2 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h2><ul>
<li>å®‰è£…è¿‡ç¨‹ä¸­ï¼ŒMySQL è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª<code>root</code> ç”¨æˆ·ï¼Œå¹¶æç¤ºè¾“å…¥<code>root</code>å£ä»¤</li>
<li>è´¦å·ï¼š<code>ZiHaO</code><ul>
<li>å¯†ç  : <code>qazedc12 </code></li>
</ul>
</li>
</ul>
<h2 id="è¿è¡Œ-MySQL"><a href="#è¿è¡Œ-MySQL" class="headerlink" title="è¿è¡Œ MySQL"></a>è¿è¡Œ MySQL</h2><ul>
<li>MySQL å®‰è£…åè‡ªåŠ¨åœ¨åå°è¿è¡Œ</li>
</ul>
<ul>
<li>ä¸‹è½½å®‰è£…åï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡<ul>
<li>é€šè¿‡<code>ä»»åŠ¡ç®¡ç†å™¨</code>æ‰¾åˆ° <code>mysql.exe</code> æŸ¥çœ‹å±æ€§ï¼Œæ‰¾åˆ°<code>bin</code>ç›®å½•</li>
<li>å°†è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡</li>
</ul>
</li>
</ul>
<ul>
<li><p>é€šè¿‡å‘½ä»¤è¡Œç¨‹åºè¿æ¥ MySQLæœåŠ¡å™¨ï¼Œå‘½ä»¤æç¤ºç¬¦ä¸‹è¾“å…¥<code>mysql -u root -p</code>, è¾“å…¥å£ä»¤ï¼Œ</p>
<ul>
<li>è‹¥è¿æ¥åˆ° MySQL æœåŠ¡å™¨ï¼Œæç¤ºç¬¦å˜æˆ <code>mysql&gt;</code></li>
</ul>
</li>
<li><p>è¾“å…¥<code>exit</code> é€€å‡º MySQL å‘½ä»¤è¡Œ</p>
</li>
<li><p>MySQL æœåŠ¡å™¨ä¾ç„¶åœ¨åå°è¿è¡Œ</p>
</li>
</ul>
<h1 id="3-å…³ç³»æ¨¡å‹"><a href="#3-å…³ç³»æ¨¡å‹" class="headerlink" title="3 å…³ç³»æ¨¡å‹"></a>3 å…³ç³»æ¨¡å‹</h1><ul>
<li><p>å…³ç³»æ•°æ®åº“ å»ºç«‹åœ¨å…³ç³»æ¨¡å‹ä¸Š</p>
</li>
<li><p>å…³ç³»æ¨¡å‹æœ¬è´¨ï¼šè‹¥å¹²ä¸ªå­˜å‚¨æ•°æ®çš„äºŒç»´è¡¨</p>
<ul>
<li>è¡¨çš„æ¯ä¸€è¡Œï¼š<code>è®°å½•Record</code>, ä¸€ä¸ªé€»è¾‘æ„ä¹‰ä¸Šçš„æ•°æ®</li>
<li>è¡¨çš„æ¯ä¸€åˆ—ï¼š<code>å­—æ®µColumn</code>ï¼ŒåŒä¸€ä¸ªè¡¨çš„æ¯ä¸€è¡Œ<strong>è®°å½•</strong>ï¼Œæ‹¥æœ‰ç›¸åŒçš„è‹¥å¹²<strong>å­—æ®µ</strong></li>
</ul>
</li>
<li><p><strong>å­—æ®µ</strong>ï¼šå®šä¹‰æ•°æ®ç±»å‹ï¼ˆæ•´å‹ï¼Œæµ®ç‚¹å‹ï¼Œå­—ç¬¦ä¸²ï¼Œæ—¥æœŸç­‰ï¼‰ï¼Œä»¥åŠæ˜¯å¦å…è®¸<code>NULL</code></p>
<ul>
<li><code>NULL</code> è¡¨ç¤ºå­—æ®µæ•°æ®<strong>ä¸å­˜åœ¨</strong>ï¼Œä¸ºç©ºï¼Œè€Œéä¸ºæ•°æ®ç±»å‹çš„é›¶å€¼</li>
</ul>
</li>
<li><p>ä¸€èˆ¬æƒ…å†µï¼Œåº”é¿å…å…è®¸æ•°æ®ä¸º<code>NULL</code> , å¯ä»¥ç®€åŒ–æŸ¥è¯¢æ¡ä»¶ï¼ŒåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œæœ‰åˆ©äºåº”ç”¨ç¨‹åºè¯»å–æ•°æ®åæ— éœ€åˆ¤æ–­æ˜¯å¦ä¸º<code>NULL</code></p>
</li>
</ul>
<ul>
<li>å’ŒExcelè¡¨ä¸åŒï¼šå…³ç³»æ•°æ®åº“çš„è¡¨å’Œè¡¨ä¹‹é—´ éœ€è¦å»ºç«‹ <code>ä¸€å¯¹å¤š</code>ï¼Œ<code>å¤šå¯¹ä¸€</code>å’Œ<code>ä¸€å¯¹ä¸€</code>çš„å…³ç³»<ul>
<li>æ‰èƒ½æŒ‰ç…§ <strong>åº”ç”¨ç¨‹åºçš„é€»è¾‘</strong> æ¥ç»„ç»‡å’Œå­˜å‚¨æ•°æ®</li>
</ul>
</li>
</ul>
<ul>
<li><p><strong>ä¸€å¯¹å¤šï¼š</strong></p>
<ul>
<li>ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªè®°å½•ï¼Œå¯¹åº”ç€å¦ä¸€ä¸ªè¡¨ä¸­å¤šä¸ªè®°å½•</li>
</ul>
</li>
<li><p><strong>å¤šå¯¹ä¸€ï¼š</strong></p>
<ul>
<li>ä¸€ä¸ªè¡¨ä¸­çš„å¤šä¸ªè®°å½•ï¼Œå¯¹åº”ç€å¦ä¸€ä¸ªè¡¨ä¸­ä¸€ä¸ªè®°å½•</li>
</ul>
</li>
<li><p><strong>ä¸€å¯¹ä¸€ï¼š</strong></p>
<ul>
<li>ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªè®°å½•ï¼Œå¯¹åº”ç€å¦ä¸€ä¸ªè¡¨ä¸­ä¸€ä¸ªè®°å½•</li>
</ul>
</li>
<li><p><strong>å…³ç³»æ•°æ®åº“</strong>ä¸­ï¼Œå…³ç³» æ˜¯ é€šè¿‡ <code>ä¸»é”®</code> å’Œ <code>å¤–é”®</code> æ¥ç»´æŠ¤</p>
</li>
</ul>
<h2 id="ä¸»é”®"><a href="#ä¸»é”®" class="headerlink" title="ä¸»é”®"></a>ä¸»é”®</h2><ul>
<li><p><strong>å…³ç³»æ•°æ®åº“ä¸­</strong>ï¼š</p>
<ul>
<li>ä¸€å¼ è¡¨çš„æ¯ä¸€è¡Œæ•°æ®ï¼š<strong>ä¸€æ¡è®°å½•</strong></li>
<li>ä¸€æ¡è®°å½•<strong>ç”±å¤šä¸ªå­—æ®µç»„æˆ</strong></li>
<li>åŒä¸€ä¸ªè¡¨ä¸­æ¯ä¸€æ¡è®°å½•éƒ½æœ‰ç›¸åŒçš„å­—æ®µå®šä¹‰</li>
</ul>
</li>
<li><p><strong>å…³ç³»æ•°æ®åº“ä¸­</strong>ï¼Œå¾ˆé‡è¦çš„çº¦æŸï¼šä»»æ„ä¸¤æ¡è®°å½•ä¸èƒ½é‡å¤</p>
<ul>
<li>ä¸æ˜¯æŒ‡ ä¸¤æ¡è®°å½•ä¸å®Œå…¨ç›¸åŒ</li>
<li>æŒ‡ èƒ½é€šè¿‡æŸä¸ªå­—æ®µï¼Œ<strong>å”¯ä¸€åŒºåˆ†å‡ºä¸åŒçš„è®°å½•</strong>ï¼Œè¯¥å­—æ®µä¸º <strong>ä¸»é”®</strong></li>
<li>å› æ­¤ï¼ŒåŒä¸€å¼ è¡¨ä¸­ ä»»æ„ä¸¤æ¡è®°å½•çš„ ä¸»é”®å­—æ®µ çš„å€¼éƒ½ä¸ç›¸åŒ</li>
</ul>
</li>
<li><p><strong>å¯¹ä¸»é”®çš„è¦æ±‚</strong>ï¼šè®°å½•ä¸€æ—¦æ’å…¥è¡¨ä¸­ï¼Œä¸»é”®æœ€å¥½ä¸è¦ä¿®æ”¹ï¼Œå”¯ä¸€å®šä½è®°å½•çš„</p>
</li>
<li><p><strong>é€‰å–ä¸šåŠ¡çš„åŸºæœ¬åŸåˆ™ï¼š</strong>ä¸ä½¿ç”¨ä»»ä½•<strong>ä¸šåŠ¡ç›¸å…³</strong>çš„å­—æ®µä½œä¸ºä¸»é”®</p>
<ul>
<li>èº«ä»½è¯å·ã€æ‰‹æœºå·ã€é‚®ç®±åœ°å€ç­‰</li>
</ul>
</li>
</ul>
<ul>
<li><p>ä¸€èˆ¬å°†ä¸»é”®å­—æ®µå‘½åä¸º <code>id</code>ã€‚å¸¸è§çš„<code>id</code>å­—æ®µçš„ç±»å‹</p>
<ul>
<li>è‡ªå¢æ•´æ•°ç±»å‹ï¼šæ•°æ®åº“ ä¼šåœ¨æ’å…¥æ•°æ®æ—¶ è‡ªåŠ¨ ä¸ºæ¯ä¸€æ¡è®°å½•åˆ†é…ä¸€ä¸ªè‡ªå¢æ•´æ•°ï¼Œä¸éœ€è¦æ‹…å¿ƒä¸»é”®é‡å¤ï¼Œä¸ç”¨é¢„å…ˆç”Ÿæˆä¸»é”®</li>
<li>å…¨å±€å”¯ä¸€<code>GUID</code> ç±»å‹ï¼šä½¿ç”¨ä¸€ç§ å…¨å±€å”¯ä¸€ çš„å­—ç¬¦ä¸²ä½œä¸ºä¸»é”®ï¼Œ``<ul>
<li><code>GUID</code> ç®—æ³•é€šè¿‡ ç½‘å¡MACåœ°å€ã€æ—¶é—´æˆ³ã€éšæœºæ•° ä¿è¯ä»»æ„è®¡ç®—æœºåœ¨ä»»æ„æ—¶é—´ç”Ÿæˆçš„å­—ç¬¦ä¸²ä¸åŒï¼Œå¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€éƒ½å†…ç½®äº†<code>GUID</code>ç®—æ³•ï¼Œé¢„ç®—å‡ºä¸»é”®</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¸€èˆ¬ï¼Œé€šå¸¸ è‡ªå¢ç±»å‹ çš„ä¸»é”®å°±èƒ½æ»¡è¶³éœ€æ±‚</p>
</li>
</ul>
<ul>
<li>æ³¨æ„ï¼š å¦‚æœä½¿ç”¨<code>INT</code>è‡ªå¢ç±»å‹ï¼Œé‚£ä¹ˆå½“ä¸€å¼ è¡¨çš„è®°å½•æ•°è¶…è¿‡2147483647ï¼ˆçº¦21äº¿ï¼‰æ—¶ï¼Œä¼šè¾¾åˆ°ä¸Šé™è€Œå‡ºé”™ã€‚ä½¿ç”¨<code>BIGINT</code>è‡ªå¢ç±»å‹åˆ™å¯ä»¥æœ€å¤šçº¦922äº¿äº¿æ¡è®°å½•ã€‚</li>
</ul>
<h3 id="è”åˆä¸»é”®"><a href="#è”åˆä¸»é”®" class="headerlink" title="è”åˆä¸»é”®"></a>è”åˆä¸»é”®</h3><ul>
<li><p><strong>è”åˆä¸»é”®</strong>ï¼šå…³ç³»æ•°æ®åº“ï¼Œå…è®¸é€šè¿‡å¤šä¸ªå­—æ®µ å”¯ä¸€æ ‡è¯†è®°å½•ï¼Œå³å¤šä¸ªå­—æ®µéƒ½è®¾ç½®ä¸ºä¸»é”®</p>
<ul>
<li>å…è®¸ä¸€åˆ—æœ‰é‡å¤ï¼Œåªè¦ä¸æ˜¯æ‰€æœ‰ä¸»é”®åˆ—éƒ½é‡å¤å³å¯</li>
</ul>
</li>
<li><p>è”åˆä¸»é”®è¦æ±‚ ä»»æ„ä¸¤æ¡è®°å½• çš„ä¸»é”®ç»„åˆéƒ½ä¸ç›¸åŒ</p>
</li>
<li><p>å°½é‡ä¸ä½¿ç”¨ è”åˆä¸»é”®ï¼Œç»™å…³ç³»è¡¨å¸¦æ¥äº† <strong>å¤æ‚åº¦çš„ä¸Šå‡</strong></p>
</li>
</ul>
<h2 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h2><ul>
<li><p><strong>ä¸»é”®</strong> å”¯ä¸€æ ‡è¯†è®°å½•æ—¶ï¼Œå¯ä»¥åœ¨è¡¨ä¸­ç¡®å®šä»»æ„è®°å½•</p>
</li>
<li><p>ç¡®å®š<code>student</code> è¡¨çš„ä¸€æ¡è®°å½•ï¼Œå±äºå“ªä¸ªç­çº§</p>
<ul>
<li>åœ¨<code>student</code> è¡¨ä¸­ï¼Œæ·»åŠ å­—æ®µ<code>class_id</code> ï¼Œä½¿å¾—å…¶ä¸<code>class</code> è¡¨çš„æŸæ¡è®°å½•å¯¹åº”</li>
</ul>
</li>
<li><p><strong>å¤–é”®ï¼š</strong>åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œé€šè¿‡<code>xx_id</code>å­—æ®µï¼Œå°†<strong>è¯¥è¡¨æ•°æ® ä¸ å¦ä¸€å¼ è¡¨å…³è”èµ·æ¥çš„å­—æ®µ</strong></p>
</li>
<li><p><strong>å¤–é”®</strong> é€šè¿‡å®šä¹‰ <strong>å¤–é”®çº¦æŸ</strong> å®ç°</p>
<ul>
<li>```mysql<br>ALTER TABLE students<br>ADD CONSTRAINT fk_class_id<br>FOREIGN KEY (class_id)<br>REFERENCES classes (id);<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * &#96;ADD CONSTRAINT fk_class_id&#96;ï¼š**å¤–é”®çº¦æŸåç§°**ï¼Œå¯ä»¥ä»»æ„</span><br><span class="line">  * &#96;FOREIGN KEY (class_id)&#96; : æŒ‡å®š&#96;class_id&#96; ä¸ºå¤–é”®</span><br><span class="line">  * &#96;REFERENCES classes (id)&#96;: æŒ‡å®šè¿™ä¸ªå¤–é”® å°†å…³è”åˆ°&#96;classes&#96; è¡¨çš„ &#96;id&#96; åˆ—ï¼ˆå³&#96;classes&#96; çš„ä¸»é”®</span><br><span class="line"></span><br><span class="line">* é€šè¿‡**å®šä¹‰ å¤–é”®çº¦æŸ**ï¼Œ**å…³ç³»æ•°æ®åº“å¯ä»¥ä¿è¯ æ— æ³•ç©¿æ’å¦‚æ— æ•ˆçš„æ•°æ®**ï¼š</span><br><span class="line">  * å³å¤–é”®æ‰€ç»‘å®šçš„å¦ä¸€å¼ è¡¨çš„ä¸»é”®æ•°æ®ï¼Œçº¦æŸç€å¤–é”®çš„æ•°æ®èŒƒå›´</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* **å¤–é”®çº¦æŸ** ä¼šé™ä½æ•°æ®åº“çš„æ€§èƒ½ï¼Œä¸ºäº†è¿½æ±‚é€Ÿåº¦ï¼Œå¹¶ä¸è®¾ç½®å¤–é”®çº¦æŸï¼Œä»…ä¾é åº”ç”¨ç¨‹åºè‡ªèº«æ¥ä¿è¯ é€»è¾‘çš„æ­£ç¡®æ€§</span><br><span class="line">  * è¿™ç§æƒ…å†µä¸‹ï¼Œå¤–é”®ä»…æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆ—</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* è¦**åˆ é™¤ä¸€ä¸ª å¤–é”®çº¦æŸ**ï¼Œé€šè¿‡&#96;ALTER TABLE&#96;</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;mysql</span><br><span class="line">    ALTER TABLE students</span><br><span class="line">    DROP FOREIGN KEY fk_class_id;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æ³¨æ„ï¼šåˆ é™¤ å¤–é”®çº¦æŸ å¹¶æ²¡æœ‰åˆ é™¤å¤–é”®è¿™ä¸€åˆ—</p>
<ul>
<li>åˆ é™¤åˆ—é€šè¿‡ï¼š<code>DROP COLUMN ,..</code> å®ç°</li>
</ul>
</li>
</ul>
<h2 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h2><ul>
<li><p>é€šè¿‡ä¸€ä¸ªè¡¨çš„ å¤–é”® å…³è”åˆ°å¦ä¸€ä¸ªè¡¨ï¼Œå¯ä»¥å®šä¹‰å‡º ä¸€å¯¹å¤š å…³ç³»</p>
</li>
<li><p>å®šä¹‰<strong>å¤šå¯¹å¤šå…³ç³»</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³» å®ç°ï¼šå³é€šè¿‡<strong>ä¸€ä¸ªä¸­é—´è¡¨</strong>ï¼Œ<strong>å…³è”ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»</strong>ï¼Œå°±å½¢æˆäº†å¤šå¯¹å¤šå…³ç³»</li>
</ul>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><p><code>teachers</code>è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">name</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">å¼ è€å¸ˆ</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">ç‹è€å¸ˆ</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">æè€å¸ˆ</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">èµµè€å¸ˆ</td>
</tr>
</tbody></table>
</li>
<li><p><code>classes</code>è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">name</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">ä¸€ç­</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">äºŒç­</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸­é—´è¡¨<code>teacher_class</code>å…³è”ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»ï¼š</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">teacher_id</th>
<th align="left">class_id</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">2</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">2</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">3</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">4</td>
<td align="left">2</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>é€šè¿‡<code>teacher_class</code> è¡¨ï¼Œå¯çŸ¥<code>teachers</code> åˆ°<code>classes</code> çš„å…³ç³» å’Œ <code>classes</code> åˆ° <code>teachers</code> çš„å…³ç³»</p>
</li>
</ul>
<h2 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h2><ul>
<li><strong>ä¸€å¯¹ä¸€å…³ç³»</strong>ï¼šä¸€ä¸ªè¡¨çš„è®°å½• å¯¹åº”åˆ°å¦ä¸€ä¸ªè¡¨ çš„å”¯ä¸€ä¸€ä¸ªè®°å½•</li>
<li>æ—¢ç„¶æ˜¯ ä¸€å¯¹ä¸€å…³ç³» ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆå¹¶ä¸ºåŒä¸€ä¸ªè¡¨<ul>
<li>å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå¯ä»¥å°†ä¸¤ä¸ªè¡¨åˆå¹¶<ul>
<li>ä½†è‹¥æŸäº›æ•°æ®æ˜¯ç¼ºå¤±ï¼Œå°±ä¸å­˜åœ¨å¯¹åº”çš„è®°å½•</li>
<li>åªèƒ½è¯´ å­é›†è¡¨ ä¸€ä¸€å¯¹åº” å¦ä¸€ä¸ªè¡¨</li>
</ul>
</li>
<li>å°†å¤§è¡¨ <strong>æ‹†åˆ†æˆ</strong>ä¸¤ä¸ª ä¸€å¯¹ä¸€ çš„è¡¨ï¼šæŠŠç»å¸¸è¯»å–å’Œä¸ç»å¸¸è¯»å–çš„å­—æ®µåˆ†å¼€ï¼Œ<strong>è·å¾—é«˜æ€§èƒ½</strong></li>
</ul>
</li>
</ul>
<h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><ul>
<li><p>åœ¨ <strong>å…³ç³»æ•°æ®åº“</strong> ä¸­ï¼Œè‹¥æœ‰ä¸Šä¸‡ä¸Šäº¿æ¡è®°å½•ï¼Œéœ€è¦ä½¿ç”¨<strong>ç´¢å¼•</strong>ï¼Œæ‰èƒ½è·å¾—é«˜é€Ÿåº¦</p>
</li>
<li><p>ç´¢å¼•ï¼šå…³ç³»æ•°æ®åº“ ä¸­ï¼Œå¯¹æŸä¸€åˆ—æˆ–å¤šä¸ªåˆ—çš„å€¼ <strong>è¿›è¡Œé¢„æ’åºçš„ æ•°æ®ç»“æ„</strong></p>
<ul>
<li>ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥è®©æ•°æ®åº“ç³»ç»Ÿä¸å¿…æ‰«ææ•´ä¸ªè¡¨ï¼Œè€Œæ˜¯<strong>ç›´æ¥å®šä½åˆ°ç¬¦åˆæ¡ä»¶çš„è®°å½•</strong></li>
</ul>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><p><code>students</code> è¡¨</p>
</li>
<li><table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">class_id</th>
<th align="left">name</th>
<th align="left">gender</th>
<th align="left">score</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">å°æ˜</td>
<td align="left">M</td>
<td align="left">90</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">å°çº¢</td>
<td align="left">F</td>
<td align="left">95</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">1</td>
<td align="left">å°å†›</td>
<td align="left">M</td>
<td align="left">88</td>
</tr>
</tbody></table>
</li>
<li><p>æ›´å…·<code>score</code>åˆ—è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯¹<code>score</code>åˆ—åˆ›å»ºç´¢å¼•ï¼š</p>
</li>
<li><p>```mysql<br>ALTER TABLE students<br>ADD INDEX idx_score (score);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä½¿ç”¨&#96;ADD INDEX idx_score (score)&#96; : åˆ›å»ºä¸€ä¸ªåç§°ä¸º&#96;idx_score&#96; ï¼Œä½¿ç”¨åˆ—&#96;score&#96; çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">  * ç´¢å¼•åç§°ä»»æ„ï¼Œè‹¥ç´¢å¼•æœ‰å¾ˆå¤šåˆ—ï¼Œåœ¨æ‹¬å·é‡Œ ä¾æ¬¡å†™ä¸Šï¼š</span><br><span class="line"></span><br><span class="line">    * &#96;&#96;&#96;</span><br><span class="line">      ALTER TABLE students</span><br><span class="line">      ADD INDEX idx_name_score (name, score);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>ç´¢å¼•çš„æ•ˆç‡</strong> å–å†³äº ç´¢å¼•åˆ—çš„è¡¨ æ˜¯å¦æ•£åˆ—ï¼Œå³ è¯¥åˆ—çš„å€¼äº’ä¸ç›¸åŒçš„ç¨‹åº¦è¶Šé«˜ï¼Œç´¢å¼•æ•ˆç‡è¶Šé«˜</p>
</li>
<li><p>å¯ä»¥å¯¹ä¸€å¼ è¡¨ åˆ›å»ºå¤šä¸ªç´¢å¼•</p>
<ul>
<li>ç´¢å¼•çš„ä¼˜ç‚¹ï¼šæé«˜æŸ¥è¯¢æ•ˆç‡</li>
<li>ç´¢å¼•çš„ç¼ºç‚¹ï¼šæ’å…¥ã€æ›´æ–°ã€åˆ é™¤è®°å½•æ—¶ï¼ŒåŒæ—¶ä¿®æ”¹ç´¢å¼•<ul>
<li>å› æ­¤ï¼Œç´¢å¼•è¶Šå¤šï¼Œæ’å…¥ã€åˆ é™¤ã€æ›´æ–°è®°å½•çš„é€Ÿåº¦è¶Šæ…¢</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>å¯¹äºä¸»é”®ï¼Œ<strong>å…³ç³»æ•°æ®åº“</strong> ä¼šè‡ªåŠ¨å¯¹å…¶åˆ›å»º<strong>ä¸»é”®ç´¢å¼•</strong><ul>
<li>ä½¿ç”¨ ä¸»é”®ç´¢å¼•çš„æ•ˆç‡æœ€é«˜ï¼Œå› ä¸ºä¸»é”®ä¼šä¿è¯ ç»å¯¹å”¯ä¸€</li>
</ul>
</li>
</ul>
<h3 id="å”¯ä¸€ç´¢å¼•"><a href="#å”¯ä¸€ç´¢å¼•" class="headerlink" title="å”¯ä¸€ç´¢å¼•"></a>å”¯ä¸€ç´¢å¼•</h3><ul>
<li><p>è®¾è®¡å…³ç³»æ•°æ®åº“çš„è¡¨æ—¶ï¼Œçœ‹ä¸Šå»å”¯ä¸€çš„åˆ—ï¼Œé€šå¸¸å…·æœ‰ä¸šåŠ¡å«ä¹‰ï¼Œä¸èƒ½ä½œä¸ºä¸»é”®</p>
<ul>
<li>èº«ä»½è¯å·</li>
</ul>
</li>
<li><p>è¿™äº›åˆ—æ ¹æ®ä¸šåŠ¡è¦æ±‚ï¼Œåˆ<strong>å…·æœ‰å”¯ä¸€æ€§çº¦æŸ</strong>ï¼šä»»æ„ä¸¤æ¡è®°å½•çš„è¯¥å­—æ®µä¸èƒ½ç›¸åŒ</p>
<ul>
<li>æ­¤æ—¶ï¼Œå¯ä»¥ä¸ºè¯¥åˆ—æ·»åŠ ä¸€ä¸ªå”¯ä¸€ç´¢å¼•</li>
</ul>
</li>
<li><p>ä¾‹å¦‚ï¼Œå‡è®¾<code>students</code> è¡¨çš„ <code>name</code> ä¸èƒ½é‡å¤</p>
<ul>
<li><p>```mysql<br>ALTER TABLE students<br>ADD UNIQUE INDEX uni_name (name);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* é€šè¿‡å…³é”®å­—&#96;UNIQUE&#96; æ·»åŠ äº†å”¯ä¸€ç´¢å¼•</span><br><span class="line"></span><br><span class="line">* ä¹Ÿå¯ä»¥åªå¯¹æŸä¸€åˆ—æ·»åŠ ä¸€ä¸ª **å”¯ä¸€çº¦æŸ**ï¼Œè€Œä¸åˆ›å»º **å”¯ä¸€ç´¢å¼•**ï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;mysql</span><br><span class="line">    ALTER TABLE students</span><br><span class="line">    ADD CONSTRAINT uni_name UNIQUE (name);</span><br></pre></td></tr></table></figure></li>
<li><p>æ­¤æ—¶ï¼Œ<code>name</code> åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œä½†å…·æœ‰å”¯ä¸€æ€§ä¿è¯</p>
</li>
</ul>
</li>
<li><p>æ— è®ºæ˜¯å¦åˆ›å»ºç´¢å¼•ï¼Œå¯¹äºç”¨æˆ·å’Œåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œä½¿ç”¨å…³ç³»æ•°æ®åº“ä¸ä¼šæœ‰ä»»ä½•åŒºåˆ«</p>
<ul>
<li>å³ï¼Œå½“æˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæœ‰ç›¸åº”çš„ç´¢å¼•å¯ç”¨ï¼Œ<strong>æ•°æ®åº“ç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ä½¿ç”¨ç´¢å¼•æ¥æé«˜æŸ¥è¯¢æ•ˆç‡</strong>ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼ŒæŸ¥è¯¢ä¹Ÿèƒ½æ­£å¸¸æ‰§è¡Œï¼Œåªæ˜¯é€Ÿåº¦ä¼šå˜æ…¢ã€‚</li>
<li>å› æ­¤ï¼Œç´¢å¼•å¯ä»¥åœ¨ä½¿ç”¨æ•°æ®åº“çš„è¿‡ç¨‹ä¸­é€æ­¥ä¼˜åŒ–</li>
</ul>
</li>
</ul>
<h1 id="4-åœ¨çº¿-SQL"><a href="#4-åœ¨çº¿-SQL" class="headerlink" title="4 åœ¨çº¿ SQL"></a>4 åœ¨çº¿ SQL</h1><ul>
<li>ä¾¿äºåœ¨çº¿ç»ƒä¹ ï¼Œæä¾›çš„åœ¨çº¿è¿è¡Œ SQL çš„åŠŸèƒ½</li>
<li>åœ¨æµè§ˆå™¨é¡µé¢ è¿è¡Œ çš„ä¸€ä¸ª<code>JS</code> ç¼–å†™çš„å†…å­˜å‹SQLæ•°æ®åº“ <code>AlaSQL</code> <ul>
<li>ä¸å¿…è¿è¡Œ MySQL ç­‰å®é™…çš„æ•°æ®åº“è½¯ä»¶ï¼Œå³å¯åœ¨çº¿ç¼–å†™å¹¶æ‰§è¡Œ SQL è¯­å¥</li>
</ul>
</li>
</ul>
<h1 id="5-æŸ¥è¯¢æ•°æ®"><a href="#5-æŸ¥è¯¢æ•°æ®" class="headerlink" title="5 æŸ¥è¯¢æ•°æ®"></a>5 æŸ¥è¯¢æ•°æ®</h1><ul>
<li>å¯¹æ•°æ®åº“ æœ€å¸¸ç”¨çš„æ“ä½œ</li>
</ul>
<h2 id="å‡†å¤‡æ•°æ®"><a href="#å‡†å¤‡æ•°æ®" class="headerlink" title="å‡†å¤‡æ•°æ®"></a>å‡†å¤‡æ•°æ®</h2><ul>
<li><p>äº‹å…ˆå‡†å¤‡<code>students</code> å’Œ <code>classes</code> è¡¨</p>
<ul>
<li><p><code>students</code>è¡¨å­˜å‚¨äº†å­¦ç”Ÿä¿¡æ¯ï¼š</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">class_id</th>
<th align="left">name</th>
<th align="left">gender</th>
<th align="left">score</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">å°æ˜</td>
<td align="left">M</td>
<td align="left">90</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">å°çº¢</td>
<td align="left">F</td>
<td align="left">95</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">1</td>
<td align="left">å°å†›</td>
<td align="left">M</td>
<td align="left">88</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">1</td>
<td align="left">å°ç±³</td>
<td align="left">F</td>
<td align="left">73</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">2</td>
<td align="left">å°ç™½</td>
<td align="left">F</td>
<td align="left">81</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">2</td>
<td align="left">å°å…µ</td>
<td align="left">M</td>
<td align="left">55</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">2</td>
<td align="left">å°æ—</td>
<td align="left">M</td>
<td align="left">85</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left">3</td>
<td align="left">å°æ–°</td>
<td align="left">F</td>
<td align="left">91</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left">3</td>
<td align="left">å°ç‹</td>
<td align="left">M</td>
<td align="left">89</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left">3</td>
<td align="left">å°ä¸½</td>
<td align="left">F</td>
<td align="left">85</td>
</tr>
</tbody></table>
</li>
<li><p><code>classes</code>è¡¨å­˜å‚¨äº†ç­çº§ä¿¡æ¯ï¼š</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">name</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">ä¸€ç­</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">äºŒç­</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">ä¸‰ç­</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">å››ç­</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><ul>
<li><p><code>AlaSQL</code> æ˜¯<strong>å†…å­˜æ•°æ®åº“</strong>ï¼Œå’Œ<code>MySQL</code> çš„<strong>æŒä¹…åŒ–å­˜å‚¨</strong>ä¸åŒï¼Œå†…å­˜æ•°æ®åº“çš„è¡¨æ•°æ®åœ¨é¡µé¢åŠ è½½æ—¶å¯¼å…¥ï¼Œå¹¶ä¸”åªå­˜åœ¨äºæµè§ˆå™¨çš„å†…å­˜</p>
</li>
<li><p>ç”¨ MySQL ç»ƒä¹ ï¼š</p>
<ul>
<li>ä¸‹è½½<a target="_blank" rel="noopener" href="https://github.com/michaelliao/learn-sql/blob/master/mysql/init-test-data.sql">SQLè„šæœ¬</a></li>
<li>åœ¨å‘½ä»¤è¡Œè¿è¡Œï¼š<code>$ mysql -u root -p &lt; init-test-data.sql</code></li>
</ul>
</li>
<li><p>è‡ªåŠ¨åˆ›å»º<code>test</code> æ•°æ®åº“ï¼Œå¹¶ä¸”åœ¨<code>test</code> æ•°æ®åº“ä¸‹ï¼Œåˆ›å»º<code>students</code> å’Œ <code>classes</code> è¡¨ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–æ•°æ®</p>
</li>
<li><p>å¯¹ MySQL æ•°æ®åº“çš„ä¿®æ”¹éƒ½ä¼šä¿å­˜ï¼Œè‹¥å¸Œæœ›æ¢å¤åˆ°åˆå§‹çŠ¶æ€ï¼šå†æ¬¡è¿è¡Œï¼š<code>$ mysql -u root -p &lt; init-test-data.sql</code></p>
</li>
</ul>
<ul>
<li><p><strong>problem</strong>ï¼š<code>ERROR 1366 (HY000)</code></p>
<ul>
<li>solutionï¼šå¯¹äº<code>Win10</code>ï¼Œåªè¦å°†è„šæœ¬ç”¨<code>GBK</code> æ ¼å¼é‡æ–°ä¿å­˜ï¼Œå†ç”¨<code> CMD</code> è°ƒç”¨å³å¯</li>
</ul>
</li>
<li><p><code>mysql workbench</code> , MySQL çš„æ¡Œé¢é›†æˆç¯å¢ƒ, å¯è§†åŒ–MySQLæ•°æ®åº“è½¯ä»¶</p>
</li>
</ul>
<h2 id="åŸºæœ¬æŸ¥è¯¢"><a href="#åŸºæœ¬æŸ¥è¯¢" class="headerlink" title="åŸºæœ¬æŸ¥è¯¢"></a>åŸºæœ¬æŸ¥è¯¢</h2><ul>
<li>æŸ¥çœ‹å·²å­˜åœ¨çš„ æ•°æ®åº“ï¼š<code>mysql&gt; show databases;</code></li>
<li>åˆ‡æ¢æ•°æ®åº“ï¼š<code>use test;</code></li>
</ul>
<ul>
<li><p>æŸ¥è¯¢ æ•°æ®åº“è¡¨ ä¸­çš„æ•°æ®ï¼š</p>
<ul>
<li><code>SELECT * FROM &lt;è¡¨å&gt;</code> ï¼šæŸ¥è¯¢è¯¥è¡¨çš„æ‰€æœ‰æ•°æ®</li>
</ul>
</li>
<li><p><code>SELECT * FROM students</code></p>
<ul>
<li><code>SELECT</code> å…³é”®å­—ï¼šæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢</li>
<li><code>*</code> ï¼šæ‰€æœ‰åˆ—</li>
<li><code>FROM</code> ï¼šä»å“ªä¸ªè¡¨æŸ¥è¯¢</li>
</ul>
</li>
</ul>
<ul>
<li>å¯ä»¥ä½¿ç”¨<code>SELECT</code> è¯­å¥è®¡ç®—ï¼Œä½†ä¸æ˜¯ SQL çš„å¼ºé¡¹</li>
<li><code>SELECT</code> : åˆ¤æ–­å½“å‰åˆ°æ•°æ®åº“çš„è¿æ¥æ˜¯å¦æœ‰æ•ˆ<ul>
<li><code>SELECT 1;</code></li>
</ul>
</li>
</ul>
<h2 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h2><ul>
<li>SELECT å…³é”®å­— å¯ä»¥é€šè¿‡ <code>WHERE</code> æ¡ä»¶æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢ç»“æœ æ˜¯æ»¡è¶³ æŸ¥è¯¢æ¡ä»¶çš„è®°å½•<ul>
<li>è¯­æ³•ï¼š<code>SELECT * FROM &lt;è¡¨å&gt; WHERE æ¡ä»¶è¡¨è¾¾å¼</code></li>
<li>ä¾‹å¦‚<code>SELECT * FROM students WHERE score&gt;=80;</code></li>
<li>WHERE å…³é”®å­—åçš„ä¸ºæ¡ä»¶</li>
</ul>
</li>
</ul>
<h3 id="ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼"><a href="#ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼"></a>ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼</h3><ul>
<li><p>æ¡ä»¶è¡¨è¾¾å¼å¯ä»¥ç”¨ <code>&lt;æ¡ä»¶1&gt; AND &lt;æ¡ä»¶2&gt;</code> : æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶</p>
<ul>
<li>ä¾‹å¦‚åˆ¤æ–­ å³å¤§äº80åˆæ˜¯ç”·ç”Ÿï¼š<ul>
<li><code>WHERE score&gt;=80 AND gender=&#39;M&#39;</code></li>
<li>å­—ç¬¦ä¸²ç”¨ å•å¼•å·æ‹¬èµ·æ¥</li>
</ul>
</li>
</ul>
</li>
<li><p>æ¡ä»¶è¡¨è¾¾å¼å¯ä»¥ç”¨<code>&lt;æ¡ä»¶1&gt; AND &lt;æ¡ä»¶2&gt;</code>ï¼šæ»¡è¶³ä¸¤è€…ä¹‹ä¸€</p>
</li>
<li><p>æ¡ä»¶è¡¨è¾¾å¼å¯ä»¥ç”¨<code>NOT &lt;æ¡ä»¶&gt;</code>ï¼šä¸ç¬¦åˆè¯¥æ¡ä»¶çš„è®°å½•</p>
<ul>
<li>ä¾‹å¦‚ï¼šä¸æ˜¯äºŒç­çš„</li>
<li><code>WHERE NOT class_id = 2</code></li>
</ul>
</li>
<li><p><code>NOT class_id=2</code> ç­‰ä»·äº <code>class_id &lt;&gt; 2</code></p>
<ul>
<li><code>NOT</code> æŸ¥è¯¢ä¸å¸¸ç”¨</li>
</ul>
</li>
<li><p>ç»„åˆä¸‰ä¸ªä»¥ä¸Šçš„æ¡ä»¶ï¼šç”¨å°æ‹¬å·<code>()</code> æ¥è¯´æ˜å¦‚ä½•æ¡ä»¶è¿ç®—</p>
</li>
</ul>
<h3 id="å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼"><a href="#å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼"></a>å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼</h3><table>
<thead>
<tr>
<th align="left">æ¡ä»¶</th>
<th align="left">è¡¨è¾¾å¼ä¸¾ä¾‹1</th>
<th align="left">è¡¨è¾¾å¼ä¸¾ä¾‹2</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ä½¿ç”¨=åˆ¤æ–­ç›¸ç­‰</td>
<td align="left">score = 80</td>
<td align="left">name = â€˜abcâ€™</td>
<td align="left">å­—ç¬¦ä¸²éœ€è¦ç”¨å•å¼•å·æ‹¬èµ·æ¥</td>
</tr>
<tr>
<td align="left">ä½¿ç”¨&gt;åˆ¤æ–­å¤§äº</td>
<td align="left">score &gt; 80</td>
<td align="left">name &gt; â€˜abcâ€™</td>
<td align="left">å­—ç¬¦ä¸²æ¯”è¾ƒæ ¹æ®ASCIIç ï¼Œä¸­æ–‡å­—ç¬¦æ¯”è¾ƒæ ¹æ®æ•°æ®åº“è®¾ç½®</td>
</tr>
<tr>
<td align="left">ä½¿ç”¨&gt;=åˆ¤æ–­å¤§äºæˆ–ç›¸ç­‰</td>
<td align="left">score &gt;= 80</td>
<td align="left">name &gt;= â€˜abcâ€™</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">ä½¿ç”¨&lt;åˆ¤æ–­å°äº</td>
<td align="left">score &lt; 80</td>
<td align="left">name &lt;= â€˜abcâ€™</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">ä½¿ç”¨&lt;=åˆ¤æ–­å°äºæˆ–ç›¸ç­‰</td>
<td align="left">score &lt;= 80</td>
<td align="left">name &lt;= â€˜abcâ€™</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>ä½¿ç”¨&lt;&gt;åˆ¤æ–­ä¸ç›¸ç­‰</strong></td>
<td align="left">score &lt;&gt; 80</td>
<td align="left">name &lt;&gt; â€˜abcâ€™</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>ä½¿ç”¨LIKEåˆ¤æ–­ç›¸ä¼¼</strong></td>
<td align="left">name LIKE â€˜ab%â€™</td>
<td align="left">name LIKE â€˜%bc%â€™</td>
<td align="left">%è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œä¾‹å¦‚â€™ab%â€™å°†åŒ¹é…â€™abâ€™ï¼Œâ€™abcâ€™ï¼Œâ€™abcdâ€™</td>
</tr>
</tbody></table>
<h2 id="æŠ•å½±æŸ¥è¯¢"><a href="#æŠ•å½±æŸ¥è¯¢" class="headerlink" title="æŠ•å½±æŸ¥è¯¢"></a>æŠ•å½±æŸ¥è¯¢</h2><ul>
<li><code>SELECT * FROM &lt;è¡¨å&gt;</code> : è¿”å›çš„äºŒç»´è¡¨å’ŒåŸè¡¨ä¸€æ ·<ul>
<li><code>*</code> ï¼šæŸ¥è¯¢æ‰€æœ‰åˆ—</li>
</ul>
</li>
<li><code>SELECT åˆ—1ï¼Œåˆ—2 FROM ...</code> : ä»…åŒ…å«æŒ‡å®šåˆ—ï¼Œæˆä¸ºæŠ•å½±æŸ¥è¯¢</li>
</ul>
<ul>
<li><p>è¿™æ ·è¿”å›çš„ç»“æœé›† åªåŒ…å«äº†æŒ‡å®šçš„åˆ—ï¼Œå¹¶ä¸” ç»“æœé›† çš„åˆ—çš„æ˜¯é¡ºåºå¯ä»¥å’ŒåŸè¡¨ä¸ä¸€æ ·</p>
</li>
<li><p><code>SELECT åˆ—1 åˆ«å1ï¼Œåˆ—2 åˆ«å2 FROM ...</code> : ä¸ºæŒ‡å®šåˆ—èµ·åˆ«å</p>
</li>
</ul>
<ul>
<li>æŠ•å½±æŸ¥è¯¢ åŒæ ·å¯ä»¥ä½¿ç”¨ <code>WHERE</code> å…³é”®å­—ï¼š<ul>
<li>è¯­æ³•ï¼š<code>SELECT åˆ—1ï¼Œåˆ—2 FROM &lt;è¡¨å&gt; WHERE ..</code></li>
</ul>
</li>
</ul>
<h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><ul>
<li><p>ä½¿ç”¨  å…³é”®å­—<code>SELECT</code> æ—¶ï¼ŒæŸ¥è¯¢çš„ç»“æœé€šå¸¸æŒ‰ç…§<code>id</code> æ’åºï¼Œå³æ ¹æ® ä¸»é”® æ’åº</p>
</li>
<li><p>ä½¿ç”¨ å…³é”®å­—<code>ORDER BY åˆ—å (ASC)</code> : æ ¹æ®å…¶ä»–æ¡ä»¶æ­£åº, <code>ASC</code> å¯ä»¥çœç•¥</p>
<ul>
<li>ä¾‹å¦‚ï¼šæŒ‰ç…§æˆç»©ä»ä½åˆ°é«˜ï¼š</li>
<li><code>SELECT id,name,score FROM students ORDER BY score</code></li>
</ul>
</li>
<li><p>å¯ä»¥ç»™<code>ORDER BY</code> åŠ ä¸Šå…³é”®å­—<code>DESC</code> è¡¨ç¤ºå€’åºï¼šä»é«˜åˆ°ä½æ’åº</p>
<ul>
<li>ä¾‹å¦‚ï¼š<code>SELECT id,name,score FROM students ORDER BY score DESC</code></li>
</ul>
</li>
<li><p>åœ¨<code>ORDER BY</code> å…³é”®å­—åæ·»åŠ  åˆ—å ï¼šå…ˆæŒ‰ç…§ï¼Œå†æŒ‰ç…§ä¸‹ä¸€åˆ—æ’åº</p>
<ul>
<li>lä¾‹å¦‚ï¼šå…ˆæŒ‰ç…§åˆ†æ•°å€’åºï¼Œå†æŒ‰ç…§genderæ­£åº</li>
<li><code>ORDER BY score DESC,gender</code></li>
</ul>
</li>
</ul>
<ul>
<li>è‹¥æœ‰æ¡ä»¶<code>WHERE</code> , éœ€å°†<code>ORDER BY</code> è¯­å¥æ”¾äº <code>WHERE</code> å<ul>
<li>ä¾‹å¦‚ æŸ¥è¯¢ä¸€ç­çš„æˆç»©ï¼Œå¹¶æŒ‰ç…§å€’åº</li>
<li><code>SELECT * FROM students WHERE class_id = 1 ORDER BY score DESC;</code></li>
<li>è¿™æ ·çš„è¯ï¼Œå…ˆç­›é€‰æ»¡è¶³<code>WHERE</code> æ¡ä»¶çš„è®°å½•ï¼Œå†æ’åº</li>
</ul>
</li>
</ul>
<h2 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h2><ul>
<li><p>ä½¿ç”¨<code>SELECT</code> æŸ¥è¯¢æ—¶ï¼Œè‹¥ç»“æœé›† å¾ˆå¤§ï¼Œéœ€è¦åˆ†é¡µæ˜¾ç¤ºï¼Œæ¯æ¬¡æ˜¾ç¤º 100 æ¡</p>
</li>
<li><p>åˆ†é¡µ å®é™…ä¸Šæ˜¯ä» ç»“æœé›† ä¸­æˆªå– <code>M-N</code> æ¡è®°å½•</p>
</li>
<li><p>è¯­æ³•<code>LIMIT &lt;M&gt; OFFSET &lt;N&gt;</code></p>
</li>
<li><p>å…ˆä½¿ç”¨<code>SELECT</code> å…³é”®è¯æŸ¥è¯¢å‡ºç»“æœé›†ï¼Œå†ä½¿ç”¨<code>LIMIT</code> å…³é”®å­—æˆªå–è®°å½•</p>
<ul>
<li>ä¾‹å¦‚ï¼šå…ˆæŠŠå­¦ç”ŸæŒ‰æˆç»© å€’åºï¼Œå†æŠŠç»“æœé›† åˆ†é¡µï¼Œæ¯é¡µ ä¸‰æ¡è®°å½•ï¼Œ</li>
<li><code>LIMIT 3 OFFSET 0</code><ul>
<li><code>OFFSET 0</code>ä»ç»“æœé›† 0 å·è®°å½•å¼€å§‹ï¼Œ<code>LIMIT 3</code>æœ€å¤š 3 æ¡</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>åˆ†é¡µæŸ¥è¯¢çš„å…³é”®ï¼š</p>
<ul>
<li>é¦–å…ˆç¡®å®šæ¯é¡µéœ€è¦æ˜¾ç¤ºçš„è®°å½•æ•°é‡<code>PageSize</code></li>
<li>ç„¶åæ ¹æ®å½“å‰é¡µçš„ç´¢å¼•<code>PageIndex</code> ç¡®å®š<code>LIMIT</code> å’Œ <code>OFFSET</code> è®¾å®šçš„å€¼<ul>
<li><code>LIMIT</code> æ€»æ˜¯è®¾å®šä¸º <code>PageSize</code></li>
<li><code>OFFSET</code> æ€»æ˜¯è®¾å®šä¸º <code>PageSize*(PageIndex - 1)</code></li>
</ul>
</li>
</ul>
</li>
<li><p>åœ¨ MySQL ä¸­ï¼Œ<code>LIMIT 15 OFFSET 30</code> å¯ä»¥ç®€å†™æˆ<code>LIMIT 30,15</code></p>
</li>
</ul>
<h2 id="èšåˆæŸ¥è¯¢"><a href="#èšåˆæŸ¥è¯¢" class="headerlink" title="èšåˆæŸ¥è¯¢"></a>èšåˆæŸ¥è¯¢</h2><ul>
<li>SQL æä¾›äº†ä¸“é—¨çš„<strong>èšåˆå‡½æ•°</strong>ï¼š ç»Ÿè®¡æ€»æ•°ã€å¹³å‡æ•°ç­‰è®¡ç®—</li>
<li>ä½¿ç”¨ èšåˆå‡½æ•° è¿›è¡ŒæŸ¥è¯¢å°±æ˜¯ èšåˆæŸ¥è¯¢ï¼Œå¯ä»¥å¿«é€Ÿè·å¾—ç»“æœ</li>
</ul>
<ul>
<li><p><code>COUNT()</code> å‡½æ•°ï¼šæŸ¥è¯¢è¡¨ä¸­ ä¸€å…±å¤šå°‘è®°å½•</p>
<ul>
<li><code>SELECT COUNT(*) FROM students;</code><ul>
<li><code>COUNT(*)</code> è¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰åˆ—çš„è¡Œæ•°ï¼Œ</li>
<li>èšåˆçš„è®¡ç®—ç»“æœè™½ç„¶æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä½†æŸ¥è¯¢çš„ç»“æœä»ç„¶æ˜¯ä¸€ä¸ªäºŒç»´è¡¨ï¼ˆä¸€è¡Œä¸€åˆ—ï¼‰ï¼Œåˆ—åä¸º<code>COUNT(*)</code></li>
<li>é€šå¸¸ä½¿ç”¨èšåˆæŸ¥è¯¢æ—¶ï¼Œç»™åˆ—åä¸€ä¸ªåˆ«åï¼Œä¾¿äºå¤„ç†ç»“æœ</li>
</ul>
</li>
</ul>
</li>
<li><p><code>COUNT(*)</code> å…¶å®å’Œ <code>COUNT(åˆ—1)</code> æ•ˆæœä¸€æ ·</p>
</li>
<li><p>èšåˆæŸ¥è¯¢æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>WHERE</code> æ¡ä»¶å…³é”®å­—ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„è®°å½•æ¡æ•°</p>
</li>
</ul>
<ul>
<li><p>é™¤äº†<code>COUNT()</code> SQL è¿˜æä¾›äº†å…¶ä»–èšåˆå‡½æ•°ï¼š</p>
<ul>
<li><table>
<thead>
<tr>
<th align="left">å‡½æ•°</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">SUM</td>
<td align="left">è®¡ç®—æŸä¸€åˆ—çš„åˆè®¡å€¼ï¼Œè¯¥åˆ—å¿…é¡»ä¸ºæ•°å€¼ç±»å‹</td>
</tr>
<tr>
<td align="left">AVG</td>
<td align="left">è®¡ç®—æŸä¸€åˆ—çš„å¹³å‡å€¼ï¼Œè¯¥åˆ—å¿…é¡»ä¸ºæ•°å€¼ç±»å‹</td>
</tr>
<tr>
<td align="left">MAX</td>
<td align="left">è®¡ç®—æŸä¸€åˆ—çš„æœ€å¤§å€¼</td>
</tr>
<tr>
<td align="left">MIN</td>
<td align="left">è®¡ç®—æŸä¸€åˆ—çš„æœ€å°å€¼</td>
</tr>
</tbody></table>
</li>
<li><p>æ³¨æ„ï¼š<code>MAX()</code> å’Œ <code>MIN</code> å‡½æ•°ä¸é™äºæ•°å€¼ç±»å‹</p>
</li>
</ul>
</li>
<li><p>ä¾‹å¦‚ï¼Œè®¡ç®—ç”·ç”Ÿå¹³å‡æˆç»©ï¼š</p>
<ul>
<li><code>SELECT AVG(score) average FROM students WHERE gender=&#39;M&#39;;</code></li>
</ul>
</li>
</ul>
<ul>
<li>æ³¨æ„ï¼šè‹¥èšåˆæŸ¥è¯¢çš„ <code>WHERE</code> æ¡ä»¶å…³é”®å­—æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•æ•°æ®ï¼Œ<ul>
<li><code>COUNT()</code> è¿”å›0</li>
<li><code>SUM(),AVG(),MAX(),MIN()</code> è¿”å›<code>NULL</code> </li>
</ul>
</li>
</ul>
<h3 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h3><ul>
<li><p>å¯¹äº <strong>èšåˆæŸ¥è¯¢</strong>ï¼ŒSQL æä¾›äº† <strong>åˆ†ç»„èšåˆ</strong> çš„åŠŸèƒ½</p>
</li>
<li><p>ä½¿ç”¨å…³é”®å­— <code>GROUP BY åˆ—å</code></p>
<ul>
<li>æ‰§è¡Œ SELECT è¯­å¥æ—¶ï¼Œä¼šå…ˆæŠŠè®°å½•æŒ‰ç…§<code>åˆ—å</code> åˆ†ç»„ï¼Œç„¶åå†åˆ†åˆ«è®¡ç®—</li>
</ul>
</li>
<li><p>å¯ä»¥ç»™åˆ†ç»„èšåˆçš„ç»“æœé›† åŠ ä¸Šå¯¹åº”çš„åˆ—å€¼ï¼š</p>
<ul>
<li><code>SELECT class_id, COUNT(*) num FROM students GROUP BY class_id;</code></li>
</ul>
</li>
<li><p>æ³¨æ„ï¼šä¸èƒ½å°†å…¶ä»–åˆ—æ”¾å…¥ç»“æœé›†ä¸­ï¼Œå› ä¸ºä¸èƒ½å°†å¤šä¸ªå€¼æ”¾å…¥åŒä¸€è¡Œè®°å½•ä¸­</p>
</li>
</ul>
<ul>
<li>å¯ä»¥ä½¿ç”¨å¤šä¸ªåˆ—è¿›è¡Œåˆ†ç»„ï¼š<ul>
<li>ä¾‹å¦‚ï¼šç»Ÿè®¡å„ç­çš„ç”·ç”Ÿå’Œå¥³ç”Ÿï¼š</li>
<li><code>SELECT class_id,gender,COUNT(*) FROM students GROUP BY class_id,gender;</code></li>
</ul>
</li>
</ul>
<h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ul>
<li>æŸ¥è¯¢å‡ºæ¯ä¸ªç­çº§çš„å¹³å‡åˆ†</li>
<li><code>SELECT class_id,AVG(score) average FROM students GROUP BY class_id;</code></li>
</ul>
<ul>
<li>æŸ¥è¯¢å‡º æ¯ä¸ªç­çº§ç”·ç”Ÿå¥³ç”Ÿçš„å¹³å‡åˆ†</li>
<li><code>SELECT class_id,gender,AVG(score) FROM students GROUP BY class_id,gender;</code></li>
</ul>
<h2 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h2><ul>
<li><p><code>SELECT</code> å…³é”®å­—å¯ä»¥ä»å¤šå¼ è¡¨åŒæ—¶æŸ¥è¯¢å¯»æ•°æ®ï¼ŒåŒæ—¶ä»<code>students</code> å’Œ<code>classes</code> è¡¨çš„<strong>ä¹˜ç§¯</strong></p>
<ul>
<li>è¯­æ³•ï¼š<code>SELECT * FROM &lt;è¡¨1&gt;, &lt;è¡¨2&gt;</code></li>
</ul>
</li>
<li><p>ä¸€æ¬¡æŸ¥è¯¢ä¸¤ä¸ªè¡¨ï¼ŒæŸ¥è¯¢çš„ç»“æœä¹Ÿæ˜¯ ä¸€ä¸ªäºŒç»´è¡¨ï¼Œæ˜¯ä¸¤ä¸ªè¡¨çš„ä¹˜ç§¯</p>
<ul>
<li>è¿”å›çš„åˆ—æ•°æ˜¯ä¸¤ä¸ªè¡¨ä¹‹å’Œï¼Œè¿”å›çš„è¡Œæ•°æ˜¯ä¸¤ä¸ªè¡Œæ•°ä¹‹ç§¯</li>
</ul>
</li>
<li><p>å¤šè¡¨æŸ¥è¯¢ ï¼š åˆç§°<code>ç¬›å¡å°”æŸ¥è¯¢</code></p>
<ul>
<li>éœ€è¦æ³¨æ„ï¼šè¿”å›çš„è¡Œæ•°</li>
<li>å¹¶ä¸”åˆ—çš„åç§°å¯èƒ½é‡å¤</li>
</ul>
</li>
<li><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æŠ•å½±æŸ¥è¯¢æ¥ç»™åˆ—èµ·åˆ«åï¼š</p>
<ul>
<li><code>SELECT students.id sid, classes.id cid FROM students,classes;</code></li>
</ul>
</li>
</ul>
<ul>
<li>å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦ä½¿ç”¨<code>è¡¨å.åˆ—å</code> å¼•ç”¨æŒ‡å®šåˆ— å’Œ ä¸ºå…¶è®¾å®šåˆ«å</li>
<li>è¿˜å¯ä»¥ä¸ºè¡¨è®¾ç½®åˆ«åï¼š<code>SELECT students.id sid, classes.id cid FROM students s, classes c;</code></li>
</ul>
<ul>
<li>å¤šè¡¨æŸ¥è¯¢ å¯ä»¥æ·»åŠ <code>WHERE</code> æ¡ä»¶</li>
<li><code>SELECT s.id sid, c.id cid FROM students s, classes c WHERE s.gender = &quot;M&quot; AND c.id = 1;</code></li>
</ul>
<h2 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h2><ul>
<li><p>è¿æ¥æŸ¥è¯¢ æ˜¯å¦ä¸€ç§ç±»å‹çš„å¤šè¡¨æŸ¥è¯¢ï¼Œ</p>
</li>
<li><p>å¯¹å¤šä¸ªè¡¨è¿›è¡Œ<code>JOIN</code> è¿ç®—</p>
<ul>
<li>å…ˆç¡®å®šä¸€ä¸ªä¸»è¡¨ä½œä¸ºç»“æœé›†ï¼Œç„¶åå°†å…¶ä»–è¡¨ é€‰æ‹©æ€§åœ° <code>è¿æ¥</code> åˆ°ä¸»è¡¨ç»“æœé›†ä¸Š</li>
</ul>
</li>
<li><p>é€‰å‡º<code>students</code> ä¸­æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ï¼š</p>
<ul>
<li><code>SELECT s.id, s.name, ... FROM students s;</code></li>
</ul>
</li>
</ul>
<ul>
<li><p>å­˜æ”¾ç­çº§åç§°çš„ <code>name</code> å­˜åœ¨<code>classes</code> è¡¨ä¸­ï¼Œåªæœ‰æ ¹æ®<code>students</code> çš„<code>classes_id</code> æ‰¾åˆ°<code>classes</code>ä¸­å¯¹åº”çš„è®°å½•ï¼Œå†å–å‡º<code>name</code>åˆ—ï¼Œæ‰èƒ½è·å¾—ç­çº§åç§°</p>
</li>
<li><p>å¯ä»¥ä½¿ç”¨<code>INNER JOIN</code>æ¥å®ç°</p>
<ul>
<li><code>SELECT s.id, s.class_id, c.name class_name FROM students s INNER JOIN classes c ON s.class_id = c.id</code></li>
</ul>
</li>
<li><p><code>INNER JOIN</code> è¯­æ³•ï¼š</p>
<ul>
<li>å…ˆç¡®å®šä¸»è¡¨ï¼Œ<code>FROM è¡¨1</code></li>
<li>ç¡®å®šè¦è¿æ¥çš„è¡¨ï¼Œ<code>INNER JOIN è¡¨2</code></li>
<li>ç¡®å®šè¿æ¥æ¡ä»¶ï¼š<code>ON æ¡ä»¶</code></li>
<li>å¯é€‰ï¼š<code>WHERE</code>, <code>ORDER BY</code></li>
</ul>
</li>
</ul>
<ul>
<li><code>OUTER JOIN</code><ul>
<li><code>INNER JOIN</code><ul>
<li>åªè¿”å›åŒæ—¶å­˜åœ¨ä¸¤è¡¨çš„è¡Œæ•°æ®</li>
</ul>
</li>
<li><code>RIGHT OUTER JOIN</code><ul>
<li>è¿”å›å³è¡¨éƒ½å­˜åœ¨çš„è¡Œï¼Œè‹¥è®°å½•ä»…åœ¨ä¸€è¡Œå­˜åœ¨ï¼Œåˆ™ç»“æœé›†ä¸­ä¼šä»¥<code>NULL</code>å¡«å……</li>
</ul>
</li>
<li><code>LEFT OUTER JOIN</code><ul>
<li>è¿”å›å·¦è¡¨éƒ½å­˜åœ¨çš„è®°å½•ï¼Œ</li>
</ul>
</li>
<li><code>FULL OUTER JOIN</code><ul>
<li>è¿”å›ä¸¤å¼ è¡¨éƒ½å­˜åœ¨çš„è®°å½•ï¼Œè‡ªåŠ¨å°†å¯¹æ–¹ä¸å­˜åœ¨çš„è®°å½•å¡«å……ä¸º<code>NULL</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="6-ä¿®æ”¹æ•°æ®"><a href="#6-ä¿®æ”¹æ•°æ®" class="headerlink" title="6 ä¿®æ”¹æ•°æ®"></a>6 ä¿®æ”¹æ•°æ®</h1><ul>
<li>å¯¹å…³ç³»æ•°æ®åº“çš„åŸºæœ¬æ“ä½œï¼š<strong>å¢åˆ æ”¹æŸ¥</strong><ul>
<li><code>CRUD</code> : Createã€ Retrieveã€Updateã€Delete</li>
<li>æŸ¥è¯¢ï¼š<code>SELECT</code></li>
</ul>
</li>
<li>å¢åˆ æ”¹ï¼š<ul>
<li><code>INSERT</code>: æ’å…¥æ–°è®°å½•</li>
<li><code>UPDATE</code>: æ›´æ–°å·²æœ‰è®°å½•</li>
<li><code>DELETE</code>: åˆ é™¤å·²æœ‰è®°å½•</li>
</ul>
</li>
</ul>
<h2 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h2><ul>
<li><p><code>INSERT</code> è¯­å¥ï¼šå‘æ•°æ®åº“è¡¨ æ’å…¥ä¸€æ¡æ–°è®°å½•</p>
</li>
<li><p><code>INSERT</code>åŸºæœ¬è¯­æ³•ï¼š<code>INSERT INTO è¡¨å (å­—æ®µ1ï¼Œå­—æ®µ2...) VALUES (å€¼1ï¼Œå€¼2...)</code></p>
</li>
<li><p>å‘<code>students</code>æ’å…¥ä¸€æ¡æ–°è®°å½•ï¼š</p>
<ul>
<li>å…ˆåˆ—ä¸¾å‡ºéœ€è¦æ’å…¥çš„å­—æ®µå</li>
<li>å†åœ¨<code>VALUES</code> å­å¥ä¸­ä¾æ¬¡å†™å‡ºå¯¹åº”å­—æ®µçš„å€¼</li>
</ul>
</li>
<li><p>ä¾‹å¦‚ <code>INSERT INTO students (class_id, name, gender, score) VALUES (2, &#39;å¤§ç‰›&#39;, &#39;M&#39;, 80);</code></p>
</li>
</ul>
<ul>
<li><code>id</code> å­—æ®µæ˜¯ä¸€ä¸ª è‡ªå¢ä¸»é”®ï¼Œä¸éœ€è¦åˆ—ä¸º æ®µåç§°</li>
<li><strong>åŸºæœ¬è¯­æ³•</strong>ï¼šå­—æ®µå éœ€è¦å’Œ å€¼ ä¸€ä¸€å¯¹åº”</li>
<li>ä¸€æ¬¡æ€§æ·»åŠ å¤šæ¡è®°å½•ï¼šåœ¨<code>VALUES</code>å­å¥æŒ‡å®šå¤šä¸ªè®°å½•å€¼ï¼Œæ¯ä¸ªè®°å½•ç”±<code>(...)</code>åŒ…å«</li>
</ul>
<h2 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h2><ul>
<li><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š<code>UPDATE è¡¨å SET å­—æ®µ1=å€¼1ï¼Œå­—æ®µ2=å€¼2... WHERE ... ; </code></p>
</li>
<li><p>ä¾‹å¦‚ï¼šæ›´æ–°<code>students</code>è¡¨ä¸­<code>id=1</code>çš„è®°å½•çš„<code>name</code>å’Œ<code>score</code>è¿™ä¸¤ä¸ªå­—æ®µ</p>
<ul>
<li><code>UPDATE students SET name=&#39;å¤§ç‰›&#39;, score=6 WHERE id=1</code></li>
</ul>
</li>
<li><p>åœ¨<code>UPDATE</code> è¯­å¥ä¸­ï¼Œæ›´æ–°å­—æ®µæ—¶å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ï¼š<code>UPDATE students SET score=score+10 WHERE score&lt;80;</code></p>
</li>
<li><p>å½“æ²¡æœ‰<code>WHERE</code> å…³é”®å­—æ—¶ï¼Œæ›´æ–°æ‰€æœ‰è®°å½•</p>
</li>
</ul>
<h3 id="MySQL-1"><a href="#MySQL-1" class="headerlink" title="MySQL"></a>MySQL</h3><ul>
<li>åœ¨ä½¿ç”¨ MySQL è¿™ç±»çœŸæ­£çš„å…³ç³»æ•°æ®åº“æ—¶ï¼Œ<code>UPDATE</code> ä¼šè¿”å›æ›´æ–°çš„è¡Œæ•°ä»¥åŠ<code>WHERE</code> æ¡ä»¶åŒ¹é…çš„è¡Œæ•°</li>
</ul>
<h2 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h2><ul>
<li><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š <code>DELETE FROM student WHERE ...</code></p>
</li>
<li><p>åˆ é™¤<code>students</code> è¡¨ä¸­<code>id=1</code>çš„è®°å½•ï¼š</p>
<ul>
<li><code>DELETE FROM students WHERE id=1;</code></li>
</ul>
</li>
<li><p>ä¸å¸¦<code>WHERE </code> è¯­å¥ï¼šåˆ é™¤æ•´ä¸ªè¡¨çš„æ•°æ®</p>
</li>
</ul>
<h3 id="MySQL-2"><a href="#MySQL-2" class="headerlink" title="MySQL"></a>MySQL</h3><ul>
<li><code>DELETE</code> è¯­å¥ä¼šè¿”å›åˆ é™¤çš„è¡Œæ•°ä»¥åŠ<code>WHERE</code> åŒ¹é…çš„è¡Œæ•°</li>
</ul>
<h1 id="7-MySQL"><a href="#7-MySQL" class="headerlink" title="7 MySQL"></a>7 MySQL</h1><ul>
<li><p>MySQLå®‰è£…ä¹‹åï¼š</p>
<ul>
<li><code>MySQL Server</code> ,å³çœŸæ­£çš„ MySQL æœåŠ¡å™¨</li>
<li><code>MySQL Client</code> , å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œå¯ä»¥é€šè¿‡<code>MySQL Client</code> ç™»å½• MySQLï¼Œè¾“å…¥SQLè¯­å¥å¹¶æ‰§è¡Œ</li>
</ul>
</li>
<li><p><code>MySQL Server</code> å’Œ <code>MySQL Client</code> å…³ç³»ï¼š</p>
<ul>
<li>```ascii<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  SQL   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ MySQL Client â”‚â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ MySQL Server â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  TCP   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* &#96;MySQL Client&#96; ä¸­è¾“å…¥çš„SQLè¯­å¥é€šè¿‡TCPè¿æ¥å‘é€åˆ°MySQL Server</span><br><span class="line">  * é»˜è®¤ç«¯å£å· 3306</span><br><span class="line">  * å³å‘é€åˆ°æœ¬æœºMySQL Server , åœ°å€&#96;127.0.0.1:3306&#96;</span><br><span class="line"></span><br><span class="line">* ä¹Ÿå¯ä»¥åªå®‰è£…&#96;MySQL Client&#96; ï¼Œç„¶åè¿æ¥åˆ°è¿œç¨‹&#96;MySQL Server&#96; </span><br><span class="line">  * å‡è®¾ è¿œç¨‹&#96;MySQL Server&#96; çš„ IP åœ°å€&#96;10.0.1.99&#96;, é‚£ä¹ˆå¯ä»¥ä½¿ç”¨&#96;-h&#96;æŒ‡å®š IP æˆ– åŸŸå</span><br><span class="line">    * &#96;mysql -h 10.0.1.99 -u root -p&#96;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## ç®¡ç† MySQL</span><br><span class="line"></span><br><span class="line">* ç®¡ç† MySQLï¼Œå¯ä»¥ä½¿ç”¨ **å¯è§†åŒ–å›¾å½¢ç•Œé¢è½¯ä»¶**  &#96;MySQL Workbench&#96;</span><br><span class="line">  * ç”¨å¯è§†åŒ–çš„æ–¹å¼ æŸ¥è¯¢ã€åˆ›å»ºã€ä¿®æ”¹ æ•°æ®åº“è¡¨</span><br><span class="line"></span><br><span class="line">* &#96;Workbench&#96; å¯¹MySQLçš„æ“ä½œä¾ç„¶æ˜¯å‘é€ SQL è¯­å¥å¹¶æ‰§è¡Œï¼Œ</span><br><span class="line">  * Workbench å’Œ Clientå‘½ä»¤è¡Œéƒ½æ˜¯å®¢æˆ·ç«¯ï¼Œå’Œ MySQL äº¤äº’ï¼Œå”¯ä¸€çš„æ¥å£å°±æ˜¯ SQL</span><br><span class="line">* è™½ç„¶å¯ä»¥ä½¿ç”¨&#96;MySQL Workbench&#96; å›¾å½¢ç•Œé¢æ¥ç›´æ¥ç®¡ç† MySQL</span><br><span class="line">  * ä¸€èˆ¬ï¼Œé€šè¿‡&#96;SSH&#96;è¿œç¨‹è¿æ¥æ—¶ï¼Œåªèƒ½ä½¿ç”¨SQLå‘½ä»¤</span><br><span class="line"></span><br><span class="line">### æ•°æ®åº“</span><br><span class="line"></span><br><span class="line">* åœ¨ä¸€ä¸ªè¿è¡Œ MySQL çš„æœåŠ¡å™¨ä¸Šï¼Œå®é™…ä¸Šå¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“&#96;Database&#96;</span><br><span class="line">  * åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ï¼š&#96;SHOW DATABASES;&#96;</span><br><span class="line"></span><br><span class="line">* &#96;information_schema&#96;, &#96;mysql&#96;, &#96;performance_schema&#96; å’Œ &#96;sys&#96; æ˜¯ç³»ç»Ÿåº“ï¼Œä¸è¦å»æ”¹åŠ¨</span><br><span class="line"></span><br><span class="line">* åˆ›å»ºæ–°æ•°æ®åº“ï¼š&#96;CREATE DATABASE test;&#96;</span><br><span class="line"></span><br><span class="line">* åˆ é™¤ä¸€ä¸ªæ•°æ®åº“&#96;DROP DATABASE test;&#96;</span><br><span class="line"></span><br><span class="line">* åˆ‡æ¢ä¸ºå½“å‰æ•°æ®åº“&#96;USE test;&#96;</span><br><span class="line"></span><br><span class="line">### è¡¨</span><br><span class="line"></span><br><span class="line">* åˆ—å‡ºå½“å‰æ•°æ®åº“çš„ **æ‰€æœ‰è¡¨**ï¼š &#96;SHOW TABLES;&#96;</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;mysql</span><br><span class="line">    +----------------+</span><br><span class="line">    | Tables_in_test |</span><br><span class="line">    +----------------+</span><br><span class="line">    | classes        |</span><br><span class="line">    | students       |</span><br><span class="line">    +----------------+</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æŸ¥çœ‹<strong>ä¸€ä¸ªè¡¨çš„ç»“æ„</strong>ï¼š<code>DESC students;</code></p>
<ul>
<li><p>```mysql<br>+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”â€”â€”â€”-+<br>| Field    | Type         | Null | Key | Default | Extra          |<br>+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”â€”â€”â€”-+<br>| id       | bigint       | NO   | PRI | NULL    | auto_increment |<br>| class_id | bigint       | NO   |     | NULL    |                |<br>| name     | varchar(100) | NO   |     | NULL    |                |<br>| gender   | varchar(1)   | NO   |     | NULL    |                |<br>| score    | int          | NO   |     | NULL    |                |<br>+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”â€”â€”â€”-+  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">* æŸ¥çœ‹ **åˆ›å»ºè¡¨** çš„SQLè¯­å¥ï¼š&#96;SHOW CREATE TABLE students;&#96;</span><br><span class="line">* **åˆ›å»ºè¡¨**ä½¿ç”¨&#96;CREATE TABLE&#96;</span><br><span class="line">* **åˆ é™¤è¡¨**ä½¿ç”¨&#96;DROP TABLE&#96;</span><br><span class="line">* **ä¿®æ”¹è¡¨**</span><br><span class="line">  * ç»™&#96;students&#96;è¡¨æ–°å¢ä¸€åˆ—&#96;birth&#96; : &#96;ALTER TABLE students ADD COLUMN birth VARCHAR(10) NOT NULL;&#96;</span><br><span class="line">* **ä¿®æ”¹&#96;birth&#96; åˆ—ï¼Œ**</span><br><span class="line">  * å°†åˆ—åæ”¹ä¸º&#96;birthday&#96;, ç±»å‹æ”¹ä¸º&#96;VARCHAR(20)&#96; : &#96;ALTER TABLE students CHANGE COLUMN birth birthday VARCHAR(20) NOT NULL;&#96;</span><br><span class="line"></span><br><span class="line">* **åˆ é™¤åˆ—ï¼š**</span><br><span class="line">  * &#96;ALTER TABLE students DROP COLUMN birthday;&#96;</span><br><span class="line"></span><br><span class="line">### é€€å‡ºMySQL</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨&#96;EXIT&#96;å‘½ä»¤é€€å‡º MySQL</span><br><span class="line">  * ä»…ä»…æ–­å¼€äº† å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼ŒMySQL æœåŠ¡å™¨ä»ç„¶åœ¨è¿è¡Œ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## å®ç”¨ SQL è¯­å¥</span><br><span class="line"></span><br><span class="line">### æ’å…¥æˆ–æ›¿æ¢</span><br><span class="line"></span><br><span class="line">* æ’å…¥ä¸€æ¡æ–°çš„è®°å½•ï¼Œè‹¥è®°å½•å·²ç»å­˜åœ¨ï¼Œå°±å…ˆåˆ é™¤åŸçºªå½•ï¼Œå†æ’å…¥æ–°è®°å½•</span><br><span class="line">  * ä¸å¿…å…ˆæŸ¥è¯¢</span><br><span class="line">* &#96;REPLACE&#96; è¯­æ³•ï¼š&#96;INSERT INTO ... VALUES&#96;</span><br><span class="line">  * &#96;REPLACE INTO students (id,class_id,name,gender,score) VALUES (1,1,&#39;xiaoming&#39;,&#39;F&#39;,99);&#96;</span><br><span class="line"></span><br><span class="line">### æ’å…¥æˆ–æ›´æ–°</span><br><span class="line"></span><br><span class="line">* æ’å…¥ä¸€æ¡æ–°è®°å½•ï¼Œè‹¥è®°å½•å·²ç»å­˜åœ¨ï¼Œå°±æ›´æ–°è¯¥è®°å½•</span><br><span class="line"></span><br><span class="line">* &#96;INSERT INTO ... ON DUPLICATE KEY UPDATE ...&#96;</span><br><span class="line"></span><br><span class="line">* &#96;&#96;&#96;mysql</span><br><span class="line">  INSERT INTO students (id, class_id, name, gender, score) VALUES (1, 1, &#39;å°æ˜&#39;, &#39;F&#39;, 99) ON DUPLICATE KEY UPDATE name&#x3D;&#39;å°æ˜&#39;, gender&#x3D;&#39;F&#39;, score&#x3D;99;</span><br></pre></td></tr></table></figure></li>
<li><p>è‹¥<code>id=1</code>ä¸å­˜åœ¨ï¼Œæ’å…¥æ–°è®°å½•ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™ç”±<code>UPDATE</code>æ›´æ–°å­—æ®µ</p>
</li>
</ul>
</li>
</ul>
<h3 id="æ’å…¥æˆ–å¿½ç•¥"><a href="#æ’å…¥æˆ–å¿½ç•¥" class="headerlink" title="æ’å…¥æˆ–å¿½ç•¥"></a>æ’å…¥æˆ–å¿½ç•¥</h3><ul>
<li><p>æ’å…¥ä¸€æ¡æ–°æ•°æ®ï¼Œè‹¥å·²ç»å­˜åœ¨ï¼Œå°±å¿½ç•¥</p>
</li>
<li><p><code>INSERT IGNORE INTO...</code></p>
<ul>
<li>```mysql<br>INSERT IGNORE INTO students (id, class_id, name, gender, score) VALUES (1, 1, â€˜å°æ˜â€™, â€˜Fâ€™, 99);<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### å¿«ç…§</span><br><span class="line"></span><br><span class="line">* å¯¹ä¸€ä¸ªè¡¨è¿›è¡Œå¿«ç…§ï¼Œå³ å¤åˆ¶ä¸€ä»½å½“å‰è¡¨çš„æ•°æ®åˆ°ä¸€ä¸ªæ–°è¡¨ï¼Œç»“åˆ&#96;CREATE TABLE&#96; å’Œ &#96;SELECT&#96;</span><br><span class="line">* &#96;CREATE TABLE students_of_class1 SELECT * FROM students WHERE class_id&#x3D;1;&#96;</span><br><span class="line">* åˆ›å»ºçš„è¡¨ç»“æ„å’ŒåŸè¡¨ä¸€æ ·</span><br><span class="line"></span><br><span class="line">### å†™å…¥æŸ¥è¯¢ç»“æœé›†</span><br><span class="line"></span><br><span class="line">* å°† æŸ¥è¯¢ç»“æœé›† å†™å…¥è¡¨ä¸­ï¼Œç»“åˆ&#96;INSERT&#96; å’Œ &#96;SELECT&#96;</span><br><span class="line"></span><br><span class="line">* ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªç»Ÿè®¡æˆç»©çš„è¡¨&#96;statistics&#96;ï¼Œè®°å½•å„ç­çš„å¹³å‡æˆç»©ï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;sql</span><br><span class="line">    CREATE TABLE statistics (</span><br><span class="line">        id BIGINT NOT NULL AUTO_INCREMENT,</span><br><span class="line">        class_id BIGINT NOT NULL,</span><br><span class="line">        average DOUBLE NOT NULL,</span><br><span class="line">        PRIMARY KEY (id)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å†™å…¥å„ç­çš„å¹³å‡æˆç»©ï¼š</p>
<ul>
<li>```sql<br>INSERT INTO statistics (class_id, average) SELECT class_id, AVG(score) FROM students GROUP BY class_id;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### å¼ºåˆ¶ä½¿ç”¨æŒ‡å®šç´¢å¼•</span><br><span class="line"></span><br><span class="line">* æŸ¥è¯¢æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†ææŸ¥è¯¢è¯­å¥ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªæœ€åˆé€‚çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">* æœ‰æ—¶ï¼Œå¹¶ä¸ä¸€å®šæ˜¯æœ€ä¼˜ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨&#96;FORCE INDEX&#96; å¼ºåˆ¶æŸ¥è¯¢ä½¿ç”¨æŒ‡å®šçš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;sql</span><br><span class="line">    SELECT * FROM students FORCE INDEX (idx_class_id) WHERE class_id &#x3D; 1 ORDER BY id DESC;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/17/LinuxLearning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/17/LinuxLearning/" itemprop="url">LinuxLearning</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-04-17T09:55:13+08:00">
                2021-04-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-01T10:16:14+08:00">
                2021-05-01
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">-Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1.7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="LinuxLearning"><a href="#LinuxLearning" class="headerlink" title="LinuxLearning"></a>LinuxLearning</h1><p>[TOC]</p>
<h1 id="0-Linux-ç³»ç»Ÿç®€ä»‹"><a href="#0-Linux-ç³»ç»Ÿç®€ä»‹" class="headerlink" title="0 Linux ç³»ç»Ÿç®€ä»‹"></a>0 Linux ç³»ç»Ÿç®€ä»‹</h1><h2 id="0-0-å†å²"><a href="#0-0-å†å²" class="headerlink" title="0.0 å†å²"></a>0.0 å†å²</h2><ul>
<li>æ“ä½œç³»ç»Ÿå§‹äºäºŒåä¸–çºªäº”åå¹´ä»£ï¼Œå½“æ—¶çš„æ“ä½œç³»ç»Ÿèƒ½è¿è¡Œæ‰¹å¤„ç†ç¨‹åºã€‚æ‰¹å¤„ç†ç¨‹åºä¸éœ€è¦ç”¨æˆ·çš„äº¤äº’ï¼Œå®ƒä»æ–‡ä»¶æˆ–è€…ç©¿å­”å¡ç‰‡è¯»å–æ•°æ®ï¼Œç„¶åè¾“å‡ºåˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ‰“å°æœº</li>
<li>äºŒåä¸–çºªå…­åå¹´ä»£åˆï¼Œäº¤äº’å¼æ“ä½œç³»ç»Ÿå¼€å§‹æµè¡Œã€‚å®ƒä¸ä»…ä»…å¯ä»¥äº¤äº’ï¼Œè¿˜èƒ½ä½¿å¤šä¸ªç”¨æˆ·ä»ä¸åŒçš„ç»ˆç«¯åŒæ—¶æ“ä½œä¸»æœºã€‚è¿™æ ·çš„æ“ä½œç³»ç»Ÿè¢«ç§°ä½œåˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„å‡ºç°å¯¹æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿæ˜¯ä¸ªæå¤§çš„æŒ‘æˆ˜ã€‚</li>
<li>UNIX æœ€åˆå…è´¹å‘å¸ƒå¹¶å› æ­¤åœ¨å¤§å­¦é‡Œå—åˆ°æ¬¢è¿ã€‚åæ¥ï¼ŒUNIX å®ç°äº† TCP/IP åè®®æ ˆ</li>
<li>Linux æœ¬èº«åªæ˜¯æ“ä½œç³»ç»Ÿçš„å†…æ ¸ã€‚å†…æ ¸æ˜¯ä½¿å…¶å®ƒç¨‹åºèƒ½å¤Ÿè¿è¡Œçš„åŸºç¡€ã€‚å®ƒå®ç°äº†å¤šä»»åŠ¡å’Œç¡¬ä»¶ç®¡ç†ï¼Œç”¨æˆ·æˆ–è€…ç³»ç»Ÿç®¡ç†å‘˜äº¤äº’è¿è¡Œçš„æ‰€æœ‰ç¨‹åºå®é™…ä¸Šéƒ½è¿è¡Œåœ¨å†…æ ¸ä¹‹ä¸Š<ul>
<li>å…¶ä¸­æœ‰äº›ç¨‹åºæ˜¯å¿…éœ€çš„ï¼Œæ¯”å¦‚è¯´ï¼Œå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼ˆshellï¼‰ï¼Œå®ƒç”¨äºç”¨æˆ·äº¤äº’å’Œç¼–å†™ shell è„šæœ¬ã€‚</li>
</ul>
</li>
<li>è®¸å¤šé‡è¦çš„è½¯ä»¶ï¼ŒåŒ…æ‹¬ C ç¼–è¯‘å™¨ï¼Œéƒ½æ¥è‡ªäºè‡ªç”±è½¯ä»¶åŸºé‡‘ GNU é¡¹ç›®ã€‚GNU é¡¹ç›®å¼€å§‹äº 1984 å¹´ï¼Œç›®çš„æ˜¯ä¸ºäº†å¼€å‘ä¸€ä¸ªå®Œå…¨ç±»ä¼¼äº UNIX çš„å…è´¹æ“ä½œç³»ç»Ÿã€‚ä¸ºäº†è¡¨æ‰¬ GNU å¯¹ Linux çš„è´¡çŒ®ï¼Œè®¸å¤šäººæŠŠ Linux ç§°ä¸º GNU/Linuxï¼ˆGNU æœ‰è‡ªå·±çš„å†…æ ¸ï¼‰</li>
<li>1992ï¼1993 å¹´ï¼ŒLinux å†…æ ¸å…·å¤‡äº†æŒ‘æˆ˜ UNIX çš„æ‰€æœ‰æœ¬è´¨ç‰¹æ€§ï¼ŒåŒ…æ‹¬ TCP/IP ç½‘ç»œï¼Œå›¾å½¢ç•Œé¢ç³»ç»Ÿï¼ˆX window )ï¼ŒLinux åŒæ ·ä¹Ÿå¸å¼•äº†è®¸å¤šè¡Œä¸šçš„å…³æ³¨ã€‚ä¸€äº›å°çš„å…¬å¸å¼€å§‹å¼€å‘å’Œå‘è¡Œ Linuxï¼Œæœ‰å‡ åä¸ª Linux ç”¨æˆ·ç¤¾åŒºæˆç«‹ã€‚1994 å¹´ï¼ŒLinux æ‚å¿—ä¹Ÿå¼€å§‹å‘è¡Œã€‚</li>
<li>Linux å†…æ ¸ 1.0 åœ¨ 1994 å¹´ 3 æœˆå‘å¸ƒï¼Œå†…æ ¸çš„å‘å¸ƒè¦ç»å†è®¸å¤šå¼€å‘å‘¨æœŸï¼Œç›´è‡³è¾¾åˆ°ä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬ã€‚</li>
</ul>
<h2 id="0-1-ç®€ä»‹"><a href="#0-1-ç®€ä»‹" class="headerlink" title="0.1 ç®€ä»‹"></a>0.1 ç®€ä»‹</h2><ul>
<li>æ˜¯ä¸€ç§è‡ªç”±å’Œå¼€æ”¾æºç çš„æ“ä½œç³»ç»Ÿï¼Œæœ‰ç€ä¸åŒçš„Linuxç‰ˆæœ¬ï¼Œä½†éƒ½æ˜¯ç”¨äº†Linuxå†…æ ¸ã€‚<ul>
<li><img src="https://img-blog.csdn.net/20180527120259589?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nja2V2aW5jeWg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></li>
</ul>
</li>
<li>Linux å¯å®‰è£…åœ¨å„ç§è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ä¸­ï¼šæ‰‹æœºã€å¹³æ¿ç”µè„‘ã€è·¯ç”±å™¨ã€å°å¼è®¡ç®—æœº<ul>
<li><img src="https://img-blog.csdn.net/2018090315211355?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNTMwOTQz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></li>
</ul>
</li>
</ul>
<h2 id="0-2-ç‰¹ç‚¹"><a href="#0-2-ç‰¹ç‚¹" class="headerlink" title="0.2 ç‰¹ç‚¹"></a>0.2 ç‰¹ç‚¹</h2><ul>
<li>å¤šç”¨æˆ·ï¼Œå¤šä»»åŠ¡ï¼Œ</li>
<li>ä¸°å¯Œçš„ç½‘ç»œåŠŸèƒ½ï¼Œ</li>
<li>å¯é çš„ç³»ç»Ÿå®‰å…¨ï¼Œ</li>
<li>è‰¯å¥½çš„å¯ç§»æ¤æ€§ï¼Œ</li>
<li>å…·æœ‰æ ‡å‡†å…¼å®¹æ€§ï¼Œ</li>
<li>è‰¯å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œ</li>
<li>å‡ºè‰²çš„é€Ÿåº¦æ€§èƒ½</li>
</ul>
<h2 id="0-3-CentOS"><a href="#0-3-CentOS" class="headerlink" title="0.3 CentOS"></a>0.3 CentOS</h2><ul>
<li>ä¸»æµï¼šç›®å‰çš„Linuxæ“ä½œç³»ç»Ÿä¸»è¦åº”ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œä¸»æµä¼ä¸šçº§Linuxç³»ç»Ÿä»æ—§æ˜¯RedHatæˆ–è€…CentOS</li>
<li>å…è´¹ï¼šRedHat å’ŒCentOSå·®åˆ«ä¸å¤§</li>
<li>æ›´æ–°æ–¹ä¾¿ï¼šCentOSç‹¬æœ‰çš„yumå‘½ä»¤æ”¯æŒåœ¨çº¿å‡çº§ï¼Œå¯ä»¥å³æ—¶æ›´æ–°ç³»ç»Ÿï¼Œä¸åƒRedHat é‚£æ ·éœ€è¦èŠ±é’±è´­ä¹°æ”¯æŒæœåŠ¡ï¼</li>
</ul>
<h2 id="0-4-Linux-ç›®å½•ç»“æ„"><a href="#0-4-Linux-ç›®å½•ç»“æ„" class="headerlink" title="0.4 Linux ç›®å½•ç»“æ„"></a>0.4 Linux ç›®å½•ç»“æ„</h2><p><img src="https://img-blog.csdn.net/20180527120637267?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nja2V2aW5jeWg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<ul>
<li>bin(binaries): äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶</li>
<li>sbin(super user binaries)ï¼šå­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªæœ‰rootèƒ½è®¿é—®</li>
<li>etc(etcetera)ï¼šå­˜æ”¾ç³»ç»Ÿé…ç½®æ–‡ä»¶</li>
<li>usr(unix shared resources)ï¼šå­˜æ”¾å…±äº«çš„ç³»ç»Ÿèµ„æº</li>
<li>homeï¼š å­˜æ”¾ç”¨æˆ·æ–‡ä»¶çš„æ ¹ç›®å½•</li>
<li>rootï¼šè¶…çº§ç”¨æˆ·ç›®å½•</li>
<li>dev(devices)ï¼šå­˜æ”¾è®¾å¤‡æ–‡ä»¶</li>
<li>lib(library)ï¼šå­˜æ”¾è·Ÿæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„å…±äº«åº“åŠå†…æ ¸æ¨¡å—</li>
<li>mnt(mountï¼šç³»ç»Ÿç®¡ç†å‘˜å®‰è£…ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿçš„å®‰è£…ç‚¹</li>
<li>bootï¼šå­˜æ”¾ç”¨äºç³»ç»Ÿå¼•å¯¼æ—¶ä½¿ç”¨çš„å„ç§æ–‡ä»¶</li>
<li>tmp(temporary)ï¼šç”¨äºå­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶</li>
<li>var(variable)ï¼šå­˜æ”¾è¿è¡Œæ—¶éœ€è¦æ”¹å˜æ•°æ®çš„æ–‡ä»¶</li>
</ul>
<h2 id="0-5-Linux-ä¸-Windowsçš„åŒºåˆ«"><a href="#0-5-Linux-ä¸-Windowsçš„åŒºåˆ«" class="headerlink" title="0.5 Linux ä¸ Windowsçš„åŒºåˆ«"></a>0.5 Linux ä¸ Windowsçš„åŒºåˆ«</h2><ol>
<li>å…è´¹ä¸æ”¶è´¹<ul>
<li>æœ€æ–°æ­£ç‰ˆWindows10éœ€ä»˜è´¹</li>
<li>Linux å…è´¹æˆ–å°‘è®¸è´¹ç”¨</li>
</ul>
</li>
<li>è½¯ä»¶ä¸æ”¯æŒ</li>
<li>å®‰å…¨æ€§</li>
<li>ä½¿ç”¨ä¹ æƒ¯<ul>
<li>Windowsï¼šæ™®é€šç”¨æˆ·åŸºæœ¬éƒ½æ˜¯çº¯å›¾å½¢ç•Œé¢ä¸‹æ“ä½œä½¿ç”¨ï¼Œä¾é é¼ æ ‡å’Œé”®ç›˜å®Œæˆä¸€åˆ‡æ“ä½œï¼Œç”¨æˆ·ä¸Šæ‰‹å®¹æ˜“ï¼Œå…¥é—¨ç®€å•ï¼›</li>
<li>Linuxï¼šå…¼å…·å›¾å½¢ç•Œé¢æ“ä½œï¼ˆéœ€è¦ä½¿ç”¨å¸¦æœ‰æ¡Œé¢ç¯å¢ƒçš„å‘è¡Œç‰ˆï¼‰å’Œå®Œå…¨çš„å‘½ä»¤è¡Œæ“ä½œï¼Œå¯ä»¥åªç”¨é”®ç›˜å®Œæˆä¸€åˆ‡æ“ä½œï¼Œæ–°æ‰‹å…¥é—¨è¾ƒå›°éš¾ï¼Œéœ€è¦ä¸€äº›å­¦ä¹ å’ŒæŒ‡å¯¼ï¼ˆè¿™æ­£æ˜¯æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼‰ï¼Œä¸€æ—¦ç†Ÿç»ƒä¹‹åæ•ˆç‡æé«˜ã€‚</li>
</ul>
</li>
<li>å¯å®šåˆ¶æ€§</li>
<li>åº”ç”¨èŒƒç•´<ul>
<li>åœ¨ Windows ä½¿ç”¨ç™¾åº¦ã€è°·æ­Œï¼Œä¸Šæ·˜å®ï¼ŒèŠ QQ æ—¶ï¼Œæ”¯æ’‘è¿™äº›è½¯ä»¶å’ŒæœåŠ¡çš„ï¼Œæ˜¯åå°æˆåƒä¸Šä¸‡çš„ Linux æœåŠ¡å™¨ä¸»æœºï¼Œå®ƒä»¬æ—¶æ—¶åˆ»åˆ»éƒ½åœ¨å¿™ç¢Œåœ°è¿›è¡Œç€æ•°æ®å¤„ç†å’Œè¿ç®—ï¼Œå¯ä»¥è¯´ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†è½¯ä»¶å’ŒæœåŠ¡éƒ½æ˜¯è¿è¡Œåœ¨ Linux ä¹‹ä¸Šçš„ã€‚</li>
</ul>
</li>
<li>Windows æ²¡æœ‰çš„ï¼š<ul>
<li>ç¨³å®šçš„ç³»ç»Ÿ</li>
<li>å®‰å…¨æ€§å’Œæ¼æ´çš„å¿«é€Ÿä¿®è¡¥</li>
<li>å¤šç”¨æˆ·</li>
<li>ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„è§„åˆ’</li>
<li>ç›¸å¯¹è¾ƒå°‘çš„èµ„æºå ç”¨</li>
<li>å¯å®šåˆ¶è£å‰ªï¼Œç§»æ¤åˆ°åµŒå…¥å¼å¹³å°</li>
<li>å¯é€‰æ‹©çš„å¤šç§å›¾å½¢ç”¨æˆ·ç•Œé¢</li>
</ul>
</li>
<li>Linux æ²¡æœ‰çš„ï¼š<ul>
<li>ç‰¹å®šçš„æ”¯æŒå‚å•†</li>
<li>è¶³å¤Ÿçš„æ¸¸æˆå¨±ä¹æ”¯æŒåº¦</li>
<li>è¶³å¤Ÿçš„ä¸“ä¸šè½¯ä»¶æ”¯æŒåº¦</li>
</ul>
</li>
</ol>
<h1 id="1-VMware-è™šæ‹Ÿæœº"><a href="#1-VMware-è™šæ‹Ÿæœº" class="headerlink" title="1 VMware è™šæ‹Ÿæœº"></a>1 VMware è™šæ‹Ÿæœº</h1><h2 id="1-1-ä»‹ç»"><a href="#1-1-ä»‹ç»" class="headerlink" title="1.1 ä»‹ç»"></a>1.1 ä»‹ç»</h2><h2 id="1-2-ä¸‹è½½åŠå®‰è£…"><a href="#1-2-ä¸‹è½½åŠå®‰è£…" class="headerlink" title="1.2 ä¸‹è½½åŠå®‰è£…"></a>1.2 ä¸‹è½½åŠå®‰è£…</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/98han/p/13170117.html">å‚è€ƒåšå®¢</a></p>
<p><strong>å®‰è£…ç‰ˆæœ¬ï¼š</strong><code> VMware-workstation-full-15.5.0-14665864</code></p>
<p>ä½¿ç”¨ç¬¬ä¸€ä¸ªå¯†é’¥æˆåŠŸï¼</p>
<p><img src="E:\LearningNotes\Linux\LinuxLearning.assets\image-20210306193651528.png" alt="image-20210306193651528"></p>
<h1 id="2-Linux-ç³»ç»Ÿä¸‹è½½åŠå®‰è£…"><a href="#2-Linux-ç³»ç»Ÿä¸‹è½½åŠå®‰è£…" class="headerlink" title="2 Linux ç³»ç»Ÿä¸‹è½½åŠå®‰è£…"></a>2 Linux ç³»ç»Ÿä¸‹è½½åŠå®‰è£…</h1><p><a target="_blank" rel="noopener" href="https://jiannan.blog.csdn.net/article/details/79417947?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control&dist_request_id=1328603.29514.16150273040264577&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control">å‚è€ƒåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1HVKs4tQaghwxF215LXpWyg">Linux å®‰è£…åŒ…ï¼ˆç™¾åº¦äº‘ç›˜ï¼‰</a></p>
<p><del>èŠ±äº†ä¹å—é’±ï¼Œä¹°äº†ç™¾åº¦äº‘ç›˜åŠ é€Ÿåˆ¸ï¼Œå‘œå‘œå‘œ</del></p>
<h2 id="2-1-è™šæ‹Ÿæœºçš„åˆ›å»º"><a href="#2-1-è™šæ‹Ÿæœºçš„åˆ›å»º" class="headerlink" title="2.1 è™šæ‹Ÿæœºçš„åˆ›å»º"></a>2.1 è™šæ‹Ÿæœºçš„åˆ›å»º</h2><p><a target="_blank" rel="noopener" href="https://jiannan.blog.csdn.net/article/details/79417947?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control&dist_request_id=1328603.29514.16150273040264577&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control">å‚è€ƒåšå®¢</a></p>
<h2 id="2-2-å®‰è£…Linux-ç³»ç»Ÿ"><a href="#2-2-å®‰è£…Linux-ç³»ç»Ÿ" class="headerlink" title="2.2 å®‰è£…Linux ç³»ç»Ÿ"></a>2.2 å®‰è£…Linux ç³»ç»Ÿ</h2><p><a target="_blank" rel="noopener" href="https://jiannan.blog.csdn.net/article/details/79417947?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control&dist_request_id=1328603.29514.16150273040264577&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control">å‚è€ƒåšå®¢</a></p>
<p><strong>é‡åˆ°çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li><ul>
<li><p><input checked="" disabled="" type="checkbox">  é—®é¢˜ä¸€ï¼š<img src="https://img-blog.csdn.net/2018030316140063?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzM4MTExOTU3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
</li>
<li><p>æˆ‘é€‰æ‹©å°† D ç›˜å‹ç¼© 30G ï¼Œæ–°å»ºç©ºçš„ç®€å•å·æ¥è£…æ­¤ç³»ç»Ÿ</p>
</li>
</ul>
</li>
<li><ul>
<li><p><input checked="" disabled="" type="checkbox">  é—®é¢˜äºŒï¼š<code>have no enough available....</code></p>
</li>
<li><p>æœ€ååœ¨ç»™<code>æ ¹ç›®å½•</code>åˆ†åŒºï¼Œæ ¹ç›®å½•å°±æ˜¯åœ¨é€‰æ‹©æŒ‚è½½ç‚¹çš„ç¬¬ä¸€ä¸ª<code>/</code>ï¼Œç„¶åä¸‹é¢æœ‰ä¸ªé€‰æ‹©æ¡†<code>é€‰æ‹©æœ€å¤§çš„å€¼</code>ï¼Œåˆ†åŒº4ä¸ªå°±å¤Ÿäº†ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>password</strong>ï¼š<code>ZihaoMa123</code></p>
</li>
<li><p><strong>Congratulations</strong><img src="E:\LearningNotes\Linux\LinuxLearning.assets\image-20210306213821201.png" alt="image-20210306213821201"></p>
</li>
<li><p>åœ¨è¾“å…¥å¯†ç ï¼ˆ<em>å¯†ç å°±æ˜¯åœ¨å®‰è£…ç³»ç»Ÿæ—¶è¾“å…¥çš„å¯†ç </em>ï¼‰çš„æ—¶å€™æ˜¯ä¸ä¼šå‡ºç°<code>****</code></p>
</li>
</ul>
<p>è™šæ‹ŸæœºæŒ‚èµ·å’Œå…³æœºçš„åŒºåˆ«</p>
<ul>
<li>æŒ‚èµ·ï¼šç›¸å½“äºç‰©ç†æœºä¸­çš„ä¼‘çœ åˆ°å†…å­˜åŠŸèƒ½</li>
<li>å…³æœºï¼šæ‰§è¡Œæ™®é€šå…³æœºæ“ä½œ</li>
</ul>
<h1 id="3-å­¦ä¹ -Linux-çš„å¥½ä¹ æƒ¯"><a href="#3-å­¦ä¹ -Linux-çš„å¥½ä¹ æƒ¯" class="headerlink" title="3 å­¦ä¹  Linux çš„å¥½ä¹ æƒ¯"></a>3 å­¦ä¹  Linux çš„å¥½ä¹ æƒ¯</h1><ul>
<li>å–„äºä½¿ç”¨ <code>man å‘½ä»¤</code>æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</li>
<li>åˆ©ç”¨å¥½<code>Tab</code>é”®</li>
<li>æŒæ¡å¥½ï¼š<ul>
<li><code>ctrl + c</code> åœæ­¢å½“å‰è¿›ç¨‹</li>
<li><code>ctrl + r æŸ¥çœ‹å‘½ä»¤å†å²</code></li>
<li><code>ctrl + l</code> æ¸…å±</li>
</ul>
</li>
</ul>
<h1 id="å¦‚ä½•å­¦ä¹ -Linux"><a href="#å¦‚ä½•å­¦ä¹ -Linux" class="headerlink" title="å¦‚ä½•å­¦ä¹  Linux"></a>å¦‚ä½•å­¦ä¹  Linux</h1><h2 id="1-å¿ƒæ€"><a href="#1-å¿ƒæ€" class="headerlink" title="1 å¿ƒæ€"></a>1 å¿ƒæ€</h2><ul>
<li><p> æ˜ç¡®ç›®çš„ï¼šç”¨Linuxæ¥å¹²ä»€ä¹ˆï¼ˆæ­å»ºæœåŠ¡å™¨ï¼Œåšç¨‹åºå¼€å‘ï¼Œæ—¥å¸¸åŠå…¬ï¼Œè¿˜æ˜¯å¨±ä¹æ¸¸æˆï¼‰</p>
</li>
<li><p>é¢å¯¹ç°å®ï¼šLinux å¤§éƒ½åœ¨å‘½ä»¤è¡Œä¸‹æ“ä½œï¼Œèƒ½å¦æ¥å—ä¸ç”¨å›¾å½¢åŒ–ç•Œé¢</p>
</li>
<li><p>æ˜¯å­¦ä¹ Linuxæ“ä½œç³»ç»Ÿæœ¬èº«ï¼Œè¿˜æ˜¯æŸä¸€ä¸ªå‘è¡Œç‰ˆï¼ˆUbuntuï¼ŒCentOSï¼ŒFedoraï¼ŒOpenSUSEç­‰ï¼‰</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Linux%E7%89%88%E6%9C%AC">Linuxå‘è¡Œç‰ˆ</a></li>
</ul>
</li>
<li><blockquote>
<p>ä¸€ä¸ªå…¸å‹çš„Linuxå‘è¡Œç‰ˆåŒ…æ‹¬ï¼š<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Linux%E5%86%85%E6%A0%B8">Linuxå†…æ ¸</a>ï¼Œä¸€äº›<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GNU">GNU</a><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%A8%8B%E5%BA%8F%E5%BA%93/7662317">ç¨‹åºåº“</a>å’Œå·¥å…·ï¼Œå‘½ä»¤è¡Œshellï¼Œå›¾å½¢ç•Œé¢çš„[X Window](<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/X">https://baike.baidu.com/item/X</a> Window)ç³»ç»Ÿå’Œç›¸åº”çš„<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83/3373875">æ¡Œé¢ç¯å¢ƒ</a>ï¼Œå¦‚<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/KDE">KDE</a>æˆ–<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GNOME">GNOME</a>ï¼Œå¹¶åŒ…å«æ•°åƒç§ä»åŠå…¬å¥—ä»¶ï¼Œ<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BC%96%E8%AF%91%E5%99%A8/8853067">ç¼–è¯‘å™¨</a>ï¼Œ<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/8853160">æ–‡æœ¬ç¼–è¾‘å™¨</a>åˆ°ç§‘å­¦å·¥å…·çš„åº”ç”¨è½¯ä»¶ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="2-æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹"><a href="#2-æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹" class="headerlink" title="2 æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹"></a>2 æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹</h2><p><img src="https://img-blog.csdn.net/20180903153014660?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNTMwOTQz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/17/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/17/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A03/" itemprop="url">Linux å…¥é—¨å­¦ä¹ 3</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-04-17T09:55:13+08:00">
                2021-04-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-01T10:16:09+08:00">
                2021-05-01
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">-Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Linux-å…¥é—¨å­¦ä¹ 3"><a href="#Linux-å…¥é—¨å­¦ä¹ 3" class="headerlink" title="Linux å…¥é—¨å­¦ä¹ 3"></a>Linux å…¥é—¨å­¦ä¹ 3</h1><p>[toc]</p>
<blockquote>
<p>å­¦ä¹ ä½¿ç”¨ Vim ç¼–è¾‘å™¨ï¼Œç¼–è¾‘ã€ä¿å­˜æ–‡ä»¶ï¼Œä»¥åŠæŸ¥çœ‹ã€æµè§ˆæ–‡ä»¶</p>
</blockquote>
<h1 id="1-ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨-Vim"><a href="#1-ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨-Vim" class="headerlink" title="1 ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ Vim"></a>1 ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ Vim</h1><h2 id="1-1-åŸºæœ¬å‘½ä»¤"><a href="#1-1-åŸºæœ¬å‘½ä»¤" class="headerlink" title="1.1 åŸºæœ¬å‘½ä»¤"></a>1.1 åŸºæœ¬å‘½ä»¤</h2><p><img src="https://img-blog.csdn.net/20171206113916293?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZG92ZTEyMDJseQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<ul>
<li>ä»»ä½•æ–‡ä»¶éœ€è¦ç¼–è¾‘é»˜è®¤åŒ–çš„ç¼–è¾‘å™¨</li>
<li>åŠŸèƒ½å¼ºå¤§çš„å…¨å±å¹•æ–‡æœ¬ç¼–è¾‘å™¨</li>
<li>æ–°å»ºã€ç¼–è¾‘ã€æ˜¾ç¤ºæ–‡ä»¶</li>
<li>Vimåªæœ‰<code>å‘½ä»¤</code>ï¼Œæ²¡æœ‰<code>èœå•</code></li>
<li>å‘½ä»¤ï¼š<ul>
<li><code>vi</code>: æ–°å»ºä¸€ä¸ªæ–‡ä»¶<ul>
<li>è¯­æ³•ï¼š<code>vi æ–‡ä»¶å</code></li>
</ul>
</li>
<li>ç¼–è¾‘ï¼šå›è½¦åè¿›å…¥å…¨å±å¹•çš„<strong>å‘½ä»¤æ¨¡å¼</strong><ul>
<li>è¿›å…¥<strong>å‘½ä»¤æ¨¡å¼</strong>ï¼š<code>Vim</code> ç­‰å¾…è¾“å…¥æŒ‡ä»¤</li>
<li>è¾“å…¥<code>i</code>, <code>a</code>, <code>o</code>ï¼Œ è¿›å…¥<strong>è¾“å…¥æ¨¡å¼</strong>ï¼ˆå·¦ä¸‹è§’ä¼šæœ‰<code>insert</code>ï¼‰<ul>
<li><code>i</code>: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„å‰é¢ï¼Œè½¬ä¸ºè¾“å…¥æ¨¡å¼</li>
<li><code>I</code>ï¼š åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–è½¬æ¢ä¸ºè¾“å…¥æ¨¡å¼</li>
<li><code>a</code>: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„åé¢ï¼Œè½¬ä¸ºè¾“å…¥æ¨¡å¼</li>
<li><code>A</code>:</li>
<li><code>o</code>: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹æ–¹ï¼Œæ–°å»ºä¸€è¡Œï¼Œå¹¶è½¬ä¸ºè¾“å…¥æ¨¡å¼</li>
<li><code>O</code>:</li>
<li><code>s</code>: åˆ é™¤å…‰æ ‡æ‰€åœ¨å­—ç¬¦</li>
<li><code>r</code>: æ›¿æ¢å…‰æ ‡å¤„å­—ç¬¦</li>
</ul>
</li>
<li>é€€å‡ºç¼–è¾‘ï¼šæŒ‰ <code>ESC</code></li>
<li><code>ESC</code> åè¿›å…¥<strong>å‘½ä»¤æ¨¡å¼</strong>ï¼Œ==å…ˆè¾“å…¥<code>å†’å·</code>==ï¼š<ul>
<li><code>w</code>: ä¿å­˜ä¸é€€å‡º</li>
<li><code>w!</code>: å¼ºåˆ¶ä¿å­˜ä¸é€€å‡º</li>
<li><code>wq</code>æˆ–<code>x</code>: ä¿å­˜å¹¶é€€å‡º</li>
<li><code>wq!</code>: <strong>å¼ºåˆ¶ä¿å­˜å¹¶é€€å‡º</strong></li>
<li><code>q</code>: <strong>ä¸ä¿å­˜é€€å‡º</strong></li>
<li><code>q!</code>: ä¸ä¿å­˜å¼ºåˆ¶é€€å‡º </li>
<li><code>e!</code>: <strong>æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œä»ä¸Šæ¬¡ä¿å­˜æ–‡ä»¶å¼€å§‹ç¼–è¾‘</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>é‡åˆ°çš„é—®é¢˜ï¼šç”±äºæˆ‘åœ¨æ’å…¥æ¨¡å¼ç¼–è¾‘å®Œåï¼ŒæŒ‰<code>ESC</code>é€€å›ä¸åˆ°å‘½ä»¤æ¨¡å¼ï¼ŒæŠŠè™šæ‹Ÿæœºå…³æ‰åï¼Œ<code>1.txt</code>æ–‡ä»¶è½¬æ¢æˆäº†<code>.1.txt.swp</code>ã€‚å†æ¬¡åˆ›å»º1.txtå¹¶ç”¨vimæ‰“å¼€ï¼š<ul>
<li>![image-20210312201009164](E:\LearningNotes\Linux\Linux 3.assets\image-20210312201009164.png)</li>
<li>Analysisï¼š<ul>
<li><code>.</code> æ˜¯è¯´æ˜å…¶æ˜¯éšè—æ–‡ä»¶</li>
<li>çŒœæµ‹æ˜¯ç”±äºæˆ‘æœªèƒ½æˆåŠŸä¿å­˜æ–‡ä»¶ï¼Œäº§ç”Ÿçš„ä¾ç„¶æ­£åœ¨è¢«ç¼–è¾‘ä¸­çš„æ–‡ä»¶ï¼Œè¢«å ç”¨äº†</li>
</ul>
</li>
<li>solutionï¼š<ul>
<li>ä½¿ç”¨<code>rm -rf .1.txt.swp</code>å¯ä»¥åˆ é™¤</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-2-g-å’Œgdbçš„å®‰è£…"><a href="#1-2-g-å’Œgdbçš„å®‰è£…" class="headerlink" title="1.2 g++å’Œgdbçš„å®‰è£…"></a>1.2 g++å’Œgdbçš„å®‰è£…</h2><p><strong>==é‡åˆ°çš„ä¸‹è½½å®‰è£…é—®é¢˜ä»ç„¶æœªè§£å†³ï¼Œæœ€åé€‰æ‹©ä¸‹è½½å®‰è£…CentOS7ï¼Œä¸‹è½½å®‰è£…æ— ä»»ä½•é—®é¢˜ï¼Ÿï¼Ÿï¼Ÿ==</strong></p>
<ul>
<li><p><strong>æ£€æŸ¥gccæ˜¯å¦å­˜åœ¨</strong>ï¼š<code>which gcc</code></p>
<ul>
<li>è‹¥æ²¡æœ‰å®‰è£…ï¼Œè¾“å…¥<code>yum install gcc-c++</code></li>
</ul>
</li>
<li><p><strong>æ£€æŸ¥gdbæ˜¯å¦å­˜åœ¨</strong>ï¼š<code>which gdb</code></p>
<ul>
<li>è‹¥æ²¡æœ‰å®‰è£…ï¼Œè¾“å…¥<code>yum install gdb</code></li>
</ul>
</li>
<li><p>æ£€æŸ¥g++æ˜¯å¦å­˜åœ¨ï¼š<code>which g++</code></p>
<ul>
<li>è‹¥æ²¡æœ‰å®‰è£…ï¼Œè¾“å…¥<code>yum install gcc-c++ libstdc++devel</code></li>
</ul>
</li>
</ul>
<ul>
<li><ul>
<li><input disabled="" type="checkbox"> é‡åˆ°äº†<strong>é—®é¢˜</strong>ï¼šæœªå®‰è£…gccï¼Œå°è¯•ç”¨å‘½ä»¤å®‰è£…æ—¶å‡ºç°ï¼š`</li>
<li>![image-20210313192827363](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 3.assets\image-20210313192827363.png)</li>
<li><strong>analysis:</strong> ä¼¼ä¹æ˜¯ç½‘ç»œé—®é¢˜</li>
<li><strong>solution1</strong>:<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34430649/article/details/51474730?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=1328642.24663.16156346773373449&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control">å‚è€ƒåšå®¢</a></li>
<li>è¾“å…¥å†…å®¹åä¸èƒ½ä¿å­˜ï¼š<code>Cant open the file for writing</code><ul>
<li><strong>analysis</strong>:å¯èƒ½æƒé™ä¸è¶³æˆ–è€…æ–‡ä»¶è¢«å ç”¨</li>
<li> <strong>solution1:</strong> ç”¨viæ—¶ï¼ŒåŠ ä¸Š<code>sudo</code>æ¥ä¸´æ—¶æä¾›ç®¡ç†å‘˜æƒé™</li>
<li>ä»ç„¶ä¸è¡Œã€‚ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>solution2</strong>:<ul>
<li>æ”¹å˜æ€è·¯ï¼Œåº”è¯¥ç½‘ç»œé…ç½®</li>
</ul>
</li>
<li><strong>solution3</strong>:<ul>
<li>åœ¨åˆšå¼€å§‹æ–°å»ºLinuxç³»ç»Ÿçš„æ—¶å€™ï¼Œé€‰æ‹©<code>é•œåƒç³»ç»Ÿå®‰è£…</code>ï¼Œ<code>gcc</code>å’Œ<code>g++</code>ä¼¼ä¹å·²è¢«å®‰è£…</li>
</ul>
</li>
</ul>
</li>
<li><strong>é—®é¢˜ï¼š</strong><code>yum install g++</code></li>
</ul>
<ul>
<li><blockquote>
<p>Loaded plugins: fastestmirror, refresh-packagekit, security<br>You need to be root to perform this command.</p>
</blockquote>
</li>
<li><p><strong>solution</strong>ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_26963433/article/details/78222506">å‚è€ƒ </a></p>
</li>
</ul>
<pre><code>* å°è¯•ä½¿ç”¨`su`å‘½ä»¤åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œè·å–æ›´å¤§æƒé™

* result:


  * &gt; Loaded plugins: fastestmirror, refresh-packagekit, security
    &gt; Setting up Install Process
    &gt; YumRepo Error: All mirror URLs are not using ftp, http[s] or file.
    &gt;  Eg. Invalid release/repo/arch combination/
    &gt; removing mirrorlist with no valid mirrors: /var/cache/yum/i386/6/base/mirrorlist.txt
    &gt; Error: Cannot retrieve repository metadata (repomd.xml) for repository: base. Please verify its path and try again
</code></pre>
<ul>
<li><strong>analysis:</strong> </li>
</ul>
<pre><code>* `YumRepo Error: All mirror URLs are not using ftp, http[s] or file.`

  * [å‚è€ƒåšå®¢](https://blog.csdn.net/weixin_44160584/article/details/110872926)
*  `http://mirror.centos.org/centos/6/os/i386/repodata/repomd.xml: [Errno 14] PYCURL ERROR 22 - &quot;The requested URL returned error: 404 Not Found&quot;`

  * 
* 1. æ²¡ç½‘ï¼Œ`ping www.baidu.com`
  2. pingé€šäº†çš„è¯ï¼Œè‹¥è¿˜æ˜¯ç”¨ä¸äº†yumå‘½ä»¤ï¼Œè¯´æ˜yumé•œåƒæ— äº†ï¼Œé‚£ä¹ˆéœ€è¦å°±å¾—ä¸‹è½½ä¸€ä¸ªæ¥æ›´æ–°ã€‚
</code></pre>
<ul>
<li></li>
</ul>
<h2 id="1-3-ç¼–è¯‘ä¸è¿è¡Œ"><a href="#1-3-ç¼–è¯‘ä¸è¿è¡Œ" class="headerlink" title="1.3 ç¼–è¯‘ä¸è¿è¡Œ"></a>1.3 ç¼–è¯‘ä¸è¿è¡Œ</h2><ul>
<li>ç¼–è¯‘<code>.c</code>æ–‡ä»¶ï¼šè¾“å…¥æŒ‡ä»¤ <code>gcc æ–‡ä»¶å.c -o å¯æ‰§è¡Œç¨‹åºå</code><ul>
<li><code>gcc</code>: ç¼–è¯‘è¯¥æ–‡ä»¶</li>
<li><code>-o</code>: åœ¨å½“å‰ç›®å½•ä¸‹</li>
</ul>
</li>
<li>è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼šè¾“å…¥<code>./æ–‡ä»¶å</code></li>
</ul>
<ul>
<li>ç¼–è¯‘<code>.cpp</code>æ–‡ä»¶ï¼šè¾“å…¥æŒ‡ä»¤ï¼š``</li>
</ul>
<h2 id="1-4-ç®€å•é…ç½®-Vim"><a href="#1-4-ç®€å•é…ç½®-Vim" class="headerlink" title="1.4 ç®€å•é…ç½® Vim"></a>1.4 ç®€å•é…ç½® Vim</h2><ul>
<li><p>ä½¿ç”¨rootæƒé™è¿›å…¥æ ¹ç›®å½•ä¸‹çš„<code>etc/</code>ç›®å½•ï¼Œåˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼Œ<code>vimrc</code>å³æ˜¯å­˜æ”¾Linuxé»˜è®¤é…ç½®çš„åœ°æ–¹</p>
</li>
<li><p>å¯ä»¥ç”¨å‘½ä»¤<code>vim vimrc</code>è¿›å…¥æ–‡ä»¶ï¼Œä½†ä¸€èˆ¬è‡ªå·±è¿›è¡Œé…ç½®æ—¶ï¼Œé€‰æ‹©åœ¨å½“å‰ç”¨æˆ·çš„ä¸»å·¥ä½œç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>.vimrc</code>æ–‡ä»¶æ¥å­˜æ”¾æˆ‘ä»¬æ–°å¢çš„é…ç½®</p>
</li>
<li><blockquote>
<p>set number<br>filetype on<br>set history=1000<br>set nocompatible<br>set shiftwidth=4<br>color evening<br>syntax on<br>set autoindent<br>set smartindent<br>set tabstop=4<br>set showmatch<br>set guioptions-=T<br>set vb t_vb=<br>set ruler<br>set nohls<br>set incsearch<br>if has(â€œvmsâ€)<br>set nobackup<br>else<br>set backup<br>endif</p>
</blockquote>
<ul>
<li><blockquote>
<p>set nocompatible æ³¨é‡Šæ‰è®¨åŒçš„æœ‰å…³viä¸€è‡´æ€§æ¨¡å¼ï¼Œé¿å…ä»¥å‰ç‰ˆæœ¬çš„ä¸€äº›bugå’Œå±€é™<br>set number æ˜¾ç¤ºè¡Œå·<br>filetype on æ£€æµ‹æ–‡ä»¶çš„ç±»å‹<br>set history=1000 è®°å½•å†å²è¡Œæ•°<br>color eveing å¤œé—´èƒŒæ™¯æ¨¡å¼<br>syntax on è¯­æ³•é«˜äº®åº¦æ˜¾ç¤º<br>set autoindent<br>vimä½¿ç”¨è‡ªåŠ¨å¯¹èµ·ï¼Œä¹Ÿå°±æ˜¯æŠŠå½“å‰è¡Œçš„å¯¹èµ·æ ¼å¼åº”ç”¨åˆ°ä¸‹ä¸€è¡Œï¼›<br>set smartindentä¾æ®ä¸Šé¢çš„å¯¹èµ·æ ¼å¼ï¼Œæ™ºèƒ½çš„é€‰æ‹©å¯¹èµ·æ–¹å¼<br>set tabstop=4 ç¬¬ä¸€è¡Œè®¾ç½®tabé”®ä¸º4ä¸ªç©ºæ ¼<br>set shiftwidth=4 è®¾ç½®å½“è¡Œä¹‹é—´äº¤é”™æ—¶ä½¿ç”¨4ä¸ªç©ºæ ¼<br>set showmatch è®¾ç½®åŒ¹é…æ¨¡å¼ï¼Œç±»ä¼¼å½“è¾“å…¥ä¸€ä¸ªå·¦æ‹¬å·æ—¶ä¼šåŒ¹é…ç›¸åº”çš„é‚£ä¸ªå³æ‹¬å·<br>set guioptions=T å»é™¤vimçš„GUIç‰ˆæœ¬ä¸­çš„toolbar<br>set vb t_vb= å½“vimè¿›è¡Œç¼–è¾‘æ—¶ï¼Œå¦‚æœå‘½ä»¤é”™è¯¯ï¼Œä¼šå‘å‡ºä¸€ä¸ªå“å£°ï¼Œè¯¥è®¾ç½®å»æ‰å“å£°<br>set ruler åœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­ï¼Œåœ¨å³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡ä½ç½®çš„çŠ¶æ€è¡Œ<br>set nohls é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯»æ‰¾åŒ¹é…æ˜¯é«˜äº®åº¦æ˜¾ç¤ºçš„ï¼Œè¯¥è®¾ç½®å…³é—­é«˜äº®æ˜¾ç¤º<br>set incsearch æŸ¥è¯¢æ—¶éå¸¸æ–¹ä¾¿ï¼Œå¦‚è¦æŸ¥æ‰¾bookå•è¯ï¼Œå½“è¾“å…¥åˆ°/b ä¼šè‡ªåŠ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªbå¼€å¤´çš„å•è¯ï¼Œä½¿ç”¨æ­¤è®¾ç½®ä¼šå¿«é€Ÿæ‰¾åˆ°ç­”æ¡ˆ<br>if has(â€œvmsâ€) ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶åï¼Œè‡ªåŠ¨è¿›è¡Œå¤‡ä»½ï¼Œå¤‡ä»½çš„æ–‡ä»¶åä¸ºåŸæ–‡ä»¶ååŠ â€œ~â€œåç¼€<br>set nobackup<br>else<br>set backup<br>endif</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="2-æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼"><a href="#2-æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼" class="headerlink" title="2 æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼"></a>2 æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼</h1><h2 id="2-1-cat-å‘½ä»¤"><a href="#2-1-cat-å‘½ä»¤" class="headerlink" title="2.1 cat å‘½ä»¤"></a>2.1 <code>cat</code> å‘½ä»¤</h2><ul>
<li>ä½œç”¨ï¼šæŸ¥çœ‹æµè§ˆæ–‡ä»¶</li>
<li>è¯­æ³•ï¼š<code>cat æ–‡ä»¶å</code></li>
<li>é€‰é¡¹ï¼š<code>-n</code>: æ˜¾ç¤ºè¡Œå·</li>
</ul>
<h2 id="2-2-tacå‘½ä»¤"><a href="#2-2-tacå‘½ä»¤" class="headerlink" title="2.2 tacå‘½ä»¤"></a>2.2 <code>tac</code>å‘½ä»¤</h2><ul>
<li>ä½œç”¨ï¼šä»æœ€åä¸€è¡Œæµè§ˆæ–‡ä»¶å†…å®¹</li>
<li>æ— <code>-n</code>é€‰é¡¹</li>
</ul>
<h2 id="2-3-moreå‘½ä»¤"><a href="#2-3-moreå‘½ä»¤" class="headerlink" title="2.3 moreå‘½ä»¤"></a>2.3 <code>more</code>å‘½ä»¤</h2><ul>
<li>è¯­æ³•<code>more æ–‡ä»¶è·¯å¾„</code></li>
<li>ä½œç”¨ï¼šå¯¹ä¸€äº›é•¿çš„å†…å®¹å¯ä»¥è¿›è¡Œç¿»é¡µæ˜¾ç¤ºï¼Œå·¦ä¸‹è§’æœ‰è¿›åº¦ç™¾åˆ†æ¯”</li>
<li>æŒ‰ç©ºæ ¼æˆ–<code>f</code>è¿›è¡Œç¿»é¡µ</li>
<li>æŒ‰<code>Enter</code>æ¢è¡Œ</li>
<li>æŒ‰<code>q</code>é€€å‡º</li>
</ul>
<h2 id="2-4-lesså‘½ä»¤"><a href="#2-4-lesså‘½ä»¤" class="headerlink" title="2.4 lesså‘½ä»¤"></a>2.4 <code>less</code>å‘½ä»¤</h2><ul>
<li>ä½œç”¨ï¼šæœ‰ç€<code>more</code>çš„åŠŸèƒ½</li>
<li>æ›´å¤šåŠŸèƒ½ï¼š<ul>
<li><code>pageup</code>æˆ–è€…<code>up</code>,å‘å‰ç¿»é¡µ</li>
<li>æŸ¥å…³é”®å­—ï¼š<ul>
<li>è¯­æ³•ï¼š<code>/å…³é”®å­—</code></li>
<li>æŒ‰<code>n</code>æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå…³é”®å­—æ‰€åœ¨ä½ç½®</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-5-head-å‘½ä»¤"><a href="#2-5-head-å‘½ä»¤" class="headerlink" title="2.5 head å‘½ä»¤"></a>2.5 <code>head</code> å‘½ä»¤</h2><ul>
<li>ä½œç”¨ï¼šæŸ¥çœ‹æ–‡ä»¶çš„å‰å‡ è¡Œ</li>
<li>é»˜è®¤æ˜¾ç¤ºå‰åè¡Œ</li>
<li>é€‰é¡¹ï¼š<code>-n</code><ul>
<li><code>head -n æ˜¾ç¤ºè¡Œæ•°</code></li>
</ul>
</li>
</ul>
<h2 id="2-6-tailå‘½ä»¤"><a href="#2-6-tailå‘½ä»¤" class="headerlink" title="2.6 tailå‘½ä»¤"></a>2.6 <code>tail</code>å‘½ä»¤</h2><ul>
<li>ä½œç”¨ï¼šæŸ¥çœ‹æ–‡ä»¶æœ€åå‡ è¡Œ</li>
<li>é»˜è®¤æ˜¾ç¤ºæœ€ååè¡Œ</li>
<li>é€‰é¡¹ï¼š<code>-n</code><ul>
<li><code>tail -n æ˜¾ç¤ºè¡Œæ•°</code></li>
</ul>
</li>
</ul>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/17/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/17/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A02/" itemprop="url">Linux å…¥é—¨å­¦ä¹ 2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-04-17T09:55:13+08:00">
                2021-04-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-01T10:16:03+08:00">
                2021-05-01
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">-Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  394
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Linux-å…¥é—¨å­¦ä¹ 2"><a href="#Linux-å…¥é—¨å­¦ä¹ 2" class="headerlink" title="Linux å…¥é—¨å­¦ä¹ 2"></a>Linux å…¥é—¨å­¦ä¹ 2</h1><p><a target="_blank" rel="noopener" href="https://jiannan.blog.csdn.net/article/details/79512948">å‚è€ƒåšå®¢</a></p>
<p>[toc]</p>
<p>å­¦ä¹ å¦‚ä½•åˆ›å»ºæ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€ä»¥åŠæ–‡ä»¶çš„å¤åˆ¶ç²˜è´´å‰ªåˆ‡ç­‰æ“ä½œã€‚</p>
<h1 id="1-æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º"><a href="#1-æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º" class="headerlink" title="1 æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º"></a>1 æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º</h1><h2 id="1-1-åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#1-1-åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="1.1 åˆ›å»ºæ–‡ä»¶å¤¹"></a>1.1 åˆ›å»ºæ–‡ä»¶å¤¹</h2><ul>
<li>å‘½ä»¤ï¼š<code>mkdir</code> make directories</li>
<li>é»˜è®¤ç™»é™†æ‰€åœ¨ç›®å½•æ˜¯<code>root</code>çš„<code>home</code>ç›®å½•</li>
<li>æŒ‡å®šåœ¨æŸä¸ªç›®å½•ä¸‹åˆ›å»ºï¼š<code>mkdir /ç›®å½•å/æ–‡ä»¶å¤¹å</code></li>
<li>åˆ›å»ºæ–‡ä»¶å¤¹çš„åŒæ—¶åˆ›å»ºå­æ–‡ä»¶å¤¹ï¼š<code>mkdir -p æ–‡ä»¶å¤¹å/å­æ–‡ä»¶å¤¹å</code><ul>
<li><code>-p</code>é€‰é¡¹ï¼šé€’å½’åˆ›å»º</li>
</ul>
</li>
</ul>
<h2 id="1-2-åˆ›å»ºæ–‡ä»¶"><a href="#1-2-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="1.2 åˆ›å»ºæ–‡ä»¶"></a>1.2 åˆ›å»ºæ–‡ä»¶</h2><ul>
<li>å‘½ä»¤ï¼š<code>touch</code></li>
<li>è¯­æ³•ï¼š<code>touch /ç›®å½•/æ–‡ä»¶å</code><ul>
<li>åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶</li>
</ul>
</li>
<li>æ³¨æ„ï¼š<ul>
<li><code>ç›®å½•</code>éœ€è¦å†™ç»å¯¹è·¯å¾„</li>
</ul>
</li>
</ul>
<h1 id="2-æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•"><a href="#2-æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•" class="headerlink" title="2 æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•"></a>2 æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•</h1><h2 id="2-1-æŸ¥çœ‹å½“å‰ç›®å½•"><a href="#2-1-æŸ¥çœ‹å½“å‰ç›®å½•" class="headerlink" title="2.1 æŸ¥çœ‹å½“å‰ç›®å½•"></a>2.1 æŸ¥çœ‹å½“å‰ç›®å½•</h2><ul>
<li>å‘½ä»¤ï¼š<code>pwd</code></li>
</ul>
<h2 id="2-2-åˆ‡æ¢ç›®å½•"><a href="#2-2-åˆ‡æ¢ç›®å½•" class="headerlink" title="2.2 åˆ‡æ¢ç›®å½•"></a>2.2 åˆ‡æ¢ç›®å½•</h2><ul>
<li>å‘½ä»¤ï¼š<code>cd</code>,<code>change directories</code></li>
<li>è¯­æ³•ï¼š<code>cd /ç›®å½•</code></li>
</ul>
<h1 id="3-å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ"><a href="#3-å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ" class="headerlink" title="3 å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ"></a>3 å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ</h1><h2 id="3-1-å¤åˆ¶"><a href="#3-1-å¤åˆ¶" class="headerlink" title="3.1 å¤åˆ¶"></a>3.1 å¤åˆ¶</h2><ul>
<li>å‘½ä»¤ï¼š<code>cp</code>,copy</li>
<li>è¯­æ³•ï¼š<code>cp åŸæ–‡ä»¶è·¯å¾„ ç›®æ ‡è·¯å¾„</code></li>
<li>é€‰é¡¹ï¼š<ul>
<li><code>-r</code>: å¤åˆ¶ä¸€ä¸ªç›®å½•</li>
<li><code>-p</code>: å¤åˆ¶æ–‡ä»¶çš„å±æ€§ä¸ä¹‹å‰åŸæ–‡ä»¶ä¸€è‡´</li>
</ul>
</li>
<li>å¤åˆ¶æ”¹åä¸€èµ·å®Œæˆï¼šå†å¤åˆ¶çš„ç›®æ ‡è·¯å¾„æœ€åå†™ä¸Šæ–‡ä»¶å</li>
</ul>
<h2 id="3-2-åˆ é™¤"><a href="#3-2-åˆ é™¤" class="headerlink" title="3.2 åˆ é™¤"></a>3.2 åˆ é™¤</h2><ul>
<li>åˆ é™¤ç©ºç›®å½•<ul>
<li>å‘½ä»¤ï¼š<code>rmdir</code>ï¼Œåˆ é™¤<strong>ç©ºç›®å½•</strong></li>
</ul>
</li>
<li>åˆ é™¤æ–‡ä»¶<ul>
<li>å‘½ä»¤ï¼š<code>rm</code></li>
<li>é€‰é¡¹<ul>
<li><code>-f</code>: æ— ç¡®è®¤æç¤º</li>
</ul>
</li>
</ul>
</li>
<li>åˆ é™¤ç›®å½•ï¼šå¿…é¡»è¿›è¡Œé€’å½’æ“ä½œï¼Œéœ€è¦åŠ ä¸Šé€‰é¡¹<code>-r</code><ul>
<li>å‘½ä»¤ï¼š<code>rm -r ç›®å½•</code><ul>
<li>ä¼šä¸€ä¸ªä¸€ä¸ªæç¤ºæ˜¯å¦åˆ é™¤é‡Œé¢çš„æ–‡ä»¶</li>
</ul>
</li>
<li>å‘½ä»¤ï¼š<code>rm -rf ç›®å½•</code><ul>
<li>ä¸ä¼šæç¤º</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-3-å‰ªåˆ‡"><a href="#3-3-å‰ªåˆ‡" class="headerlink" title="3.3 å‰ªåˆ‡"></a>3.3 å‰ªåˆ‡</h2><ul>
<li>å‘½ä»¤ï¼š<code>mv</code>,move</li>
<li>è¯­æ³•ï¼š<code>mv åŸæ–‡ä»¶è·¯å¾„ ç›®æ ‡è·¯å¾„</code></li>
<li>å‰ªåˆ‡åŒæ—¶æ”¹åï¼šæœ€åå†™ä¸Šæ–‡ä»¶å</li>
</ul>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/17/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/17/Linux%20%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A01/" itemprop="url">Linux å…¥é—¨å­¦ä¹ 1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-04-17T09:55:13+08:00">
                2021-04-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-01T10:15:42+08:00">
                2021-05-01
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">-Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  969
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Linux-å…¥é—¨å­¦ä¹ 1"><a href="#Linux-å…¥é—¨å­¦ä¹ 1" class="headerlink" title="Linux å…¥é—¨å­¦ä¹ 1"></a>Linux å…¥é—¨å­¦ä¹ 1</h1><p><a target="_blank" rel="noopener" href="https://jiannan.blog.csdn.net/article/details/79473507">å‚è€ƒåšå®¢</a></p>
<p>[toc]</p>
<h1 id="1-å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼"><a href="#1-å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼" class="headerlink" title="1 å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼"></a>1 å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼</h1><h2 id="1-1-åŸºæœ¬æ ¼å¼"><a href="#1-1-åŸºæœ¬æ ¼å¼" class="headerlink" title="1.1 åŸºæœ¬æ ¼å¼"></a>1.1 åŸºæœ¬æ ¼å¼</h2><ul>
<li><strong>å‘½ä»¤</strong>ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š<code>å‘½ä»¤ [-é€‰é¡¹] [å‚æ•°]</code><ul>
<li><strong>é€‰é¡¹</strong>ä¸<strong>å‚æ•°</strong>å¯ä»¥çœç•¥</li>
<li>æœ‰å¤šä¸ªé€‰é¡¹æ˜¯å¯ä»¥å†™åœ¨ä¸€èµ·çš„ï¼Œâ€œ-â€ä»£è¡¨é€‰é¡¹</li>
<li><strong>å‚æ•°</strong>å¯ä»¥æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>ç›®å½•</strong></li>
</ul>
</li>
</ul>
<p><strong>ä¾‹ï¼š</strong><code>ls -l /</code> ä»£è¡¨<strong>æŸ¥çœ‹ç›®å½•</strong></p>
<ul>
<li><code>ls</code>: <strong>æŸ¥çœ‹ç›®å½•</strong>ã€‚æ˜¾ç¤ºç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼ˆåªèƒ½çœ‹åˆ°æ–‡ä»¶åï¼‰</li>
<li><code>-l</code>: æ˜¾ç¤ºç›®å½•ä¸‹çš„<strong>è¯¦ç»†</strong>æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„ä¿¡æ¯</li>
<li><code>/</code>: <strong>æ ¹ç›®å½•</strong>ã€‚å¤¹ä¸Šå‚æ•°åï¼Œè¡¨ç¤º<strong>æŸ¥çœ‹ æ ¹ç›®å½• ä¸‹çš„æ–‡ä»¶</strong></li>
</ul>
<h2 id="1-2-ç›®å½•"><a href="#1-2-ç›®å½•" class="headerlink" title="1.2 ç›®å½•"></a>1.2 ç›®å½•</h2><p>â€‹    æŸ¥çœ‹æ ¹ç›®å½•æ—¶ï¼Œå¯ä»¥çœ‹åˆ°è®¸å¤šæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210307101148483.png" alt="image-20210307101148483"></p>
<ol>
<li><code>/</code>: æ ¹ç›®å½•ï¼Œæ— ä¸Šä¸€çº§</li>
<li><code>/home</code>: æ¯ä¸ªç”¨æˆ·çš„å®¶ç›®å½•ï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·æ—¶ï¼Œhomeç›®å½•ä¸‹ä¼šåˆ›å»ºä¸€ä¸ªä»¥ç”¨æˆ·åæ–‡åç§°çš„æ–‡ä»¶å¤¹</li>
<li><code>/tmp</code>: ä¸´æ—¶å­˜æ”¾æ–‡ä»¶çš„åœ°æ–¹</li>
<li><code>/bin</code>: å‘½ä»¤ä¿å­˜çš„ç›®å½•</li>
<li><code>/boot</code>: å¯åŠ¨ç›®å½•ï¼ŒåŒ…å«ç³»ç»Ÿå¯åŠ¨æ—¶çš„ç›¸å…³æ–‡ä»¶</li>
<li><code>/root</code>: rootç”¨æˆ·çš„å®¶ç›®å½•ï¼Œ</li>
</ol>
<h1 id="2-ls-ç›®å½•å‘½ä»¤å¤„ç†"><a href="#2-ls-ç›®å½•å‘½ä»¤å¤„ç†" class="headerlink" title="2 ls ç›®å½•å‘½ä»¤å¤„ç†"></a>2 <code>ls</code> ç›®å½•å‘½ä»¤å¤„ç†</h1><p>â€‹    <code>ls</code>ç›®å½•å¤„ç†å‘½ä»¤ï¼Œå…¨ç§°: <code>list</code></p>
<p>â€‹    å…¶ä»–ç›®å½•å‘½ä»¤ï¼š</p>
<ul>
<li><code>ls -a</code>æˆ–<code>ls --all</code>: æŸ¥çœ‹ç›®å½•ä¸‹çš„å…¨éƒ¨æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰<ul>
<li>![image-20210307103745762](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103745762.png)</li>
<li><code>ls</code>å‘½ä»¤ååŠ <code>-a</code>å¯ä»¥æŸ¥çœ‹åˆ°<strong>å½“å‰ç›®å½•</strong>ä¸‹çš„<strong>å…¨éƒ¨æ–‡ä»¶</strong></li>
<li>éšè—æ–‡ä»¶çš„åç§°ä»¥<code>.</code>å¼€å§‹</li>
<li>éšè—æ–‡ä»¶çš„æ„ä¹‰:å‘Šè¯‰ç”¨æˆ·ï¼Œå…¶æ˜¯ç³»ç»Ÿçš„æ–‡ä»¶ï¼Œä¸è¦éšæ„çš„æ›´æ”¹</li>
<li><code>-a</code> æ˜¯ <code>--all</code> çš„ç®€åŒ–</li>
</ul>
</li>
<li><code>ls -l</code>: æŸ¥çœ‹ç›®å½•ä¸‹çš„è¯¦ç»†æ–‡ä»¶ä¿¡æ¯<ul>
<li>![image-20210307103816519](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103816519.png)</li>
<li>å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„<strong>å¤§å°</strong>,<strong>ä¿®æ”¹æ—¥æœŸ</strong>åŠ<strong>æ–‡ä»¶å</strong>ç­‰</li>
<li>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ–‡ä»¶å¤§å°<code>1255</code>,<code>26533</code>ç­‰ï¼Œå¤§å°å•ä½ä¸º<strong>å­—èŠ‚</strong></li>
<li><code>l</code>å…¨ç§°ä¸º<code>long</code></li>
</ul>
</li>
<li><code>ls -al</code>: æŸ¥çœ‹è¿™ä¸ªç›®å½•ä¸‹å…¨éƒ¨æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯<ul>
<li>![image-20210307103854462](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103854462.png)</li>
</ul>
</li>
<li><code>ls -al /tmp</code>: æŸ¥çœ‹ <code>tmp</code> æ–‡ä»¶ä¸‹çš„å…¨éƒ¨æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯<ul>
<li>![image-20210307103921974](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103921974.png)</li>
</ul>
</li>
<li><code>ls -alh</code>: æ›´äººæ€§åŒ–çš„æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯<ul>
<li>![image-20210307104048576](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307104048576.png)</li>
<li>æ­¤æ—¶ï¼Œå¯¹æ–‡ä»¶å¤§å°æ ‡æ³¨äº†å•ä½</li>
<li>æˆ‘ä»¬æ¥çœ‹ä¸Šå›¾ç¬¬ä¸€è¡Œï¼Œ<code>dr-xr-x---.  2 root root 4.0K Mar 7 05:37     </code>ï¼Œå¯¹å…¶è¿›è¡Œè§£è¯»ï¼š<ul>
<li><code>dr-xr-x---</code>ä»£è¡¨<strong>æ–‡ä»¶ç±»å‹åŠæƒé™</strong>ï¼Œåº”æ‹†æˆ<strong>å››éƒ¨åˆ†</strong>ï¼š<code>d r-x r-x ---</code>:<ul>
<li>ç¬¬ä¸€éƒ¨åˆ†<code>d</code>: <strong>ä»£è¡¨æ˜¯ä»€ä¹ˆæ–‡ä»¶</strong>ï¼Œ<code>directory</code>ç›®å½•çš„é¦–å­—æ¯ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ã€‚<ul>
<li>è‹¥ç¬¬ä¸€ä¸ªå­—æ¯ä¸º<code>l</code>ï¼šæ˜¯<code>link</code>çš„é¦–å­—æ¯ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ª<strong>è½¯è¿æ¥æ–‡ä»¶</strong></li>
<li>è‹¥ç¬¬ä¸€ä¸ªå­—æ¯ä¸º<code>-</code>ï¼šä»£è¡¨è¿™æ˜¯ä¸€ä¸ª<strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong></li>
</ul>
</li>
<li>ç¬¬äºŒéƒ¨åˆ†<code>r-x</code>: ä»£è¡¨<strong>æ‰€æœ‰è€…</strong>æ‹¥æœ‰æŸä¸ªæƒé™ï¼šè¯»å’Œæ‰§è¡Œ<ul>
<li><code>r</code>: ä»£è¡¨è¯»çš„æƒé™</li>
<li><code>w</code>: ä»£è¡¨å†™çš„æƒé™</li>
<li><code>x</code>: ä»£è¡¨æ‰§è¡Œçš„æƒé™</li>
</ul>
</li>
<li>ç¬¬ä¸‰éƒ¨åˆ†<code>r-x</code>: ä»£è¡¨<strong>æ‰€å±ç»„</strong>æ‹¥æœ‰çš„æƒé™ï¼šè¯»å’Œæ‰§è¡Œ</li>
<li>ç¬¬å››éƒ¨åˆ†<code>---</code>: ä»£è¡¨<strong>å…¶ä»–äºº</strong>æ‹¥æœ‰çš„æƒé™ï¼š<code>null</code></li>
</ul>
</li>
<li><code>2</code> : ä»£è¡¨æ˜¯ä¸€ä¸ª<strong>å¼•ç”¨æŠ€æœ¯</strong>ï¼Œä»£è¡¨è¿™ä¸ªæ–‡ä»¶è¢«å¼•ç”¨äº†<code>2</code>æ¬¡</li>
<li><code>root</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„æ‰€æœ‰è€…</li>
<li><code>root</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„æ‰€å±ç»„</li>
<li><code>4.0K</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„å¤§å°</li>
<li><code>Mar 7 05:37</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´</li>
<li>``: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„åç§°</li>
</ul>
</li>
</ul>
</li>
<li><code>ls -i</code>: æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„<code>i</code>èŠ‚ç‚¹<ul>
<li>![image-20210307111054562](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307111054562.png)</li>
<li>åœ¨ Linux ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„<code>i</code>èŠ‚ç‚¹ï¼Œç±»ä¼¼äºæ¯ä¸ªäººçš„èº«ä»½è¯å·</li>
<li><code>i</code>èŠ‚ç‚¹å¯ä»¥å¯¹åº”å¤šä¸ªæ–‡ä»¶</li>
</ul>
</li>
</ul>
<h1 id="3-æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº"><a href="#3-æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº" class="headerlink" title="3 æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº"></a>3 æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº</h1><ul>
<li>æ‰€æœ‰è€…ï¼šåˆ›å»ºäº†è¿™ä¸ªæ–‡ä»¶çš„äººã€‚ä½†æ‰€æœ‰è€…å¯ä»¥è½¬æ¢</li>
<li>æ‰€å±ç»„ï¼šå¾ˆå¤šäººç»„æˆçš„ç»„</li>
<li>å…¶ä»–äººï¼šæ‰€æœ‰è€…å’Œæ‰€å±ç»„ä¹‹å¤–çš„ç”¨æˆ·</li>
</ul>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/17/Lab1%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/17/Lab1%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/" itemprop="url">Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-04-17T09:05:14+08:00">
                2021-04-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-02T11:36:32+08:00">
                2021-05-02
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/uCore/" itemprop="url" rel="index">
                    <span itemprop="name">-uCore</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  14.7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  59
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Lab-1-ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹"><a href="#Lab-1-ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹"></a>Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹</h1><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2f95d38afa1d">å‚è€ƒåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://www.git2get.com/av/102915460.html">å‚è€ƒåšå®¢</a></p>
<p>[toc]</p>
<h1 id="1-å®éªŒç›®çš„"><a href="#1-å®éªŒç›®çš„" class="headerlink" title="1 å®éªŒç›®çš„"></a>1 å®éªŒç›®çš„</h1><ul>
<li>éœ€è¦æŸç§æœºåˆ¶åŠ è½½å¹¶è¿è¡Œæ“ä½œç³»ç»Ÿ<ul>
<li>æ›´åŠ ç®€å•çš„è½¯ä»¶â€”â€”Bootloader</li>
<li>èƒ½å®Œæˆåˆ‡æ¢åˆ° x86 ä¿æŠ¤æ¨¡å¼å¹¶æ˜¾ç¤ºå­—ç¬¦</li>
<li>ä¸ºå¯åŠ¨ ucore </li>
</ul>
</li>
<li>æ•´ä¸ª Bootloader æ‰§è¡Œä»£ç å°äº512ä¸ªå­—èŠ‚ï¼Œèƒ½æ”¾åˆ°ç¡¬ç›˜çš„ä¸»å¼•å¯¼æ‰‡åŒº</li>
</ul>
<p>åˆ†æå’Œå®ç° Bootloaderå’Œucore</p>
<ul>
<li><strong>è®¡ç®—æœºåŸç†</strong><ul>
<li>CPU çš„ç¼–å€ä¸å¯»å€ï¼šåŸºäºåˆ†æ®µæœºåˆ¶çš„å†…å­˜ç®¡ç†   <strong>ã€è¿ç»­ç‰©ç†å†…å­˜åˆ†é…</strong></li>
<li>CPU çš„ä¸­æ–­æœºåˆ¶</li>
<li>å¤–è®¾ï¼šä¸²å£/å¹¶å£/CGAï¼ˆæ˜¾ç¤ºå™¨ï¼‰ï¼Œæ—¶é’Ÿï¼ˆäº§ç”Ÿæ—¶é’Ÿä¸­æ–­ï¼‰ï¼Œç¡¬ç›˜ï¼ˆè¯»å–ï¼‰</li>
</ul>
</li>
<li><strong>Bootloader</strong><ul>
<li>ç¼–è¯‘è¿è¡Œ Bootloader çš„è¿‡ç¨‹</li>
<li>è°ƒè¯•çš„æ–¹æ³•</li>
<li>PC å¯åŠ¨ Bootloader çš„è¿‡ç¨‹</li>
<li>ELFæ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼å’ŒåŠ è½½</li>
<li>å¤–è®¾è®¿é—®ï¼šè¯»ç¡¬ç›˜ï¼Œåœ¨CGAä¸Šæ˜¾ç¤ºå­—ç¬¦ä¸²</li>
</ul>
</li>
<li><strong>ucore OS</strong><ul>
<li>ç¼–è¯‘è¿è¡Œ</li>
<li>å¯åŠ¨è¿‡ç¨‹</li>
<li>è°ƒè¯•æ–¹æ³•</li>
<li>å‡½æ•°è°ƒç”¨å…³ç³»ï¼šåœ¨æ±‡ç¼–çº§äº†è§£å‡½æ•°è°ƒç”¨æ ˆçš„ç»“æ„å’Œå¤„ç†è¿‡ç¨‹</li>
<li>ä¸­æ–­ç®¡ç†ï¼šä¸è½¯ä»¶ç›¸å…³çš„ä¸­æ–­å¤„ç†    <strong>ã€ç³»ç»Ÿè°ƒç”¨ï¼Œå¼‚å¸¸</strong></li>
<li>å¤–è®¾ç®¡ç†ï¼šæ—¶é’Ÿ</li>
</ul>
</li>
</ul>
<h1 id="2-å®éªŒå†…å®¹"><a href="#2-å®éªŒå†…å®¹" class="headerlink" title="2 å®éªŒå†…å®¹"></a>2 å®éªŒå†…å®¹</h1><ul>
<li>lab 1 ä¸­åŒ…å«ä¸€ä¸ª Bootloader å’Œ ä¸€ä¸ª OS<ul>
<li>Bootloader å¯ä»¥åˆ‡æ¢åˆ° x86 ä¿æŠ¤æ¨¡å¼ï¼Œèƒ½å¤Ÿè¯»ç£ç›˜å¹¶åŠ è½½ELFæ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œå¹¶æ˜¾ç¤ºå­—ç¬¦</li>
<li>OS åªæ˜¯ä¸€ä¸ªå¯ä»¥å¤„ç†æ—¶é’Ÿä¸­æ–­å¹¶æ˜¾ç¤ºå­—ç¬¦çš„ OS</li>
</ul>
</li>
</ul>
<h2 id="2-1-ç»ƒä¹ "><a href="#2-1-ç»ƒä¹ " class="headerlink" title="2.1 ç»ƒä¹ "></a>2.1 ç»ƒä¹ </h2><ul>
<li>lab 1 æä¾›äº† 6 ä¸ª<strong>åŸºæœ¬ç»ƒä¹ </strong>å’Œ 1 ä¸ª<strong>æ‰©å±•ç»ƒä¹ </strong></li>
<li>å®Œæˆå®éªŒæŠ¥å‘Š<ul>
<li>åŸºäºmarkdown æ ¼å¼ï¼Œä»¥æ–‡æœ¬æ–¹å¼ä¸ºä¸»</li>
<li>å¡«å†™å„ä¸ªåŸºæœ¬ç»ƒä¹ ä¸­è¦æ±‚å®Œæˆçš„æŠ¥å‘Šå†…å®¹</li>
<li>å®Œæˆè¯•éªŒåï¼Œåˆ†æ ucore_lab æä¾›çš„å‚è€ƒç­”æ¡ˆï¼Œå¹¶åœ¨å®éªŒæŠ¥å‘Šä¸­è¯´æ˜ä½ çš„å®ç°ä¸å‚è€ƒç­”æ¡ˆçš„åŒºåˆ«</li>
<li>åˆ—å‡ºæœ¬å®éªŒä¸­é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œä»¥åŠå¯¹åº”çš„ OS åŸç†çŸ¥è¯†ç‚¹ï¼Œå¹¶ç®€è¦è¯´æ˜ä½ å¯¹äºŒè€…çš„å«ä¹‰ï¼Œå…³ç³»ï¼Œå·®å¼‚ç­‰æ–¹é¢çš„ç†è§£</li>
<li>åˆ—å‡ºä½ è®¤ä¸º OS åŸç†ä¸­å¾ˆé‡è¦ï¼Œä½†å®éªŒä¸­æ²¡æœ‰å¯¹åº”çš„çŸ¥è¯†ç‚¹</li>
</ul>
</li>
</ul>
<h3 id="ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡-make-ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹"><a href="#ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡-make-ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹" class="headerlink" title="ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡ make ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹"></a>ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡ make ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹</h3><ul>
<li>é€šè¿‡é™æ€åˆ†æä»£ç æ¥äº†è§£ï¼š<ul>
<li><strong>æ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶</strong> <code>ucore.img</code> å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰</li>
<li>ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„<strong>ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº</strong>çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ</li>
</ul>
</li>
<li>è¡¥å……ææ–™ï¼š<ul>
<li>å¦‚ä½•è°ƒè¯• <code>Makefile</code></li>
<li>å½“æ‰§è¡Œ<code>make</code>æ—¶ï¼Œä¸€èˆ¬åªä¼šæ˜¾ç¤ºè¾“å‡ºï¼Œä¸ä¼šæ˜¾ç¤º<code>make</code>æ‰§è¡Œäº†é‚£äº›å‘½ä»¤</li>
<li>å¦‚æƒ³äº†è§£ <code>make</code>æ‰§è¡Œé‚£äº›å‘½ä»¤ï¼Œå¯ä»¥æ‰§è¡Œ<code>make V=</code></li>
<li>ä¸Šç½‘æŸ¥è¯¢ makeï¼Œæ‰§è¡Œ<code>man make</code></li>
</ul>
</li>
</ul>
<h4 id="æŠ¥å‘Š"><a href="#æŠ¥å‘Š" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><h5 id="é—®é¢˜ä¸€ï¼šæ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶-ucore-img-å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile-ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰"><a href="#é—®é¢˜ä¸€ï¼šæ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶-ucore-img-å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile-ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰" class="headerlink" title="é—®é¢˜ä¸€ï¼šæ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶ ucore.img å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰"></a><strong>é—®é¢˜ä¸€ï¼š</strong>æ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶ <code>ucore.img</code> å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile ä¸­æ¯ä¸€æ¡<strong>ç›¸å…³å‘½ä»¤</strong>å’Œ<strong>å‘½ä»¤å‚æ•°</strong>çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰</h5><ul>
<li><p><strong>GCC</strong> ç›¸å…³ç¼–è¯‘é€‰é¡¹ï¼š</p>
<ul>
<li><blockquote>
<p><strong>GCC</strong></p>
<pre><code>`-g`  å¢åŠ gdbçš„è°ƒè¯•ä¿¡æ¯
`-Wall`   æ˜¾ç¤ºå‘Šè­¦ä¿¡æ¯
`-O2 `    ä¼˜åŒ–å¤„ç† (æœ‰ 0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ0æ˜¯ä¸ä¼˜åŒ–)
`-fno-builtin`   åªæ¥å—ä»¥&quot;__&quot;å¼€å¤´çš„å†…å»ºå‡½æ•°
`-ggdb`   è®©gccä¸ºgdbç”Ÿæˆæ¯”è¾ƒä¸°å¯Œçš„è°ƒè¯•ä¿¡æ¯
`-m32`    ç¼–è¯‘32ä½ç¨‹åº
`-gstabs`     æ­¤é€‰é¡¹ä»¥stabsæ ¼å¼ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬gdbè°ƒè¯•ä¿¡æ¯
`-nostdinc`   ä¸åœ¨æ ‡å‡†ç³»ç»Ÿç›®å½•ä¸­æœç´¢å¤´æ–‡ä»¶ï¼Œåªåœ¨-læŒ‡å®šçš„ç›®å½•ä¸­æœç´¢
`-fstack-protector-all `  å¯ç”¨å †æ ˆä¿æŠ¤ï¼Œä¸ºæ‰€æœ‰å‡½æ•°æ’å…¥ä¿æŠ¤ä»£ç 
`-E`  ä»…åšé¢„å¤„ç†ï¼Œä¸è¿›è¡Œç¼–è¯‘ï¼Œæ±‡ç¼–å’Œé“¾æ¥
`-x c`  æŒ‡æ˜ä½¿ç”¨çš„è¯­è¨€ä¸ºCè¯­è¨€
</code></pre>
<p><strong>LDD Flags</strong></p>
<pre><code>`-nostdlib`   ä¸è¿æ¥ç³»ç»Ÿæ ‡å‡†å¯åŠ¨æ–‡ä»¶å’Œæ ‡å‡†åº“æ–‡ä»¶ï¼ŒåªæŠŠæŒ‡å®šçš„æ–‡ä»¶ä¼ é€’ç»™è¿æ¥å™¨
`-m elf\_i386`    ä½¿ç”¨`elf_i386`æ¨¡æ‹Ÿå™¨
`-N`      æŠŠtextå’ŒdataèŠ‚è®¾ç½®ä¸ºå¯è¯»å†™ï¼ŒåŒæ—¶å–æ¶ˆæ•°æ®èŠ‚çš„é¡µå¯¹é½ï¼Œå–æ¶ˆå¯¹å…±äº«åº“çš„é“¾æ¥
`-e func`     ä»¥ç¬¦å·`func`çš„ä½ç½®ä½œä¸ºç¨‹åºå¼€å§‹è¿è¡Œçš„ä½ç½®
`-Ttext addr`  æ˜¯è¿æ¥æ—¶å°†åˆå§‹åœ°å€é‡å®šå‘ä¸º`addr` ï¼ˆè‹¥ä¸æ³¨æ˜æ­¤ï¼Œåˆ™ç¨‹åºçš„èµ·å§‹åœ°å€ä¸º0ï¼‰
</code></pre>
</blockquote>
</li>
</ul>
</li>
<li><p><strong>ç¼–è¯‘ bootloader</strong></p>
<ul>
<li><p>ç”¨äº<strong>åŠ è½½</strong> Kernel æ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>å…ˆæŠŠ <code>bootasm.S</code> , <code>bootmain.c</code> ç¼–è¯‘æˆç›¸åº”çš„ <strong>ç›®æ ‡æ–‡ä»¶</strong></p>
</li>
<li><p>åœ¨ä½¿ç”¨<strong>è¿æ¥å™¨</strong>è¿æ¥åˆ°ä¸€èµ·ï¼Œä½¿ç”¨ <code>start</code> ç¬¦å·ä½œä¸ºå…¥å£ï¼Œå¹¶æŒ‡å®š text æ®µåœ¨ç¨‹åºä¸­çš„ç»å¯¹ä½ç½® æ˜¯<code>0x7c00</code></p>
<ul>
<li><code>0x7c00</code> : æ˜¯<strong>æ“ä½œç³»ç»Ÿä¸€å¼€å§‹åŠ è½½çš„åœ°å€</strong></li>
</ul>
</li>
<li><p>```bash<br>//bootasm.o</p>
<ul>
<li>cc boot/bootasm.S<br>gcc -Iboot/ -fno-builtin  -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Os -nostdinc -c boot/bootasm.S -o obj/boot/bootasm.o</li>
</ul>
<p>//ç”Ÿæˆbootmain.o</p>
<ul>
<li>cc boot/bootmain.c<br>gcc -Iboot/ -fno-builtin  -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Os -nostdinc -c boot/bootmain.c -o obj/boot/bootmain.o</li>
</ul>
<p>//ld bin/bootblock<br>ld -m    elf_i386 -nostdlib -N -e start -Ttext 0x7C00 obj/boot/bootasm.o obj/boot/bootmain.o -o obj/bootblock.o</p>
<p>â€˜obj/bootblock.outâ€™ size: 468 bytes<br>build 512 bytes boot sector: â€˜bin/bootblockâ€™ success!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **ç¼–è¯‘ Kernel**</span><br><span class="line"></span><br><span class="line">  * æ“ä½œç³»ç»Ÿæœ¬èº«</span><br><span class="line"></span><br><span class="line">  * å…ˆæŠŠ.cæ–‡ä»¶ å’Œ .S æ±‡ç¼–æ–‡ä»¶ç”Ÿæˆ**ç›®æ ‡æ–‡ä»¶**ï¼Œä¹‹åä½¿ç”¨**è¿æ¥å™¨**ç”Ÿæˆ Kernel</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;bash</span><br><span class="line">    + cc kern&#x2F;init&#x2F;init.c</span><br><span class="line">    gcc -Ikern&#x2F;init&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;init&#x2F;init.c -o obj&#x2F;kern&#x2F;init&#x2F;init.o</span><br><span class="line">    + cc kern&#x2F;libs&#x2F;readline.c</span><br><span class="line">    gcc -Ikern&#x2F;libs&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;libs&#x2F;readline.c -o obj&#x2F;kern&#x2F;libs&#x2F;readline.o</span><br><span class="line">    + cc kern&#x2F;libs&#x2F;stdio.c</span><br><span class="line">    gcc -Ikern&#x2F;libs&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;libs&#x2F;stdio.c -o obj&#x2F;kern&#x2F;libs&#x2F;stdio.o</span><br><span class="line">    + cc kern&#x2F;debug&#x2F;kdebug.c</span><br><span class="line">    gcc -Ikern&#x2F;debug&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;debug&#x2F;kdebug.c -o obj&#x2F;kern&#x2F;debug&#x2F;kdebug.o</span><br><span class="line">    + cc kern&#x2F;debug&#x2F;kmonitor.c</span><br><span class="line">    gcc -Ikern&#x2F;debug&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;debug&#x2F;kmonitor.c -o obj&#x2F;kern&#x2F;debug&#x2F;kmonitor.o</span><br><span class="line">    + cc kern&#x2F;debug&#x2F;panic.c</span><br><span class="line">    gcc -Ikern&#x2F;debug&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;debug&#x2F;panic.c -o obj&#x2F;kern&#x2F;debug&#x2F;panic.o</span><br><span class="line">    + cc kern&#x2F;driver&#x2F;clock.c</span><br><span class="line">    gcc -Ikern&#x2F;driver&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;driver&#x2F;clock.c -o obj&#x2F;kern&#x2F;driver&#x2F;clock.o</span><br><span class="line">    + cc kern&#x2F;driver&#x2F;console.c</span><br><span class="line">    gcc -Ikern&#x2F;driver&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;driver&#x2F;console.c -o obj&#x2F;kern&#x2F;driver&#x2F;console.o</span><br><span class="line">    + cc kern&#x2F;driver&#x2F;intr.c</span><br><span class="line">    gcc -Ikern&#x2F;driver&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;driver&#x2F;intr.c -o obj&#x2F;kern&#x2F;driver&#x2F;intr.o</span><br><span class="line">    + cc kern&#x2F;driver&#x2F;picirq.c</span><br><span class="line">    gcc -Ikern&#x2F;driver&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;driver&#x2F;picirq.c -o obj&#x2F;kern&#x2F;driver&#x2F;picirq.o</span><br><span class="line">    + cc kern&#x2F;trap&#x2F;trap.c</span><br><span class="line">    gcc -Ikern&#x2F;trap&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;trap&#x2F;trap.c -o obj&#x2F;kern&#x2F;trap&#x2F;trap.o</span><br><span class="line">    + cc kern&#x2F;trap&#x2F;trapentry.S</span><br><span class="line">    gcc -Ikern&#x2F;trap&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;trap&#x2F;trapentry.S -o obj&#x2F;kern&#x2F;trap&#x2F;trapentry.o</span><br><span class="line">    + cc kern&#x2F;trap&#x2F;vectors.S</span><br><span class="line">    gcc -Ikern&#x2F;trap&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;trap&#x2F;vectors.S -o obj&#x2F;kern&#x2F;trap&#x2F;vectors.o</span><br><span class="line">    + cc kern&#x2F;mm&#x2F;pmm.c</span><br><span class="line">    gcc -Ikern&#x2F;mm&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F; -Ikern&#x2F;debug&#x2F; -Ikern&#x2F;driver&#x2F; -Ikern&#x2F;trap&#x2F; -Ikern&#x2F;mm&#x2F; -c kern&#x2F;mm&#x2F;pmm.c -o obj&#x2F;kern&#x2F;mm&#x2F;pmm.o</span><br><span class="line">    + cc libs&#x2F;printfmt.c</span><br><span class="line">    gcc -Ilibs&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F;  -c libs&#x2F;printfmt.c -o obj&#x2F;libs&#x2F;printfmt.o</span><br><span class="line">    + cc libs&#x2F;string.c</span><br><span class="line">    gcc -Ilibs&#x2F; -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs&#x2F;  -c libs&#x2F;string.c -o obj&#x2F;libs&#x2F;string.o</span><br><span class="line">    </span><br><span class="line">    + ld bin&#x2F;kernel</span><br><span class="line">    ld -m    elf_i386 -nostdlib -T tools&#x2F;kernel.ld -o bin&#x2F;kernel  obj&#x2F;kern&#x2F;init&#x2F;init.o obj&#x2F;kern&#x2F;libs&#x2F;readline.o obj&#x2F;kern&#x2F;libs&#x2F;stdio.o obj&#x2F;kern&#x2F;debug&#x2F;kdebug.o obj&#x2F;kern&#x2F;debug&#x2F;kmonitor.o obj&#x2F;kern&#x2F;debug&#x2F;panic.o obj&#x2F;kern&#x2F;driver&#x2F;clock.o obj&#x2F;kern&#x2F;driver&#x2F;console.o obj&#x2F;kern&#x2F;driver&#x2F;intr.o obj&#x2F;kern&#x2F;driver&#x2F;picirq.o obj&#x2F;kern&#x2F;trap&#x2F;trap.o obj&#x2F;kern&#x2F;trap&#x2F;trapentry.o obj&#x2F;kern&#x2F;trap&#x2F;vectors.o obj&#x2F;kern&#x2F;mm&#x2F;pmm.o  obj&#x2F;libs&#x2F;printfmt.o obj&#x2F;libs&#x2F;string.o</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>ç¼–è¯‘ sign</strong></p>
<ul>
<li><p>ç”¨äºç”Ÿæˆä¸€ä¸ª<strong>ç¬¦åˆè§„èŒƒ</strong> çš„ <strong>ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº</strong></p>
</li>
<li><p>```bash</p>
<ul>
<li>cc tools/sign.c<br>gcc -Itools/ -g -Wall -O2 -c tools/sign.c -o obj/sign/tools/sign.o<br>gcc -g -Wall -O2 obj/sign/tools/sign.o -o bin/sign<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **ç”Ÿæˆ ucore.img**</span><br><span class="line"></span><br><span class="line">  * **dd** - **è½¬æ¢å’Œæ‹·è´æ–‡ä»¶**</span><br><span class="line"></span><br><span class="line">    * &gt; &#96;if&#96;  ä»£è¡¨**è¾“å…¥æ–‡ä»¶**ã€‚å¦‚æœä¸æŒ‡å®šifï¼Œé»˜è®¤å°±ä¼šä» &#96;stdin&#96;ä¸­è¯»å–è¾“å…¥ã€‚ </span><br><span class="line">      &gt; &#96;of&#96;  ä»£è¡¨**è¾“å‡ºæ–‡ä»¶**ã€‚å¦‚æœä¸æŒ‡å®šofï¼Œé»˜è®¤å°±ä¼šå°†&#96;stdout&#96;ä½œä¸ºé»˜è®¤è¾“å‡ºã€‚ </span><br><span class="line">      &gt; &#96;bs&#96; ä»£è¡¨å­—èŠ‚ä¸ºå•ä½çš„å—å¤§å°ã€‚ </span><br><span class="line">      &gt; &#96;count&#96; ä»£è¡¨è¢«å¤åˆ¶çš„å—æ•°ã€‚ </span><br><span class="line">      &gt; &#96;&#x2F;dev&#x2F;zero&#96; æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡ï¼Œä¼šä¸æ–­è¿”å›0å€¼å­—èŠ‚ï¼ˆ\0ï¼‰</span><br><span class="line">      &gt; &#96;conv&#x3D;notrunc&#96;    è¾“å…¥æ–‡ä»¶çš„æ—¶å€™ï¼Œæºæ–‡ä»¶ä¸ä¼šè¢«æˆªæ–­</span><br><span class="line">      &gt; &#96;seek&#x3D;blocks&#96;     ä»è¾“å‡ºæ–‡ä»¶å¼€å¤´è·³è¿‡ blocks(512å­—èŠ‚) ä¸ªå—åå†å¼€å§‹å¤åˆ¶</span><br><span class="line"></span><br><span class="line">  * **è¿‡ç¨‹**ï¼šç”Ÿæˆä¸€ä¸ªç©ºçš„è½¯ç›˜é•œåƒï¼Œç„¶åæŠŠ bootloader ä»¥ä¸æˆªæ–­çš„æ–¹å¼å¡«å……åˆ°**å¼€å§‹çš„å—**ä¸­ï¼Œç„¶å kernel è·³è¿‡bootloader æ‰€åœ¨çš„å—ï¼Œå†å¡«å……</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;bash</span><br><span class="line">    dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;bin&#x2F;ucore.img count&#x3D;10000</span><br><span class="line">    dd if&#x3D;bin&#x2F;bootblock of&#x3D;bin&#x2F;ucore.img conv&#x3D;notrunc</span><br><span class="line">    dd if&#x3D;bin&#x2F;kernel of&#x3D;bin&#x2F;ucore.img seek&#x3D;1 conv&#x3D;notrunc</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>uCore.imgçš„ç”Ÿæˆè¿‡ç¨‹ï¼š</strong></p>
<ol>
<li><strong>ç¼–è¯‘</strong>æ‰€æœ‰ç”Ÿæˆ bin/<strong>kernel</strong> æ‰€éœ€çš„æ–‡ä»¶(.Sæ±‡ç¼–æ–‡ä»¶, .cæ–‡ä»¶)</li>
<li><strong>é“¾æ¥</strong>ç”Ÿæˆ bin/<strong>kernel</strong> </li>
<li><strong>ç¼–è¯‘</strong> bootasm.S bootmain.c  sign.c</li>
<li>æ ¹æ® sign è§„èŒƒ<strong>ç”Ÿæˆ</strong> obj/bootblock.o</li>
<li>ç”Ÿæˆ <strong>ucore.img</strong></li>
</ol>
<ul>
<li><p><strong>ç”Ÿæˆ Kernel æ–‡ä»¶</strong></p>
<ol>
<li>æ ¹æ® .c, .s æ–‡ä»¶ç”Ÿæˆ .oæ–‡ä»¶</li>
<li>æ ¹æ® <code>kernel.ld </code>æ–‡ä»¶ï¼Œä½¿ç”¨<code>ld</code>é“¾æ¥å™¨ï¼Œå°† .o æ–‡ä»¶é“¾æ¥æˆ kernel æ–‡ä»¶</li>
</ol>
</li>
<li><p><strong>ç”Ÿæˆ Bootblock æ–‡ä»¶</strong></p>
<ol>
<li>å°† <code>bootasm.S</code> , <code>bootmain.c </code>ç¼–è¯‘æˆå„è‡ªç›¸å¯¹åº” .o æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆ .d</li>
<li>ä½¿ç”¨ é“¾æ¥å™¨ å°† .o æ–‡ä»¶ç”Ÿæˆ bootblock.o æ–‡ä»¶</li>
<li>ä½¿ç”¨ <code>objcopy</code> å°† bootblock.o äºŒè¿›åˆ¶æ‹·è´è‡³ <code>bootblock.out</code></li>
<li><code>sign.c</code> ç”Ÿæˆ <code>sign.o</code>ï¼Œ å†ç”± <code>sign.o </code>ç”Ÿæˆ sign æ–‡ä»¶</li>
<li>ç”¨ <code>sig</code>n ç¨‹åºï¼Œåˆ©ç”¨ <code>bootblock.out</code>ç”Ÿæˆ bootblock æ–‡ä»¶</li>
</ol>
</li>
<li><p><strong>åˆ©ç”¨ddå‘½ä»¤ï¼Œä½¿ç”¨ kernelã€bootblock ç”Ÿæˆ ucore.img</strong></p>
<ol>
<li><p>ä» <code>/dev/zero</code> æ–‡ä»¶ï¼Œè·å¾— 10000 ä¸ªblockï¼ˆæ¯ä¸ªblock 512 å­—èŠ‚ï¼‰ï¼Œå‡ä¸ºç©ºå­—ç¬¦ï¼Œè¾“å‡ºåˆ° ucore.img</p>
</li>
<li><p>ä» bootblock æ–‡ä»¶ä¸­è·å–æ•°æ®ï¼Œè¾“å‡ºåˆ° ucore.img ä¸­çš„ç¬¬ä¸€ä¸ªblock</p>
<ul>
<li><code>-notruct</code> ä¸å¯¹æ•°æ®è¿›è¡Œåˆ å‡</li>
</ul>
</li>
<li><p>ä» kernel æ–‡ä»¶è·å–æ•°æ®ï¼Œè¾“å‡ºåˆ° ucore.img çš„ç¬¬äºŒä¸ª block</p>
<ul>
<li><code>seek = 1</code> è·³è¿‡ç¬¬ä¸€ä¸ªblock</li>
</ul>
</li>
</ol>
</li>
</ul>
<h5 id="é—®é¢˜äºŒï¼šä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„-ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº-çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ"><a href="#é—®é¢˜äºŒï¼šä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„-ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº-çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ" class="headerlink" title="é—®é¢˜äºŒï¼šä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ"></a><strong>é—®é¢˜äºŒï¼š</strong>ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯<strong>ç¬¦åˆè§„èŒƒçš„ ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº çš„ç‰¹å¾</strong>æ˜¯ä»€ä¹ˆ</h5><ul>
<li><code>less tools/sign.c</code><ul>
<li><img src="C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210405162827372.png" alt="image-20210405162827372"></li>
<li>è¯¥æ‰‡åŒºç¬¬ 510 ä¸ªå­—èŠ‚æ˜¯<code>0x55</code>, ç¬¬ 511 ä¸ªå­—èŠ‚æ˜¯ <code>0xAA</code></li>
<li>è¯¥æ‰‡åŒºæœ‰ 512 ä¸ªå­—èŠ‚</li>
<li>å¤šä½™ç©ºé—´å¡« 0</li>
</ul>
</li>
</ul>
<h3 id="ç»ƒä¹ äºŒï¼šä½¿ç”¨-qemu-æ‰§è¡Œå¹¶è°ƒè¯•-lab-1-ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰"><a href="#ç»ƒä¹ äºŒï¼šä½¿ç”¨-qemu-æ‰§è¡Œå¹¶è°ƒè¯•-lab-1-ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰" class="headerlink" title="ç»ƒä¹ äºŒï¼šä½¿ç”¨ qemu æ‰§è¡Œå¹¶è°ƒè¯• lab 1 ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰"></a>ç»ƒä¹ äºŒï¼šä½¿ç”¨ qemu æ‰§è¡Œå¹¶è°ƒè¯• lab 1 ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰</h3><ul>
<li><p><strong>ä¸ºäº†ç†Ÿæ‚‰ä½¿ç”¨ qemu å’Œ gdb è¿›è¡Œçš„è°ƒè¯•å·¥ä½œï¼Œå°ç»ƒä¹ ï¼š</strong></p>
<ol>
<li><p>ä» CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª BIOS çš„æ‰§è¡Œ</p>
</li>
<li><p>åœ¨åˆå§‹åŒ–ä½ç½®è®¾ç½® 0x7c00 è®¾ç½®æ—¶åœ°å€æ–­ç‚¹ï¼Œæµ‹è¯•æ–­ç‚¹æ­£å¸¸</p>
</li>
<li><p>ä» 0x7c00 å¼€å§‹è·Ÿè¸ªä»£ç è¿è¡Œï¼Œå°†å•æ­¥è·Ÿè¸ªåæ±‡ç¼–å¾—åˆ°çš„ä»£ç ä¸ bootasm.S å’Œ bootblock.asm è¿›è¡Œæ¯”è¾ƒ</p>
</li>
<li><p>è‡ªå·±æ‰¾ä¸€ä¸ª bootloader æˆ–å†…æ ¸ä¸­çš„ä»£ç ä½ç½®ï¼Œè®¾ç½®æ–­ç‚¹å¹¶è¿›è¡Œæµ‹è¯•</p>
</li>
</ol>
</li>
<li><p>æç¤ºï¼šå‚è€ƒ é™„å½•â€œå¯åŠ¨åç¬¬ä¸€æ¡æ‰§è¡Œçš„æŒ‡ä»¤â€ï¼Œå¯äº†è§£æ›´è¯¦ç»†çš„è§£é‡Šï¼Œä»¥åŠå¦‚ä½•å•æ­¥è°ƒè¯•å¹¶æŸ¥çœ‹ BIOS ä»£ç </p>
</li>
<li><p>æç¤ºï¼šæŸ¥çœ‹ <code>labcodes_answer/lab1_result/tools/lab1init </code>æ–‡ä»¶ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤è¯•è¯•å¦‚ä½•è°ƒè¯•bootloaderç¬¬ä¸€æ¡æŒ‡ä»¤ï¼š</p>
<ul>
<li>```<br>$ cd labcodes_answer/lab1_result/<br>$ make lab1-mon<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* **é»˜è®¤çš„ gdb éœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®æ‰è¿›è¡Œ qemu çš„è°ƒè¯•**ï¼Œqemu å’Œgdbä¹‹é—´ä½¿ç”¨ ç½‘ç»œç«¯å£ 1234 è¿›è¡Œé€šè®¯</span><br><span class="line">  * æ‰“å¼€qemu è¿›è¡Œæ¨¡æ‹Ÿä¹‹åï¼Œæ‰§è¡Œgdbå¹¶è¾“å…¥&#96;target remote local:1234&#96;</span><br><span class="line">  * å¯è¿æ¥qemuï¼Œæ­¤æ—¶qemuè¿›å…¥åœæ­¢çŠ¶æ€ï¼Œå¬ä» gdb å‘½ä»¤</span><br><span class="line"></span><br><span class="line">* *gdb çš„åœ°å€æ–­ç‚¹*ï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;b *[åœ°å€]&#96;ï¼šåœ¨æŒ‡å®šå†…å­˜åœ°å€è®¾ç½®æ–­ç‚¹ï¼Œå½“qemu ä¸­çš„ CPU æ‰§è¡Œåˆ°æŒ‡å®šåœ°å€æ—¶ï¼Œä¾¿ä¼šå°†æ§åˆ¶æƒäº¤ç»™ gdb</span><br><span class="line"></span><br><span class="line">* *å…³äºä»£ç çš„åæ±‡ç¼–*</span><br><span class="line"></span><br><span class="line">  * å¯èƒ½ gdb æ— æ³•æ­£ç¡®è·å– å½“å‰ qemu æ‰§è¡Œçš„æ±‡ç¼–æŒ‡ä»¤ï¼Œå¦‚ä¸‹é…ç½®å¯ä»¥åœ¨æ¯æ¬¡ gdb å‘½ä»¤è¡Œå‰å¼ºåˆ¶åæ±‡ç¼–å½“å‰çš„æŒ‡ä»¤ï¼Œåœ¨ gdb å‘½ä»¤è¡Œæˆ–é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š</span><br><span class="line"></span><br><span class="line">    * &#96;&#96;&#96;</span><br><span class="line">      define hook-stop</span><br><span class="line">      x&#x2F;i $pc</span><br><span class="line">      end</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><em>gdb çš„å•æ­¥å‘½ä»¤ï¼š</em></p>
<ul>
<li>next ï¼š å•æ­¥åˆ°ç¨‹åºæºä»£ç çš„ä¸‹ä¸€è¡Œï¼Œä¸è¿›å…¥å‡½æ•°</li>
<li>nexti ï¼š ä½†ä¸ä¸€æ¡æœºå™¨æŒ‡ä»¤ï¼Œä¸è¿›å…¥å‡½æ•°</li>
<li>stepï¼šå•æ­¥åˆ°ä¸‹ä¸€ä¸ªä¸åŒçš„æºä»£ç è¡Œï¼ˆè¿›å…¥å‡½æ•°ï¼‰</li>
<li>stepiï¼šå•æ­¥ä¸€æ¡æœºå™¨æŒ‡ä»¤ï¼Œè¿›å…¥å‡½æ•°</li>
</ul>
</li>
</ul>
<h4 id="æŠ¥å‘Š-1"><a href="#æŠ¥å‘Š-1" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><h5 id="2-1-ä»CPU-åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª-BIOS-çš„æ‰§è¡Œ"><a href="#2-1-ä»CPU-åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª-BIOS-çš„æ‰§è¡Œ" class="headerlink" title="2.1 ä»CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª BIOS çš„æ‰§è¡Œ"></a>2.1 ä»CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª BIOS çš„æ‰§è¡Œ</h5><ul>
<li><p>é™„å½•ï¼š<strong>å•æ­¥è°ƒè¯•å’ŒæŸ¥çœ‹ BIOS ä»£ç </strong></p>
<ol>
<li><p>ä¿®æ”¹<code> lab1/tools/gdbinit</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set architecture i8086</span><br><span class="line">target remote :1234</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨ lab 1 ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ<code>make debug</code></p>
<p>è¿™æ—¶ï¼Œgdb åœåœ¨ BIOS çš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¤„ï¼š<code>0xffff0: ljmp $0xf000, $0xe05b</code></p>
</li>
<li><p>åœ¨è¿›å…¥ gdb è°ƒè¯•ç•Œé¢åï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ° BIOS åœ¨æ‰§è¡Œäº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">si</span><br><span class="line">si</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li>
<li><p>æ­¤æ—¶çš„ <code>CS=0xf, IP=fff0</code>,å¦‚æœæƒ³çœ‹ BIOS ä»£ç </p>
<p><code>x /2i 0xffff0</code></p>
<p>å¯ä»¥çœ‹åˆ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0xffff0: ljmp $0xf000,$0xe05b</span><br><span class="line">0xffff5: xor %dh,0x322f</span><br></pre></td></tr></table></figure>

<p>è¿›ä¸€æ­¥æ‰§è¡Œ<code>x /10i 0xfe05b</code></p>
<p>å¯ä»¥çœ‹åˆ°åç»­ä»£ç </p>
</li>
</ol>
</li>
</ul>
<ul>
<li><p><code>gdbinit  </code>åŸå†…å®¹ä¸ºï¼šå¯¹å†…æ ¸ä»£ç è¿›è¡Œè°ƒè¯•ï¼Œå¹¶ä¸”å°†æ–­ç‚¹è®¾ç½®åœ¨å†…æ ¸ä»£ç çš„å…¥å£åœ°å€ï¼Œå³ <code>kern_intit</code>  å‡½æ•°</p>
<ul>
<li>```<br>file bin/kernel            //å¯¹å†…æ ¸ä»£ç è¿›è¡Œè°ƒè¯•<br>target remote :1234<br>break kern_init            //å°†æ–­ç‚¹è®¾ç½®åœ¨kern_init<br>continue<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä¸ºäº†ä»CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹è°ƒè¯•ï¼Œå°†&#96;gdbinit&#96;å†…å®¹æ”¹ä¸ºï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;</span><br><span class="line">    set architecture i8086		&#x2F;&#x2F;æ”¹åŠ¨</span><br><span class="line">    </span><br><span class="line">    target remote :1234</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æ‰§è¡Œ<code>make debug</code>ï¼šå¼¹å‡º QEMU å’Œ Terminalçª—å£ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ Makefile ä¸­å®šä¹‰äº†debugçš„æ“ä½œæ­£æ˜¯å¯åŠ¨ QEMUã€Terminalå¹¶åœ¨å…¶ä¸­è¿è¡Œ gdb</p>
<ul>
<li><p>-hda file: ç¡¬ç›˜é€‰é¡¹</p>
</li>
<li><p>-S : å¯åŠ¨çš„æ—¶å€™ä¸ç›´æ¥ä»CPUå¯åŠ¨ï¼Œéœ€è¦åœ¨çª—å£ä¸­æŒ‰ c æ¥ç»§ç»­</p>
</li>
<li><p>-parallel dev : é‡å®šå‘è™šæ‹Ÿ<strong>å¹¶å£</strong>åˆ°ä¸»æœºè®¾å¤‡</p>
</li>
<li><p>-serial devï¼šé‡å®šå‘è™šæ‹Ÿ<strong>ä¸²å£</strong>åˆ°ä¸»æœºè®¾å¤‡</p>
<ul>
<li>vc: è™šæ‹Ÿæ§åˆ¶å°</li>
<li>ptyï¼šä»…ä»…linuxæœ‰æ•ˆï¼Œè™šæ‹Ÿttyï¼ˆä¸€ä¸ªè™šæ‹Ÿä¼ªç»ˆç«¯ä¼šè¢«ç«‹åˆ»åˆ†é…</li>
<li>noneï¼šæ²¡æœ‰è®¾å¤‡è¢«åˆ†é…</li>
<li>nullï¼šæ— æ•ˆè®¾å¤‡</li>
</ul>
</li>
<li><p>gdbï¼š</p>
<ul>
<li>-x ï¼šä»æ–‡ä»¶ä¸­æ‰§è¡Œ gdb </li>
<li>-qï¼šä¸è¦æ‰“å°ä»‹ç»å’Œç‰ˆæƒä¿¡æ¯</li>
<li>-tuiï¼šå¯ä»¥å°†ç»ˆç«¯å±å¹•åˆ†æˆæºæ–‡æœ¬çª—å£å’Œæ§åˆ¶å°çš„å¤šä¸ªå­çª—å£</li>
</ul>
</li>
<li><p>```<br>debug: $(UCOREIMG)    </p>
<pre><code>$(V)$(QEMU) -S -s -parallel stdio -hda $&lt; -serial null &amp;        
$(V)sleep 2
$(V)$(TERMINAL) -e &quot;gdb -q -tui -x tools/gdbinit&quot;
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* &#96;make debug&#96; : Terminal çª—å£æ­¤æ—¶åœåœ¨&#96; 0x0000fff0 &#96;ä½ç½®ï¼Œè¿™æ˜¯ eip å¯„å­˜å™¨çš„å€¼</span><br><span class="line"></span><br><span class="line">  â€‹	è€Œcs å¯„å­˜å™¨çš„å€¼ä¸º&#96;0xf000&#96;</span><br><span class="line"></span><br><span class="line">  ![image-20210406205944058](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406205944058.png)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">* è¾“å…¥ &#96;si&#96;ï¼Œæ‰§è¡Œä¸€æ­¥, eip å˜æˆ &#96;0xe05b&#96;ï¼Œè€Œcs ä¸å˜</span><br><span class="line"></span><br><span class="line">  * ![image-20210406210105732](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406210105732.png)</span><br><span class="line"></span><br><span class="line">##### 2.2 åœ¨åˆå§‹åŒ–ä½ç½®è®¾ç½® 0x7c00 è®¾ç½®æ—¶åœ°å€æ–­ç‚¹ï¼Œæµ‹è¯•æ–­ç‚¹æ­£å¸¸</span><br><span class="line"></span><br><span class="line">* &#96;break *adress&#96;: åœ¨æŒ‡å®šåœ°å€å¤„è®¾ç½®æ–­ç‚¹ï¼Œä¸€èˆ¬åœ¨æ²¡æœ‰æºä»£ç æ—¶ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">* è¾“å…¥&#96;break *0x7c00&#96;</span><br><span class="line">* è¾“å…¥&#96;continue&#96;</span><br><span class="line">  * ![image-20210406210223703](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406210223703.png)</span><br><span class="line"></span><br><span class="line">##### 2.3 ä» 0x7c00 å¼€å§‹è·Ÿè¸ªä»£ç è¿è¡Œï¼Œå°†å•æ­¥è·Ÿè¸ªåæ±‡ç¼–å¾—åˆ°çš„ä»£ç ä¸ bootasm.S å’Œ bootblock.asm è¿›è¡Œæ¯”è¾ƒ</span><br><span class="line"></span><br><span class="line">* &#96;x&#x2F;10i $pc&#96;:æ˜¾ç¤ºç¨‹åºå½“å‰ä½ç½®å¼€å§‹å¾€å 10 æ¡æ±‡ç¼–æŒ‡ä»¤</span><br><span class="line"></span><br><span class="line">* è¾“å…¥&#96;x&#x2F;10i $pc&#96;</span><br><span class="line">  * ![image-20210406210251460](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406210251460.png)</span><br><span class="line"></span><br><span class="line">##### 2.4 è‡ªå·±æ‰¾ä¸€ä¸ª bootloader æˆ–å†…æ ¸ä¸­çš„ä»£ç ä½ç½®ï¼Œè®¾ç½®æ–­ç‚¹å¹¶è¿›è¡Œæµ‹è¯•</span><br><span class="line"></span><br><span class="line">* è°ƒè¯• bootblock çš„ä»£ç </span><br><span class="line"></span><br><span class="line">* è®¾ç½®æ–­ç‚¹ä¸º 0x7c00åœ°å€ å¤„</span><br><span class="line"></span><br><span class="line">* ä¿®æ”¹&#96; tools&#x2F;gdbinit &#96;ä¸º</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;</span><br><span class="line">    &#x2F;&#x2F;tools&#x2F;gdbinit&quot;  </span><br><span class="line">    file obj&#x2F;bootblock.o </span><br><span class="line">    target remote :1234 </span><br><span class="line">    set architecture i8086 </span><br><span class="line">    b *0x7c00 </span><br><span class="line">    continue </span><br><span class="line">    x &#x2F;10i $pc</span><br></pre></td></tr></table></figure></li>
<li><p>![image-20210405213757021](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210405213757021.png)</p>
</li>
<li><p>![image-20210405213817816](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210405213817816.png)</p>
</li>
</ul>
</li>
</ul>
<h3 id="ç»ƒä¹ ä¸‰ï¼šåˆ†æ-bootloader-è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹"><a href="#ç»ƒä¹ ä¸‰ï¼šåˆ†æ-bootloader-è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹" class="headerlink" title="ç»ƒä¹ ä¸‰ï¼šåˆ†æ bootloader è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹"></a>ç»ƒä¹ ä¸‰ï¼šåˆ†æ bootloader è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹</h3><ul>
<li><strong>BIOS</strong> å°†é€šè¿‡<strong>è¯»å–ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºåˆ°å†…å­˜</strong>ï¼Œå¹¶è·³è½¬åˆ°å¯¹åº”å†…å­˜ä¸­çš„ä½ç½®æ‰§è¡Œ bootloader </li>
<li>åˆ†æ bootloader å¦‚ä½•ä»å®æ¨¡å¼è¿›å…¥ä¿æŠ¤æ¨¡å¼</li>
<li>éœ€è¦é˜…è¯»ï¼š<strong>ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶</strong> å’Œ <code>lab1/boot/bootasm.S</code> æºç ï¼Œ<ul>
<li>ä¸ºä½•å¼€å¯ A20 ï¼Œä»¥åŠå¦‚ä½•å¼€å¯</li>
<li>å¦‚ä½•åˆå§‹åŒ– GDT è¡¨</li>
<li>å¦‚ä½• ä½¿èƒ½ å’Œ è¿›å…¥ä¿æŠ¤æ¨¡å¼</li>
</ul>
</li>
</ul>
<h4 id="æŠ¥å‘Š-2"><a href="#æŠ¥å‘Š-2" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><p>bootloader ä»å®æ¨¡å¼è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„ä»£ç  ä¿æŒåœ¨<code>lab1/boot/bootasm.S</code> ä¸­</p>
<h5 id="ä¸ºä½•å¼€å¯-A20-ï¼Œ-å¦‚ä½•å¼€å¯A-20"><a href="#ä¸ºä½•å¼€å¯-A20-ï¼Œ-å¦‚ä½•å¼€å¯A-20" class="headerlink" title="ä¸ºä½•å¼€å¯ A20 ï¼Œ å¦‚ä½•å¼€å¯A 20"></a>ä¸ºä½•å¼€å¯ A20 ï¼Œ å¦‚ä½•å¼€å¯A 20</h5><ul>
<li><p>bootloader çš„å…¥å£ ä¸º start</p>
</li>
<li><p>bootloader ä¼šè¢« BIOS åŠ è½½åˆ°å†…å­˜ <code>0x7c00</code> å¤„ <code>cs = 0, eip = 0x7c</code></p>
</li>
<li><p>åˆšè¿›å…¥ bootloader æ—¶ï¼Œå…ˆæ‰§è¡Œï¼š</p>
<ul>
<li>![image-20210407191652178](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407191652178.png)</li>
<li>å…³é—­ä¸­æ–­</li>
<li>æ¸…é™¤ <code>EFLAGS</code> çš„<code> DF</code> ä½</li>
<li>å°† <code>axã€dsã€esã€ss</code> åˆå§‹åŒ–ä¸º0</li>
</ul>
</li>
<li><p><strong>ä¸ºä½•å¼€å¯ A20 :</strong></p>
<ul>
<li>ä¸ºäº†ä½¿å¾— CPU è¿›å…¥ä¿æŠ¤æ¨¡å¼åï¼Œèƒ½å……åˆ†ä½¿ç”¨ 32 ä½çš„å¯»å€èƒ½åŠ›</li>
</ul>
</li>
<li><p><strong>å¦‚ä½•å¼€å¯ A20ï¼š</strong></p>
<ul>
<li>ç­‰å¾… 8042 æ§åˆ¶å™¨ Input Bufferä¸ºç©º</li>
<li>å‘é€ P2å‘½ä»¤åˆ°Input Buffer</li>
<li>ç­‰å¾… Input Buffer ä¸ºç©º</li>
<li>å°† P2 å¾—åˆ°çš„ç¬¬äºŒä¸ªä½ï¼ˆA20é€‰é€šï¼‰ç½®ä¸º1</li>
<li>å†™å›Input Buffer</li>
</ul>
</li>
<li><p>é¦–å…ˆï¼Œä»0x64å†…å­˜åœ°å€ä¸­ï¼ˆæ˜ å°„åˆ°8042çš„status registerï¼‰ä¸­è¯»å–8042çš„çŠ¶æ€ï¼Œç›´åˆ°è¯»å–åˆ°çš„è¯¥å­—èŠ‚çš„ç¬¬äºŒä½ï¼ˆinput bufferï¼‰ä¸º0ï¼Œè¡¨ç¤ºæ­¤æ—¶ input bufferä¸­æ— æ•°æ®</p>
<ul>
<li>![image-20210407194037024](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194037024.png)</li>
</ul>
</li>
<li><p>æ¥ä¸‹æ¥å‘ 0x64 ä¸­å†™å…¥ 0xd1 å‘½ä»¤ï¼Œè¡¨ç¤ºä¿®æ”¹ 8042 P2 port</p>
<ul>
<li>![image-20210407194155534](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194155534.png)</li>
</ul>
</li>
<li><p>æ¥ä¸‹æ¥ç­‰å¾… input bufferä¸ºç©º</p>
<ul>
<li>![image-20210407194234798](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194234798.png)</li>
</ul>
</li>
<li><p>æ¥ä¸‹æ¥ï¼Œå‘ 0x60 ç«¯å£å†™å…¥ 0xdf, è¡¨ç¤ºå°† P2 portçš„ç¬¬äºŒä¸ªä½ï¼ˆA20ï¼‰é€‰é€šï¼Œç½®ä¸º1</p>
<ul>
<li>![image-20210407194403140](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194403140.png)</li>
</ul>
</li>
<li></li>
</ul>
<h5 id="å¦‚ä½•åˆå§‹åŒ–-GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰"><a href="#å¦‚ä½•åˆå§‹åŒ–-GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰" class="headerlink" title="å¦‚ä½•åˆå§‹åŒ– GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰"></a>å¦‚ä½•åˆå§‹åŒ– GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰</h5><ul>
<li>åœ¨ bootasm.S ä¸­å·²ç»é™æ€çš„æè¿°äº†ä¸€ä¸ªç®€å•çš„ GDT<ul>
<li>![image-20210407194832302](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194832302.png)</li>
<li>GDT ä¸­ä»£ç æ®µå’Œæ•°æ®æ®µ çš„baseå‡è®¾ç½®ä¸ºäº† 0</li>
<li>è€Œ limitè®¾ç½®ä¸ºäº† 2^32-1 å³ 4 Gï¼Œä½¿å¾—é€»è¾‘åœ°å€ç­‰äºçº¿æ€§åœ°å€</li>
</ul>
</li>
</ul>
<h5 id="å¦‚ä½•-ä½¿èƒ½-å’Œ-è¿›å…¥ä¿æŠ¤æ¨¡å¼"><a href="#å¦‚ä½•-ä½¿èƒ½-å’Œ-è¿›å…¥ä¿æŠ¤æ¨¡å¼" class="headerlink" title="å¦‚ä½• ä½¿èƒ½ å’Œ è¿›å…¥ä¿æŠ¤æ¨¡å¼"></a>å¦‚ä½• ä½¿èƒ½ å’Œ è¿›å…¥ä¿æŠ¤æ¨¡å¼</h5><ul>
<li>åªéœ€è¦å°†cr0 å¯„å­˜å™¨çš„PEä½ ç½®ä¸º1ï¼Œå³å¯åˆ‡æ¢è‡³ä¿æŠ¤æ¨¡å¼<ul>
<li>A20 å¼€å¯åï¼Œ<code>lgdt gdtdesc</code> å¯è½½å…¥å…¨å±€æè¿°ç¬¦è¡¨</li>
<li>![image-20210407195211157](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407195211157.png)</li>
</ul>
</li>
<li>ä½¿ç”¨é•¿è·³è½¬æŒ‡ä»¤ , å°† cs ä¿®æ”¹ä¸º 32 ä½å¯„å­˜å™¨ï¼Œå¹¶ä¸”è·³è½¬åˆ° protcseg è¿™ä¸€32ä½ä»£ç å…¥å£ï¼Œæ­¤æ—¶CPUè¿›å…¥32ä½æ¨¡å¼ï¼š<ul>
<li>![image-20210407195333677](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407195333677.png)</li>
</ul>
</li>
</ul>
<h3 id="ç»ƒä¹ å››ï¼šåˆ†æ-bootloader-åŠ è½½-ELF-æ ¼å¼çš„-OS-çš„è¿‡ç¨‹"><a href="#ç»ƒä¹ å››ï¼šåˆ†æ-bootloader-åŠ è½½-ELF-æ ¼å¼çš„-OS-çš„è¿‡ç¨‹" class="headerlink" title="ç»ƒä¹ å››ï¼šåˆ†æ bootloader åŠ è½½ ELF æ ¼å¼çš„ OS çš„è¿‡ç¨‹"></a>ç»ƒä¹ å››ï¼šåˆ†æ bootloader åŠ è½½ ELF æ ¼å¼çš„ OS çš„è¿‡ç¨‹</h3><p>è¦æ±‚ï¼š</p>
<ul>
<li>é€šè¿‡é˜…è¯» <code>bootmain.c</code>, äº†è§£ bootloader å¦‚ä½•åŠ è½½ ELF æ–‡ä»¶</li>
<li>é€šè¿‡åˆ†ææºä»£ç å’Œé€šè¿‡ qemu æ¥è¿è¡Œ å¹¶è°ƒè¯•bootloaderå’ŒOS<ul>
<li>bootloader å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº</li>
<li>bootloader å¦‚ä½•åŠ è½½ ELF æ ¼å¼çš„ OS</li>
</ul>
</li>
</ul>
<h4 id="æŠ¥å‘Š-3"><a href="#æŠ¥å‘Š-3" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><h5 id="bootloader-å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº"><a href="#bootloader-å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº" class="headerlink" title="bootloader å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº"></a>bootloader å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº</h5><p>å¯¹ bootmain.c ä¸­ä¸è¯»å–ç¡¬ç›˜æ‰‡åŒºä»£ç åˆ†æï¼š</p>
<ul>
<li><p>é¦–å…ˆï¼Œ<code>waitdisk</code>, è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯è¿ç»­ä¸æ–­åœ°ä»<code>0x1f7</code>åœ°å€ï¼Œè¯»å–ç£ç›˜çš„çŠ¶æ€ï¼Œç›´åˆ°ç£ç›˜ä¸å¿™ä¸ºæ­¢</p>
<ul>
<li>![image-20210407204024075](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407204024075.png)</li>
</ul>
</li>
<li><p>æ¥ä¸‹æ¥ï¼Œ<code>readsect</code>, è¯»å–ä¸€ä¸ªç¡¬ç›˜æ‰‡åŒºï¼Œ</p>
<ul>
<li>```c<br>static void<br>readsect(void *dst, uint32_t secno) {<pre><code>waitdisk(); // ç­‰å¾…ç£ç›˜åˆ°ä¸å¿™ä¸ºæ­¢

outb(0x1F2, 1);             // å¾€0X1F2åœ°å€ä¸­å†™å…¥è¦è¯»å–çš„æ‰‡åŒºæ•°ï¼Œç”±äºæ­¤å¤„éœ€è¦è¯»ä¸€ä¸ªæ‰‡åŒºï¼Œå› æ­¤å‚æ•°ä¸º1
outb(0x1F3, secno &amp; 0xFF); // è¾“å…¥LBAå‚æ•°çš„0...7ä½ï¼›
outb(0x1F4, (secno &gt;&gt; 8) &amp; 0xFF); // è¾“å…¥LBAå‚æ•°çš„8-15ä½ï¼›
outb(0x1F5, (secno &gt;&gt; 16) &amp; 0xFF); // è¾“å…¥LBAå‚æ•°çš„16-23ä½ï¼›
outb(0x1F6, ((secno &gt;&gt; 24) &amp; 0xF) | 0xE0); // è¾“å…¥LBAå‚æ•°çš„24-27ä½ï¼ˆå¯¹åº”åˆ°0-3ä½ï¼‰ï¼Œç¬¬å››ä½ä¸º0è¡¨ç¤ºä»ä¸»ç›˜è¯»å–ï¼Œå…¶ä½™ä½è¢«å¼ºåˆ¶ç½®ä¸º1ï¼›
outb(0x1F7, 0x20);                      // å‘ç£ç›˜å‘å‡ºè¯»å‘½ä»¤0x20

waitdisk(); // ç­‰å¾…ç£ç›˜ç›´åˆ°ä¸å¿™

insl(0x1F0, dst, SECTSIZE / 4); // ä»æ•°æ®ç«¯å£0x1F0è¯»å–æ•°æ®ï¼Œé™¤ä»¥4æ˜¯å› ä¸ºæ­¤å¤„æ˜¯ä»¥4ä¸ªå­—èŠ‚ä¸ºå•ä½çš„ï¼Œè¿™ä¸ªä»æŒ‡ä»¤æ˜¯ä»¥l(long)ç»“å°¾è¿™ç‚¹å¯ä»¥æ¨æµ‹å‡ºæ¥ï¼›
</code></pre>
}<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * **è¯»å–ç£ç›˜æ‰‡åŒºçš„è¿‡ç¨‹ï¼š**</span><br><span class="line">    * ç­‰å¾…ç£ç›˜ä¸å¿™</span><br><span class="line">    * å‘ &#96;0x1f2-0x1f6&#96;ä¸­ è®¾ç½®è¯»å–æ‰‡åŒºéœ€è¦çš„å‚æ•°ï¼Œ</span><br><span class="line">      * è¯»å–çš„æ‰‡åŒºæ•°</span><br><span class="line">      * LBA å‚æ•°</span><br><span class="line">    * å‘&#96;0x1f7&#96;å‘é€å‘½ä»¤&#96;0X20&#96;â€”â€”è¯»å‘½ä»¤</span><br><span class="line">    * ç­‰å¾…ç£ç›˜å®Œæˆè¯»æ“ä½œ</span><br><span class="line">    * ä»æ•°æ®ç«¯å£&#96;0x1f0&#96;è¯»å–æ•°æ®åˆ°æŒ‡å®šå†…å­˜ä¸­</span><br><span class="line"></span><br><span class="line">* å¦å¤–ä¸€ä¸ªä¸è¯»å–ç£ç›˜ç›¸å…³çš„å‡½æ•°&#96;readseg&#96;ï¼Œ</span><br><span class="line"></span><br><span class="line">  * å°†&#96;readsec&#96;è¿›ä¸€æ­¥å°è£…</span><br><span class="line">  * æä¾›èƒ½å¤Ÿä»ç£ç›˜ ç¬¬äºŒä¸ªæ‰‡åŒºèµ·ï¼ˆkernelï¼‰ offset ä¸ªä½ç½®å¤„ï¼Œè¯»å– count ä¸ªå­—èŠ‚åˆ°æŒ‡å®šå†…å­˜</span><br><span class="line">  * &#96;readsec&#96; åªèƒ½å¯¹æ•´ä¸ªæ‰‡åŒºè¿›è¡Œè¯»å–</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### bootloader å¦‚ä½•å°† ELF æ ¼å¼çš„ OS åŠ è½½å…¥å†…å­˜</span><br><span class="line"></span><br><span class="line">* bootloader åŠ è½½ ELF æ ¼å¼çš„ OS ä»£ç ä½äºÂ·&#96;bootmain.c&#96; ä¸­çš„ bootmain å‡½æ•°</span><br><span class="line">  * **é¦–å…ˆï¼Œ**ä»ç£ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼ˆkernelï¼Œç¬¬é›¶ä¸ªæ‰‡åŒºä¸ºbootloaderï¼‰ä¸­è¯»å–kernelæœ€å¼€å§‹çš„ 4 KBä»£ç ï¼Œç„¶ååˆ¤æ–­æœ€å¼€å§‹çš„å››ä¸ªå­—èŠ‚æ˜¯å¦ç­‰äºæŒ‡å®šçš„ &#96;ELF_MAGIC&#96;, ç”¨äºåˆ¤æ–­ ELF headeræ˜¯å¦åˆæ³•</span><br><span class="line">    * ![image-20210407205626699](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407205626699.png)</span><br><span class="line">  * **æ¥ä¸‹æ¥**ï¼Œä»&#96;ELFHDR &#96;â€”â€”ELF å¤´æ–‡ä»¶ä¸­è·å–åˆ° &#96;program header&#96;**è¡¨**çš„ä½ç½®ï¼Œä»¥åŠè¯¥è¡¨çš„å…¥å£æ•°ç›®ï¼Œç„¶åéå†è¯¥è¡¨æ¯ä¸€é¡¹ï¼Œå¹¶ä¸”ä»æ¯ä¸€ä¸ªprogram headerä¸­è·å–åˆ° **æ®µ** åº”è¯¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­çš„ä½ç½®ï¼ˆLoad Addressï¼Œè™šæ‹Ÿåœ°å€ï¼‰ï¼Œä»¥åŠæ®µçš„å¤§å°ï¼Œç„¶åè°ƒç”¨ &#96;readseg&#96; å‡½æ•°å°†æ¯ä¸€ä¸ªæ®µåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè‡³æ­¤å®Œæˆäº†å°† OS åŠ è½½åˆ°å†…å­˜ä¸­çš„æ“ä½œ</span><br><span class="line">    * ![image-20210407210008007](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407210008007.png)</span><br><span class="line">  * **æœ€å**ï¼Œä»&#96;ELFHDR&#96;â€”â€”ELF å¤´æ–‡ä»¶ä¸­æŸ¥è¯¢åˆ° OS kernelçš„**å…¥å£åœ°å€**ï¼Œç„¶åä½¿ç”¨å‡½æ•°è°ƒç”¨çš„æ–¹å¼è·³è½¬åˆ°è¯¥åœ°å€</span><br><span class="line">    * ![image-20210407210213172](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407210213172.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ç»ƒä¹ äº”ï¼šå®ç°å‡½æ•°è°ƒç”¨å †æ ˆè·Ÿè¸ªå‡½æ•°</span><br><span class="line"></span><br><span class="line">* åœ¨ &#96;lab1&#96; ä¸­å®Œæˆ &#96;kdebug.c&#96; ä¸­å‡½æ•°&#96;print_stackframe&#96;çš„å®ç°</span><br><span class="line"></span><br><span class="line">  * å¯ä»¥é€šè¿‡è¯¥å‡½æ•° è·Ÿè¸ªå‡½æ•°è°ƒç”¨å †æ ˆä¸­è®°å½•çš„è¿”å›åœ°å€</span><br><span class="line"></span><br><span class="line">* è‹¥èƒ½æ­£ç¡®å®ç°è¯¥å‡½æ•°ï¼Œ&#96;make qemu&#96;åï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;bash</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    ebp:0x00007b28 eip:0x00100992 args:0x00010094 0x00010094 0x00007b58 0x00100096</span><br><span class="line">        kern&#x2F;debug&#x2F;kdebug.c:305: print_stackframe+22</span><br><span class="line">    ebp:0x00007b38 eip:0x00100c79 args:0x00000000 0x00000000 0x00000000 0x00007ba8</span><br><span class="line">        kern&#x2F;debug&#x2F;kmonitor.c:125: mon_backtrace+10</span><br><span class="line">    ebp:0x00007b58 eip:0x00100096 args:0x00000000 0x00007b80 0xffff0000 0x00007b84</span><br><span class="line">        kern&#x2F;init&#x2F;init.c:48: grade_backtrace2+33</span><br><span class="line">    ebp:0x00007b78 eip:0x001000bf args:0x00000000 0xffff0000 0x00007ba4 0x00000029</span><br><span class="line">        kern&#x2F;init&#x2F;init.c:53: grade_backtrace1+38</span><br><span class="line">    ebp:0x00007b98 eip:0x001000dd args:0x00000000 0x00100000 0xffff0000 0x0000001d</span><br><span class="line">        kern&#x2F;init&#x2F;init.c:58: grade_backtrace0+23</span><br><span class="line">    ebp:0x00007bb8 eip:0x00100102 args:0x0010353c 0x00103520 0x00001308 0x00000000</span><br><span class="line">        kern&#x2F;init&#x2F;init.c:63: grade_backtrace+34</span><br><span class="line">    ebp:0x00007be8 eip:0x00100059 args:0x00000000 0x00000000 0x00000000 0x00007c53</span><br><span class="line">        kern&#x2F;init&#x2F;init.c:28: kern_init+88</span><br><span class="line">    ebp:0x00007bf8 eip:0x00007d73 args:0xc031fcfa 0xc08ed88e 0x64e4d08e 0xfa7502a8</span><br><span class="line">    &lt;unknow&gt;: -- 0x00007d72 â€“</span><br><span class="line">    â€¦â€¦</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å‰ç½®çŸ¥è¯†ï¼šå‡½æ•°å †æ ˆï¼š</p>
<ul>
<li>äº†è§£ç¼–è¯‘å™¨å¦‚ä½•å»ºç«‹<strong>å‡½æ•°è°ƒç”¨å…³ç³»</strong></li>
<li>æŸ¥çœ‹<code>bootblock.asm</code>, äº†è§£bootloaderæºç ä¸æœºå™¨ç çš„è¯­å¥å’Œåœ°å€ç­‰å¯¹åº”å…³ç³»</li>
<li>æŸ¥çœ‹<code>kernel.asm</code>, äº†è§£ ucore æºç ä¸æœºå™¨ç çš„è¯­å¥å’Œåœ°å€ç­‰å¯¹åº”å…³ç³»</li>
<li>å®Œæˆ<code>kern/debug/kdebug.c::print_stackframe</code>çš„å®ç°</li>
</ul>
</li>
</ul>
<h4 id="æŠ¥å‘Š-4"><a href="#æŠ¥å‘Š-4" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><p>å‰æçŸ¥è¯†ï¼š</p>
<p>ä¸€èˆ¬è€Œè¨€ï¼š<code>ss:[ebp+4]</code>ä¸º<strong>è¿”å›åœ°å€</strong>ï¼Œ<code>ss:[ebp+8]</code>ä¸º<strong>ç¬¬ä¸€ä¸ªå‚æ•°å€¼ï¼ˆ</strong>æœ€åä¸€ä¸ªå…¥æ ˆï¼‰,<code>ss:[ebp-4]</code>ä¸ºç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œ<code>ss:[ebp]</code>ä¸º<strong>ä¸Šä¸€å±‚ ebp å€¼</strong></p>
<ul>
<li><strong>ebp ä¸­çš„åœ°å€å¤„æ€»æ˜¯ä¸Šä¸€å±‚å‡½æ•°è°ƒç”¨æ—¶ ebp çš„å€¼</strong></li>
<li>è€Œæ¯ä¸€å±‚å‡½æ•°è°ƒç”¨ä¸­ï¼Œéƒ½èƒ½é€šè¿‡å½“æ—¶çš„ ebp å€¼ï¼Œ<strong>å‘ä¸Šï¼ˆæ ˆåº•æ–¹å‘ï¼‰è·å–è¿”å›åœ°å€ï¼Œå‚æ•°å€¼ï¼›å‘ä¸‹ï¼ˆæ ˆé¡¶æ–¹å‘ï¼‰è·å–å‡½æ•°å±€éƒ¨å˜é‡å€¼</strong></li>
<li>ç”±æ­¤å½¢æˆé€’å½’ï¼Œç›´è‡³åˆ°è¾¾æ ˆåº•ï¼Œè¿™å°±æ˜¯å‡½æ•°è°ƒç”¨æ ˆ</li>
</ul>
<p>æˆ‘çš„åšæ³•ï¼š</p>
<ul>
<li><p>å°è¯•æ ¹æ®ä»–çš„æ³¨é‡Šæ¥åšï¼š</p>
<ul>
<li><p>![image-20210409150011984](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210409150011984.png)</p>
</li>
<li><p>(1) è°ƒç”¨ å‡½æ•°<code>read_ebp()</code>å¾—åˆ° ebpçš„å€¼</p>
</li>
<li><p>(2) è°ƒç”¨å‡½æ•° <code>read_eip()</code> å¾—åˆ° eipçš„å€¼</p>
</li>
<li><p>(3) å¯¹äºæ ˆå¸§ <code>0-STACKFRAME_DEPTH</code></p>
<ul>
<li><p>ä½¿ç”¨<code>cprintf</code>è¾“å‡º ebpå’Œeipçš„å€¼</p>
</li>
<li><p>æœ‰äº†ebpçš„å€¼ï¼Œéœ€è¦æˆ‘ä»¬æ‰“å°å‰å››ä¸ªå‚æ•°å€¼ï¼Œè€Œæˆ‘ä»¬çŸ¥é“ ç¬¬ä¸€ä¸ªå‚æ•°å€¼ åœ¨<code>ss:[ebp+8]</code>ï¼Œå¯ç”¨<code>(uint32_t*)ï¼ˆebp+8ï¼‰</code>å–å¾—è¯¥å†…å­˜åœ°å€çš„å€¼</p>
</li>
<li><p>ä½¿ç”¨<code>print_debuginfo()</code>æ‰“å°å‡½æ•°å</p>
</li>
<li><p><em>è·å–ä¸Šä¸€å±‚å‡½æ•°çš„è¿”å›åœ°å€å’Œebpçš„å€¼</em></p>
<ul>
<li><blockquote>
<p>æ ¹æ®åŠ¨æ€é“¾æŸ¥æ‰¾å½“å‰å‡½æ•°çš„è°ƒç”¨è€…(caller)çš„æ ˆå¸§, æ ¹æ®çº¦å®šï¼Œcallerçš„æ ˆå¸§çš„base pointerå­˜æ”¾åœ¨calleeçš„ebpæŒ‡å‘çš„å†…å­˜å•å…ƒï¼Œå°†å…¶æ›´æ–°åˆ°ebpä¸´æ—¶å˜é‡ä¸­ï¼ŒåŒæ—¶å°†eip(ä»£ç ä¸­å¯¹åº”çš„å˜é‡ä¸ºra)æ›´æ–°ä¸ºè°ƒç”¨å½“å‰å‡½æ•°çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨ä½ç½®ï¼ˆreturn addressï¼‰ï¼Œå…¶æ ¹æ®çº¦å®šå­˜æ”¾åœ¨ebp+4æ‰€åœ¨çš„å†…å­˜å•å…ƒä¸­ï¼›</p>
</blockquote>
<blockquote>
<p> å¦‚æœebpéé›¶å¹¶ä¸”æ²¡æœ‰è¾¾åˆ°è§„å®šçš„<code>STACKFRAME DEPTH</code>çš„ä¸Šé™ï¼Œåˆ™è·³è½¬åˆ°2ï¼Œç»§ç»­å¾ªç¯æ‰“å°æ ˆä¸Šæ ˆå¸§å’Œå¯¹åº”å‡½æ•°çš„ä¿¡æ¯ï¼›</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>unknownï¼š</strong></p>
<ul>
<li><code>*(uint32_t*)x</code>: xæ˜¯ä¸€ä¸ªåœ°å€ï¼Œ<code>(unint32_t*)å°†xå¼ºåˆ¶è½¬æ¢æˆæŒ‡å‘unint32_tçš„æŒ‡é’ˆ</code></li>
<li><code>read_ebp()</code></li>
<li><code>read_eip()</code></li>
<li><code>STACKFRAME_DEPTH</code></li>
<li><code>cprintf(&quot;\n&quot;)</code></li>
<li><code>print_debuginfo()</code></li>
</ul>
</li>
<li><p>```C<br>void print_stackframe(void) {</p>
<pre><code>uint32_t value_ebp = read_ebp();
uint32_t value_eip = read_eip();
for(int i = 0; i&lt;STACKFRAME_DEPTH; i++)&#123;
    cprintf(&quot;ebp: 0x%08x eip:0x%08x&quot;,value_ebp, value_eip);
    cprintf(&quot;arguments: &quot;);
    
    uint32_t* p = (uint32_t*)(value_ebp+8);
    cprintf(&quot;0x%08x 0x%08x 0x%08x 0x%08x &quot;,p[0],p[1],p[2],p[3]); 
    //(uint32_t)calling arguments [0..4] = the contents in address (uint32_t)ebp +2 [0..4]
    
    cprintf(&quot;\n&quot;);
    print_debuginfo(value_eip-1);
    
    value_eip = *(uint32_t*)(value_ebp+4);
    value_ebp = *(uint32_t*)(value_ebp);
    //popup a calling stackframe
&#125;
        
</code></pre>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ![image-20210409161023480](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210409161023480.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* å®ç°å‡½æ•°</span><br><span class="line"></span><br><span class="line">1. é¦–å…ˆä½¿ç”¨read_ebpå’Œread_eipå‡½æ•°è·å–å½“å‰stack frameçš„base pointerä»¥åŠ&#96;call read_eip&#96;è¿™æ¡æŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œå­˜å…¥ebp, eipä¸¤ä¸ªä¸´æ—¶å˜é‡ä¸­ï¼›</span><br><span class="line"></span><br><span class="line">2. æ¥ä¸‹æ¥ä½¿ç”¨cprintå‡½æ•°æ‰“å°å‡ºebp, eipçš„æ•°å€¼ï¼›</span><br><span class="line"></span><br><span class="line">3. æ¥ä¸‹æ¥æ‰“å°å‡ºå½“å‰æ ˆå¸§å¯¹åº”çš„å‡½æ•°å¯èƒ½çš„å‚æ•°ï¼Œæ ¹æ®cè¯­è¨€ç¼–è¯‘åˆ°x86æ±‡ç¼–çš„çº¦å®šï¼Œå¯ä»¥çŸ¥é“å‚æ•°å­˜æ”¾åœ¨ebp+8æŒ‡å‘çš„å†…å­˜ä¸Šï¼ˆæ ˆï¼‰ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ª...å‚æ•°æ‰€åœ¨çš„å†…å­˜åœ°å€åˆ†åˆ«ä¸ºebp+8, ebp+12, ebp+16, ...ï¼Œæ ¹æ®è¦æ±‚è¯»å–å‡ºå½“å‰å‡½æ•°çš„å‰å››ä¸ªå‚æ•°(ç”¨å¯èƒ½è¿™äº›å‚æ•°å¹¶ä¸æ˜¯å…¨éƒ½å­˜åœ¨ï¼Œè§†å…·ä½“å‡½æ•°è€Œå®š)ï¼Œå¹¶æ‰“å°å‡ºæ¥ï¼›</span><br><span class="line"></span><br><span class="line">4. ä½¿ç”¨print_debuginfoæ‰“å°å‡ºå½“å‰å‡½æ•°çš„å‡½æ•°åï¼›</span><br><span class="line"></span><br><span class="line">5. æ ¹æ®åŠ¨æ€é“¾æŸ¥æ‰¾å½“å‰å‡½æ•°çš„è°ƒç”¨è€…(caller)çš„æ ˆå¸§, æ ¹æ®çº¦å®šï¼Œcallerçš„æ ˆå¸§çš„base pointerå­˜æ”¾åœ¨calleeçš„ebpæŒ‡å‘çš„å†…å­˜å•å…ƒï¼Œå°†å…¶æ›´æ–°åˆ°ebpä¸´æ—¶å˜é‡ä¸­ï¼ŒåŒæ—¶å°†eip(ä»£ç ä¸­å¯¹åº”çš„å˜é‡ä¸ºra)æ›´æ–°ä¸ºè°ƒç”¨å½“å‰å‡½æ•°çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨ä½ç½®ï¼ˆreturn addressï¼‰ï¼Œå…¶æ ¹æ®çº¦å®šå­˜æ”¾åœ¨ebp+4æ‰€åœ¨çš„å†…å­˜å•å…ƒä¸­ï¼›</span><br><span class="line"></span><br><span class="line">6. å¦‚æœebpéé›¶å¹¶ä¸”æ²¡æœ‰è¾¾åˆ°è§„å®šçš„STACKFRAME DEPTHçš„ä¸Šé™ï¼Œåˆ™è·³è½¬åˆ°2ï¼Œç»§ç»­å¾ªç¯æ‰“å°æ ˆä¸Šæ ˆå¸§å’Œå¯¹åº”å‡½æ•°çš„ä¿¡æ¯ï¼›</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;C</span><br><span class="line">void</span><br><span class="line">print_stackframe(void) &#123;</span><br><span class="line">    uint32_t ebp &#x3D; read_ebp();</span><br><span class="line">    uint32_t ra &#x3D; read_eip(); </span><br><span class="line">    for (int i &#x3D; 0; i &lt; STACKFRAME_DEPTH &amp;&amp; ebp !&#x3D; 0; ++ i) &#123;</span><br><span class="line">        cprintf(&quot;ebp:0x%08x eip:0x%08x &quot;, ebp, ra);</span><br><span class="line">        uint32_t* ptr &#x3D; (uint32_t *) (ebp + 8);</span><br><span class="line">        cprintf(&quot;args:0x%08x 0x%08x 0x%08x 0x%08x\n&quot;, ptr[0], ptr[1], ptr[2], ptr[3]);</span><br><span class="line">        print_debuginfo(ra - 1);</span><br><span class="line">        ra &#x3D; *((uint32_t *) (ebp + 4));</span><br><span class="line">        ebp &#x3D; *((uint32_t *) ebp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ†ææœ€åä¸€è¡Œè¾“å‡ºå„ä¸ªæ•°å€¼çš„æ„ä¹‰ï¼š</p>
</li>
<li><p>```css<br>ebp:0x00007bf8 eip:0x00007d6e args:0xc031fcfa 0xc08ed88e 0x64e4d08e 0xfa7502a8</p>
<pre><code>&lt;unknow&gt;: -- 0x00007d6d --
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ![image-20210408100708052](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210408100708052.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### è§£é‡Šæœ€åä¸€è¡Œå„ä¸ªæ•°å€¼</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;bash</span><br><span class="line">ebp:0x00007bf8 eip:0x00007d6e args:0xc031fcfa 0xc08ed88e 0x64e4d08e 0xfa7502a8</span><br><span class="line">    &lt;unknow&gt;: -- 0x00007d6d --</span><br></pre></td></tr></table></figure></li>
<li><p><code>ebp:0x00007bf8</code>:ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨å‡½æ•°æ ˆå¸§çš„base pointer</p>
</li>
<li><p><code>eip:0x00007d6e</code>: è¯¥æ ˆå¸§å¯¹åº”å‡½æ•°ä¸­è°ƒç”¨çš„ä¸‹ä¸€ä¸ªæ ˆå¸§å¯¹åº”å‡½æ•°çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤</p>
</li>
<li><p><code>args:0xc031fcfa 0xc08ed88e 0x64e4d08e</code>: ä¼ é€’ç»™ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°</p>
</li>
<li><p><code>   &lt;unknow&gt;: -- 0x00007d6d --</code> : bootmain å‡½æ•°è°ƒç”¨OS kernelå…¥å£å‡½æ•°çš„è¯¥æŒ‡ä»¤çš„åœ°å€</p>
</li>
</ul>
<h3 id="ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†"><a href="#ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†" class="headerlink" title="ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†"></a>ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†</h3><ol>
<li>ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆä¿æŠ¤æ¨¡å¼ä¸‹çš„ä¸­æ–­å‘é‡è¡¨ï¼‰ä¸­ä¸€ä¸ªè¡¨é¡¹å å¤šå°‘å­—èŠ‚ï¼Ÿå…¶ä¸­å“ªå‡ ä½ä»£è¡¨ä¸­æ–­å¤„ç†ä»£ç ï¼Ÿ</li>
<li>ç¼–ç¨‹å®Œå–„<code>kern/trap/trap.c</code>ä¸­å¯¹ä¸­æ–­å‘é‡è¡¨è¿›è¡Œåˆå§‹åŒ–çš„å‡½æ•° <code>idt_init</code>, åœ¨è¯¥å‡½æ•°ä¸­ï¼Œä¾æ¬¡å¯¹æ‰€æœ‰ä¸­æ–­å…¥å£è¿›è¡Œåˆå§‹åŒ–ã€‚ä½¿ç”¨<code>mmu.h</code>ä¸­çš„<code>SETGATE</code>å®ï¼Œå¡«å……<code>idt</code>æ•°ç»„å†…å®¹ã€‚æ¯ä¸ªä¸­æ–­å…¥å£ç”±<code>tools/vector.c</code>ç”Ÿæˆï¼Œä½¿ç”¨<code>trap.c</code>ä¸­å£°æ˜çš„vectorsæ•°æ®å³å¯</li>
<li>ç¼–ç¨‹å®Œå–„trap.cä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°trap , åœ¨å¯¹æ—¶é’Ÿä¸­æ–­è¿›è¡Œå¤„ç†çš„éƒ¨åˆ†å¡«å†™trapå‡½æ•°ä¸­å¤„ç†æ—¶é’Ÿä¸­æ–­çš„éƒ¨åˆ†ï¼Œä½¿æ“ä½œç³»ç»Ÿæ¯é‡åˆ°100æ¬¡æ—¶é’Ÿä¸­æ–­åï¼Œè°ƒç”¨print_tickså­ç¨‹åºï¼Œå‘å±å¹•æ‰“å°ä¸€è¡Œæ–‡å­—<code>100 ticks</code></li>
</ol>
<ul>
<li>æ³¨æ„ï¼š<ul>
<li>é™¤äº†ç³»ç»Ÿè°ƒç”¨ï¼ˆ<code>T_SYSCALL</code>ï¼‰ä½¿ç”¨ <strong>é™·é˜±é—¨æè¿°ç¬¦</strong> ä¸”æƒé™ä¸º <strong>ç”¨æˆ·æ€æƒé™</strong> ä»¥å¤–</li>
<li>å…¶ä»–ä¸­æ–­å‡ä½¿ç”¨<strong>ç‰¹æƒçº§ï¼ˆDPLï¼‰ä¸º0</strong>çš„ <strong>ä¸­æ–­é—¨æè¿°ç¬¦</strong></li>
<li>uCoreçš„åº”ç”¨ç¨‹åºå¤„äºç‰¹æƒçº§ 3 ï¼Œéœ€é‡‡ç”¨<code>int 0x80</code></li>
<li>ç³»ç»Ÿè°ƒç”¨ä¸­æ–­<code>T_SYSCALL</code>æ‰€å¯¹åº”çš„ä¸­æ–­é—¨æè¿°ç¬¦ä¸­çš„ç‰¹æƒçº§è®¾ç½®ä¸º 3</li>
</ul>
</li>
<li>è¦æ±‚ï¼š<ul>
<li>å®Œæˆé—®é¢˜2å’Œé—®é¢˜3 æå‡ºçš„ç›¸å…³å‡½æ•°å®ç°ï¼Œæäº¤æ”¹è¿›åçš„æºä»£ç åŒ…ï¼ˆå¯ä»¥ç¼–è¯‘æ‰§è¡Œï¼‰ï¼Œå¹¶åœ¨å®éªŒæŠ¥å‘Šä¸­ç®€è¦è¯´æ˜å®ç°è¿‡ç¨‹ï¼Œå¹¶å†™å‡ºå¯¹é—®é¢˜1çš„å›ç­”</li>
<li>å®Œæˆè¿™é—®é¢˜2å’Œ3è¦æ±‚çš„éƒ¨åˆ†ä»£ç åï¼Œè¿è¡Œæ•´ä¸ªç³»ç»Ÿï¼Œå¯ä»¥çœ‹åˆ°å¤§çº¦æ¯1ç§’ä¼šè¾“å‡ºä¸€æ¬¡â€100 ticksâ€ï¼Œè€ŒæŒ‰ä¸‹çš„é”®ä¹Ÿä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤º</li>
</ul>
</li>
</ul>
<h4 id="æŠ¥å‘Š-5"><a href="#æŠ¥å‘Š-5" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><blockquote>
<p><strong>ä¸­æ–­å‘é‡è¡¨è°ƒç”¨å…³ç³»</strong><br>ç³»ç»Ÿå‘ç”Ÿä¸­æ–­â€”&gt;ä¸­æ–­å·ï¼ˆ0~255ï¼‰â€“&gt;æ‰¾åˆ°IDTï¼Œæ‹¿åˆ°æ®µé€‰æ‹©å­å’Œåç§»â€”â€“&gt; æ‹¿ç€æ®µé€‰æ‹©å­æ‰¾GDTï¼Œæ‰¾åˆ°æ®µåŸºå€ï¼Œå†ä½¿ç”¨åç§»è·³è½¬åˆ°ç¨‹åºå…¥å£åœ°å€</p>
</blockquote>
<h5 id="ç¬¬ä¸€é—®"><a href="#ç¬¬ä¸€é—®" class="headerlink" title="ç¬¬ä¸€é—®"></a>ç¬¬ä¸€é—®</h5><blockquote>
<p>ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆä¿æŠ¤æ¨¡å¼ä¸‹çš„ä¸­æ–­å‘é‡è¡¨ï¼‰ä¸­ä¸€ä¸ªè¡¨é¡¹å å¤šå°‘å­—èŠ‚ï¼Ÿå…¶ä¸­å“ªå‡ ä½ä»£è¡¨ä¸­æ–­å¤„ç†ä»£ç ï¼Ÿ</p>
</blockquote>
<ul>
<li>ä¸­æ–­å‘é‡è¡¨ä¸€ä¸ªè¡¨é¡¹å ç”¨8å­—èŠ‚</li>
<li>2-3å­—èŠ‚æ˜¯æ®µé€‰æ‹©å­ï¼Œ0-1å­—èŠ‚å’Œ6-7å­—èŠ‚æ‹¼æˆåç§»ï¼Œä¸¤è€…è”åˆä¾¿æ˜¯ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€</li>
</ul>
<h5 id="ç¬¬äºŒé—®"><a href="#ç¬¬äºŒé—®" class="headerlink" title="ç¬¬äºŒé—®"></a>ç¬¬äºŒé—®</h5><blockquote>
<p>ç¼–ç¨‹å®Œå–„<code>kern/trap/trap.c</code>ä¸­å¯¹ä¸­æ–­å‘é‡è¡¨è¿›è¡Œåˆå§‹åŒ–çš„å‡½æ•° <code>idt_init</code>, åœ¨è¯¥å‡½æ•°ä¸­ï¼Œä¾æ¬¡å¯¹æ‰€æœ‰ä¸­æ–­å…¥å£è¿›è¡Œåˆå§‹åŒ–ã€‚ä½¿ç”¨<code>mmu.h</code>ä¸­çš„<code>SETGATE</code>å®ï¼Œå¡«å……<code>idt</code>æ•°ç»„å†…å®¹ã€‚æ¯ä¸ªä¸­æ–­å…¥å£ç”±<code>tools/vector.c</code>ç”Ÿæˆï¼Œä½¿ç”¨<code>trap.c</code>ä¸­å£°æ˜çš„vectorsæ•°æ®å³å¯</p>
</blockquote>
<ul>
<li><p>åœ¨idt.initå‡½æ•°ä¸­ï¼Œä¾æ¬¡å¯¹æ‰€æœ‰ä¸­æ–­å…¥å£è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨mmu.hä¸­çš„SETGATEå®</p>
<ul>
<li><blockquote>
<p>#define SETGATE(gate, istrap, sel, off, dpl) {            <br>   (gate).gd_off_15_0 = (uint32_t)(off) &amp; 0xffff;        <br>   (gate).gd_ss = (sel);                                <br>   (gate).gd_args = 0;                                    <br>   (gate).gd_rsv1 = 0;                                    <br>   (gate).gd_type = (istrap) ? STS_TG32 : STS_IG32;    <br>   (gate).gd_s = 0;                                    <br>   (gate).gd_dpl = (dpl);                                <br>   (gate).gd_p = 1;                                    <br>   (gate).gd_off_31_16 = (uint32_t)(off) &gt;&gt; 16;        <br>}<br>å‚æ•°ï¼š<br>gate:<br>istrap:é™·é˜±é—¨è®¾ä¸º1ï¼Œä¸­æ–­é—¨è®¾ä¸º0.<br>sel:æ®µé€‰æ‹©å­ï¼Œå…¨å±€æè¿°ç¬¦è¡¨çš„ä»£ç æ®µæ®µé€‰æ‹©å­ //memlayout.hé‡Œé¢æœ‰å®å®šä¹‰GD_KTEXT<br>off:å¤„ç†å‡½æ•°çš„å…¥å£åœ°å€ï¼Œå³__vectors[]ä¸­çš„å†…å®¹ã€‚<br>dpl:ç‰¹æƒçº§.ä»å®éªŒæŒ‡å¯¼ä¹¦ä¸­å¯çŸ¥ï¼Œucoreä¸­çš„åº”ç”¨ç¨‹åºå¤„äºç‰¹æƒçº§3ï¼Œå†…æ ¸æ€ç‰¹æƒçº§ä¸º0.</p>
</blockquote>
</li>
</ul>
</li>
<li><p>æ ¹æ®æ³¨é‡Šï¼š</p>
<ul>
<li>```C<br>/* LAB1 YOUR CODE : STEP 2 */<pre><code> /* (1) Where are the entry addrs of each Interrupt Service Routine (ISR)?
  *     All ISR&#39;s entry addrs are stored in __vectors. where is uintptr_t __vectors[] ?
  *     __vectors[] is in kern/trap/vector.S which is produced by tools/vector.c
  *     (try &quot;make&quot; command in lab1, then you will find vector.S in kern/trap DIR)
  *     You can use  &quot;extern uintptr_t __vectors[];&quot; to define this extern variable which will be used later.
  * (2) Now you should setup the entries of ISR in Interrupt Description Table (IDT).
  *     Can you see idt[256] in this file? Yes, it&#39;s IDT! you can use SETGATE macro to setup each item of IDT
  * (3) After setup the contents of IDT, you will let CPU know where is the IDT by using &#39;lidt&#39; instruction.
  *     You don&#39;t know the meaning of this instruction? just google it! and check the libs/x86.h to know more.
  *     Notice: the argument of lidt is idt_pd. try to find it!
  */
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* &#96;&#96;&#96;C</span><br><span class="line">  void</span><br><span class="line">  idt_init(void) &#123;</span><br><span class="line">      extern uintptr_t __vectors[];</span><br><span class="line">      for(int i &#x3D; 0; i &lt; sizeof(idt)&#x2F;sizeof(struct gatedesc); i++)</span><br><span class="line">      &#123;</span><br><span class="line">          SETGATE(idt[i], 0, GD_KTEXT, __vectors[i]; 0);</span><br><span class="line">      &#125;</span><br><span class="line">      SETGATE(idt[T_SYSCALL], 0, GD_KTEXT, __vectors[T_SYSCALL]; 3);</span><br><span class="line">      lidt(&amp;idt_pd);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="ç¬¬ä¸‰é—®"><a href="#ç¬¬ä¸‰é—®" class="headerlink" title="ç¬¬ä¸‰é—®"></a>ç¬¬ä¸‰é—®</h5><blockquote>
<p>ç¼–ç¨‹å®Œå–„trap.cä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°trap , åœ¨å¯¹æ—¶é’Ÿä¸­æ–­è¿›è¡Œå¤„ç†çš„éƒ¨åˆ†å¡«å†™trapå‡½æ•°ä¸­å¤„ç†æ—¶é’Ÿä¸­æ–­çš„éƒ¨åˆ†ï¼Œä½¿æ“ä½œç³»ç»Ÿæ¯é‡åˆ°100æ¬¡æ—¶é’Ÿä¸­æ–­åï¼Œè°ƒç”¨print_tickså­ç¨‹åºï¼Œå‘å±å¹•æ‰“å°ä¸€è¡Œæ–‡å­—<code>100 ticks</code></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> IRQ_OFFSET+IRQ_TIMER:</span><br><span class="line">    ticks++;</span><br><span class="line">    <span class="keyword">if</span> (ticks % TICK_NUM == <span class="number">0</span>) &#123;</span><br><span class="line">        print_ticks();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    make</span></span><br><span class="line"><span class="comment">    make qemu</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h1 id="3-ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹"><a href="#3-ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹" class="headerlink" title="3 ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹"></a>3 ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹</h1><h2 id="3-1-BIOS-å¯åŠ¨è¿‡ç¨‹"><a href="#3-1-BIOS-å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="3.1 BIOS å¯åŠ¨è¿‡ç¨‹"></a>3.1 BIOS å¯åŠ¨è¿‡ç¨‹</h2><ul>
<li>è®¡ç®—æœº<strong>åŠ ç”µå</strong>ï¼Œå…ˆæ‰§è¡Œ<strong>ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶</strong>ï¼Œå®Œæˆ<strong>åŸºæœ¬IOåˆå§‹åŒ–</strong>å’Œ<strong>å¼•å¯¼åŠ è½½åŠŸèƒ½</strong><ul>
<li><strong>åˆå§‹åŒ–ç¡¬ä»¶è®¾å¤‡</strong> ï¼Œ å»ºç«‹ç³»ç»Ÿçš„å†…å­˜ç©ºé—´æ˜ å°„å›¾</li>
<li>å°†ç³»ç»Ÿçš„è½¯ç¡¬ä»¶ç¯å¢ƒå¸¦åˆ°ä¸€ä¸ªåˆé€‚çš„çŠ¶æ€ï¼Œä»¥ä¾¿æœ€ç»ˆè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸å‡†å¤‡å¥½æ­£ç¡®çš„ç¯å¢ƒ</li>
<li><strong>æœ€ç»ˆå¼•å¯¼åŠ è½½ç¨‹åº</strong> æŠŠæ“ä½œç³»ç»Ÿå†…æ ¸æ˜ åƒ åŠ è½½åˆ° RAMä¸­ï¼Œå¹¶å°†ç³»ç»Ÿæ§åˆ¶æƒä¼ é€’ç»™å®ƒ</li>
</ul>
</li>
<li>æ“ä½œç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶ å­˜æ”¾åœ¨ ç£ç›˜ï¼ˆç¡¬ç›˜/è½¯ç›˜ï¼‰ã€å…‰ç›˜ã€EPROMã€ROMã€Flashç­‰ å¯åœ¨æ‰ç”µåç»§ç»­ä¿å­˜æ•°æ®çš„å­˜å‚¨ä»‹è´¨</li>
<li>è®¡ç®—æœºå¯åŠ¨åï¼ŒCPU ä¸€å¼€å§‹ä¼šåˆ°ä¸€ä¸ªç‰¹å®šçš„åœ°å€ å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤ï¼Œ<ul>
<li>è¿™ä¸ªç‰¹å®šçš„åœ°å€ å­˜æ”¾äº†<strong>ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶</strong>ï¼ˆIntel 80386 ä¸­æ˜¯ BIOS, å…¶æœ¬è´¨æ˜¯ä¸€ä¸ªå›ºå®šåœ¨ä¸»æ¿Flash/CMOS ä¸Šçš„è½¯ä»¶ï¼‰ï¼Œè´Ÿè´£å®Œæˆè®¡ç®—æœºçš„ <strong>åŸºæœ¬çš„I/Oåˆå§‹åŒ–</strong></li>
</ul>
</li>
<li><strong>ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶</strong>ï¼šç”± <strong>BIOS</strong> å’Œ ä½äº è½¯ç›˜/ç¡¬ç›˜<strong>å¼•å¯¼æ‰‡åŒº</strong>ä¸­çš„ <strong>OS Bootloader</strong>ï¼ˆåœ¨ucore ä¸­çš„ bootasm.S å’Œ bootmain.c ï¼‰ä¸€èµ·ç»„æˆ</li>
<li><strong>BIOS</strong> ï¼š<strong>å›ºå®šåœ¨è®¡ç®—æœº ROMï¼ˆ</strong>åªè¯»å­˜å‚¨å™¨ï¼‰ èŠ¯ç‰‡ä¸Šçš„ä¸€ä¸ªç‰¹æ®Šè½¯ä»¶ï¼Œä¸ºä¸Šå±‚è½¯ä»¶æä¾›æœ€åº•å±‚çš„ã€æœ€ç›´æ¥çš„ç¡¬ä»¶æ§åˆ¶ä¸æ”¯æŒ<ul>
<li>æ˜¯ PCè®¡ç®—æœºç¡¬ä»¶ ä¸ ä¸Šå±‚è½¯ä»¶ç¨‹åº ä¹‹é—´çš„æ¡¥æ¢ï¼Œè´Ÿè´£<strong>è®¿é—®å’Œæ§åˆ¶ç¡¬ä»¶</strong></li>
</ul>
</li>
</ul>
<ul>
<li>å¯¹äº Intel 80386ï¼š<ul>
<li>è®¡ç®—æœºåŠ ç”µåï¼ŒCPU ä»ç‰©ç†åœ°å€<code>0xfffffff0</code>ï¼ˆç”±åˆå§‹åŒ–çš„<code>CS: EIP</code> ç¡®å®šï¼Œæ­¤æ—¶ CS å’Œ IP çš„å€¼åˆ†åˆ«æ˜¯ <code>0xf000</code> å’Œ <code>0xfff0</code>ï¼‰å¼€å§‹æ‰§è¡Œ</li>
<li>åœ¨ <code>0xfffffff0</code> å¤„ï¼Œå­˜æ”¾äº†ä¸€æ¡<strong>è·³è½¬æŒ‡ä»¤</strong>ï¼Œé€šè¿‡è·³è½¬æŒ‡ä»¤è·³åˆ° <strong>BIOS ä¾‹è¡Œç¨‹åºèµ·å§‹ç‚¹</strong></li>
<li>BIOS åšå®Œ<strong>è®¡ç®—æœºç¡¬ä»¶è‡ªæ£€å’Œåˆå§‹åŒ–</strong>åï¼Œä¼šé€‰æ‹©ä¸€ä¸ªå¯åŠ¨è®¾å¤‡ï¼ˆè½¯ç›˜ã€ç¡¬ç›˜ã€å…‰ç›˜ç­‰ï¼‰ï¼Œå¹¶ä¸”<strong>è¯»å–è¯¥è®¾å¤‡çš„ç¬¬ä¸€æ‰‡åŒºï¼ˆå³ä¸»å¼•å¯¼æ‰‡åŒºæˆ–å¯åŠ¨æ‰‡åŒºï¼‰åˆ°å†…å­˜ä¸€ä¸ªç‰¹å®šçš„åœ°å€</strong> <code>0x7c00</code>å¤„</li>
<li>ç„¶åå°† <strong>CPU æ§åˆ¶æƒä¼šè½¬ç§»</strong>åˆ°é‚£ä¸ªåœ°å€ç»§ç»­æ‰§è¡Œ</li>
<li>è‡³æ­¤ï¼ŒBIOSçš„åˆå§‹åŒ–å·¥ä½œå®Œæˆï¼Œè¿›ä¸€æ­¥çš„å·¥ä½œäº¤ç»™ uCore çš„<strong>bootloader</strong> </li>
</ul>
</li>
</ul>
<h2 id="3-2-Bootloader-çš„å¯åŠ¨è¿‡ç¨‹"><a href="#3-2-Bootloader-çš„å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="3.2 Bootloader çš„å¯åŠ¨è¿‡ç¨‹"></a>3.2 Bootloader çš„å¯åŠ¨è¿‡ç¨‹</h2><ul>
<li><strong>BIOS</strong> å°†é€šè¿‡è¯»å–ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºåˆ°å†…å­˜ï¼Œå¹¶è·³è½¬åˆ°å¯¹åº”å†…å­˜ä¸­çš„ä½ç½®æ‰§è¡Œ bootloader</li>
<li><strong>Bootloaderï¼š</strong><ul>
<li>åˆ‡æ¢åˆ°<strong>ä¿æŠ¤æ¨¡å¼</strong>ï¼Œå¯ç”¨<strong>åˆ†æ®µæœºåˆ¶</strong></li>
<li>è¯»ç£ç›˜ä¸­ <strong>ELF æ‰§è¡Œæ–‡ä»¶æ ¼å¼</strong>çš„ uCore æ“ä½œç³»ç»Ÿåˆ°å†…å­˜</li>
<li>æ˜¾ç¤ºå­—ç¬¦ä¸²ä¿¡æ¯</li>
<li>æŠŠ<strong>æ§åˆ¶æƒ</strong>äº¤ç»™uCoreæ“ä½œç³»ç»Ÿ</li>
</ul>
</li>
<li>Bootloader å·¥ä½œçš„å®ç°æ–‡ä»¶ åœ¨ <code>lab1/boot/</code> ä¸‹çš„ asm.h, bootasm.S å’Œ bootmain.c</li>
</ul>
<h3 id="3-2-1-ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶"><a href="#3-2-1-ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶" class="headerlink" title="3.2.1 ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶"></a>3.2.1 ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶</h3><ul>
<li>Intel 80386 åªæœ‰è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼Œæ‰èƒ½å……åˆ†å‘æŒ¥å…¶å¼ºå¤§çš„åŠŸèƒ½<ul>
<li>æä¾›æ›´å¥½çš„ä¿æŠ¤æœºåˆ¶å’Œå¼ºå¤§çš„å¯»å€èƒ½åŠ›</li>
</ul>
</li>
<li>è‹¥æ²¡æœ‰ä¿æŠ¤æ¨¡å¼ï¼šåªæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ 8086 ï¼Œ<ul>
<li>æ²¡æœ‰ä¿æŠ¤æœºåˆ¶</li>
<li>ä»»ä½•åº”ç”¨è½¯ä»¶éƒ½å¯ä»¥ä»»æ„è®¿é—®æ‰€æœ‰çš„è®¡ç®—æœºèµ„æº</li>
<li>ä¸” åˆ†æ®µæœºåˆ¶ ä¸€ç›´å­˜åœ¨ï¼Œæ— æ³•å±è”½æˆ–é¿å…</li>
</ul>
</li>
<li>æ“ä½œç³»ç»ŸåŠŸèƒ½ï¼ˆå¦‚åˆ†é¡µæœºåˆ¶ï¼‰æ˜¯å»ºç«‹åœ¨ Intel 80386çš„ä¿æŠ¤æ¨¡å¼ä¸Šæ¥è®¾è®¡çš„</li>
</ul>
<h4 id="å®æ¨¡å¼"><a href="#å®æ¨¡å¼" class="headerlink" title="å®æ¨¡å¼"></a>å®æ¨¡å¼</h4><ul>
<li>åœ¨ Bootloader æ¥æ‰‹ BIOS çš„å·¥ä½œåï¼ŒPC ç³»ç»Ÿå¤„äºå®æ¨¡å¼ï¼ˆ16ä½æ¨¡å¼ï¼‰è¿è¡ŒçŠ¶æ€<ul>
<li>è¿™ç§çŠ¶æ€ä¸‹ï¼Œè½¯ä»¶å¯è®¿é—®çš„ç‰©ç†å†…å­˜ç©ºé—´ ä¸èƒ½è¶…è¿‡ 1 MB</li>
<li>æ— æ³•å‘æŒ¥Intel 80386 ä»¥ä¸Šçº§åˆ«çš„32ä½ CPU çš„4 GBçš„å†…å­˜ç®¡ç†èƒ½åŠ›</li>
</ul>
</li>
<li>å®æ¨¡å¼ å°†æ•´ä¸ªç‰©ç†å†…å­˜ çœ‹æˆåˆ†æ®µåŒºåŸŸ<ul>
<li>ç¨‹åºä»£ç  å’Œ æ•°æ®ä½äºä¸åŒçš„åŒºåŸŸ</li>
<li>æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·ç¨‹åºå¹¶æ²¡æœ‰åŒºåˆ«å¯¹å¾…</li>
<li>æ¯ä¸€ä¸ªæŒ‡é’ˆéƒ½æ˜¯æŒ‡å‘å®é™…çš„ç‰©ç†åœ°å€</li>
</ul>
</li>
<li>é€šè¿‡ä¿®æ”¹ A20 åœ°å€çº¿å¯ä»¥å®Œæˆä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼çš„è½¬æ¢</li>
</ul>
<h4 id="ä¿æŠ¤æ¨¡å¼"><a href="#ä¿æŠ¤æ¨¡å¼" class="headerlink" title="ä¿æŠ¤æ¨¡å¼"></a>ä¿æŠ¤æ¨¡å¼</h4><ul>
<li>åªæœ‰åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œ80386çš„å…¨éƒ¨ 32 æ ¹åœ°å€çº¿æœ‰æ•ˆ<ul>
<li>å¯»å€èƒ½åŠ›é«˜è¾¾ 4 GB çš„çº¿æ€§åœ°å€ç©ºé—´å’Œç‰©ç†åœ°å€ç©ºé—´</li>
<li>å¯è®¿é—® 64 TB ï¼ˆæœ‰2^14ä¸ªæ®µï¼Œæ¯ä¸ªæ®µæœ€å¸¦ç©ºé—´ä¸º 2^32 å­—èŠ‚ï¼‰çš„é€»è¾‘åœ°å€ç©ºé—´</li>
<li>å¯é‡‡ç”¨åˆ†æ®µå­˜å‚¨ç®¡ç† å’Œ åˆ†é¡µå­˜å‚¨ç®¡ç†æœºåˆ¶</li>
<li>ä¸ä»…ä¸º <strong>å­˜å‚¨å…±äº«å’Œä¿æŠ¤</strong> æä¾›äº†ç¡¬ä»¶æ”¯æŒï¼Œè€Œä¸”ä¸º<strong>å®ç°è™šæ‹Ÿå­˜å‚¨</strong>æä¾›äº†ç¡¬ä»¶æ”¯æŒ</li>
<li>æä¾›äº† <strong>4ä¸ªç‰¹æƒçº§</strong>å’Œ<strong>å®Œå–„çš„ç‰¹æƒæ£€æŸ¥æœºåˆ¶</strong> ï¼š æ—¢èƒ½å®ç° <strong>èµ„æºå…±äº«</strong>ï¼Œåˆèƒ½ <strong>ä¿è¯ä»£ç æ•°æ®çš„å®‰å…¨</strong> åŠ <strong>ä»»åŠ¡çš„éš”ç¦»</strong></li>
</ul>
</li>
<li>ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæœ‰ä¸¤ä¸ªæ®µè¡¨ï¼šéƒ½å¯ä»¥åŒ…å« 2^13 ä¸ª<strong>æè¿°ç¬¦</strong>ï¼Œå› æ­¤æœ€å¤šå¯ä»¥åŒæ—¶å­˜åœ¨ 2*2^13 ä¸ªæ®µ<ul>
<li><strong>GDT</strong> <strong>ï¼ˆGlobal Descriptor Tableï¼‰</strong></li>
<li><strong>LDT</strong> <strong>ï¼ˆLocal Descriptor Tableï¼‰</strong></li>
</ul>
</li>
<li>å®é™…ä¸Šï¼Œæ®µæœºåˆ¶ å¹¶ä¸èƒ½æ‰©å±•ç‰©ç†åœ°å€ç©ºé—´ï¼Œå¾ˆå¤§ç¨‹åº¦å±±ï¼Œå„ä¸ªæ®µçš„åœ°å€ç©ºé—´æ˜¯ç›¸äº’é‡å çš„<ul>
<li>æ‰€è°“ 64 TBï¼ˆ2^(14+32)ï¼‰é€»è¾‘åœ°å€ç©ºé—´åªæ˜¯ä¸€ä¸ªç†è®ºå€¼</li>
<li>32 ä½ä¿æŠ¤æ¨¡å¼ä¸‹ï¼ŒçœŸæ­£çš„ç‰©ç†ç©ºé—´åªæœ‰ 2^32 å­—èŠ‚</li>
</ul>
</li>
</ul>
<h4 id="åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶"><a href="#åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶" class="headerlink" title="åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶"></a>åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶</h4><ul>
<li><p>åªèƒ½åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä½¿ç”¨</p>
</li>
<li><p>åˆ†æ®µæœºåˆ¶ï¼šå°†å†…å­˜åˆ’åˆ†æˆä»¥ <strong>èµ·å§‹åœ°å€</strong> å’Œ <strong>é•¿åº¦é™åˆ¶</strong> è¿™ä¸¤ä¸ªäºŒç»´å‚æ•°è¡¨ç¤ºçš„å†…å­˜å—â€”â€”<strong>æ®µï¼ˆSegmentï¼‰</strong></p>
<ul>
<li>å³ç¼–è¯‘å™¨å°†æºç¨‹åºç¼–è¯‘æˆæ‰§è¡Œç¨‹åºæ—¶ç”¨åˆ°çš„ ä»£ç æ®µã€æ•°æ®æ®µã€å †å’Œæ ˆç­‰</li>
</ul>
</li>
<li><p>åˆ†æ®µæœºåˆ¶ï¼š</p>
<ul>
<li><strong>é€»è¾‘åœ°å€</strong></li>
<li><strong>æ®µæè¿°ç¬¦</strong>ï¼šæè¿°æ®µçš„å±æ€§</li>
<li><strong>æ®µæè¿°ç¬¦è¡¨</strong>ï¼šåŒ…å«å¤šä¸ªæ®µæè¿°ç¬¦çš„ æ•°ç»„</li>
<li><strong>æ®µé€‰æ‹©å­</strong>ï¼šæ®µå¯„å­˜å™¨ï¼Œç”¨äºå®šä½æ®µæè¿°ç¬¦è¡¨ä¸­ è¡¨é¡¹çš„<strong>ç´¢å¼•</strong></li>
</ul>
</li>
<li><p><strong>é€»è¾‘åœ°å€</strong> â€”â€”&gt; <strong>ç‰©ç†åœ°å€</strong></p>
<ul>
<li><strong>åˆ†æ®µåœ°å€è½¬æ¢</strong>ï¼š<strong>CPU</strong> æŠŠé€»è¾‘åœ°å€ï¼ˆç”±<strong>æ®µé€‰æ‹©å­ selector</strong> å’Œ <strong>æ®µåç§» offset</strong> ç»„æˆï¼‰<ul>
<li>å°† <strong>æ®µé€‰æ‹©å­</strong> çš„å†…å®¹ ä½œä¸º <strong>æ®µæè¿°ç¬¦è¡¨</strong> çš„ç´¢å¼•ï¼Œæ‰¾åˆ°è¡¨ä¸­å¯¹åº”çš„ <strong>æ®µæè¿°ç¬¦</strong>ï¼Œç„¶åæŠŠ æ®µæè¿°ç¬¦ ä¸­ä¿å­˜çš„ <strong>æ®µåŸºå€</strong> åŠ ä¸Š <strong>æ®µåç§»å€¼</strong>ï¼Œå½¢æˆ <strong>çº¿æ€§åœ°å€ï¼ˆLinear addressï¼‰</strong></li>
<li>è‹¥ä¸å¯åŠ¨ åˆ†é¡µå­˜å‚¨ç®¡ç†æœºåˆ¶ï¼Œåˆ™çº¿æ€§åœ°å€ ç­‰äº ç‰©ç†åœ°å€</li>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image002.png" alt="åˆ†æ®µåœ°å€è½¬æ¢åŸºæœ¬è¿‡ç¨‹"></li>
</ul>
</li>
<li><strong>åˆ†é¡µåœ°å€è½¬æ¢</strong>ï¼š<ul>
<li>æŠŠçº¿æ€§åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€</li>
</ul>
</li>
<li>çº¿æ€§åœ°å€ç©ºé—´ ç”±ä¸€ç»´çš„çº¿æ€§åœ°å€æ„æˆï¼Œçº¿æ€§åœ°å€ç©ºé—´å’Œç‰©ç†åœ°å€ç©ºé—´å¯¹ç­‰<ul>
<li>çº¿æ€§åœ°å€ 32 ä½é•¿ï¼Œçº¿æ€§åœ°å€ç©ºé—´å®¹é‡ä¸º 4 GB</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="æ®µæè¿°ç¬¦"><a href="#æ®µæè¿°ç¬¦" class="headerlink" title="æ®µæè¿°ç¬¦"></a>æ®µæè¿°ç¬¦</h5><ul>
<li>ä¿æŠ¤æ¨¡å¼ä¸‹çš„åˆ†æ®µç®¡ç†æœºåˆ¶ï¼Œæ¯ä¸ªæ®µæœ‰ä¸‰ä¸ªå‚æ•°æ„æˆï¼š<ul>
<li><blockquote>
<p>åœ¨ucoreä¸­çš„kern/mm/mmu.hä¸­çš„struct segdesc æ•°æ®ç»“æ„ä¸­æœ‰å…·ä½“çš„å®šä¹‰ã€‚</p>
</blockquote>
</li>
<li><strong>æ®µåŸºåœ°å€ï¼ˆBase Addressï¼‰</strong>ï¼šè§„å®šçº¿æ€§åœ°å€ç©ºé—´ä¸­ æ®µçš„èµ·å§‹åœ°å€<ul>
<li>80386 ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ®µåŸºåœ°å€ é•¿ 32 ä½</li>
<li>ä¸å¯»å€åœ°å€é•¿åº¦ç›¸åŒï¼Œæ‰€ä»¥ä»»ä½•ä¸€ä¸ªæ®µéƒ½å¯ä»¥ä»32ä½çº¿æ€§åœ°å€ç©ºé—´ä¸­çš„ä»»ä½•ä¸€ä¸ªå­—èŠ‚å¼€å§‹ï¼Œä¸åƒå®æ¨¡å¼ä¸‹è§„å®šçš„è¾¹ç•Œå¿…é¡»è¢« 16æ•´é™¤</li>
</ul>
</li>
<li><strong>æ®µç•Œé™ï¼ˆLimitï¼‰</strong>ï¼šè§„å®šç«¯çš„å¤§å°ã€‚<ul>
<li>80386 ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œç”¨ 20 ä½è¡¨ç¤º</li>
<li>æ®µç•Œé™ å¯ä»¥æ˜¯ä»¥ å­—èŠ‚ ä¸ºå•ä½æˆ–ä»¥ 4 K å­—èŠ‚ä¸ºå•ä½</li>
</ul>
</li>
<li><strong>æ®µå±æ€§ï¼ˆAttributesï¼‰</strong>ï¼šç¡®å®šæ®µçš„å„ç§æ€§è´¨<ul>
<li>æ®µå±æ€§ä¸­çš„ç²’åº¦ä½</li>
<li>ç±»å‹</li>
<li>æè¿°ç¬¦ç‰¹æƒçº§</li>
<li>æ®µå­˜åœ¨ä½</li>
<li>å·²è®¿é—®ä½</li>
</ul>
</li>
</ul>
</li>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image003.png" alt="æ®µæè¿°ç¬¦ç»“æ„"></li>
</ul>
<h5 id="å…¨å±€æè¿°ç¬¦è¡¨"><a href="#å…¨å±€æè¿°ç¬¦è¡¨" class="headerlink" title="å…¨å±€æè¿°ç¬¦è¡¨"></a>å…¨å±€æè¿°ç¬¦è¡¨</h5><ul>
<li><p>ä¿å­˜<strong>å¤šä¸ªæ®µæè¿°ç¬¦çš„ â€œæ•°ç»„â€</strong></p>
</li>
<li><p>å…¶ èµ·å§‹åœ°å€ ä¿å­˜åœ¨ å…¨å±€æè¿°ç¬¦è¡¨å¯„å­˜å™¨ GDTR</p>
<ul>
<li>GDTR é•¿48ä½ï¼Œé«˜32ä½ä¸ºåŸºåœ°å€ï¼Œä½16ä½ä¸ºæ®µç•Œé™</li>
</ul>
</li>
<li><p>ç”±äº GDT ä¸èƒ½æœ‰ GDT æœ¬èº«ä¹‹å†…çš„æè¿°ç¬¦è¿›è¡Œæè¿°å®šä¹‰ï¼Œæ‰€ä»¥ å¤„ç†å™¨ é‡‡ç”¨ GDTR ä¸º GDT è¿™ä¸€ç‰¹æ®Šçš„ç³»ç»Ÿæ®µ</p>
</li>
<li><p>å…¨å±€æè¿°ç¬¦è¡¨ ä¸­ç¬¬ä¸€ä¸ªæ®µæè¿°ç¬¦è®¾å®šä¸ºç©ºæ®µæè¿°ç¬¦</p>
</li>
<li><p>GDTR ä¸­çš„æ®µç•Œé™ä»¥å­—èŠ‚ ä¸ºå•ä½</p>
<ul>
<li><p>å¯¹äºå«æœ‰ N ä¸ªæè¿°ç¬¦çš„æè¿°ç¬¦è¡¨ï¼Œæ®µç•Œé™å¯è®¾ä¸º<code>8*N-1</code></p>
</li>
<li><blockquote>
<p>åœ¨ucoreä¸­çš„boot/bootasm.Sä¸­çš„gdtåœ°å€å¤„å’Œkern/mm/pmm.cä¸­çš„å…¨å±€å˜é‡æ•°ç»„gdt[]åˆ†åˆ«æœ‰åŸºäºæ±‡ç¼–è¯­è¨€å’ŒCè¯­è¨€çš„å…¨å±€æè¿°ç¬¦è¡¨çš„å…·ä½“å®ç°</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h5 id="é€‰æ‹©å­"><a href="#é€‰æ‹©å­" class="headerlink" title="é€‰æ‹©å­"></a>é€‰æ‹©å­</h5><ul>
<li>çº¿æ€§åœ°å€éƒ¨åˆ†çš„é€‰æ‹©å­ï¼šé€‰æ‹© æ®µæè¿°ç¬¦è¡¨ å’Œ åœ¨è¯¥è¡¨ä¸­ç´¢å¼• ä¸€ä¸ªæ®µæè¿°ç¬¦</li>
<li>é€‰æ‹©å­å¯ä»¥ä½œä¸º æŒ‡é’ˆå˜é‡çš„ä¸€éƒ¨åˆ†<ul>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image004.png" alt="æ®µé€‰æ‹©å­ç»“æ„"></li>
<li>ç´¢å¼• Index : åœ¨æè¿°ç¬¦è¡¨ä¸­ä» 8192 ä¸ªæè¿°ç¬¦ä¸­é€‰æ‹©ä¸€ä¸ª<ul>
<li>å¤„ç†å™¨è‡ªåŠ¨å°†è¿™ä¸ªç´¢å¼•å€¼ ä¹˜ 8ï¼Œå†åŠ ä¸Šæè¿°ç¬¦è¡¨çš„åŸºåœ°å€æ¥ç´¢å¼•æè¿°ç¬¦è¡¨ï¼Œä»è€Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æè¿°ç¬¦</li>
</ul>
</li>
<li>è¡¨æŒ‡ç¤ºä½ Table Indicatorï¼ˆTIï¼‰ï¼šé€‰æ‹©è®¿é—®å“ªä¸€ä¸ªæè¿°ç¬¦è¡¨ï¼Œ<ul>
<li>0ï¼šGDT</li>
<li>1ï¼šLDT</li>
</ul>
</li>
<li>è¯·æ±‚ç‰¹æƒçº§ï¼ˆRequest Privilege Levelï¼ŒRPLï¼‰ï¼šä¿æŠ¤æœºåˆ¶</li>
</ul>
</li>
</ul>
<blockquote>
<p>å…¨å±€æè¿°ç¬¦è¡¨çš„ç¬¬ä¸€é¡¹æ˜¯ä¸èƒ½è¢«CPUä½¿ç”¨ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªæ®µé€‰æ‹©å­çš„ç´¢å¼•ï¼ˆIndexï¼‰éƒ¨åˆ†å’Œè¡¨æŒ‡ç¤ºä½ï¼ˆTable Indicatorï¼‰éƒ½ä¸º0çš„æ—¶ï¼ˆå³æ®µé€‰æ‹©å­æŒ‡å‘å…¨å±€æè¿°ç¬¦è¡¨çš„ç¬¬ä¸€é¡¹æ—¶ï¼‰ï¼Œå¯ä»¥å½“åšä¸€ä¸ªç©ºçš„é€‰æ‹©å­ï¼ˆè§mmu.hä¸­çš„SEG_NULLï¼‰ã€‚å½“ä¸€ä¸ªæ®µå¯„å­˜å™¨è¢«åŠ è½½ä¸€ä¸ªç©ºé€‰æ‹©å­æ—¶ï¼Œå¤„ç†å™¨å¹¶ä¸ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œå½“ç”¨ä¸€ä¸ªç©ºé€‰æ‹©å­å»è®¿é—®å†…å­˜æ—¶ï¼Œåˆ™ä¼šäº§ç”Ÿå¼‚å¸¸</p>
</blockquote>
<h4 id="ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§"><a href="#ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§" class="headerlink" title="ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§"></a>ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§</h4><ul>
<li>ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œç‰¹æƒçº§å…±å››ä¸ªï¼š0 - 3ï¼Œè¢«ç§°ä¸ºä¿æŠ¤ç¯ï¼ˆprotection ringï¼‰<ul>
<li>ring 0 ä¸ºæœ€é«˜ç‰¹æƒçº§ : å†…æ ¸æ€</li>
<li>ring 3 æœ€ä½ç‰¹æƒçº§ï¼šä¸€èˆ¬ç»™ åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œç”¨æˆ·æ€</li>
</ul>
</li>
<li>å—åˆ°ä¿æŠ¤çš„èµ„æºï¼šå†…å­˜ï¼ŒI/Oç«¯å£ï¼Œæ‰§è¡Œç‰¹æ®Šæœºå™¨æŒ‡ä»¤çš„èƒ½åŠ›</li>
<li>åœ¨ä»»æ„æ—¶åˆ»ï¼Œx86 CPU éƒ½æ˜¯åœ¨ä¸€ä¸ªç‰¹å®šçš„ç‰¹æƒçº§ä¸‹è¿è¡Œçš„<ul>
<li>å†³å®šä»£ç å¯ä»¥åšä»€ä¹ˆï¼Œä¸å¯ä»¥åšä»€ä¹ˆ</li>
</ul>
</li>
<li>å¤§çº¦ 15 æ¡æœºå™¨æŒ‡ä»¤è¢« CPU é™åˆ¶åªèƒ½åœ¨å†…æ ¸æ€æ‰§è¡Œ<ul>
<li>è‹¥è¢«ç”¨æˆ·æ¨¡å¼çš„ç¨‹åºä½¿ç”¨ï¼Œä¼šå¼•èµ·æ··ä¹±</li>
<li>å¯¼è‡´ä¸€ä¸ªä¸€èˆ¬ä¿æŠ¤å¼‚å¸¸ï¼ˆgeneral-protection exceptionï¼‰</li>
</ul>
</li>
<li><strong>æ•°æ®æ®µé€‰æ‹©å­</strong> çš„æ•´ä¸ªå†…å®¹å¯ç”±ç¨‹åºç›´æ¥åŠ è½½åˆ°å„ä¸ªå¯„å­˜å™¨ï¼ˆSS, DSï¼‰<ul>
<li>åŒ…å«äº† è¯·æ±‚ç‰¹æƒçº§å­—æ®µï¼ˆRequested Privilege Levelï¼‰</li>
</ul>
</li>
<li>ä»£ç æ®µå¯„å­˜å™¨ï¼ˆCSï¼‰ çš„å†…å®¹ï¼Œä¸èƒ½ç”±è£…è½½æŒ‡ä»¤ï¼ˆå¦‚ MOVï¼‰ç›´æ¥è®¾ç½®ï¼Œåªèƒ½è¢«é—´æ¥è®¾ç½®<ul>
<li>CS æ‹¥æœ‰ä¸€ä¸ªç”±CPU ç»´æŠ¤çš„å½“å‰ç‰¹æƒçº§å­—æ®µ ï¼ˆCurrent Privilege Levelï¼‰</li>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image005.png" alt="DSå’ŒCSçš„ç»“æ„å›¾"></li>
</ul>
</li>
<li></li>
</ul>
<h3 id="3-2-3-ç¡¬ç›˜è®¿é—®æ¦‚è¿°"><a href="#3-2-3-ç¡¬ç›˜è®¿é—®æ¦‚è¿°" class="headerlink" title="3.2.3 ç¡¬ç›˜è®¿é—®æ¦‚è¿°"></a>3.2.3 ç¡¬ç›˜è®¿é—®æ¦‚è¿°</h3><ul>
<li>bootloader ä½¿å¾—CPUè¿›å…¥ä¿æŠ¤æ¨¡å¼åï¼Œä¸‹ä¸€æ­¥ä»ç¡¬ç›˜ä¸ŠåŠ è½½å¹¶è¿è¡Œ OS</li>
<li>bootloader çš„è®¿é—®ç¡¬ç›˜éƒ½æ˜¯ LBA æ¨¡å¼çš„ <strong>PIO(Program IO)æ–¹å¼</strong>ï¼Œ<ul>
<li>å³<strong>æ‰€æœ‰çš„ IO æ“ä½œ</strong>ï¼Œéƒ½æ˜¯é€šè¿‡ CPU <strong>è®¿é—®ç¡¬ç›˜çš„ IO åœ°å€å¯„å­˜å™¨</strong>å®Œæˆ</li>
</ul>
</li>
<li>ä¸€èˆ¬ï¼Œä¸»æ¿æ‹¥æœ‰ 2 ä¸ª IDEé€šé“ï¼Œæ¯ä¸ªé€šé“å¯ä»¥æ¥ 2 ä¸ª IDE ç¡¬ç›˜<ul>
<li>è®¿é—®ç¬¬ä¸€ä¸ªç¡¬ç›˜çš„æ‰‡åŒºï¼Œå¯è®¾ç½® IO åœ°å€å¯„å­˜å™¨ä¸º <code>0x1f0-0x1f7</code>å®ç°</li>
</ul>
</li>
</ul>
<ul>
<li>ç¡¬ç›˜æ•°æ®æ˜¯å­˜å‚¨åˆ°ç¡¬ç›˜æ‰‡åŒºä¸­ï¼Œä¸€ä¸ªæ‰‡åŒºä¸º 512 å­—èŠ‚</li>
<li>éƒ½ä¸€ä¸ªæ‰‡åŒºçš„æµç¨‹åœ¨ <code>boot/bootmain.c</code>ä¸­å®ç°ï¼š<ul>
<li>ç­‰å¾…ç£ç›˜å‡†å¤‡å¥½</li>
<li>å‘å‡ºè¯»å–æ‰‡åŒºçš„å‘½ä»¤</li>
<li>ç­‰å¾…ç£ç›˜å‡†å¤‡å¥½</li>
<li>æŠŠç£ç›˜æ‰‡åŒºçš„æ•°æ®è¯»åˆ°æŒ‡å®šå†…å­˜</li>
</ul>
</li>
</ul>
<h3 id="ELF-æ ¼å¼æ–‡ä»¶æ¦‚è¿°"><a href="#ELF-æ ¼å¼æ–‡ä»¶æ¦‚è¿°" class="headerlink" title="ELF æ ¼å¼æ–‡ä»¶æ¦‚è¿°"></a>ELF æ ¼å¼æ–‡ä»¶æ¦‚è¿°</h3><ul>
<li><p><strong>Executable and Linking Format</strong></p>
<ul>
<li>æ˜¯ Linux ç³»ç»Ÿä¸‹çš„ä¸€ç§å¸¸ç”¨<strong>ç›®æ ‡æ–‡ä»¶ï¼ˆobject fileï¼‰</strong>æ ¼å¼ï¼Œä¸‰ç§ä¸»è¦ç±»å‹<ul>
<li><strong>ç”¨äºæ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆExecutable fileï¼‰</strong>ï¼Œç”¨äºæä¾›ç¨‹åºçš„è¿›ç¨‹æ˜ åƒï¼ŒåŠ è½½çš„å†…å­˜æ‰§è¡Œ</li>
<li><strong>ç”¨äºè¿æ¥çš„å¯é‡å®šä½æ–‡ä»¶ï¼ˆrelocatable fileï¼‰</strong>ï¼Œå¯ä¸å…¶ä»–ç›®æ ‡æ–‡ä»¶ä¸€èµ·åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶</li>
<li><strong>å…±äº«ç›®æ ‡æ–‡ä»¶ï¼ˆshared object fileï¼‰</strong>ï¼Œè¿æ¥å™¨å¯å°†ä»–ä¸å…¶ä»–å¯é‡å®šä½æ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶è¿æ¥æˆå…¶ä»–çš„ç›®æ ‡æ–‡ä»¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨åˆå¯å°†å®ƒä¸å¯æ‰§è¡Œæ–‡ä»¶å’Œå…¶ä»–å…±äº«ç›®æ ‡æ–‡ä»¶ç»“åˆèµ·æ¥åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ˜ åƒ</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¸æœ¬å®éªŒç›¸å…³çš„ ELF å¯æ‰§è¡Œæ–‡ä»¶</p>
<ul>
<li><strong>ELF header</strong>åœ¨æ–‡ä»¶å¼€å¤´å¤„ï¼Œæè¿°äº†æ•´ä¸ªæ–‡ä»¶çš„ç»„ç»‡</li>
<li>ELF çš„æ–‡ä»¶å¤´åŒ…å«äº†æ•´ä¸ªæ‰§è¡Œæ–‡ä»¶çš„æ§åˆ¶ç»“æ„ï¼Œå…¶å®šä¹‰åœ¨ <code>elf.h</code>ä¸­</li>
</ul>
</li>
<li><p><strong>program header</strong>ï¼Œ ä»…å¯¹å¯æ‰§è¡Œæ–‡ä»¶ å’Œ å…±äº«ç›®æ ‡æ–‡ä»¶æœ‰æ„ä¹‰</p>
<ul>
<li>æè¿°ä¸ç¨‹åºæ‰§è¡Œç›´æ¥ç›¸å…³çš„<em>ç›®æ ‡æ–‡ä»¶ç»“æ„ä¿¡æ¯</em>ï¼Œç”¨äºåœ¨æ–‡ä»¶ä¸­<em>å®šä½å„ä¸ªæ®µçš„æ˜ åƒ</em>ï¼ŒåŒæ—¶åŒ…å«å…¶ä»–ä¸€äº›ç”¨æ¥<em>ä¸ºç¨‹åºåˆ›å»ºè¿›ç¨‹æ˜ åƒæ‰€å¿…éœ€çš„ä¿¡æ¯</em></li>
</ul>
</li>
<li><p>å¯æ‰§è¡Œæ–‡ä»¶çš„ç¨‹åºå¤´éƒ¨æ˜¯ä¸€ä¸ª program headerç»“æ„çš„æ•°ç»„ï¼Œæ¯ä¸ªç»“æ„æè¿°äº†ä¸€ä¸ªæ®µæˆ–è€…ç³»ç»Ÿå‡†å¤‡ç¨‹åºæ‰§è¡Œæ‰€å¿…éœ€çš„å…¶ä»–ä¿¡æ¯</p>
</li>
<li><p><strong>ç›®æ ‡æ–‡ä»¶ çš„æ®µ</strong>åŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ª <strong>èŠ‚åŒº ï¼ˆsectionï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯ <strong>æ®µå†…å®¹ï¼ˆsegment contentsï¼‰</strong></p>
</li>
<li><p>å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶åœ¨ELFå¤´éƒ¨çš„ <code>e_phentsize</code> , <code>e_phnum</code>æˆå‘˜ä¸­ç»™å‡ºå…¶è‡ªèº«ç¨‹åºå¤´éƒ¨å¤§å°</p>
<ul>
<li><p>ç¨‹åºå¤´éƒ¨çš„æ•°æ®ç»“æ„ï¼š</p>
<ul>
<li>```C<br>struct proghdr {<br>  uint type;   // æ®µç±»å‹<br>  uint offset;  // æ®µç›¸å¯¹æ–‡ä»¶å¤´çš„åç§»å€¼<br>  uint va;     // æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚å°†è¢«æ”¾åˆ°å†…å­˜ä¸­çš„è™šæ‹Ÿåœ°å€<br>  uint pa;<br>  uint filesz;<br>  uint memsz;  // æ®µåœ¨å†…å­˜æ˜ åƒä¸­å ç”¨çš„å­—èŠ‚æ•°<br>  uint flags;<br>  uint align;<br>};<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ ¹æ® &#96;elfhdr&#96;, &#96;prohdr&#96;çš„ç»“æ„æè¿°ï¼Œbootloader å¯ä»¥å®Œæˆå¯¹ ELF æ ¼å¼çš„ucoreçš„åŠ è½½è¿‡ç¨‹</span><br><span class="line"></span><br><span class="line">## 3.3 æ“ä½œç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹</span><br><span class="line"></span><br><span class="line">### 3.3.1 å‡½æ•°å †æ ˆ</span><br><span class="line"></span><br><span class="line">* ç†è§£è°ƒç”¨æ ˆï¼š**æ ˆçš„ç»“æ„** å’Œ **EBPå¯„å­˜å™¨çš„ä½¿ç”¨**</span><br><span class="line"></span><br><span class="line">* ebp ï¼šåŸºå€å¯„å­˜å™¨</span><br><span class="line"></span><br><span class="line">* espï¼šæ ˆæŒ‡é’ˆå¯„å­˜å™¨</span><br><span class="line"></span><br><span class="line">* eipï¼šç¨‹åºæŒ‡ä»¤æŒ‡é’ˆï¼Œå½“å‰ç¨‹åºè¿è¡Œçš„æŒ‡ä»¤</span><br><span class="line"></span><br><span class="line">* ä¸€ä¸ªå‡½æ•°è°ƒç”¨åŠ¨ä½œï¼š</span><br><span class="line"></span><br><span class="line">  * 0-n ä¸ª **PUSH** æŒ‡ä»¤ï¼Œä¸€ä¸ª **CALL** æŒ‡ä»¤ã€‚**CALL** æŒ‡ä»¤å†…éƒ¨æš—å«ä¸€ä¸ªå°†**è¿”å›åœ°å€**å‹æ ˆçš„åŠ¨ä½œ</span><br><span class="line">    * PUSH ï¼š å‚æ•°å…¥æ ˆ</span><br><span class="line">    * è¿”å›åœ°å€ï¼šCALL æŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€</span><br><span class="line">    * å°†è¿”å›åœ°å€å‹æ ˆï¼šç”±ç¡¬ä»¶å®Œæˆ</span><br><span class="line"></span><br><span class="line">* å‡ ä¹æ¯ä¸ªæœ¬åœ°ç¼–è¯‘å™¨éƒ½ä¼šåœ¨æ¯ä¸ªå‡½æ•°ä½“ä¹‹å‰æ’å…¥ï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;assembly </span><br><span class="line">    pushl   %ebp</span><br><span class="line">    movl   %esp , %ebp</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æ‰§è¡Œåˆ°ç¨‹åºçš„å®é™…æŒ‡ä»¤å‰ï¼Œå‚æ•°ã€è¿”å›åœ°å€ã€ebpå¯„å­˜å™¨ å·²æŒ‰é¡ºåºå…¥æ ˆï¼š</p>
<ul>
<li><pre><code class="assembly">+|  æ ˆåº•æ–¹å‘        | é«˜ä½åœ°å€
 |    ...        |
 |    ...        |
 |  å‚æ•°3        |
 |  å‚æ•°2        |
 |  å‚æ•°1        |
 |  è¿”å›åœ°å€        |
 |  ä¸Šä¸€å±‚[ebp]    | &lt;-------- [ebp]
 |  å±€éƒ¨å˜é‡        |  ä½ä½åœ°å€
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>é¦–å…ˆå°† ebp å¯„å­˜å™¨å…¥æ ˆï¼Œç„¶åå°†æ ˆé¡¶æŒ‡é’ˆ esp èµ‹å€¼ç»™ ebp</p>
<ul>
<li>åœ¨ç»™ ebp èµ‹å€¼å‰ï¼ŒåŸ ebp å€¼å·²ç»è¢«å‹æ ˆï¼ˆä½äºæ ˆé¡¶ï¼‰ï¼Œè€Œæ–°çš„ ebp åˆæ°æ°æŒ‡å‘æ ˆé¡¶</li>
<li><strong>æ­¤æ—¶ ebp å¯„å­˜å™¨å¤„äºååˆ†é‡è¦çš„åœ°ä½</strong>ï¼šebpä¸­å­˜å‚¨ç€æ ˆä¸­çš„ä¸€ä¸ªåœ°å€ï¼ˆåŸebpå…¥æ ˆåçš„æ ˆé¡¶ï¼‰ï¼Œä»è¯¥åœ°å€ä¸ºåŸºå‡†ï¼Œ<ul>
<li>å‘ä¸Šï¼ˆæ ˆåº•æ–¹å‘ï¼‰èƒ½è·å–è¿”å›åœ°å€ã€å‚æ•°å€¼ï¼Œ</li>
<li>å‘ä¸‹ï¼ˆæ ˆé¡¶æ–¹å‘ï¼‰èƒ½è·å–åˆ°å‡½æ•°å±€éƒ¨å˜é‡å€¼ï¼Œè€Œæ”¹åœ°å€å¤„æœ‰å­˜å‚¨ç€ä¸Šä¸€å±‚å‡½æ•°è°ƒç”¨æ—¶çš„ ebp å€¼  </li>
</ul>
</li>
</ul>
</li>
<li><p>ä¸€èˆ¬è€Œè¨€ï¼š<code>ss:[ebp+4]</code>ä¸ºè¿”å›åœ°å€ï¼Œ<code>ss:[ebp+8]</code>ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å€¼ï¼ˆæœ€åä¸€ä¸ªå…¥æ ˆï¼‰,<code>ss:[ebp-4]</code>ä¸ºç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œ<code>ss:[ebp]</code>ä¸ºä¸Šä¸€å±‚ ebp å€¼</p>
<ul>
<li>ebp ä¸­çš„åœ°å€å¤„æ€»æ˜¯ä¸Šä¸€å±‚å‡½æ•°è°ƒç”¨æ—¶ ebp çš„å€¼</li>
<li>è€Œæ¯ä¸€å±‚å‡½æ•°è°ƒç”¨ä¸­ï¼Œéƒ½èƒ½é€šè¿‡å½“æ—¶çš„ ebp å€¼ï¼Œå‘ä¸Šï¼ˆæ ˆåº•æ–¹å‘ï¼‰è·å–è¿”å›åœ°å€ï¼Œï¼Œå‚æ•°å€¼ï¼›å‘ä¸‹ï¼ˆæ ˆé¡¶æ–¹å‘ï¼‰è·å–å‡½æ•°å±€éƒ¨å˜é‡å€¼</li>
<li>ç”±æ­¤å½¢æˆé€’å½’ï¼Œç›´è‡³åˆ°è¾¾æ ˆåº•ï¼Œè¿™å°±æ˜¯å‡½æ•°è°ƒç”¨æ ˆ</li>
</ul>
</li>
</ul>
<h3 id="3-3-2-ä¸­æ–­ä¸å¼‚å¸¸"><a href="#3-3-2-ä¸­æ–­ä¸å¼‚å¸¸" class="headerlink" title="3.3.2 ä¸­æ–­ä¸å¼‚å¸¸"></a>3.3.2 ä¸­æ–­ä¸å¼‚å¸¸</h3><ul>
<li><p>æ“ä½œç³»ç»Ÿéœ€è¦å¯¹è®¡ç®—æœºç³»ç»Ÿä¸­çš„å„ç§å¤–è®¾è¿›è¡Œç®¡ç†ï¼Œéœ€è¦ CPU å’Œå¤–è®¾èƒ½å¤Ÿç›¸äº’é€šä¿¡</p>
</li>
<li><p>éœ€è¦ OS å’Œ CPUèƒ½å¤Ÿä¸€èµ·æä¾›æŸç§æœºåˆ¶ï¼Œè®©å¤–è®¾åœ¨éœ€è¦æ“ä½œç³»ç»Ÿå¤„ç†å¤–è®¾ç›¸å…³äº‹ä»¶çš„æ—¶å€™ï¼Œèƒ½ä¸»åŠ¨é€šçŸ¥æ“ä½œç³»ç»Ÿ</p>
<ul>
<li>å³æ‰“æ–­æ“ä½œç³»ç»Ÿå’Œåº”ç”¨çš„æ­£å¸¸æ‰§è¡Œï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿå®Œæˆå¤–è®¾çš„ç›¸å…³å¤„ç†ï¼Œ</li>
<li>ç„¶åæ¢å¤OS å’Œåº”ç”¨çš„æ­£å¸¸æ‰§è¡Œ</li>
<li>è¯¥æœºåˆ¶å³ä¸ºä¸­æ–­æœºåˆ¶</li>
</ul>
</li>
<li><p>ä¸­æ–­æœºåˆ¶ç»™æ“ä½œç³»ç»Ÿæä¾›äº†å¤„ç†æ„å¤–æƒ…å†µçš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å®ç° è¿›ç¨‹/çº¿ç¨‹ æŠ¢å å¼è°ƒåº¦çš„é‡è¦åŸºçŸ³</p>
</li>
<li><p>ä¸‰ç§ç‰¹æ®Šçš„ä¸­æ–­äº‹ä»¶ï¼š</p>
<ul>
<li><strong>å¼‚æ­¥ä¸­æ–­(asynchronous interrupt)</strong>, ä¹Ÿç§°å¤–éƒ¨ä¸­æ–­ï¼Œç®€ç§°ä¸­æ–­<ul>
<li>ç”± CPU <strong>å¤–éƒ¨è®¾å¤‡</strong>å¼•èµ·çš„å¤–éƒ¨äº‹ä»¶ï¼ˆIOä¸­æ–­ã€æ—¶é’Ÿä¸­æ–­ã€æ§åˆ¶å°ä¸­æ–­ï¼‰æ˜¯å¼‚æ­¥äº§ç”Ÿï¼Œå³äº§ç”Ÿçš„æ—¶åˆ»ä¸ç¡®å®šï¼Œä¸CPUçš„æ‰§è¡Œæ— å…³</li>
</ul>
</li>
<li><strong>åŒæ­¥ä¸­æ–­ï¼ˆsynchronous interruptï¼‰</strong>,å†…éƒ¨ä¸­æ–­ï¼Œç®€ç§°å¼‚å¸¸ï¼ˆexceptionï¼‰<ul>
<li>åœ¨ CPU <strong>æ‰§è¡ŒæŒ‡ä»¤æœŸé—´æ£€æµ‹åˆ°ä¸æ­£å¸¸çš„ æˆ– éæ³•çš„æ¡ä»¶</strong>ï¼ˆé™¤0ï¼Œåœ°å€è®¿é—®è¶Šç•Œï¼‰ï¼Œæ‰€å¼•èµ·çš„å†…éƒ¨äº‹ä»¶</li>
</ul>
</li>
<li><strong>é™·å…¥ä¸­æ–­ï¼ˆtrap interruptï¼‰</strong>ï¼Œä¹Ÿç§°è½¯ä¸­æ–­ï¼ˆsoft interruptï¼‰ï¼Œç³»ç»Ÿè°ƒç”¨ç®€ç§°trap<ul>
<li>åœ¨ç¨‹åºä¸­ä½¿ç”¨ <strong>è¯·æ±‚ç³»ç»ŸæœåŠ¡çš„ç³»ç»Ÿè°ƒç”¨</strong>è€Œå¼•å‘çš„äº‹ä»¶</li>
</ul>
</li>
</ul>
</li>
<li><p>å½“ CPU æ”¶åˆ°ä¸­æ–­æˆ–è€…å¼‚å¸¸äº‹ä»¶æ—¶ï¼Œä¼šæš‚åœæ‰§è¡Œå½“å‰çš„ç¨‹åºæˆ–ä»»åŠ¡ï¼Œé€šè¿‡ä¸€å®šçš„æœºåˆ¶è·³è½¬åˆ°è´Ÿè´£å¤„ç†è¿™ä¸ªä¿¡å·çš„ç›¸å…³å¤„ç†ä¾‹ç¨‹ä¸­ï¼Œå®Œæˆå¯¹è¿™ä¸ªæ—¶é—´æ®µçš„å¤„ç†ååœ¨è·³å›åˆ°åˆšæ‰è¢«æ‰“æ–­çš„ç¨‹åºæˆ–ä»»åŠ¡ä¸­ã€‚</p>
<ul>
<li>ä¸­æ–­å‘é‡å’Œä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„å¯¹åº”å…³ç³»ï¼Œä¸»è¦æ˜¯ç”± IDTï¼ˆä¸­æ–­æè¿°ç¬¦è¡¨è´Ÿè´£ï¼‰</li>
<li>æ“ä½œç³»ç»Ÿ åœ¨IDT ä¸­è®¾ç½®å¥½å„ç§<strong>ä¸­æ–­å‘é‡</strong>å¯¹åº”çš„<strong>ä¸­æ–­æè¿°ç¬¦</strong>ï¼Œç­‰ CPU åœ¨äº§ç”Ÿä¸­æ–­åæŸ¥è¯¢å¯¹åº”ç»ˆç«¯æœåŠ¡ä¾‹ç¨‹çš„èµ·å§‹åœ°å€</li>
<li>è€ŒIDTæœ¬èº«çš„èµ·å§‹åœ°å€ä¿å­˜åœ¨ idträ¸­</li>
</ul>
<ol>
<li><p><strong>ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆInterrupt Descriptor Table)</strong></p>
<ul>
<li><p>IDT å°†æ¯ä¸ªä¸­æ–­æˆ–å¼‚å¸¸ç¼–å· å’Œ ä¸€ä¸ªæŒ‡å‘ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æè¿°ç¬¦è”ç³»èµ·æ¥ã€‚</p>
</li>
<li><p>å’Œ GDT ä¸€æ ·ï¼ŒIDTæ˜¯ä¸€ä¸ª8 bitçš„æè¿°ç¬¦æ•°ç»„ï¼Œä½† IDT ç¬¬ä¸€é¡¹å¯ä»¥åŒ…å«ä¸€ä¸ªæè¿°ç¬¦</p>
</li>
<li><p>CPU æŠŠä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰ç¼–å· ä¹˜ä»¥ 8 ä½œä¸ºIDTçš„ç´¢å¼•</p>
</li>
<li><p>IDT å¯ä»¥ä½äºå†…å­˜çš„ä»»æ„ä½ç½®ï¼ŒCPU é€šè¿‡IDTå¯„å­˜å™¨ï¼ˆidtrï¼‰çš„å†…å®¹æ¥å¯»æ‰¾ IDTçš„èµ·å§‹åœ°å€</p>
</li>
<li><p>æ“ä½œ IDTR çš„æŒ‡ä»¤ï¼šLIDTï¼ŒSIDT</p>
<ul>
<li>éƒ½æœ‰ä¸€ä¸ªæ˜¾ç¤ºçš„æ“ä½œæ•°ï¼šä¸€ä¸ª6 å­—èŠ‚è¡¨ç¤ºçš„å†…å­˜åœ°å€</li>
<li><strong>LIDT(Load IDT Register)ï¼š</strong>ä½¿ç”¨ä¸€ä¸ªåŒ…å«çº¿æ€§åœ°å€ <strong>åŸºè´¨å’Œç•Œé™</strong> çš„å†…å­˜æ“ä½œæ•°åŠ è½½IDTã€‚<ul>
<li>æ“ä½œç³»ç»Ÿåˆ›å»º IDT æ—¶ï¼Œéœ€è¦æ‰§è¡Œå®ƒæ¥è®¾å®š<strong>IDTçš„èµ·å§‹åœ°å€</strong></li>
<li>è¯¥æŒ‡ä»¤åªèƒ½åœ¨ç‰¹æƒçº§ 0 æ‰§è¡Œ</li>
<li><code>libs/x86.h</code>ä¸­çš„lidtå‡½æ•°å®ç°ï¼Œæ˜¯ä¸€æ¡æ±‡ç¼–æŒ‡ä»¤</li>
</ul>
</li>
<li><strong>SIDT(Store IDT Register)ï¼š</strong>æ‹·è´ IDTR çš„ <strong>åŸºå€å’Œç•Œé™</strong>éƒ¨åˆ†åˆ°ä¸€ä¸ªå†…å­˜åœ°å€<ul>
<li>å¯åœ¨ä»»æ„ç‰¹æƒçº§æ‰§è¡Œ</li>
</ul>
</li>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image007.png" alt="IDTå’ŒIDTRå¯„å­˜å™¨çš„ç»“æ„å’Œå…³ç³»å›¾"></li>
</ul>
</li>
<li><blockquote>
<p>åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæœ€å¤šä¼šå­˜åœ¨256ä¸ªInterrupt/<strong>Exception Vectors</strong>ã€‚</p>
<p>èŒƒå›´[0ï¼Œ31]å†…çš„32ä¸ªå‘é‡è¢«å¼‚å¸¸Exceptionå’ŒNMIä½¿ç”¨ï¼Œä½†å½“å‰å¹¶éæ‰€æœ‰è¿™32ä¸ªå‘é‡éƒ½å·²ç»è¢«ä½¿ç”¨ï¼Œæœ‰å‡ ä¸ªå½“å‰æ²¡æœ‰è¢«ä½¿ç”¨çš„ï¼Œè¯·ä¸è¦æ“…è‡ªä½¿ç”¨å®ƒä»¬ï¼Œå®ƒä»¬è¢«ä¿ç•™ï¼Œä»¥å¤‡å°†æ¥å¯èƒ½å¢åŠ æ–°çš„Exceptionã€‚</p>
<p>èŒƒå›´[32ï¼Œ255]å†…çš„å‘é‡è¢«ä¿ç•™ç»™ç”¨æˆ·å®šä¹‰çš„Interruptsã€‚Intelæ²¡æœ‰å®šä¹‰ï¼Œä¹Ÿæ²¡æœ‰ä¿ç•™è¿™äº›Interruptsã€‚ç”¨æˆ·å¯ä»¥å°†å®ƒä»¬ç”¨ä½œå¤–éƒ¨I/Oè®¾å¤‡ä¸­æ–­ï¼ˆ8259A IRQï¼‰ï¼Œæˆ–è€…ç³»ç»Ÿè°ƒç”¨ï¼ˆSystem Call ã€Software Interruptsï¼‰ç­‰</p>
</blockquote>
</li>
</ul>
</li>
<li><p><strong>IDT gate descriptors</strong></p>
<ul>
<li><strong>Interrupts/Exceptions</strong> åº”è¯¥ä½¿ç”¨<strong>Interrupt Gate</strong>å’Œ<strong>Trap Gate</strong><ul>
<li>å”¯ä¸€çš„åŒºåˆ«ï¼šå½“è°ƒç”¨Interrupt Gateæ—¶ï¼Œ<strong>Interruptä¼šè¢«CPUè‡ªåŠ¨ç¦æ­¢</strong><ul>
<li>è‡ªåŠ¨ç¦æ­¢ï¼šCPU è·³è½¬åˆ°Interrupt Gateé‡Œçš„åœ°å€æ—¶ï¼Œåœ¨å°†EFLAGSä¿å­˜åœ¨æ ˆä¸Šåï¼Œæ¸…é™¤EFLAGSé‡Œçš„IFä½ï¼Œä»¥å…é‡å¤è§¦å‘ä¸­æ–­ã€‚<br>* </li>
</ul>
</li>
<li>è€Œå½“è°ƒç”¨Trap Gateæ—¶ï¼Œ<strong>CPUåˆ™ä¸ä¼šå»ç¦æ­¢æˆ–æ‰“å¼€ä¸­æ–­</strong>ï¼Œè€Œæ˜¯ä¿ç•™ä»–åŸæ¥çš„æ ·å­</li>
</ul>
</li>
<li>åœ¨IDTä¸­ï¼Œå¯ä»¥åŒ…å«3ç§ç±»å‹çš„ Descriptorï¼š<ul>
<li>Task-gate descriptor</li>
<li>Interrupt-gate descriptor: ä¸­æ–­æ–¹å¼ç”¨åˆ°</li>
<li>Trap-gate descriptorï¼šç³»ç»Ÿè°ƒç”¨ç”¨åˆ°</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ä¸­æ–­å¤„ç†ä¸­ç¡¬ä»¶è´Ÿè´£å®Œæˆçš„å·¥ä½œ</strong></p>
<ul>
<li><p>ä¸­æ–­æœåŠ¡ä¾‹ç¨‹åŒ…æ‹¬å…·ä½“è´Ÿè´£å¤„ç†ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰çš„ä»£ç æ˜¯æ“ä½œç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<ul>
<li><p>ç¡¬ä»¶ä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼ˆèµ·å§‹ï¼‰:ä»CPUå—åˆ°ä¸­æ–­äº‹ä»¶åï¼Œæ‰“æ–­å½“å‰ç¨‹åºæˆ–ä»»åŠ¡çš„æ‰§è¡Œï¼Œæ ¹æ®æŸç§æœºåˆ¶è·³è½¬åˆ°ä¸­æ–­æœåŠ¡ä¾‹ç¨‹å»æ‰§è¡Œçš„è¿‡ç¨‹ï¼š</p>
<ul>
<li><blockquote>
<ul>
<li>CPUåœ¨æ‰§è¡Œå®Œå½“å‰ç¨‹åºçš„æ¯ä¸€æ¡æŒ‡ä»¤åï¼Œéƒ½ä¼šå»ç¡®è®¤åœ¨æ‰§è¡Œåˆšæ‰çš„æŒ‡ä»¤è¿‡ç¨‹ä¸­ä¸­æ–­æ§åˆ¶å™¨ï¼ˆå¦‚ï¼š8259Aï¼‰æ˜¯å¦å‘é€ä¸­æ–­è¯·æ±‚è¿‡æ¥ï¼Œå¦‚æœæœ‰é‚£ä¹ˆCPUå°±ä¼šåœ¨ç›¸åº”çš„æ—¶é’Ÿè„‰å†²åˆ°æ¥æ—¶ä»æ€»çº¿ä¸Šè¯»å–ä¸­æ–­è¯·æ±‚å¯¹åº”çš„ä¸­æ–­å‘é‡ï¼›</li>
<li>CPUæ ¹æ®å¾—åˆ°çš„ä¸­æ–­å‘é‡ï¼ˆä»¥æ­¤ä¸ºç´¢å¼•ï¼‰åˆ°IDTä¸­æ‰¾åˆ°è¯¥å‘é‡å¯¹åº”çš„ä¸­æ–­æè¿°ç¬¦ï¼Œä¸­æ–­æè¿°ç¬¦é‡Œä¿å­˜ç€ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µé€‰æ‹©å­ï¼›</li>
<li>CPUä½¿ç”¨IDTæŸ¥åˆ°çš„ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µé€‰æ‹©å­ä»GDTä¸­å–å¾—ç›¸åº”çš„æ®µæè¿°ç¬¦ï¼Œæ®µæè¿°ç¬¦é‡Œä¿å­˜äº†ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µåŸºå€å’Œå±æ€§ä¿¡æ¯ï¼Œæ­¤æ—¶CPUå°±å¾—åˆ°äº†ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„èµ·å§‹åœ°å€ï¼Œå¹¶è·³è½¬åˆ°è¯¥åœ°å€ï¼›</li>
<li>CPUä¼šæ ¹æ®CPLå’Œä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µæè¿°ç¬¦çš„DPLä¿¡æ¯ç¡®è®¤æ˜¯å¦å‘ç”Ÿäº†ç‰¹æƒçº§çš„è½¬æ¢ã€‚æ¯”å¦‚å½“å‰ç¨‹åºæ­£è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼Œè€Œä¸­æ–­ç¨‹åºæ˜¯è¿è¡Œåœ¨å†…æ ¸æ€çš„ï¼Œåˆ™æ„å‘³ç€å‘ç”Ÿäº†ç‰¹æƒçº§çš„è½¬æ¢ï¼Œè¿™æ—¶CPUä¼šä»å½“å‰ç¨‹åºçš„TSSä¿¡æ¯ï¼ˆè¯¥ä¿¡æ¯åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€å­˜åœ¨TRå¯„å­˜å™¨ä¸­ï¼‰é‡Œå–å¾—è¯¥ç¨‹åºçš„å†…æ ¸æ ˆåœ°å€ï¼Œå³åŒ…æ‹¬å†…æ ¸æ€çš„sså’Œespçš„å€¼ï¼Œå¹¶ç«‹å³å°†ç³»ç»Ÿå½“å‰ä½¿ç”¨çš„æ ˆåˆ‡æ¢æˆæ–°çš„å†…æ ¸æ ˆã€‚è¿™ä¸ªæ ˆå°±æ˜¯å³å°†è¿è¡Œçš„ä¸­æ–­æœåŠ¡ç¨‹åºè¦ä½¿ç”¨çš„æ ˆã€‚ç´§æ¥ç€å°±å°†å½“å‰ç¨‹åºä½¿ç”¨çš„ç”¨æˆ·æ€çš„sså’Œespå‹åˆ°æ–°çš„å†…æ ¸æ ˆä¸­ä¿å­˜èµ·æ¥ï¼›</li>
<li>CPUéœ€è¦å¼€å§‹ä¿å­˜å½“å‰è¢«æ‰“æ–­çš„ç¨‹åºçš„ç°åœºï¼ˆå³ä¸€äº›å¯„å­˜å™¨çš„å€¼ï¼‰ï¼Œä»¥ä¾¿äºå°†æ¥æ¢å¤è¢«æ‰“æ–­çš„ç¨‹åºç»§ç»­æ‰§è¡Œã€‚è¿™éœ€è¦åˆ©ç”¨å†…æ ¸æ ˆæ¥ä¿å­˜ç›¸å…³ç°åœºä¿¡æ¯ï¼Œå³ä¾æ¬¡å‹å…¥å½“å‰è¢«æ‰“æ–­ç¨‹åºä½¿ç”¨çš„eflagsï¼Œcsï¼Œeipï¼ŒerrorCodeï¼ˆå¦‚æœæ˜¯æœ‰é”™è¯¯ç çš„å¼‚å¸¸ï¼‰ä¿¡æ¯ï¼›</li>
<li>CPUåˆ©ç”¨ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µæè¿°ç¬¦å°†å…¶ç¬¬ä¸€æ¡æŒ‡ä»¤çš„åœ°å€åŠ è½½åˆ°cså’Œeipå¯„å­˜å™¨ä¸­ï¼Œå¼€å§‹æ‰§è¡Œä¸­æ–­æœåŠ¡ä¾‹ç¨‹ã€‚è¿™æ„å‘³ç€å…ˆå‰çš„ç¨‹åºè¢«æš‚åœæ‰§è¡Œï¼Œä¸­æ–­æœåŠ¡ç¨‹åºæ­£å¼å¼€å§‹å·¥ä½œã€‚</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p>ç¡¬ä»¶ä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼ˆç»“æŸï¼‰:æ¯ä¸ªä¸­æ–­æœåŠ¡ä¾‹ç¨‹åœ¨æœ‰ä¸­æ–­å¤„ç†å·¥ä½œå®Œæˆåéœ€è¦é€šè¿‡<code>iret</code>æŒ‡ä»¤æ¢å¤è¢«æ‰“æ–­çš„ç¨‹åºæ‰§è¡Œï¼š</p>
<ul>
<li><blockquote>
<ul>
<li>ç¨‹åºæ‰§è¡Œè¿™æ¡iretæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆä¼šä»å†…æ ¸æ ˆé‡Œå¼¹å‡ºå…ˆå‰ä¿å­˜çš„è¢«æ‰“æ–­çš„ç¨‹åºçš„ç°åœºä¿¡æ¯ï¼Œå³eflagsï¼Œcsï¼Œeipé‡æ–°å¼€å§‹æ‰§è¡Œï¼›</li>
<li>å¦‚æœå­˜åœ¨ç‰¹æƒçº§è½¬æ¢ï¼ˆä»å†…æ ¸æ€è½¬æ¢åˆ°ç”¨æˆ·æ€ï¼‰ï¼Œåˆ™è¿˜éœ€è¦ä»å†…æ ¸æ ˆä¸­å¼¹å‡ºç”¨æˆ·æ€æ ˆçš„sså’Œespï¼Œè¿™æ ·ä¹Ÿæ„å‘³ç€æ ˆä¹Ÿè¢«åˆ‡æ¢å›åŸå…ˆä½¿ç”¨çš„ç”¨æˆ·æ€çš„æ ˆäº†ï¼›</li>
<li>å¦‚æœæ­¤æ¬¡å¤„ç†çš„æ˜¯å¸¦æœ‰é”™è¯¯ç ï¼ˆerrorCodeï¼‰çš„å¼‚å¸¸ï¼ŒCPUåœ¨æ¢å¤å…ˆå‰ç¨‹åºçš„ç°åœºæ—¶ï¼Œå¹¶ä¸ä¼šå¼¹å‡ºerrorCodeã€‚è¿™ä¸€æ­¥éœ€è¦é€šè¿‡è½¯ä»¶å®Œæˆï¼Œå³è¦æ±‚ç›¸å…³çš„ä¸­æ–­æœåŠ¡ä¾‹ç¨‹åœ¨è°ƒç”¨iretè¿”å›ä¹‹å‰æ·»åŠ å‡ºæ ˆä»£ç ä¸»åŠ¨å¼¹å‡ºerrorCodeã€‚</li>
</ul>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ä¸­æ–­äº§ç”Ÿåçš„å †æ ˆå˜åŒ–</strong></p>
<ul>
<li>ç›¸åŒç‰¹æƒçº§å’Œä¸åŒç‰¹æƒçº§æƒ…å†µä¸‹ä¸­æ–­äº§ç”Ÿåçš„å †æ ˆå˜æ¢ï¼š<ul>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image010.png" alt="ç›¸åŒç‰¹æƒçº§å’Œä¸åŒç‰¹æƒçº§æƒ…å†µä¸‹ä¸­æ–­äº§ç”Ÿåçš„å †æ ˆæ ˆå˜åŒ–ç¤ºæ„å›¾"></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ä¸­æ–­å¤„ç†çš„ç‰¹æƒçº§è½¬æ¢</strong></p>
<ul>
<li><p>é€šè¿‡é—¨æè¿°ç¬¦ï¼ˆgate descriptorï¼‰å’Œç›¸å…³æŒ‡ä»¤å®Œæˆ</p>
</li>
<li><p>ä¸€ä¸ªé—¨æè¿°ç¬¦å°±æ˜¯ä¸€ä¸ªç³»ç»Ÿç±»å‹çš„æ®µæè¿°ç¬¦ï¼Œä¸€å…±å››ä¸ªå­ç±»å‹ï¼š</p>
<ul>
<li>è°ƒç”¨é—¨æè¿°ç¬¦(call-gate)</li>
<li>ä¸­æ–­é—¨æè¿°ç¬¦(interrupt-gate)</li>
<li>é™·é˜±é—¨æè¿°ç¬¦(trap-gate)</li>
<li>ä»»åŠ¡é—¨æè¿°ç¬¦(task-gate)</li>
</ul>
</li>
<li><p>ä¸ä¸­æ–­å¤„ç†ç›¸å…³ï¼šä¸­æ–­é—¨æè¿°ç¬¦ï¼Œé™·é˜±é—¨æè¿°ç¬¦</p>
</li>
<li><p>è¿™äº›é—¨æè¿°ç¬¦è¢«å­˜å‚¨åœ¨ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆIDTï¼‰</p>
</li>
<li><p>CPU æŠŠä¸­æ–­å‘é‡å½“ä½œIDTè¡¨é¡¹çš„ç´¢å¼•ï¼ŒæŒ‡å‡ºå½“ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œä½¿ç”¨é‚£ä¸€ä¸ªé—¨æè¿°ç¬¦æ¥å¤„ç†ä¸­æ–­</p>
</li>
<li><blockquote>
<p>é—¨ä¸­çš„DPLå’Œæ®µé€‰æ‹©ç¬¦ä¸€èµ·æ§åˆ¶ç€è®¿é—®ï¼ŒåŒæ—¶ï¼Œæ®µé€‰æ‹©ç¬¦ç»“åˆåç§»é‡ï¼ˆOffsetï¼‰æŒ‡å‡ºäº†ä¸­æ–­å¤„ç†ä¾‹ç¨‹çš„å…¥å£ç‚¹ã€‚å†…æ ¸ä¸€èˆ¬åœ¨é—¨æè¿°ç¬¦ä¸­å¡«å…¥å†…æ ¸ä»£ç æ®µçš„æ®µé€‰æ‹©å­ã€‚äº§ç”Ÿä¸­æ–­åï¼ŒCPUä¸€å®šä¸ä¼šå°†è¿è¡Œæ§åˆ¶ä»é«˜ç‰¹æƒç¯è½¬å‘ä½ç‰¹æƒç¯ï¼Œç‰¹æƒçº§å¿…é¡»è¦ä¹ˆä¿æŒä¸å˜ï¼ˆå½“æ“ä½œç³»ç»Ÿå†…æ ¸è‡ªå·±è¢«ä¸­æ–­çš„æ—¶å€™ï¼‰ï¼Œæˆ–è¢«æå‡ï¼ˆå½“ç”¨æˆ·æ€ç¨‹åºè¢«ä¸­æ–­çš„æ—¶å€™ï¼‰ã€‚æ— è®ºå“ªä¸€ç§æƒ…å†µï¼Œä½œä¸ºç»“æœçš„CPLå¿…é¡»ç­‰äºç›®çš„ä»£ç æ®µçš„DPLã€‚å¦‚æœCPLå‘ç”Ÿäº†æ”¹å˜ï¼Œä¸€ä¸ªå †æ ˆåˆ‡æ¢æ“ä½œï¼ˆé€šè¿‡TSSå®Œæˆï¼‰å°±ä¼šå‘ç”Ÿã€‚å¦‚æœä¸­æ–­æ˜¯è¢«ç”¨æˆ·æ€ç¨‹åºä¸­çš„æŒ‡ä»¤æ‰€è§¦å‘çš„ï¼ˆæ¯”å¦‚è½¯ä»¶æ‰§è¡ŒINT nç”Ÿäº§çš„ä¸­æ–­ï¼‰ï¼Œè¿˜ä¼šå¢åŠ ä¸€ä¸ªé¢å¤–çš„æ£€æŸ¥ï¼šé—¨çš„DPLå¿…é¡»å…·æœ‰ä¸CPLç›¸åŒæˆ–æ›´ä½çš„ç‰¹æƒã€‚è¿™å°±é˜²æ­¢äº†ç”¨æˆ·ä»£ç éšæ„è§¦å‘ä¸­æ–­ã€‚å¦‚æœè¿™äº›æ£€æŸ¥å¤±è´¥ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªä¸€èˆ¬ä¿æŠ¤å¼‚å¸¸ï¼ˆgeneral-protection exceptionï¼‰ã€‚</p>
</blockquote>
</li>
</ul>
</li>
</ol>
</li>
</ul>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/17/Lab2%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/17/Lab2%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" itemprop="url">Lab 2 ç‰©ç†å†…å­˜ç®¡ç†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-04-17T09:05:14+08:00">
                2021-04-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-02T11:36:18+08:00">
                2021-05-02
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/uCore/" itemprop="url" rel="index">
                    <span itemprop="name">-uCore</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  683
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Lab-2-ç‰©ç†å†…å­˜ç®¡ç†"><a href="#Lab-2-ç‰©ç†å†…å­˜ç®¡ç†" class="headerlink" title="Lab 2 ç‰©ç†å†…å­˜ç®¡ç†"></a>Lab 2 ç‰©ç†å†…å­˜ç®¡ç†</h1><h1 id="1-å®éªŒç›®çš„"><a href="#1-å®éªŒç›®çš„" class="headerlink" title="1 å®éªŒç›®çš„"></a>1 å®éªŒç›®çš„</h1><ul>
<li>ç†è§£åŸºäº<strong>æ®µé¡µå¼å†…å­˜åœ°å€çš„è½¬æ¢æœºåˆ¶</strong></li>
<li>é¡µè¡¨çš„å»ºç«‹å’Œä½¿ç”¨</li>
<li>ç‰©ç†å†…å­˜çš„ç®¡ç†æ–¹æ³•</li>
</ul>
<h1 id="2-å®éªŒå†…å®¹"><a href="#2-å®éªŒå†…å®¹" class="headerlink" title="2 å®éªŒå†…å®¹"></a>2 å®éªŒå†…å®¹</h1><p><strong>ä¸‰ä¸ªéƒ¨åˆ†ï¼š</strong></p>
<ul>
<li><p>å‘ç°<strong>ç³»ç»Ÿä¸­çš„ç‰©ç†å†…å­˜</strong></p>
</li>
<li><p>å»ºç«‹å¯¹ç‰©ç†å†…å­˜çš„åˆæ­¥ç®¡ç†ï¼šäº†è§£<strong>è¿ç»­å†…å­˜ç®¡ç†</strong></p>
</li>
<li><p>å»ºç«‹<strong>é¡µè¡¨å®ç°è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜ä¹‹é—´çš„æ˜ å°„</strong>ï¼Œäº†è§£æ®µé¡µå¼å†…å­˜ç®¡ç†æœºåˆ¶</p>
</li>
</ul>
<h2 id="2-1-ç»ƒä¹ "><a href="#2-1-ç»ƒä¹ " class="headerlink" title="2.1 ç»ƒä¹ "></a>2.1 ç»ƒä¹ </h2><ul>
<li>åˆ†æ ucoreæä¾›çš„ç­”æ¡ˆï¼Œè¯´æ˜è‡ªå·±çš„å®ç°ä¸å‚è€ƒç­”æ¡ˆåŒºåˆ«</li>
<li>åˆ—å‡ºæœ¬å®éªŒä¸­é‡è¦çš„çŸ¥è¯†ç‚¹<ul>
<li>å¯¹åº”çš„ OS åŸç†</li>
</ul>
</li>
<li>æœªå‡ºç°ä½†å¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹</li>
</ul>
<h3 id="ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ"><a href="#ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ" class="headerlink" title="ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ"></a>ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ</h3><ul>
<li>æœ¬å®éªŒä¾èµ–äºå®éªŒä¸€</li>
<li>éœ€è¦å°†å®éªŒä¸€çš„ä»£ç å¡«å…¥lab2ç›¸åº”ä½ç½®</li>
</ul>
<h3 id="ç»ƒä¹ 1ï¼šå®ç°first-fit-è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•"><a href="#ç»ƒä¹ 1ï¼šå®ç°first-fit-è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•" class="headerlink" title="ç»ƒä¹ 1ï¼šå®ç°first-fit è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•"></a>ç»ƒä¹ 1ï¼šå®ç°first-fit è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•</h3><h1 id="3-ç‰©ç†å†…å­˜ç®¡ç†"><a href="#3-ç‰©ç†å†…å­˜ç®¡ç†" class="headerlink" title="3 ç‰©ç†å†…å­˜ç®¡ç†"></a>3 ç‰©ç†å†…å­˜ç®¡ç†</h1><h2 id="3-1-å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°"><a href="#3-1-å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°" class="headerlink" title="3.1 å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°"></a>3.1 å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°</h2><ul>
<li>æ€»æ§å‡½æ•°ï¼škern_init<ul>
<li>è°ƒç”¨å®Œæˆç‰©ç†å†…å­˜åˆå§‹åŒ–çš„pmm_initå‡½æ•°ä¹‹å‰å’Œä¹‹åçš„åŒºåˆ«ï¼š<ul>
<li>é¦–å…ˆï¼Œbootloaderå·¥ä½œæœ‰æ‰€å¢åŠ ï¼Œåœ¨bootloaderä¸­å®Œæˆäº†å¯¹å†…å­˜èµ„æºçš„æ¢æµ‹å·¥ä½œï¼Œä½¿å¾— ucore kernel åœ¨åç»­æ‰§è¡Œä¸­èƒ½å¤ŸåŸºäºå…¶æ¢æµ‹å‡ºçš„ç‰©ç†å†…å­˜æƒ…å†µè¿›è¡Œç‰©ç†å†…å­˜ç®¡ç†åˆå§‹åŒ–å·¥ä½œ</li>
<li>å…¶æ¬¡ï¼Œbootloader ä¸åƒlab1ï¼Œç›´æ¥è°ƒç”¨kern_initï¼Œè€Œæ˜¯å…ˆè°ƒç”¨kern_entryå‡½æ•°ï¼ˆ<code>/lab2/kern/init/entry.S</code>ï¼‰å®Œæˆä»¥ä¸‹å·¥ä½œåï¼Œå†è°ƒç”¨kern_init<ul>
<li><strong>kern_entry</strong> ä¸»è¦ä»»åŠ¡ï¼šä¸ºäº†æ‰§è¡Œkern_initå»ºç«‹è‰¯å¥½çš„Cè¯­è¨€è¿è¡Œç¯å¢ƒï¼ˆè®¾ç½®å †æ ˆï¼‰ï¼Œå¹¶ä¸”ä¸´æ—¶å»ºç«‹ä¸€ä¸ªæ®µæ˜ å°„å…³ç³»ï¼Œä¸ºä¹‹åå»ºç«‹åˆ†é¡µæœºåˆ¶çš„è¿‡ç¨‹åšå‡†å¤‡</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>kern_init åœ¨å®Œæˆä¸€äº›è¾“å‡ºå¹¶å¯¹lab1å®éªŒç»“æœæ£€æŸ¥åï¼Œè¿›å…¥ç‰©ç†å†…å­˜ç®¡ç†åˆå§‹åŒ–å·¥ä½œ<ul>
<li>å³è°ƒç”¨pmm_initå‡½æ•°å®Œæˆå¯¹ç‰©ç†å†…å­˜çš„ç®¡ç†çš„åˆå§‹åŒ–ï¼ˆlab 2ï¼‰</li>
<li>æ¥ç€ï¼Œæ‰§è¡Œä¸­æ–­ å’Œ å¼‚å¸¸ç›¸å…³çš„åˆå§‹åŒ–å·¥ä½œï¼ˆå³è°ƒç”¨pic_initå’Œidt_initï¼‰ï¼Œè¿™äº›å·¥ä½œä¸lab 1ä¸­æ–­å¼‚å¸¸åˆå§‹åŒ–å·¥ä½œå†…å®¹ä¸€æ ·</li>
</ul>
</li>
<li>ç‰©ç†å†…å­˜ç®¡ç†ï¼š<ul>
<li>é¦–å…ˆï¼Œæ¢æµ‹å¯ç”¨çš„ç‰©ç†å†…å­˜ç©ºé—´èµ„æºï¼›äº†è§£ç‰©ç†å†…å­˜ä½äºä½•å¤„ã€å¤§å°<ul>
<li>ä¾¿å¯ç”¨å›ºå®šé¡µé¢å¤§å°æ¥åˆ’åˆ†æ•´ä¸ªç‰©ç†å†…å­˜ç©ºé—´ï¼Œå¹¶å‡†å¤‡ä»¥æ­¤ä¸ºæœ€å°å†…å­˜åˆ†é…å•å…ƒæ¥ç®¡ç†æ•´ä¸ªç‰©ç†å†…å­˜ï¼Œç®¡ç†åœ¨å†…æ ¸è¿è¡Œè¿‡ç¨‹ä¸­æ¯é¡µå†…å­˜ï¼ˆçŠ¶æ€ï¼šfreeã€usedã€reservedï¼‰</li>
</ul>
</li>
<li>æ¥ç€ï¼Œucore kernel å»ºç«‹é¡µè¡¨ï¼Œå¯åŠ¨åˆ†é¡µæœºåˆ¶ï¼Œä½¿å¾— CPU ä¸­çš„ MMU æŠŠé¢„å…ˆå»ºç«‹å¥½çš„é¡µè¡¨ä¸­çš„é¡µè¡¨é¡¹è¯»å…¥TLBï¼Œæ ¹æ®é¡µè¡¨é¡¹æè¿°çš„ è™šæ‹Ÿé¡µï¼ˆPageï¼‰ä¸ç‰©ç†é¡µå¸§ï¼ˆPage Frameï¼‰çš„å¯¹åº”å…³ç³»å®ŒæˆCPUå¯¹å†…å­˜çš„è¯»å†™å’Œæ‰§è¡Œæ“ä½œã€‚</li>
</ul>
</li>
</ul>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/16/Lab0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/stitch.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiHao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/16/Lab0/" itemprop="url">Lab 0</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-04-16T13:59:46+08:00">
                2021-04-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2021-05-02T11:35:32+08:00">
                2021-05-02
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/uCore/" itemprop="url" rel="index">
                    <span itemprop="name">-uCore</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  11k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  43
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Lab-0"><a href="#Lab-0" class="headerlink" title="Lab 0"></a>Lab 0</h1><p>[toc]</p>
<ul>
<li>ucoreè¿è¡Œç¯å¢ƒï¼šX86 ç¡¬ä»¶æ¨¡æ‹Ÿå™¨ï¼ŒQEMUã€VirtualBoxã€VMware Player</li>
<li>ucoreå¼€å‘ç¯å¢ƒï¼šGCCçš„gccã€gasã€ldå’ŒMAKEï¼Œæˆ–é›†æˆå¼€å‘ç¯å¢ƒEclipse-CDT</li>
<li>åˆ†ææºä»£ç ï¼šunderstand</li>
<li>è½¯ä»¶å¼€å‘ç‰ˆæœ¬ç®¡ç†ï¼šGITã€SVN</li>
<li>æ¯”è¾ƒæ–‡ä»¶å’Œç›®å½•çš„ä¸åŒï¼Œå‘ç°ä¸åŒå®éªŒä¸­çš„å·®å¼‚æ€§å’Œè¿›è¡Œæ–‡ä»¶åˆå¹¶æ“ä½œï¼šmeldã€kdiff3ã€UltraCompare</li>
<li>è°ƒè¯•ï¼ˆdebugï¼‰å‘ç°è®¾è®¡ä¸­å¾—å‡ºé”™è¯¯ï¼šgdbï¼ˆé…åˆQEMUï¼‰ç­‰è°ƒè¯•å·¥å…·è½¯ä»¶</li>
</ul>
<h1 id="1-å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š"><a href="#1-å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š" class="headerlink" title="1 å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š"></a>1 <strong>å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š</strong></h1><ol>
<li><strong>Bootloader+toy ucore:</strong> ç†è§£æ“ä½œç³»ç»Ÿå¯åŠ¨å‰çš„ç¡¬ä»¶çŠ¶æ€å’Œè¦åšçš„å‡†å¤‡å·¥ä½œï¼Œäº†è§£è¿è¡Œæ“ä½œç³»ç»Ÿçš„å¤–è®¾ç¡¬ä»¶æ”¯æŒï¼Œæ“ä½œç³»ç»Ÿå¦‚ä½•åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç†è§£ä¸¤ç±»ä¸­æ–­â€”â€œå¤–è®¾ä¸­æ–­â€ï¼Œâ€œé™·é˜±ä¸­æ–­â€ï¼Œå†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åŒºåˆ«ï¼›</li>
<li><strong>ç‰©ç†å†…å­˜ç®¡ç†ï¼š</strong>ç†è§£x86åˆ†æ®µ/åˆ†é¡µæ¨¡å¼ï¼Œäº†è§£æ“ä½œç³»ç»Ÿå¦‚ä½•ç®¡ç†ç‰©ç†å†…å­˜ï¼›</li>
<li><strong>è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼š</strong>ç†è§£OSè™šå­˜çš„åŸºæœ¬åŸç†å’Œç›®æ ‡ï¼Œä»¥åŠå¦‚ä½•ç»“åˆé¡µè¡¨+ä¸­æ–­å¤„ç†ï¼ˆç¼ºé¡µæ•…éšœå¤„ç†ï¼‰æ¥å®ç°è™šå­˜çš„ç›®æ ‡ï¼Œå¦‚ä½•å®ç°åŸºäºé¡µçš„å†…å­˜æ›¿æ¢ç®—æ³•å’Œæ›¿æ¢è¿‡ç¨‹ï¼›</li>
<li><strong>å†…æ ¸çº¿ç¨‹ç®¡ç†ï¼š</strong>ç†è§£å†…æ ¸çº¿ç¨‹åˆ›å»ºã€æ‰§è¡Œã€åˆ‡æ¢å’Œç»“æŸçš„åŠ¨æ€ç®¡ç†è¿‡ç¨‹ï¼Œä»¥åŠå†…æ ¸çº¿ç¨‹çš„è¿è¡Œå‘¨æœŸç­‰ï¼›</li>
<li><strong>ç”¨æˆ·è¿›ç¨‹ç®¡ç†ï¼š</strong>ç†è§£ç”¨æˆ·è¿›ç¨‹åˆ›å»ºã€æ‰§è¡Œã€åˆ‡æ¢å’Œç»“æŸçš„åŠ¨æ€ç®¡ç†è¿‡ç¨‹ï¼Œä»¥åŠåœ¨ç”¨æˆ·æ€é€šè¿‡ç³»ç»Ÿè°ƒç”¨å¾—åˆ°å†…æ ¸ä¸­å„ç§æœåŠ¡çš„è¿‡ç¨‹ï¼›</li>
<li><strong>å¤„ç†å™¨è°ƒåº¦ï¼š</strong>ç†è§£æ“ä½œç³»ç»Ÿçš„è°ƒåº¦è¿‡ç¨‹å’Œè°ƒåº¦ç®—æ³•ï¼›</li>
<li><strong>åŒæ­¥äº’æ–¥ä¸è¿›ç¨‹é—´é€šä¿¡ï¼š</strong>ç†è§£åŒæ­¥äº’æ–¥çš„å…·ä½“å®ç°ä»¥åŠå¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼Œç ”ç©¶æ­»é”äº§ç”Ÿçš„åŸå› ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Œä»¥åŠçº¿ç¨‹/è¿›ç¨‹é—´å¦‚ä½•è¿›è¡Œä¿¡æ¯äº¤æ¢å’Œå…±äº«ï¼›</li>
<li><strong>æ–‡ä»¶ç³»ç»Ÿï¼š</strong>ç†è§£æ–‡ä»¶ç³»ç»Ÿçš„å…·ä½“å®ç°ï¼Œä¸è¿›ç¨‹ç®¡ç†å’Œå†…å­˜ç®¡ç†ç­‰çš„å…³ç³»ï¼Œç¼“å­˜å¯¹æ“ä½œç³»ç»ŸIOè®¿é—®çš„æ€§èƒ½æ”¹è¿›ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ã€buffer cacheå’Œdisk driverä¹‹é—´çš„å…³ç³»ã€‚</li>
</ol>
<ul>
<li>æ¯ä¸ªå¼€å‘æ­¥éª¤éƒ½æ˜¯å»ºç«‹åœ¨ä¸Šä¸€ä¸ªæ­¥éª¤ä¹‹ä¸Šçš„</li>
<li>ä»ç†è§£æ“ä½œç³»ç»ŸåŸç†åˆ°å®è·µæ“ä½œç³»ç»Ÿè®¾è®¡ä¸å®ç°çš„æ¢ç´¢è¿‡ç¨‹</li>
</ul>
<p><img src="https://static.sitestack.cn/projects/simple_os_book/bf9d40a8440c97f51c06416e01c91a5f.png" alt="ucoreæ“ä½œç³»ç»Ÿæ¶æ„"></p>
<h1 id="2-å®éªŒç¯å¢ƒ"><a href="#2-å®éªŒç¯å¢ƒ" class="headerlink" title="2 å®éªŒç¯å¢ƒ"></a>2 å®éªŒç¯å¢ƒ</h1><h2 id="2-1-ä½¿ç”¨-Linux-å®éªŒç¯å¢ƒ"><a href="#2-1-ä½¿ç”¨-Linux-å®éªŒç¯å¢ƒ" class="headerlink" title="2.1 ä½¿ç”¨ Linux å®éªŒç¯å¢ƒ"></a>2.1 ä½¿ç”¨ Linux å®éªŒç¯å¢ƒ</h2><ul>
<li><p>å®‰è£… Ubuntu Linux 20.04</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_31939617/article/details/100114546">å‚è€ƒåšå®¢</a></li>
<li>å§“åï¼šzihao</li>
<li>å¯†ç ï¼š123456</li>
<li>æ³¨æ„ï¼šä¸è¦ skip </li>
</ul>
</li>
<li><p>å‘½ä»¤è¡Œæ–¹å¼çš„ç¼–è¯‘ã€è°ƒè¯•ã€è¿è¡Œæ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>å‘½ä»¤æ¨¡å¼çš„åŸºæœ¬ç»“æ„å’Œæ¦‚å¿µï¼šå®ç°éœ€è¦çš„æ‰€æœ‰æ“ä½œ</p>
</li>
<li><p>è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼šGNOMEèœå•-&gt;é™„ä»¶-&gt;ç»ˆç«¯</p>
</li>
<li><p>å‘½ä»¤è¡Œç»ˆç«¯æç¤ºç¬¦ï¼šè¡¨ç¤ºè®¡ç®—æœºå·²å°±ç»ªï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥æ“ä½œæŒ‡ä»¤ã€‚æ­¤æ—¶è¾“å…¥ä»»ä½•æŒ‡ä»¤æŒ‰å›è½¦åï¼Œè¯¥æŒ‡ä»¤å°†ä¼šè¢«æäº¤åˆ°è®¡ç®—æœºè¿è¡Œ</p>
</li>
</ul>
<ul>
<li><p><strong>å¸¸ç”¨æŒ‡ä»¤</strong>ï¼š</p>
<ul>
<li>lsï¼šæŸ¥è¯¢æ–‡ä»¶åˆ—è¡¨<ul>
<li>ls /: åˆ—å‡ºæ ¹ç›®å½•</li>
<li>ls -l: åˆ—å‡ºæ›´è¯¦ç»†çš„æ–‡ä»¶æ¸…å•</li>
<li>ls -a:åˆ—å‡ºåŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆä»¥.å¼€å¤´çš„æ–‡ä»¶ï¼‰</li>
</ul>
</li>
<li>pwdï¼šæŸ¥è¯¢å½“å‰æ‰€åœ¨ç›®å½•</li>
<li>cd /ç›®å½•è·¯å¾„ : è¿›å…¥å…¶ä»–ç›®å½•</li>
<li>echo â€œå­—ç¬¦ä¸²â€: åœ¨å±å¹•è¾“å‡ºå­—ç¬¦</li>
<li>catï¼šæ˜¾ç¤ºæ–‡ä»¶å†…å®¹<ul>
<li>less/moreä½œä¸ºé€‰é¡¹æ˜¾ç¤ºæ¯”è¾ƒå¤§çš„æ–‡ä»¶å†…å®¹</li>
</ul>
</li>
<li>cp: å¤åˆ¶æ–‡ä»¶</li>
<li>mvï¼šç§»åŠ¨æ–‡ä»¶</li>
<li>touchï¼šå»ºç«‹ä¸€ä¸ªç©ºæ–‡æœ¬æ–‡ä»¶</li>
<li>mkdirï¼šå»ºç«‹ä¸€ä¸ªç›®å½•</li>
<li>rmï¼šåˆ é™¤æ–‡ä»¶/ç›®å½•</li>
</ul>
</li>
<li><p><strong>é€‰é¡¹</strong>ï¼š</p>
<ul>
<li>-p: è®©ç³»ç»Ÿæ˜¾ç¤ºæŸä¸€é¡¹çš„ç±»å‹ï¼Œæ¯”å¦‚æ˜¯æ–‡ä»¶/æ–‡ä»¶å¤¹/å¿«æ·é“¾æ¥</li>
<li>-iï¼ˆinteractiveï¼‰ï¼šåœ¨ç³»ç»Ÿåˆ é™¤æ“ä½œå‰è¾“å‡ºç¡®å®šæŒ‡ç¤º</li>
<li>-rï¼ˆrecursiveï¼‰: åˆ é™¤æ–‡ä»¶å¤¹</li>
</ul>
</li>
<li><p><strong>å…¶ä»–åŸºæœ¬æŒ‡ä»¤</strong>ï¼š</p>
<ul>
<li>psï¼šæŸ¥è¯¢å½“å‰è¿›ç¨‹<ul>
<li>åˆ—å‡ºæ‰€å¯åŠ¨çš„æ‰€æœ‰è¿›ç¨‹</li>
<li>-a : åˆ—å‡ºæ‰€æœ‰çš„ï¼ˆåŒ…æ‹¬å…¶ä»–ç”¨æˆ·ï¼‰</li>
<li>ps auxww:  åˆ—å‡ºé™¤ä¸€äº›ç‰¹æ®Šè¿›ç¨‹ä»¥å¤–çš„æ‰€æœ‰è¿›ç¨‹ï¼Œå¹¶ä¼šä»¥ä¸€ä¸ªé«˜å¯è¯»çš„å½¢å¼æ˜¾ç¤ºç»“æœï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰è¾ƒä¸ºè¯¦ç»†çš„è§£é‡Š</li>
</ul>
</li>
</ul>
</li>
<li><p>æ§åˆ¶æµç¨‹</p>
<ul>
<li><p>è¾“å…¥/è¾“å‡º</p>
<ul>
<li>inputï¼šè¯»å–é€šè¿‡æ ‡å‡†è¾“å…¥è®¾å¤‡è¾“å…¥çš„ä¿¡æ¯</li>
<li>outputï¼šè¾“å‡ºæŒ‡å®šçš„è¾“å‡ºå†…å®¹ã€‚åœ¨é‡åˆ°æ“ä½œé”™è¯¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå‘½ä»¤è¾“å‡ºæ ‡å‡†é”™è¯¯æç¤º</li>
</ul>
</li>
<li><p>é‡å®šå‘</p>
</li>
<li><p>ç®¡é“ï¼šæŠŠå‡ ä¸ªç®€å•å‘½ä»¤è”åˆæˆä¸ºå¤æ‚çš„åŠŸèƒ½</p>
<ul>
<li><code>|</code><ul>
<li><code>grep -i command &lt; myfile | sort &gt; result.text</code></li>
<li>æœç´¢myfileä¸­çš„å‘½ä»¤ï¼Œå°†è¾“å‡ºåˆ†ç±»å¹¶å†™å…¥åˆ°åˆ†ç±»æ–‡ä»¶result.text</li>
</ul>
</li>
</ul>
</li>
<li><p>åå°è¿›ç¨‹ï¼šè¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹åˆ°åå°ï¼Œè¿½åŠ  &amp; åˆ°å‘½ä»¤åé¢</p>
<ul>
<li><p><code>sleep 60 &amp;</code></p>
</li>
<li><p>ç¡çœ å‘½ä»¤åœ¨åå°è¿è¡Œï¼Œå®ä¾ç„¶å¯ä»¥ä¸è®¡ç®—æœºäº¤äº’ã€‚é™¤äº†ä¸åŒæ­¥å¯åŠ¨å‘½ä»¤å¤–ï¼Œ</p>
</li>
<li><p>å¦‚æœä¸€ä¸ªå‘½ä»¤å°†å ç”¨å¾ˆå¤šæ—¶é—´ï¼Œæƒ³è®©å…¶æ”¾å…¥åå°è¿è¡Œ</p>
</li>
<li><blockquote>
<p>sleep 60</p>
<p>&lt; ctrl z&gt;   # åœæ­¢</p>
<p>bg  #è½¬å…¥åå°</p>
<p>fg  # è½¬å›å‰å°</p>
</blockquote>
</li>
<li><p><code>ctrl c</code>:æ€æ­»ä¸€ä¸ªå‰å°ç¨‹åº</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>ç¯å¢ƒå˜é‡</p>
</li>
<li><p>è·å¾—è½¯ä»¶åŒ…</p>
<ul>
<li><p>å‘½ä»¤è¡Œè·å–è½¯ä»¶åŒ…</p>
<ul>
<li><p><code>apt-get</code>: è‡ªåŠ¨ä»äº’è”ç½‘è½¯ä»¶åº“ä¸­æœç´¢ã€å®‰è£…ã€å‡çº§ä»¥åŠå¸è½½è½¯ä»¶æˆ–è€…æ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>ä¸€èˆ¬éœ€è¦root æ‰§è¡Œæƒé™</p>
</li>
<li><p>è¯­æ³• <code>sudo apt-get install gcc</code></p>
</li>
<li><p>å¸¸è§ apt å‘½ä»¤ï¼š</p>
<ul>
<li><blockquote>
<p>apt-get install <package> # ä¸‹è½½<package> ä»¥åŠæ‰€ä¾èµ–çš„è½¯ä»¶åŒ…ï¼ŒåŒæ—¶è¿›è¡Œè½¯ä»¶åŒ…çš„å®‰è£…æˆ–è€…å‡çº§</p>
<p>apt-get remove <package> #ç§»é™¤<package>ä»¥åŠæ‰€ä¾èµ–çš„è½¯ä»¶åŒ…</p>
<p>apt-cache search <pattern> #æœç´¢æ»¡è¶³pattern çš„è½¯ä»¶åŒ…</p>
<p>apt-cache show/showpkg <package> #æ˜¾ç¤ºè½¯ä»¶åŒ… <package> çš„å®Œæ•´æè¿°</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>è§£å†³ apt ä¸‹è½½é€Ÿåº¦å¤ªæ…¢ï¼š</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34246778/article/details/92849180">é€‰æ‹©æœ€ä½³æœåŠ¡å™¨</a></li>
</ul>
</li>
<li><p>å›¾å½¢ç•Œé¢è½¯ä»¶åŒ…è·å–</p>
<ul>
<li><code>èœå•æ -&gt;ç³»ç»Ÿç®¡ç† -&gt; æ–°å¾·é‡Œè½¯ä»¶åŒ…ç®¡ç†å™¨</code></li>
</ul>
</li>
<li><p>é…ç½®å‡çº§æº</p>
<ul>
<li><blockquote>
<p>Ubuntuçš„è½¯ä»¶åŒ…è·å–ä¾èµ–å‡çº§æºï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ â€œ/etc/apt/sources.listâ€ æ–‡ä»¶æ¥ä¿®æ”¹å‡çº§æºï¼ˆéœ€è¦ root æƒé™ï¼‰ï¼›æˆ–è€…ä¿®æ”¹æ–°ç«‹å¾—è½¯ä»¶åŒ…ç®¡ç†å™¨ä¸­ â€œè®¾ç½® &gt; è½¯ä»¶åº“â€ã€‚</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>æŸ¥æ‰¾å¸®åŠ©æ–‡ä»¶</p>
<ul>
<li>å‘½ä»¤ <code>man</code></li>
<li>å¯¹ Linux ä¸‹å¸¸ç”¨å‘½ä»¤ã€å®‰è£…è½¯ä»¶ã€ä»¥åŠCè¯­è¨€å¸¸ç”¨å‡½æ•°è¿›è¡ŒæŸ¥è¯¢</li>
<li>è¯­æ³• <code>man å‘½ä»¤</code></li>
</ul>
</li>
</ul>
<h2 id="2-2-å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶"><a href="#2-2-å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶" class="headerlink" title="2.2 å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶"></a>2.2 å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶</h2><ul>
<li><p><strong>ç¼–è¾‘å™¨</strong></p>
<ul>
<li><p>gnome</p>
</li>
<li><p><strong>Vim</strong></p>
<ul>
<li><p>ä¸‹è½½å®‰è£…VIm <code>sudo spt-get install vim</code></p>
</li>
<li><p>æŸ¥çœ‹ vim ç‰ˆæœ¬å‘½ä»¤ <code>vim --version</code></p>
</li>
<li><p>ç¼–è¾‘é…ç½®æ–‡ä»¶è‡³ <code>~/.vimrc</code></p>
<ul>
<li><blockquote>
<p> åœ¨å¯åŠ¨vimæ—¶ï¼Œå½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹çš„.vimrcæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨è¯»å–ï¼Œè¯¥æ–‡ä»¶å¯ä»¥åŒ…å«ä¸€äº›è®¾ç½®ç”šè‡³è„šæœ¬ï¼Œæ‰€ä»¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æŠŠ.vimrcæ–‡ä»¶åˆ›å»ºåœ¨å½“å‰ç”¨æˆ·çš„æ ¹ç›®å½•ä¸‹æ¯”è¾ƒæ–¹ä¾¿</p>
</blockquote>
</li>
</ul>
</li>
<li><blockquote>
<p>```<br>set nocompatible<br>set encoding=utf-8<br>set fileencodings=utf-8,chinese<br>set tabstop=4<br>set cindent shiftwidth=4<br>set backspace=indent,eol,start<br>autocmd Filetype c set omnifunc=ccomplete#Complete<br>autocmd Filetype cpp set omnifunc=cppcomplete#Complete<br>set incsearch<br>set number<br>set display=lastline<br>set ignorecase<br>syntax on<br>set nobackup<br>set ruler<br>set showcmd<br>set smartindent<br>set hlsearch<br>set cmdheight=1<br>set laststatus=2<br>set shortmess=atI<br>set formatoptions=tcrqn<br>set autoindent </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **exuberant-ctags:** ä¸ºç¨‹åºè¯­è¨€å¯¹è±¡ç”Ÿæˆç´¢å¼•ï¼Œå…¶ç»“æœèƒ½å¤Ÿè¢«ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æˆ–è€…å…¶ä»–å·¥å…·ç®€æ·è¿…é€Ÿçš„å®šä½</span><br><span class="line"></span><br><span class="line"># 3 äº†è§£ç¼–ç¨‹å¼€å‘è°ƒè¯•çš„åŸºæœ¬å·¥å…·</span><br><span class="line"></span><br><span class="line">## 3.1 gcc çš„åŸºæœ¬ç”¨æ³•</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨ vim ç¼–è¾‘ä¸€ä¸ª .c æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">* ç”¨ gcc ç¼–è¯‘æ–‡ä»¶ï¼š&#96;gcc -Wall hello.c -o hello&#96;</span><br><span class="line"></span><br><span class="line"> * &gt;  è¯¥å‘½ä»¤å°†æ–‡ä»¶â€˜hello.câ€™ä¸­çš„ä»£ç **ç¼–è¯‘**ä¸ºæœºå™¨ç å¹¶**å­˜å‚¨**åœ¨å¯æ‰§è¡Œæ–‡ä»¶ â€˜helloâ€™ä¸­ã€‚æœºå™¨ç çš„æ–‡ä»¶åæ˜¯é€šè¿‡ -o é€‰é¡¹æŒ‡å®šçš„ã€‚è¯¥é€‰é¡¹é€šå¸¸ä½œä¸ºå‘½ä»¤è¡Œä¸­çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚å¦‚æœè¢«çœç•¥ï¼Œè¾“å‡ºæ–‡ä»¶é»˜è®¤ä¸º â€˜a.out</span><br><span class="line"></span><br><span class="line">* &#96;-Wall&#96;: å¼€å¯ç¼–è¯‘å™¨å‡ ä¹æ‰€æœ‰å¸¸ç”¨çš„è­¦å‘Š</span><br><span class="line"></span><br><span class="line">* è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼šè¾“å…¥å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„</span><br><span class="line"></span><br><span class="line"> * &#96;.&#x2F;hello&#96;</span><br><span class="line"></span><br><span class="line"> * &gt; è¯¥å‘½ä»¤å°†å¯æ‰§è¡Œæ–‡ä»¶**è½½å…¥å†…å­˜**ï¼Œå¹¶**ä½¿CPUå¼€å§‹æ‰§è¡Œ**å…¶åŒ…å«çš„æŒ‡ä»¤</span><br><span class="line"></span><br><span class="line">.&#x2F; å½“å‰ç›®å½•</span><br><span class="line"></span><br><span class="line">å› æ­¤ &#96;.&#x2F;hello&#96;: è½½å…¥å¹¶æ‰§è¡Œå½“å‰ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ hello</span><br><span class="line"></span><br><span class="line">### 3.1.1 AT &amp; Tæ±‡ç¼–åŸºæœ¬è¯­æ³•</span><br><span class="line"></span><br><span class="line">* Ucore ç”¨çš„æ˜¯ AT&amp;T æ ¼å¼çš„æ±‡ç¼–</span><br><span class="line"></span><br><span class="line"> * 1.**å¯„å­˜å™¨å¼•ç”¨**ï¼š åœ¨å¯„å­˜å™¨å·å‰åŠ  &#96;%&#96;</span><br><span class="line"> * 2.**æ“ä½œæ•°é¡ºåº**ï¼šä»å·¦åˆ°å³</span><br><span class="line"> * 3.**ç«‹å³æ•°**ï¼šåœ¨æ•°å‰é¢åŠ  &#96;$&#96;</span><br><span class="line">   * 16 è¿›åˆ¶å¸¸æ•°ï¼š&#96;0x $&#96;</span><br><span class="line"> * 4**.ç¬¦å·å¸¸æ•°**ï¼šç›´æ¥å¼•ç”¨</span><br><span class="line">   * åœ¨å‰åŠ &#96;$&#96;ï¼šå¼•ç”¨ç¬¦å·åœ°å€</span><br><span class="line"> * 5.**æ“ä½œæ•°é•¿åº¦**ï¼šåŠ åœ¨æŒ‡ä»¤å</span><br><span class="line">   * b : 8-bit</span><br><span class="line">   * w: 16-bit</span><br><span class="line">   * l: 32-bit</span><br><span class="line">   * è‹¥æ²¡æœ‰æŒ‡å®šæ“ä½œæ•°é•¿åº¦ï¼Œç¼–è¯‘å™¨æŒ‰ç…§**ç›®æ ‡æ“ä½œæ•°**çš„é•¿åº¦æ¥è®¾ç½®</span><br><span class="line"> * 6**.å†…å­˜å¼•ç”¨**ï¼š</span><br><span class="line">   * Intel æ ¼å¼çš„ç®€ä»‹å†…å­˜å¼•ç”¨ï¼š</span><br><span class="line">     * &#96;section:[base+index*scale+displacement]&#96;</span><br><span class="line">   * AT&amp;T æ ¼å¼çš„é—´æ¥å†…å­˜å¼•ç”¨ï¼š</span><br><span class="line">     * &#96;section:displacement(base,index,scale)&#96;</span><br><span class="line"></span><br><span class="line">* ä¸ Intelæ ¼å¼çš„æ±‡ç¼–çš„ä¸åŒ</span><br><span class="line"></span><br><span class="line"> * â€‹	</span><br><span class="line"></span><br><span class="line"> * &#96;&#96;&#96;</span><br><span class="line">   * å¯„å­˜å™¨å‘½ååŸåˆ™</span><br><span class="line">           AT&amp;T: %eax                      Intel: eax</span><br><span class="line">       * æº&#x2F;ç›®çš„æ“ä½œæ•°é¡ºåº </span><br><span class="line">           AT&amp;T: movl %eax, %ebx           Intel: mov ebx, eax</span><br><span class="line">       * å¸¸æ•°&#x2F;ç«‹å³æ•°çš„æ ¼å¼ã€€</span><br><span class="line">           AT&amp;T: movl $_value, %ebx        Intel: mov eax, _value</span><br><span class="line">         æŠŠvalueçš„åœ°å€æ”¾å…¥eaxå¯„å­˜å™¨</span><br><span class="line">           AT&amp;T: movl $0xd00d, %ebx        Intel: mov ebx, 0xd00d</span><br><span class="line">       * æ“ä½œæ•°é•¿åº¦æ ‡è¯† </span><br><span class="line">           AT&amp;T: movw %ax, %bx             Intel: mov bx, ax</span><br><span class="line">       * å¯»å€æ–¹å¼ </span><br><span class="line">           AT&amp;T:   immed32(basepointer, indexpointer, indexscale)</span><br><span class="line">           Intel:  [basepointer + indexpointer Ã— indexscale + imm32)</span><br></pre></td></tr></table></figure></blockquote>
</li>
</ul>
</li>
<li><p>OS å·¥ä½œäºä¿æŠ¤æ¨¡å¼ä¸‹æ—¶ï¼Œç”¨ 32 ä½çº¿æ€§åœ°å€ï¼Œæ‰€ä»¥åœ¨è®¡ç®—åœ°å€æ—¶ä¸ç”¨è€ƒè™‘ segment ï¼šoffse</p>
</li>
<li><p>ä¸Šå¼ä¸­çš„åœ°å€<code>immed32+basepointer+indexpointer*indexscale</code></p>
</li>
<li><p>```</p>
<pre><code>* ç›´æ¥å¯»å€ 
        AT&amp;T:  foo                         Intel: [foo]
        fooæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚æ³¨æ„åŠ ä¸Š$æ˜¯è¡¨ç¤ºåœ°å€å¼•ç”¨ï¼Œä¸åŠ æ˜¯è¡¨ç¤ºå€¼å¼•ç”¨ã€‚å¯¹äºå±€éƒ¨å˜é‡ï¼Œå¯ä»¥é€šè¿‡å †æ ˆæŒ‡é’ˆå¼•ç”¨ã€‚

* å¯„å­˜å™¨é—´æ¥å¯»å€ 
        AT&amp;T: (%eax)                        Intel: [eax]

* å˜å€å¯»å€ 
        AT&amp;T: _variable(%eax)               Intel: [eax + _variable]
        AT&amp;T: _array( ,%eax, 4)             Intel: [eax Ã— 4 + _array]
        AT&amp;T: _array(%ebx, %eax,8)          Intel: [ebx + eax Ã— 8 + _array]
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 3.1.4 GCC åŸºæœ¬å†…è”æ±‡ç¼–</span><br><span class="line"></span><br><span class="line">* GCC æ”¯æŒåœ¨ C++ ä»£ç ä¸­åµŒå…¥æ±‡ç¼–ä»£ç ï¼šGCC Inline ASMâ€”â€”GCC å†…è”æ±‡ç¼–</span><br><span class="line"></span><br><span class="line">  * æœ‰åˆ©äºå°†ä¸€äº›C++æ— æ³•è¡¨è¾¾çš„æŒ‡ä»¤ç›´æ¥åµŒå…¥</span><br><span class="line">  * å…è®¸æˆ‘ä»¬ç›´æ¥å†™æ±‡ç¼–ï¼Œæ¥ç¼–å†™ç®€æ´ä»£ç </span><br><span class="line"></span><br><span class="line">* GCC æä¾›äº†ä¸¤å†…è”æ±‡ç¼–è¯­å¥ï¼ˆInline asm statementsï¼‰:</span><br><span class="line"></span><br><span class="line">  * åŸºæœ¬å†…è”æ±‡ç¼–è¯­å¥ï¼ˆbasic inline asm statementsï¼‰</span><br><span class="line">    * æ ¼å¼ï¼š&#96;asm(&quot;statements&quot;);&#96;</span><br><span class="line">  * æ‰©å±•å†…è”æ±‡ç¼–è¯­å¥ï¼ˆextended inline asm statementsï¼‰</span><br><span class="line"></span><br><span class="line">* &#96;&quot;asm&quot;&#96;å’Œ&#96;â€œ_asm_â€&#96;çš„å«ä¹‰ä¸€è‡´: å£°æ˜ä¸€ä¸ªå†…è”æ±‡ç¼–è¡¨è¾¾å¼</span><br><span class="line"></span><br><span class="line">  * asm æ˜¯ GCC å…³é”®å­— asmçš„å®å®šä¹‰</span><br><span class="line">    * &#96;#define _asm_ asm&#96;</span><br><span class="line"></span><br><span class="line">* è‹¥æœ‰å¤šè¡Œæ±‡ç¼–ï¼Œæ¯è¡Œæœ€ååŠ  &#96;\n\t&#96;</span><br><span class="line"></span><br><span class="line">  * \n : æ¢è¡Œç¬¦</span><br><span class="line">  * \t : tabç¬¦å·</span><br><span class="line">  * ä¸ºäº† ä½¿å¾— gcc åœ¨ç¼–è¯‘å†…è”æ±‡ç¼–ä»£ç ï¼Œæˆä¸ºä¸€èˆ¬çš„æ±‡ç¼–ä»£ç æ—¶èƒ½å¤Ÿä¿è¯æ¢è¡Œï¼Œå’Œæœ‰ä¸€å®šçš„ç©ºæ ¼</span><br><span class="line">  * GCC ç¼–è¯‘å‡ºæ¥çš„æ±‡ç¼–ä»£ç å°±æ˜¯åŒå¼•å·ä¸­çš„å†…å®¹</span><br><span class="line"></span><br><span class="line">* gcc åœ¨å¤„ç†æ±‡ç¼–æ—¶ï¼ŒæŠŠasmï¼ˆï¼‰çš„å†…å®¹æ‰“å°åˆ°æ±‡ç¼–æ–‡ä»¶ä¸­ï¼Œæ ¼å¼æ§åˆ¶å­—ç¬¦æ˜¯å¿…è¦çš„</span><br><span class="line"></span><br><span class="line">* &#96;&#96;&#96;</span><br><span class="line">      asm(&quot;movl %eax, %ebx&quot;);</span><br><span class="line">      asm(&quot;xorl %ebx, %edx&quot;);</span><br><span class="line">      asm(&quot;movl $0, _boo);</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç”±äºæˆ‘ä»¬åœ¨<strong>å†…è”æ±‡ç¼–</strong>ä¸­æ”¹å˜äº† edx å’Œ ebx çš„å€¼ï¼Œä½†æ˜¯ç”±äº gcc çš„ç‰¹æ®Šçš„å¤„ç†æ–¹æ³•ï¼Œå³å…ˆå½¢æˆæ±‡ç¼–æ–‡ä»¶ï¼Œå†äº¤ç»™ GAS å»æ±‡ç¼–ï¼Œæ‰€ä»¥ GAS å¹¶ä¸çŸ¥é“æˆ‘ä»¬å·²ç»æ”¹å˜äº† edxå’Œ ebx çš„å€¼ï¼Œå¦‚æœç¨‹åºçš„ä¸Šä¸‹æ–‡éœ€è¦ edx æˆ– ebx ä½œå…¶ä»–å†…å­˜å•å…ƒæˆ–å˜é‡çš„æš‚å­˜ï¼Œå°±ä¼šäº§ç”Ÿæ²¡æœ‰é¢„æ–™çš„å¤šæ¬¡èµ‹å€¼ï¼Œå¼•èµ·ä¸¥é‡çš„åæœã€‚å¯¹äºå˜é‡ _booä¹Ÿå­˜åœ¨ä¸€æ ·çš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ç”¨åˆ°<strong>æ‰©å±• GCC å†…è”æ±‡ç¼–è¯­æ³•</strong>ã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="3-1-5-GCC-æ‰©å±•å†…è”æ±‡ç¼–"><a href="#3-1-5-GCC-æ‰©å±•å†…è”æ±‡ç¼–" class="headerlink" title="3.1.5 GCC æ‰©å±•å†…è”æ±‡ç¼–"></a>3.1.5 GCC æ‰©å±•å†…è”æ±‡ç¼–</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u014160900/article/details/44900303">å‚è€ƒåšå®¢</a></p>
<ul>
<li><blockquote>
<pre><code>#define read_cr0() (&#123; \
 unsigned int __dummy; \
 __asm__( \
     &quot;movl %%cr0,%0\n\t&quot; \
     :&quot;=r&quot; (__dummy)); \ 
 __dummy; \
&#125;)
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* GCC æ‰©å±•å†…è”æ±‡ç¼–åŸºæœ¬æ ¼å¼</span><br><span class="line"></span><br><span class="line"> * &gt; asm [volatile] (Assembler Template</span><br><span class="line"></span><br><span class="line">â€‹	: Output operands</span><br><span class="line"></span><br><span class="line">â€‹	[ : Input Operands</span><br><span class="line"></span><br><span class="line">â€‹	[ : Clobbers  ] ] )</span><br><span class="line"></span><br><span class="line"> * asm ä»£è¡¨æ±‡ç¼–ä»£ç çš„å¼€å§‹</span><br><span class="line"></span><br><span class="line"> * [volatile] : å¯é€‰é¡¹ï¼Œé¿å… asm æŒ‡ä»¤è¢«åˆ é™¤ã€ç§»åŠ¨æˆ–ç»„åˆ</span><br><span class="line"></span><br><span class="line"> * æŒ‡ä»¤&#96;â€œmovl %%cr0,%0\n\tâ€&#96;</span><br><span class="line"></span><br><span class="line"> * æ•°å­—å‰ç¼€ï¼š&#96;%1&#96;, è¡¨ç¤ºä½¿ç”¨å¯„å­˜å™¨çš„æ ·æ¿æ“ä½œæ•°</span><br><span class="line"></span><br><span class="line">   * æŒ‡ä»¤ä¸­å‡ ä¸ªæ“ä½œæ•°ï¼Œè¡¨ç¤ºæœ‰å‡ ä¸ªå˜é‡éœ€è¦ä¸å¯„å­˜å™¨ç»“åˆï¼Œç”±gccåœ¨ç¼–è¯‘æ—¶æ ¹æ®åé¢çš„è¾“å‡ºéƒ¨åˆ†å’Œè¾“å…¥éƒ¨åˆ†çš„çº¦æŸæ¡ä»¶è¿›è¡Œç›¸åº”çš„å¤„ç†</span><br><span class="line">   * å¯ä½¿ç”¨çš„æ“ä½œæ•°æ€»æ•°å–å†³äºå…·ä½“CPUä¸­é€šç”¨å¯„å­˜å™¨çš„æ•°é‡</span><br><span class="line">   * &#96;%%cr0&#96;: ä¸¤ä¸ª % ï¼Œè¡¨ç¤ºç”¨åˆ°å…·ä½“çš„å¯„å­˜å™¨</span><br><span class="line"></span><br><span class="line"> * Output Operands listï¼šè¾“å‡ºéƒ¨åˆ†ï¼Œç”¨ä»¥è§„å®šå¯¹è¾“å‡ºå˜é‡ï¼ˆç›®æ ‡æ“ä½œæ•°ï¼‰å¦‚ä½•ä¸å¯„å­˜å™¨ç»“åˆçš„çº¦æŸï¼ˆconstraintï¼‰ã€‚è¾“å‡ºéƒ¨åˆ†å¯ä»¥æœ‰å¤šä¸ªçº¦æŸï¼Œä»¥é€—å·åˆ†å¼€</span><br><span class="line"></span><br><span class="line">   * æ¯ä¸ªçº¦æŸè¯­æ³•ï¼š&#96;â€œ&#x3D;çº¦æŸå­—æ¯â€ å…³äºå˜é‡ç»“åˆçš„çº¦æŸ&#96;</span><br><span class="line"></span><br><span class="line">   * &#96;:&quot;&#x3D;r&quot; (_dummy)&#96;</span><br><span class="line"></span><br><span class="line">     * &#x3D;r è¡¨ç¤ºç›¸åº”çš„ç›®æ ‡æ“ä½œæ•°ï¼ˆ%0ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œå¹¶ä¸”å˜é‡ _dummy å­˜æ”¾åœ¨è¿™ä¸ªå¯„å­˜å™¨ä¸­</span><br><span class="line"></span><br><span class="line">   * &#96;:&quot;&#x3D;m&quot; (_dummy)&#96;</span><br><span class="line"></span><br><span class="line">     * &#x3D;m è¡¨ç¤ºç›¸åº”çš„ç›®æ ‡æ“ä½œæ•°æ˜¯å­˜æ”¾åœ¨å†…å­˜å•å…ƒ _dummy ä¸­</span><br><span class="line"></span><br><span class="line">   * å‡ ä¸ªä¸»è¦çš„çº¦æŸå­—æ¯</span><br><span class="line"></span><br><span class="line">     | å­—æ¯       | å«ä¹‰                                             |</span><br><span class="line">     | ---------- | ------------------------------------------------ |</span><br><span class="line">     | m, v, o    | å†…å­˜å•å…ƒ                                         |</span><br><span class="line">     | R          | ä»»ä½•é€šç”¨å¯„å­˜å™¨                                   |</span><br><span class="line">     | Q          | å¯„å­˜å™¨eax, ebx, ecx,edxä¹‹ä¸€                      |</span><br><span class="line">     | I, h       | ç›´æ¥æ“ä½œæ•°                                       |</span><br><span class="line">     | E, F       | æµ®ç‚¹æ•°                                           |</span><br><span class="line">     | G          | ä»»æ„                                             |</span><br><span class="line">     | a, b, c, d | å¯„å­˜å™¨eax&#x2F;ax&#x2F;al, ebx&#x2F;bx&#x2F;bl, ecx&#x2F;cx&#x2F;clæˆ–edx&#x2F;dx&#x2F;dl |</span><br><span class="line">     | S, D       | å¯„å­˜å™¨esiæˆ–edi                                   |</span><br><span class="line">     | I          | å¸¸æ•°ï¼ˆ0ï½31ï¼‰                                    |</span><br><span class="line"></span><br><span class="line"> * &#x3D;&#x3D;Input Operand list: è¾“å…¥éƒ¨åˆ†&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">   * ä¸è¾“å‡ºéƒ¨åˆ†ç›¸ä¼¼ï¼Œä½†æ²¡æœ‰ &#96;&#x3D;&#96;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[</span><br><span class="line"></span><br><span class="line">### 3.1.6 **Extended Asm**</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;1782e14a0766)</span><br><span class="line"></span><br><span class="line">* å†…è”å‡½æ•°ï¼šåœ¨Cè¯­è¨€ä¸­ï¼ŒæŒ‡å®šç¼–è¯‘å™¨å°†ä¸€ä¸ªå‡½æ•°ä»£ç ç›´æ¥å¤åˆ¶åˆ°è°ƒç”¨å…¶ä»£ç çš„åœ°æ–¹æ‰§è¡Œã€‚</span><br><span class="line"> * å†…è”å‡½æ•°é™ä½äº†å‡½æ•°çš„è°ƒç”¨å¼€é”€</span><br><span class="line"> * æŒ‡å®šç¼–è¯‘å™¨å°†ä¸€ä¸ªå‡½æ•°å¤„ç†ä¸ºå†…è”å‡½æ•°ï¼Œåªè¦åœ¨å‡½æ•°ç”³æ˜å‰åŠ ä¸Š inline å…³é”®å­—</span><br><span class="line">* å†…è”æ±‡ç¼–ï¼šç”¨æ±‡ç¼–è¯­å¥å†™æˆçš„å†…è”å‡½æ•°</span><br><span class="line"> * GCCï¼ˆCNU Compiler Collection for Linuxï¼‰ ä¸­å£°æ˜ä¸€ä¸ªå†…è”æ±‡ç¼–å‡½æ•°ï¼Œç”¨ asm å…³é”®å­—</span><br><span class="line"> * æ“ä½œ C è¯­è¨€å˜é‡</span><br><span class="line"></span><br><span class="line">* åœ¨æ‰©å±•å½¢å¼ä¸­ï¼Œå¯ä»¥æŒ‡å®šæ“ä½œæ•°ï¼Œé€‰æ‹©è¾“å…¥è¾“å‡ºå¯„å­˜å™¨ï¼ŒæŒ‡æ˜è¦ä¿®æ”¹çš„å¯„å­˜å™¨åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">* å½¢å¼ï¼š</span><br><span class="line"></span><br><span class="line"> * &#96;&#96;&#96;cpp</span><br><span class="line">   asm ( assembler template</span><br><span class="line">           : output operands                &#x2F;* optional *&#x2F;</span><br><span class="line">           : input operands                   &#x2F;* optional *&#x2F;</span><br><span class="line">           : list of clobbered registers   &#x2F;* optional *&#x2F;</span><br><span class="line">   );</span><br></pre></td></tr></table></figure>
</code></pre>
</blockquote>
<ul>
<li><p><code>assembler template</code>: æ±‡ç¼–æŒ‡ä»¤éƒ¨åˆ†</p>
</li>
<li><p>æ‹¬å·å†…çš„operandsï¼šC è¯­è¨€è¡¨è¾¾å¼ä¸­å¸¸é‡å­—ç¬¦ä¸²ï¼Œä¸åŒéƒ¨åˆ†ä¹‹é—´ç”¨å†’å·åˆ†éš”</p>
<p>ç›¸åŒéƒ¨åˆ†è¯­å¥ä¸­çš„æ¯ä¸ªå°éƒ¨åˆ†ç”¨é€—å·åˆ†éš”</p>
<p>æœ€å¤šæŒ‡å®š10ä¸ªæ“ä½œæ•°</p>
</li>
</ul>
</li>
<li><p>è‹¥æ²¡æœ‰ output operands ,æœ‰input operandsï¼Œéœ€è¦ä¿ç•™output å‰çš„å†’å·</p>
<ul>
<li><p>```cpp<br>asm ( â€œcld\n\tâ€</p>
<pre><code>      &quot;rep\n\t&quot;
      &quot;stosl&quot;
     : /* no output registers */
     : &quot;c&quot; (count), &quot;a&quot; (fill_value), &quot;D&quot; (dest)
     : &quot;%ecx&quot;, &quot;%edi&quot;
  );
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä¾‹å­ï¼šç”¨æ±‡ç¼–ä»£ç æŠŠaçš„å€¼èµ‹ç»™b</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;php</span><br><span class="line">    int a&#x3D;10, b;</span><br><span class="line">    asm ( &quot;movl %1, %%eax;</span><br><span class="line">               movl %%eax, %0;&quot;</span><br><span class="line">              :&quot;&#x3D;r&quot;(b)           &#x2F;* output *&#x2F;</span><br><span class="line">              :&quot;r&quot;(a)              &#x2F;* input *&#x2F;</span><br><span class="line">              :&quot;%eax&quot;         &#x2F;* clobbered register *&#x2F;</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>

<ul>
<li>b æ˜¯è¾“å‡ºæ“ä½œæ•°ï¼Œç”¨ %0 è®¿é—®</li>
<li>a æ˜¯è¾“å…¥æ“ä½œæ•°ï¼Œç”¨ %1 è®¿é—®</li>
<li>r æ˜¯constraintï¼šè®© GCC è‡ªå·±é€‰æ‹©ä¸€ä¸ªå¯„å­˜å™¨å­˜å‚¨å˜é‡a<ul>
<li>è¾“å‡ºéƒ¨åˆ†constraint å‰éœ€è¦ = ä¿®é¥°</li>
</ul>
</li>
<li>ç”¨ %% å’Œ % åŒºåˆ†æ“ä½œæ•°å’Œå¯„å­˜å™¨<ul>
<li>æ“ä½œæ•°å·²ç»ç”¨ä¸€ä¸ª%åšå‰ç¼€ï¼Œå¯„å­˜å™¨åªèƒ½ç”¨%%åšå‰ç¼€</li>
</ul>
</li>
<li>clobbered registerï¼šä»£è¡¨å†…è”æ±‡ç¼–ä»£ç ä¼šæ”¹å˜å¯„å­˜å™¨eaxçš„å†…å®¹</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler-templateï¼‰"><a href="#æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler-templateï¼‰" class="headerlink" title="æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler templateï¼‰"></a>æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler templateï¼‰</h4><ul>
<li>åµŒå…¥åœ¨Cä¸­çš„æ±‡ç¼–æŒ‡ä»¤<ul>
<li>æ¯æ¡æŒ‡ä»¤æ”¾åœ¨ä¸€ä¸ªåŒå¼•å·å†…ï¼Œæˆ–éƒ½åœ¨ä¸€ä¸ªåŒå¼•å·</li>
<li>æ¯æ¡æŒ‡ä»¤å <code>\n\t</code></li>
<li>è®¿é—® <strong>C è¯­è¨€å˜é‡</strong>ç”¨ %0ï¼Œ%1â€¦</li>
</ul>
</li>
</ul>
<h4 id="æ“ä½œæ•°ï¼ˆOperandsï¼‰"><a href="#æ“ä½œæ•°ï¼ˆOperandsï¼‰" class="headerlink" title="æ“ä½œæ•°ï¼ˆOperandsï¼‰"></a>æ“ä½œæ•°ï¼ˆOperandsï¼‰</h4><ul>
<li><p>æ ¼å¼<code>&quot;constraint&quot; (C expr) //&quot;=r&quot;(result)</code></p>
</li>
<li><p>asm å†…éƒ¨ä½¿ç”¨<strong>Cè¯­è¨€å­—ç¬¦ä¸²</strong>ä½œä¸ºæ“ä½œæ•°</p>
</li>
<li><p>æ“ä½œæ•°éƒ½è¦æ”¾åœ¨åŒå¼•å·å†…</p>
<ul>
<li>å¯¹äº output æ“ä½œæ•°è¦ç”¨ =</li>
</ul>
</li>
<li><p>constraint å’Œ ä¿®é¥°éƒ½æ”¾åœ¨åŒå¼•å·å†…</p>
</li>
<li><p>constraintï¼šæŒ‡å®šæ“ä½œæ•°çš„å¯»å€ç±»å‹ï¼ˆå†…å­˜å¯»å€æˆ–è€…å¯„å­˜å™¨å¯»å€ï¼‰ï¼Œä¹Ÿç”¨æ¥æŒ‡æ˜ä½¿ç”¨é‚£ä¸ªå¯„å­˜å™¨</p>
</li>
<li><p>è‹¥æœ‰å¤šä¸ªæ“ä½œæ•°ï¼Œä½¿ç”¨é€—å·éš”å¼€</p>
</li>
<li><p>åœ¨æ±‡ç¼–æ¨¡æ¿éƒ¨åˆ†ï¼ŒæŒ‰é¡ºåºç”¨æ•°å­—å»å¼•ç”¨æ“ä½œæ•°</p>
</li>
<li><p>è¾“å‡ºæ“ä½œæ•°è¡¨è¾¾å¼å¿…é¡»æ˜¯å·¦å€¼ï¼Œè¾“å…¥æ“ä½œæ•°ä¸ä¸€å®šæ˜¯</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼æˆ–è€…å˜é‡</li>
</ul>
</li>
<li><p>ä¾‹å­ï¼šæŠŠä¸€ä¸ªæ•°å­—ä¹˜ä»¥äº”</p>
<ul>
<li>```cpp<br>asm ( â€œleal (%1,%1,4), %0â€<pre><code>    : &quot;=r&quot; (five_times_x)
    : &quot;r&quot; (x)
 );
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * è¾“å…¥æ“ä½œæ•°æ˜¯ xï¼ŒæœªæŒ‡å®šå…·ä½“ä½¿ç”¨é‚£ä¸ªå¯„å­˜å™¨</span><br><span class="line"></span><br><span class="line">* ä¿®æ”¹ constraint éƒ¨åˆ†å†…å®¹ï¼Œä½¿å¾— GCC å›ºå®šä½¿ç”¨åŒä¸€ä¸ªå¯„å­˜å™¨å¤„ç†è¾“å…¥è¾“å‡ºæ“ä½œæ•°,ä½†æœªæŒ‡å®šå…·ä½“å“ªä¸ªå¯„å­˜å™¨</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;cpp</span><br><span class="line">    asm( &quot;lea (%0,%0,4),%0&quot;</span><br><span class="line">            : &quot;&#x3D;r&quot; (five_times_x)</span><br><span class="line">            : &quot;0&quot; (x)</span><br><span class="line">        );</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>éœ€è¦æŒ‡å®šå…·ä½“çš„å¯„å­˜å™¨</p>
<ul>
<li>```cpp<br>asm ( â€œleal (%%ecx,%%ecx,4), %%ecxâ€<pre><code>    : &quot;=c&quot; (x)
    : &quot;c&quot; (x) 
</code></pre>
);<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä¸éœ€è¦å¡«å†™ClobberList</span><br><span class="line">  * æŒ‡å®šGCCè‡ªå·±é€‰æ‹©åˆé€‚çš„å¯„å­˜å™¨</span><br><span class="line">  * å› ä¸º GCC çŸ¥é“xå°†å­˜å…¥ ecx ï¼ŒGCCå®Œå…¨çŸ¥é“ecxçš„å€¼</span><br><span class="line"></span><br><span class="line">#### ç ´ååˆ—è¡¨ Clobber List</span><br><span class="line"></span><br><span class="line">* å¦‚æœæŸä¸ªæŒ‡ä»¤æ”¹å˜äº†æŸä¸ªå¯„å­˜å™¨çš„å€¼ï¼Œå°±å¿…é¡»åœ¨ç¬¬ä¸‰ä¸ªå†’å·åæ ‡è¯†å‡ºè¯¥å¯„å­˜å™¨</span><br><span class="line">* ä¸ºäº†å‘ŠçŸ¥ GCC ï¼Œè®©å…¶ä¸åœ¨å‡å®šä¹‹å‰å¯„å­˜å™¨ä¸­çš„å€¼ä¾ç„¶åˆæ³•</span><br><span class="line">* è¾“å…¥è¾“å‡ºå¯„å­˜å™¨ä¸ç”¨æ”¾å…¥Clobber List</span><br><span class="line">  * GCC èƒ½å¤ŸçŸ¥é“asmå°†ä½¿ç”¨è¿™äº›å¯„å­˜å™¨</span><br><span class="line">  * å·²ç»è¢«æ˜¾ç¤ºåœ°æŒ‡å®šè¾“å…¥è¾“å‡º</span><br><span class="line">  * å…¶ä»–ä½¿ç”¨åˆ°çš„å¯„å­˜å™¨æ— è®ºæ˜¯æ˜¾ç¤ºæˆ–éšå¼éƒ½éœ€è¦æ ‡æ˜</span><br><span class="line">* è‹¥æŒ‡ä»¤ä¸­å·²æ— æ³•æ„æ–™çš„å½¢å¼ä¿®æ”¹äº†å†…å­˜å€¼ï¼Œéœ€è¦åœ¨ Clobber List ä¸­åŠ å…¥ memory</span><br><span class="line">  * ä½¿å¾— GCC ä¸å»ç¼“å­˜è¿™äº›å†…å­˜å€¼</span><br><span class="line">  * Clobber List ä¸­åˆ—å‡ºçš„å¯„å­˜å™¨å¯ä»¥è¢«å¤šæ¬¡å†™è¯»</span><br><span class="line"></span><br><span class="line">#### ç‰¹å¾ä¿®é¥°ç¬¦ Volatile</span><br><span class="line"></span><br><span class="line">* è¦æ±‚æ±‡ç¼–ä»£ç å¿…é¡»åœ¨è¢«æ”¾ç½®çš„ä½ç½®æ‰§è¡Œï¼ˆä¸èƒ½è¢«å¾ªç¯ä¼˜åŒ–æˆ–ç§»é™¤å¾ªç¯ï¼‰</span><br><span class="line"></span><br><span class="line">* ç¦æ­¢è¿™äº›ä»£ç è¢«ç§»åŠ¨æˆ–åˆ é™¤</span><br><span class="line"></span><br><span class="line">* &#96;asm volatile ();&#96;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">#### çº¦æŸ Constraints</span><br><span class="line"></span><br><span class="line">* å¯„å­˜å™¨æ“ä½œæ•° constraintsï¼š&#96;r&#96;</span><br><span class="line"></span><br><span class="line">  * æ“ä½œæ•°å°†è¢«å­˜å‚¨åœ¨é€šç”¨å¯„å­˜å™¨ä¸­</span><br><span class="line"></span><br><span class="line">  * &#96;asm (&quot;movl %%eax, %0&quot;: &quot;&#x3D;r&quot; (myval));&#96;</span><br><span class="line"></span><br><span class="line">    * å˜é‡ myval å°†è¢«ä¿å­˜åœ¨ GCC è‡ªå·±é€‰æ‹©çš„å¯„å­˜å™¨ä¸­</span><br><span class="line">    * eax ä¸­çš„å€¼è¢«æ‹·è´åˆ°è¿™ä¸ªå¯„å­˜å™¨ä¸­</span><br><span class="line">    * åœ¨å†…å­˜ä¸­çš„ myval å€¼ä¹Ÿä¼šæŒ‰ç…§è¿™ä¸ªå¯„å­˜å™¨å€¼æ›´æ–°</span><br><span class="line">    * r GCC å¯èƒ½ä¼šåœ¨ä»»ä½•ä¸€ä¸ªå¯ç”¨çš„é€šç”¨å¯„å­˜å™¨ä¸­ä¿å­˜è¿™ä¸ªå€¼</span><br><span class="line"></span><br><span class="line">  * å…·ä½“æŒ‡å®šä½¿ç”¨é‚£ä¸ªå¯„å­˜å™¨ï¼š</span><br><span class="line"></span><br><span class="line">  * | r    | Register(s)     |</span><br><span class="line">    | :--- | :-------------- |</span><br><span class="line">    | a    | %eax, %ax, %al  |</span><br><span class="line">    | b    | %ebx, %bx, %bl  |</span><br><span class="line">    | c    | %ecx, %cx, %cl  |</span><br><span class="line">    | d    | %edx, %dx, %adl |</span><br><span class="line">    | S    | %esi, %si       |</span><br><span class="line">    | D    | %edi, %di       |</span><br><span class="line"></span><br><span class="line">* å†…å­˜æ“ä½œæ•°constraintï¼š&#96;m&#96;</span><br><span class="line"></span><br><span class="line">  * å½“æ“ä½œæ•°åœ¨å†…å­˜ä¸­æ—¶ï¼Œä»»ä½•å¯¹å…¶æ“ä½œä¼šç›´æ¥åœ¨å†…å­˜ä¸­è¿è¡Œ</span><br><span class="line">    * æŒ‡å®šå¯„å­˜å™¨ï¼šå†…å­˜æ“ä½œæ—¶ä¼šæŠŠå€¼å­˜åœ¨ä¸€ä¸ªå¯„å­˜å™¨ä¸­ï¼Œä¿®æ”¹åå†å°†è¯¥å€¼ åä¼šåˆ°è¯¥å†…å­˜ä¸­</span><br><span class="line"></span><br><span class="line">* åŒ¹é… constraint</span><br><span class="line"></span><br><span class="line">  * </span><br><span class="line"></span><br><span class="line">#### çº¦æŸ Constraints Modifiersä¿®é¥°ç¬¦</span><br><span class="line"></span><br><span class="line">#### å¸¸ç”¨ä»£ç ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 3.2 make å’Œ Makefile</span><br><span class="line"></span><br><span class="line">* GNU make æ˜¯ä¸€ç§ä»£ç ç»´æŠ¤å·¥å…·</span><br><span class="line">  * é¡¹ç›®ä¸­ï¼Œæ ¹æ®ç¨‹åºå„ä¸ªæ¨¡å—çš„æ›´æ–°æƒ…å†µï¼Œè‡ªåŠ¨çš„ç»´æŠ¤å’Œç”Ÿæˆç›®æ ‡ä»£ç </span><br><span class="line">* æ‰§è¡Œ make å‘½ä»¤æ—¶ï¼Œéœ€è¦ makefile æ–‡ä»¶ï¼Œä»¥å‘Šè¯‰makeå‘½ä»¤ï¼Œéœ€è¦æ€æ ·å»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åº</span><br><span class="line">* ç¼–è¯‘å’Œé“¾æ¥çš„è§„åˆ™</span><br><span class="line">  * å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚</span><br><span class="line">  * å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªcæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</span><br><span class="line">  * å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</span><br><span class="line">* ç¼–å†™å¥½ makefile åï¼Œåªéœ€è¦ make å‘½ä»¤ï¼Œå°±å¯è‡ªåŠ¨çš„æ ¹æ®å½“å‰çš„æ–‡ä»¶ä¿®æ”¹æƒ…å†µæ¥ç¡®å®šå“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘å¹¶é‡æ–°é“¾æ¥</span><br><span class="line"></span><br><span class="line">### 3.2.1 makefile çš„è§„åˆ™</span><br><span class="line"></span><br><span class="line">* &gt; target ... :prerequisites ...</span><br><span class="line">  &gt;</span><br><span class="line">  &gt; â€‹	command</span><br><span class="line">  &gt;</span><br><span class="line">  &gt; â€‹	...</span><br><span class="line">  &gt;</span><br><span class="line">  &gt; â€‹	...</span><br><span class="line"></span><br><span class="line">  * target æ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ : å¯ä»¥æ˜¯ object æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª label</span><br><span class="line">  * prerequisiteï¼šè¦ç”Ÿæˆé‚£ä¸ª target æ‰€éœ€è¦çš„æ–‡ä»¶</span><br><span class="line">  * commandï¼šmake éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä»»æ„çš„ shell å‘½ä»¤ï¼‰</span><br><span class="line">  * æ–‡ä»¶ä¾èµ–å…³ç³»</span><br><span class="line">    * target æ–‡ä»¶ä¾èµ–äº prerequisite ä¸­çš„æ–‡ä»¶</span><br><span class="line">    * ç”Ÿæˆè§„åˆ™ å®šä¹‰åœ¨ command ä¸­</span><br><span class="line">  * å¦‚æœ prerequisites ä¸­æœ‰æ–‡ä»¶æ¯” target æ–‡ä»¶æ–°ï¼Œé‚£ä¹ˆcommandæ‰€å®šä¹‰çš„å‘½ä»¤å°±è¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##3.3  gdb çš„ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https:&#x2F;&#x2F;wiki.ubuntu.org.cn&#x2F;%E7%94%A8GDB%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F#.E7.9B.B8.E5.85.B3.E8.AF.8D.E6.9D.A1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* è°ƒè¯•å‘½ä»¤&#96;gcc -g  -Wall åŸæ–‡ä»¶.c -o è¾“å‡ºçš„ç›®æ ‡æ–‡ä»¶&#96;</span><br><span class="line">  * -g : è°ƒè¯• C&#x2F;C++ ç¨‹åºï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå°±éœ€è¦æŠŠè°ƒè¯•ä¿¡æ¯åŠ åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­</span><br><span class="line">  * æ²¡æœ‰ -g çš„è¯ï¼Œçœ‹ä¸è§ç¨‹åºå‡½æ•°åã€å˜é‡åï¼Œè€Œæ˜¯è¿è¡Œæ—¶çš„å†…å­˜ä»£ç </span><br><span class="line">* å¯åŠ¨ gdb ï¼šè¿›å…¥ gdb ç¯å¢ƒå’ŒåŠ è½½è¢«è°ƒè¯•ç¨‹åºåŒæ—¶è¿›è¡Œï¼š</span><br><span class="line">  * &#96;gdb å¯æ‰§è¡Œæ–‡ä»¶å&#96;</span><br><span class="line">  * &#96;gdb å¯æ‰§è¡Œæ–‡ä»¶å core&#96;</span><br><span class="line">    * ç”¨gdb åŒæ—¶è°ƒè¯•ä¸€ä¸ªè¿è¡Œç¨‹åºå’Œcoreæ–‡ä»¶ï¼ˆç¨‹åºéæ³•æ‰§è¡Œå core dump åäº§ç”Ÿçš„æ–‡ä»¶ï¼‰</span><br><span class="line">  * &#96;gdb å¯æ‰§è¡Œæ–‡ä»¶å &lt;PID&gt;&#96;</span><br><span class="line">    * è‹¥ç¨‹åºæ˜¯ä¸€ä¸ªæœåŠ¡ç¨‹åºï¼Œå¯ä»¥æŒ‡å®šæœåŠ¡ç¨‹åºè¿è¡Œæ—¶çš„è¿›ç¨‹ ID</span><br><span class="line">* gdb å¯åŠ¨å¼€å…³</span><br><span class="line">* &#96;help&#96;:æŸ¥çœ‹å‘½ä»¤ç§ç±»</span><br><span class="line">  * &#96;help å‘½ä»¤&#96;ï¼šæŸ¥çœ‹ç§ç±»ä¸­çš„å‘½ä»¤</span><br><span class="line">* è°ƒè¯•å·²è¿è¡Œçš„ç¨‹åº</span><br><span class="line">  * 1. &#96;ps&#96; æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ç¨‹åº IDï¼Œ&#96;gdb &lt;program&gt; PID&#96; æ ¼å¼æŒ‚æ¥æ­£åœ¨è¿è¡Œçš„ç¨‹åº</span><br><span class="line">    2. &#96;gdb &lt;program&gt;&#96; å…³è”ä¸Šæºä»£ç ï¼Œå¹¶è¿›è¡Œgdbï¼Œåœ¨ gdb ç¯å¢ƒä¸­ ç”¨ &#96;attach&#96; å‘½ä»¤æ¥æŒ‚æ¥è¿›ç¨‹ PID ï¼Œç”¨ &#96;detach&#96; å–æ¶ˆæŒ‚æ¥</span><br><span class="line">* æš‚åœ&#x2F;æ¢å¤ç¨‹åºè¿è¡Œ</span><br><span class="line">  * å¯ä»¥è®¾ç½®ç¨‹åºåœ¨å“ªè¡Œåœï¼Œåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹åœï¼Œåœ¨å—åˆ°ä»€ä¹ˆä¿¡å·æ—¶åœ</span><br><span class="line">  * &#96;info program&#96; æŸ¥çœ‹ç¨‹åºæ˜¯å¦åœ¨è¿è¡Œï¼Œè¿›ç¨‹å·ï¼Œè¢«æš‚åœåŸå› </span><br><span class="line">  * æš‚åœæ–¹å¼ï¼š</span><br><span class="line">    * BreakPoint: æ–­ç‚¹</span><br><span class="line">    * WatchPoint: è§‚å¯Ÿç‚¹</span><br><span class="line">    * CatchPointï¼šæ•æ‰ç‚¹</span><br><span class="line">    * Signalsï¼šä¿¡å·</span><br><span class="line">    * ThreadStopsï¼šçº¿ç¨‹åœæ­¢</span><br><span class="line">  * æ¢å¤ç¨‹åºè¿è¡Œï¼š&#96;c&#96; &#x2F; &#96;continue&#96;</span><br><span class="line"></span><br><span class="line">### è®¾ç½®æ–­ç‚¹ï¼ˆBreak Pointsï¼‰</span><br><span class="line"></span><br><span class="line">* &#96;break &lt;function&gt;&#96;: åœ¨è¿›å…¥æŒ‡å®šå‡½æ•°æ—¶åœä½</span><br><span class="line">* &#96;break &lt;linenum&gt;&#96;: åœ¨æŒ‡å®šè¡Œå·åœä½</span><br><span class="line">* &#96;break +offset&#96;: åœ¨å½“å‰è¡Œå·å‰é¢çš„ offset è¡Œåœä½</span><br><span class="line">* &#96;break -offset&#96;: åœ¨å½“å‰è¡Œå·åé¢ offset è¡ŒæŒºä½</span><br><span class="line">* &#96;break filename: linenum&#96;: åœ¨æºæ–‡ä»¶ filename çš„ linenum è¡Œåœä½</span><br><span class="line">* &#96;break filename: function&#96;: åœ¨æºæ–‡ä»¶filenameçš„functionå…¥å£å¤„åŒä½</span><br><span class="line">* &#96;break *address&#96;: åœ¨ç¨‹åºè¿è¡Œçš„å†…å­˜åœ°å€å¤„åœä½</span><br><span class="line">* &#96;break&#96;: æ²¡æœ‰å‚æ•°æ—¶ï¼Œè¡¨ç¤ºåœ¨ä¸‹ä¸€æ¡æŒ‡ä»¤å¤„åœä½</span><br><span class="line">* &#96;break ... if &lt;conditon&gt;&#96;: åœ¨æ¡ä»¶æˆç«‹æ—¶åœä½</span><br><span class="line">  * &#96;...&#96; æ˜¯ä¸Šè¿°å‚æ•°ï¼Œconditon è¡¨ç¤ºæ¡ä»¶</span><br><span class="line">* æŸ¥çœ‹æ–­ç‚¹ï¼šn ä¸ºæ–­ç‚¹å·</span><br><span class="line">  * &#96;info breakpoints [n]&#96;</span><br><span class="line">  * &#96;info break [n]&#96;</span><br><span class="line"></span><br><span class="line">### è®¾ç½®è§‚å¯Ÿç‚¹ï¼ˆWatch Pointsï¼‰</span><br><span class="line"></span><br><span class="line">è§‚å¯Ÿç‚¹ä¸€èˆ¬æ¥è§‚å¯ŸæŸä¸ªè¡¨è¾¾å¼ï¼ˆæˆ–å˜é‡ï¼‰çš„å€¼æ˜¯å¦å˜åŒ–ï¼Œè‹¥å˜åŒ–åˆ™åœä½</span><br><span class="line"></span><br><span class="line">* &#96;watch &lt;expr&gt;&#96;:  ä¸ºè¡¨è¾¾å¼ expr è®¾ç½®è§‚å¯Ÿç‚¹</span><br><span class="line">* &#96;rwatch &lt;expr&gt;&#96;: å½“è¡¨è¾¾å¼ expr è¢«è¯»æ—¶ï¼Œåœä½</span><br><span class="line">* &#96;awatch &lt;expr&gt;&#96;: å½“è¡¨è¾¾å¼çš„å€¼è¢«è¯»æˆ–å†™æ—¶ï¼Œåœä½</span><br><span class="line">* &#96;info watchpoints&#96;: åˆ—å‡ºæ‰€æœ‰è§‚å¯Ÿç‚¹</span><br><span class="line"></span><br><span class="line">### è®¾ç½®æ•æ‰ç‚¹ï¼ˆCatch Pointsï¼‰</span><br><span class="line"></span><br><span class="line">è®¾ç½®æ•æ‰ç‚¹æ¥æ•æ‰ç¨‹åºè¿è¡Œæ—¶çš„ä¸€äº›äº‹ä»¶</span><br><span class="line"></span><br><span class="line">* &#96;catch &lt;event&gt;&#96;: å½“eventå‘ç”Ÿæ—¶ï¼Œåœä½</span><br><span class="line">  * throw ä¸€ä¸ªC++ æŠ›å‡ºçš„å¼‚å¸¸</span><br><span class="line">  * catch ä¸€ä¸ªC++æ•æ‰åˆ°çš„å¼‚å¸¸</span><br><span class="line">  * exec è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ exec æ—¶</span><br><span class="line">  * fork è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ fork æ—¶</span><br><span class="line">  * vfork è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ vfork æ—¶</span><br><span class="line">  * load</span><br><span class="line">  * unload</span><br><span class="line">* &#96;tcatch &lt;event&gt;&#96;: å€¼è®¾ç½®ä¸€æ¬¡æ•æ‰ç‚¹ï¼Œå½“ç¨‹åºåœä½åï¼Œè¯¥åº—è¢«è‡ªåŠ¨åˆ é™¤</span><br><span class="line"></span><br><span class="line">### ç»´æŠ¤åœæ­¢ç‚¹</span><br><span class="line"></span><br><span class="line">åœæ­¢ç‚¹å³ä¸Šè¿°ä¸‰ç±»</span><br><span class="line"></span><br><span class="line">* clear</span><br><span class="line">  * &#96;clear&#96; : æ¸…é™¤æ‰€æœ‰å·²å®šä¹‰çš„åœæ­¢ç‚¹</span><br><span class="line">  * &#96;clear &lt;function&gt;&#96; &#x2F; &#96;clear &lt;filename: function&gt;&#96;: æ¸…é™¤æ‰€æœ‰è®¾ç½®åœ¨å‡½æ•°ä¸Šçš„åœæ­¢ç‚¹</span><br><span class="line">  * &#96;clear &lt;linenum&gt;&#96; &#x2F;  &#96;clear &lt;filename: linenum&gt;&#96;: æ¸…é™¤æ‰€æœ‰è®¾ç½®åœ¨æŒ‡å®šè¡Œä¸Šçš„åœæ­¢ç‚¹</span><br><span class="line">* delete</span><br><span class="line">  * &#96;delete [breakpoints] [range...]&#96;: åˆ é™¤æŒ‡å®šçš„æ–­ç‚¹ï¼Œæ–­ç‚¹å·ï¼Œè‹¥ä¸æŒ‡å®šæ–­ç‚¹å·åˆ™åˆ é™¤æ‰€æœ‰æ–­ç‚¹ã€‚range è¡¨ç¤ºæ–­ç‚¹å·èŒƒå›´</span><br><span class="line">* disableï¼šgdb ä¸ä¼šåˆ é™¤ï¼Œenable å¯ä»¥æ¢å¤</span><br><span class="line">  * &#96;disable [breakpoints] [range]&#96;: </span><br><span class="line">  * &#96;enable [breakpoints] [range]&#96;</span><br><span class="line">  * &#96;enable [breakpoints] once range...&#96;</span><br><span class="line">  * &#96;enable [breakpoints] delete range ...&#96;</span><br><span class="line"></span><br><span class="line">### åœæ­¢æ¡ä»¶ç»´æŠ¤</span><br><span class="line"></span><br><span class="line">æ–­ç‚¹æ¡ä»¶è®¾ç½®å¥½åï¼Œç”¨ conditon å‘½ä»¤ä¿®æ”¹æ¡ä»¶ï¼ˆä»…breakå’Œwatchæ”¯æŒifï¼‰</span><br><span class="line"></span><br><span class="line">* &#96;condition &lt;bnum&gt; &lt;expr&gt;&#96;: ä¿®æ”¹æ–­ç‚¹å·ä¸º bnum çš„åœæ­¢æ¡ä»¶ä¸º expr</span><br><span class="line">* &#96;condition &lt;bnum&gt;&#96; : æ¸…é™¤æ–­ç‚¹å·ä¸º bnum çš„åœæ­¢æ¡ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ä¸ºåœæ­¢ç‚¹è®¾å®šè¿è¡Œå‘½ä»¤</span><br><span class="line"></span><br><span class="line">### æ–­ç”µèœå•</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### æ¢å¤ç¨‹åºè¿è¡Œå’Œå•æ­¥è°ƒè¯•</span><br><span class="line"></span><br><span class="line">å½“ç¨‹åºè¢«åœä½ï¼Œå¯ä»¥ç”¨ continue å‘½ä»¤æ¢å¤ç¨‹åºè¿è¡Œç›´åˆ°ç»“æŸï¼Œæˆ–ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œ</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥ä½¿ç”¨ step æˆ– next å‘½ä»¤å•æ­¥è·Ÿè¸ªç¨‹åº</span><br><span class="line"></span><br><span class="line">* &#96;continue [ignore-count]&#96; &#x2F; c &#x2F; fg </span><br><span class="line">  * æ¢å¤ç¨‹åºè¿è¡Œè‡³ç»“æŸæˆ–è€…ä¸‹ä¸€ä¸ªæ–­ç‚¹</span><br><span class="line">  * æˆ–è€…è®¾ç½®å¿½ç•¥çš„æ¬¡æ•°</span><br><span class="line">* &#96;step &lt;count&gt;&#96;</span><br><span class="line">  * å•æ­¥è·Ÿè¸ªï¼Œè‹¥æœ‰å‡½æ•°è°ƒç”¨ä¼šè¿›å…¥å‡½æ•°</span><br><span class="line">* &#96;next &lt;count&gt;&#96;</span><br><span class="line">  * å•æ­¥è·Ÿè¸ªï¼Œè‹¥æœ‰å‡½æ•°è°ƒç”¨ï¼Œä¸ä¼šè¿›å…¥å‡½æ•°</span><br><span class="line">* &#96;set step-mod&#96;</span><br><span class="line">* &#96;set step-mod on&#96;</span><br><span class="line">* &#96;set step-mod off&#96;</span><br><span class="line">* &#96;finish&#96;</span><br><span class="line">* &#96;until &#x2F; u&#96;</span><br><span class="line">  * é€€å‡ºå¾ªç¯ä½“</span><br><span class="line">* &#96;stepi&#96;</span><br><span class="line">* &#96;nexti&#96;</span><br><span class="line"></span><br><span class="line">### ä¿¡å·ï¼ˆSignalsï¼‰</span><br><span class="line"></span><br><span class="line">### çº¿ç¨‹ï¼ˆThread Stopsï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* åŠŸèƒ½å¼ºå¤§çš„è°ƒè¯•ç¨‹åº</span><br><span class="line"></span><br><span class="line">  * è®¾ç½®æ–­ç‚¹</span><br><span class="line">  * ç›‘è§†ç¨‹åºå˜é‡çš„å€¼</span><br><span class="line">  * ç¨‹åºçš„å•æ­¥æ‰§è¡Œ</span><br><span class="line">  * æ˜¾ç¤º&#x2F;ä¿®æ”¹å˜é‡çš„å€¼</span><br><span class="line">  * æ˜¾ç¤º&#x2F;ä¿®æ”¹å¯„å­˜å™¨</span><br><span class="line">  * æŸ¥çœ‹ç¨‹åºçš„å †æ ˆæƒ…å†µ</span><br><span class="line">  * è¿œç¨‹è°ƒè¯•</span><br><span class="line">  * è°ƒè¯•çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">* å¿…é¡»å…ˆç”¨ -g æˆ– -ggdb ç¼–è¯‘é€‰é¡¹ç¼–è¯‘æºæ–‡ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨ gdb è°ƒè¯•ç¨‹åº</span><br><span class="line"></span><br><span class="line">  * è¿è¡Œ gdb è°ƒè¯•ç¨‹åºå‘½ä»¤ï¼š&#96;gdb progname&#96;</span><br><span class="line"></span><br><span class="line">* åœ¨ gdb æç¤ºç¬¦å¤„é”®å…¥ help ï¼Œ</span><br><span class="line"></span><br><span class="line">  * aliasesï¼šå‘½ä»¤åˆ«å</span><br><span class="line">  * breakpointsï¼šæ–­ç‚¹å®šä¹‰</span><br><span class="line">  * dataï¼šæ•°æ®æŸ¥çœ‹</span><br><span class="line">  * filesï¼šæŒ‡å®šå¹¶æŸ¥çœ‹æ–‡ä»¶</span><br><span class="line">  * internalsï¼šç»´æŠ¤å‘½ä»¤</span><br><span class="line">  * runningï¼šç¨‹åºæ‰§è¡Œ</span><br><span class="line">  * stackï¼šè°ƒç”¨æ ˆæŸ¥çœ‹</span><br><span class="line">  * statusï¼šçŠ¶æ€æŸ¥çœ‹</span><br><span class="line">  * tracepoints: è·Ÿè¸ªç¨‹åºæ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">* &#96;help å‘½ä»¤&#96;ï¼šè¯¥å‘½ä»¤çš„è¯¦ç»†</span><br><span class="line"></span><br><span class="line">* gdb å¸¸ç”¨å‘½ä»¤</span><br><span class="line"></span><br><span class="line">  * | break FILENAME:NUM | åœ¨ç‰¹å®šæºæ–‡ä»¶ç‰¹å®šè¡Œä¸Šè®¾ç½®æ–­ç‚¹                            |</span><br><span class="line">    | ------------------ | ------------------------------------------------------- |</span><br><span class="line">    | clear FILENAME:NUM | åˆ é™¤è®¾ç½®åœ¨ç‰¹å®šæºæ–‡ä»¶ç‰¹å®šè¡Œä¸Šçš„æ–­ç‚¹                      |</span><br><span class="line">    | run                | è¿è¡Œè°ƒè¯•ç¨‹åº                                            |</span><br><span class="line">    | step               | å•æ­¥æ‰§è¡Œè°ƒè¯•ç¨‹åºï¼Œä¸ä¼šç›´æ¥æ‰§è¡Œå‡½æ•°                      |</span><br><span class="line">    | next               | å•æ­¥æ‰§è¡Œè°ƒè¯•ç¨‹åºï¼Œä¼šç›´æ¥æ‰§è¡Œå‡½æ•°                        |</span><br><span class="line">    | backtrace          | æ˜¾ç¤ºæ‰€æœ‰çš„è°ƒç”¨æ ˆå¸§ã€‚è¯¥å‘½ä»¤å¯ç”¨æ¥æ˜¾ç¤ºå‡½æ•°çš„è°ƒç”¨é¡ºåº      |</span><br><span class="line">    | where continue     | ç»§ç»­æ‰§è¡Œæ­£åœ¨è°ƒè¯•çš„ç¨‹åº                                  |</span><br><span class="line">    | display EXPR       | æ¯æ¬¡ç¨‹åºåœæ­¢åæ˜¾ç¤ºè¡¨è¾¾å¼çš„å€¼,è¡¨è¾¾å¼ç”±ç¨‹åºå®šä¹‰çš„å˜é‡ç»„æˆ |</span><br><span class="line">    | file FILENAME      | è£…è½½æŒ‡å®šçš„å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œè°ƒè¯•                            |</span><br><span class="line">    | help CMDNAME       | æ˜¾ç¤ºæŒ‡å®šè°ƒè¯•å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯                              |</span><br><span class="line">    | info break         | æ˜¾ç¤ºå½“å‰æ–­ç‚¹åˆ—è¡¨ï¼ŒåŒ…æ‹¬åˆ°è¾¾æ–­ç‚¹å¤„çš„æ¬¡æ•°ç­‰                |</span><br><span class="line">    | info files         | æ˜¾ç¤ºè¢«è°ƒè¯•æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯                                |</span><br><span class="line">    | info func          | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æ‰€æœ‰å‡½æ•°åç§°                            |</span><br><span class="line">    | info prog          | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€                                |</span><br><span class="line">    | info local         | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºå½“å‰å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ä¿¡æ¯                  |</span><br><span class="line">    | info var           | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æ‰€æœ‰å…¨å±€å’Œé™æ€å˜é‡åç§°                  |</span><br><span class="line">    | kill               | ç»ˆæ­¢æ­£åœ¨è¢«è°ƒè¯•çš„ç¨‹åº                                    |</span><br><span class="line">    | list               | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æºä»£ç                                   |</span><br><span class="line">    | quit               | é€€å‡º gdb                                                |</span><br><span class="line"></span><br><span class="line">## Eclipse + CDT ä¸‹è½½å®‰è£…</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_42824983&#x2F;article&#x2F;details&#x2F;114671702)</span><br><span class="line"></span><br><span class="line">* JDK: æ˜¯ Java è¯­è¨€çš„è½¯ä»¶å¼€å‘åŒ…ï¼ŒåŒ…å«äº† Java çš„è¿è¡Œç¯å¢ƒ</span><br><span class="line">* Eclipse ï¼šè¿è¡Œä¾èµ–äº JDK </span><br><span class="line">* CDTï¼šC&#x2F;C++ Developing Tools</span><br><span class="line">* </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 4 åŸºäºç¡¬ä»¶æ¨¡æ‹Ÿå™¨å®ç°æºç çº§è°ƒè¯•</span><br><span class="line"></span><br><span class="line">## 4.1 å®‰è£…ç¡¬ä»¶æ¨¡æ‹Ÿå™¨ QEMU</span><br><span class="line"></span><br><span class="line">* ç”¨äºæ¨¡æ‹Ÿä¸€å° X86 è®¡ç®—æœºï¼Œè®© uCore è¿è¡Œåœ¨ QEMU ä¸Š</span><br><span class="line">* ç›´æ¥ä½¿ç”¨ Ubuntu ä¸­æä¾›çš„ QEMU</span><br><span class="line">  * &#96;sudo apt-gett install qemu-system&#96;</span><br><span class="line"></span><br><span class="line">## 4.2 Linux ç¯å¢ƒä¸‹çš„æºç çº§å®‰è£… QEMU</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https:&#x2F;&#x2F;blog.csdn.net&#x2F;wxh0000mm&#x2F;article&#x2F;details&#x2F;90056912?utm_medium&#x3D;distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-4&amp;spm&#x3D;1001.2101.3001.4242)</span><br><span class="line"></span><br><span class="line">* å®‰è£…æ—¶é‡åˆ°çš„é—®é¢˜ï¼š</span><br><span class="line">  * analysis: æœªå®‰è£…åˆ°é»˜è®¤è·¯å¾„</span><br><span class="line">  * problem;è¾“å…¥&#96;qemu&#96; æ— ååº”</span><br><span class="line">  * solutionï¼š[å‚è€ƒåšå®¢](https:&#x2F;&#x2F;blog.csdn.net&#x2F;u013045749&#x2F;article&#x2F;details&#x2F;53575639)</span><br><span class="line">  * è‹¥è¾“å…¥&#96;qemu-system-x86_64è¯´æ˜å®‰è£…æˆåŠŸï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œé“¾æ¥ï¼š&#96;sudo ln -s &#x2F;usr&#x2F;bin&#x2F;qumu-system-x86_64 &#x2F;usr&#x2F;bin&#x2F;qemu&#96;</span><br><span class="line"></span><br><span class="line">## 4.3 ä½¿ç”¨ QEMU</span><br><span class="line"></span><br><span class="line">### 4.3.1 è¿è¡Œå‚æ•°</span><br><span class="line"></span><br><span class="line">* é»˜è®¤å®‰è£…è·¯å¾„ï¼š&#96;&#x2F;usr&#x2F;local&#x2F;bin&#96;</span><br><span class="line"></span><br><span class="line">* è¿è¡Œå‘½ä»¤ï¼š&#96;qemu&#96;</span><br><span class="line"></span><br><span class="line">* qemu è¿è¡Œå¤šå‚æ•°æ ¼å¼&#96;qemu [options] [disk_image]&#96;</span><br><span class="line"></span><br><span class="line">  * disk_imageï¼šç¡¬ç›˜é•œåƒæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">* éƒ¨åˆ†å‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;</span><br><span class="line">    &#96;-hda file&#39;        &#96;-hdb file&#39; &#96;-hdc file&#39; &#96;-hdd file&#39;</span><br><span class="line">     ä½¿ç”¨ file  ä½œä¸ºç¡¬ç›˜0ã€1ã€2ã€3é•œåƒã€‚</span><br><span class="line">    &#96;-fda file&#39;  &#96;-fdb file&#39;</span><br><span class="line">     ä½¿ç”¨ file  ä½œä¸ºè½¯ç›˜é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ &#x2F;dev&#x2F;fd0 ä½œä¸º file æ¥ä½¿ç”¨ä¸»æœºè½¯ç›˜ã€‚</span><br><span class="line">    &#96;-cdrom file&#39;</span><br><span class="line">     ä½¿ç”¨ file  ä½œä¸ºå…‰ç›˜é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ &#x2F;dev&#x2F;cdrom ä½œä¸º file æ¥ä½¿ç”¨ä¸»æœº cd-romã€‚</span><br><span class="line">    &#96;-boot [a|c|d]&#39;</span><br><span class="line">     ä»è½¯ç›˜(a)ã€å…‰ç›˜(c)ã€ç¡¬ç›˜å¯åŠ¨(d)ï¼Œé»˜è®¤ç¡¬ç›˜å¯åŠ¨ã€‚</span><br><span class="line">    &#96;-snapshot&#39;</span><br><span class="line">     å†™å…¥ä¸´æ—¶æ–‡ä»¶è€Œä¸å†™å›ç£ç›˜é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ C-a s æ¥å¼ºåˆ¶å†™å›ã€‚</span><br><span class="line">    &#96;-m megs&#39;</span><br><span class="line">     è®¾ç½®è™šæ‹Ÿå†…å­˜ä¸º msg Må­—èŠ‚ï¼Œé»˜è®¤ä¸º 128M å­—èŠ‚ã€‚</span><br><span class="line">    &#96;-smp n&#39;</span><br><span class="line">     è®¾ç½®ä¸ºæœ‰ n ä¸ª CPU çš„ SMP ç³»ç»Ÿã€‚ä»¥ PC ä¸ºç›®æ ‡æœºï¼Œæœ€å¤šæ”¯æŒ 255 ä¸ª CPUã€‚</span><br><span class="line">    &#96;-nographic&#39;</span><br><span class="line">     ç¦æ­¢ä½¿ç”¨å›¾å½¢è¾“å‡ºã€‚</span><br><span class="line">    å…¶ä»–ï¼š</span><br><span class="line">     å¯ç”¨çš„ä¸»æœºè®¾å¤‡ dev ä¾‹å¦‚ï¼š</span><br><span class="line">         vc</span><br><span class="line">             è™šæ‹Ÿç»ˆç«¯ã€‚</span><br><span class="line">         null</span><br><span class="line">             ç©ºè®¾å¤‡</span><br><span class="line">         &#x2F;dev&#x2F;XXX</span><br><span class="line">             ä½¿ç”¨ä¸»æœºçš„ ttyã€‚</span><br><span class="line">         file: filename</span><br><span class="line">             å°†è¾“å‡ºå†™å…¥åˆ°æ–‡ä»¶ filename ä¸­ã€‚</span><br><span class="line">         stdio</span><br><span class="line">             æ ‡å‡†è¾“å…¥&#x2F;è¾“å‡ºã€‚</span><br><span class="line">         pipeï¼špipename</span><br><span class="line">             å‘½ä»¤ç®¡é“ pipenameã€‚</span><br><span class="line">         ç­‰ã€‚</span><br><span class="line">     ä½¿ç”¨ dev è®¾å¤‡çš„å‘½ä»¤å¦‚ï¼š</span><br><span class="line">         &#96;-serial dev&#39;</span><br><span class="line">             é‡å®šå‘è™šæ‹Ÿä¸²å£åˆ°ä¸»æœºè®¾å¤‡ dev ä¸­ã€‚</span><br><span class="line">         &#96;-parallel dev&#39;</span><br><span class="line">             é‡å®šå‘è™šæ‹Ÿå¹¶å£åˆ°ä¸»æœºè®¾å¤‡ dev ä¸­ã€‚</span><br><span class="line">         &#96;-monitor dev&#39;</span><br><span class="line">             é‡å®šå‘ monitor åˆ°ä¸»æœºè®¾å¤‡ dev ä¸­ã€‚</span><br><span class="line">     å…¶ä»–å‚æ•°ï¼š</span><br><span class="line">         &#96;-s&#39;</span><br><span class="line">             ç­‰å¾… gdb è¿æ¥åˆ°ç«¯å£ 1234ã€‚</span><br><span class="line">         &#96;-p port&#39;</span><br><span class="line">             æ”¹å˜ gdb è¿æ¥ç«¯å£åˆ° portã€‚</span><br><span class="line">         &#96;-S&#39;</span><br><span class="line">             åœ¨å¯åŠ¨æ—¶ä¸å¯åŠ¨ CPUï¼Œ éœ€è¦åœ¨ monitor ä¸­è¾“å…¥ &#39;c&#39;ï¼Œæ‰èƒ½è®©qemuç»§ç»­æ¨¡æ‹Ÿå·¥ä½œã€‚</span><br><span class="line">         &#96;-d&#39;</span><br><span class="line">             è¾“å‡ºæ—¥å¿—åˆ° qemu.log æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å°†ç”¨åˆ°çš„å‘½ä»¤ï¼š</p>
<ul>
<li><code>qemu -hda ucore.img -parallel stdip</code>: ä½¿å¾—ucoreåœ¨qemuæ¨¡æ‹Ÿçš„ x86 ç¡¬ä»¶ç¯å¢ƒä¸­æ‰§è¡Œ</li>
<li><code>qemu -S -s -hda ucore.img -monitor stdio</code>: ç”¨äºä¸ gdb é…åˆè¿›è¡Œæºç è°ƒè¯•</li>
</ul>
</li>
</ul>
<h4 id="å¸¸ç”¨è°ƒè¯•å‘½ä»¤"><a href="#å¸¸ç”¨è°ƒè¯•å‘½ä»¤" class="headerlink" title="å¸¸ç”¨è°ƒè¯•å‘½ä»¤"></a>å¸¸ç”¨è°ƒè¯•å‘½ä»¤</h4><ul>
<li><p>qemu ä¸­ monitor çš„å¸¸ç”¨å‘½ä»¤ï¼š</p>
<ul>
<li><table>
<thead>
<tr>
<th>help</th>
<th>æŸ¥çœ‹ qemu å¸®åŠ©ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ”¯æŒçš„å‘½ä»¤ã€‚</th>
</tr>
</thead>
<tbody><tr>
<td>q|quit|exit</td>
<td>é€€å‡º qemuã€‚</td>
</tr>
<tr>
<td>stop</td>
<td>åœæ­¢ qemuã€‚</td>
</tr>
<tr>
<td>c|cont|continue</td>
<td>è¿ç»­æ‰§è¡Œã€‚</td>
</tr>
<tr>
<td>x /fmt addr xp /fmt addr</td>
<td>æ˜¾ç¤ºå†…å­˜å†…å®¹ï¼Œå…¶ä¸­ â€˜xâ€™ ä¸ºè™šåœ°å€ï¼Œâ€™xpâ€™ ä¸ºå®åœ°å€ã€‚ å‚æ•° /fmt i è¡¨ç¤ºåæ±‡ç¼–ï¼Œç¼ºçœå‚æ•°ä¸ºå‰ä¸€æ¬¡å‚æ•°ã€‚</td>
</tr>
<tr>
<td>p|printâ€™</td>
<td>è®¡ç®—è¡¨è¾¾å¼å€¼å¹¶æ˜¾ç¤ºï¼Œä¾‹å¦‚ $reg è¡¨ç¤ºå¯„å­˜å™¨ç»“æœã€‚</td>
</tr>
<tr>
<td>memsave addr size file pmemsave addr size file</td>
<td>å°†å†…å­˜ä¿å­˜åˆ°æ–‡ä»¶ï¼Œmemsave ä¸ºè™šåœ°å€ï¼Œpmemsave ä¸ºå®åœ°å€ã€‚</td>
</tr>
<tr>
<td>breakpoint ç›¸å…³ï¼š</td>
<td>è®¾ç½®ã€æŸ¥çœ‹ä»¥åŠåˆ é™¤ breakpointï¼Œpcæ‰§è¡Œåˆ° breakpointï¼Œqemu åœæ­¢ã€‚ï¼ˆæš‚æ—¶æ²¡æœ‰æ­¤åŠŸèƒ½ï¼‰</td>
</tr>
<tr>
<td>watchpoint ç›¸å…³ï¼š</td>
<td>è®¾ç½®ã€æŸ¥çœ‹ä»¥åŠåˆ é™¤ watchpoint, å½“ watchpoint åœ°å€å†…å®¹è¢«ä¿®æ”¹ï¼Œåœæ­¢ã€‚ï¼ˆæš‚æ—¶æ²¡æœ‰æ­¤åŠŸèƒ½ï¼‰</td>
</tr>
<tr>
<td>s|step</td>
<td>å•æ­¥ä¸€æ¡æŒ‡ä»¤ï¼Œèƒ½å¤Ÿè·³è¿‡æ–­ç‚¹æ‰§è¡Œã€‚</td>
</tr>
<tr>
<td>r|registers</td>
<td>æ˜¾ç¤ºå…¨éƒ¨å¯„å­˜å™¨å†…å®¹ã€‚</td>
</tr>
<tr>
<td>info ç›¸å…³æ“ä½œ</td>
<td>æŸ¥è¯¢ qemu æ”¯æŒçš„å…³äºç³»ç»ŸçŠ¶æ€ä¿¡æ¯çš„æ“ä½œã€‚</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p><code>single arg</code>: argä¸ºå‚æ•°ï¼Œè®¾ç½®å•æ­¥æ ‡å¿—å‘½ä»¤</p>
<ul>
<li><code>single on</code>: å…è®¸å•æ­¥<ul>
<li>åœ¨æ­¤æƒ…å†µä¸‹ä½¿ç”¨ <code>cont</code> è¿›è¡Œå•æ­¥æ“ä½œ</li>
</ul>
</li>
<li><code>single off</code>: ç¦æ­¢å•æ­¥</li>
</ul>
</li>
</ul>
<h2 id="4-4-ç»“åˆ-gdb-å’Œ-qemu-æºç çº§è°ƒè¯•-uCore"><a href="#4-4-ç»“åˆ-gdb-å’Œ-qemu-æºç çº§è°ƒè¯•-uCore" class="headerlink" title="4.4 ç»“åˆ gdb å’Œ qemu æºç çº§è°ƒè¯• uCore"></a>4.4 ç»“åˆ gdb å’Œ qemu æºç çº§è°ƒè¯• uCore</h2><h3 id="ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶"><a href="#ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶" class="headerlink" title="ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶"></a>ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶</h3><ul>
<li>éœ€è¦åœ¨ä½¿ç”¨ gcc ç¼–è¯‘æºæ–‡ä»¶æ—¶ï¼Œæ·»åŠ å‚æ•° -g </li>
<li>è¿™æ ·ç¼–è¯‘å‡ºæ¥çš„ç›®æ ‡æ–‡ä»¶ä¸­æ‰ä¼šåŒ…å«å¯ä»¥ç”¨äº gdb è°ƒè¯•çš„ç›¸å…³ç¬¦å·ä¿¡æ¯</li>
</ul>
<h3 id="ucore-ä»£ç ç¼–è¯‘"><a href="#ucore-ä»£ç ç¼–è¯‘" class="headerlink" title="ucore ä»£ç ç¼–è¯‘"></a>ucore ä»£ç ç¼–è¯‘</h3><ul>
<li>ç¼–è¯‘è¿‡ç¨‹ï¼šè§£å‹ç¼©åçš„ ucore æºç åŒ…ä¸­ä½¿ç”¨ make å‘½ä»¤<ul>
<li>å°†ç”Ÿæˆä¸€äº›åˆ—ç›®æ ‡æ–‡ä»¶</li>
<li>ä¾‹å¦‚ lab1ï¼š<code>[]:~/lab1$ make</code><ul>
<li>ucore.img: è¢«qemuè®¿é—®è¿‡çš„è™šæ‹Ÿç¡¬ç›˜æ–‡ä»¶</li>
<li>kernel: ELF æ ¼å¼çš„ toy ucore kernel æ‰§è¡Œæ–‡ä»¶ï¼Œè¢«åµŒå…¥åˆ°äº† ucore.img ä¸­</li>
<li>bootblockï¼šè™šæ‹Ÿçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºï¼ˆ512å­—èŠ‚ï¼‰ï¼ŒåŒ…å«äº† bootloader æ‰§è¡Œä»£ç ï¼Œè¢«åµŒå…¥åˆ°äº† ucore.img ä¸­</li>
<li>signï¼šå¤–éƒ¨æ‰§è¡Œç¨‹åºï¼Œç”¨æ¥ç”Ÿæˆè™šæ‹Ÿçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº</li>
</ul>
</li>
</ul>
</li>
<li>ä¿å­˜ä¿®æ”¹: <ul>
<li>ä½¿ç”¨ diff å‘½ä»¤å¯¹ä¿®æ”¹åçš„ ucore ä»£ç  å’Œ ucore æºç è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¾ƒä¹‹å‰ä½¿ç”¨ make clean æ¸…é™¤æ‰ä¸å¿…è¦æ–‡ä»¶</li>
</ul>
</li>
<li>åº”ç”¨ä¿®æ”¹ï¼š</li>
</ul>
<h3 id="ä½¿ç”¨è¿œç¨‹è°ƒè¯•"><a href="#ä½¿ç”¨è¿œç¨‹è°ƒè¯•" class="headerlink" title="ä½¿ç”¨è¿œç¨‹è°ƒè¯•"></a>ä½¿ç”¨è¿œç¨‹è°ƒè¯•</h3><ul>
<li>ä¸ qemu é…åˆè¿›è¡Œæºä»£ç çº§åˆ«çš„è°ƒè¯•ï¼Œéœ€è¦å…ˆè®© qemu è¿›å…¥ç­‰å¾… gdb è°ƒè¯•å™¨çš„æ¥å…¥å¹¶ä¸”è¿˜ä¸èƒ½è®© qemu çš„CPUæ‰§è¡Œ<ul>
<li>å› æ­¤å¯åŠ¨ qemu æ—¶ï¼Œéœ€è¦ä½¿ç”¨ -S -s </li>
<li><code>qemu -S -s</code>ï¼šqemu ä¸­çš„CPUå¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œ</li>
</ul>
</li>
<li>ç„¶åå¯åŠ¨ gdb ï¼Œ<code>target remote 127.0.0.1:1234</code> è¿æ¥åˆ°qemu</li>
<li><code>c</code>: qemu ç»§ç»­æ‰§è¡Œ</li>
</ul>
<ul>
<li><strong>é‡åˆ°çš„é—®é¢˜</strong>ï¼š<img src="E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\lab0.assets\image-20210403211514163.png" alt="image-20210403211514163"><ul>
<li>analysisï¼š</li>
<li>solutionï¼š</li>
</ul>
</li>
</ul>
<ul>
<li>ä¸ºäº†ä½¿å¾— gdb è·çŸ¥ç¬¦å·ä¿¡æ¯ï¼Œéœ€è¦æŒ‡å®šè°ƒè¯•ç›®æ ‡æ–‡ä»¶ï¼Œgdb ä¸­ <code>file ./bin/kernel</code><ul>
<li>gdb ä¾¿å¯è½½å…¥è¿™ä¸ªæ–‡ä»¶ä¸­çš„ç¬¦å·ä¿¡æ¯</li>
</ul>
</li>
</ul>
<ul>
<li>é‡åˆ°çš„é—®é¢˜ï¼š<br>* </li>
</ul>
<ul>
<li>é€šè¿‡ gdb å¯ä»¥å¯¹ ucore ä»£ç è¿›è¡Œè°ƒè¯•</li>
<li>ä¾‹å¦‚ï¼š è°ƒè¯•memsetå‡½æ•°ï¼š<ol>
<li>è¿è¡Œ<code>qemu -S -s -hda ./bin/ucore.img -monitor stdio</code></li>
<li>è¿è¡Œ gdb å¹¶ä¸ qemu è¿›è¡Œè¿æ¥</li>
<li>è®¾ç½®æ–­ç‚¹å¹¶æ‰§è¡Œ</li>
<li>qemu å•æ­¥è°ƒè¯•</li>
</ol>
</li>
</ul>
<h3 id="ä½¿ç”¨-gdb-é…ç½®æ–‡ä»¶"><a href="#ä½¿ç”¨-gdb-é…ç½®æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ gdb é…ç½®æ–‡ä»¶"></a>ä½¿ç”¨ gdb é…ç½®æ–‡ä»¶</h3><ul>
<li></li>
</ul>
<h3 id="åŠ è½½è°ƒè¯•ç›®æ ‡"><a href="#åŠ è½½è°ƒè¯•ç›®æ ‡" class="headerlink" title="åŠ è½½è°ƒè¯•ç›®æ ‡"></a>åŠ è½½è°ƒè¯•ç›®æ ‡</h3><ul>
<li>å› ä¸ºåœ¨æŒ‡å®šäº†æ‰§è¡Œæ–‡ä»¶æ—¶å°±å·²ç»åŠ è½½äº†æ–‡ä»¶ä¸­åŒ…å«çš„è°ƒè¯•ä¿¡æ¯ï¼Œå› æ­¤ä¸ç”¨åœ¨ä½¿ç”¨ gdb å‘½ä»¤ä¸“é—¨åŠ è½½</li>
<li>ä½†æ˜¯åœ¨ä½¿ç”¨ qemu è¿›è¡Œè¿œç¨‹è°ƒè¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨åŠ è½½ç¬¦å·è¡¨ï¼Œå³ <code>file</code></li>
</ul>
<h3 id="è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„"><a href="#è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„" class="headerlink" title="è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„"></a>è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„</h3><ul>
<li>åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œè‹¥éœ€è¦è°ƒè¯•ä¸æ˜¯ i386 ä¿æŠ¤æ¨¡å¼ä»£ç ï¼Œæ¯”å¦‚8086å®æ¨¡å¼ä»£ç ï¼Œéœ€è¦è®¾å®šå½“å‰ä½¿ç”¨çš„æ¶æ„ï¼š<code>(gdb) set arch i8086</code></li>
<li></li>
</ul>
<h1 id="5-äº†è§£å¤„ç†å™¨ç¡¬ä»¶"><a href="#5-äº†è§£å¤„ç†å™¨ç¡¬ä»¶" class="headerlink" title="5 äº†è§£å¤„ç†å™¨ç¡¬ä»¶"></a>5 äº†è§£å¤„ç†å™¨ç¡¬ä»¶</h1><ul>
<li>äº†è§£å¤„ç†å™¨ä½“ç³»ç»“æ„ï¼ˆäº†è§£ç¡¬ä»¶å¯¹ uCore çš„å½±å“ï¼‰å’Œæœºå™¨æŒ‡ä»¤é›†ï¼ˆè¯»æ‡‚ uCore çš„æ±‡ç¼–ï¼‰</li>
<li>uCore ç›®å‰æ”¯æŒçš„ç¡¬ä»¶ç¯å¢ƒæ˜¯åŸºäºIntel 80386ä»¥ä¸Šçš„è®¡ç®—æœºç³»ç»Ÿ</li>
</ul>
<h2 id="5-1-Intel-80386-è¿è¡Œæ¨¡å¼"><a href="#5-1-Intel-80386-è¿è¡Œæ¨¡å¼" class="headerlink" title="5.1 Intel 80386 è¿è¡Œæ¨¡å¼"></a>5.1 Intel 80386 è¿è¡Œæ¨¡å¼</h2><ul>
<li>ä¸€èˆ¬CPU åªæœ‰ä¸€ç§è¿è¡Œæ¨¡å¼ï¼Œ<ul>
<li>èƒ½å¤Ÿæ”¯æŒå¤šä¸ªç¨‹åºåœ¨å„è‡ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´ä¸­å¹¶å‘æ‰§è¡Œï¼Œ</li>
<li>ä¸”æœ‰ç”¨æˆ·ç‰¹æƒçº§å’Œå†…æ ¸ç‰¹æƒçº§çš„åŒºåˆ†ï¼Œä½¿å¾—ä¸€èˆ¬ç”¨æˆ·ä¸èƒ½ç ´åæ“ä½œç³»ç»Ÿå†…æ ¸å’Œæ‰§è¡Œç‰¹æƒçº§æŒ‡ä»¤</li>
</ul>
</li>
<li>80386 å¤„ç†å™¨æœ‰å››ç§è¿è¡Œæ¨¡å¼<ul>
<li>å®æ¨¡å¼</li>
<li>ä¿æŠ¤æ¨¡å¼</li>
<li>SMM æ¨¡å¼</li>
<li>è™šæ‹Ÿ8086 æ¨¡å¼</li>
</ul>
</li>
<li><strong>å®æ¨¡å¼</strong><ul>
<li>ä¸ªäººè®¡ç®—æœºæ—©æœŸ8086å¤„ç†å™¨é‡‡ç”¨çš„ä¸€ç§ç®€å•è¿è¡Œæ¨¡å¼</li>
<li>åŠ ç”µå¯åŠ¨åå¤„äºå®æ¨¡å¼è¿è¡ŒçŠ¶æ€</li>
<li>å®æ¨¡å¼çŠ¶æ€ä¸‹ï¼Œè½¯ä»¶<strong>å¯è®¿é—®çš„ç‰©ç†å†…å­˜åœ°å€ç©ºé—´ä¸èƒ½è¶…è¿‡1 MB</strong>ï¼Œä¸”æ— æ³•å‘æŒ¥ Intel 80386ä»¥ä¸Šçº§åˆ«<strong>32ä½ CPU çš„4 GB å†…å­˜ç®¡ç†èƒ½åŠ›</strong></li>
<li>å®æ¨¡å¼å°†æ•´ä¸ªç‰©ç†å†…å­˜çœ‹æˆåˆ†æ®µåŒºåŸŸï¼Œç¨‹åºä»£ç å’Œæ•°æ®ä½äºä¸åŒåŒºåŸŸ</li>
<li><strong>æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·ç¨‹åºæœªåŒºåˆ«å¯¹å¾…</strong>ï¼Œæ¯ä¸€ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘å®é™…çš„ç‰©ç†åœ°å€</li>
<li>æ³¨æ„ï¼šè‹¥ç”¨æˆ·ç¨‹åºçš„ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†æ“ä½œç³»ç»ŸåŒºåŸŸæˆ–è€…å…¶ä»–ç”¨æˆ·ç¨‹åºåŒºåŸŸï¼Œå¹¶ä¿®æ”¹ï¼Œåæœä¸å ªè®¾æƒ³</li>
</ul>
</li>
</ul>
<blockquote>
<p>å¯¹äºucoreæ— å¿…è¦æ¶‰åŠ</p>
</blockquote>
<ul>
<li><strong>ä¿æŠ¤æ¨¡å¼</strong><ul>
<li><strong>ä¸»è¦ç›®æ ‡</strong>æ˜¯ç¡®ä¿åº”ç”¨ç¨‹åºæ— æ³•å¯¹æ“ä½œç³»ç»Ÿè¿›è¡Œç ´å</li>
<li>å®é™…ä¸Šï¼Œ80386å°±æ˜¯é€šè¿‡åœ¨<strong>å®æ¨¡å¼</strong>ä¸‹åˆå§‹åŒ–<strong>æ§åˆ¶å¯„å­˜å™¨</strong>ï¼ˆå¦‚GDTRï¼ŒLDTRï¼ŒIDTRä¸TRç­‰ç®¡ç†å¯„å­˜å™¨ï¼‰ä»¥åŠ<strong>é¡µè¡¨</strong>ï¼Œç„¶åå†é€šè¿‡è®¾ç½®<strong>CR0å¯„å­˜å™¨</strong>ä½¿å…¶ä¸­çš„<strong>ä¿æŠ¤æ¨¡å¼</strong> <strong>ä½¿èƒ½ä½ç½®ä½</strong>ï¼Œä»è€Œè¿›å…¥åˆ°80386çš„ä¿æŠ¤æ¨¡å¼</li>
<li>å½“80386å·¥ä½œåœ¨<strong>ä¿æŠ¤æ¨¡å¼</strong>ä¸‹çš„æ—¶å€™ï¼Œå…¶æ‰€æœ‰çš„<strong>32æ ¹åœ°å€çº¿</strong>éƒ½å¯ä¾›å¯»å€ï¼Œç‰©ç†å¯»å€ç©ºé—´é«˜è¾¾4 GB</li>
<li>åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ”¯æŒ<strong>å†…å­˜åˆ†é¡µæœºåˆ¶</strong>ï¼Œæä¾›äº†<strong>å¯¹è™šæ‹Ÿå†…å­˜çš„è‰¯å¥½æ”¯æŒ</strong></li>
<li><strong>ä¿æŠ¤æ¨¡å¼</strong>ä¸‹80386æ”¯æŒ<strong>å¤šä»»åŠ¡</strong>ï¼Œè¿˜æ”¯æŒ<strong>ä¼˜å…ˆçº§æœºåˆ¶</strong>ï¼Œ<strong>ä¸åŒçš„ç¨‹åºå¯ä»¥è¿è¡Œåœ¨ä¸åŒçš„ç‰¹æƒçº§ä¸Š</strong><ul>
<li>ç‰¹æƒçº§ä¸€å…±åˆ†0ï½3å››ä¸ªçº§åˆ«ï¼Œæ“ä½œç³»ç»Ÿè¿è¡Œåœ¨æœ€é«˜çš„ç‰¹æƒçº§0ä¸Šï¼Œåº”ç”¨ç¨‹åºåˆ™è¿è¡Œåœ¨æ¯”è¾ƒä½çš„çº§åˆ«ä¸Šï¼›</li>
<li>é…åˆè‰¯å¥½çš„æ£€æŸ¥æœºåˆ¶åï¼Œæ—¢å¯ä»¥åœ¨ä»»åŠ¡é—´<strong>å®ç°æ•°æ®çš„å®‰å…¨å…±äº«</strong>ä¹Ÿå¯ä»¥å¾ˆå¥½åœ°<strong>éš”ç¦»å„ä¸ªä»»åŠ¡</strong>ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-2-Intel-80386å†…å­˜æ¶æ„"><a href="#5-2-Intel-80386å†…å­˜æ¶æ„" class="headerlink" title="5.2 Intel 80386å†…å­˜æ¶æ„"></a>5.2 Intel 80386å†…å­˜æ¶æ„</h2><ul>
<li><strong>32</strong> ä½çš„å¤„ç†å™¨ï¼š<strong>å¯ä»¥å¯»å€çš„ç‰©ç†å†…å­˜åœ°å€ç©ºé—´</strong>ä¸º 2^32 = 4 G å­—èŠ‚</li>
<li>ä¸‰ä¸ªåœ°å€ç©ºé—´æ¦‚å¿µï¼š<ul>
<li><strong>ç‰©ç†åœ°å€</strong><ul>
<li>å¤„ç†å™¨æäº¤åˆ°æ€»çº¿ä¸Šç”¨äºè®¿é—®è®¡ç®—æœºç³»ç»Ÿä¸­çš„å†…å­˜å’Œå¤–è®¾çš„<strong>æœ€ç»ˆåœ°å€</strong></li>
<li>ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªç‰©ç†åœ°å€ç©ºé—´</li>
</ul>
</li>
<li><strong>çº¿æ€§åœ°å€</strong><ul>
<li>80386å¤„ç†å™¨é€šè¿‡<strong>æ®µï¼ˆSegmentï¼‰æœºåˆ¶</strong>æ§åˆ¶ä¸‹çš„å½¢æˆçš„åœ°å€ç©ºé—´</li>
<li><strong>æ®µæœºåˆ¶</strong><ul>
<li>åœ¨æ“ä½œç³»ç»Ÿçš„ç®¡ç†ä¸‹ï¼Œ<strong>æ¯ä¸ªè¿è¡Œ</strong>çš„åº”ç”¨ç¨‹åºæœ‰<strong>ç›¸å¯¹ç‹¬ç«‹</strong>çš„ä¸€ä¸ªæˆ–å¤šä¸ªå†…å­˜ç©ºé—´æ®µï¼Œæ¯ä¸ªæ®µæœ‰å„è‡ªçš„èµ·å§‹åœ°å€å’Œé•¿åº¦å±æ€§ï¼Œå¤§å°ä¸å›ºå®šï¼Œè¿™æ ·å¯è®©å¤šä¸ªè¿è¡Œçš„åº”ç”¨ç¨‹åºä¹‹é—´<strong>ç›¸äº’éš”ç¦»</strong>ï¼Œå®ç°<strong>å¯¹åœ°å€ç©ºé—´çš„ä¿æŠ¤</strong>ã€‚</li>
<li>åœ¨æ“ä½œç³»ç»Ÿå®Œæˆå¯¹80386å¤„ç†å™¨æ®µæœºåˆ¶çš„<strong>åˆå§‹åŒ–å’Œé…ç½®</strong>ï¼ˆ<em>ä¸»è¦æ˜¯éœ€è¦æ“ä½œç³»ç»Ÿé€šè¿‡ç‰¹å®šçš„æŒ‡ä»¤å’Œæ“ä½œå»ºç«‹<strong>å…¨å±€æè¿°ç¬¦è¡¨</strong>ï¼Œå®Œæˆè™šæ‹Ÿåœ°å€ä¸çº¿æ€§åœ°å€çš„æ˜ å°„å…³ç³»</em>ï¼‰åï¼Œ80386å¤„ç†å™¨çš„<strong>æ®µç®¡ç†åŠŸèƒ½å•å…ƒ</strong>è´Ÿè´£æŠŠè™šæ‹Ÿåœ°å€è½¬æ¢æˆçº¿æ€§åœ°å€</li>
</ul>
</li>
<li><strong>é¡µæœºåˆ¶</strong><ul>
<li><strong>é¡µæœºåˆ¶</strong>ï¼Œæ¯ä¸ªé¡µçš„å¤§å°æ˜¯å›ºå®šçš„<strong>ï¼ˆ4 KBï¼‰</strong>ï¼Œå¯å®Œæˆ<strong>å¯¹å†…å­˜å•å…ƒçš„å®‰å…¨ä¿æŠ¤ï¼Œéš”ç¦»</strong>ï¼Œå¯æœ‰æ•ˆ<strong>æ”¯æŒå¤§é‡åº”ç”¨ç¨‹åºåˆ†æ•£çš„ä½¿ç”¨å¤§å†…å­˜</strong>çš„æƒ…å†µ</li>
<li>åœ¨æ“ä½œç³»ç»Ÿå®Œæˆå¯¹80386å¤„ç†å™¨é¡µæœºåˆ¶çš„<strong>åˆå§‹åŒ–å’Œé…ç½®</strong>ï¼ˆ<em>ä¸»è¦æ˜¯éœ€è¦æ“ä½œç³»ç»Ÿé€šè¿‡ç‰¹å®šçš„æŒ‡ä»¤å’Œæ“ä½œå»ºç«‹é¡µè¡¨ï¼Œå®Œæˆè™šæ‹Ÿåœ°å€ä¸çº¿æ€§åœ°å€çš„æ˜ å°„å…³ç³»</em>ï¼‰åï¼Œåº”ç”¨ç¨‹åºçœ‹åˆ°çš„<strong>é€»è¾‘åœ°å€å…ˆè¢«å¤„ç†å™¨ä¸­çš„æ®µç®¡ç†åŠŸèƒ½å•å…ƒè½¬æ¢ä¸ºçº¿æ€§åœ°å€</strong>ï¼Œç„¶åå†é€šè¿‡80386<strong>å¤„ç†å™¨ä¸­çš„é¡µç®¡ç†åŠŸèƒ½å•å…ƒæŠŠçº¿æ€§åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€</strong>ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>é€»è¾‘åœ°å€</strong></li>
</ul>
</li>
</ul>
<blockquote>
<p>é¡µæœºåˆ¶å’Œæ®µæœºåˆ¶æœ‰ä¸€å®šç¨‹åº¦çš„åŠŸèƒ½é‡å¤ï¼Œä½†Intelå…¬å¸ä¸ºäº†å‘ä¸‹å…¼å®¹ï¼Œä½¿å¾—ä¸¤è€…ä¸€ç›´å…±å­˜</p>
</blockquote>
<ul>
<li>åˆ†æ®µæœºåˆ¶å¯åŠ¨ï¼Œåˆ†é¡µæœºåˆ¶ä¸ºå¯åŠ¨æ—¶ï¼šé€»è¾‘åœ°å€â€”â€”<strong>æ®µæœºåˆ¶å¤„ç†</strong>â€”â€”&gt;çº¿æ€§åœ°å€==ç‰©ç†åœ°å€</li>
<li>ä¸¤ä¸ªæœºåˆ¶éƒ½å¯åŠ¨æ—¶ï¼šé€»è¾‘åœ°å€â€”â€”<strong>æ®µæœºåˆ¶å¤„ç†</strong>â€”â€”&gt;çº¿æ€§åœ°å€â€”â€”<strong>é¡µæœºåˆ¶å¤„ç†</strong>â€”â€”&gt;ç‰©ç†åœ°å€</li>
</ul>
<h2 id="5-3-Intel-80386-å¯„å­˜å™¨"><a href="#5-3-Intel-80386-å¯„å­˜å™¨" class="headerlink" title="5.3 Intel 80386 å¯„å­˜å™¨"></a>5.3 Intel 80386 å¯„å­˜å™¨</h2><ul>
<li><p>80386 å¯„å­˜å™¨å¯åˆ†ä¸º8ç±»ï¼šå®½åº¦éƒ½ä¸º 32 ä½</p>
<ol>
<li><p><strong>é€šç”¨å¯„å­˜å™¨</strong>ï¼ˆGeneral Registerï¼‰</p>
<ul>
<li><p>EAXï¼ˆ<strong>ç´¯åŠ å™¨</strong>ï¼‰/EBXï¼ˆ<strong>åŸºå€å¯„å­˜å™¨</strong>ï¼‰/ECXï¼ˆ<strong>è®¡æ•°å™¨</strong>ï¼‰/EDXï¼ˆ<strong>æ•°æ®å¯„å­˜å™¨</strong>ï¼‰/</p>
<p>ESIï¼ˆ<strong>æºåœ°å€æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰/EDIï¼ˆ<strong>ç›®çš„åœ°å€æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰/ESPï¼ˆ<strong>å †æ ˆæŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰/EBPï¼ˆ<strong>åŸºå€æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰</p>
<ul>
<li>ä½åå…­ä½ï¼šAX/BX/CX/DX/SI/DI/SP/BP<ul>
<li>å¯ä»¥å•ç‹¬å­˜å–AX,BX,CX,DX çš„é«˜å…«ä½å’Œä½å…«ä½</li>
<li>AH,AL/BH,BL/CH,CL/DH,DL</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>æ®µå¯„å­˜å™¨</strong>ï¼ˆSegment Registerï¼‰: éƒ½æ˜¯ 16 ä½çš„</p>
<ul>
<li>CS,  <strong>ä»£ç æ®µ</strong>ï¼ˆCode Segmentï¼‰</li>
<li>DS, <strong>æ•°æ®æ®µ</strong>ï¼ˆData Segmentï¼‰</li>
<li> ES, <strong>é™„åŠ æ•°æ®æ®µ</strong>ï¼ˆExtra Segmentï¼‰</li>
<li> SS, <strong>å †æ ˆæ®µ</strong>ï¼ˆStack Segmentï¼‰</li>
<li> FS, <strong>é™„åŠ æ®µ</strong></li>
<li> GS, <strong>é™„åŠ æ®µ</strong></li>
</ul>
</li>
<li><p><strong>æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼ˆInstruction Pointerï¼‰</p>
<ul>
<li>EIP çš„ä½ 16 ä½å°±æ˜¯8086çš„IPï¼Œä»–å­˜å‚¨çš„æ˜¯ä¸‹ä¸€æ¡è¦æ‰§è¡ŒæŒ‡ä»¤çš„å†…å­˜åœ°å€ï¼Œåœ¨åˆ†æ®µåœ°å€è½¬æ¢ä¸­ï¼Œè¡¨ç¤ºæŒ‡ä»¤çš„æ®µå†…åç§»åœ°å€</li>
</ul>
</li>
<li><p><strong>æ ‡å¿—å¯„å­˜å™¨</strong>ï¼ˆFlag Registerï¼‰ï¼š</p>
<ul>
<li>EFLAGSï¼Œå’Œ8086çš„16ä½æ ‡å¿—å¯„å­˜å™¨ç›¸æ¯”ï¼Œå¢åŠ äº†4ä¸ªæ§åˆ¶ä½ï¼Œè€…20ä½æ§åˆ¶/æ ‡å¿—ä½ï¼š<ul>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab0_figs/image006.png" alt="çŠ¶æ€å¯„å­˜å™¨"></li>
<li>æ§åˆ¶/æ ‡å¿—ä½å«ä¹‰ï¼š</li>
</ul>
</li>
</ul>
</li>
<li><p>ç³»ç»Ÿåœ°å€å¯„å­˜å™¨</p>
</li>
<li><p>æ§åˆ¶å¯„å­˜å™¨</p>
</li>
<li><p>è°ƒè¯•å¯„å­˜å™¨</p>
</li>
<li><p>æµ‹è¯•å¯„å­˜å™¨</p>
</li>
</ol>
</li>
</ul>
<h1 id="6-äº†è§£-uCore-ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„"><a href="#6-äº†è§£-uCore-ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„" class="headerlink" title="6 äº†è§£ uCore ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„"></a>6 äº†è§£ uCore ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„</h1><h2 id="6-1-é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•"><a href="#6-1-é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•" class="headerlink" title="6.1 é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•"></a>6.1 é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•</h2><ul>
<li>uCore è®¾è®¡ä¸­é‡‡ç”¨äº†ä¸€å®šçš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•</li>
<li>éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç”¨ C è¯­è¨€æ¨¡æ‹Ÿå‡ºä¸€ä¸ªå¸¸è§C++ç¼–è¯‘å™¨å·²ç»å®ç°çš„å¯¹è±¡æ¨¡å‹</li>
<li>uCore çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•ï¼Œç›®å‰ä¸»è¦æ˜¯é‡‡ç”¨äº†ç±»ä¼¼ C++ çš„æ¥å£ï¼ˆinterfaceï¼‰<ul>
<li>å³æ˜¯è®©å®ç°ç»†èŠ‚ä¸åŒçš„æŸç±»å†…æ ¸å­ç³»ç»Ÿï¼ˆæ¯”å¦‚ç‰©ç†å†…å­˜åˆ†é…å™¨ã€è°ƒåº¦å™¨ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰æœ‰å…±åŒçš„æ“ä½œæ–¹å¼</li>
<li>è™½ç„¶å†…å­˜å­ç³»ç»Ÿçš„å®ç°åƒå·®ä¸‡åˆ«ï¼Œä½†å®ƒçš„è®¿é—®æ¥å£æ˜¯ä¸å˜çš„</li>
</ul>
</li>
<li>æ¥å£åœ¨ C è¯­è¨€ä¸­ï¼Œè¡¨ç°ä¸ºä¸€ç»„å‡½æ•°æŒ‡é’ˆçš„é›†åˆ</li>
<li>æ¥å£è®¾è®¡çš„éš¾ç‚¹æ˜¯å¦‚ä½•æ‰¾å‡ºå„ç§å†…æ ¸å­ç³»ç»Ÿçš„å…±æ€§è®¿é—®/æ“ä½œæ¨¡å¼ï¼Œä»è€Œå¯ä»¥æ ¹æ®è®¿é—®æ¨¡å¼æå–å‡ºå‡½æ•°æŒ‡é’ˆåˆ—è¡¨</li>
</ul>
<h2 id="6-2-é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨"><a href="#6-2-é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨" class="headerlink" title="6.2 é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨"></a>6.2 é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨</h2><h3 id="6-2-1-åŒå‘å¾ªç¯é“¾è¡¨"><a href="#6-2-1-åŒå‘å¾ªç¯é“¾è¡¨" class="headerlink" title="6.2.1 åŒå‘å¾ªç¯é“¾è¡¨"></a>6.2.1 åŒå‘å¾ªç¯é“¾è¡¨</h3><ul>
<li><p>æ•°æ®ç»“æ„è¯¾ç¨‹ä¸­</p>
<ul>
<li><p>ä¸“é—¨çš„æˆå‘˜å˜é‡ data</p>
</li>
<li><p>ä¸¤ä¸ªæŒ‡å‘è¯¥ç±»å‹çš„æŒ‡é’ˆ next å’Œ prev</p>
</li>
<li><p>```C<br>typedef struct foo {</p>
<pre><code>ElemType data;
struct foo *prev;
struct foo *next;
</code></pre>
<p>} foo_t;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ç‰¹ç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">  * å°¾èŠ‚ç‚¹çš„åç»§æŒ‡å‘é¦–èŠ‚ç‚¹</span><br><span class="line">  * ![åŒå‘å¾ªç¯é“¾è¡¨](https:&#x2F;&#x2F;objectkuan.gitbooks.io&#x2F;ucore-docs&#x2F;content&#x2F;lab0_figs&#x2F;image007.png)</span><br><span class="line"></span><br><span class="line">* æ½œåœ¨é—®é¢˜ï¼šç”±äºæ¯ç§ç‰¹å®šæ•°æ®ç»“æ„ç±»å‹ä¸ä¸€è‡´ï¼Œéœ€è¦ä¸ºæ¯ç§ç‰¹å®šæ•°æ®ç»“æ„ç±»å‹ å®šä¹‰é’ˆå¯¹è¿™ä¸ªæ•°æ®ç»“æ„çš„ç‰¹å®šé“¾è¡¨æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œ</span><br><span class="line"></span><br><span class="line">* åœ¨uCoreä¸­ï¼Œå€Ÿé‰´äº† Linux å†…æ ¸çš„åŒå‘é“¾è¡¨å®ç°ï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;C</span><br><span class="line">    struct list_entry_t &#123;</span><br><span class="line">        struct list_entry_t *prev, *next;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>é“¾è¡¨èŠ‚ç‚¹ list_entry_t æ²¡æœ‰åŒ…å«æ•°æ®åŸŸï¼Œè€Œæ˜¯<strong>åœ¨å…·ä½“çš„æ•°æ®ç»“æ„ä¸­åŒ…å«è¯¥é“¾è¡¨èŠ‚ç‚¹</strong></p>
</li>
</ul>
</li>
<li><p>ä¾‹å¦‚ lab 2 ä¸­çš„ç©ºé—²å†…å­˜å—åˆ—è¡¨ï¼Œ<strong>ç©ºé—²å—é“¾è¡¨çš„å¤´æŒ‡é’ˆ</strong>å®šä¹‰ä¸ºï¼š</p>
<ul>
<li>```C<br>/* free_area_t - maintains a doubly linked list to record free (unused) pages */typedef struct {<pre><code>list_entry_t free_list;         // the list header
unsigned int nr_free;           // # of free pages in this free list
</code></pre>
} free_area_t;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ¯ä¸€ä¸ª**ç©ºé—²å—é“¾è¡¨èŠ‚ç‚¹**å®šä¹‰ä¸ºï¼š</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;C</span><br><span class="line">    &#x2F;* *</span><br><span class="line">     * struct Page - Page descriptor structures. Each Page describes one</span><br><span class="line">     * physical page. In kern&#x2F;mm&#x2F;pmm.h, you can find lots of useful functions</span><br><span class="line">     * that convert Page to other data types, such as phyical address.</span><br><span class="line">     * *&#x2F;</span><br><span class="line">    struct Page &#123;</span><br><span class="line">        atomic_t ref;          &#x2F;&#x2F; page frame&#39;s reference counter</span><br><span class="line">        â€¦â€¦</span><br><span class="line">        list_entry_t page_link;         &#x2F;&#x2F; free list link</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab0_figs/image008.png" alt="ç©ºé—²å—åŒå‘å¾ªç¯é“¾è¡¨" style="zoom:150%;" /></li>
<li><p>é€šç”¨åŒå‘å¾ªç¯é“¾è¡¨ç»“æ„</p>
<ul>
<li>é¿å…äº†ä¸ºæ¯ä¸ªç‰¹å®šæ•°æ®ç»“æ„ç±»å‹ å®šä¹‰é’ˆå¯¹è¿™ä¸ªæ•°æ®ç»“æ„çš„ç‰¹å®šé“¾è¡¨çš„éº»çƒ¦ï¼Œ</li>
<li>è®©æ‰€æœ‰çš„ç‰¹å®šæ•°æ®ç»“æ„å…±äº«é€šç”¨çš„é“¾è¡¨æ“ä½œå‡½æ•°</li>
</ul>
</li>
<li><p>é€šç”¨åŒå‘å¾ªç¯é“¾è¡¨å‡½æ•°å®šä¹‰ï¼š</p>
<ul>
<li><p>åˆå§‹åŒ–ï¼š</p>
<ul>
<li><p>uCore åªå®šä¹‰äº†é“¾è¡¨èŠ‚ç‚¹ï¼Œæ²¡æœ‰ä¸“é—¨å®šä¹‰é“¾è¡¨å¤´</p>
</li>
<li><p>å†…è”å‡½æ•°ï¼ˆ<strong>inline function</strong>ï¼‰list_init:</p>
<ul>
<li>```C<br>static inline void<br>list_init(list_entry_t *elm) {<pre><code>elm-&gt;prev = elm-&gt;next = elm;
</code></pre>
}<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * è°ƒç”¨ list_init(free_area.free_list) ï¼Œ</span><br><span class="line"></span><br><span class="line">    * å£°æ˜äº†ä¸€ä¸ªåä¸º free_area.free_list çš„é“¾è¡¨å¤´</span><br><span class="line">    * ç©ºé“¾è¡¨ï¼Œé“¾è¡¨å¤´çš„ next å’Œ prev éƒ½åˆå§‹åŒ–æŒ‡å‘è‡ªå·±</span><br><span class="line">    * å¯ä»¥ç”¨next æ˜¯å¦æŒ‡å‘è‡ªå·±åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br><span class="line"></span><br><span class="line">* æ’å…¥ï¼š</span><br><span class="line"></span><br><span class="line">  * è¡¨å¤´æ’å…¥ï¼ˆ**list_add_after**ï¼‰</span><br><span class="line"></span><br><span class="line">  * è¡¨å°¾æ’å…¥ï¼ˆ**list_add_before**ï¼‰</span><br><span class="line"></span><br><span class="line">  * ç”±äºåŒå‘å¾ªç¯é“¾è¡¨çš„é“¾è¡¨å¤´ next å’Œ prev åˆ†åˆ«æŒ‡å‘é“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸¤è€…å®ç°åŒºåˆ«å¹¶ä¸å¤§</span><br><span class="line"></span><br><span class="line">  * uCore</span><br><span class="line"></span><br><span class="line">    * **list_add(elm, listelm, listelm-&gt;next)** å®ç°è¡¨å¤´æ’å…¥</span><br><span class="line">    * **list_add(elm, listelm-&gt;prev, listelm)** å®ç°è¡¨å°¾æ’å…¥</span><br><span class="line"></span><br><span class="line">  * list_add:</span><br><span class="line"></span><br><span class="line">    * &#96;&#96;&#96;C</span><br><span class="line">      static inline void</span><br><span class="line">      __list_add(list_entry_t *elm, list_entry_t *prev, list_entry_t *next) &#123;</span><br><span class="line">          prev-&gt;next &#x3D; next-&gt;prev &#x3D; elm;</span><br><span class="line">          elm-&gt;next &#x3D; next;</span><br><span class="line">          elm-&gt;prev &#x3D; prev;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>è¡¨å¤´æ’å…¥ï¼šæ’å…¥åœ¨listelm åï¼Œå³æ’åœ¨é“¾è¡¨çš„æœ€å‰ä½ç½®</p>
</li>
<li><p>è¡¨å°¾æ’å…¥ï¼šæ’å…¥åœ¨ listelm-&gt;prev ä¹‹åï¼Œå³æ’å…¥åœ¨é“¾è¡¨æœ€åä½ç½®</p>
</li>
</ul>
</li>
<li><p>åˆ é™¤</p>
<ul>
<li><p>åˆ é™¤ç©ºé—²å—é“¾è¡¨ä¸­çš„ Page ç»“æ„çš„é“¾è¡¨èŠ‚ç‚¹æ—¶ï¼Œè°ƒç”¨ å†…è”å‡½æ•° list_del , list_del è¿›ä¸€æ­¥è°ƒç”¨äº†_list_del å®Œæˆå…·ä½“çš„åˆ é™¤æ“ä½œ</p>
</li>
<li><p>```C<br>static inline void<br>list_del(list_entry_t *listelm) {</p>
<pre><code>__list_del(listelm-&gt;prev, listelm-&gt;next);
</code></pre>
<p>}<br>static inline void<br>__list_del(list_entry_t *prev, list_entry_t *next) {</p>
<pre><code>prev-&gt;next = next;
next-&gt;prev = prev;
</code></pre>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * å¦‚æœè¦ç¡®ä¿ è¢«åˆ é™¤çš„èŠ‚ç‚¹ listelm ä¸åœ¨æŒ‡å‘é“¾è¡¨ä¸­å…¶ä»–èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ list_init æ¥æŠŠ listelm çš„preã€next æŒ‡é’ˆåˆ†åˆ«æŒ‡å‘è‡ªèº«â€”â€”å¯ä»¥é€šè¿‡ list_del_int å®Œæˆ</span><br><span class="line"></span><br><span class="line">* è®¿é—®é“¾è¡¨èŠ‚ç‚¹æ‰€åœ¨çš„å®¿ä¸»æ•°æ®ç»“æ„</span><br><span class="line"></span><br><span class="line">  * list_entry_t é€šç”¨åŒå‘å¾ªç¯é“¾è¡¨ ä»…ä»…ä¿å­˜äº†æŸç‰¹å®šæ•°æ®ç»“æ„ä¸­é“¾è¡¨èŠ‚ç‚¹æˆå‘˜å˜é‡çš„åœ°å€</span><br><span class="line"></span><br><span class="line">  * å¦‚ä½•é€šè¿‡è¿™ä¸ªé“¾è¡¨èŠ‚ç‚¹æˆå‘˜å˜é‡è®¿é—®åˆ°ä»–çš„æ‰€æœ‰è€…ï¼ˆæŸç‰¹å®šæ•°æ®ç»“æ„çš„å˜é‡ï¼‰</span><br><span class="line"></span><br><span class="line">  * Linux æä¾›äº†é’ˆå¯¹è¯¥æ•°æ®ç»“æ„ XXX çš„ leXXX çš„å®</span><br><span class="line"></span><br><span class="line">    * le ä¸º list entry ç®€ç§°ï¼Œæ˜¯æŒ‡å‘æ•°æ®ç»“æ„ XXX ä¸­ list_entry_t æˆå‘˜å˜é‡çš„æŒ‡é’ˆï¼Œå³å­˜å‚¨åœ¨åŒå‘é“¾è¡¨ä¸­çš„ç»“ç‚¹åœ°å€å€¼</span><br><span class="line">    * member æ˜¯æŒ‡ XXXæ•°æ®ç±»å‹ä¸­åŒ…å«çš„é“¾è¡¨èŠ‚ç‚¹çš„æˆå‘˜å˜é‡</span><br><span class="line"></span><br><span class="line">  * &#96;&#96;&#96;C</span><br><span class="line">    &#x2F;&#x2F;free_areaæ˜¯ç©ºé—²å—ç®¡ç†ç»“æ„ï¼Œfree_area.free_listæ˜¯ç©ºé—²å—é“¾è¡¨å¤´</span><br><span class="line">    free_area_t free_area;</span><br><span class="line">    list_entry_t * le &#x3D; &amp;free_area.free_list;  &#x2F;&#x2F;leæ˜¯ç©ºé—²å—é“¾è¡¨å¤´æŒ‡é’ˆ</span><br><span class="line">    while((le&#x3D;list_next(le)) !&#x3D; &amp;free_area.free_list) &#123; &#x2F;&#x2F;ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹éå†</span><br><span class="line">        struct Page *p &#x3D; le2page(le, page_link); &#x2F;&#x2F;è·å–èŠ‚ç‚¹æ‰€åœ¨åŸºäºPageæ•°æ®ç»“æ„çš„å˜é‡</span><br><span class="line">        â€¦â€¦</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>le2page å®ï¼š</p>
<ul>
<li><pre><code class="C">// convert list entry to page
#define le2page(le, member)                 \
to_struct((le), struct Page, member)
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>
   
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/stitch.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ZiHao256" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/AlexMa49844688" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/profile.php?id=100067079873449" target="_blank" title="FB Page">
                      
                        <i class="fa fa-fw fa-facebook"></i>FB Page</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/zihao123w?spm=1000.2115.3001.5343" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-user"></i>CSDN</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:2638779206@qq.com" target="_blank" title="E-Mail-1">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail-1</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="zihao626@gmail.com" target="_blank" title="E-Mail-2">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail-2</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                å‹æƒ…é“¾æ¥
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://warmchay.github.io/" title="WarmChay" target="_blank">WarmChay</a>
                  </li>
                
              </ul>
              <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=300 src="//music.163.com/outchain/player?type=0&id=6738460302&auto=0&height=430"></iframe>


<!-- æ–‡ä»¶ä½ç½®ï¼š~/blog/themes/next/layout/_custom/sidebar.swig -->

<div id="days"></div>
<script>
function show_date_time(){
    window.setTimeout("show_date_time()", 1000);
    BirthDay=new Date("05/02/2021 12:00:00");
    today=new Date();
    timeold=(today.getTime()-BirthDay.getTime());
    sectimeold=timeold/1000
    secondsold=Math.floor(sectimeold);
    msPerDay=24*60*60*1000
    e_daysold=timeold/msPerDay
    daysold=Math.floor(e_daysold);
    e_hrsold=(e_daysold-daysold)*24;
    hrsold=setzero(Math.floor(e_hrsold));
    e_minsold=(e_hrsold-hrsold)*60;
    minsold=setzero(Math.floor((e_hrsold-hrsold)*60));
    seconds=setzero(Math.floor((e_minsold-minsold)*60));
    document.getElementById('days').innerHTML="å·²è¿è¡Œ "+daysold+" å¤© "+hrsold+" å°æ—¶ "+minsold+" åˆ† "+seconds+" ç§’";
}
function setzero(i) {
    if (i<10) {
        i="0" + i
    };
    return i;
}
show_date_time();
</script>

            </div>
          


        </div>
      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="heart">
    <i class="fa fa-heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zihao Ma</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">57.5k</span>
  
</div>









<!-- æ–°å¢è®¿å®¢ç»Ÿè®¡ä»£ç  -->

<div class="busuanzi-count">
    <script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="site-uv">
      <i class="fa fa-user"></i>
      è®¿é—®ç”¨æˆ·ï¼š <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> äºº
    </span>
    <div class="powered-by"></div>
    <span class="site-uv">
      <i class="fa fa-eye"></i>
      è®¿é—®æ¬¡æ•°ï¼š <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> æ¬¡
    </span>
    <!-- åšå®¢å­—æ•°ç»Ÿè®¡ -->
    <span class="site-pv">
      <i class="fa fa-pencil"></i>
      åšå®¢å…¨ç«™å…±ï¼š <span class="post-count">57.5k</span> å­—
    </span>
</div>
<!-- æ–°å¢è®¿å®¢ç»Ÿè®¡ä»£ç  END-->

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":140,"height":240,"hOffset":80,"vOffset":-50},"mobile":null,"show":true,"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
