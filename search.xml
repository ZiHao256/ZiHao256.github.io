<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Project#2 Extendible Hash Index</title>
      <link href="p/517dd8ea.html"/>
      <url>p/517dd8ea.html</url>
      
        <content type="html"><![CDATA[<div class="note warning simple"><p><strong>æ’°å†™æœ¬æ–‡çš„ç›®çš„</strong>ï¼šè®°å½•æœ¬äººåœ¨ä¸å‚è€ƒå…¶ä»–ä»»ä½•å½¢å¼çš„è§£å†³æ–¹æ³•ï¼ˆæ€è·¯/æºç ï¼‰ã€ä»…é è¯¾ç¨‹æä¾›çš„èµ„æºï¼ˆè¯¾æœ¬/å‚è€ƒèµ„æ–™ï¼‰å’Œ<code>Discord</code>ä¸­<code>high level</code>çš„è®¨è®ºçš„æƒ…å†µä¸‹ï¼Œç‹¬ç«‹å®Œæˆè¯¥è¯¾ç¨‹çš„è¿‡ç¨‹ã€‚</p><p>æ¬¢è¿å¤§å®¶å’Œæˆ‘è®¨è®ºå­¦ä¹ ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ã€‚</p><p>ç”±äº<code>gradescope</code>ä¸­å¯¹<code>non-cmu students</code>è¿˜æœªå¼€æ”¾<code>Project#2</code>ï¼Œæœ¬æ–‡æ–¹æ³•ä»…é€šè¿‡äº†æœ¬åœ°æµ‹è¯•ï¼Œææœ‰å¯èƒ½æœ‰é”™è¯¯ï¼ˆå¹¶å‘è®¿é—®ï¼‰</p></div><p><strong>Project #2: Extendible Hash Index</strong></p><blockquote><p>å…ˆè®°å½•å®Œæˆçš„è¿‡ç¨‹ï¼Œç„¶åå†æ€»ç»“å’Œæ€è€ƒ</p></blockquote><h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><p><strong>Due</strong>ï¼šå››ä¸ªæ˜ŸæœŸå·¦å³ï¼ˆé€šè¿‡æœ¬åœ°æµ‹è¯•-4å¤©å·¦å³+é€šè¿‡çº¿ä¸Šæµ‹è¯•-å¾…å®šï¼‰</p><p>åœ¨å¼€å§‹å®Œæˆè¯¥é¡¹ç›®ä¹‹å‰ï¼Œé¦–å…ˆç¡®ä¿ä¸¤ä»¶äº‹</p><ol><li> ç¡®ä¿Project#1çš„ä»£ç å®ç°æ˜¯æ­£ç¡®çš„ï¼Œæœ€å¥½å¤šæäº¤å‡ æ¬¡ï¼Œå› ä¸ºæµ‹è¯•ç”¨ä¾‹å¯èƒ½ä¼šæœ‰ä¸åŒ</li><li> ä¸€å®šè¦å…ˆä»åŸbustubä»“åº“pullæœ€æ–°çš„ä»£ç ï¼Œä¸ç„¶å¯èƒ½ä¼šç¼ºå°‘ä¸€äº›ç»™å®šçš„å®ç°</li></ol><p><strong>å®éªŒç¯å¢ƒï¼š</strong></p><ul><li>  MacOS</li><li>  CLion/VSCode</li></ul><h1 id="Task-1-Read-Write-Page-Guards"><a href="#Task-1-Read-Write-Page-Guards" class="headerlink" title="Task #1-Read/Write Page Guards"></a>Task #1-Read/Write Page Guards</h1><ul><li><p>æ•°æ®æˆå‘˜ï¼šå­˜å‚¨æŒ‡é’ˆ</p><ul><li>  æŒ‡å‘BPM</li><li>  æŒ‡å‘Pageå¯¹è±¡</li></ul></li><li><p>  ææ„å‡½æ•°ï¼šç¡®ä¿å½“BasicPageGuardå¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸçš„æ—¶å€™ï¼šè‡ªåŠ¨è°ƒç”¨<code>UnpinPage</code></p></li><li><p>  æ–¹æ³•æˆå‘˜ï¼šé™¤æ­¤ä¹‹å¤–ï¼Œéœ€è¦æä¾›æ–¹æ³•ä½¿å¾—èƒ½å¤Ÿæ‰‹åŠ¨unpin</p></li><li><p>æ•°æ®æˆå‘˜ï¼šwriter-reader latch</p><ul><li>  å¯ä»¥å°è¯•è°ƒç”¨Pageä¸­çš„ç›¸å…³æ–¹æ³•</li></ul></li><li><p>  æ–¹æ³•æˆå‘˜ï¼šèƒ½å¤Ÿåœ¨å¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œè‡ªåŠ¨é‡Šæ”¾latch</p></li></ul><h2 id="BasicPageGuard-ReadPageGuard-WritePageGuard"><a href="#BasicPageGuard-ReadPageGuard-WritePageGuard" class="headerlink" title="BasicPageGuard/ReadPageGuard/WritePageGuard"></a>BasicPageGuard/ReadPageGuard/WritePageGuard</h2><p><strong>å¯¹äºBasicPageGuard</strong></p><ul><li><p><code>PageGuard(PageGuard &amp;&amp;that)</code>: Move constructor.</p><ul><li><p>å‚è€ƒC++Primer</p><ul><li>  ç§»åŠ¨æ„é€ çš„æ—¶å€™ä»ç»™å®šå¯¹è±¡ä¸­çªƒå–èµ„æºè€Œéæ‹·è´èµ„æºï¼Œå³ç§»åŠ¨æ„é€ å‡½æ•°éƒ¨åˆ†é…ä»»ä½•æ–°å†…å­˜</li><li>  éœ€è¦ç¡®ä¿ç§»åæºå¯¹è±¡æ˜¯å¯ä»¥é”€æ¯</li></ul></li></ul></li><li><p><code>operator=(PageGuard &amp;&amp;that)</code>: Move operator.</p><ul><li><p>éœ€è¦å¤„ç†ç§»åŠ¨èµ‹å€¼å¯¹è±¡æ˜¯è‡ªèº«çš„æƒ…å†µ</p><ul><li>  ç›´æ¥è¿”å›*this</li></ul></li><li><p>å¦åˆ™ï¼Œéœ€è¦å¤„ç†åŸpage</p><ul><li>  ç›´æ¥è°ƒç”¨Drop</li></ul></li></ul></li><li><p><code>Drop()</code>: Unpin</p><ul><li>  å…ˆclear</li><li>  å†unpin</li></ul></li><li><p><code>~PageGuard()</code>: Destructor.</p><ul><li><p>éœ€è¦å…ˆåˆ¤æ–­æ˜¯å¦å·²ç»æ‰‹åŠ¨Drop</p><ul><li>  è‹¥å¦åˆ™ç›´æ¥è°ƒç”¨Drop</li></ul></li></ul></li><li><p><code>read-only</code>å’Œ<code>write date</code>APIs</p><ul><li>  åˆ†åˆ«ä¸ºAså’ŒAsMut</li><li>  å¯ä»¥ç¼–è¯‘æ—¶æœŸæ£€æŸ¥ç”¨æ³•æ˜¯å¦æ­£ç¡®</li></ul></li></ul><p><strong>å¯¹äºReadPageGuard</strong></p><ul><li><p>ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼éƒ½å¯ä»¥ä½¿ç”¨std::moveå®Œæˆ</p><ul><li>  std::move()ç§»åŠ¨èµ‹å€¼æ—¶ï¼Œä¼šå¯¹èµ‹å€¼guardè°ƒç”¨ææ„å‡½æ•°å¹¶è°ƒç”¨Dropï¼Œå› æ­¤ä¸å¿…æ‹…å¿ƒèµ‹å€¼åç§»åæºå¯¹è±¡ä¼šå¯¹pageé€ æˆå½±å“</li></ul></li><li><p>  éœ€è¦æ³¨æ„Dropä¸­èµ„æºçš„é‡Šæ”¾é¡ºåºï¼Œéœ€è¦åœ¨Unpinä¹‹å‰é‡Šæ”¾RLatchï¼Œä¸ç„¶ä¼šå› ä¸ºUnpinè°ƒç”¨äº†RLatchè€Œæ­»é”</p></li><li><p>  éœ€è¦åœ¨æ„å‡½æ•°ä¸­åˆ¤æ–­æ˜¯å¦å·²ç»æ‰‹åŠ¨drop/ç§»åŠ¨èµ‹å€¼/ç§»åŠ¨æ„é€ è¿‡</p></li></ul><p><strong>å¯¹äºWritePageGuard</strong>ï¼šåŒä¸Š</p><h2 id="Upgrade"><a href="#Upgrade" class="headerlink" title="Upgrade"></a>Upgrade</h2><p><span style="color: rgb(13, 13, 13)"><span style="background-color: rgb(243, 244, 245)">guarantee that the protected page is not evicted from the buffer pool during the upgrade</span></span></p><ul><li><p><code>UpgradeRead()</code>: Upgrade to aÂ <code>ReadPageGuard</code></p><ul><li>  åœ¨å‡çº§çš„è¿‡ç¨‹ä¸­åŠ å†™é”</li><li>  å¹¶å°†basic Dropæ‰</li></ul></li><li><p>  <code>UpgradeWrite()</code>: Upgrade to aÂ <code>WritePageGuard</code></p></li></ul><h2 id="Wrappers"><a href="#Wrappers" class="headerlink" title="Wrappers"></a>Wrappers</h2><ul><li>  <code>FetchPageBasic(page_id_t page_id)</code></li><li>  <code>FetchPageRead(page_id_t page_id)</code></li><li>  <code>FetchPageWrite(page_id_t page_id)</code></li><li>  <code>NewPageGuarded(page_id_t *page_id)</code></li></ul><h2 id="Tests"><a href="#Tests" class="headerlink" title="Tests"></a>Tests</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220121826.png" alt="local test"></p><h1 id="Task-2-Extendible-Hash-Table-Pages"><a href="#Task-2-Extendible-Hash-Table-Pages" class="headerlink" title="Task #2-Extendible Hash Table Pages"></a>Task #2-<strong><span style="color: rgb(13, 13, 13)">Extendible Hash Table Pages</span></strong></h1><p>Task2ä¸­ç›¸å…³æºç çš„æ³¨é‡Šå¹¶æ²¡æœ‰å¾ˆè¯¦ç»†ï¼Œéœ€è¦è‡ªå·±æ ¹æ®æœ¬åœ°æµ‹è¯•æ¥åˆ¤æ–­è¯¥å‡½æ•°å…·ä½“å®Œæˆäº†ä»€ä¹ˆå·¥ä½œ</p><ul><li>  å¯ä»¥åœ¨å®ç°<code>Header Pages</code>å’Œ<code>Directory Pages</code>çš„æ—¶å€™ï¼Œé€šè¿‡<code>HeaderDirectoryPageSampleTest</code>æ¥æµ‹è¯•æˆ–è€…Debug</li><li>  å®ç°<code>Bucket Pages</code>çš„æ—¶å€™ï¼Œé€šè¿‡<code>BucketPageSampleTest</code>æµ‹è¯•</li></ul><h2 id="Hash-Table-Header-Pages"><a href="#Hash-Table-Header-Pages" class="headerlink" title="Hash Table Header Pages"></a>Hash Table Header Pages</h2><h3 id="æˆå‘˜å˜é‡ï¼š"><a href="#æˆå‘˜å˜é‡ï¼š" class="headerlink" title="æˆå‘˜å˜é‡ï¼š"></a><strong>æˆå‘˜å˜é‡ï¼š</strong></h3><p><code>directory_page_ids</code>ï¼špage_idï¼ˆ4Bï¼‰çš„æ•°ç»„</p><ul><li><p><strong>å…ƒç´ ä¸ªæ•°</strong>ï¼š1&lt;&lt;9</p><ul><li>  å³512ä¸ª</li></ul></li><li><p>  <strong>å ç”¨å†…å­˜</strong>ï¼š512*4 = 2048</p></li></ul><p><code>max_depth_</code>:é€šè¿‡page_id(32ä½)çš„é«˜max_depth_ä½ï¼Œæ¥åˆ¤æ–­page_idåœ¨directory_page_ids_ä¸­çš„ä½ç½®</p><ul><li>  <strong>å ç”¨å†…å­˜</strong>ï¼š4B</li></ul><h3 id="æ–¹æ³•å®ç°ï¼š"><a href="#æ–¹æ³•å®ç°ï¼š" class="headerlink" title="æ–¹æ³•å®ç°ï¼š"></a><strong>æ–¹æ³•å®ç°ï¼š</strong></h3><p>- [âœ…] <code>HashToDirectoryIndex(uint32_t hash)</code></p><ul><li>  é€šè¿‡æµ‹è¯•å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šè¯¥å‡½æ•°æ˜¯å°†hashçš„é«˜max_depth_ä½ï¼Œä½œä¸ºdirectory page idåœ¨æ•°ç»„directory_page_ids_çš„ç´¢å¼•</li><li>  å°†hashå‘å³ç§»åŠ¨<code>32-max_depth_</code>ä½ï¼Œå¯ä»¥è·å¾—é«˜<code>max_depth_</code>ä½å¯¹åº”çš„uint32_tè¡¨ç¤º</li></ul><p>- [âœ…] <code>MaxSize()ï¼š</code>Get the maximum number of directory page ids the header page could handle</p><ul><li><p>  ç”±äºdirectory_page_idsä¸­æ¯ä¸ªæ¡ç›®åªèƒ½å­˜æ”¾ä¸€ä¸ªpage idå…ƒç´ ï¼Œå› æ­¤directory_page_ids_æœ€å¤§èƒ½å­˜å…¥<code>HTABLE_HEADER_ARRAY_SIZE</code>directory page id</p></li><li><p>è€Œ<code>max_depth_</code></p><ul><li>  å¯¹äºçº¿æ€§æ¢æµ‹è§£å†³å†²çªçš„å“ˆå¸Œè¡¨ï¼šä¼šå†³å®š<code>directory_page_ids</code>çš„å¤§å°</li><li>  ä¸ä½¿ç”¨çº¿æ€§æ¢æµ‹è§£å†³å†²çªï¼šä¼¼ä¹å¹¶ä¸ä¼šå½±å“<code>directory_page_ids_</code>çš„å¤§å°ï¼Œ</li></ul></li><li><p>  æ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œ<code>Header Pages</code>å¹¶æ²¡æœ‰ä½¿ç”¨çº¿æ€§æ¢æµ‹ï¼Œå› æ­¤éœ€è¦è¿”å›<code>max_depth_</code>èƒ½è¡¨ç¤ºæ•°çš„æ•°é‡å’Œ<code>HTABLE_HEADER_ARRAY_SIZE</code>ä¹‹ä¸­çš„è¾ƒå°å€¼</p></li></ul><h2 id="Hash-Table-Directory-Pages"><a href="#Hash-Table-Directory-Pages" class="headerlink" title="Hash Table Directory Pages"></a>Hash Table Directory Pages</h2><h3 id="æˆå‘˜å˜é‡ï¼š-1"><a href="#æˆå‘˜å˜é‡ï¼š-1" class="headerlink" title="æˆå‘˜å˜é‡ï¼š"></a><strong>æˆå‘˜å˜é‡ï¼š</strong></h3><p><code>max_depth_</code>ï¼š</p><ul><li>  4B</li><li>  Header Pageçš„directory page idæ•°ç»„ä¸­æ‰€æœ‰çš„directory pageæ‹¥æœ‰ç›¸åŒçš„max_depthå€¼ï¼Œä»£è¡¨ä¸€ä¸ªdirectoryèƒ½å¤Ÿç”¨çš„æ©ç çš„æœ€å¤§ä½æ•°</li></ul><p><code>global_depth_</code>ï¼š</p><ul><li><p>  4B</p></li><li><p>ç±»ä¼¼äº: è¯¾æœ¬ä¸­çš„bucket address tableçš„global prefixï¼Œç”¨æ¥æ§åˆ¶å½“å‰tableä½¿ç”¨æ¡ç›®çš„æ•°é‡ï¼Œä¸Šé™æ˜¯2^max_depth_</p><ul><li>  å”¯ä¸€ä¸åŒçš„æ˜¯è¯¾æœ¬ä¸­çš„<code>prefix</code>ç”Ÿæˆçš„maskæ˜¯MSBï¼Œè€Œ<code>global_depth_</code>æ˜¯LSB</li></ul></li><li><p>  ç®€è€Œè¨€ä¹‹ï¼šglobal_depthç”¨æ¥æ©ç hash valueï¼Œä½¿å¾—å…¶åœ¨bucket_page_ids_æ•°ç»„ä¸­æœ‰ä¸€ä¸ªindex</p></li><li><p>  global_depth&lt;=max_depth_</p></li></ul><p><code>local_depth_s</code>ï¼šæ•°ç»„</p><ul><li>  1B * (Size of array of Bucket page id )</li><li>  ç±»ä¼¼äºï¼šè¯¾æœ¬ä¸­æ¯ä¸ªbucketæŒæœ‰çš„local prefixï¼Œç”¨æ¥æŒ‰éœ€ç”Ÿæˆbucketï¼Œè¿›è¡Œlocal prefixåæ‹¥æœ‰ç›¸åŒå€¼çš„entryæŒ‡å‘åŒä¸€ä¸ªbucket</li><li>  ç®€è€Œè¨€ä¹‹ï¼šlocal_depthç”¨æ¥æ©ç ï¼Œä½¿å¾—ç¡®å®šå…¶åœ¨å“ªä¸ªbucket pageä¸­</li></ul><p><code>bucket_page_ids_</code></p><ul><li>  å­˜å‚¨bucket page idçš„æ•°ç»„</li></ul><h3 id="æ–¹æ³•å®ç°ï¼š-1"><a href="#æ–¹æ³•å®ç°ï¼š-1" class="headerlink" title="æ–¹æ³•å®ç°ï¼š"></a><strong>æ–¹æ³•å®ç°ï¼š</strong></h3><p>- [âœ…] <code>Init</code>:</p><ul><li>  åˆå§‹åŒ–æ‰€æœ‰æˆå‘˜å˜é‡</li></ul><p>- [âœ…] <code>HashToBucketIndex</code>:</p><ul><li><p><del>ç±»ä¼¼äº</del><code>Header Page</code><del>ä¸­çš„</del><code>HashToDirectoryIndex</code><del>ï¼Œåªä¸è¿‡æ©ç é•¿åº¦ä¸º</del><code>global_depth_</code></p><ul><li>  å®é™…ä¸Šä¸Header Pageä¸­çš„ä¸åŒ</li></ul></li><li><p><span style="background-color: #5fb23680">è¯¥å‡½æ•°å¹²å•¥ç”¨çš„</span></p><ul><li>  ç›´æ¥å¯¹directory pageå½“å‰èƒ½å¤Ÿä½¿ç”¨çš„entryæ•°é‡è¿›è¡Œå–ä½™</li><li>  å³ï¼š%Size()</li></ul></li></ul><p>- [âœ…] <code>GetSplitImageIndex</code>:</p><ul><li><p>åˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li>  local_depth_ == global_depth_</li><li>  local_depth_ &lt; global_depth_</li></ul></li><li><p>  è§‚å¯Ÿå¾—åˆ°ï¼Œå¯¹äºLSBæ©ç ï¼Œä¸ºäº†è·å¾—directoryæ‰©å±•åå½“å‰bucket_idxåˆ†è£‚åæ˜ åƒçš„ç´¢å¼•ï¼Œåªéœ€è¦å°†bucket_idxçš„ç¬¬æ–°global_depth_ä½å–åå³å¯</p></li><li><p>ä¸¤ç§æƒ…å†µå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªä½è¿ç®—æ¥è§£å†³</p><ul><li><p>åªéœ€è¦å¯¹åŸè¿›è¡Œsplitçš„bucket_idxè¿›è¡Œå¦‚ä¸‹ä½è¿ç®—</p><ul><li>  ç¬¬global_depth_+1ä½ä¸1å¼‚æˆ–</li><li>  å…¶ä»–ä½ä¸0å¼‚æˆ–</li></ul></li></ul></li></ul><p>- [âœ…] <code>SetLocalDepth</code></p><ul><li><p>åˆ†ä¸¤ç§æƒ…å†µ</p><ol><li><p>å¦‚æœæ–°<code>local_depth_</code>å¤§äº<code>global_depth_</code>åˆ™éœ€è¦split</p><ol><li><p>éœ€è¦å…ˆé€šè¿‡ä¸Šé¢çš„<code>GetSplitImageIndex</code>å¾—åˆ°split_bucket_idx</p><ol><li> ç„¶åè®¾ç½®split_bucket_idxå¯¹åº”çš„local_depthä¸ºæ–°local_depth</li></ol></li><li><p> æœ€åå°†æ—§bucketçš„local_depthè®¾ç½®ä¸ºæ–°local_depth</p></li></ol></li><li><p> å¦åˆ™ï¼Œæ­£å¸¸ç›´æ¥è®¾ç½®</p></li></ol></li></ul><p>- [âœ…] <code>IncrGlobalDepth</code></p><ul><li><p>éœ€è¦æ‰¾åˆ°å½“å‰directoryä¸­ï¼Œlocal_depthå°äºç­‰äºå½“å‰global_depthçš„é¡¹ï¼š</p><ul><li>  ä½¿å¾—å…¶split_entryæ‹¥æœ‰ç›¸åŒçš„bucket page idå’Œlocal_depth</li></ul></li></ul><p>- [âœ…] <code>DecrGlobalDepth</code></p><ul><li>  ç›´æ¥å°†indexåœ¨åŒºé—´[2^{global_depth-1}, 2^{global_depth}-1]çš„ä¸¤ä¸ªæ•°ç»„å…ƒç´ åˆå§‹åŒ–å³å¯</li></ul><p>- [âœ…] <code>GetGlobalDepthMask</code>:</p><ul><li>  é€šè¿‡æ³¨é‡Šæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ<code>global_depth_</code>æ˜¯ç”¨äºç”Ÿæˆ<code>LSB</code>è§„èŒƒçš„<code>lobal_depth_mask</code></li><li>  è€Œ<code>Header Page</code>ä¸­çš„<code>max_depth_</code>åˆ™æ˜¯ç”¨äºç”Ÿæˆ<code>MSB</code>çš„æ©ç </li></ul><p>- [âœ…] <code>GetLocalDepthMask</code>:</p><ul><li>  åŒç†</li></ul><p>- [âœ…] <code>CanShrink</code></p><ul><li><p>åˆ¤æ–­æ˜¯å¦å­˜åœ¨local_depthä¸global_depthç›¸åŒ</p><ul><li><p>å¦‚æœæ²¡æœ‰ï¼Œåˆ™è¯´æ˜æ‰€æœ‰&lt;bucket_idx, split_bucket_idx&gt;æ‰€åŒ…å«çš„bucket page idéƒ½ç›¸åŒ</p><ul><li>  å› æ­¤tableå¯ä»¥å»é™¤å†—ä½™éƒ¨åˆ†ï¼Œç¼©å°ä¸€å€</li></ul></li></ul></li></ul><h2 id="Hash-Table-Bucket-Page"><a href="#Hash-Table-Bucket-Page" class="headerlink" title="Hash Table Bucket Page"></a>Hash Table Bucket Page</h2><h3 id="æˆå‘˜å˜é‡ï¼š-2"><a href="#æˆå‘˜å˜é‡ï¼š-2" class="headerlink" title="æˆå‘˜å˜é‡ï¼š"></a><strong>æˆå‘˜å˜é‡ï¼š</strong></h3><p><code>size_</code>ï¼šThe number of key-value pairs the bucket is holding</p><p><code>max_size_</code>ï¼šThe maximum number of key-value pairs the bucket can handle</p><p><code>array_</code>ï¼šAn array of bucket page local depths</p><h3 id="æ–¹æ³•å®ç°"><a href="#æ–¹æ³•å®ç°" class="headerlink" title="æ–¹æ³•å®ç°"></a>æ–¹æ³•å®ç°</h3><p><code>Init</code>:</p><ul><li><p>  å¯¹max_size_åˆå§‹åŒ–</p></li><li><p>å¯¹äºarray_ä¸­çš„æ¯ä¸€ä¸ªpair&lt;Key, Value&gt;è¿›è¡Œåˆå§‹åŒ–</p><ul><li><p>æ³¨æ„éœ€è¦ä¸ºKeyå’ŒValueéƒ½æŒ‡å®šä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œè¡¨ç¤ºè¯¥éƒ¨åˆ†ä¸ºæ— æ•ˆ</p><ol><li><p>å¯ä»¥ç›´æ¥ä½¿ç”¨æ„é€ åˆ—è¡¨ï¼Œæ¥ç›´æ¥æ„é€ æ¨¡ç‰ˆç±»çš„ä¸´æ—¶å¯¹è±¡ï¼š</p><ol><li> Keyå¯ä»¥ä½¿ç”¨{-1}æ¥ä¸æµ‹è¯•ä¸­çš„i==0åŒºåˆ«ï¼ŒValueå¯ä»¥ç›´æ¥ä½¿ç”¨{}å› ä¸ºRIDçš„é»˜è®¤æ„é€ å‡½æ•°ä¼šä½¿ç”¨-1æ¥è¡¨ç¤ºæ— æ•ˆ</li></ol></li><li><p>æˆ–è€…ä½¿ç”¨æ¨¡ç‰ˆå‚æ•°ç±»å‹æ„é€ </p><ol><li> åŒç†</li></ol></li></ol></li></ul></li></ul><p><code>Lookup</code>:</p><ul><li><p>ä½¿ç”¨æ¨¡ç‰ˆç±»å¯¹è±¡cmpçš„é‡è½½å‡½æ•°()ï¼Œæ¥æ¯”è¾ƒKeyæ˜¯å¦ç›¸åŒ</p><ul><li>  è¿”å›0è¡¨ç¤ºç›¸åŒ</li></ul></li></ul><p>æ³¨æ„Insertå’ŒRemoveä¹‹åéœ€è¦å¯¹sizeè¿›è¡Œå¢å‡</p><h2 id="Tests-1"><a href="#Tests-1" class="headerlink" title="Tests"></a>Tests</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220149510.png" alt="local test"></p><h1 id="Task-3-Extenable-Hashing-Implementation"><a href="#Task-3-Extenable-Hashing-Implementation" class="headerlink" title="Task #3-Extenable Hashing Implementation"></a>Task #3-Extenable Hashing Implementation</h1><p>è¯¾æœ¬ä¸­çš„å®ç°æ­¥éª¤ï¼š<a href="https://zihao256.github.io/p/76b71367.html">Extendible Hash Table</a></p><p>æœ€å¥½ä¹Ÿæ˜¯å‚è€ƒç€æµ‹è¯•æ ·ä¾‹æ¥å®ç°</p><blockquote><p><span style="color: rgb(13, 13, 13)">Each extendible hash table header/directory/bucket page corresponds to the content (i.e., theÂ </span><code>data_</code>Â part) of a memory page fetched by the buffer pool.</p><p><strong>Every time you read or write a page, you must first fetch the page from the buffer pool (using its uniqueÂ <strong><code>page_id</code></strong>), reinterpret cast it the corresponding type, and unpin the page after reading or writing it.</strong></p><p>We strongly encourage you to <strong>take advantage of theÂ <strong><code>PageGuard</code></strong>Â APIs</strong> you implemented inÂ <strong><u>Task #1</u></strong>Â to achieve this.</p></blockquote><p><strong>å‡è®¾ï¼š</strong></p><ul><li>  åªæ”¯æŒunique keys</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><p>  éœ€è¦ä½¿ç”¨Task2ä¸­çš„ä¸‰ç§Pageç±»å’Œmeta dataï¼ˆpage id, global/local depthï¼‰æ¥å®ç°åŸºäºdiskçš„hash table</p></li><li><p>  ä¸å…è®¸ä½¿ç”¨å†…å­˜æ•°æ®ç»“æ„ä¾‹å¦‚unordered_map</p></li><li><p>  take a <code>Transaction*</code> with default value <code>nullptr</code>.</p></li></ul><pre><code>template &lt;typename KeyType, Â  Â  Â  Â  Â typename ValueType, Â  Â  Â  Â  Â typename KeyComparator&gt;</code></pre><ul><li><p>ä¸‰ç§ç±»å‹åœ¨Task #2çš„<code>Bucket Pages</code>ä¸­éƒ½è§è¿‡ï¼š</p><ul><li>  <code>KeyType</code>:<code>GenericKey</code></li><li>  <code>ValueType</code>:<code>RID</code></li><li>  <code>KeyComparator</code>: æ¯”è¾ƒä¸¤ä¸ªKeyçš„å¤§å°</li></ul></li></ul><blockquote><p>å®ç°<strong>bucket splitting/merging</strong> and <strong>directory growing/shrinking</strong></p></blockquote><h2 id="âœ…-Empty-Table"><a href="#âœ…-Empty-Table" class="headerlink" title="- [âœ…] Empty Table"></a>- [âœ…] Empty Table</h2><ul><li>  æ„é€ å‡½æ•°ä¸­æ–°å»ºä¸€ä¸ªHeader Pageï¼Œå¹¶Init</li><li>  é€šè¿‡å®ç°è¾…åŠ©å‡½æ•°<code>InsertToNewDirectory</code>å’Œ<code>InsertToNewBucket</code>æ¥å®ç°æŒ‰éœ€ç”ŸæˆBuckets</li></ul><h2 id="âœ…-Header-Indexing"><a href="#âœ…-Header-Indexing" class="headerlink" title="- [âœ…] Header Indexing"></a>- [âœ…] Header Indexing</h2><ul><li>  Hash(key)</li><li>  å¯¹hash valueè°ƒç”¨HashToDirectoryIndex</li></ul><h2 id="âœ…-Directory-Indexing"><a href="#âœ…-Directory-Indexing" class="headerlink" title="- [âœ…] Directory Indexing"></a>- [âœ…] Directory Indexing</h2><ul><li>  Hash(key)</li><li>  å¯¹hash valueè°ƒç”¨HashToBucketIndex</li></ul><h2 id="âœ…-Bucket-Splitting"><a href="#âœ…-Bucket-Splitting" class="headerlink" title="- [âœ…] Bucket Splitting"></a>- [âœ…] Bucket Splitting</h2><ul><li><p>æŒ‰ç…§è¯¾æœ¬ä¸Šçš„æ­¥éª¤æ¥å®ç°å³å¯</p><ul><li><p>å¯ä»¥é€šè¿‡å®ç°æºç ä¸­ç»™å®šçš„å·¥å…·å‡½æ•°<code>UpdateDirectoryMapping</code>æ¥è¾…åŠ©å®ç°</p><ul><li>  å¯èƒ½è¯¥å‡½æ•°å†…éƒ¨è°ƒç”¨äº†<code>MigrateEntries</code>å‡½æ•°ï¼Œä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰å®ç°ï¼Œç›´æ¥åœ¨<code>UpdateDirectoryMapping</code>ä¸­å®ç°äº†Rehashæ“ä½œ</li></ul></li></ul></li></ul><h2 id="Bucket-Merging"><a href="#Bucket-Merging" class="headerlink" title="- [ ] Bucket Merging"></a>- [ ] Bucket Merging</h2><ul><li>  ä¼¼ä¹æ²¡å¿…è¦å®ç°</li></ul><h2 id="Directory-Growing"><a href="#Directory-Growing" class="headerlink" title="- [ ] Directory Growing"></a>- [ ] Directory Growing</h2><ul><li>  å¯å®ç°å¯ä¸å®ç°</li></ul><h2 id="Directory-Shrinking"><a href="#Directory-Shrinking" class="headerlink" title="- [ ] Directory Shrinking"></a>- [ ] Directory Shrinking</h2><ul><li>  åªæœ‰å½“æ‰€æœ‰çš„local_depth_éƒ½å°äºglobal_depthæ—¶æ‰è¿›è¡Œ</li><li>  åœ¨<code>Task2</code>ä¸­å®ç°äº†ç›¸å…³æ“ä½œ</li></ul><p>æœ¬åœ°æµ‹è¯•ä¸­ä¼¼ä¹å¹¶æ²¡æœ‰æµ‹è¯•åˆ°<code>Bucket Merging</code>, <code>Directory Growing</code>å’Œ<code>Directory Shrinking</code>ï¼Œå› æ­¤æ— æ³•éªŒè¯å®ç°çš„æ­£ç¡®æ€§</p><h2 id="Tests-2"><a href="#Tests-2" class="headerlink" title="Tests"></a>Tests</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220211309.png" alt="local test"></p><h1 id="Task-4-Concurrency-Control"><a href="#Task-4-Concurrency-Control" class="headerlink" title="Task #4-Concurrency Control"></a>Task #4-Concurrency Control</h1><blockquote><ul><li><p><strong>Latch Crabbing</strong></p><ul><li>  The thread traversing the index should acquire latches on hash table pages as necessary to ensure safe concurrent operations, and should release latches on parent pages as soon as it is possible to determine that it is safe to do so.</li></ul></li></ul></blockquote><blockquote><p>We recommend that you complete this task by using the <code>FetchPageWrite</code> or <code>FetchPageRead</code> buffer pool API</p></blockquote><blockquote><p><strong><span style="color: rgb(13, 13, 13)"><span style="background-color: #ff666680">Note</span>:</span></strong><span style="color: rgb(13, 13, 13)">Â You should never acquire the same read lock twice in a single thread. It might lead to deadlock.</span></p><p><strong><span style="color: rgb(13, 13, 13)"><span style="background-color: #ff666680">Note</span>:</span></strong><span style="color: rgb(13, 13, 13)">Â You should make careful design decisions on latching.</span></p><ul><li>  <span style="color: rgb(13, 13, 13)">Always holding a global latch the entire hash table is probably not a good idea.</span></li></ul></blockquote><h2 id="PageGuard"><a href="#PageGuard" class="headerlink" title="PageGuard"></a>PageGuard</h2><p><code>Insert</code></p><ul><li>  çš„BasicPageå°½é‡æ›¿æ¢WritePageGuardï¼Œå…ˆä¸ç”¨Readï¼›</li></ul><p><code>GetValue</code>ï¼š</p><ul><li>  å¯ä»¥å…¨éƒ¨ä½¿ç”¨ReadGuard</li></ul><p><code>Remove</code>:</p><ul><li>  åªéœ€è¦å¯¹bucket pageä½¿ç”¨write guard</li></ul><p>éœ€è¦ä½¿ç”¨<code>Latch Crabbing</code>ç­–ç•¥æ¥å°½å¿«è€Œåˆå®‰å…¨åœ°é‡Šæ”¾çˆ¶Pageçš„Latch</p><ul><li><p><strong>Crabbing</strong>ï¼š</p><ul><li><p>  å…ˆè·å¾—header pageçš„page guard</p></li><li><p>ç„¶åå°è¯•è·å¾—directory pageçš„page guard</p><ul><li>  è‹¥æˆåŠŸè·å¾—ï¼Œç¡®ä¿ä¸ä¼šç”¨åˆ°headeræ—¶ï¼Œå†é‡Šæ”¾header pageçš„page guard</li></ul></li><li><p>å°è¯•è·å¾—bucket pageçš„page guard</p><ul><li>  è‹¥æˆåŠŸè·å¾—ï¼Œç¡®ä¿ä¸ä¼šç”¨åˆ°directoryæ—¶ï¼Œé‡Šæ”¾directory pageçš„page guard</li></ul></li></ul></li></ul><h2 id="ExtendibleHTableTest"><a href="#ExtendibleHTableTest" class="headerlink" title="ExtendibleHTableTest"></a><code>ExtendibleHTableTest</code></h2><p>å…ˆå°è¯•é€šè¿‡å•çº¿ç¨‹ï¼ŒéªŒè¯å®ç°<code>Insert</code>ï¼Œ<code>Remove</code>å’Œ<code>GetValue</code>ä¸ä¼šä½¿å¾—ä¸€ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªpageæ­»é”</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220232058.png" alt="local test"></p><h2 id="ExtendibleHTableConcurrentTest"><a href="#ExtendibleHTableConcurrentTest" class="headerlink" title="ExtendibleHTableConcurrentTest"></a>ExtendibleHTableConcurrentTest</h2><h3 id="InsertTest1"><a href="#InsertTest1" class="headerlink" title="InsertTest1"></a>InsertTest1</h3><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220240883.png" alt="local test"></p><h4 id="BUGs"><a href="#BUGs" class="headerlink" title="BUGs"></a>BUGs</h4><ul><li><p>- [âœ…] BUG</p><ul><li><p>  åœ¨Project #1ä¸­å›¾æ–¹ä¾¿ï¼Œåœ¨NewPageç›´æ¥ä½¿ç”¨äº†ä¸€æŠŠå‡½æ•°ç²’åº¦çš„é€’å½’é”lock_guard</p></li><li><p>å¯¼è‡´æœ‰ä¸€ç§æ­»é”çš„å¯èƒ½ï¼š</p><ul><li><p>  çº¿ç¨‹ä¸€å…ˆè°ƒç”¨Insertï¼Œå¹¶é€šè¿‡è°ƒç”¨FetchWritePageè·å¾—äº†page0ï¼ˆå³header page ï¼‰çš„WLatch</p></li><li><p>çº¿ç¨‹äºŒåè°ƒç”¨Insertï¼Œä¹Ÿå°è¯•é€šè¿‡è°ƒç”¨FetchWritePageè·å¾—page0ï¼Œä½†æ˜¯è¿›å…¥åˆ°FetchPageåå°è¯•è·å–page0çš„WLatchå¤±è´¥ï¼Œåªèƒ½waiting</p><ul><li>  æ³¨æ„ï¼Œæ­¤æ—¶çº¿ç¨‹äºŒæ‹¿åˆ°äº†BPMçš„é€’å½’é”lock_guard</li></ul></li><li><p>  çº¿ç¨‹ä¸€ç»§ç»­å®ŒæˆInsertï¼šå°è¯•InsertToNewDirectoryæ—¶ï¼Œå†…éƒ¨ä¹Ÿå°è¯•è°ƒç”¨NewWritePageè·å¾—bpmçš„é€’å½’é”ã€‚</p></li><li><p>  æœ€ç»ˆå¯¼è‡´äº†DeadLock</p></li></ul></li><li><p><strong>solution</strong>: å°†lock_guardæ¢ä¸ºunique_mutexï¼Œå¹¶æ‰‹åŠ¨åœ¨è·å¾—Pageçš„Latchä¹‹å‰è§£é”ï¼Œåœ¨Unlatchä¹‹ååŠ é”</p><ul><li><p>- [âœ…] æ–°BUG</p><ul><li><p>  <strong>æè¿°</strong>ï¼šä½¿ç”¨è¯¥æ–¹æ³•ä¼šå¯¼è‡´BPMçš„å¹¶å‘é—®é¢˜ï¼Œå¯èƒ½æ˜¯unlockä¹‹åè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†ç›¸åº”çš„éƒ¨åˆ†</p></li><li><p><strong>solution:</strong> èƒ½ç¡®ä¿BPM100åˆ†</p><ul><li>  ä¸ä½¿ç”¨é€’å½’é”ï¼Œä¸ä¸»åŠ¨unlockï¼Œ</li><li>  åªå¯¹NewPage, FetchPageå’ŒDeletePageåŠ é”ï¼Œ</li><li>  å¹¶ä¸”åœ¨FetchPageä¸­å¤„ç†å·²ç»åœ¨bufferpoolæƒ…å†µçš„åˆ†æ”¯ä¸­ä¸å¯¹PageåŠ é”</li></ul></li><li><p><span style="background-color: #ff666680">- [âœ…] æ–°BUG</span></p><ul><li><p><strong>æè¿°ï¼š</strong></p><ul><li><p>  çº¿ç¨‹ä¸€:Insert-&gt;WritePageGuard.Drop-&gt;guard.Drop-&gt;Unpin(is_dirty=true)â€”â€”waitingåœ¨Unpinè·å¾—BPMçš„latchæ­¥éª¤</p></li><li><p>çº¿ç¨‹äºŒ: Insert-&gt;FetchWritePageGuard-&gt;FetchPageâ€”â€”æ­£åœ¨FetchPageä¸­å°è¯•è¯»å‡ºæŸé¡µçš„æ•°æ®</p><ul><li>  æŠ¥å‡ºå¼‚å¸¸ï¼Œè¯»å‡ºçš„ä½ç½®ä¸ºç©ºæ•°æ®</li></ul></li></ul></li><li><p><span style="background-color: #2ea8e580">å°è¯•LogOut:</span></p><ul><li>  page id&gt;50å³è¶…è¿‡äº†buffer poolçš„å¤§å°ï¼ŒæŸæ¬¡æ–°å»ºpageä¼šå¯¼è‡´evcitæ—¶ï¼Œä¼šæœ‰ä¹‹å‰æŸä¸ªdirty pageå¹¶æ²¡æœ‰flushå›disk</li><li>  æŸæ¬¡NewPageæ—¶ï¼Œå¹¶æ²¡æœ‰å°†è¯¥dirty page flushå›diskï¼Œå¯èƒ½æ˜¯UnPinPageæ—¶æ²¡æœ‰æ ‡å¿—is_dirty_</li></ul></li><li><p>**<span style="background-color: #5fb23680">å¯èƒ½solution</span>**ï¼š</p><ul><li>  ä¸ä½¿ç”¨UpgradeWriteï¼Œè¯¥å‡½æ•°å®ç°æœ‰é—®é¢˜ï¼Œå¹¶æ²¡æœ‰åœ¨UpgradeæœŸé—´å¯¹pin_count_++ï¼Œå¯¼è‡´dropä¸­Unpinä¸­ä¸ä¼šå°†å…¶çš„is_dirtyå†™å…¥åˆ°pageçš„metadataä¸­</li></ul></li></ul></li><li><p><span style="background-color: #ff666680">- [âœ…] æ–°BUG</span></p><ul><li><p><strong>æè¿°ï¼š</strong></p><ul><li>  æ­»é”</li></ul></li><li><p><span style="background-color: #2ea8e580">å°è¯•Log Outçº¿ç¨‹ç¼–å·ï¼šå¯ä»¥ä½¿ç”¨</span><code>std::hash(std::this_thread::get_id())</code>è¿”å›å½“å‰çº¿ç¨‹çš„idï¼ˆhashåï¼‰</p><ul><li><p>  <img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220305729.png" alt="logs"></p></li><li><p>Debugè¿‡ç¨‹ä¸­å‘ç°<code>UnpinPage</code>å‡½æ•°åœ¨unpin page0ï¼ˆå³header pageï¼‰ï¼Œå¯¹å…¶å†…éƒ¨ä½¿ç”¨Pageçš„è¯»å†™é”æ˜¯å¤šæ­¤ä¸€ä¸¾çš„ï¼Œç”±äºåˆ¤æ–­pin_countçš„ç›®çš„å°±æ˜¯åˆ¤æ–­æ˜¯å¦æœ‰å¤šçº¿ç¨‹æ­£åœ¨ä½¿ç”¨è¯¥Pageï¼ˆè¯»æˆ–è€…å†™ï¼‰ã€‚é€šè¿‡BPMçš„çº¿ä¸Šæµ‹è¯•ä¹Ÿèƒ½è¯å®è¿™ä¸€ç‚¹</p><ul><li>  å¹¶ä¸”å°†Pageé”å»é™¤åï¼Œè¯¥BUGæ¶ˆå¤±</li></ul></li><li><p>  è¿™æ—¶æ‰æƒ³èµ·æ¥<code>header_page_guard.AsMut</code>å‡½æ•°å†…éƒ¨ä¼šè®¿é—®Pageçš„Data</p></li><li><p>  æ¨æµ‹æ˜¯ä¸¤ä¸ªçº¿ç¨‹åœ¨UnpinPageå’ŒAsMutä¸­æ€ç´¢äº†ï¼Ÿï¼Ÿï¼Ÿ</p></li></ul></li><li><p><strong>solution</strong>ï¼š</p><ul><li>  å»é™¤UnpinPageå†…éƒ¨çš„Pageé”</li></ul></li></ul></li></ul></li></ul></li></ul></li><li><p>- [âœ…] è¯¯ä»¥ä¸ºä¸ä¼šæœ‰non-unique keyï¼ŒåŸå…ˆå¤„ç†ç”±non-unique keyå¯¼è‡´çš„æ’å…¥å¤±è´¥ï¼Œç›´æ¥throwäº†</p><ul><li><blockquote><p>For this semester, the hash table is intend to support onlyÂ unique keys. This means that the hash table should return false if the user tries to insert duplicate keys.</p></blockquote></li><li><p><strong>solution</strong>: è¿”å›false</p></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220320327.png" alt="local test"></p><h3 id="InsertTest2"><a href="#InsertTest2" class="headerlink" title="InsertTest2"></a>InsertTest2</h3><p>Pass in one go !</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220329961.png" alt="local test"></p><h3 id="DeleteTest1"><a href="#DeleteTest1" class="headerlink" title="DeleteTest1"></a>DeleteTest1</h3><p>in one go +2 !!</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220341169.png" alt="local test"></p><h3 id="DeleteTest2"><a href="#DeleteTest2" class="headerlink" title="DeleteTest2"></a>DeleteTest2</h3><p>in one go +3 !!!</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/8ENSYGV8.png" alt="local test"></p><h3 id="MixTest1"><a href="#MixTest1" class="headerlink" title="MixTest1"></a>MixTest1</h3><p>in one go +4 !!!!</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220419956.png" alt="local test"></p><h3 id="MixTest2"><a href="#MixTest2" class="headerlink" title="MixTest2"></a>MixTest2</h3><p>in one go +5 !!!!!</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231030220431772.png" alt="local test"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> CMU15-445(2023FALL) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database System </tag>
            
            <tag> C++ </tag>
            
            <tag> Container </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Extendible Hash Table</title>
      <link href="p/76b71367.html"/>
      <url>p/76b71367.html</url>
      
        <content type="html"><![CDATA[<p>Extendible Hash Table</p><ul><li><p><strong>hash function</strong></p><ul><li>å¯¹äºç»™å®škeyç”Ÿæˆ32bitçš„å€¼</li></ul></li><li><p><strong>bucket address table</strong></p><ul><li>å¯¹äºæ¯ä¸ª32bitçš„hash valueï¼Œéƒ½æœ‰ä¸€ä¸ªtable entryç›¸å¯¹åº”</li><li>ä½†åœ¨æŸä¸€æ—¶åˆ»è¯¥tableçš„å®é™…ä½¿ç”¨å¤§å°ç”±global prefixæ§åˆ¶</li></ul></li><li><p><strong>global prefixï¼šç”¨äºç”Ÿæˆglobal mask</strong></p><ul><li><p>åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œglobal prefixç”¨äºæ§åˆ¶å½“å‰bucket address tableå®é™…ä½¿ç”¨çš„å¤§å°</p><ul><li>å…·ä½“ä¸º2^(global prefix)ä¸ªæ¡ç›®</li></ul></li></ul></li><li><p><strong>local prefixï¼šç”¨äºç”Ÿæˆlocal mask</strong></p><ul><li><p>ä¸ä¼šä¸ºæ‰€æœ‰hash valueéƒ½ç”Ÿæˆä¸€ä¸ªbucketï¼Œè€Œæ˜¯æŒ‰éœ€ç”Ÿæˆ</p></li><li><p>ç”¨äºåˆ¤æ–­å½“å‰table entryæŒ‡å‘çš„bucket</p></li><li><p>å¦‚æœlocal prefix == glocal prefixï¼š</p><ul><li>åˆ™è¯´æ˜åªæœ‰è¯¥entryæ‹¥æœ‰æŒ‡å‘çš„bucket</li></ul></li><li><p>æŒ‰éœ€ä½“ç°åœ¨local prefix &lt; global prefix:</p><ul><li>æ‹¥æœ‰ç›¸åŒlocal prefixçš„entryæŒ‡å‘åŒä¸€ä¸ªbucket</li></ul></li></ul></li></ul><h1 id="Lookup"><a href="#Lookup" class="headerlink" title="Lookup"></a>Lookup</h1><p><strong>for lookupï¼š</strong>  </p><p>1. å¯¹Kè¿›è¡Œhashï¼Œå¾—åˆ°bä¸ª bitsåºåˆ—<br>2. é€šè¿‡b bitsçš„leftmost prefixe iï¼Œæ‰¾åˆ°å¯¹åº”çš„table entry<br>3. éå†å¯¹åº”entryæŒ‡å‘çš„bucketï¼Œæ‰¾åˆ°å¯¹åº”äºKçš„record</p><h1 id="Insertion"><a href="#Insertion" class="headerlink" title="Insertion"></a>Insertion</h1><p><strong>for insertion:</strong></p><p>1. é¦–å…ˆæŒ‰ç…§lookupæ­¥éª¤æ‰¾åˆ°å¯¹åº”çš„bucket</p><p>2. æŸ¥çœ‹bucketæ˜¯å¦full</p><p>â€‹    2.1 è‹¥éfullï¼Œåˆ™å¤„ç†æ¯”è¾ƒç®€å•ï¼Œ</p><p>â€‹    2.2 å¦åˆ™ï¼Œæ¯”è¾ƒbucketå¯¹åº”çš„i_jï¼Œå’Œtable prefix iï¼Œåšå‡ºåç»­ä¸¤ç§å¤„ç†æ–¹å¼</p><h2 id="i-i-j"><a href="#i-i-j" class="headerlink" title="i == i_j"></a>i == i_j</h2><p><strong>è¯´æ˜ï¼š</strong>bucket address tableä¸­åªæœ‰ä¸€ä¸ªentryæŒ‡å‘i_jå¯¹åº”çš„bucketï¼Œéœ€è¦å¢åŠ bucket address tableä¸­çš„sizeï¼ˆå¯ç”¨entry æ•°é‡ï¼‰å’Œbucketsæ•°é‡<br><strong>splitæ­¥éª¤ï¼š</strong><br>1. <strong>prefix ++ï¼š</strong>ä½¿å¾—tableä¸­å¯ç”¨çš„entryæ•°é‡æ‰©å±•ä¸ºåŸå…ˆçš„ä¸¤å€<br>2. <strong>replace each entry with two entries:</strong> æ­¤æ—¶ï¼Œæ¯ä¸¤ä¸ªentryåŒ…å«çš„pointeréƒ½æŒ‡å‘åŒä¸€ä¸ªbucket<br>3. <strong>allocate new bucket and set second entry to ponit to the new bucket</strong><br><strong>4. rehash all record in old buckets</strong><br><strong>5. reattempt the insertion of the new record</strong>  </p><ul><li><strong>successï¼šå¤§éƒ¨åˆ†æƒ…å†µ</strong>  </li><li><strong>failureï¼š</strong>å¦‚æœåœ¨old bucketä¸­çš„recordå’Œnew recordçš„å‰prefixä¸ªbitä»ç„¶ç›¸åŒï¼Œä¼šå¯¼è‡´old bucketä»ç„¶overflow  <ul><li>éœ€è¦å†æ¬¡split / ä½¿ç”¨overflow buckets like static hashing</li></ul></li></ul><h2 id="i-gt-i-j"><a href="#i-gt-i-j" class="headerlink" title="i &gt; i_j"></a>i &gt; i_j</h2><p><strong>è¯´æ˜ï¼š</strong>æŒ‰ç…§ä¸Šè¿°data structureçš„æè¿°ï¼Œè¯´æ˜bucket address tableä¸­æœ‰å¤šä¸ªentriesæŒ‡å‘i_jå¯¹åº”çš„bucketã€‚  </p><ul><li><strong>i_j:</strong> ä»£è¡¨bucket address tableä¸­leftmost i_j bitsç›¸åŒçš„entriesï¼ŒæŒ‡å‘j bucket  </li><li>ä»£è¡¨æ­¤æ—¶databaseä¸­ï¼Œè¯¥buckets splitçš„é€Ÿåº¦ä¸æ˜¯æœ€å¿«çš„ï¼Œå…¶ä»–bucketsçš„splitå¯¼è‡´prefix i&gt;i_jã€‚  </li></ul><ul><li><strong>split æ­¥éª¤ï¼š</strong>ä¸éœ€è¦æ‰©å±•prefixï¼Œå› ä¸ºbucket address tableè¶³å¤Ÿå¤§<br>1. <strong>allocate new bucket_z, set i_j and i_z with (original i_j + 1)</strong><br><strong>2. adjust the entries in the table:</strong> ç”±äºè°ƒæ•´äº†i_jå’Œi_zï¼Œè‡ªç„¶entriesåœ¨leftmost i_jä¼šä¸åŒï¼Œå› æ­¤entriesåº”è¯¥æŒ‰ç…§leftmost i_jæ¥æŒ‡å‘ä¸¤ä¸ªbuckets<br>3. <strong>rehash records in bucket_j</strong><br><strong>4. reattempt the insert:</strong> å¯èƒ½ä¼šfailureï¼ŒåŒä¸Šå¤„ç†</li></ul><h1 id="Deletion"><a href="#Deletion" class="headerlink" title="Deletion"></a>Deletion</h1><p><strong>1. remove both search key and recordã€‚å¦‚æœæ­¤æ—¶bucket emptyï¼Œåˆ™å°†bucketåˆ é™¤</strong><br><strong>2. åœ¨æŸç§æƒ…å†µä¸‹ï¼Œbucketså¯ä»¥åˆå¹¶ï¼Œå¹¶ä¸”table sizeå¯ä»¥ç¼©å‡ä¸ºåŸæ¥çš„ä¸€åŠ</strong></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> CMU15-445(2023FALL) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Container </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Project#1: Buffer Pool</title>
      <link href="p/1c228cd6.html"/>
      <url>p/1c228cd6.html</url>
      
        <content type="html"><![CDATA[<div class="note warning simple"><p><strong>æ’°å†™æœ¬æ–‡çš„ç›®çš„</strong>ï¼šè®°å½•æœ¬äººåœ¨ä¸å‚è€ƒå…¶ä»–ä»»ä½•å½¢å¼çš„è§£å†³æ–¹æ³•ï¼ˆæ€è·¯/æºç ï¼‰ã€ä»…é è¯¾ç¨‹æä¾›çš„èµ„æºï¼ˆè¯¾æœ¬/å‚è€ƒèµ„æ–™ï¼‰å’Œ<code>Discord</code>ä¸­<code>high level</code>çš„è®¨è®ºçš„æƒ…å†µä¸‹ï¼Œç‹¬ç«‹å®Œæˆè¯¥è¯¾ç¨‹çš„è¿‡ç¨‹ã€‚</p><p>æ¬¢è¿å¤§å®¶å’Œæˆ‘è®¨è®ºå­¦ä¹ ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ã€‚</p><p><del>ç”±äº<code>gradescope</code>ä¸­å¯¹<code>non-cmu students</code>ä»…å¼€æ”¾äº†<code>Project#0</code>ï¼Œæœ¬æ–‡æ–¹æ³•ä»…é€šè¿‡äº†æœ¬åœ°æµ‹è¯•ï¼Œææœ‰å¯èƒ½æœ‰é”™è¯¯ï¼ˆå¹¶å‘è®¿é—®ï¼‰</del></p><p>ç›®å‰é€šè¿‡äº†<code>GradeScope</code>æ‰€æœ‰æµ‹è¯•å¹¶ä¸”æ‹¿åˆ°äº†<code>100.0/100.0</code>ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·®ï¼ˆä¸<code>Leaderboard</code>ä¸Šç¬¬ä¸€åæœ‰åå€çš„æ€§èƒ½å·®è·)ï¼Œæ‰“ç®—åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹å¯¹<code>BPM</code>çš„æ€§èƒ½è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚æœ¬æ–‡ä¸­æåˆ°çš„<code>DiskScheduler</code>åˆ›å»ºçš„å¯¹<code>Request</code>çš„å¤„ç†<code>Thread</code>å®é™…ä¸Šæ˜¯ä¸²è¡Œçš„ï¼Œåç»­å†ä¿è¯é¡ºåºæ­£ç¡®çš„æƒ…å†µä¸‹å¯¹å…¶è¿›è¡Œé€‚å½“çš„å¹¶è¡Œå¤„ç†ã€‚</p></div><h1 id="Task-1-LRU-K-Replacement-Policy"><a href="#Task-1-LRU-K-Replacement-Policy" class="headerlink" title="Task#1 - LRU-K Replacement Policy"></a>Task#1 - LRU-K Replacement Policy</h1><p><strong>æ€è·¯ï¼š</strong></p><ul><li>åŸºæœ¬å¯ä»¥å‚è€ƒæºç ä¸­ç»™å‡ºçš„æ³¨é‡Šï¼Œä¸€æ­¥ä¸€æ­¥å®ç°</li><li>æ¯æ¬¡<code>RecordAccess</code>ä¸€ä¸ª<code>Frame</code>æ—¶ï¼Œéƒ½ä¼šä½¿å¾—<code>leu_replacer</code>çš„<code>current_timestamp_</code>è‡ªå¢1ï¼Œæ–¹ä¾¿æŒ‘é€‰è¢«<code>evict</code>çš„<code>frame</code>ã€‚</li><li>åœ¨è®¡ç®—<code>k backwrad distance</code>æ—¶ï¼Œä½¿ç”¨<code>UINT32_MAX</code>ä»£æ›¿é¢˜ç›®ä¸­æ‰€è¿°çš„<code>+inf</code></li><li>ç”±äº<code>LRUNode</code>çš„æˆå‘˜å˜é‡éƒ½æ˜¯ç§æœ‰æˆå‘˜ï¼Œé¢˜ç›®è§„å®šä¸èƒ½æ›´æ”¹å‡½æ•°æˆ–è€…æˆå‘˜çš„<code>signature</code>ï¼Œå› æ­¤éœ€è¦è‡ªå·±å®šä¹‰å¤šä¸ª<code>setter</code>å’Œ<code>getter</code>æ–¹æ³•</li><li>ä¸ºäº†æ–¹ä¾¿<code>Evict</code>æ–¹æ³•çš„å®ç°ï¼Œå¯ä»¥åœ¨<code>LRUNode</code>ä¸­å®ç°<code>GetKDistance</code>æ–¹æ³•</li></ul><h2 id="Size"><a href="#Size" class="headerlink" title="Size"></a>Size</h2><p>ç›´æ¥è¿”å›ç»´æŠ¤çš„<code>curr_size_</code>ã€‚</p><h2 id="RecordAccess"><a href="#RecordAccess" class="headerlink" title="RecordAccess"></a>RecordAccess</h2><ul><li>åˆ¤æ–­frame_idæ˜¯å¦æœ‰æ•ˆ</li><li>åˆ¤æ–­node_storeä¸­æ˜¯å¦å·²ç»å­˜åœ¨å¯¹åº”è¯¥frame_idçš„LRUNode<ul><li>è‹¥æœªå­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸´æ—¶LRUNodeï¼Œå¹¶æ›´æ–°nodeçš„è®¿é—®å†å²ï¼Œå°†å…¶æ’å…¥node_store_</li><li>è‹¥å·²ç»å­˜åœ¨ï¼Œåˆ™åªæ˜¯æ›´æ–°è®¿é—®å†å²</li></ul></li><li>lru_replacerçš„current_timestampè‡ªå¢1</li></ul><h2 id="SetEvictable"><a href="#SetEvictable" class="headerlink" title="SetEvictable"></a>SetEvictable</h2><p>æŒ‰ç…§æ³¨é‡Šä¸€æ­¥ä¸€æ­¥å®ç°ï¼Œéœ€è¦æ³¨æ„æ›´æ–°curr_size_</p><h2 id="Evict"><a href="#Evict" class="headerlink" title="Evict"></a>Evict</h2><ul><li>å®šä¹‰ä¸¤ä¸ªä¸´æ—¶å˜é‡è®°å½•æœ€å¤§çš„time stamp differenceå’Œå¯¹åº”çš„frame id</li><li>å®šä¹‰ä¸€ä¸ªvectorï¼Œè®°å½•æ‰€æœ‰k backward distanceä¸º+infçš„frame id</li><li>éå†ä¸€éframe node</li><li>é€šè¿‡æœ€å¤§çš„time stamp differenceï¼Œè‹¥ä¸º+infï¼Œåˆ™éå†vectoræ‰¾åˆ°earliest access historyä»¥åŠå¯¹åº”çš„frame id</li></ul><h2 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h2><p>æŒ‰ç…§æ³¨é‡Šå®ç°å³å¯</p><h2 id="Bugs"><a href="#Bugs" class="headerlink" title="Bugs"></a>Bugs</h2><p>- [âœ…] æœªç»™æ–¹æ³•ä¸­ä»»æ„ä½ç½®åŠ é”æ—¶èƒ½å¤Ÿé€šè¿‡æµ‹è¯•ï¼Œå¯èƒ½æœ¬åœ°æµ‹è¯•å¹¶æ²¡æœ‰æ¶‰åŠåˆ°å¯¹æŸä¸ªæˆå‘˜å˜é‡çš„ç«äº‰ã€‚ä½†æ˜¯åŠ é”åæµ‹è¯•å°±ä¼šå¡ä½</p><ul><li>ğŸ½ï¼Œç ´æ¡ˆäº†ï¼šåœ¨<code>SetEvictable</code>å‡½æ•°ä¸­ï¼Œä¸€å¼€å§‹å°±è·å¾—äº†latchï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åœ¨æ¯ä¸ªreturnåˆ†æ”¯é‡Šæ”¾latch</li></ul><h2 id="Tests"><a href="#Tests" class="headerlink" title="Tests"></a>Tests</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231003135918493.png" alt="lru_k_replacer_test result"></p><h1 id="Task-2-Disk-Scheduler"><a href="#Task-2-Disk-Scheduler" class="headerlink" title="Task#2 - Disk Scheduler"></a>Task#2 - Disk Scheduler</h1><p><strong>æ€è·¯ï¼š</strong></p><ul><li>å¯èƒ½æœ‰å¤šç§å®ç°æ–¹æ³•ï¼Œæˆ‘çš„æ€è·¯æ˜¯<code>Scheduler</code>æ–¹æ³•åªå°†ç»™å®šçš„<code>DiskRequest</code>å¯¹è±¡<code>put</code>è¿›<code>request_queue_</code>é˜Ÿåˆ—</li><li>è‡ªå·±å®ç°ä¸€ä¸ª<code>ProcessRequest</code>æ–¹æ³•ï¼Œç”¨äºå¯¹ç»™å®š<code>request</code>è°ƒç”¨<code>disk_manager</code>çš„è¯»å†™Pageæ–¹æ³•</li><li>è€Œ<code>StartWorkerThread</code>åˆ™åœ¨ææ„å‡½æ•°<code>put</code>ä¸€ä¸ª<code>std::nullopt</code>ä¹‹å‰ä¸€ç›´å¾ªç¯ï¼Œä»<code>request_queue_</code>ä¸­ä¸æ–­å–å‡º<code>request</code>å¹¶ä¸”é€šè¿‡<code>ProcessRequest</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥å®Œæˆå¯¹<code>request</code>çš„è¯»å†™</li></ul><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</strong></p><ul><li>é¦–å…ˆï¼Œé€šè¿‡<code>cppreference</code>ç†Ÿæ‚‰<code>std::promise</code>å’Œ<code>std::future</code>ç­‰æ¦‚å¿µ<ul><li>ä¸»è¦æ˜¯é€šè¿‡<code>__state</code>æˆå‘˜å˜é‡å®ç°<code>shared_memory</code>æ–¹å¼çš„çº¿ç¨‹é—´å¼‚æ­¥é€šä¿¡</li><li>éœ€è¦æ³¨æ„çš„æ˜¯åªèƒ½å¯¹<code>std::promise</code>å¯¹è±¡è°ƒç”¨ä¸€æ¬¡<code>get_future</code>æ–¹æ³•</li></ul></li><li>å…¶æ¬¡ï¼Œé€šè¿‡ç±»çš„<code>none-static</code>æ–¹æ³•åˆ›å»º<code>thread</code>æ—¶ï¼Œéœ€è¦æ³¨æ„æ˜¾ç¤ºåœ°ç»™å‡ºæ–¹æ³•åœ°å€ï¼Œå¹¶ä¸”ç»™å‡ºå¯¹è±¡åœ°å€ï¼Œæ¥ç€è¾“å…¥å‚æ•°</li></ul><p>è¿™é‡Œåªå†™ä¸€ä¸‹<code>StartWorkerThread</code>çš„å®ç°æ€è·¯</p><h2 id="StartWorkerThread"><a href="#StartWorkerThread" class="headerlink" title="StartWorkerThread"></a>StartWorkerThread</h2><p>å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ç»´æŠ¤äº†ä¸€ä¸ª<code>std::vector&lt;thread&gt;</code>æ¥å®ç°å¯¹æ‰€æœ‰<code>thread</code>çš„<code>join</code></p><ol start="0"><li>åœ¨DiskScheduler ææ„ä¹‹å‰ï¼šPut std::nulloptï¼Œ<ol><li>å¾ªç¯å¯¹request_queueä¸­çš„requeståˆ›å»ºthreadæ¥è¿›è¡Œprocessï¼š<ol><li>ä» request_queue_ ä¸­è·å¾—é˜Ÿä¼é¦–éƒ¨çš„request</li><li>åˆ›å»ºæ‰§è¡Œ  WritePage/ReadPageçš„ thread</li></ol></li><li>ç­‰å¾…thread join</li></ol></li></ol><h2 id="BUGs"><a href="#BUGs" class="headerlink" title="BUGs"></a>BUGs</h2><h2 id="âœ…-BUG-std-abort"><a href="#âœ…-BUG-std-abort" class="headerlink" title="- [âœ…] BUG: std::abort"></a>- [âœ…] BUG: std::abort</h2><blockquote><p><code>std::promise</code>åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ï¼š</p><ul><li>åªèƒ½è°ƒç”¨ä¸€æ¬¡<code>std::future</code>è·å¾—futureå¯¹è±¡</li></ul></blockquote><ul><li>åœ¨å¯¹<code>promise1</code>çš„<code>future1</code>è°ƒç”¨<code>get</code>å‡½æ•°åä¼šæŠ¥<code>std::abort()</code><ul><li>ä¸è°ƒç”¨future2çš„getæ—¶ä¹Ÿä¼šæŠ¥é”™</li></ul></li><li>å¯¹ç¬¬ä¸€ä¸ªrequeståˆ›å»ºå®Œç¬¬ä¸€ä¸ªthreadåï¼Œä¸çŸ¥ä¸ºä»€ä¹ˆ<code>WorkerThread</code>å°±å¡ä½äº†ï¼Œæ— æ³•å–å¾—ç¬¬äºŒä¸ªrequestå¹¶åˆ›å»ºç¬¬äºŒä¸ªthread</li><li>ä¼¼ä¹æ˜¯å› ä¸ºå°†<code>request</code>çš„å¼•ç”¨ä¼ è¿›äº†å­çº¿ç¨‹ä¸­ï¼Œä½†æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­éšç€æ‰§è¡Œå‡ºäº†ä½œç”¨åŸŸï¼Œ<code>request</code>è¢«ææ„äº†<ul><li>- [âœ…] å°è¯•ä¼ å…¥this_requestçš„ç§»åŠ¨</li></ul></li></ul><h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231003141429096.png" alt="disk_scheduler_test result"></p><h1 id="Task-3-Buffer-Pool-Manager"><a href="#Task-3-Buffer-Pool-Manager" class="headerlink" title="Task#3 - Buffer Pool Manager"></a>Task#3 - Buffer Pool Manager</h1><p>é€šè¿‡å‚è€ƒ<code>Page</code>ï¼Œ<code>LRU K Replacement Policy</code>å’Œ<code>Disk Scheduler</code>çš„æºç å®ç°ï¼Œå®Œæˆæ—¶è¿‡ç¨‹æ¯”è¾ƒæ›²æŠ˜ï¼ŒèŠ±äº†ä¸­ç§‹èŠ‚ä¸€ä¸‹åˆå’Œæ™šä¸Šå®Œæˆï¼Œå¹¶ä¸”åªé€šè¿‡äº†æœ¬åœ°æµ‹è¯•ï¼Œå¹¶å‘é—®é¢˜è‚¯å®šå¾ˆä¸¥é‡ã€‚ç­‰<code>gradescope</code>å¼€äº†å†ç»§ç»­å®Œå–„ã€‚</p><p>æºç ä¸­ç»™çš„æç¤ºè¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°ï¼Œå› æ­¤å®ç°è¿‡ç¨‹è™½ç„¶æ›²æŠ˜ä½†ä¹Ÿè¿˜ç®—é¡ºåˆ©ã€‚ä½†æœ‰ä¸€äº›æˆ‘è‡ªå·±è¸©è¿‡çš„å‘æˆ–bugï¼Œåœ¨æœ€åç»Ÿä¸€å†™å‡ºã€‚</p><h2 id="Learning-Note"><a href="#Learning-Note" class="headerlink" title="Learning Note"></a>Learning Note</h2><ul><li><p>å¦‚æœåœ¨ifä¹‹å‰å¯¹mutexè¿›è¡Œè¿‡lockï¼Œéœ€è¦åœ¨æ¯ä¸ªifåˆ†æ”¯ï¼ˆè‹¥æœ‰returnï¼‰ä¸­unlock</p></li><li><p>å¤šçº¿ç¨‹åœ¨è¿›è¡Œæ•°æ®åŒæ­¥çš„æ—¶å€™ï¼Œå¦‚è‹¥ä½¿ç”¨promiseå’Œfutureï¼Œä¸€å®šä¸è¦å¿˜äº†åœ¨æŒ‡å®šçº¿ç¨‹ä¸­ä½¿ç”¨futureå¯¹è±¡å®ä¾‹çš„getæ–¹æ³•ï¼Œç­‰å¾…çº¿ç¨‹ä»»åŠ¡çš„å®Œæˆ</p></li><li><p>DiskManager:</p><ul><li><p><code>WritePage(page_id_t page_id, const char *page_data)</code></p><ul><li>page_idï¼šDisk Pageçš„id</li><li>page_dataï¼šæ˜¯Memory buffer poolä¸­å­˜å‚¨Disk Pageæ‰€åœ¨frameçš„åœ°å€</li></ul></li><li><p><code>ReadPage(page_id_t page_id, char *page_data)</code></p><ul><li>page_id: Disk Pageçš„id</li><li>page_data: ä¹Ÿæ˜¯å°†Disk Pageè¯»å…¥å†…å­˜æ‰€åœ¨frameçš„åœ°å€</li></ul></li></ul></li></ul><p>ç»™å‡ºä¸€äº›æ¯”è¾ƒé‡è¦çš„å®ç°</p><h2 id="NewPage"><a href="#NewPage" class="headerlink" title="NewPage"></a>NewPage</h2><ol><li>é€šè¿‡free_list_åˆ¤æ–­æ˜¯å¦æœ‰frameä¸Šæ— page <ol><li>è‹¥free_listä¸Šæ— ï¼Œåˆ™é€šè¿‡replaceråˆ¤æ–­æ˜¯å¦æœ‰evictable frame<ol><li>è‹¥replaceræ— evictableï¼Œåˆ™è¿”å›nullptr</li><li>è‹¥æœ‰eviictableï¼ŒAllocatePage()è·å¾—æ–° page_idï¼Œè°ƒç”¨replacer.Evict()è·å¾—å¯¹åº”frame_idï¼Œ<br>åˆ¤æ–­frame_idå¯¹åº”çš„page_idçš„Page Objectæ˜¯å¦dirty<ol><li>è‹¥dirtyï¼Œåˆ™å°†å…¶å†™ä¼šDiskï¼Œå°†Page Objectç½®ç©º</li><li>è‹¥ä¸dirtyï¼Œåˆ™å°†Page Objectç½®ç©º<br>å°†ç½®ç©ºçš„Page Objectä¸æ–°page_idç»‘å®šï¼Œå°†page_idå’Œframe_idå­˜å…¥page_table<br>é€šè¿‡replacerå°†frame Pinï¼ˆevictable falseï¼‰</li></ol></li></ol></li><li>è‹¥free_listä¸Šæœ‰free frame for new page()<ol><li>è·å¾—free_frame_id</li><li>è·å¾—æ–°page_id</li><li>å°†ä¸ºpage_idè·å¾—Pageå¯¹è±¡</li><li>å°†page_idä¸frame_idç»‘å®š</li><li>å°†frame Pin</li></ol></li></ol></li></ol><h2 id="FetchPage"><a href="#FetchPage" class="headerlink" title="FetchPage"></a>FetchPage</h2><p>0  æŸ¥çœ‹buffer poolä¸­æ˜¯å¦æœ‰è¯¥Pageï¼Œé€šè¿‡GetPageByPageIdï¼Œ</p><p>è‹¥æœ‰ï¼Œåˆ™è¿”å›Page*</p><p>è‹¥æ— ï¼š</p><ol><li>æŸ¥çœ‹buffer poolä¸­æ˜¯å¦æœ‰ç©ºframeï¼Œå³free_list_ä¸Šæ˜¯å¦æœ‰frame_id<ol><li>è‹¥buffer poolä¸­æ— ç©ºframeï¼Œåˆ™é€šè¿‡replaceråˆ¤æ–­buffer poolä¸Šæ˜¯å¦æœ‰evictable frame<ol><li>è‹¥æ— evictableï¼Œåˆ™è¯´æ˜buffer poolä¸­æ²¡æœ‰è¯¥Pageï¼Œå¹¶ä¸”å› ä¸ºæ— evictableï¼Œä¹Ÿæ— æ³•ä»diskä¸­è¯»å…¥<ol><li>è¿”å›null_ptr</li></ol></li><li>è‹¥æœ‰evictable frameï¼Œ<ol><li>é€šè¿‡replacer evictè¯¥frameï¼Œå¹¶è·å¾—frame_id</li><li>åˆ¤æ–­frame_idå¯¹åº”çš„page_idçš„Page Objectæ˜¯å¦dirty<ol><li>è‹¥dirtyï¼Œåˆ™é€šè¿‡åˆ›å»ºDiskRequestï¼Œå°†å…¶å†™å›Diskï¼Œå¹¶å°†PageObjectç½®ç©º</li><li>è‹¥ä¸dirtyï¼Œåˆ™å°†Page Objectç½®ç©º</li></ol></li><li>åˆ›å»ºDiskRequestï¼Œå°†page_idå¯¹åº”Disk Pageä»Diskä¸­è¯»å‡ºåˆ°Buffer frameä¸­ï¼Œå¹¶ç”¨Page Objectç®¡ç†</li><li>å°†page_idä¸frame_idç»‘å®š</li><li>é€šè¿‡replacerå°†frame pin</li></ol></li></ol></li><li>è‹¥buffer poolä¸­æœ‰ç©ºframe<ol><li>è·å¾—free_frame_id</li><li>ä»pages_ä¸Šè·å¾—unused pageä½œä¸ºè¯»å…¥Disk Pageçš„ç®¡ç†Page</li><li>åˆ›å»ºrequestå°†pageè¯»å…¥ï¼Œå¹¶å°†ç®¡ç†pageçš„ä¿¡æ¯æ›´æ–°</li><li>å°†page_idä¸frame_idç»‘å®š</li><li>Pin frame</li></ol></li></ol></li></ol><h2 id="UnpinPage"><a href="#UnpinPage" class="headerlink" title="UnpinPage"></a>UnpinPage</h2><ol><li>åˆ¤æ–­page_idå¯¹åº”çš„Disk Pageæ˜¯å¦åœ¨bufferä¸­<ol><li>è‹¥ä¸åœ¨ï¼Œåˆ™è¿”å›false</li><li>è‹¥åœ¨ï¼Œå–å¾—è¯¥Pageå¯¹è±¡ï¼Œåˆ¤æ–­pin countæ˜¯å¦ä¸º0<ol><li>è‹¥ä¸º0ï¼Œåˆ™è¿”å›false</li><li>è‹¥å¦ï¼Œåˆ™é™ä½pin countï¼Œè‹¥é™ä½åä¸º0ï¼Œåˆ™è°ƒç”¨replacerè®¾ç½®frameä¸ºevictable<ol><li>æ ¹æ®å‚æ•°is_dirtyè®¾ç½®Pageå¯¹è±¡çš„is_dirtyæˆå‘˜</li></ol></li><li>è¿”å›true</li></ol></li></ol></li></ol><h2 id="DeletePage"><a href="#DeletePage" class="headerlink" title="DeletePage"></a>DeletePage</h2><ol><li>é¦–å…ˆåˆ¤æ–­page_idæ˜¯å¦åœ¨pages_ä¸­ï¼Œå³æ˜¯å¦åœ¨buffer poolä¸­<ol><li>è‹¥ä¸åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›true</li><li>è‹¥åœ¨ï¼Œåˆ™åˆ¤æ–­å…¶æ˜¯å¦pinned<ol><li>è‹¥pinnedï¼Œåˆ™è¯´æ˜æ— æ³•åˆ é™¤ï¼Œè¿”å›false</li><li>è‹¥ä¸æ˜¯pinnedï¼Œå¼€å§‹è¿›è¡ŒDeleteï¼š<ol><li>è·å¾—å…¶frame_idï¼Œå°†page_idä»page_tableä¸­åˆ é™¤</li><li>è°ƒç”¨replacerä¸å†trackè¯¥frameï¼Œå¹¶ä¸”å°†frameåŠ å…¥åˆ°free_listä¸­</li><li>resetå…¶å¯¹åº”çš„Pageå¯¹è±¡</li><li>è°ƒç”¨DeallocatePageé‡Šæ”¾Diskä¸Šçš„Page</li></ol></li></ol></li></ol></li></ol><h2 id="LearningNote"><a href="#LearningNote" class="headerlink" title="LearningNote"></a>LearningNote</h2><ul><li><p>å¦‚æœåœ¨ifä¹‹å‰å¯¹mutexè¿›è¡Œè¿‡lockï¼Œéœ€è¦åœ¨æ¯ä¸ªifåˆ†æ”¯ï¼ˆè‹¥æœ‰returnï¼‰ä¸­unlock</p></li><li><p>å¤šçº¿ç¨‹åœ¨è¿›è¡Œæ•°æ®åŒæ­¥çš„æ—¶å€™ï¼Œå¦‚è‹¥ä½¿ç”¨promiseå’Œfutureï¼Œä¸€å®šä¸è¦å¿˜äº†åœ¨æŒ‡å®šçº¿ç¨‹ä¸­ä½¿ç”¨futureå¯¹è±¡å®ä¾‹çš„getæ–¹æ³•ï¼Œç­‰å¾…çº¿ç¨‹ä»»åŠ¡çš„å®Œæˆ</p></li><li><p>DiskManager:</p><ul><li><p><code>WritePage(page_id_t page_id, const char *page_data)</code></p><ul><li>page_idï¼šDisk Pageçš„id</li><li>page_dataï¼šæ˜¯Memory buffer poolä¸­å­˜å‚¨Disk Pageæ‰€åœ¨frameçš„åœ°å€</li></ul></li><li><p><code>ReadPage(page_id_t page_id, char *page_data)</code></p><ul><li>page_id: Disk Pageçš„id</li><li>page_data: ä¹Ÿæ˜¯å°†Disk Pageè¯»å…¥å†…å­˜æ‰€åœ¨frameçš„åœ°å€</li></ul></li></ul></li></ul><h2 id="Bugs-1"><a href="#Bugs-1" class="headerlink" title="Bugs"></a>Bugs</h2><h3 id="âœ…-BUGï¼šåœ¨NewPageä¸­ç¬¬äºŒæ¬¡latch-lock-æ—¶ï¼Œdebugç¨‹åºä¸­æ–­"><a href="#âœ…-BUGï¼šåœ¨NewPageä¸­ç¬¬äºŒæ¬¡latch-lock-æ—¶ï¼Œdebugç¨‹åºä¸­æ–­" class="headerlink" title="- [âœ…] BUGï¼šåœ¨NewPageä¸­ç¬¬äºŒæ¬¡latch_.lock()æ—¶ï¼Œdebugç¨‹åºä¸­æ–­"></a>- [âœ…] BUGï¼šåœ¨NewPageä¸­ç¬¬äºŒæ¬¡latch_.lock()æ—¶ï¼Œdebugç¨‹åºä¸­æ–­</h3><ul><li>æŸ¥é˜…èµ„æ–™ï¼šå¯èƒ½æ˜¯ç”±äºåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¯¹éé€’å½’é”å¤šæ¬¡æ‰§è¡Œlockï¼Œå¯¼è‡´å¼‚å¸¸<ul><li>- [â] å°è¯•ä½¿ç”¨<code>recursive_lock</code></li><li>- [âœ…] ç ´æ¡ˆäº†ï¼Œæ˜¯å› ä¸ºæŸä¸ªå‡½æ•°ä¸­çš„ä¸€ä¸ªifæ¡ä»¶è¿”å›æ—¶å¿˜è®°é‡Šæ”¾latch_</li></ul></li></ul><h3 id="âœ…-BUGï¼šFlush-Dirty-Dataä¹‹åï¼ŒFetchä¸åˆ°åŸæ¥çš„æ•°æ®"><a href="#âœ…-BUGï¼šFlush-Dirty-Dataä¹‹åï¼ŒFetchä¸åˆ°åŸæ¥çš„æ•°æ®" class="headerlink" title="- [âœ…] BUGï¼šFlush Dirty Dataä¹‹åï¼ŒFetchä¸åˆ°åŸæ¥çš„æ•°æ®"></a>- [âœ…] BUGï¼šFlush Dirty Dataä¹‹åï¼ŒFetchä¸åˆ°åŸæ¥çš„æ•°æ®</h3><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/xx.png" alt="ğŸ½æ—¶åˆ»"></p><ul><li>[âœ…]emmmï¼Œä»promiseè·å¾—futureå¯¹è±¡åï¼Œå¿˜è®°ä½¿ç”¨getæ–¹æ³•ç­‰å¾…Requestçš„å®Œæˆï¼Œä½¿å¾—ä¸»çº¿ç¨‹åœ¨å­çº¿ç¨‹æœªå°†disk page contentå†™å…¥å†…å­˜ï¼Œå°±åˆ¤æ–­page contentæ˜¯å¦ç›¸åŒäº†</li></ul><h3 id="âœ…-BUGï¼šåœ¨åšTest2æ—¶åˆé‡åˆ°äº†ä¸Šè¿°é—®é¢˜"><a href="#âœ…-BUGï¼šåœ¨åšTest2æ—¶åˆé‡åˆ°äº†ä¸Šè¿°é—®é¢˜" class="headerlink" title="- [âœ…] BUGï¼šåœ¨åšTest2æ—¶åˆé‡åˆ°äº†ä¸Šè¿°é—®é¢˜"></a>- [âœ…] BUGï¼šåœ¨åšTest2æ—¶åˆé‡åˆ°äº†ä¸Šè¿°é—®é¢˜</h3><ul><li>æ£€æŸ¥å‡ºä¸€ä¸ªbugï¼šåœ¨NewPageä¸­ï¼Œå¦‚æœé€šè¿‡evictä¸€ä¸ªframeæ¥è…¾å‡ºä½ç½®ï¼Œéœ€è¦å°†åŸå…ˆold_pageä»page_tables_ä¸­åˆ é™¤</li><li>[âœ…] å‘ç°é”™å› ï¼š<ul><li>FlushPageæ—¶ï¼šå†™å›çš„åº”è¯¥æ˜¯old_page_idï¼Œè€Œæˆ‘åœ¨NewPageä¸­å¯¹DirtyPageè¿›è¡Œå†™å›æ—¶ï¼Œä¼ é€’çš„å®å‚æ—¶æ–°è¯»å…¥Pageçš„id</li></ul></li></ul><h2 id="Test-1"><a href="#Test-1" class="headerlink" title="Test"></a>Test</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231003143600916.png" alt="buffer_pool_manager_test result"></p><blockquote><p>è®°å½•é€šè¿‡<code>GradeScope</code>çº¿ä¸Šæµ‹è¯•çš„è¿‡ç¨‹</p></blockquote><h1 id="GradeScope"><a href="#GradeScope" class="headerlink" title="GradeScope"></a>GradeScope</h1><h2 id="Learning-Notes"><a href="#Learning-Notes" class="headerlink" title="Learning Notes"></a>Learning Notes</h2><blockquote><p>Try writing local test cases (it is faster and you learn more by doing so anyway), donâ€™t try to use gradescope as debugger</p><p>å¯ä»¥æ‰“logï¼Œä½¿å¾—gradescopeè¾“å‡ºï¼Œç„¶åå¤ç°test</p></blockquote><blockquote><p>dead lock &amp; possible synchronization problems</p><p>Like improper acquire &amp; release latches</p></blockquote><blockquote><ol><li>You can ensure no synchronization problem by using <code>std::scope_lock</code>, then if the segfault persists, check the other part of your program</li></ol></blockquote><blockquote><p>å…ˆé€šè¿‡<code>GradeScope</code>çš„åŸºç¡€æµ‹è¯•ï¼Œåç»­å†è€ƒè™‘åš<code>Leaderboard Task</code></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/advice.png" alt="advice"></p><blockquote><ol><li>assert() is an another one</li><li>[20:47]Sometimes the evaluation inside assertion will cause concurrency inconsistency</li></ol></blockquote><blockquote><p>Memory leaking can be detected by the sanitizer, if any log is printed under the test section on Gradescope</p></blockquote><blockquote><ol><li>Try writing some local tests to reproduce the case</li><li>[16:58]And you may recheck if the semantic of the function is consistent with handout</li><li>[16:59]As said here, Check your return value behavior for LRUKReplacer::Evict</li></ol></blockquote><blockquote><ol><li>The top submissions that I saw from students (in previous semesters) require a rethinking of data structures. It is helpful to have done something like cachelab from the prerequisite course: <a href="https://csapp.cs.cmu.edu/3e/cachelab.pdf" title="https://csapp.cs.cmu.edu/3e/cachelab.pdf">https://csapp.cs.cmu.edu/3e/cachelab.pdf</a> (å·²ç¼–è¾‘) You can go very far with the same algorithms ( <a href="https://codegolf.stackexchange.com/questions/215216/high-throughput-fizz-buzz/" title="https://codegolf.stackexchange.com/questions/215216/high-throughput-fizz-buzz/">https://codegolf.stackexchange.com/questions/215216/high-throughput-fizz-buzz/</a> comes to mind), but typically if you want to completely beat the performance of other similar solutions, youâ€™ll need to come up with an insight or idea that they donâ€™t have</li></ol></blockquote><blockquote><ol><li>You do not to need to lock the page when incrementing the pin_count_</li><li>[18:52]Instead you will want to do it using the latch of BPM</li></ol></blockquote><blockquote><ol><li>Please decouple the Page Latch versus the BPM Latch. The former one is needed when you perform operations on the inner Page Data.</li><li>You will NOT need to hold/acquire the Page Latch if you are going to increase the pin count, and race condition will be introduced if you do so.(why?)</li><li>Try rethink why we need the latch and in which case will the latch block your operations, especially between threads</li></ol></blockquote><blockquote><ol><li>Write your own test cases to try reproducing the failure cases.</li><li>You may add some logs, see the handout for details.</li></ol></blockquote><ul><li>åœ¨<code>buffer pool</code>ä¸­çš„<code>page</code>ä¹Ÿä¸€å®šåœ¨<code>page_table</code>ä¸­</li></ul><h2 id="Code-Format"><a href="#Code-Format" class="headerlink" title="Code Format"></a>Code Format</h2><blockquote><p>æ³¨æ„é¡¹ç›®è·¯å¾„ä¸è¦è¿‡é•¿ï¼Œå¦åˆ™ä¼š<code>make format</code>å¤±è´¥</p></blockquote><ul><li><code>make format</code>å¯ä»¥è‡ªåŠ¨æ›´æ”¹ä»£ç æ ¼å¼ï¼Œé™¤äº†ä¸€äº›å¿…é¡»æ”¹åŠ¨ä»£ç å†…å®¹çš„éœ€è¦é€šè¿‡<code>make check-clang-tidy-px</code>æ¥æ£€æµ‹å¹¶æ‰‹æ”¹ã€‚</li><li><code>do not use &#39;else&#39; after &#39;return&#39;ï¼š</code><ul><li><strong>ä¿é™©èµ·è§</strong>ï¼šæå‰å®šä¹‰ä¸€ä¸ªreturnå˜é‡ï¼Œæ¯ä¸ªifåˆ†æ”¯å¯¹å…¶è¿›è¡Œèµ‹å€¼ï¼Œæœ€åç»Ÿä¸€è¿”å›è¯¥å€¼<ul><li>å¯èƒ½ä¼šå¤šæ„é€ ä¸€æ¬¡ä¸´æ—¶å¯¹è±¡å®ä¾‹ï¼Œä½†æˆ‘è§‰å¾—æ— ä¼¤å¤§é›…ï¼Ÿ</li></ul></li><li>æŸäº›æƒ…å†µä¸‹å¯ä»¥ç›´æ¥åˆ é™¤else</li></ul></li></ul><h2 id="Tests-1"><a href="#Tests-1" class="headerlink" title="Tests"></a>Tests</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/First_submission.png" alt="First_submission"></p><p><strong>é—®é¢˜ï¼šä¸€ä¸ªä¸€ä¸ªè§£å†³å§</strong></p><ul><li><code>LRU Replacer</code><ul><li>å¹¶å‘è®¿é—®é—®é¢˜</li></ul></li><li><code>Disk Scheduler:</code>æ²¡é—®é¢˜</li><li><code>Buffer Pool Manager:</code>é—®é¢˜å¾ˆå¤š</li></ul><h3 id="LRUKReplacerTest-ConcurrencyTest"><a href="#LRUKReplacerTest-ConcurrencyTest" class="headerlink" title="LRUKReplacerTest.ConcurrencyTest"></a>LRUKReplacerTest.ConcurrencyTest</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&gt; ctest . -R ^LRUKReplacerTest.ConcurrencyTest$ --no-tests=error --verbose</span><br><span class="line">UpdateCTestConfiguration Â from :/autograder/source/bustub/build/DartConfiguration.tcl</span><br><span class="line">UpdateCTestConfiguration Â from :/autograder/source/bustub/build/DartConfiguration.tcl</span><br><span class="line">Test project /autograder/source/bustub/build</span><br><span class="line">Constructing a list of tests</span><br><span class="line">Done constructing a list of tests</span><br><span class="line">Updating test list for fixtures</span><br><span class="line">Added 0 tests to meet fixture requirements</span><br><span class="line">Checking test dependency graph...</span><br><span class="line">Checking test dependency graph end</span><br><span class="line">test 23</span><br><span class="line"> Â  Â Start 23: LRUKReplacerTest.ConcurrencyTest</span><br><span class="line"></span><br><span class="line">23: Test command: /autograder/source/bustub/build/test/grading_lru_k_replacer_test &quot;--gtest_filter=LRUKReplacerTest.ConcurrencyTest&quot; &quot;--gtest_also_run_disabled_tests&quot; &quot;--gtest_color=auto&quot; &quot;--gtest_output=xml:/autograder/source/bustub/build/test/grading_lru_k_replacer_test.xml&quot; &quot;--gtest_catch_exceptions=0&quot;</span><br><span class="line">23: Test timeout computed to be: 120</span><br><span class="line">23: Running main() from gmock_main.cc</span><br><span class="line">23: Note: Google Test filter = LRUKReplacerTest.ConcurrencyTest</span><br><span class="line">23: [==========] Running 1 test from 1 test suite.</span><br><span class="line">23: [----------] Global test environment set-up.</span><br><span class="line">23: [----------] 1 test from LRUKReplacerTest</span><br><span class="line">23: [ RUN Â  Â  Â ] LRUKReplacerTest.ConcurrencyTest</span><br><span class="line"></span><br><span class="line">Program exited with -1 in 15.018s (timed out after 10 secs, force kill)</span><br></pre></td></tr></table></figure><ul><li>- [âœ…] Deadlockï¼Ÿ<ul><li>å…ˆå°†<code>latch_</code>æŒæœ‰çš„ç²’åº¦æœ€å¤§åŒ–ï¼šå†…éƒ¨è®¿é—®<code>shared data structure</code>çš„å‡½æ•°éƒ½ä»ä¸€å¼€å§‹å°±<code>lock</code>ç›´åˆ°<code>return</code>ä¹‹å‰å†<code>unlock</code></li><li>æ¥ç€é€æ¸ç¼©å°<code>latch_</code>æŒæœ‰çš„ç²’åº¦</li><li>- [âœ…] ğŸ½ï¼šç ´æ¡ˆäº†ã€‚ã€‚ã€‚åˆæ˜¯å‡½æ•°ä¸­<code>if</code>çš„æŸä¸ªåˆ†æ”¯å¿˜è®°<code>unlock</code>ã€‚ã€‚ã€‚åç»­ä¸€å®šç‰¢è®°<ul><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/submission_after_solve_concurrencyTest.png" alt="submission_after_solve_concurrencyTest"></li></ul></li></ul></li></ul><h3 id="BufferPoolManagerTest"><a href="#BufferPoolManagerTest" class="headerlink" title="BufferPoolManagerTest"></a>BufferPoolManagerTest</h3><p>å¾ˆå¤šæµ‹è¯•æœªé€šè¿‡ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/BPMTest_failures.png" alt="BPMTest_failures"></p><p>one by one:</p><h4 id="FetchPage-1"><a href="#FetchPage-1" class="headerlink" title="FetchPage"></a>FetchPage</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">10: Test command: /autograder/source/bustub/build/test/grading_buffer_pool_manager_test &quot;--gtest_filter=BufferPoolManagerTest.FetchPage&quot; &quot;--gtest_also_run_disabled_tests&quot; &quot;--gtest_color=auto&quot; &quot;--gtest_output=xml:/autograder/source/bustub/build/test/grading_buffer_pool_manager_test.xml&quot; &quot;--gtest_catch_exceptions=0&quot;</span><br><span class="line">10: Test timeout computed to be: 120</span><br><span class="line">10: Running main() from gmock_main.cc</span><br><span class="line">10: Note: Google Test filter = BufferPoolManagerTest.FetchPage</span><br><span class="line">10: [==========] Running 1 test from 1 test suite.</span><br><span class="line">10: [----------] Global test environment set-up.</span><br><span class="line">10: [----------] 1 test from BufferPoolManagerTest</span><br><span class="line">10: [ RUN Â  Â  Â ] BufferPoolManagerTest.FetchPage</span><br><span class="line">10: /autograder/source/bustub/test/buffer/grading_buffer_pool_manager_test.cpp:355: Failure</span><br><span class="line">10: Expected equality of these values:</span><br><span class="line">10: Â  1</span><br><span class="line">10: Â  bpm-&gt;UnpinPage(page_ids[i], true)</span><br><span class="line">10: Â  Â  Which is: false</span><br><span class="line">10: </span><br><span class="line">10: [ Â FAILED Â ] BufferPoolManagerTest.FetchPage (0 ms)</span><br><span class="line">10: [----------] 1 test from BufferPoolManagerTest (0 ms total)</span><br><span class="line">10: </span><br><span class="line">10: [----------] Global test environment tear-down</span><br><span class="line">10: [==========] 1 test from 1 test suite ran. (0 ms total)</span><br><span class="line">10: [ Â PASSED Â ] 0 tests.</span><br><span class="line">10: [ Â FAILED Â ] 1 test, listed below:</span><br><span class="line">10: [ Â FAILED Â ] BufferPoolManagerTest.FetchPage</span><br><span class="line">10: </span><br><span class="line">10: Â 1 FAILED TEST</span><br><span class="line">10: </span><br><span class="line">10: =================================================================</span><br><span class="line">10: ==2680==ERROR: LeakSanitizer: detected memory leaks</span><br><span class="line">10: </span><br><span class="line">10: Indirect leak of 40960 byte(s) in 10 object(s) allocated from:</span><br><span class="line">10: Â  Â  #0 0x55e631f1ab7d in operator new[](unsigned long) (/autograder/source/bustub/build/test/grading_buffer_pool_manager_test+0x111b7d) (BuildId: bba925843ed9324ec5cf6b26d6f3b079c64b7e41)</span><br><span class="line">10: Â  Â  #1 0x55e631fbb4c0 in bustub::Page::Page() /autograder/source/bustub/src/include/storage/page/page.h:35:13</span><br><span class="line">10: Â  Â  #2 0x55e631fb7762 in bustub::BufferPoolManager::BufferPoolManager(unsigned long, bustub::DiskManager*, unsigned long, bustub::LogManager*) /autograder/source/bustub/src/buffer/buffer_pool_manager.cpp:36:12</span><br><span class="line">10: Â  Â  #3 0x55e631f2b83b in bustub::BufferPoolManagerTest_FetchPage_Test::TestBody() /autograder/source/bustub/test/buffer/grading_buffer_pool_manager_test.cpp:334:19</span><br><span class="line">10: Â  Â  #4 0x55e63206f55e in void testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::Test, void&gt;(testing::Test*, void (testing::Test::*)(), char const*) /autograder/source/bustub/third_party/googletest/googletest/src/gtest.cc:2670:12</span><br><span class="line">10: Â  Â  #5 0x55e63201c9cc in testing::Test::Run() /autograder/source/bustub/third_party/googletest/googletest/src/gtest.cc:2687:5</span><br><span class="line">10: Â  Â  #6 0x55e63201e854 in testing::TestInfo::Run() /autograder/source/bustub/third_party/googletest/googletest/src/gtest.cc:2836:11</span><br><span class="line">10: Â  Â  #7 0x55e632020077 in testing::TestSuite::Run() /autograder/source/bustub/third_party/googletest/googletest/src/gtest.cc:3015:30</span><br><span class="line">10: Â  Â  #8 0x55e632043c89 in testing::internal::UnitTestImpl::RunAllTests() /autograder/source/bustub/third_party/googletest/googletest/src/gtest.cc:5920:44</span><br><span class="line">10: Â  Â  #9 0x55e632075c43 in bool testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt;(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /autograder/source/bustub/third_party/googletest/googletest/src/gtest.cc:2670:12</span><br><span class="line">10: Â  Â  #10 0x55e632042fc2 in testing::UnitTest::Run() /autograder/source/bustub/third_party/googletest/googletest/src/gtest.cc:5484:10</span><br><span class="line">10: Â  Â  #11 0x55e6320cf620 in RUN_ALL_TESTS() /autograder/source/bustub/third_party/googletest/googletest/include/gtest/gtest.h:2317:73</span><br><span class="line">10: Â  Â  #12 0x55e6320cf5b1 in main /autograder/source/bustub/third_party/googletest/googlemock/src/gmock_main.cc:71:10</span><br><span class="line">10: Â  Â  #13 0x7fa693f2dd8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16</span><br></pre></td></tr></table></figure><ul><li>- [âœ…] <code>Unpin</code>ç›¸å…³æ“ä½œé€»è¾‘æœ‰<code>bug</code><ul><li>å½±å“<code>UnpinPage</code>é€»è¾‘çš„ä¸€äº›<code>shared data structure</code><ul><li><code>page_table_</code></li><li><code>Page::pin_count_</code><ul><li>- [â“] å°è¯•<code>NewPage</code>å’Œ<code>FetchPage</code>æ—¶ï¼Œéƒ½åˆå§‹åŒ–<code>pin_count_</code>ä¸º1ã€‚å¹¶ä¸”åœ¨<code>DeletePage</code>æ—¶ï¼Œå°†<code>Page::pin_count_</code>è®¾ç½®ä¸º0<ul><li>ä¿®æ”¹åé‡åˆ°æ–°bugï¼š  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">67: Note: Google Test filter = DiskSchedulerTest.ScheduleManyWrites</span><br><span class="line">67: [==========] Running 1 test from 1 test suite.</span><br><span class="line">67: [----------] Global test environment set-up.</span><br><span class="line">67: [----------] 1 test from DiskSchedulerTest</span><br><span class="line">67: [ RUN Â  Â  Â ] DiskSchedulerTest.ScheduleManyWrites</span><br><span class="line">67: /autograder/source/bustub/test/storage/grading_disk_scheduler_test.cpp:68: Failure</span><br><span class="line">67: Expected equality of these values:</span><br><span class="line">67: Â  std::memcmp(buf, data_pages[100 - 1], sizeof(buf))</span><br><span class="line">67: Â  Â  Which is: 8</span><br><span class="line">67: Â  0</span><br><span class="line">67: </span><br><span class="line">67: [ Â FAILED Â ] DiskSchedulerTest.ScheduleManyWrites (18 ms)</span><br><span class="line">67: [----------] 1 test from DiskSchedulerTest (18 ms total)</span><br><span class="line">67: </span><br><span class="line">67: [----------] Global test environment tear-down</span><br><span class="line">67: [==========] 1 test from 1 test suite ran. (18 ms total)</span><br><span class="line">67: [ Â PASSED Â ] 0 tests.</span><br><span class="line">67: [ Â FAILED Â ] 1 test, listed below:</span><br><span class="line">67: [ Â FAILED Â ] DiskSchedulerTest.ScheduleManyWrites</span><br><span class="line">67: </span><br><span class="line">67: Â 1 FAILED TEST</span><br></pre></td></tr></table></figure></li><li>å½±å“çš„æµ‹è¯•åº”è¯¥æ˜¯ä¸²è¡Œå¤šæ¬¡è¯»å†™ï¼Ÿå¯èƒ½æ˜¯é”™è¯¯ä¿®æ”¹äº†ä¸è¯¥ä¿®æ”¹çš„<code>page</code>çš„<code>dirty</code>/<code>pin_count_</code>å¯¼è‡´çš„</li><li>- [âœ…] å°è¯•ä¿®æ”¹<code>GetFreePageForPageId</code>ä¸­çš„<code>pin_count_</code>ä¸º1ï¼Œè§£å†³æ–°bugã€‚</li><li>ä¸ºä»€ä¹ˆåŒä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å¤šæ¬¡ï¼šæœ‰çš„æ—¶å€™ä¼š<code>fail</code> æœ‰çš„æ—¶å€™<code>pass</code>ï¼Ÿ<del>å¤ªç„å­¦äº†ï¼Ÿ</del></li></ul></li><li>- [âœ…] å°è¯•ä¿®æ”¹<code>FetchPage</code>ï¼šæ¯æ¬¡è®¿é—®åœ¨<code>BufferPool</code>ä¸­çš„Pageï¼Œéƒ½<code>access and pin_count_++</code><ul><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/submission_after_pass_FetchPageTest.png" alt="submission_after_pass_FetchPageTest"></li></ul></li></ul></li></ul></li></ul></li><li>- [âœ…] æœ‰å¾ˆä¸¥é‡çš„<code>Memory Leaks</code>ï¼š9å¤„ã€‚ã€‚ã€‚ğŸ½<ul><li>é€šè¿‡æ›´æ”¹<code>FetchPage</code>çš„é€»è¾‘ï¼Œä¹Ÿå°†å…¶è§£å†³äº†ã€‚</li></ul></li></ul><h4 id="DeletePage-IsDirty-ConcurrencyTest"><a href="#DeletePage-IsDirty-ConcurrencyTest" class="headerlink" title="DeletePage/IsDirty/ConcurrencyTest"></a>DeletePage/IsDirty/ConcurrencyTest</h4><ul><li>æ˜¯å› ä¸º<code>FetchPage</code>å¤„ç†å­˜åœ¨äº<code>Buffer Pool</code>ä¸­Pageçš„é€»è¾‘æœ‰é—®é¢˜ï¼Œå¯¼è‡´äº†è¿™ä¹ˆå¤šæµ‹è¯•å¤±è´¥ã€‚</li><li>ä¸‹æ¬¡éœ€è¦è‡ªå·±å¤šå¤šæ€è€ƒäº†ï¼Œæ³¨é‡Šä¸å¯èƒ½åƒä¼ªä»£ç ä¸€æ ·å°†æ‰€æœ‰æƒ…å†µçš„å¤„ç†éƒ½å†™ä¸‹æ¥ï¼Œéœ€è¦è‡ªå·±çœŸæ­£ç†è§£è¿™ä¸ªå‡½æ•°åœ¨åšä»€ä¹ˆ<ul><li><code>FetchPage</code>å®é™…ä¸Šå°±æ˜¯<code>Execution Engine</code>è°ƒç”¨çš„ï¼Œç„¶åè°ƒç”¨<code>UnpinPage</code>æ¥å‘Šè¯‰<code>BPM</code>å®ƒå¯¹Pageæ˜¯å¦è¿›è¡Œ<code>Write</code>ï¼Œæ¥ç€<code>BPM</code>ä¼šå†³å®šè¯¥å¦‚ä½•å¤„ç†<code>Page</code>ä»¥åŠ<code>Replacer</code>ä¼šå¦‚ä½•å¤„ç†<ul><li>ç®€å•æ¥è¯´ï¼Œ<code>pin_count_</code>ç±»ä¼¼äº<code>reference_count</code>ï¼Œè€Œ<code>NewPage</code>,<code>FetchPage</code>ä¼šå¢åŠ <code>pin</code>ï¼Œè€Œ<code>UnpinPage</code>ä¼šç›¸åº”çš„å‡å°‘<code>pin</code></li></ul></li><li>å¯¹äºå·²ç»åœ¨<code>Buffer Pool</code>ä¸­çš„Pageï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ª<code>worker</code>æ­£åœ¨æˆ–è€…å·²ç»<code>fetch</code>ï¼Œå› æ­¤éœ€è¦<code>pin++</code>ï¼Œå¹¶ä¸”è°ƒç”¨<code>replacer</code>æ¥è®°å½•è®¿é—®log</li></ul></li><li>- [âœ…] å¯¹äºç›¸åŒçš„<code>submission file</code>ï¼Œ<code>ConcurrencyTest</code>ä¹Ÿä¼šæœ‰æ—¶å¤±è´¥æœ‰æ—¶æˆåŠŸï¼Œæä¸æ¸…æ¥šã€‚å¯èƒ½æ¯æ¬¡ç”¨äºæµ‹è¯•çš„æ•°æ®ä¸åŒï¼Ÿ<ul><li>éœ€è¦å…ˆæ‰©å¤§é”æŒæœ‰çš„èŒƒå›´/ç²’åº¦</li></ul></li></ul><h4 id="HardTests-1-4"><a href="#HardTests-1-4" class="headerlink" title="HardTests(1-4)"></a>HardTests(1-4)</h4><p>- [âœ…]<code>HardTest_1</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">15: Test command: /autograder/source/bustub/build/test/grading_buffer_pool_manager_test &quot;--gtest_filter=BufferPoolManagerTest.HardTest_1&quot; &quot;--gtest_also_run_disabled_tests&quot; &quot;--gtest_color=auto&quot; &quot;--gtest_output=xml:/autograder/source/bustub/build/test/grading_buffer_pool_manager_test.xml&quot; &quot;--gtest_catch_exceptions=0&quot;</span><br><span class="line">15: Test timeout computed to be: 120</span><br><span class="line">15: Running main() from gmock_main.cc</span><br><span class="line">15: Note: Google Test filter = BufferPoolManagerTest.HardTest_1</span><br><span class="line">15: [==========] Running 1 test from 1 test suite.</span><br><span class="line">15: [----------] Global test environment set-up.</span><br><span class="line">15: [----------] 1 test from BufferPoolManagerTest</span><br><span class="line">15: [ RUN Â  Â  Â ] BufferPoolManagerTest.HardTest_1</span><br><span class="line">15: ==587==ERROR: AddressSanitizer failed to allocate 0x13f000 (1306624) bytes at address fe7b62e4000 (errno: 12)</span><br><span class="line">15: ==587==ReserveShadowMemoryRange failed while trying to map 0x13f000 bytes. Perhaps you&#x27;re using ulimit -v</span><br><span class="line">1/1 Test #15: BufferPoolManagerTest.HardTest_1 ...Subprocess aborted***Exception: Â  4.57 sec</span><br></pre></td></tr></table></figure><p>- [âœ…] <code>HardTest_2 - 4</code></p><ul><li>- [ ] å’Œ<code>Address Sanitizer</code>ç›¸å…³ï¼Œå¯èƒ½æ˜¯<code>å†…å­˜æ³„æ¼</code>ï¼Ÿä¹Ÿå¯èƒ½æ˜¯<code>å¹¶å‘è®¿é—®å¯¼è‡´</code>çš„<ul><li>ä¼¼ä¹<code>FetchPage</code>å’Œ<code>UnpiPage</code>è¿˜æ˜¯æœ‰é—®é¢˜</li><li><code>page_table_</code>è®¿é—®æŠ›å‡ºäº†<code>out_of_range</code></li><li>- [â] ç»™LRUNodeè®¾ç½®é”<ul><li>ä½†å®é™…ä¸Š<code>Replacer</code>è‡ªå·±ç»´æŠ¤äº†ä¸€ä¸ªé”ï¼Œå¹¶ä¸”æˆ‘ä¹Ÿç»™æ¯ä¸ªæˆå‘˜å‡½æ•°ä¸Šäº†è¯¥é”ï¼Œä¸åº”è¯¥ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªLRUNode</li></ul></li><li>- [âœ…] å°è¯•æ‰©å¤§<code>BPM</code>ä¸­æ¯ä¸ªæ–¹æ³•æŒæœ‰<code>latch_</code>çš„èŒƒå›´ç²’åº¦<ul><li>æ‰©å¤§åˆ°æ•´ä¸ªå‡½æ•°æœŸé—´éƒ½æ‹¥æœ‰<code>latch_</code>ï¼Œæœ‰ä¸€å®šæ•ˆæœï¼Œä½†æ˜¯ä¸å¤šï¼Œè§£å†³äº†<code>FetchPage</code>å’Œ<code>UnpinPage</code>çš„é—®é¢˜<ul><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/submission_after_solve_FetchPage&UnpinPage.png" alt="submission_after_solve_FetchPage&amp;UnpinPage"></li></ul></li><li>- [âœ…] éœ€è¦è§£å†³å‡½æ•°è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…å¯èƒ½åŒæ—¶è·å¾—åŒä¸€ä¸ªé”ï¼šæ•ˆæœæ˜¾è‘—ã€‚<del>æ€§èƒ½å¯èƒ½æœ‰å¤§é—®é¢˜</del><ol><li><p>- [âœ…] é€’å½’é”/ScopeLock</p><ol><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/submission_after_pass_HardTest2_4.png" alt="submission_after_pass_HardTest2_4"></li></ol></li><li><p>- [ ] å…ˆé‡Šæ”¾å†è°ƒç”¨ï¼šå¯èƒ½ä¼šåœ¨é‡Šæ”¾ä¸è·å¾—ä¹‹é—´çš„ç©ºéš™å‘ç”Ÿç«äº‰</p></li></ol></li></ul></li></ul></li></ul><p>- [âœ…] è¿˜å‰©ä¸‹ä¸€ä¸ª<code>HardTest-1</code>ï¼šå¯èƒ½ç”±äº<code>Page</code>å¯¹è±¡çš„è¯»å†™é”æ²¡æœ‰æ­£ç¡®åœ°è·å–å’Œé‡Šæ”¾ï¼Œå¯¼è‡´æµ‹è¯•æ–‡ä»¶ä¸­çš„å†…å­˜æ³„æ¼ï¼Ÿ</p><ul><li><p>- [â] å°è¯•ä¿®æ”¹<code>BPM</code>å¯¹<code>Page</code>å¯¹è±¡è¯»å†™é”çš„æŒæœ‰èŒƒå›´ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>W</code>å’Œ<code>R</code>æ˜¯è¯»å†™é”çš„æ„æ€ï¼Œè€Œéä»<code>disk</code>ä¸­<code>read</code>æˆ–è€…<code>write</code></p><ul><li>ä¼šæœ‰è®¸å¤šè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…æŒæœ‰ç›¸åŒé”çš„é—®é¢˜ï¼šä½†è¿™æ¬¡æ˜¯è¯»å†™é”<ul><li>é”™è¯¯ï¼š<ul><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/error_protect_page1.png" alt="error_protect_page1"></li></ul></li><li>è·å¾—è¯»é”æœŸé—´ï¼Œåˆ›å»ºä¸´æ—¶å˜é‡è·å¾—éœ€è¦çš„å†…å®¹<ul><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/correct_protect_page.png" alt="correct_protect_page"></li></ul></li></ul></li></ul></li><li><p>- [âœ…] å…¶ä»–åŸå› ï¼šä»ç„¶æ˜¯<code>AddressSanitizer</code>ç›¸å…³é—®é¢˜ï¼š</p><ul><li><p>- [â] BPMä¸­æˆ‘è‡ªå·±å†™å·¥å…·å‡½æ•°éƒ½æ²¡æœ‰å¯¹Pageè¿›è¡Œè®¿é—®ä¿æŠ¤</p><ul><li>æ”¹äº†ï¼Œä½†ä»æ˜¯æ— æ³•é€šè¿‡è¯¥æµ‹è¯•</li></ul></li><li><p>- [â] <code>RecordAccess</code>ä¸­é€»è¾‘é”™è¯¯<code>invalid frame id</code></p><ul><li>ä¿®å¤äº†ï¼Œä½†æ˜¯å¯¹è¯¥é—®é¢˜æ— å½±å“</li></ul></li><li><p>- [âœ…] <code>replacer</code><strong>çš„å®ç°æœ‰é—®é¢˜</strong></p><ul><li>- [âœ…] <strong>æ²¡æœ‰ä¿è¯å¹¶å‘å®‰å…¨</strong>ï¼š<ul><li>- [âœ…] <code>replacer</code>ç»´æŠ¤ä¸€ä¸ª<code>scope latch</code></li><li>- [âœ…] <code>LRUNode</code>ç»´æŠ¤ä¸€ä¸ª<code>latch</code>å¹¶ä¸”å®šä¹‰å·¥å…·å‡½æ•°æ¥è·å–å’Œé‡Šæ”¾é”</li><li>- [âœ…] æˆå‘˜å˜é‡å«æœ‰<code>mutex</code>çš„ç±»ï¼Œä¸èƒ½è¿›è¡Œ<code>copy</code>ç­‰æ“ä½œï¼Œå› æ­¤æ— æ³•æ’å…¥<code>node_store&lt;frame_id, LRUNode&gt;</code>ä¸­<ul><li>éœ€è¦å°†è¯¥æ•°æ®ç»“æ„æ”¹ä¸º<code>node_store unordered_map&lt;frame_id, std::shared_ptr&lt;LRUNode&gt;&gt;</code></li></ul></li></ul></li><li>- [âœ…] ä¹‹å‰å¯¹<code>LRUNode</code> éƒ½æ˜¯æ„é€ ä¸´æ—¶å¯¹è±¡ï¼Œè¿™æ¬¡å°è¯•åœ¨<code>node_store</code>ä¸­ç»´æŠ¤æŒ‡é’ˆ<ul><li>- [âœ…] éœ€è¦<code>new</code>è·å¾—å †å†…å­˜ï¼Œ**å¿…é¡»æ˜¾å¼åœ°ä½¿ç”¨deleteé‡Šæ”¾: ä¸ç„¶ä¼šé€ æˆå†…å­˜æ³„æ¼,**æœ‰æ—¶å€™è®¤ä¸ºè‡ªå·±åœ¨æ‰€æœ‰åœ°æ–¹éƒ½ä½¿ç”¨äº†<code>delete</code>ä½†ä»ç„¶ä¼šæœ‰å†…å­˜æ³„æ¼ï¼Œè¿™æ—¶ä½¿ç”¨<code>smart pointer</code><ul><li><blockquote><p>åœ¨C++ä¸­ï¼Œå±€éƒ¨ç±»å¯¹è±¡å˜é‡å–åœ°å€å’Œä½¿ç”¨`new`æ“ä½œç¬¦æœ‰é‡è¦çš„åŒºåˆ«ã€‚è¿™åŒºåˆ«åœ¨äºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€å†…å­˜ç®¡ç†å’Œè®¿é—®æ–¹å¼ï¼š</p><p>1. <strong>å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p><p>Â  - <strong>å±€éƒ¨å¯¹è±¡å˜é‡å–åœ°å€</strong>ï¼šå½“ä½ å–ä¸€ä¸ªå±€éƒ¨å¯¹è±¡çš„åœ°å€ï¼Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä»—èµ–äºå…¶å®šä¹‰çš„ä½œç”¨åŸŸã€‚ä¸€æ—¦è¶…å‡ºè¯¥ä½œç”¨åŸŸï¼Œå¯¹è±¡å°†è¢«é”€æ¯ï¼Œä¸”ä½ çš„æŒ‡é’ˆå°†æˆä¸ºæ‚¬å‚æŒ‡é’ˆï¼ˆdangling pointerï¼‰ï¼Œå› ä¸ºå®ƒå¼•ç”¨çš„å†…å­˜å·²ç»é‡Šæ”¾ã€‚</p><p>Â  - <strong>ä½¿ç”¨new</strong>ï¼šä½¿ç”¨<code>new</code>åˆ›å»ºçš„å¯¹è±¡ä½äºå †å†…å­˜ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸåœ¨ä½ æ˜¾å¼è°ƒç”¨<code>delete</code>æ¥é‡Šæ”¾å†…å­˜ä¹‹å‰ä¼šä¸€ç›´å­˜åœ¨ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨è¶…å‡ºå®šä¹‰ä½œç”¨åŸŸçš„åœ°æ–¹ç»§ç»­è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œåªè¦ä½ å°å¿ƒç®¡ç†å†…å­˜ã€‚</p><p>2. <strong>å†…å­˜ç®¡ç†</strong>ï¼š</p><p>Â  - <strong>å±€éƒ¨å¯¹è±¡å˜é‡å–åœ°å€</strong>ï¼šä¸éœ€è¦æ˜¾å¼ç®¡ç†å†…å­˜ï¼Œå¯¹è±¡çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å¤„ç†çš„ã€‚</p><p>Â  - <strong>ä½¿ç”¨new</strong>ï¼šä½ éœ€è¦æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚ä½¿ç”¨<code>new</code>æ¥åˆ›å»ºå¯¹è±¡åï¼Œå¿…é¡»ä½¿ç”¨<code>delete</code>æ¥é‡Šæ”¾è¿™äº›å¯¹è±¡çš„å†…å­˜ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><p>3. <strong>è®¿é—®æ–¹å¼</strong>ï¼š</p><p>Â  - <strong>å±€éƒ¨å¯¹è±¡å˜é‡å–åœ°å€</strong>ï¼šä½ å¯ä»¥ç›´æ¥é€šè¿‡æŒ‡é’ˆæ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜å’Œæ–¹æ³•ï¼Œå°±åƒä½ è®¿é—®å…¶ä»–å¯¹è±¡ä¸€æ ·ã€‚</p><p>Â  - <strong>ä½¿ç”¨new</strong>ï¼šä½ åŒæ ·å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜å’Œæ–¹æ³•ï¼Œä½†ä½ å¿…é¡»ä½¿ç”¨ç®­å¤´è¿ç®—ç¬¦(<code>-&gt;</code>)ï¼Œå› ä¸ºä½ æ“ä½œçš„æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆã€‚</p><p>æ€»ä¹‹ï¼Œå–å±€éƒ¨å¯¹è±¡çš„åœ°å€å’Œä½¿ç”¨<code>new</code>éƒ½æœ‰å„è‡ªçš„ç”¨é€”å’Œé€‚ç”¨æƒ…å†µã€‚å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯¹è±¡åœ¨å‡½æ•°è°ƒç”¨ä¹‹åç»§ç»­å­˜åœ¨ï¼Œä½¿ç”¨<code>new</code>æ¥åœ¨å †ä¸Šåˆ†é…å†…å­˜å¯èƒ½æ˜¯ä¸€ä¸ªå¥½é€‰æ‹©ã€‚ä½†è¯·åŠ¡å¿…å°å¿ƒç®¡ç†å†…å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚å¦‚æœå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä»…åœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆï¼Œå–åœ°å€é€šå¸¸æ›´ä¸ºç®€å•å’Œå®‰å…¨ã€‚</p></blockquote></li></ul></li><li>- [âœ…] ç›´æ¥ä½¿ç”¨<code>shared_ptr</code>ï¼Œé¿å…<strong>å†…å­˜æ³„æ¼ã€‚</strong><del>å•Šï¼ŒçœŸé¦™</del></li></ul></li><li>ä½†ä»ç„¶æœªèƒ½è§£å†³`HardTest_1`çš„é—®é¢˜</li></ul></li><li><p>ğŸŒŸ- [âœ…] <code>disk_scheduler</code>çš„<strong>å®ç°æœ‰é—®é¢˜</strong>ï¼šå¶å°”ä¼šå‡ºç°<code>DiskSchedulerTest.ManyWriteTest</code>å¤±è´¥ï¼ŒæˆåŠŸå’Œå¤±è´¥é—´éš”å‡ºç°ï¼š<strong>äº‹å®è¯æ˜ï¼Œè¯¥Testçš„å†…å­˜æ³„æ¼é—®é¢˜æ˜¯ç”±äº</strong><code>Disk_Scheduler</code>çš„å®ç°æœ‰é—®é¢˜å¯¼è‡´çš„ï¼Œå¹¶éçœŸçš„æ˜¯å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p><ul><li>- [âœ…] <strong>ä¿è¯å¹¶å‘å®‰å…¨</strong>ï¼šåœ¨<code>backgroundThread</code>ä¸­åˆ›å»ºå¤šä¸ª<code>thread</code>ä¼šå¯¹<code>shared_data_structure</code>ç«äº‰ï¼Ÿ<ul><li>- [âœ…] ä¸éœ€è¦ç»™<code>Schedule</code>å’Œ<code>WorkThread</code>ä¸­åŠ é”ï¼Œå¯¹<code>request_queue</code>å¯¹è±¡æœ¬èº«è®¿é—®å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œå› æ­¤åªéœ€è¦ç»™<code>ProcessRequest</code>å¢åŠ è·å–é”å’Œé‡Šæ”¾é”</li></ul></li><li>ä½†ä»ç„¶æœªèƒ½è§£å†³<code>HardTest_1</code>çš„é—®é¢˜</li><li><strong>- [âœ…] ä»ç„¶æœ‰æå…¶ä½çš„æ¦‚ç‡å‡ºç°å¤±è´¥</strong><code>1/4</code><strong>?</strong><ul><li><strong>è¯»å†™ç›¸åŒPageçš„å¤šä¸ª</strong><code>thread</code><strong>æ— æ³•æŒ‰ç…§ç»™å®šé¡ºåºæ‰§è¡Œï¼š</strong><ul><li><strong>- [âœ…] å…ˆä½¿ç”¨</strong><code>join</code><strong>ä¸²è”æ‰§è¡Œï¼Œç¡®ä¿æ­£ç¡®æ€§ï¼š</strong></li></ul></li></ul></li></ul></li><li><p>- [â] æ‰“<code>logï¼Œå¤ç°test</code>ï¼šå¿…ç„¶æœ‰ç”¨ï¼ŒæŒç»­ä½¿ç”¨ing</p><ul><li><p>ç»è¿‡ä¸Šè¿°å¯¹<code>replacer</code>å’Œ<code>disk_schedular</code>çš„å®ç°ï¼Œ<code>HardTest_1</code>çš„ä¸¤ç§æŠ¥é”™ï¼š</p><ul><li>1.  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">15: Running main() from gmock_main.cc</span><br><span class="line">15: Note: Google Test filter = BufferPoolManagerTest.HardTest_1</span><br><span class="line">15: [==========] Running 1 test from 1 test suite.</span><br><span class="line">15: [----------] Global test environment set-up.</span><br><span class="line">15: [----------] 1 test from BufferPoolManagerTest</span><br><span class="line">15: [ RUN Â  Â  Â ] BufferPoolManagerTest.HardTest_1</span><br><span class="line">15: Stack trace (most recent call last) in thread 588:</span><br><span class="line">15: #20 Â  Object &quot;&quot;, at 0xffffffffffffffff, in </span><br><span class="line">15: =================================================================</span><br><span class="line">15: ==587==ERROR: AddressSanitizer: allocator is out of memory trying to allocate 0x36a8 bytes</span><br><span class="line">15: ==587==ERROR: AddressSanitizer failed to allocate 0x1000 (4096) bytes of InternalMmapVector (error code: 12)</span><br><span class="line">15: ERROR: Failed to mmap</span><br><span class="line">1/1 Test #15: BufferPoolManagerTest.HardTest_1 ...***Failed Â  Â 4.56 sec</span><br></pre></td></tr></table></figure></li><li><ol start="2"><li><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">15: Running main() from gmock_main.cc</span><br><span class="line">15: Note: Google Test filter = BufferPoolManagerTest.HardTest_1</span><br><span class="line">15: [==========] Running 1 test from 1 test suite.</span><br><span class="line">15: [----------] Global test environment set-up.</span><br><span class="line">15: [----------] 1 test from BufferPoolManagerTest</span><br><span class="line">15: [ RUN Â  Â  Â ] BufferPoolManagerTest.HardTest_1</span><br><span class="line">15: ==587==ERROR: AddressSanitizer failed to allocate 0x13f000 (1306624) bytes at address ff541264000 (errno: 12)</span><br><span class="line">15: ==587==ReserveShadowMemoryRange failed while trying to map 0x13f000 bytes. Perhaps you&#x27;re using ulimit -v</span><br><span class="line">1/1 Test #15: BufferPoolManagerTest.HardTest_1 ...Subprocess aborted***Exception: Â  4.64 sec</span><br></pre></td></tr></table></figure></li></ol><ul><li><code>errno</code>è¯´æ˜å†…å­˜ä¸è¶³ï¼Œ<code>gradescope</code>ä¸­åˆ†çš„è™šæ‹Ÿå†…å­˜ä¸è¶³ä»¥æ”¯æŒè¯¥æµ‹è¯•ï¼Œè¯´æ˜æˆ‘çš„ç¨‹åºåœ¨å†…å­˜ç®¡ç†ä¸Šé¢éœ€è¦æ”¹è¿›æˆ–è€…æœ‰æ¼æ´</li></ul></li></ul></li><li><p><code>log</code>:è¾“å‡ºï¼š</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">15: FetchPage invoke 2470</span><br><span class="line">15: UnpinPage: invoke 2470 0</span><br><span class="line">15: DeletePage: invoke 2470</span><br><span class="line">15: FetchPage invoke 8925</span><br><span class="line">15: UnpinPage: invoke 8925 0</span><br><span class="line">15: Del==587==ERROR: AddressSanitizer failed to allocate 0x13f000 (1306624) bytes at address fefff684000 (errno: 12)</span><br><span class="line">15: ==587==ReserveShadowMemoryRange failed while trying to map 0x13f000 bytes. Perhaps you&#x27;re using ulimit -v</span><br><span class="line">1/1 Test #15: BufferPoolManagerTest.HardTest_1 ...Subprocess aborted***Exception: Â  6.35 sec</span><br></pre></td></tr></table></figure></li><li><p><code>å¤ç°</code>ï¼š</p><ol><li>åˆ›å»º<code>10</code>å®¹é‡ï¼Œ<code>5</code>kçš„<code>BPM</code></li><li>é‡å¤ä¸‹åˆ—æ“ä½œï¼Œåˆ›å»º<code>10000</code>ä¸ªpageï¼š<ol><li>è¿ç»­è°ƒç”¨<code>NewPage</code> 10 æ¬¡ï¼Œè¿ç»­å¯¹ä¸Šè¿°pagesè°ƒç”¨<code>UnpinPage</code>10æ¬¡ï¼Œå‰5ä¸ª<code>is_dirty</code>ä¸º0ï¼Œå5ä¸ª<code>is_dirty</code>ä¸º1</li></ol></li><li>å¯¹<code>10000</code>ä¸ªpageé‡å¤ä¸‹åˆ—æ“ä½œï¼š<ol><li>è°ƒç”¨<code>FetchPage</code>ï¼Œè°ƒç”¨<code>UnpinPage</code>ï¼Œè°ƒç”¨<code>DeletePage</code></li></ol></li></ol></li><li><p>- [âœ…] <code>Ubuntu</code><strong>èƒ½æ”¯æŒ</strong><code>LLVM</code><strong>çš„å†…å­˜æ³„æ¼æ£€æµ‹ï¼Œä½†æ˜¯</strong><code>MacOS</code><strong>ä¸æ”¯æŒï¼š</strong></p><ul><li>å°è¯•<code>Ubuntu</code>æµ‹è¯•ä¸Šè¿°å¤ç°çš„Testï¼šå‘ç°å¹¶æ²¡æœ‰ä»»ä½•å†…å­˜æ³„æ¼</li></ul></li></ul></li><li><p>- [â] <code>pages_</code>çš„ç´¢å¼•æˆ‘æ²¡æœ‰å‡è®¾ä¸€å®šæ˜¯<code>frame_id</code>ï¼Œåªæ˜¯è°ƒç”¨è‡ªå·±å†™çš„å·¥å…·å‡½æ•°<code>GetFreePageForPageId</code>éå†<code>page_</code>å¹¶æ‰¾åˆ°ç¬¬ä¸€ä¸ª<code>PageId</code>ä¸º<code>Invalid</code>çš„<code>Page</code>å¯¹è±¡.</p><ul><li>- [â] å°è¯•å‡è®¾ï¼š<code>page_</code>çš„ç´¢å¼•å°±æ˜¯<code>frame_id</code>ï¼Œå¹¶ä¸”åˆ é™¤å·¥å…·å‡½æ•°<ul><li>- [â] <strong>æ­¤æ—¶ä¼šæœ‰å¾ˆå¤šä¹‹å‰é€šè¿‡çš„æµ‹è¯•æœªé€šè¿‡ï¼ˆåŒ…æ‹¬</strong><code>LRUReplace</code><strong>ï¼‰ï¼Œä¸æ¸…æ¥šä¸ºä»€ä¹ˆ</strong><ul><li>- [â] <code>LRUReplacerTest.Evict</code> è¯¥æµ‹è¯•ä¸­:<ul><li>æ–°å»ºä¸€ä¸ªå®¹é‡ä¸º<code>1000</code>ï¼Œkä¸º<code>3</code>çš„<code>replacer</code>ï¼Œç„¶åä¾æ¬¡ä»0åˆ°1000<code>RecordAccess</code>å¹¶ä¸”<code>SetEvictable</code>ï¼šä½†æ˜¯å‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">125SetEvictable: invoke 241 1</span><br><span class="line">21: Â curr_size:241</span><br><span class="line">21: not evictable -&gt; on</span><br><span class="line">21: Â curr_size:242</span><br><span class="line">21: 92RecordAccess invoke 242</span><br><span class="line">21: Â curr_size:242</span><br><span class="line">21: note exist</span><br><span class="line">21: Â curr_size:242</span><br><span class="line">21: 125SetEvictable: invoke 242 1</span><br><span class="line">21: Â curr_size:242</span><br><span class="line">21: not evictable -&gt; on</span><br><span class="line">21: Â curr_size:243</span><br><span class="line">21: 92RecordAccess invoke 243</span><br><span class="line">21: Â curr_[...(truncated)...] invoke 844 1</span><br><span class="line">21: Â curr_size:1000 </span><br><span class="line">21: Â curr_size:1000</span><br><span class="line">21: 92RecordAccess invoke 845</span><br><span class="line">21: Â curr_size:1000</span><br><span class="line">21: exist</span><br><span class="line">21: Â curr_size:1000</span><br><span class="line">21: 125SetEvictable: invoke 845 1</span><br><span class="line">21: Â curr_size:1000</span><br></pre></td></tr></table></figure><ul><li>- [â]å°è¯• <code>reproduce test</code><ul><li>å¤ç°æµ‹è¯•åœºæ™¯å±…ç„¶æ˜¯æ²¡é—®é¢˜çš„ï¼Œï¼Œï¼Œï¼Œå¾ˆå›°æƒ‘</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><p><strong>å¸å–çš„æ•™è®­</strong>ï¼š</p><ul><li>å…ˆç¡®ä¿å‰é¢çš„å®ç°æ˜¯æ­£ç¡®çš„ï¼šå¹¶å‘å®‰å…¨/çº¿ç¨‹æ‰§è¡Œé¡ºåºæ­£ç¡®ç­‰</li><li>åç»­å†åœ¨åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–:<ul><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/submission_after_pass_HardTest1.png" alt="submission_after_pass_HardTest1"></li><li><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/leaderborad_after_solve_HardTest_1.png" alt="leaderborad_after_solve_HardTest_1"></li></ul></li></ul></li><li><p>äº¤äº†100å¤šæ¬¡ï¼Œæ¢æ¥çš„100åˆ†ï¼Œ<del>æŠŠgradescopeå½“æˆdebugger</del></p><ul><li>è¿™è¿˜æ˜¯åœ¨æ‰“logå¹¶å¤ç°<code>Tests</code>çš„æƒ…å†µä¸‹</li><li>ä»Šåéœ€è¦é¿å…å¤šæ¬¡æäº¤</li></ul></li><li><p>é€šè¿‡æœ¬åœ°æµ‹è¯•+é€šè¿‡gradescopeï¼ˆä½æ€§èƒ½ï¼‰ä¸€å…±3+5å¤©</p></li></ul><h1 id="ä¸ªäººè®¤ä¸ºå¯ä»¥è¿›è¡Œçš„ä¼˜åŒ–"><a href="#ä¸ªäººè®¤ä¸ºå¯ä»¥è¿›è¡Œçš„ä¼˜åŒ–" class="headerlink" title="ä¸ªäººè®¤ä¸ºå¯ä»¥è¿›è¡Œçš„ä¼˜åŒ–"></a>ä¸ªäººè®¤ä¸ºå¯ä»¥è¿›è¡Œçš„ä¼˜åŒ–</h1><ol><li>- [ ] å½“å‰<code>DiskScheduler</code>ä¸­<code>BackgroundWorker</code>ä¸­åˆ›å»ºçš„çº¿ç¨‹æ˜¯ä¸²è¡Œï¼Œä¼˜åŒ–éœ€è¦åœ¨ç¡®ä¿é¡ºåºæ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œä½¿ä¹‹é€‚å½“å¹¶è¡Œæ‰§è¡Œ</li><li>- [ ] å¹¶å‘é—®é¢˜ï¼Œè™½ç„¶åœ¨åˆé€‚çš„åœ°æ–¹åŠ äº†é”ï¼Œä½†æ˜¯<code>latch_</code>æŒæœ‰çš„èŒƒå›´å¯ä»¥ç¼©å°<ul><li>- [ ] å½“å‰<code>DiskScheduler</code>ä¸­<code>BackgroundWorker</code>ä¸­åˆ›å»ºçš„çº¿ç¨‹æ˜¯ä¸²è¡Œï¼Œéœ€è¦åœ¨ç¡®ä¿é¡ºåºæ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œä½¿ä¹‹é€‚å½“å¹¶è¡Œæ‰§è¡Œ</li></ul></li><li>- [ ] æ”¹è¿›é€’å½’é”/scope_lockå¼€é”€</li><li>- [ ] Mutiple buffer pools: åˆ›å»ºå¤šä¸ªBuffer Poolsï¼Œå¹¶ä½¿ç”¨Hashingè¿›è¡Œæ§åˆ¶ç”¨å“ªä¸ªbuffer pool</li><li>- [ ] LRU Listï¼šæŒ‰ç…§k backward distanceçš„é¡ºåºå°†pagesä¸²è”èµ·æ¥</li><li>- [ ] Buffer Pool Passï¼šä½†æ˜¯æµ‹è¯•çš„è¯·æ±‚ä¿¡æ¯ä¸­ä¼¼ä¹æ²¡æœ‰æ ‡æ³¨æ˜¯ä»€ä¹ˆoperator</li></ol><p>å…·ä½“è§ä¸‹ä¸€ç¯‡æ–‡ç« </p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> CMU15-445(2023FALL) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database System </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Project#0: C++ Primer</title>
      <link href="p/6fa5e9a2.html"/>
      <url>p/6fa5e9a2.html</url>
      
        <content type="html"><![CDATA[<div class="note warning simple"><p><strong>æ’°å†™æœ¬æ–‡çš„ç›®çš„</strong>ï¼šè®°å½•æœ¬äººåœ¨ä¸å‚è€ƒå…¶ä»–ä»»ä½•å½¢å¼çš„è§£å†³æ–¹æ³•ï¼ˆæ€è·¯/æºç ï¼‰ã€ä»…é è¯¾ç¨‹æä¾›çš„èµ„æºï¼ˆè¯¾æœ¬/å‚è€ƒèµ„æ–™ï¼‰å’Œ<code>Discord</code>ä¸­<code>high level</code>çš„è®¨è®ºçš„æƒ…å†µä¸‹ï¼Œç‹¬ç«‹å®Œæˆè¯¥è¯¾ç¨‹çš„è¿‡ç¨‹ã€‚</p><p>æ¬¢è¿å¤§å®¶å’Œæˆ‘è®¨è®ºå­¦ä¹ ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ã€‚</p></div><h1 id="Task-1-Copy-On-Write-Trie"><a href="#Task-1-Copy-On-Write-Trie" class="headerlink" title="Task#1 - Copy-On-Write Trie"></a>Task#1 - Copy-On-Write Trie</h1><p>æŒ‰ç…§æºç ä¸­ç»™çš„æç¤ºå³å¯å®Œæˆ</p><p><strong>æ€»ä½“æ€è·¯</strong>ï¼šuse std::shared_ptr<const TrieNode> to traverse, then reuse nodes that do not need to be modified and use std::shared_ptr<TrieNode>  with Clone to build and modify memebers from the bottom up on nodes that need to be modified.</p><h2 id="Get"><a href="#Get" class="headerlink" title="Get"></a>Get</h2><p>Getå‡½æ•°å®ç°è¾ƒä¸ºç®€å•</p><h2 id="Put"><a href="#Put" class="headerlink" title="Put"></a>Put</h2><ol><li>éå†trieï¼Œåœ¨vectorä¸­å­˜å‚¨æ¯ä¸ªéå†è¿‡çš„TrieNodeï¼Œåˆ¤æ–­keyå¯¹åº”çš„nodeæ˜¯å¦å­˜åœ¨<ol><li>è‹¥å­˜åœ¨ï¼š<ol><li>åˆ™<strong>ç›´æ¥</strong>åˆ›å»ºä¸€ä¸ªæ–°çš„TrieNodeWithValueï¼ˆå¯èƒ½æœ‰å­©å­èŠ‚ç‚¹ï¼‰</li><li>å¹¶ä¸”åˆ©ç”¨vectoræ¥è‡ªåº•å‘ä¸Šä¾æ¬¡å¯¹æ¯ä¸ªnodeè¿›è¡Œç¿»æ–°ï¼Œåªèƒ½åˆ©ç”¨Clone() constå‡½æ•°ï¼Œ</li><li>è¯¥projectä¸­æ“ä½œçš„åŸºæœ¬ä¸Šéƒ½æ˜¯const TrieNode</li><li>åˆ©ç”¨æ–°rootåˆ›å»ºä¸€ä¸ªæ–°çš„Trieå¹¶è¿”å›</li></ol></li><li>è‹¥ä¸å­˜åœ¨ï¼š<ol><li>è‡ªåº•å‘ä¸Šåˆ›å»ºå¤šä¸ªå®Œå…¨æ–°çš„TrieNodeå’Œä¸€ä¸ªTrieNodeWithValueï¼ˆæ²¡æœ‰å­©å­èŠ‚ç‚¹ï¼‰</li><li>åˆ©ç”¨vectorè‡ªåº•å‘ä¸Šå¯¹new_nodeç¥–å®—çš„æ¯ä¸ªnodeè¿›è¡Œå¤ç”¨ï¼Œä¹Ÿåªä½¿ç”¨Clone()</li><li>åˆ©ç”¨æ–°rootåˆ›å»ºä¸€ä¸ªæ–°çš„Trieå¹¶è¿”å›</li></ol></li></ol></li></ol><h2 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h2><ol><li>éå†Trieï¼Œåœ¨vectorä¸­å­˜å‚¨æ¯ä¸ªéå†è¿‡çš„TrieNodeï¼Œåˆ¤æ–­keyå¯¹åº”çš„nodeæ˜¯å¦å­˜åœ¨<ol><li>è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›åŸæ¥çš„Trie</li><li>è‹¥å­˜åœ¨<ol><li>åˆ¤æ–­å…¶æ˜¯å¦ä¸ºnode_with_value<ol><li>è‹¥æ˜¯ï¼Œ<ol><li>åˆ¤æ–­è¯¥nodeæ˜¯å¦ä¸ºæœ‰children<ol><li>è‹¥æœ‰ï¼Œåˆ™æ ¹æ®cur_nodeåˆ›å»ºæ–°çš„trie_nodeï¼ˆæ— valueï¼‰ï¼Œå¹¶è‡ªè¯¥nodeå‘ä¸Šå¯¹æ¯ä¸ªnodeè¿›è¡ŒCloneå¤ç”¨, è¿”å›æ–°Trie</li></ol></li><li>è‹¥æ— ï¼Œåˆ™è‡ªè¯¥nodeå‘ä¸Šï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªnode_with_value<ol><li>åˆ¤æ–­æ˜¯å¦æœ‰node_with_value<ol><li>è‹¥æ— ï¼Œå¯¹rootè¿›è¡ŒCloneï¼Œå¹¶å°†mapä¸­ç›¸åº”çš„éƒ¨åˆ†ç½®ç©ºï¼Œè¿”å›åŒ…å«è¯¥æ–°rootçš„Trie</li></ol></li></ol></li><li>è‹¥æœ‰ï¼Œ<ol><li>å¯¹è¯¥node_with_valueè¿›è¡ŒCloneå¤ç”¨</li><li>å¹¶å°†è¯¥nodeæ‰€åœ¨çš„childç½®ç©º</li><li>è‡ªæ–°çš„node_with_valueå‘ä¸Šå¯¹nodeè¿›è¡ŒCloneå¤ç”¨</li></ol></li></ol></li><li>è‹¥ä¸æ˜¯ï¼Œåˆ™ä¸åšæ“ä½œï¼Œè¿”å›åŸTrie</li></ol></li></ol></li></ol></li></ol><h2 id="Tests"><a href="#Tests" class="headerlink" title="Tests"></a>Tests</h2><h3 id="trie-test"><a href="#trie-test" class="headerlink" title="trie_test"></a>trie_test</h3><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001163006844.png" alt="trie_test"></p><h3 id="trie-noncopy-test"><a href="#trie-noncopy-test" class="headerlink" title="trie_noncopy_test"></a>trie_noncopy_test</h3><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001163527645.png" alt="trie_noncopy_test"></p><h1 id="Task-2-Concurrent-Key-value-Store"><a href="#Task-2-Concurrent-Key-value-Store" class="headerlink" title="Task#2 - Concurrent Key-value Store"></a>Task#2 - Concurrent Key-value Store</h1><p>åŒä¸Šï¼ŒæŒ‰ç…§æºç ç»™å‡ºçš„ä¼ªä»£ç å®Œæˆå³å¯</p><h2 id="Get-1"><a href="#Get-1" class="headerlink" title="Get"></a>Get</h2><p>è¾ƒä¸ºç®€å•</p><h2 id="Put-1"><a href="#Put-1" class="headerlink" title="Put"></a>Put</h2><p>(0) è·å¾—write_lock_</p><p>(1) è·å¾—root_lock_ï¼Œæ‹¿åˆ°rootï¼Œç„¶åé‡Šæ”¾root_lock_</p><p>(2) è°ƒç”¨Trie::Put()ï¼Œåˆ¤æ–­rootèŠ‚ç‚¹æœ‰æ²¡æœ‰æ›´æ–°</p><ul><li>è‹¥æ›´æ–°äº†ï¼šè·å¾—root_lock_ï¼Œæ›´æ–°rootï¼Œé‡Šæ”¾root_lock_</li><li>è‹¥æ²¡æœ‰ï¼šåˆ™ç›´æ¥ç»“æŸ</li></ul><p>(3) é‡Šæ”¾write_lock_</p><h2 id="Remove-1"><a href="#Remove-1" class="headerlink" title="Remove"></a>Remove</h2><p>(0) è·å¾—write_lock_</p><p>(1) è·å¾—root_lock_ï¼Œæ‹¿åˆ°rootï¼Œç„¶åé‡Šæ”¾root_lock_</p><p>(2) è°ƒç”¨Trie::Put()ï¼Œåˆ¤æ–­rootèŠ‚ç‚¹æœ‰æ²¡æœ‰æ›´æ–°</p><ul><li>è‹¥æ›´æ–°äº†ï¼šè·å¾—root_lock_ï¼Œæ›´æ–°rootï¼Œé‡Šæ”¾root_lock_</li><li>è‹¥æ²¡æœ‰ï¼šåˆ™ç›´æ¥ç»“æŸ</li></ul><p>(3) é‡Šæ”¾write_lock_</p><h2 id="Tests-1"><a href="#Tests-1" class="headerlink" title="Tests"></a>Tests</h2><h3 id="trie-store-test"><a href="#trie-store-test" class="headerlink" title="trie_store_test"></a>trie_store_test</h3><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001163631391.png" alt="trie_store_test result"></p><h3 id="trie-store-noncopy-test"><a href="#trie-store-noncopy-test" class="headerlink" title="trie_store_noncopy_test"></a>trie_store_noncopy_test</h3><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001163712181.png" alt="trie_store_noncopy_test result"></p><h1 id="Task-3-Debugging"><a href="#Task-3-Debugging" class="headerlink" title="Task#3 - Debugging"></a>Task#3 - Debugging</h1><p>å¯ä»¥ä½¿ç”¨VSCodeæˆ–è€…Clionçš„CMake, Makeæ’ä»¶ç›´æ¥æ„å»ºã€ç”Ÿæˆæˆ–è€…è°ƒè¯•ç»™å®šçš„æµ‹è¯•ä»£ç </p><h1 id="Task-4-SQL-String-Functions"><a href="#Task-4-SQL-String-Functions" class="headerlink" title="Task#4 - SQL String Functions"></a>Task#4 - SQL String Functions</h1><p>å¯ä»¥åœ¨<code>plan_func_call.cpp</code>çš„<code>GetFuncCallFromFactory</code>å‡½æ•°ä¸­æ ¹æ®å½¢å‚<code>func_name</code>å’Œ<code>args</code>è¿”å›<code>std::shared_ptr&lt;StringExpression&gt;</code>æˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼Œå®å‚ä¸ºè¾“å…¥çš„å­—ç¬¦ä¸²å’Œè°ƒç”¨SQLå‡½æ•°çš„ç±»å‹(<code>StringExpressionType::Lower</code>æˆ–è€…<code>Upper</code>)ã€‚</p><p>è¿”å›çš„<code>StringExpression</code>å¯¹è±¡ç”±<code>string_expression.h</code>ä¸­çš„Computeå‡½æ•°è¿›è¡Œè§£æï¼Œå¹¶ä¸”åˆ¤æ–­ç±»å‹åå¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ï¼Œæœ€åè¿”å›å¤„ç†åçš„å­—ç¬¦ä¸²ã€‚</p><h2 id="Tests-2"><a href="#Tests-2" class="headerlink" title="Tests"></a>Tests</h2><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001164116523.png" alt="test1 result"></p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001164150326.png" alt="test2 result"></p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001164317119.png" alt="test3 result"></p><h1 id="GradeScope"><a href="#GradeScope" class="headerlink" title="GradeScope"></a>GradeScope</h1><p>ä¸çŸ¥ä¸ºä»€ä¹ˆæœ¬åœ°<code>make format</code>ä¼šæŠ¥å‡ºå¦‚ä¸‹é”™è¯¯ï¼Œå› æ­¤åªèƒ½é€šè¿‡<code>gradescope</code>æ¥çº æ­£æˆ‘çš„ä»£ç æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/bin/sh: -c: line 0: syntax error near unexpected token `(&#x27;</span><br><span class="line">/bin/sh: -c: line 0: `cd &quot;/Users/zihao/Library/CloudStorage/OneDrive-stu.xidian.edu.cn/StudyFiled/XDU_Postgraduate/Learning/Courses/15-445(fall23)/bustub-private/cmake-build-debug&quot; &amp;&amp; &quot;/Users/zihao/Library/CloudStorage/OneDrive-stu.xidian.edu.cn/StudyFiled/XDU_Postgraduate/Learning/Courses/15-445(fall23)/bustub-private/build_support/run_clang_format.py&quot; /opt/homebrew/opt/llvm@14/bin/clang-format /Users/zihao/Library/CloudStorage/OneDrive-stu.xidian.edu.cn/StudyFiled/XDU_Postgraduate/Learning/Courses/15-445(fall23)/bustub-private/build_support/clang_format_exclusions.txt --source_dirs /Users/zihao/Library/CloudStorage/OneDrive-stu.xidian.edu.cn/StudyFiled/XDU_Postgraduate/Learning/Courses/15-445(fall23)/bustub-private/src,/Users/zihao/Library/CloudStorage/OneDrive-stu.xidian.edu.cn/StudyFiled/XDU_Postgraduate/Learning/Courses/15-445(fall23)/bustub-private/test, --fix --quiet&#x27;</span><br><span class="line">ninja: build stopped: subcommand failed.</span><br></pre></td></tr></table></figure><p>è¢«<code>Format</code>æµ‹è¯•å¡äº†å¥½å‡ æ¬¡é›¶åˆ†ï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯å®Œæˆäº†ï¼å¾ˆæœ‰æˆå°±æ„Ÿï¼Œjust keep moving!</p><p><img src="https://cdn.jsdelivr.net/gh/ZiHao256/Gallery@master/uPic/2023/10/image-20231001164418561.png" alt="gradscope result"></p><blockquote><p>æ›´æ–°ï¼šå¯¹project1è¿è¡Œ<code>make format</code>æ—¶ï¼Œå‘ç°å¯èƒ½æ˜¯è·¯å¾„åç§°è¿‡é•¿ï¼Œæ”¹å˜é¡¹ç›®ä½ç½®ä¹‹åèƒ½å¤ŸæˆåŠŸ<code>make format</code>ã€‚ä¹‹å‰éƒ½æ˜¯è‡ªå·±äº²æ‰‹ä¸€ç‚¹ç‚¹æ”¹è¿‡æ¥çš„ã€‚ã€‚ã€‚è¢«è‡ªå·±è ¢å“­äº†</p></blockquote><h1 id="Learning-Notes"><a href="#Learning-Notes" class="headerlink" title="Learning Notes"></a>Learning Notes</h1><ul><li>what is <code>COW</code>: ref: (<a href="zotero://select/library/items/WHDTY9QP">â€œCopy-On-Writeâ€</a>)</li></ul><h2 id="Discordä¸Šè€å“¥å¯¹æˆ‘é—®é¢˜çš„å‹å¥½å›å¤"><a href="#Discordä¸Šè€å“¥å¯¹æˆ‘é—®é¢˜çš„å‹å¥½å›å¤" class="headerlink" title="Discordä¸Šè€å“¥å¯¹æˆ‘é—®é¢˜çš„å‹å¥½å›å¤"></a>Discordä¸Šè€å“¥å¯¹æˆ‘é—®é¢˜çš„å‹å¥½å›å¤</h2><blockquote><p>åœ¨è¿™é‡Œååˆ†æ„Ÿè°¢<code>golo</code>çš„å¸®åŠ©</p></blockquote><ul><li>There is a case where the TYPE of the <code>TrieNodeWithValue</code> differs from the TYPE of <code>TrieNode</code>, in which case it cannot be converted. Keep in mind <code>TrieNodeWithValue&lt;std::string&gt;</code> and <code>TrieNode&lt;uint32_t&gt;</code> are not convertable, for example.</li><li>When you create <code>new_node</code>, you need to <code>make_shared&lt;TrieNodeWithValue&gt;...</code> instead of <code>make_shared&lt;TrieNode&gt;...</code>.<ul><li>I think your <code>TrieNodeWithValue</code> is casted to <code>TrieNode</code> if you do <code>make_shared&lt;TrieNode&gt;...</code>, which you do not want</li></ul></li></ul><h2 id="Google-Coding-Format"><a href="#Google-Coding-Format" class="headerlink" title="Google Coding Format"></a>Google Coding Format</h2><ul><li>åŒç›®è¿ç®—ç¬¦ä¸¤è¾¹åŠ ç©ºæ ¼</li><li>if/else/foråé¢çš„æ‹¬å·ä¸¤ç«¯ç”¨ç©ºæ ¼éš”å¼€</li><li>è¿”å›å€¼ä¹‹åï¼Œä¸åº”æœ‰ç©ºè¡Œ</li><li>ä½¿ç”¨default constructoræ—¶ï¼Œå˜é‡ç´§è´´ç€æ‹¬å·</li><li>æ³¨æ„å£°æ˜æŒ‡é’ˆçš„æ—¶å€™<code>*</code>ä¸ç±»å‹åéš”ä¸€ç©ºæ ¼</li><li>æ¯ä¸ªstatementï¼ˆåŒ…æ‹¬æ³¨é‡Šï¼‰åé¢ä¸è¦æœ‰å¤šä½™çš„ç©ºæ ¼</li><li>æ³¨é‡Šä¸è¦å¤ªé•¿</li><li>èŠ±æ‹¬å·ä¹‹åæ¥æ³¨é‡Šï¼šä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼è¿æ¥</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> CMU15-445(2023FALL) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database System </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Paper Reading: TECCD: A Tree Embedding Approach for Code Clone Detection</title>
      <link href="p/42c77a0c.html"/>
      <url>p/42c77a0c.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ‘˜è¦-amp-å¼•è¨€"><a href="#æ‘˜è¦-amp-å¼•è¨€" class="headerlink" title="æ‘˜è¦ &amp; å¼•è¨€"></a>æ‘˜è¦ &amp; å¼•è¨€</h1><p>â€œAbstractâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 145</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=1&annotation=4FEHEQUE">pdf</a>) [<br><strong>æ‘˜è¦â€”â€”</strong><br><strong>backgroundï¼š</strong>  </p><ul><li>Code Clone Detection Techniquesï¼šè‡ªåŠ¨åŒ–çš„æ£€æµ‹æºç ä¸­é‡å¤æˆ–è€…é«˜åº¦ç›¸ä¼¼çš„ä»£ç ç‰‡æ®µï¼Œæé«˜ä»£ç çš„ç»´æŠ¤æ€§ã€å¯è¯»æ€§ç­‰ã€‚  </li><li>è¿‡å»çš„æŠ€æœ¯ï¼šåŸºäºå­—ç¬¦ä¸²åŒ¹é…ã€è¯­æ³•åˆ†æä»¥åŠæœºå™¨å­¦ä¹ æŠ€æœ¯ã€‚  </li></ul><p><strong>what</strong>ï¼š  </p><ul><li>è§£å†³ä»£ç å…‹éš†æ£€æµ‹  </li></ul><p><strong>how</strong>ï¼š  </p><ul><li>å¼•å…¥tree embeddingæŠ€æœ¯ï¼š<br>Â  1. è·å¾—ASTæ¯ä¸ªintermediate nodeçš„node vector<br>Â  2. ä»æ‰€ç›¸å…³çš„node vectorsé›†åˆç»„åˆå‡ºtree vector<br>Â  3. è®¡ç®—å‡ºtree vectorä¹‹é—´çš„æ¬§å¼å‡ ä½•è·ç¦»ï¼Œä½œä¸ºcode clonesçš„è¡¡é‡æ ‡å‡†  </li></ul><p><strong>novelty</strong>ï¼š  </p><ul><li>é¦–æ¬¡å¼•å…¥tree embeddingåˆ°ä»£ç å…‹éš†æ£€æµ‹ä¸­<br>]</li></ul><h2 id="embedding"><a href="#embedding" class="headerlink" title="embedding"></a>embedding</h2><h3 id="term-embedding"><a href="#term-embedding" class="headerlink" title="term-embedding"></a>term-embedding</h3><p>â€œterm-embeddingâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 145</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=1&annotation=WKIBFI2P">pdf</a>) ã€Œ<br><strong>embedding</strong>:  </p><ul><li>å°†ä¸€ç»„ç¦»æ•£çš„æ–‡æœ¬ç‰¹å¾ï¼ˆä¾‹å¦‚å•è¯æˆ–å­—ç¬¦ï¼‰æ˜ å°„åˆ°ä¸€ä¸ªå®æ•°åŸŸä¸Šçš„è¿ç»­å‘é‡çš„è¿‡ç¨‹ã€‚è¿™äº›å‘é‡é€šå¸¸å…·æœ‰å›ºå®šçš„é•¿åº¦ï¼Œå¹¶ä¸”åŒ…å«äº†ä¸åŸå§‹æ–‡æœ¬ç‰¹å¾ç›¸å…³çš„è¯­ä¹‰ä¿¡æ¯  </li><li>embeddingæŠ€æœ¯æ˜¯åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥ä»å¤§è§„æ¨¡æ•°æ®é›†ä¸­å­¦ä¹ åˆ°æ–‡æœ¬ç‰¹å¾ä¹‹é—´çš„å…³è”æ€§ï¼Œå¹¶å°†æ­¤ä¿¡æ¯ç¼–ç ä¸ºä½ç»´å‘é‡ã€‚é€šè¿‡ä½¿ç”¨embeddingæŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰æ•ˆåœ°è§£å†³æœºå™¨å­¦ä¹ ä¸­é«˜ç»´ç¨€ç–æ•°æ®çš„é—®é¢˜ï¼Œå‡å°‘ç‰¹å¾å·¥ç¨‹çš„å¤æ‚åº¦ï¼Œå¹¶æé«˜æ¨¡å‹çš„å‡†ç¡®ç‡å’Œæ•ˆç‡ã€‚  </li></ul><p><strong>term-embeddingï¼š</strong>  </p><ul><li>å°†æºä»£ç è¯­è¨€ä¸­çš„å•è¯ã€æ ‡è¯†ç¬¦å’Œç¬¦å·ç­‰è½¬æ¢ä¸ºä½ç»´ç‰¹å¾å‘é‡ã€‚  </li><li>è¿™äº›ç‰¹å¾å‘é‡å¯ä»¥åœ¨æœºå™¨å­¦ä¹ æ¨¡å‹ä¸­ä½¿ç”¨ï¼Œä»è€Œå¯¹ä»£ç è¿›è¡Œåˆ†ç±»æˆ–èšç±»ç­‰æ“ä½œ<br>ã€</li></ul><h3 id="tree-embedding"><a href="#tree-embedding" class="headerlink" title="tree-embedding"></a>tree-embedding</h3><p>â€œtree embedding techniqueâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 145</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=1&annotation=NK5S2J7A">pdf</a>) ã€Œ<br><strong>tree embedding</strong>ï¼š  </p><ul><li>å°†ä»£ç æŠ½è±¡ä¸ºæ ‘ç»“æ„ï¼Œå¹¶å°†å…¶åµŒå…¥åˆ°ä½ç»´ç©ºé—´ä¸­çš„æŠ€æœ¯ã€‚  </li><li>åœ¨æœ¬æ–‡ä¸­ï¼Œä½œè€…ä½¿ç”¨äº†ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰æ¥è¡¨ç¤ºæºä»£ç ï¼Œå¹¶é€šè¿‡tree embeddingå°†ASTæ˜ å°„åˆ°ä½ç»´ç©ºé—´ä¸­ã€‚<br>Â - è¿™ç§è¡¨ç¤ºæ–¹æ³•å¯ä»¥ä¿ç•™ä»£ç ä¸­çš„ç»“æ„ä¿¡æ¯ï¼Œä¾‹å¦‚è¯­å¥ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€å˜é‡ä¹‹é—´çš„å…³ç³»ç­‰<br>ã€</li></ul><h1 id="2-å‡†å¤‡å·¥ä½œ"><a href="#2-å‡†å¤‡å·¥ä½œ" class="headerlink" title="2 å‡†å¤‡å·¥ä½œ"></a>2 å‡†å¤‡å·¥ä½œ</h1><h2 id="Node2vec"><a href="#Node2vec" class="headerlink" title="Node2vec"></a>Node2vec</h2><p>â€œNode2vecâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 147</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=3&annotation=UHY77AZM">pdf</a>) ã€Œ<br>Node2Vecä½¿ç”¨ä¸€ä¸ª<strong>äºŒé˜¶æ®µ</strong>çš„æ–¹æ³•æ¥ç”Ÿæˆnode vectorï¼š<br>1. <strong>Random Walk</strong>ï¼š<br>Â  - åœ¨ç¬¬ä¸€é˜¶æ®µï¼ŒNode2Vecä»æ¯ä¸ªèŠ‚ç‚¹å¼€å§‹æ‰§è¡Œå¤šæ¬¡éšæœºæ¸¸èµ°ï¼Œå¾—åˆ°ä¸€ç³»åˆ—èŠ‚ç‚¹åºåˆ—ã€‚<br>Â  - é€šè¿‡æ§åˆ¶å‚æ•°på’Œqï¼ŒNode2Vecå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´æ¸¸èµ°çš„ç­–ç•¥ï¼Œå¹¶æ•æ‰ä¸åŒèŠ‚ç‚¹ä¹‹é—´çš„è¯­ä¹‰ç›¸ä¼¼æ€§å’Œç»“æ„ä¿¡æ¯ã€‚<br>2. <strong>Skip-Gramæ¨¡å‹</strong>ï¼š<br>Â  - åœ¨ç¬¬äºŒé˜¶æ®µï¼ŒNode2Vecä½¿ç”¨Skip-Gramæ¨¡å‹æ¥è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œå¹¶ç”Ÿæˆæ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºã€‚<br>Â  - å…·ä½“åœ°ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼ŒNode2Vecä½¿ç”¨å…¶ç›¸é‚»èŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºä½œä¸ºè¾“å…¥ï¼Œå¹¶å°è¯•é¢„æµ‹å½“å‰èŠ‚ç‚¹å‡ºç°åœ¨ç›¸é‚»èŠ‚ç‚¹åºåˆ—ä¸­çš„æ¦‚ç‡ã€‚<br>Â  - é€šè¿‡ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼ŒNode2Vecå¯ä»¥å­¦ä¹ æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºï¼Œä½¿å¾—ç›¸ä¼¼çš„èŠ‚ç‚¹åœ¨å‘é‡ç©ºé—´ä¸­æ›´æ¥è¿‘ã€‚<br>ã€</p><h1 id="3-æ–¹æ³•"><a href="#3-æ–¹æ³•" class="headerlink" title="3 æ–¹æ³•"></a>3 æ–¹æ³•</h1><h2 id="A-Pre-processing"><a href="#A-Pre-processing" class="headerlink" title="A. Pre-processing"></a>A. Pre-processing</h2><p>â€œOUR APPROACHâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 147</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=3&annotation=ZXEZRPJ9">pdf</a>) [<br><strong>TECCDçš„åŸºæœ¬ideaï¼š</strong>  </p><ul><li>åŸºäºcode structureä¿¡æ¯æ¥è¿›è¡Œdetect code clones<br>Â  - ä½¿ç”¨ASTä»£è¡¨æºç çš„ç»“æ„ä¿¡æ¯<br>Â  - åªè¿›è¡Œmethodçº§åˆ«çš„æ£€æµ‹ï¼Œå› æ­¤åªæ•è·methodçº§åˆ«çš„AST  </li><li>åŸºäºDLæŠ€æœ¯ï¼Œå°†ASTè½¬æ¢ä¸ºVector  </li><li>æ¯”è¾ƒVectorä¹‹é—´çš„æ¬§å¼è·ç¦»  </li></ul><p><strong>åŸºæœ¬æ­¥éª¤ï¼š</strong>  </p><ul><li><strong>pre- processing</strong>ï¼š<br>Â  - ç›®æ ‡ï¼šæ ¹æ®è®­ç»ƒè¯­æ–™åº“ä¸­çš„æºç ï¼Œç”Ÿæˆnode-vecotr dictionary  </li><li><strong>Step1</strong>:<br>Â  - ç›®æ ‡ï¼šè·å¾—ç›®æ ‡æºç ä¸­æ‰€æœ‰methodå¯¹åº”çš„ASTï¼Œå¹¶è·å¾—AST nodeé›†åˆï¼Œå»é™¤LeafNodeå’ŒStopNode  </li><li><strong>Step2</strong>:<br>Â  - ç›®æ ‡ï¼šé€šè¿‡ä½¿ç”¨sentence embeddingè½¬æ¢ä¸ºvectors  </li><li><strong>Step3</strong>:<br>Â  - ç›®æ ‡ï¼šè®¡ç®—å¹¶æ¯”è¾ƒAST vectorsä¹‹é—´çš„æ¬§å¼è·ç¦»ï¼Œæ®æ­¤è¿›è¡Œä»£ç å…‹éš†æ£€æµ‹<br>]</li></ul><h3 id="è·å¾—contextä¿¡æ¯"><a href="#è·å¾—contextä¿¡æ¯" class="headerlink" title="è·å¾—contextä¿¡æ¯"></a>è·å¾—contextä¿¡æ¯</h3><p>â€œObtain context informationâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 147</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=3&annotation=8W6PAN5B">pdf</a>) ã€Œ<br>ä¸ºäº†èƒ½å¤Ÿ<strong>åŒæ—¶æ•è·ASTä¸­çš„contextå’Œstructeä¿¡æ¯</strong>ï¼š  </p><ul><li>éœ€è¦ç»“åˆBFSå’ŒDFSï¼šå³randim walkç®—æ³•<br>Â  - BFSï¼šæ•è·å¤æ‚statementæˆ–expressionä¸­çš„structure<br>Â  - DFSï¼šæ•è·ä¸€äº›åŸºäºç®€å•æ–‡æ³•çš„derivation  </li><li>ä¸ºäº†å°†random walkç®—æ³•åº”ç”¨äºtreeï¼Œéœ€è¦ä¿®æ”¹ASTï¼Œåœ¨brother nodesä¹‹é—´åŠ å…¥directed edgesï¼Œæ–¹ä¾¿BFS-like traverse<br>ã€</li></ul><h3 id="Random-Walk"><a href="#Random-Walk" class="headerlink" title="Random Walk"></a>Random Walk</h3><p>â€œRandom Walkâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 148</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=4&annotation=6BSS6G9V">pdf</a>) ã€Œ<br><strong>Random Walkç®—æ³•</strong>ï¼š  </p><ul><li>ç»™å®šä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒå‡½æ•°P(ci=x | ci-1=v)ï¼Œç»™å®šå½“å‰èŠ‚ç‚¹vï¼Œè®¡ç®—ä¸‹ä¸€ä¸ªrandom walkä¸º(v, x)çš„æ¦‚ç‡  </li><li>(t, v)ä¸ºä¸Šæ¬¡è¿›è¡Œrandom walkçš„è¾¹  </li><li>På‡½æ•°å–å†³äº(t, x)çš„å…³ç³»<br>Â  - dtx=1è¡¨ç¤ºtå’Œxä¸ºçˆ¶å­<br>Â  - å¦åˆ™ï¼Œä¸ºbrother  </li><li>=1ä»£è¡¨BFS<br>ã€</li></ul><h3 id="Skip-Gramæ¨¡å‹"><a href="#Skip-Gramæ¨¡å‹" class="headerlink" title="Skip-Gramæ¨¡å‹"></a>Skip-Gramæ¨¡å‹</h3><p>â€œtraining corpus projects to train a Skip-gram model and obtain the node-vector dictionary.â€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 149</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=5&annotation=R3PZXMQR">pdf</a>) ã€Œ<br><strong>è®­ç»ƒSkip-Gramæ¨¡å‹ï¼š</strong>  </p><ul><li>é€šè¿‡Random Walkç®—æ³•è·å¾—æ‰€æœ‰ASTå¾—Sequenceså  </li><li>å°†Node Sequencesä½œä¸ºSkip-Gramæ¨¡å‹çš„è¾“å…¥ï¼Œå¹¶è·å¾—node-vector dictionary<br>ã€</li></ul><h3 id="Result-of-Context-Information-Capturing"><a href="#Result-of-Context-Information-Capturing" class="headerlink" title="Result of Context Information Capturing"></a>Result of Context Information Capturing</h3><p>â€œResults of Context Information Capturingâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 149</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=5&annotation=L495DK92">pdf</a>) ã€Œ<br>æœ€ç»ˆå¾—åˆ°çš„<strong>Node-Vector Dictionary</strong>ï¼Œä»£è¡¨çš„å«ä¹‰ï¼š  </p><ul><li>æœ‰ç€ç›¸ä¼¼contextå’Œstructureçš„AST Nodeï¼Œè¢«æ˜ å°„ä¸ºæœ‰ç€æ›´å°distanceçš„vectors<br>ã€</li></ul><h3 id="Stop-Nodes"><a href="#Stop-Nodes" class="headerlink" title="Stop Nodes"></a>Stop Nodes</h3><p>â€œStop Nodesâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 150</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=6&annotation=MPLB67C6">pdf</a>) ã€Œ<br>Stop Nodesï¼š  </p><ul><li>å¯¹äºåŒºåˆ†ä¸åŒæ ‘ç»“æ„æ¯«æ— è´¡çŒ®çš„å†—ä½™èŠ‚ç‚¹<br>ã€</li></ul><h2 id="B-Step1-Generate-Tree-Node-Set"><a href="#B-Step1-Generate-Tree-Node-Set" class="headerlink" title="B. Step1: Generate Tree-Node Set"></a>B. Step1: Generate Tree-Node Set</h2><p>â€œStep 1: Generate Tree-Node Setâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 150</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=6&annotation=QC69NZDW">pdf</a>) ã€Œ<br><strong>Step1:</strong>  </p><ul><li>ç›®æ ‡ï¼šç”ŸæˆTree-Nodeé›†åˆ  </li></ul><p><strong>å…·ä½“å®ç°ï¼š</strong>  </p><ul><li>å°†ç›®æ ‡æºç ä½œä¸ºANTLRçš„è¾“å…¥ï¼Œè·å¾—æ¯ä¸ªmethodçš„AST  </li><li>å¯¹ASTè¿›è¡ŒDFSéå†ï¼Œè·å¾—æ¯ä¸ªASTçš„Tree-Nodeé›†åˆ<br>ã€</li></ul><h2 id="C-Step2-Generate-Tree-Vector"><a href="#C-Step2-Generate-Tree-Vector" class="headerlink" title="C. Step2: Generate Tree Vector"></a>C. Step2: Generate Tree Vector</h2><p>â€œStep 2: Generate Tree Vectorâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 150</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=6&annotation=YKLM542J">pdf</a>) ã€Œ<br><strong>Step2:</strong>  </p><ul><li>ç›®æ ‡ï¼šç”ŸæˆAST Vector  </li></ul><p><strong>å…·ä½“å®ç°ï¼š</strong><br><strong>-</strong> é‡‡ç”¨ sentence2vecç®—æ³•ï¼ŒåŸºäºNode-Vector Dictionaryï¼Œå°†ASTè½¬æ¢ä¸ºAST Vector<br>ã€</p><h2 id="D-Step3-Code-Clone-Detection"><a href="#D-Step3-Code-Clone-Detection" class="headerlink" title="D. Step3: Code Clone Detection"></a>D. Step3: Code Clone Detection</h2><p>â€œStep 3: Code Clone Detectionâ€ (<a href="zotero://select/library/items/9LQ2XLYP">Gao ç­‰, 2019, p. 150</a>) (<a href="zotero://open-pdf/library/items/4RB7Y8FW?page=6&annotation=XNRT8QBQ">pdf</a>) ã€Œ<br><strong>Step3ï¼š</strong>  </p><ul><li>ç›®æ ‡ï¼šè¿›è¡ŒCode Clone Dection  </li></ul><p><strong>åŸç†ï¼š</strong><br>Â  - sentence2vecè¿˜æ˜¯node2vecæ•è·äº†structureä¿¡æ¯<br>Â  - Skip-Gramè€ƒè™‘äº†contextä¿¡æ¯<br><strong>å…·ä½“å®ç°ï¼š</strong>  </p><ul><li>åŸºäºä¸Šè¿°åŸç†/å±æ€§ï¼Œå¯ä»¥åŸºäºvectorä¹‹é—´çš„æ¬§å¼è·ç¦»ï¼Œæ£€æµ‹ä»£ç å…‹éš†  </li><li>å¯¹äºType1å’Œ2ï¼ŒAST Vectorå®Œå…¨ä¸€è‡´ï¼›å¯¹äºType3ï¼Œå…¶ä»£ç ç»“æ„ä¸ä¸€å®šç›¸åŒ  </li><li>è®¾ç½®æ¬§å¼è·ç¦»é˜ˆå€¼ï¼Œä½œä¸ºåˆ¤æ–­æ—¶Type3ä»£ç å…‹éš†çš„åˆ¤æ–­æ ‡å‡†<br>ã€</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> Paper Reading </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Code Clone Detection </tag>
            
            <tag> AST </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Natural Language Processing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git</title>
      <link href="p/69c3279c.html"/>
      <url>p/69c3279c.html</url>
      
        <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹å› ä¸ºå„ç§éœ€æ±‚è€Œå¯¹Gitç¼ç¼è¡¥è¡¥çš„å­¦ä¹ </p><p>æ¯”è¾ƒæœ¬åœ°ä»“åº“åˆ†æ”¯ å’Œ è¿œç¨‹ä»“åº“åˆ†æ”¯<code>commit</code>çš„ä¸åŒ</p><ul><li><code>git fetch local_repo</code></li><li><code>git log local_branch..remote_repo/remote_branch</code><ul><li><code>..</code>ä½œå·®é›†</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Overleaf</title>
      <link href="p/26d71884.html"/>
      <url>p/26d71884.html</url>
      
        <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹æœ€è¿‘å°è¯•å­¦ä¹ åœ¨<code>Overleaf</code>ä¸Šä½¿ç”¨LaTeXæ’°å†™è®ºæ–‡ã€‚ä¸ºäº†ç¬¦åˆ<code>XDU</code>æ¯•è®¾è®ºæ–‡æ ¼å¼çš„è¦æ±‚ï¼Œå¯ä»¥åŸºäº<a href="https://github.com/note286/xduts">note286å­¦é•¿æä¾›çš„ä¸€äº›æ–‡æ¡£ç±»å’Œå®åŒ…</a>ã€‚</p><ul><li>å¯¹äºæœ¬åœ°ç³»ç»Ÿ<ul><li>å­¦é•¿åœ¨<code>README</code>ä¸­å°†åŸºäºä¸åŒ<code>Tex</code>å‘è¡Œç‰ˆçš„ä½¿ç”¨æ•™ç¨‹å†™å¾—å¾ˆè¯¦å°½ã€‚</li><li>åœ¨ä½¿ç”¨å‘½ä»¤<code>xetex xduts.ins</code>åï¼Œå¯èƒ½ä¼šåœ¨å…¨å±€å°†æ–‡æ¡£ç±»å’Œå®åŒ…å®‰è£…ï¼Œå› æ­¤ä¸éœ€è¦å†é‡å¤å°†å…¶åŠ å…¥åˆ°è‡ªå·±çš„LaTeXé¡¹ç›®ç›®å½•ä¸‹ã€‚</li></ul></li><li>è€Œå¯¹äº<code>Overleaf</code><ul><li>åˆ™å¿…é¡»å°†æ–‡æ¡£ç±»å’Œå®åŒ…åŠ å…¥åˆ°è‡ªå·±çš„é¡¹ç›®æ ¹ç›®å½•åï¼Œå†æ‰“åŒ…ä¸Šä¼ è‡³<code>Overleaf</code>çš„é¡¹ç›®ç®¡ç†å¤„</li><li>è¿˜éœ€è¦å°†<code>Compiler</code>è®¾ç½®ä¸º<code>XeLaTeX</code></li></ul></li></ul><p>åé¢æ­£å¼ä½¿ç”¨<code>LaTeX</code>å†™ç¡•å£«ç ”ç©¶ç”Ÿè®ºæ–‡æ—¶ï¼Œå†æ ¹æ®è‡ªå·±çš„å…·ä½“éœ€è¦ï¼Œè°ƒç”¨<code>texdoc xduts</code>æŸ¥é˜…<code>XDUTS</code>æ–‡æ¡£ã€‚</p><p>å…ˆè®°å½•åˆ°è¿™é‡Œï¼ŒOverã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LaTeX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Edgeæµè§ˆå™¨</title>
      <link href="p/e75f2967.html"/>
      <url>p/e75f2967.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¸ç”¨çš„æ’ä»¶"><a href="#å¸¸ç”¨çš„æ’ä»¶" class="headerlink" title="å¸¸ç”¨çš„æ’ä»¶"></a>å¸¸ç”¨çš„æ’ä»¶</h1><ul><li><code>Vimium C</code><ul><li>é”®å…¥<code>?</code>è·å¾—æ“ä½œæ‰‹å†Œ</li></ul></li><li><code>Zotero Connector</code><ul><li>ä»å½“å‰ç½‘é¡µä¸Šè¯†åˆ«æ¡ç›®åŠ å…¥åˆ°Zotero</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Edgeæµè§ˆå™¨ </tag>
            
            <tag> æ’ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Paper Reading: How good are query optimizers, really?</title>
      <link href="p/e547f891.html"/>
      <url>p/e547f891.html</url>
      
        <content type="html"><![CDATA[<h1 id="Title"><a href="#Title" class="headerlink" title="Title"></a>Title</h1><p>â€œHow Good Are Query Optimizers, Really?â€ (Leis ç­‰, 2015, p. 204) ã€Œ<br>æŸ¥è¯¢ä¼˜åŒ–å™¨åˆ°åº•æœ‰å¤šå¥½ï¼Ÿ<br>å¤§æ¦‚å°±æ˜¯é€šè¿‡æ¯”è¾ƒæŸ¥è¯¢ä¼˜åŒ–å™¨çš„æœ‰æ— æ—¶ï¼ŒæŸ¥è¯¢æ‰§è¡Œçš„æ€§èƒ½ï¼Œæ¥å¾—åˆ°æŸ¥è¯¢ä¼˜åŒ–å™¨å¯¹æ€§èƒ½æå‡çš„ç¨‹åº¦<br>ã€</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>â€œABSTRACTâ€ (Leis ç­‰, 2015, p. 204) ã€Œ<br>æ‘˜è¦ï¼š</p><p>Backgroundï¼š<br>æ‰¾åˆ°å¥½çš„è¿æ¥æ¬¡åºï¼Œå¯¹äºæŸ¥è¯¢æ€§èƒ½çš„æå‡å¾ˆé‡è¦</p><p>Whyï¼š<br>å¼•å…¥ JOBï¼Œå¹¶ä½¿ç”¨å¤æ‚ã€çœŸå®çš„æŸ¥è¯¢åœ¨ä¼ ç»Ÿä¼˜åŒ–å™¨æ¶æ„ä¸‹ å®éªŒæ€§åœ° æµ‹è¯•ä¼˜åŒ–å™¨çš„ä¸»è¦ç»„ä»¶ã€‚</p><p>Whatï¼š<br>å¦‚ä¸Šï¼Œå°±æ˜¯æµ‹è¯•ä¼˜åŒ–å™¨çš„ä¸»è¦ç»„ä»¶ï¼š</p><ol><li>åŸºæ•°ä¼°è®¡å™¨</li><li>ä»£ä»·æ¨¡å‹</li><li>è®¡åˆ’æšä¸¾æŠ€æœ¯ï¼šç©·ä¸¾åŠ¨æ€è§„åˆ’ç®—æ³•å’Œå¯å‘æ€§ç®—æ³•</li></ol><p>Howï¼š<br>é€šè¿‡å¼•ç”¨ Join Order Benchmarkï¼Œä½¿ç”¨å¤æ‚çœŸå®å¤šè¿æ¥çš„æŸ¥è¯¢</p><p>Noveltyï¼š<br>å¼•å…¥JOBæ–°çš„åŸºå‡†æµ‹è¯•ï¼Ÿ</p><p>Conclusionï¼š</p><ol><li><strong>cardinality estimators</strong>ï¼šæ‰€æœ‰çš„éƒ½ä¼šå‡ºç°å¤§é”™è¯¯ï¼Œå¹¶ä¸”å¦‚æœæŸ¥è¯¢å¼•æ“è¿‡äºä¾èµ–ä»–ä»¬ï¼ŒæŸ¥è¯¢æ€§èƒ½å°†ä¸ä¼šå¾ˆå¥½</li><li><strong>cost model</strong>ï¼šæ¯” Cardinality estimator å¯¹äºæŸ¥è¯¢æ€§èƒ½çš„å½±å“å°</li><li><strong>plan enumeration</strong>ï¼šåœ¨æœ‰æ¬¡ä¼˜cardinality estimatesçš„æƒ…å†µä¸‹ï¼Œç©·ä¸¾åŠ¨æ€è§„åˆ’ç®—æ³•æ¯”å¯å‘å¼ç®—æ³•æ•ˆæœå¥½ã€‚</li></ol><h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h1><h1 id="ã€"><a href="#ã€" class="headerlink" title="ã€"></a>ã€</h1><p>â€œINTRODUCTIONâ€ (Leis ç­‰, 2015, p. 204) ã€Œ<br>å¼•è¨€<br>backgroundï¼š<br>æ‰¾åˆ°ä¸€ä¸ª<strong>å¥½çš„è¿æ¥æ¬¡åº</strong>æ˜¯æ•°æ®åº“é¢†åŸŸç ”ç©¶æœ€å¤šçš„é—®é¢˜ã€‚</p><p>Whyï¼š<br>å¦‚æ‘˜è¦æ‰€è¯´ï¼Œä½¿ç”¨çœŸå®å¤æ‚çš„å·¥ä½œè´Ÿè½½ï¼Œ<strong>æµ‹è¯•ä¼ ç»Ÿçš„ä¼˜åŒ–å™¨æ¶æ„ä¸­ä¸‰ä¸ªç»„ä»¶</strong>å¯¹æŸ¥è¯¢æ€§èƒ½çš„æé«˜ç¨‹åº¦ã€‚</p><p>Whatï¼š<br>è¿›è¡Œæµ‹è¯•ï¼Œå¯¹ä¸‰ä¸ªç»„ä»¶è¿›è¡Œ<strong>é‡åŒ–</strong>ï¼Œå€Ÿæ­¤æ¥ä¸ºå®Œæ•´çš„ä¼˜åŒ–å™¨è®¾è®¡æä¾›æ€è·¯ã€‚</p><p>Howï¼š</p><p>å¼•å…¥æ–°çš„åŸºå‡†æµ‹è¯•JOBï¼Œä½¿ç”¨å¤æ‚çœŸå®çš„å·¥ä½œè´Ÿè½½å’ŒæŸ¥è¯¢ã€‚<br>æ–‡ç« çš„è´¡çŒ®â€”â€”</p><ol><li>è®¾è®¡äº†JOBï¼ŒæŒ‘æˆ˜æ€§çš„å·¥ä½œè´Ÿè½½</li><li>é¦–æ¬¡å¯¹è¿æ¥æ¬¡åºé—®é¢˜æå‡ºç«¯åˆ°ç«¯çš„ç ”ç©¶</li><li>é‡åŒ–ä¸‰ä¸ªç»„ä»¶çš„è´¡çŒ®ï¼Œæä¾›è®¾è®¡ä¼˜åŒ–å™¨çš„æŒ‡å¯¼æ–¹é’ˆ</li></ol><p>Noveltyï¼š</p><ol><li>æ–°é¢–çš„æ–¹æ³•ï¼šèƒ½å¤Ÿ<strong>å•ç‹¬</strong>æµ‹è¯•å‡ºä¼˜åŒ–å™¨æ¯ä¸ªç»„ä»¶å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“</li><li>ä¸“æ³¨äº<strong>è¶Šæ¥è¶Šå¹³å‡¡çš„å†…å­˜åœºæ™¯</strong>ï¼šæ‰€æœ‰æ•°æ®éƒ½è£…å…¥äº†RAM</li></ol><p>Conclusionï¼š<br>å¦‚æ‘˜è¦ä¸­çš„Conclusionæ‰€ç¤ºã€‚<br>ã€</p><h1 id="3-Cardinality-Estimation"><a href="#3-Cardinality-Estimation" class="headerlink" title="3 Cardinality Estimation"></a>3 Cardinality Estimation</h1><p>â€œCARDINALITY ESTIMATIONâ€ (Leis ç­‰, 2015, p. 206) ã€Œ<br>åŸºæ•°ä¼°è®¡æ˜¯æ‰¾åˆ°ä¸€ä¸ªå¥½çš„æŸ¥è¯¢è®¡åˆ’æœ€é‡è¦çš„ç»„ä»¶ï¼Œæ²¡æœ‰å¥½çš„åŸºæ•°ä¼°è®¡ï¼Œè¿æ¥æ¬¡åºæšä¸¾å’Œä»£ä»·æ¨¡å‹éƒ½æ— ç”¨ã€‚<br>è¿™ä¸€å°èŠ‚é€šè¿‡æ¯”è¾ƒ ä¼°è®¡çš„åŸºæ•° å’Œ çœŸå®çš„åŸºæ•°ï¼Œæ¥è°ƒæŸ¥å…³ç³»æ•°æ®åº“ç³»ç»Ÿä¸­çš„è´¨é‡ã€‚<br>ã€</p><h2 id="3-1-Estimates-for-Base-Table"><a href="#3-1-Estimates-for-Base-Table" class="headerlink" title="3.1 Estimates for Base Table"></a>3.1 Estimates for Base Table</h2><h3 id="Base-Table"><a href="#Base-Table" class="headerlink" title="Base Table?"></a>Base Table?</h3><p>â€œBase Tablesâ€ (Leis ç­‰, 2015, p. 207) ã€Œ<br>åŸºè¡¨ï¼šå®é™…å­˜åœ¨äºæ•°æ®åº“ä¸­çš„è¡¨<br>æŸ¥è¯¢è¡¨ï¼šæŸ¥è¯¢ç»“æœå¯¹åº”çš„è¡¨<br>è§†å›¾è¡¨ï¼šç”±åŸºæœ¬è¡¨å’Œå…¶ä»–è§†å›¾è¡¨å¯¼å‡ºçš„è¡¨ï¼Œä¸ºè™šè¡¨ï¼Œä¸å¯¹åº”å®é™…å­˜å‚¨çš„æ•°æ®ã€‚</p><p>åŸºè¡¨çš„æ€§è´¨ï¼š</p><ol><li>åˆ—æ˜¯åŒè´¨çš„ï¼Œå³æ¯ä¸€åˆ—ä¸­çš„åˆ†é‡éƒ½æ˜¯åŒä¸€ç±»å‹çš„æ•°æ®ï¼Œæ¥è‡ªåŒä¸€ä¸ªåŸŸ</li></ol><ol start="2"><li>ä¸åŒçš„åˆ—å¯ä»¥æ¥è‡ªåŒä¸€ä¸ªåŸŸï¼Œæ¯ä¸€åˆ—åˆç§°ä¹‹ä¸ºå±æ€§ï¼Œä¸åŒçš„å±æ€§è¦æœ‰ä¸åŒçš„å±æ€§å</li></ol><ol start="3"><li>åˆ—çš„é¡ºåºæ— å…³ç´§è¦</li></ol><ol start="4"><li>è¡Œçš„é¡ºåºä¹Ÿæ— å…³ç´§è¦</li><li>ä»»æ„ä¸¤ä¸ªå…ƒç»„çš„å€™é€‰ç ä¸èƒ½å–ç›¸åŒçš„å€¼</li><li>åˆ†é‡å¿…é¡»è¦å–åŸå­å€¼ï¼Œå³ä¸€ä¸ªè¡¨ä¸­çš„æŸä¸€é¡¹ä¸èƒ½å†æ‹†æˆå¥½å‡ é¡¹</li></ol><p>ã€</p><p>â€œEstimates for Base Tablesâ€ (Leis ç­‰, 2015, p. 207) ã€Œ<br>åŸºè¡¨ï¼šå®é™…å­˜åœ¨äºæ•°æ®åº“ä¸­çš„è¡¨<br>ä½¿ç”¨ q-error æ¥è¡¡é‡åŸºè¡¨åŸºæ•°ä¼°è®¡çš„è´¨é‡ã€‚å…¬å¼ä¸º ï½œä¼°è®¡å€¼/å®é™…å€¼ï½œï¼Œæ˜¯ä¸€ä¸ªå¤§äºç­‰äº1çš„æ¯”ç‡å€¼ã€‚</p><p>è§‚å¯ŸåŸºè¡¨é€‰æ‹©çš„ q-error å€¼ï¼Œå¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š<br><strong>DBMS Aå’ŒHyperâ€”â€”</strong><br>ä¼°è®¡å…·æœ‰å¤æ‚è°“è¯ï¼ˆLikeï¼‰ åŸºè¡¨é€‰æ‹© çš„åŸºæ•°å¾ˆå‡†ï¼Œå› ä¸ºä¼°è®¡åŸºè¡¨çš„é€‰æ‹©ç‡æ—¶ï¼Œä½¿ç”¨äº†æ ·æœ¬æ³•ï¼ˆ1000ï¼‰ã€‚ä½†æ˜¯å› ä¸ºæ ·æœ¬å¤ªå°ï¼Œå¯¹äºé€‰æ‹©ç‡å¾ˆå°ï¼ˆ10^-5ï¼‰çš„æƒ…å†µï¼Œå°±ä¼šå¯¼è‡´å¾ˆå¤§çš„é€‰æ‹©æ€§ä¼°è®¡è¯¯å·®ã€‚</p><p><strong>å…¶ä»–çš„æ•°æ®åº“ç³»ç»Ÿâ€”â€”</strong><br>è¡¨ç°æ›´å·®ï¼ŒåŸºäºäº†æ¯ä¸ªå±æ€§çš„ç›´æ–¹å›¾ï¼Œä½†æ˜¯åŸºäºç›´æ–¹å›¾çš„åŸºæ•°ä¼°è®¡å¯¹äºå¤æ‚çš„è°“è¯å¹¶ä¸æ˜¯å¾ˆæœ‰æ•ˆï¼Œä¹Ÿæ— æ³•æ£€æµ‹å‡ºå±æ€§ä¹‹é—´çš„è”ç³»ã€‚<br>ã€</p><h2 id="3-2-Estimates-for-Joins"><a href="#3-2-Estimates-for-Joins" class="headerlink" title="3.2 Estimates for Joins"></a>3.2 Estimates for Joins</h2><p>â€œEstimates for Joinsâ€ (Leis ç­‰, 2015, p. 207) ã€Œ<br>æœ¬èŠ‚çš„å®éªŒç»“æœå¹¶ä¸èƒ½è¯´æ˜ç›¸åº”ç³»ç»Ÿçš„ä¼˜åŒ–å™¨ä¸å¤Ÿå¥½ï¼Œå› ä¸ºæŸ¥è¯¢çš„æ€§èƒ½è¿˜ä¾èµ–äºä¼˜åŒ–å™¨æ˜¯å¦‚ä½•ä½¿ç”¨å’Œä¿¡ä»»è¿™äº›ä¼°è®¡æ•°æ®çš„ã€‚</p><p><strong>ä¸ºè¿æ¥åšåŸºæ•°ä¼°è®¡ï¼š</strong><br>èƒŒæ™¯ï¼šæ ·æœ¬æ³•å’Œç›´æ–¹å›¾ å¯¹äºè¿æ¥ä¸­é—´ç»“æœçš„ä¼°è®¡å¹¶æ²¡æœ‰å¾ˆæœ‰æ•ˆã€‚</p><p><strong>å®éªŒç»“æœ</strong>ï¼š</p><ol><li>æ¯ä¸ªç³»ç»Ÿå¯¹ ä¼°è®¡è¯¯å·®çš„ å·®å¼‚å·®ä¸å¤šï¼Œå¹¶ä¸”éƒ½ä¸æ˜¯å¾ˆç†æƒ³</li><li>æ‰€æœ‰ç³»ç»Ÿéƒ½å€¾å‘äº ä½ä¼°äº†å¤šè¿æ¥æŸ¥è¯¢çš„ç»“æœå¤§å°</li></ol><p><strong>æ”¹è¿›</strong>ï¼š</p><p>å¯ä»¥åƒ DBMS Aï¼Œä½¿ç”¨é˜»å°¼å› å­æ¥å‡å°‘è¿™ç§ä½ä¼°çš„ç¨‹åº¦ã€‚<br>ã€</p><h2 id="3-3-Estimates-for-TPC-H"><a href="#3-3-Estimates-for-TPC-H" class="headerlink" title="3.3 Estimates for TPC-H"></a>3.3 Estimates for TPC-H</h2><p>â€œEstimates for TPC-Hâ€ (Leis ç­‰, 2015, p. 208) ã€Œ<br>TPC-Hï¼šé’ˆå¯¹ OLAP åœºæ™¯çš„æµ‹è¯•</p><p>TPC-Cï¼š é’ˆå¯¹ OLTP çš„åœºæ™¯çš„æµ‹è¯•<br>TPC-H çš„å·¥ä½œè´Ÿè½½å¯¹äºç³»ç»Ÿçš„åŸºæ•°ä¼°è®¡å™¨å¹¶æ²¡æœ‰å¤šå¤§æŒ‘æˆ˜ï¼Œæ–‡ç« å¼•å…¥çš„ JOB æŸ¥è¯¢é›†åˆå¯ä»¥æ»¡è¶³ã€‚<br>ã€</p><h2 id="3-4-Better-Statistics-for-PosgreSQL"><a href="#3-4-Better-Statistics-for-PosgreSQL" class="headerlink" title="3.4 Better Statistics for PosgreSQL"></a>3.4 Better Statistics for PosgreSQL</h2><p>â€œBetter Statistics for PostgreSQLâ€ (Leis ç­‰, 2015, p. 208) ã€Œ<br>å¯¹ç…§è¯•éªŒè¡¨æ˜ï¼Œå¯¹äº distinct counts çš„ä¼°è®¡è¯¯å·®å¯¹äºåŸºæ•°ä¼°è®¡è¯¯å·®çš„å½±å“è¾ƒå°ï¼Œç›¸åç”±äºdistinct counts çš„è¯¯å·®ä¼šå¯¼è‡´åŸºæ•°ä¼°è®¡çš„å€¼æ›´å¤§ä¸€äº›ï¼Œè¿™ä½¿å¾— è´Ÿè´Ÿå¾—æ­£ã€‚ã€‚ã€‚<br>ã€</p><h1 id="4-When-do-bad-cardinality-estimates-lead-to-slow-queries"><a href="#4-When-do-bad-cardinality-estimates-lead-to-slow-queries" class="headerlink" title="4 When do bad cardinality estimates lead to slow queries?"></a>4 When do bad cardinality estimates lead to slow queries?</h1><h2 id="4-1-The-Risk-of-Relying-on-Estimates"><a href="#4-1-The-Risk-of-Relying-on-Estimates" class="headerlink" title="4.1 The Risk of Relying on Estimates"></a>4.1 The Risk of Relying on Estimates</h2><p>â€œThe Risk of Relying on Estimatesâ€ (Leis ç­‰, 2015, p. 209) ã€Œ<br>ä¾èµ–åŸºæ•°ä¼°è®¡çš„<strong>é£é™©ï¼š</strong><br>ç”±äºPostgreSQLçš„ä¼˜åŒ–å™¨çº¯ç²¹åŸºäºä»£ä»·<strong>ï¼Œ</strong>ä¸è€ƒè™‘åŸºæ•°ä¼°è®¡çš„å†…åœ¨ä¸ç¡®å®šæ€§å’Œä¸åŒç®—æ³•é€‰æ‹©çš„æ¸è¿‘å¤æ‚ã€‚</p><ol><li>æŸ¥è¯¢æ‰§è¡Œæ²¡æœ‰åœ¨åˆç†æ—¶é—´å†…å®Œæˆï¼šç”±äºåŸºæ•°ä½ä¼°è¿‡äºé¢‘ç¹ï¼Œå¯¼è‡´ä¼˜åŒ–å™¨ä¼šå†’ç€é«˜é£é™©æ¥é€‰æ‹©ä½æ”¶ç›Šçš„åµŒå¥—å¾ªç¯è¿æ¥ï¼›</li><li>è¿˜æœ‰ä¸€éƒ¨åˆ†æŸ¥è¯¢çš„æ‰§è¡Œæ—¶é—´æ¯”æœ€ä¼˜è®¡åˆ’çš„æ—¶é—´å¤šåå€ï¼šå› ä¸ºåŸºæ•°ä½ä¼°å¯¼è‡´hashè¿æ¥çš„hashè¡¨å¤§å°è¢«ä½ä¼°</li></ol><p>ã€</p><h2 id="4-2-Good-Plans-Despite-Bad-Cardinalities"><a href="#4-2-Good-Plans-Despite-Bad-Cardinalities" class="headerlink" title="4.2 Good Plans Despite Bad Cardinalities"></a>4.2 Good Plans Despite Bad Cardinalities</h2><p>â€œGood Plans Despite Bad Cardinalitiesâ€ (Leis ç­‰, 2015, p. 209) ã€Œ<br>ç†è®ºä¸Šï¼Œæœ‰ç€ä¸åŒçš„è¿æ¥é¡ºåºçš„è®¡åˆ’çš„æŸ¥è¯¢æ‰§è¡Œæ—¶é—´ä¼šåœ¨é‡çº§ä¸Šä¸åŒï¼Œä½†æ˜¯å½“åªæœ‰ä¸»é”®ç´¢å¼•å¹¶ä¸”åµŒå¥—å¾ªç¯è¿æ¥ç¦æ­¢ã€hashå†²è®¡ç®—å¯ç”¨åï¼Œå¤§å¤šæ•°æŸ¥è¯¢çš„æ€§èƒ½ä¼šå¾ˆæ¥è¿‘æœ€ä¼˜è®¡åˆ’çš„æ€§èƒ½ï¼š<br>åŸå› æœ‰äºŒâ€”â€”</p><ol><li>åªæœ‰ä¸»é”®ç´¢å¼•ï¼Œæ²¡æœ‰å¤–é”®ç´¢å¼•ï¼Œè¿™å¯¼è‡´å¤§å¤šæ•°è¡¨åªèƒ½ç”¨å…¨è¡¨æ‰«æï¼Œè¿™å¯¹äºè¡¨è¿æ¥é¡ºåºçš„å½±å“å¾ˆå°</li></ol><ol start="2"><li>ä¸»å­˜è¶³å¤Ÿå¤§ï¼Œè£…å…¥äº†æ‰€æœ‰çš„ç´¢å¼•å’Œæ•°æ®ã€‚ã€‚ã€‚ã€‚</li></ol><p>ã€</p><h2 id="4-3-Complex-Access-Paths"><a href="#4-3-Complex-Access-Paths" class="headerlink" title="4.3 Complex Access Paths"></a>4.3 Complex Access Paths</h2><p>â€œComplex Access Pathsâ€ (Leis ç­‰, 2015, p. 210) ã€Œ<br>æ•´ä½“æ€§èƒ½æ™®éæé«˜äº†ï¼Œä½†æ˜¯éšç€å¯ç”¨ç´¢å¼•çš„é€æ¸å¢å¤šï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨çš„å·¥ä½œä¹Ÿè¶Šæ¥è¶Šå›°éš¾</p><p>ã€</p><h2 id="4-4-Join-Crossing-Correlations"><a href="#4-4-Join-Crossing-Correlations" class="headerlink" title="4.4 Join-Crossing Correlations"></a>4.4 Join-Crossing Correlations</h2><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>â€œJoin-Crossing Correlationsâ€ (Leis ç­‰, 2015, p. 210) ã€Œ</p><p>èƒŒæ™¯ï¼š<br>å¯¹äºå•è¡¨ï¼Œå¯¹äºå­˜åœ¨æœ‰ç›¸äº’å…³ç³»è°“è¯çš„æŸ¥è¯¢ï¼Œä½¿ç”¨æ ·æœ¬å¯ä»¥å¾—åˆ°è¾ƒå‡†ç¡®çš„æŠ€æœ¯ä¼°è®¡ã€‚<br>å¯¹äºå¤šè¡¨è¿æ¥ï¼Œæ¥è‡ªä¸åŒçš„è¡¨çš„è¿æ¥æŸ¥è¯¢æœ‰ <strong>ç›¸äº’å…³ç³»çš„è°“è¯</strong> æ‰€åŒ…å«çš„åˆ— ï¼Œç”±è¿æ¥æ¥è¿æ¥ã€‚</p><p>ã€</p><p>â€œDBLP case,â€ (Leis ç­‰, 2015, p. 210) ã€Œ<br>ä¾‹å­ï¼š<br><code>SELECT COUNT(*) FROM Authors, Authorship, Papers WHERE Authorship.author = Author.author AND Authorship.venue = &quot;VLDB&quot;</code></p><p>å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œ<br><strong>ä¸€èˆ¬</strong>ï¼šéœ€è¦å…ˆè¿›è¡Œè¡¨çš„è¿æ¥ï¼Œç„¶ååœ¨è¿›è¡Œè¿‡æ»¤ï¼›<br><strong>ç‰¹æ®Šç‰©ç†è®¾è®¡ï¼š</strong>å°†Authorshipä¸­çš„ç‰©ç†è®¾è®¡æ ¹æ®Paper.venueè¿›è¡Œåˆ’åˆ†ï¼Œè¿™æ ·åœ¨è¿æ¥å‘ç”Ÿä¹‹å‰ï¼Œå°±å¯ä»¥å°†è¿‡æ»¤éšæ€§çš„è¿›è¡Œã€‚</p><p><strong>ä¼˜ç‚¹</strong>ï¼šå¯ä»¥é¿å…ä¸­é—´ç»“æœæ— å…³æ•°æ®è¿‡å¤šã€‚</p><p>ã€</p><h1 id="5-Cost-Models"><a href="#5-Cost-Models" class="headerlink" title="5 Cost Models"></a>5 Cost Models</h1><p>ä¸Cardinality estimation errorç›¸æ¯”ï¼Œcost modelså¯¹æ€§èƒ½çš„å½±å“å¾ˆå°ã€‚ã€‚</p><h1 id="6-Plan-Space"><a href="#6-Plan-Space" class="headerlink" title="6 Plan Space"></a>6 Plan Space</h1><p>â€œPLAN SPACEâ€ (Leis ç­‰, 2015, p. 212) ã€Œ<br><strong>æœ€åä¸€ä¸ªé‡è¦çš„ä¼˜åŒ–å™¨ç»„ä»¶</strong>â€”â€”ä¸€ä¸ªè®¡åˆ’æšä¸¾ç®—æ³•ï¼ˆæ¢ç´¢ <strong>è¯­ä¹‰ç­‰ä»·çš„è¿æ¥æ¬¡åº</strong> è®¡åˆ’ç©ºé—´ï¼‰</p><ol><li>å…¨é¢æ¢ç´¢â€”â€”DP</li><li>å¯å‘å¼</li></ol><p><strong>è¿™ä¸ªç« èŠ‚çš„ç›®çš„ï¼š</strong><br>æ‰¾åˆ°éœ€è¦<strong>å¤šå¤§çš„æœç´¢ç©ºé—´</strong>ï¼Œæ‰èƒ½æ‰¾åˆ°ä¸€ä¸ªå¥½çš„è®¡åˆ’</p><p>ã€</p><h2 id="6-1-How-Important-is-the-Join-Order"><a href="#6-1-How-Important-is-the-Join-Order" class="headerlink" title="6.1 How Important is the Join Order"></a>6.1 How Important is the Join Order</h2><p>â€œclearly illustrate the importance of the join ordering problemâ€ (Leis ç­‰, 2015, p. 213) ã€Œ<br>ä»è¿™å¼ ä»£ä»·åˆ†å¸ƒå›¾ï¼š</p><ol><li>æœ€ä¼˜è®¡åˆ’çš„ä»£ä»·æ¯”æœ€æ…¢/ä¸­ä½çš„ä»£ä»·å¿«äº†å‡ ä¸ªæ•°é‡çº§</li><li>ä¸åŒæŸ¥è¯¢çš„ä»£ä»·åˆ†å¸ƒå¾ˆä¸åŒ</li><li>å¤–é”®+ä¸»é”® è¿™ç§ç´¢å¼•é…ç½®çš„æœ€ä¼˜ä»£ä»·æ¯”å…¶ä»–é…ç½®å¿«ä¸å°‘ã€‚</li></ol><p>ã€</p><p>â€œhighlight the dramatically different search spaces of the three index configurations.â€ (Leis ç­‰, 2015, p. 213) ã€Œ<br>ä¸åŒçš„ ç´¢å¼•é…ç½®ï¼Œå…¶å¯¹åº”çš„æœç´¢ç©ºé—´ä¹Ÿå¾ˆä¸åŒï¼š</p><ol><li>æœ‰å¤–é”®ç´¢å¼•çš„é…ç½®ï¼Œæœç´¢ç©ºé—´æ›´åå‘äºæœ€ä¼˜è®¡åˆ’çš„ä»£ä»·ï¼ˆ1.5Xï¼‰</li><li>æœ‰å¤–é”®çš„ç´¢å¼•é…ç½®ï¼šæœç´¢ç©ºé—´çš„ä»£ä»·æ›´å®½æ³›</li></ol><p>ã€</p><h2 id="6-2-Are-Bushy-Trees-necessary"><a href="#6-2-Are-Bushy-Trees-necessary" class="headerlink" title="6.2 Are Bushy Trees necessary"></a>6.2 Are Bushy Trees necessary</h2><p>â€œAre Bushy Trees Necessary?â€ (Leis ç­‰, 2015, p. 213) ã€Œ<br>æœ¬ç« èŠ‚è¦è§£å†³çš„é—®é¢˜ï¼šå¤šææ ‘æ˜¯å¦æœ‰å¿…è¦ï¼Ÿ</p><p><strong>è¿æ¥æ ‘å½¢â€”â€”</strong><br><strong>å·¦æ·±æ ‘</strong>ï¼š</p><ol><li>è¿æ¥æ ‘çš„æ¯ä¸ªè¿æ¥ç®—å­çš„å³å­èŠ‚ç‚¹éƒ½ä¸€å®šæ˜¯ä¸€ä¸ªåŸºè¡¨</li><li>NLJ çš„è¿æ¥æ ‘åªå¯èƒ½æ˜¯å·¦æ·±æ ‘</li></ol><p><strong>å³æ·±æ ‘</strong>ï¼š</p><ol><li>è¿æ¥æ ‘çš„æ¯ä¸ªè¿æ¥ç®—å­çš„å·¦å­èŠ‚ç‚¹éƒ½ä¸€å®šæ˜¯ä¸€ä¸ªåŸºè¡¨</li><li>HJ å’Œ Sort-Merge Joinçš„è¿æ¥æ ‘æœ‰å¯èƒ½æ˜¯å³æ·±æ ‘</li><li>å“ˆå¸Œè¿æ¥ä¸ºå³æ·±æ ‘æ—¶ï¼Œä¼šåŒæ—¶æœ‰å¤šä¸ªè¡¨è¢«åšæˆHashè¡¨ï¼Œä»è€Œæ¶ˆè€—è¿‡å¤šçš„PGA</li></ol><p><strong>é”¯é½¿å½¢æ ‘ï¼ˆzig-zag treesï¼‰ï¼š</strong></p><ol><li>è¿æ¥æ ‘çš„æ¯ä¸ªè¿æ¥ç®—å­çš„å·¦å³å­èŠ‚ç‚¹ä¸­ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªåŸºè¡¨ã€‚</li></ol><p><strong>æµ“å¯†æ ‘ï¼ˆbushy treesï¼‰ï¼š</strong></p><ol><li>è¿æ¥æ ‘çš„æ¯ä¸ªè¿æ¥ç®—å­çš„å·¦å³å­èŠ‚ç‚¹å¯èƒ½éƒ½ä¸æ˜¯åŸºè¡¨ï¼Œç»“æ„ä¸ºå®‰å…¨è‡ªç”±</li><li>ä¼˜åŒ–å™¨æ— æ³•é€‰æ‹©å…¶ä»–æ ‘å½¢æ—¶ï¼Œæ‰ä¼šé€‰æ‹©æµ“å¯†æ ‘</li><li>ä¸€èˆ¬å½“æŸ¥è¯¢åŒ…å« å­æŸ¥è¯¢/è§†å›¾ï¼Œå¯èƒ½äº§ç”Ÿæµ“å¯†æ ‘ã€‚</li></ol><p>-â€“</p><p><strong>è¿æ¥æ ‘çš„å¤„ç†è§„åˆ™ï¼š</strong></p><p>ãƒ»ä»<strong>æœ€å·¦ç«¯çš„å¶èŠ‚ç‚¹</strong>å¼€å§‹å¤„ç†</p><p>ãƒ»å·¦èŠ‚ç‚¹çš„å¤„ç†<strong>ä¼˜å…ˆçº§é«˜</strong>äºå³èŠ‚ç‚¹</p><p>ãƒ»<strong>å·¦èŠ‚ç‚¹é©±åŠ¨å³èŠ‚ç‚¹</strong></p><p>ãƒ»å­èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹ä¹‹å‰è¿›è¡Œå¤„ç†</p><p>ãƒ»å­èŠ‚ç‚¹å¤„ç†å®Œè·å¾—çš„<strong>æ•°æ®è¿”å›ç»™çˆ¶èŠ‚ç‚¹ã€‚</strong><br>-â€“</p><p><strong>é™åˆ¶æ¡ä»¶å’Œè¿æ¥æ¡ä»¶â€”â€”</strong><br><strong>æ³¨ï¼šé™åˆ¶æ¡ä»¶å¯åœ¨è¿æ¥æ¡ä»¶ä¹‹å‰æ‰§è¡Œ</strong><br>é™åˆ¶æ¡ä»¶ï¼š</p><ol><li>ä¸¤ä¸ªæ•°æ®é›†é€šè¿‡è¿æ¥æ¡ä»¶è¿›è¡Œè¿æ¥ï¼ŒWhereä¸­ï¼ˆä¼ ç»Ÿï¼‰æˆ–è€…Fromä¸­ï¼ˆANSI æ ‡å‡†ï¼‰</li></ol><p>è¿æ¥æ¡ä»¶ï¼š</p><ol><li>åœ¨è¿æ¥è¿”å›çš„ç»“æœé›†ä¸Šåº”ç”¨é™åˆ¶æ¡ä»¶ï¼ˆä¼ ç»Ÿå’ŒANSI æ ‡å‡†ï¼‰</li><li>é˜²æ­¢å‡ºç° äº¤å‰ä¹˜ç§¯è¿æ¥</li></ol><p>-â€“</p><p><strong>è¿æ¥ç±»å‹â€”â€”</strong><br><strong>Nested-Loop Join ï¼š</strong></p><ol><li>å·¦å­èŠ‚ç‚¹ä¸ºå¤–éƒ¨å¾ªç¯ï¼Œå³å­èŠ‚ç‚¹ä¸ºå†…éƒ¨å¾ªç¯</li><li>å¯¹äºå·¦å­èŠ‚ç‚¹çš„æ¯ä¸€æ¡è®°å½•ï¼Œå³å­èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œä¸€æ¬¡è¿æ¥æ¡ä»¶å’Œé™åˆ¶æ¡ä»¶ã€‚</li></ol><p>2.1 å¤–éƒ¨å¾ªç¯åªæ‰§è¡Œä¸€æ¬¡<br>2.2 å†…éƒ¨å¾ªç¯æ‰§è¡Œå¤šæ¬¡</p><ol start="3"><li>åœ¨æ‰€æœ‰æ•°æ®æ‰§è¡Œå®Œä¹‹å‰ï¼Œå°±å¯ä»¥è·å¾—ç»“æœé›†çš„ç¬¬ä¸€æ¡è®°å½•</li><li>å¯ä»¥åˆ©ç”¨ç´¢å¼•æ¥é«˜æ•ˆè¿æ¥</li></ol><p><strong>Hash Joinï¼š</strong><br>1.</p><p><strong>Sort-Merge Joinï¼š</strong></p><ol><li>æ¯ä¸ªè¾“å…¥æ•°æ®é›†éƒ½å¿…é¡»å…ˆæŒ‰ç…§è¿æ¥æ¡ä»¶çš„å­—æ®µè¿›è¡Œæ’åº</li><li>æ¯ä¸ªè¾“å…¥æ•°æ®é›†åªæ‰§è¡Œä¸€æ¬¡</li><li>åœ¨æ‰€æœ‰æ•°æ®æ‰§è¡Œå®Œä¹‹åï¼Œæ‰èƒ½è·å¾—ç¬¬ä¸€æ¡è®°å½•</li></ol><p>ã€</p><h2 id="6-3-Are-Heuristics-Good-Enough"><a href="#6-3-Are-Heuristics-Good-Enough" class="headerlink" title="6.3 Are Heuristics Good Enough"></a>6.3 Are Heuristics Good Enough</h2><p>â€œAre Heuristics Good Enough?â€ (Leis ç­‰, 2015, p. 213) ã€Œ<br><strong>å¯å‘å¼ç®—æ³• è¶³å¤Ÿå¥½å—ï¼Ÿ</strong></p><p>åœ¨æŠ€æœ¯ä¼°è®¡è´¨é‡ä¸å¥½çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒï¼š</p><ol><li>å…¨é¢çš„åŠ¨æ€è§„åˆ’ï¼šexhaustive dynamic programming</li></ol><ol start="2"><li>éšæœºåŒ–çš„å¯å‘å¼ï¼šQuickPick-1000</li><li>è´ªå©ªçš„å¯å‘å¼ï¼šGreedy Operator Ordering</li></ol><p>å½’ä¸€åŒ–ï¼Œç”¨çœŸå®çš„åŸºæ•°ä½¿ç”¨åŠ¨æ€è§„åˆ’å¾—åˆ°çœŸå®æœ€ä¼˜è®¡åˆ’çš„ä»£ä»·ï¼Œå¾—åˆ°ç»“<strong>è®º</strong>ï¼š</p><ol><li>å°½ç®¡å­˜åœ¨æŠ€æœ¯ä¼°è®¡è¯¯å·®ï¼Œä½¿ç”¨ å…¨é¢çš„åŠ¨æ€è§„åˆ’ ç®—æ³•ï¼Œæ¥å…¨é¢åœ°æ£€æŸ¥ æœç´¢ç©ºé—´ æ˜¯å¾ˆå€¼å¾—çš„</li><li>å¥½çš„ åŸºæ•°ä¼°è®¡ çš„æ€§èƒ½æ½œåŠ›ï¼Œä¼šæé«˜æ€§èƒ½</li><li>è€ƒè™‘åˆ°ï¼Œä¸º <strong>æ•°åä¸ªè¡¨è¿æ¥çš„æŸ¥è¯¢</strong> æ‰¾åˆ°æœ€ä¼˜è®¡åˆ’ï¼Œæ˜¯<strong>å­˜åœ¨ å…¨é¢çš„æšä¸¾ç®—æ³•</strong>ï¼šå› æ­¤å¾ˆå°‘æœ‰éœ€è¦è¯‰è¯¸äº <strong>ç¦ç”¨æµ“å¯†æ ‘å’Œå¯å‘å¼ç®—æ³•</strong> çš„æƒ…å†µã€‚</li></ol><p>ã€</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> Paper Reading </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Cardinality Estimation </tag>
            
            <tag> Cost Model </tag>
            
            <tag> Search Space </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Paper Reading: Robustness metrics for relational query execution plans</title>
      <link href="p/7091acdb.html"/>
      <url>p/7091acdb.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h1><p>æœ¬ç¯‡æ–‡ç« çš„ä¸¤ä¸ªæ ¸å¿ƒå†…å®¹ï¼š</p><p>â€œthree novel metrics for the robustnesâ€ (Florian Wolf ç­‰, 2018, p. 1360)ï¼šä¸‰ä¸ªå¥å£®æ€§æŒ‡æ ‡ï¼ˆå…³äºåŸºæ•°ä¼°è®¡è¯¯å·®ï¼‰ï¼Œç”¨äºè¡¡é‡qepçš„å¥å£®æ€§ã€‚é€‚ç”¨æ€§å¾ˆå¼ºï¼š</p><p>â€œall kinds of operators, operator implementations, query execution plan trees, and monotonically increasing and differentiable cost functionâ€ (Florian Wolf ç­‰, 2018, p. 1361) æ”¯æŒå„ç§è¿ç®—ï¼Œè¿ç®—çš„ç‰©ç†å®ç°ï¼ŒæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’æ ‘ä»¥åŠå•è°ƒé€’å¢å’Œå¯å¾®åˆ†çš„ä»£ä»·å‡½æ•°</p><p>â€œa novel plan selection strategy that takes both, estimated cost and estimated robustness into account, when choosing a plan for executionâ€ (Florian Wolf ç­‰, 2018, p. 1360)ï¼šæ ¹æ®ä¸‰ä¸ªæŒ‡æ ‡æƒè¡¡ ä¼°è®¡çš„ä»£ä»· å’Œ ä¼°è®¡çš„å¥å£®æ€§ï¼Œæ¥é€‰æ‹©è¦æ‰§è¡Œçš„è®¡åˆ’ã€‚</p><h1 id="2-ç›¸å…³å·¥ä½œ"><a href="#2-ç›¸å…³å·¥ä½œ" class="headerlink" title="2 ç›¸å…³å·¥ä½œ"></a>2 ç›¸å…³å·¥ä½œ</h1><p>è€ƒè™‘æ‰€æœ‰çš„è®¡åˆ’æ ‘ï¼Œåœ¨ä¼˜åŒ–æ—¶æ‰§è¡Œç®—æ³•</p><p>â€œlimit the number of robust plan candidates to the cheapest plans encountered during the initial query optimizationâ€ (Florian Wolf ç­‰, 2018, p. 1361) å¥å£®æ€§çš„å€™é€‰è®¡åˆ’é™åˆ¶ä¸ºï¼š åœ¨æŸ¥è¯¢ä¼˜åŒ–åˆæœŸé‡åˆ°çš„ä»£ä»·æœ€å°çš„è®¡åˆ’</p><h1 id="3-é—®é¢˜é˜è¿°"><a href="#3-é—®é¢˜é˜è¿°" class="headerlink" title="3 é—®é¢˜é˜è¿°"></a>3 é—®é¢˜é˜è¿°</h1><p>å®šä¹‰ å„ç§åŸºæœ¬ç¬¦å· C_errï¼Œq-errorï¼Œé€‰æ‹©ä¸€ä¸ªæˆæœ¬å…¬å¼ï¼ˆçº¿æ€§ã€å•è°ƒé€’å¢ï¼Œå¯å¾®åˆ†ï¼‰</p><p>â€œargue that choosing a robust plan can result in faster query execution times in the presence of cardinality estimation errorsâ€ (Florian Wolf ç­‰, 2018, p. 1361) åŸºæ•°ä¼°è®¡é”™è¯¯ä¸å¯é¿å…ï¼Œå› æ­¤é€‰æ‹©å¥å£®æ€§æ›´å¼ºçš„è®¡åˆ’ï¼Œå…¶æ‰§è¡Œæ—¶é—´æ›´çŸ­ï¼Ÿæ˜¯å¦ä¸€å®šï¼Ÿä¹Ÿè®¸ä¼°è®¡çš„æœ€ä¼˜è®¡åˆ’å…¶æ‰§è¡Œæ—¶é—´ä»ç„¶æœ€çŸ­</p><p>â€œThe most robust plan is the plan with the smallest cost error factor cerr **within the set of robust plan candidates.**â€ (Florian Wolf ç­‰, 2018, p. 1361)</p><p>â€œan ideal robustness metric should fulfill the following three consistency requirements.â€ (Florian Wolf ç­‰, 2018, p. 1362) ç†æƒ³çš„å¥å£®æ€§æŒ‡æ ‡çš„ ä¸€è‡´æ€§éœ€æ±‚ï¼Œä¸‹é¢å¾—åˆ°çš„ä¸‰ä¸ªæŒ‡æ ‡éƒ½åº”è¯¥æ»¡è¶³</p><h1 id="4-å¥å£®æ€§æŒ‡æ ‡"><a href="#4-å¥å£®æ€§æŒ‡æ ‡" class="headerlink" title="4 å¥å£®æ€§æŒ‡æ ‡"></a>4 å¥å£®æ€§æŒ‡æ ‡</h1><p>ç¬¬ä¸€å—åŸºçŸ³ï¼šå®šä¹‰ PCF</p><p>â€œthe cost of a query execution plan or sub-plan, modeled as function of one cost parameter.â€ (Florian Wolf ç­‰, 2018, p. 1363)</p><p>â€œthe slopes of PCFs around the estimated cardinality indicate the sensitivity of a plan towards estimation errorsâ€ (Florian Wolf ç­‰, 2018, p. 1363) PCFs ï¼ˆå‚æ•°åŒ–æˆæœ¬å‡½æ•°ï¼‰çš„æ–œç‡è¡¨ç°äº† ä¸€ä¸ªè®¡åˆ’å¯¹åŸºæ•°ä¼°è®¡è¯¯å·®çš„æ•æ„Ÿåº¦</p><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/03/image-20230304221141724.png" alt="image-20230304221141724"><br>(Florian Wolf ç­‰, 2018, p. 1364) PCF çš„ä½¿ç”¨ï¼Œç»™è¿™ç¯‡æ–‡ç« æä¾›äº†æ€è·¯ï¼Œå¯¹ m:n è¿æ¥çš„ PCF å»ºæ¨¡ï¼Œä½¿å¾—æ•´ä¸ªè®¡åˆ’çš„æˆæœ¬å¯æ§</p><h2 id="åŸºæ•°-æ–œç‡å¥å£®æ€§æŒ‡æ ‡"><a href="#åŸºæ•°-æ–œç‡å¥å£®æ€§æŒ‡æ ‡" class="headerlink" title="åŸºæ•°-æ–œç‡å¥å£®æ€§æŒ‡æ ‡"></a>åŸºæ•°-æ–œç‡å¥å£®æ€§æŒ‡æ ‡</h2><p><strong>å®šä¹‰ï¼š</strong></p><p>â€œcardinality-slope value Î´f,eâ€ (Florian Wolf ç­‰, 2018, p. 1364)</p><p>â€œedge weighting function Ï† âˆ¶ EP â†’ [0.0, 1.0]â€ (Florian Wolf ç­‰, 2018, p. 1364) è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•å¾—åˆ°çš„ï¼Œå¦‚ä½•è¿›è¡Œæ˜ å°„</p><p>å¯¹æ¯ä¸ªè¾¹çš„è¿ç®—ç¬¦ä¸åŒè¿›è¡Œä¸åŒåœ°èµ‹æƒé‡ï¼Ÿ<br>å¯ä»¥ç®€å•çš„ç»™ç¬›å¡å°”ç§¯è¿æ¥1ï¼Œæœ‰å¤–ç çš„è¿æ¥å’ŒåŸºè¡¨æ‰«æ0</p><p>â€œThe robustness value rÎ´f of the cardinalityslope robustness metricâ€ (Florian Wolf ç­‰, 2018, p. 1364)</p><p><strong>æ€»ç»“ï¼š</strong></p><p>â€œCardinality-Slopeâ€ (Florian Wolf ç­‰, 2018, p. 1364) ç»„æˆ åŸºæ•°-æ–œç‡ å¥å£®æ€§æŒ‡æ ‡çš„<strong>ä¸¤ä¸ªåŸºçŸ³</strong></p><ol><li>åŸºæ•°-æ–œç‡ å€¼</li><li>è¾¹æƒé‡å‡½æ•°</li></ol><p>è§£å†³å“ªäº›è¾¹å¯¹æ€»çš„ä»£ä»·å½±å“è¾ƒå¤§çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å¯¹äºæŸè¾¹å¢åŠ ä¸€ä¸ªå…ƒç»„å¯¹æ€»ä½“æˆæœ¬çš„å½±å“å¤šå¤§</p><p>ä¸»è¦æ˜¯è®¤ä¸ºedgeè¶Šæ·±ï¼Œå¯¹è®¡åˆ’ä»£ä»·çš„å½±å“è¶Šå¤§</p><h2 id="ä¸­é€‰ç‡-æ–œç‡å¥å£®æ€§æŒ‡æ ‡"><a href="#ä¸­é€‰ç‡-æ–œç‡å¥å£®æ€§æŒ‡æ ‡" class="headerlink" title="ä¸­é€‰ç‡-æ–œç‡å¥å£®æ€§æŒ‡æ ‡"></a>ä¸­é€‰ç‡-æ–œç‡å¥å£®æ€§æŒ‡æ ‡</h2><p><strong>å®šä¹‰ï¼š</strong></p><p>â€œselectivity-slope value Î´s,opâ€ (Florian Wolf ç­‰, 2018, p. 1366)</p><p>â€œThe robustness value rÎ´s of the selectivityslope robustness metricâ€ (Florian Wolf ç­‰, 2018, p. 1366)</p><p><strong>æ€»ç»“ï¼š</strong></p><p>â€œSelectivity-Slopeâ€ (Florian Wolf ç­‰, 2018, p. 1366) ä¼°è®¡ä¸­é€‰ç‡ï¼Œè€Œéç´¢å¼•é€‰æ‹©æ€§<br>ç¬¬äºŒä¸ªæŒ‡æ ‡è§£å†³ æ½œåœ¨ <strong>å¤§åŸºæ•°è¯¯å·® delta_f</strong> çš„é—®é¢˜ï¼Œé€šè¿‡å°†f_maxè€ƒè™‘è¿›å…¥ã€‚<br>ç›¸æ¯”äºç¬¬ä¸€ä¸ªæŒ‡æ ‡ï¼Œè¯¥æŒ‡æ ‡å¢åŠ äº†å¯¹æ¯ä¸ªè¾¹æ½œåœ¨æ›´å¤§çš„ åŸºæ•°è¯¯å·® é£é™©çš„è€ƒè™‘ï¼Œé€šè¿‡å¯¹æ¯ä¸ªæ“ä½œç¬¦çš„ä¸­é€‰ç‡è¿›è¡Œè€ƒè™‘</p><h2 id="åŸºæ•°-ç§¯åˆ†å¥å£®æ€§æŒ‡æ ‡"><a href="#åŸºæ•°-ç§¯åˆ†å¥å£®æ€§æŒ‡æ ‡" class="headerlink" title="åŸºæ•°-ç§¯åˆ†å¥å£®æ€§æŒ‡æ ‡"></a>åŸºæ•°-ç§¯åˆ†å¥å£®æ€§æŒ‡æ ‡</h2><p><strong>å®šä¹‰ï¼š</strong></p><p>â€œcardinality-integral value âˆ«f,e for an edge eâ€ (Florian Wolf ç­‰, 2018, p. 1367)</p><p>â€œThe robustness value râˆ«f of the cardinalityintegral robustness metric for a plan Pâ€ (Florian Wolf ç­‰, 2018, p. 1367)</p><p><strong>æ€»ç»“ï¼š</strong></p><p>â€œCardinality-Integralâ€ (Florian Wolf ç­‰, 2018, p. 1366) åŸºæ•°-ç§¯åˆ†ï¼Ÿ</p><p>åœ¨<strong>è®¡åˆ’å¥å£®æ€§</strong>å’Œ<strong>ä¼°è®¡ä»£ä»·</strong>ä¹‹é—´çš„æƒè¡¡<br>è®¤ä¸ºhigh æ¯”deepå½±å“æ›´å¤§ï¼ˆå¯¹æ­¤æŒ‡æ ‡æ¥è¯´ï¼‰</p><h2 id="å¯å‘ï¼š"><a href="#å¯å‘ï¼š" class="headerlink" title="å¯å‘ï¼š"></a>å¯å‘ï¼š</h2><p>åŸºæ•°-æ–œç‡ å¥å£®æ€§æŒ‡æ ‡ï¼š</p><p>â€œreflects the expected difference between estimated and true cost for cardinality estimation errors on all edgesâ€ (Florian Wolf ç­‰, 2018, p. 1367) åæ˜ äº†åŸºæ•°ä¼°è®¡è¯¯å·®å¯¼è‡´çš„å¯¹æˆæœ¬è¯¯å·®çš„å½±å“</p><p>â€œimplicitly considers the potential propagation of cardinality estimation errors, and takes the potential cardinality estimation errors for different types of operators into account.â€ (Florian Wolf ç­‰, 2018, p. 1367)</p><p>ä¸­é€‰ç‡-æ–œç‡ å¥å£®æ€§æŒ‡æ ‡ï¼š</p><p>â€œconsiders the risk of a large absolute cardinality error âˆ†f on all edgesâ€ (Florian Wolf ç­‰, 2018, p. 1367)</p><p>åŸºæ•°-ç§¯åˆ† å¥å£®æ€§æŒ‡æ ‡ï¼š</p><p>â€œdoes not purely focus on plan robustness, but also takes estimated costs into considerationâ€ (Florian Wolf ç­‰, 2018, p. 1367)</p><h1 id="5-è®¡åˆ’å€™é€‰è€…å’Œå¥å£®æ€§è®¡åˆ’çš„é€‰æ‹©"><a href="#5-è®¡åˆ’å€™é€‰è€…å’Œå¥å£®æ€§è®¡åˆ’çš„é€‰æ‹©" class="headerlink" title="5 è®¡åˆ’å€™é€‰è€…å’Œå¥å£®æ€§è®¡åˆ’çš„é€‰æ‹©"></a>5 è®¡åˆ’å€™é€‰è€…å’Œå¥å£®æ€§è®¡åˆ’çš„é€‰æ‹©</h1><p>â€œPLAN CANDIDATES AND SELECTIONâ€ (Florian Wolf ç­‰, 2018, p. 1367) å€™é€‰è®¡åˆ’ å’Œ è®¡åˆ’é€‰æ‹©</p><ol><li>ä½¿ç”¨ k-cheapest plans æšä¸¾å‡º å¥å£®æ€§è®¡åˆ’å€™é€‰è€…ï¼ŒåŒæ—¶é™åˆ¶å€™é€‰è€…åœ¨ åŸºæ•°-æ–œç‡ å’Œ é€‰æ‹©-æ–œç‡ä¸¤ä¸ªå¥å£®æ€§æŒ‡æ ‡ä¸Šæ¥è¿‘æœ€ä¼˜è®¡åˆ’ï¼ˆå…¶ä»£ä»·æ˜¯ ä¼°è®¡æœ€ä¼˜ä»£ä»·çš„1.2å€ï¼‰ï¼›</li><li>é€šè¿‡å¯¹æ¯ä¸ªå€™é€‰è€…è®¡ç®— ä¸‰ä¸ªæŒ‡æ ‡ä¹‹ä¸€ï¼Œæ¥å¾—åˆ°æ¯ä¸ªè®¡åˆ’çš„å¥å£®æ€§å€¼ï¼›</li><li>é€‰æ‹©æœ€å¥å£®çš„è®¡åˆ’æ¥æ‰§è¡Œã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> Paper Reading </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Paper Reading: On the Calculation of Optimality Ranges for Relational Query Execution Plans</title>
      <link href="p/5d3b93c8.html"/>
      <url>p/5d3b93c8.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h1><p> <strong>æœ€ä¼˜èŒƒå›´çš„ç›®çš„</strong> ï¼šæŒ‡å‡ºä½•æ—¶æœ€ä¼˜è®¡åˆ’ä»ç„¶æœ€ä¼˜ã€‚</p><h1 id="æœ€ä¼˜èŒƒå›´è®¡ç®—çš„æ­¥éª¤ï¼š"><a href="#æœ€ä¼˜èŒƒå›´è®¡ç®—çš„æ­¥éª¤ï¼š" class="headerlink" title="æœ€ä¼˜èŒƒå›´è®¡ç®—çš„æ­¥éª¤ï¼š"></a><strong>æœ€ä¼˜èŒƒå›´è®¡ç®—çš„æ­¥éª¤ï¼š</strong></h1><p> <strong>1.æœç´¢åˆ°ä¼°è®¡æœ€ä¼˜è®¡åˆ’ï¼š</strong> ä¸‰ä¸ªå­æ­¥éª¤</p><p> <strong>2.æšä¸¾å¯æ›¿ä»£çš„è®¡åˆ’</strong> ï¼šç”¨åŠ¨æ€è§„åˆ’ç®—æ³•ï¼ˆæˆ‘è®°å¾—ä¹¦ä¸ŠåŠ¨æ€è§„åˆ’ç®—æ³•æ˜¯ç”¨åœ¨æšä¸¾ä»…æœ‰è¿æ¥å’Œé€‰æ‹©çš„æŸ¥è¯¢é‡Œï¼Œæšä¸¾å‡ºæœ€ä¼˜è¿æ¥æ¬¡åºï¼‰å¾—åˆ°çš„ <strong>è¡¨ï¼ˆç”±è®¡åˆ’ç±»ç»„æˆï¼Œæ¯ä¸ªè®¡åˆ’ç±»æœ‰ç›¸åŒå±æ€§ï¼‰</strong> ï¼Œç”¨æ­¤è¡¨æ¥æšä¸¾å¯æ›¿ä»£çš„è®¡åˆ’ï¼ŒåŸºäºæœ€ä¼˜å­ç»“æ„çš„ç‰¹æ€§ï¼Œä½†æ˜¯è¿™æ ·åªèƒ½æšä¸¾ä¸€ä¸ªè®¡åˆ’ç±»çš„åŒ…å«æœ€ä¼˜å­è®¡åˆ’çš„æ›¿ä»£è®¡åˆ’ã€‚ä½†æ˜¯æ­¤ç®—æ³•éœ€è¦è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„è®¡åˆ’ç±»ï¼Œä¸åªæ˜¯åŒ…å«ï¼ˆä¾èµ–äºï¼‰DPC çš„ç®—æ³•ï¼Œéœ€è¦ç”¨å‰ªæç®—æ³•ï¼Œéœ€è¦è€ƒè™‘ä¸æ­¢åŒ…å«æœ€ä¼˜å­è®¡åˆ’çš„å¯æ›¿ä»£è®¡åˆ’</p><p> <strong>ç¬¬äºŒä¸ªåŸºçŸ³ï¼šOPCï¼ˆOptimal Plan Containerï¼‰</strong> ç”¨äº <strong>ç®—æ³•2ï¼ˆå‰ªæç®—æ³•ï¼‰</strong> å¾—åˆ°è¾ƒå°‘çš„å¯æ›¿ä»£è®¡åˆ’é›†åˆã€‚å‰ªæ</p><p><strong>3.è®¡ç®—æœ€ä¼˜è®¡åˆ’çš„æœ€ä¼˜èŒƒå›´ï¼š</strong></p><p>ç»™å®šä¸€ä¸ªæˆæœ¬å‡½æ•°ï¼ˆä¹Ÿå¯ä»¥æ˜¯éçº¿æ€§å‡½æ•°ï¼‰ï¼Œ**$C_{out}$<strong>ç­‰çº¿æ€§å‡½æ•°å¯ä»¥ï¼Œï¼ˆ <strong>ç¬¬ä¸€ä¸ªåŸºçŸ³ï¼‰</strong> æ ¹æ®è¯¥æˆæœ¬å‡½æ•°å¾—åˆ°æœ€ä¼˜è®¡åˆ’å…³äºæŸä¸ª å¾…æ±‚æœ€ä¼˜èŒƒå›´ çš„å­è®¡åˆ’çš„ <strong>PCFs</strong> ï¼Œå°†å…¶ä¸ å¯æ›¿ä»£è®¡åˆ’çš„PCFsæ±‚å¾—</strong>äº¤å‰ç‚¹ï¼Œç”¨äºç®—æ³•1è®¡ç®—å¾—åˆ°ç´§è‡´çš„æœ€ä¼˜èŒƒå›´ã€‚**</p><p><strong>æœ€ä¼˜èŒƒå›´çš„è®¡ç®—ï¼š</strong></p><ol><li>é€šè¿‡æŸ¥è¯¢ä¼˜åŒ–æ—¶çš„ <strong>åŠ¨æ€è§„åˆ’æšä¸¾ç®—æ³•</strong> ï¼Œå¾—åˆ°  <strong>æœ€ä¼˜è®¡åˆ’ å’Œ ç»´æŒè¯¥åŠ¨æ€è§„åˆ’è¡¨ï¼ˆç”±è®¡åˆ’ç±»ç»„æˆï¼Œè®¡åˆ’ç±»ä¸­çš„è®¡åˆ’æ‹¥æœ‰ç›¸åŒçš„é€»è¾‘å±æ€§ï¼Œä¾‹å¦‚å¼•ç”¨äº†ç›¸åŒçš„å…³ç³»é›†åˆï¼‰</strong> ï¼›</li><li>é€‰æ‹©è¯¥è¡¨ä¸­ä¸€ä¸ªå«æœ‰æœ€ä¼˜è®¡åˆ’éƒ¨åˆ†çš„è®¡åˆ’ç±»<strong>ï¼ˆæƒ³è¦è®¡ç®—æœ€ä¼˜èŒƒå›´çš„è®¡åˆ’ç±»ï¼‰ï¼Œå°†å…¶ä½œä¸ºDPCï¼ˆDependent Plans Classï¼‰ï¼Œåˆå§‹åŒ–æœ€ä¼˜èŒƒå›´</strong>ä¸º[0;âˆ]</li><li>æ ¹æ®DPCçš„outgoing edgeè®¡åˆ’ç±»åŠå…¶å¯æ›¿ä»£è®¡åˆ’è®¡ç®—DPCçš„æœ€ä¼˜èŒƒå›´ï¼›<ol><li>ä¾æ¬¡å¯¹outgoing edgeçš„è®¡åˆ’ç±»è®¡ç®—ï¼Œåå¤å¯¹æœ€ä¼˜èŒƒå›´è¿›è¡Œç´§è‡´ï¼›</li><li><strong>æšä¸¾</strong>æœ€ä¼˜è®¡åˆ’çš„å­è®¡åˆ’çš„ä¸Šè¿° <strong>æ›¿ä»£è®¡åˆ’</strong> ï¼Œå¯ä»¥ä½¿ç”¨ <strong>ç®—æ³•2ï¼ˆå‰ªæç®—æ³•ï¼‰</strong> å¾—åˆ°æ›´å°‘çš„æ›¿ä»£è®¡åˆ’ï¼›</li><li>é€šè¿‡å¯¹æ‰€æœ‰æšä¸¾è®¡åˆ’ <strong>å»ºæ¨¡ä¸ºPCF</strong> ï¼Œå…¶ä¸­DPCä½œä¸º<strong>å‚æ•°</strong></li><li>ç”¨æœ€ä¼˜è®¡åˆ’çš„å­è®¡åˆ’çš„ PCF å’Œå…¶ä»–æ›¿ä»£è®¡åˆ’ä¾æ¬¡æ¯”è¾ƒï¼Œ<strong>è®¡ç®—äº¤å‰ç‚¹</strong></li><li><strong>é€šè¿‡ç®—æ³•1</strong>å°†æœ€ä¼˜èŒƒå›´ç´§è‡´ã€‚è‹¥äº¤å‰ç‚¹è¶…è¿‡å½“å‰æœ€ä¼˜èŒƒå›´ï¼Œåˆ™èˆå¼ƒï¼›</li></ol></li><li>å¾—åˆ° DPC ä½¿å¾—æœ€ä¼˜è®¡åˆ’ä¿æŒæœ€ä¼˜çš„æœ€ä¼˜èŒƒå›´ã€‚</li></ol><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>æ²¡æœ‰å¼•å…¥å‰ªæçš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘æ‰€æœ‰çš„æ›¿ä»£è®¡åˆ’ï¼ŒåŒ…å«DPCçš„æ‰€æœ‰è®¡åˆ’ï¼Ÿ<br>ä¾‹å¦‚æœ€åä¸€ä¸ªè®¡åˆ’ç±»ä¸­çš„ RSTUï¼ŒVçš„æ›¿ä»£è®¡åˆ’ä¸­ï¼ŒRSTUä¾èµ–äºDPCï¼Œä»æœ‰æ›¿ä»£è®¡åˆ’å¯æšä¸¾ã€‚</li><li>PCFs å¯ä»¥æœ‰å¤šä¸ªå‚æ•°å’Œå¯ä»¥æ˜¯çº¿æ€§æˆ–éçº¿æ€§ã€‚</li></ul><h1 id="æƒ³æ³•"><a href="#æƒ³æ³•" class="headerlink" title="æƒ³æ³•"></a>æƒ³æ³•</h1><p><strong>â€œOnce a cardinality is out of its optimality range, the cached plan is not optimal anymore and evicted from the cacheâ€</strong> <strong>(<strong>Florian Wolf ç­‰, 2018, p. 9</strong>)</strong> æ€ä¹ˆ<strong>åˆ¤æ–­ä¸€ä¸ªå·²ç»ç¼“å­˜çš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’è¿‡æ—¶ï¼Ÿ</strong><br>å°±åœ¨ç¼“å­˜è¯¥æŸ¥è¯¢è®¡åˆ’æ—¶ï¼ŒåŒæ—¶ä¿å­˜è¯¥è®¡åˆ’çš„æœ€ä¼˜èŒƒå›´ï¼Œ<strong>æ‰§è¡Œæ—¶é€šè¿‡å¾—åˆ°çš„ä¸­é—´ç»“æœåŸºæ•°ä¸æœ€ä¼˜èŒƒå›´è¿›è¡Œæ¯”è¾ƒ</strong>æ¥åˆ¤æ–­æ˜¯å¦è¿‡æ—¶ã€‚<br><strong>è‹¥è¿‡æ—¶ï¼Œåˆ™æ‰¾åˆ°æœ€å¥å£®çš„è®¡åˆ’æ‰§è¡Œï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</strong></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> Paper Reading </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Cardinality Estimation </tag>
            
            <tag> Optimizer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Paper Reading: Plan Stitch: Harnessing the Best of Many Plans</title>
      <link href="p/116cd8bd.html"/>
      <url>p/116cd8bd.html</url>
      
        <content type="html"><![CDATA[<h1 id="Title"><a href="#Title" class="headerlink" title="Title"></a>Title</h1><p>â€œPlan Stitch: Harnessing the Best of Many Plansâ€ (Ding ç­‰, 2018, p. 1123) <strong>ã€</strong></p><p>è®¡åˆ’<strong>ç¼åˆ</strong>ï¼šåˆ©ç”¨ä¼—å¤šè®¡åˆ’çš„<strong>ç²¾å/æœ€ä¼˜</strong></p><p>ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li>ç¼åˆ</li><li>ç²¾å/æœ€ä¼˜</li></ol><p>å¯¹æœ¬ç§‘æ¯•è®¾çš„æœ€åä¸€æ­¥æˆ–è®¸æœ‰å¸®åŠ©ï¼šåŸºäºPlanæ¨¡ç‰ˆè¿›è¡Œæ‹¼æ¥å’Œä¿®æ”¹ã€‚<br>ã€‘</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>â€œABSTRACTâ€ (Ding ç­‰, 2018, p. 1123) ã€<br>æ‘˜è¦ï¼š<br><strong>èƒŒæ™¯ï¼š</strong><br>æŸ¥è¯¢ä¼˜åŒ–å™¨é€‰æ‹©ä¸€ä¸ªéæœ€ä¼˜çš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼Œä¼šå¯¼è‡´æŸ¥è¯¢æ€§èƒ½çš„ä¸‹é™ã€‚<br>ç°å¦‚ä»Šçš„å•†ä¸š DBMS ä¼šé€‰æ‹©ä½¿ç”¨ Reversion-based plan correction æ¥è§£å†³è¯¥é—®é¢˜ã€‚å…¶åŸç†æ˜¯åœ¨æ£€æµ‹åˆ°å‡ºç°æŸ¥è¯¢æ€§èƒ½é™ä½æ—¶ï¼Œé‡æ–°çº æ­£â€”â€”ä½¿ç”¨ä¹‹å‰ä»ç„¶æœ‰æ•ˆä¸”å…·æœ‰æœ€ä½æ‰§è¡Œä»£ä»·çš„æ—§è®¡åˆ’ã€‚</p><p><strong>çœŸæ­£çš„å‘ç°ï¼š</strong><br>RBPC çš„åŸºæœ¬åŸç†ä½¿å¾—å…¶é£é™©å¾ˆå°ï¼Œä½†æ˜¯å¿½ç•¥äº†æ›´åŠ æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹å¼â€”â€”<strong>ä»ä¹‹å‰æ‰§è¡Œè®¡åˆ’çš„é«˜æ•ˆ *å­è®¡åˆ’* ä¸­è·å¾—æ½œåœ¨ä»·å€¼çš„ä¿¡æ¯ï¼</strong>è¿™ä¼šæ¯”å•ç‹¬æ—§çš„æ‰§è¡Œè®¡åˆ’ ä»£ä»·æ›´ä½ã€‚</p><p><strong>ç ”ç©¶æˆæœï¼š</strong><br>åœ¨ Microsoft SQL Server ä¹‹ä¸Šå®ç° Plan Stitch æ–¹æ³•ï¼Œç»è¿‡ TPC-DS æµ‹è¯•ï¼Œæ˜¾è‘—é™ä½æ‰§è¡Œä»£ä»·ã€‚</p><p>ã€‘</p><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>â€œINTRODUCTIONâ€ (Ding ç­‰, 2018, p. 1123) ã€<br>å¼•è¨€ï¼š</p><p><strong>å…³äºä»€ä¹ˆï¼š</strong></p><p>åŒä¸€ä¸ªæŸ¥è¯¢æ‰€å¾—åˆ°çš„æŸ¥è¯¢è®¡åˆ’ä¼šå› ä¸ºå„ç§åŸå› æ›´æ”¹ï¼Œæ›´æ”¹ä¹‹åå¯èƒ½ä¼šå¯¼è‡´ <strong>è®¡åˆ’å›å½’</strong> çš„é—®é¢˜ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯ä¼˜åŒ–å™¨æ‰€é€‰æ‹©çš„æœ€æ–°æŸ¥è¯¢è®¡åˆ’æ‰§è¡Œä»£ä»·æ¯”åŸå…ˆé«˜ã€‚<br>ä½†æ˜¯ç›®å‰å•†ä¸šæ•°æ®åº“ç³»ç»Ÿä¸­çš„è§£å†³æ–¹æ³•â€”â€” RBPC æ‰€ç”Ÿæˆçš„è®¡åˆ’æ•ˆç‡ä¸Šä¸Šå‡ç©ºé—´è¿˜å¾ˆå¤§ã€‚</p><p><strong>è§£å†³çš„æ–¹æ³•</strong>ï¼š</p><p>åœ¨ Microsoft SQL Server çš„åŸºç¡€ä¸Šï¼Œå®ç°äº† Plan Stitch ï¼Œæ˜¯ä¸€ä¸ªæ¯” RBPC æ›´é«˜æ•ˆçš„ APC ç­–ç•¥ã€‚<br>é€šè¿‡è€ƒè™‘åŒä¸€ä¸ªæŸ¥è¯¢çš„ è¿‡å»<strong>å·²æ‰§è¡Œçš„è®¡åˆ’ä»¥åŠå…¶å­è®¡åˆ’</strong>ï¼š</p><ol><li>åœ¨<strong>å—é™åˆ¶çš„æœç´¢ç©ºé—´ï¼ˆæœ‰ç›¸åŒçš„é€»è¾‘è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åœ¨å½“å‰çš„é…ç½®ç¯å¢ƒä¸­æœ‰æ•ˆï¼‰</strong>ä¸­ï¼Œé€šè¿‡æ¯”è¾ƒç›¸åŒé€»è¾‘è¡¨è¾¾å¼çš„<strong>å¯æ›¿ä»£å­è®¡åˆ’</strong>ï¼Œæ¥å‘ç°<strong>é«˜æ•ˆçš„å­è®¡åˆ’</strong>ï¼›</li><li>ç”¨ <strong>åŸºäºåŠ¨æ€è§„åˆ’ç®—æ³•</strong> çš„<strong>é«˜æ•ˆã€äºŒæ¬¡æ—¶é—´å¤æ‚åº¦</strong>çš„ç®—æ³•å°†è¿™äº›<strong>é«˜æ•ˆå­è®¡åˆ’</strong>ï¼Œ<strong>åˆå¹¶æˆåœ¨æ‰§è¡Œä»£ä»·ä¸Šæœ€ä½çš„ç¼åˆè®¡åˆ’</strong>ï¼›</li><li>ç”¨<strong>è®¡åˆ’å¼ºåˆ¶ç‰¹å¾</strong>æ¥å½±å“ä¼˜åŒ–å™¨çš„è®¡åˆ’é€‰æ‹©ï¼Œä»¥éªŒè¯è®¡åˆ’çš„<strong>æœ‰æ•ˆæ€§</strong>ã€‚</li></ol><p><strong>è¿·äººçš„åœ°æ–¹</strong>ï¼š</p><p>åœ¨ RBPC çš„åŸºç¡€ä¸Šï¼Œæ‰¾åˆ°äº†å¯ä»¥æå‡çš„åœ°æ–¹ï¼šåœ¨<strong>ç‰©ç†ç®—å­å±‚é¢</strong>å¯¹æ‰§è¡Œä»£ä»·è¿›è¡Œä¼˜åŒ–ï¼Œé€šè¿‡<strong>å·²æ‰§è¡Œè®¡åˆ’çš„å­è®¡åˆ’ç¼åˆ</strong>æ¥ä½“ç°ã€‚<br>æ‹¥æœ‰ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>å…¨è‡ªåŠ¨</li><li>ä½å¼€é”€</li><li>ä½é£é™©</li></ol><p><strong>æ–°é¢–çš„åœ°æ–¹ï¼š</strong><br>å°†è¿‡å»å·²æ‰§è¡Œçš„è®¡åˆ’çš„å­è®¡åˆ’è¿›è¡Œç¼åˆã€‚</p><p><strong>çœ¼å‰ä¸€äº®çš„ç»“è®º</strong>ï¼š</p><p>é€šè¿‡ TPC-DS å’Œä¸‰ä¸ªçœŸå®çš„ç”¨æˆ·è´Ÿè½½å½“åšå®éªŒç¯å¢ƒï¼Œå‘ç° Plan Stitch ç›¸æ¯”è¾ƒäº RBPC çš„æå‡å¾ˆå¤§ã€‚</p><p>ã€‘</p><h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>â€œOVERVIEWâ€ (Ding ç­‰, 2018, p. 1125) ã€Œ<br><strong>Overview</strong>ï¼š<br><strong>é—®é¢˜é™ˆè¿°</strong>ï¼š<br>Plan Stitch ä¸ºç»™å®šçš„æŸ¥è¯¢ q æ„å»ºä¸€ä¸ªæœ‰æœ€ä½æ‰§è¡Œä»£ä»·çš„æŸ¥è¯¢è®¡åˆ’ pï¼Œpæœ‰ä¸€ä¸ªé™åˆ¶ï¼šåœ¨pä¸­çš„æ¯ä¸€ä¸ªç®—å­ï¼Œéƒ½åªèƒ½ä» <strong>è¿‡å»å·²æ‰§è¡Œçš„è®¡åˆ’</strong> ä¸­è·å–ã€‚</p><p><strong>æ¶æ„æ¦‚è¿°ï¼š</strong><br><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/03/image-20230304220524436.png" alt="image-20230304220524436"></p><p>Plan Stitch åœ¨<strong>æŸ¥è¯¢ä¼˜åŒ–å’Œæ‰§è¡Œ</strong>çš„å…³é”®è·¯å¾„ä¹‹å¤–å·¥ä½œï¼Œä½œä¸º<strong>å¤–éƒ¨ç»„ä»¶æˆ–è€…èƒŒæ™¯çº¿ç¨‹ã€‚</strong></p><ol><li><strong>ä¼˜åŒ–å™¨</strong>ä¸º <strong>ç»™å®šçš„æŸ¥è¯¢</strong>å’Œ<strong>ç°åœ¨çš„é…ç½®</strong> é€‰æ‹©ä¸€ä¸ªè®¡åˆ’ï¼Œè®¡åˆ’æ‰§è¡Œå¹¶ä¸”å°†<strong>æ‰§è¡Œæ—¶çš„ç»Ÿè®¡ä¿¡æ¯</strong>è¢«è®°å½•åœ¨<strong>ä»“åº“</strong>ä¸­ã€‚ æ‰§è¡Œçš„ç»Ÿè®¡ä¿¡æ¯â€”â€”è®¡åˆ’ç»“æ„å’Œç®—å­çº§åˆ«çš„æ‰§è¡Œä»£ä»·ã€‚</li></ol><ol start="2"><li>ä»“åº“ <strong>ä¸»åŠ¨æ”¶é›†</strong>è®¡åˆ’çš„å†å²ï¼ŒåŒ…æ‹¬<strong>åŒä¸€ä¸ªæŸ¥è¯¢çš„å·²ç»æ‰§è¡Œçš„ä¸åŒè®¡åˆ’</strong></li></ol><ol start="3"><li>å½“<strong>åŒä¸€ä¸ªæŸ¥è¯¢</strong>çš„ä¸åŒè®¡åˆ’å·²ç»æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œä¿¡æ¯åœ¨ä»“åº“ä¸­å¯ç”¨ï¼š<strong>è§¦å‘</strong> Plan Stitch æ¥æŸ¥æ‰¾å¯æ›¿ä»£çš„ <strong>æ‹¼æ¥è®¡åˆ’</strong>ã€‚</li></ol><p>3.1 è§¦å‘åï¼ŒPlan Stitch <strong>ä»ä»“åº“ä¸­è·å¾—å·²æ‰§è¡Œè®¡åˆ’</strong>ï¼Œä» å…ƒæ•°æ® ä¸­<strong>è·å¾—ç°åœ¨çš„ç´¢å¼•é…ç½®</strong>ã€‚<br>3.2 Plan stitch å°†æœ€ç»ˆç”Ÿæˆçš„<strong>ç¼åˆ plan ä¼ ç»™ä¼˜åŒ–å™¨</strong>ï¼Œå¯ä»¥ç”¨äº æŸ¥è¯¢ q æœªæ¥çš„æ‰§è¡Œã€‚<br>4 Plan stitch ä¼šç”¨ <strong>å¼ºåˆ¶ç‰¹å¾ç³»ç»Ÿ</strong> <strong>æŒ‡å®šæŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’æš—ç¤º</strong>ï¼Œä½¿å¾—ä¼˜åŒ–å™¨ç”¨æ­¤æš—ç¤ºæ¥åœ¨è®¡åˆ’æœç´¢<strong>è¿›è¡Œå‰ªæ</strong>ã€‚<br>5 ä»“åº“ä¼šå¯¹æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’è¿›è¡Œ<strong>è¶…é¾„åˆ¤æ–­</strong>ï¼Œä»¥ç¡®ä¿åœ¨æ•°æ®å˜åŒ–æ—¶ Plan Stitch <strong>ä»£ä»·ä¼°è®¡çš„å‡†ç¡®</strong>ã€‚</p><p>ã€</p><h1 id="Plan-Stitchï¼ˆæ ¸å¿ƒï¼‰"><a href="#Plan-Stitchï¼ˆæ ¸å¿ƒï¼‰" class="headerlink" title="Plan Stitchï¼ˆæ ¸å¿ƒï¼‰"></a>Plan Stitchï¼ˆæ ¸å¿ƒï¼‰</h1><h2 id="Constrained-Search-Space"><a href="#Constrained-Search-Space" class="headerlink" title="Constrained Search Space"></a>Constrained Search Space</h2><p>â€œConstrained Search Spaceâ€ (Ding ç­‰, 2018, p. 1126) ã€Œ<br>ç”Ÿæˆå—é™æœç´¢ç©ºé—´åˆ†ä¸¤ä¸ªæ­¥éª¤ï¼š<br>ä¸€ã€è¯†åˆ«ç­‰ä»·çš„å­è®¡åˆ’ï¼š<br>æ˜¯å¦ç­‰æ•ˆ</p><ol><li>é€»è¾‘è¡¨è¾¾å¼ ç›¸åŒ</li><li>éœ€è¦çš„ç‰©ç†å±æ€§ ç›¸åŒ</li></ol><p><strong>ä¹‹å‰çš„å·¥ä½œï¼š</strong><br>tests å’Œ greedy ç®—æ³•</p><p><strong>æœ¬æ–‡ç« çš„å®ç°ï¼š</strong><br>è‡ªå·±å®ç°çš„å…³äº<strong>åŒ¹é…ç­‰æ•ˆå­è®¡åˆ’</strong>çš„ç®—æ³•ï¼š<br>  ç”¨ç±»ä¼¼äºä¹‹å‰å·¥ä½œçš„å¯å‘å¼ æä¾›åœ¨å®ç°ç®€æ˜“ã€å¼€é”€å’ŒåŒ¹é…çš„å‡†ç¡®åº¦ä¸­ çš„åˆç†å¹³è¡¡ã€‚<br>  ç”¨ä¼˜åŒ–å™¨æ¥ç¡®ä¿ç¼åˆè®¡åˆ’çš„å‡†ç¡®ï¼Œä»¥å½“ä½œè®¡åˆ’å¼ºåˆ¶çš„å‰¯ä½œç”¨ã€‚</p><p><strong>äºŒã€ç¼–ç å—é™çš„æœç´¢ç©ºé—´</strong></p><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/03/image-20230304220502732.png" alt="image-20230304220502732"></p><p>æ„é€ ä¸€ä¸ª AND-OR å›¾ï¼ˆå‚è€ƒVolcano ä¼˜åŒ–å™¨ç”Ÿæˆå™¨çš„æ–‡ç« ï¼Ÿï¼‰ã€‚<br>- <strong>AND èŠ‚ç‚¹</strong>å¯¹åº” physical operator<br>- <strong>OR èŠ‚ç‚¹</strong>å¯¹åº” ä¸€ä¸ªæœ‰ç€ physical properties çš„ logical expression<br>ä¸ºä»€ä¹ˆä½¿ç”¨ AND-ORå›¾ï¼š</p><ol><li>ä¸€ä¸ªANDèŠ‚ç‚¹çš„æ‰€æœ‰å­©å­èŠ‚ç‚¹ä¸€å®šæ˜¯ORèŠ‚ç‚¹ï¼šOR å­èŠ‚ç‚¹ ä»£è¡¨ AND èŠ‚ç‚¹çš„å­©å­å­è®¡åˆ’å¯¹åº”çš„logical expr å’Œ æ‰€éœ€ physical properties</li></ol><ol start="2"><li>ä¸€ä¸ªORèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ä¸€å®šæ˜¯ANDèŠ‚ç‚¹ï¼šAND å­èŠ‚ç‚¹ä»£è¡¨ OR èŠ‚ç‚¹å¯¹åº” Logical Expression çš„ å¯æ›¿ä»£å­è®¡åˆ’çš„ æ ¹ç‰©ç†ç®—å­</li></ol><p><strong>å…·ä½“æ„é€ è¿‡ç¨‹</strong>ï¼š</p><ol><li>é¦–å…ˆï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„æŸ¥è¯¢ï¼Œåœ¨å®ƒå¯¹åº”å·²æ‰§è¡Œçš„æ‰€æœ‰æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œåˆ†åˆ«è¯†åˆ«å‡ºæ¯ä¸ªä»¥ç‰©ç†ç®—å­ä¸ºæ ¹çš„å­è®¡åˆ’çš„æ‰€æœ‰ç­‰æ•ˆå­è®¡åˆ’ï¼›</li><li>å¯¹äºä¸€ä¸ªç­‰æ•ˆå­è®¡åˆ’ç»„ï¼Œåˆ›å»ºä¸€ä¸ª OR èŠ‚ç‚¹æ¥ä»£è¡¨è¿™ä¸ªå­è®¡åˆ’ç»„çš„é€»è¾‘è¡¨è¾¾å¼å’Œéœ€è¦çš„çš„ç‰©ç†å±æ€§ï¼›</li><li>å¯¹äºè¿™ä¸ªç»„ä¸­æ¯ä¸ªå­è®¡åˆ’çš„ç‰©ç†ç®—å­ï¼Œåœ¨è¯¥ OR èŠ‚ç‚¹ä¸‹åˆ†åˆ«åˆ›å»ºå­èŠ‚ç‚¹ ANDã€‚</li></ol><p>ã€</p><h2 id="Constructing-the-Stitched-Plan"><a href="#Constructing-the-Stitched-Plan" class="headerlink" title="Constructing the Stitched Plan"></a>Constructing the Stitched Plan</h2><p>â€œConstructing the Stitched Planâ€ (Ding ç­‰, 2018, p. 1126) ã€Œ<br><strong>æ„å»ºç¼åˆè®¡åˆ’ï¼š</strong><br>AND-OR å›¾çš„ä¸¤ä¸ªæ€§è´¨ï¼š</p><ol><li>æ— ç¯å›¾</li><li>è‡³å°‘æœ‰ä¸€ä¸ª OR èŠ‚ç‚¹ï¼Œä»£è¡¨è¯¥æŸ¥è¯¢</li></ol><p>æ¦‚è¿°ï¼šä½¿ç”¨ åŠ¨æ€è§„åˆ’ ç®—æ³•ï¼Œä»å¶å­ AND èŠ‚ç‚¹åˆ° æ ¹ OR èŠ‚ç‚¹ï¼Œä¸ºæ¯ä¸€ä¸ª AND èŠ‚ç‚¹ å’Œ ORèŠ‚ç‚¹ ç¼åˆä¸€ä¸ªä»£ä»·æœ€ä½çš„ç¼åˆè®¡åˆ’ã€‚</p><p><strong>åˆ†æƒ…å†µè·å¾—æœ€ä¼˜ç¼åˆè®¡åˆ’ï¼š</strong></p><p>å¶å­å±‚çš„æœ€ä¼˜ç¼åˆè®¡åˆ’ï¼šå°±æ˜¯ AND èŠ‚ç‚¹è‡ªå·±<br>ORèŠ‚ç‚¹çš„æœ€ä¼˜ç¼åˆè®¡åˆ’ï¼šä»å­ AND èŠ‚ç‚¹ä¸­æ‰¾åˆ°æœ€ä½ä»£ä»·çš„ç¼åˆè®¡åˆ’<br>éå¶å­ANDèŠ‚ç‚¹çš„æœ€ä¼˜ç¼åˆè®¡åˆ’ï¼šå°†å…¶æ¯ä¸ªå­ORèŠ‚ç‚¹çš„æœ€ä¼˜ç¼åˆå­è®¡åˆ’ï¼Œç¼åˆåˆ° AND èŠ‚ç‚¹å¯¹åº”çš„ ç‰©ç†ç®—å­ä¸‹ï¼Œå½“åšä¸€ä¸ªä¸€ANDèŠ‚ç‚¹ä¸ºæ ¹çš„ç¼åˆå­è®¡åˆ’</p><p><strong>è®¡ç®—ç¼åˆè®¡åˆ’çš„ä»£ä»·ï¼š</strong></p><p>- æ¯ä¸ªç®—å­éƒ½å­˜å‚¨ç€è¿‡å»æ‰§è¡Œæ—¶çš„ä»£ä»·ã€‚é€šè¿‡æ¯”è¾ƒä»£ä»·æ¥å¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æœ€ä¼˜ç¼åˆè®¡åˆ’ã€‚<br>- ä½¿ç”¨å‡½æ•° stitchedSubUnitCost æ¥è®¡ç®—ä»¥opä¸ºæ ¹çš„ç¼åˆè®¡åˆ’çš„ä»£ä»·ã€‚</p><p>ã€</p><h2 id="Stitch-ALgorithm"><a href="#Stitch-ALgorithm" class="headerlink" title="Stitch ALgorithm"></a>Stitch ALgorithm</h2><p>å°†ç®—æ³•1å’Œå›¾3ç»“åˆèµ·æ¥å¯ä»¥å¾ˆå®¹æ˜“ç†è§£ã€‚<br>æ ¹æ®è¾“å…¥çš„ AND-OR å›¾ï¼Œè‡ªåº•å‘ä¸Šåœ°åˆ©ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•å®ç° æ ¹ORèŠ‚ç‚¹ çš„æœ€å»‰ä»·ç¼åˆå­è®¡åˆ’ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> Paper Reading </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Plan Cache </tag>
            
            <tag> Optimizer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to read a paper</title>
      <link href="p/b4607f97.html"/>
      <url>p/b4607f97.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>â€œæˆ–è®¸ä½ æ°¸è¿œä¸çŸ¥é“ä½ ä»¥å‰è¯»è¿‡çš„ä¹¦èƒ½åœ¨ä»€ä¹ˆæ—¶å€™èƒ½å¤Ÿæ´¾ä¸Šç”¨åœºï¼Œä½†è¯·ä¿æŒé˜…è¯»ï¼Œå› </strong>ä¸ºé˜…è¯»çš„è¿‡ç¨‹ä¹Ÿæ˜¯åœ¨ä½ å¤§è„‘ä¸­å»ºç«‹è®¤çŸ¥çš„è¿‡ç¨‹ã€‚â€</p></blockquote><blockquote><p><strong>â€œæ·±åº¦é˜…è¯»è®ºæ–‡ï¼Œè¦æ•¢äºå¯¹è®ºæ–‡è´¨ç–‘ï¼Œè´¨ç–‘è®ºæ–‡ä½œè€…çš„ç ”ç©¶æ–¹æ³•ã€æ€è·¯ã€æŠ€å·§ã€‚è¿˜è¦è®¾èº«å¤„åœ°å»æƒ³ï¼šå¦‚æœæˆ‘æ¥å†™è¿™ç¯‡è®ºæ–‡ï¼Œæˆ‘èƒ½ç”¨ä»€ä¹ˆæ–¹æ³•ã€‚â€</strong></p></blockquote><blockquote><p>åœ¨ç ”ç©¶ç”Ÿé™¢è¯»ä¹¦æ˜¯äººç”Ÿä¸­æœ€ç¾å¥½çš„æ—¶å…‰ï¼Œåœ¨è¿™æ®µæ—¶é—´ä½ å¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„é’±ï¼Œä½†æ˜¯å´æœ‰è¶³å¤Ÿçš„æ—¶é—´å­¦ä¹ ã€‚</p><p>åœ¨è¯»ä¹¦çš„è¿™æ®µæ—¶é—´åº”è¯¥å­¦ä¹ ä¸€äº›é‡è¦çš„æŠ€èƒ½ï¼Œæ¯”å¦‚<strong>æœ‰æ•ˆçš„é˜…è¯»ã€å†™ä½œå’Œæ¼”è®²</strong></p></blockquote><h1 id="åˆ’åˆ†å±‚æ¬¡ç»“æ„"><a href="#åˆ’åˆ†å±‚æ¬¡ç»“æ„" class="headerlink" title="åˆ’åˆ†å±‚æ¬¡ç»“æ„"></a>åˆ’åˆ†å±‚æ¬¡ç»“æ„</h1><blockquote><p>é™¤äº†é˜…è¯»çš„æ–¹å¼(å¿«é€Ÿé˜…è¯»ã€ä»”ç»†é˜…è¯»å’Œåˆ›é€ æ€§é˜…è¯»)ï¼Œè¯»è€…è¿˜è¦<strong>ç†è§£æ‰€è¯»çš„è®ºæ–‡æ˜¯å¦‚ä½•å†™å‡ºæ¥</strong>çš„ã€‚å› ä¸ºä¸€ç¯‡å¥½çš„è®ºæ–‡åœ¨é€»è¾‘ä¸Šæ˜¯å±‚å±‚é€’è¿›çš„ï¼Œä¸ä»…èƒ½å¤Ÿä¼ è¾¾ä¿¡æ¯ä¹Ÿèƒ½å¤Ÿæ¿€åŠ±è¯»è€…ã€‚æ‰€ä»¥ä½œè€…åœ¨å†™çš„æ—¶å€™ä¹Ÿæ˜¯<strong>æœ‰ç»“æ„åŒ–çš„é€»è¾‘æ€§æ€è€ƒç¨‹åº¦çš„</strong>ã€‚æ€»ä½“ä¸Š<strong>ä½œè€…ä¼šæ€è€ƒï¼šè¿™ç¯‡è®ºæ–‡çš„çœŸå®ä»»åŠ¡æ˜¯ä»€ä¹ˆã€ç ”ç©¶å‘ç°æ˜¯ä»€ä¹ˆï¼›è®ºæ–‡çš„è´¡çŒ®æ˜¯ä»€ä¹ˆ</strong>ç­‰ç­‰ã€‚</p><p>ç›¸åº”çš„ï¼Œè¯»è€…åœ¨è¯»è®ºæ–‡çš„æ—¶å€™ä¹Ÿåº”è¯¥è¦æœ‰é€»è¾‘ï¼Œ<strong>é¦–å…ˆè¦æ¸…æ¥šè®ºæ–‡ä¸­çš„è¡¨è¾¾æ˜¯å¦æ˜¯æˆ‘æƒ³è¦å­¦ä¹ åˆ°çš„ï¼›å…¶æ¬¡ï¼Œæˆ‘èƒ½ä»è®ºæ–‡ä¸­å­¦åˆ°å¤šå°‘å‘¢ï¼›æœ€åï¼Œè¿™ç¯‡è®ºæ–‡çš„èƒŒæ™¯æ˜¯ä»€ä¹ˆâ€”â€”æ˜¯ä»€ä¹ˆæ ·çš„èƒŒæ™¯è®©è¿™ç¯‡è®ºæ–‡å˜å¾—é‡è¦å’Œæœ‰è¶£</strong>ã€‚</p></blockquote><h1 id="1-å¿«é€Ÿé˜…è¯»ï¼šåˆ’åˆ†å±‚æ¬¡ç»“æ„"><a href="#1-å¿«é€Ÿé˜…è¯»ï¼šåˆ’åˆ†å±‚æ¬¡ç»“æ„" class="headerlink" title="1 å¿«é€Ÿé˜…è¯»ï¼šåˆ’åˆ†å±‚æ¬¡ç»“æ„"></a>1 å¿«é€Ÿé˜…è¯»ï¼šåˆ’åˆ†å±‚æ¬¡ç»“æ„</h1><h2 id="1-1-è®ºæ–‡ä¸­çš„è¡¨æ ¼å’Œå›¾ç‰‡"><a href="#1-1-è®ºæ–‡ä¸­çš„è¡¨æ ¼å’Œå›¾ç‰‡" class="headerlink" title="1.1 è®ºæ–‡ä¸­çš„è¡¨æ ¼å’Œå›¾ç‰‡"></a>1.1 è®ºæ–‡ä¸­çš„è¡¨æ ¼å’Œå›¾ç‰‡</h2><blockquote><p>åªè¦<strong>å¼„æ¸…æ¥šè®ºæ–‡ä¸­è¡¨æ ¼å’Œå›¾ç‰‡çš„æ ‡é¢˜å’Œæ³¨é‡Š</strong>ï¼Œå°±èƒ½å¤Ÿè·å¾—è¿™ç¯‡è®ºæ–‡å…«ã€ä¹æˆçš„ä¿¡æ¯ã€‚</p></blockquote><ul><li>å¿…é¡»è¦ç†è§£ <strong>è¿™äº›æ•°æ®å¦‚ä½•è·å¾—çš„</strong>ï¼Œ<strong>æ¯å¼ å›¾å’Œè¡¨çš„æ„ä¹‰</strong></li><li>çœ‹è¿™äº›å›¾å’Œè¡¨çš„æ—¶å€™ï¼Œ<strong>æ—¶åˆ»é—®è‡ªå·±è¿™äº›æ•°æ®æ˜¯å¦æ”¯æŒè¿™ç¯‡æ–‡ç« çš„ç»“è®º</strong></li></ul><h2 id="1-2-è®ºæ–‡çš„æ ‡é¢˜ã€æ‘˜è¦å’Œå¼•è¨€"><a href="#1-2-è®ºæ–‡çš„æ ‡é¢˜ã€æ‘˜è¦å’Œå¼•è¨€" class="headerlink" title="1.2 è®ºæ–‡çš„æ ‡é¢˜ã€æ‘˜è¦å’Œå¼•è¨€"></a>1.2 è®ºæ–‡çš„æ ‡é¢˜ã€æ‘˜è¦å’Œå¼•è¨€</h2><p>å¿«é€Ÿé˜…è¯»éœ€è¦<strong>ç€é‡å…³æ³¨è®ºæ–‡çš„æ ‡é¢˜ã€æ‘˜è¦å’Œå¼•è¨€</strong>ï¼Œå¦‚æ­¤ä¾¿èƒ½äº†è§£è®ºæ–‡æ˜¯å¦å€¼å¾—è¯»ã€èƒ½å¤Ÿä»è®ºæ–‡ä¸­è¯»åˆ°äº›ä»€ä¹ˆ</p><ul><li><p><strong>æ ‡é¢˜</strong></p><ul><li>æ ‡é¢˜æ˜¯<strong>æ€»ç»“ã€æŠ½è±¡çš„æ¦‚æ‹¬</strong>ã€‚é™¤äº†è®ºæ–‡æ ‡é¢˜ï¼Œå›¾è¡¨çš„æ ‡é¢˜ä¹Ÿæ˜¯éå¸¸æŠ½è±¡</li></ul></li><li><p><strong>æ‘˜è¦</strong></p><ul><li>è¯»æ‘˜è¦çš„æ—¶å€™ï¼Œ<strong>å°†å…¶åˆ†è§£å¹¶åŠ ä¸Šä¸€äº›æœ‰è¶£çš„äº®ç‚¹</strong>ï¼Œä¾¿å¯èƒ½åˆ©äºé˜…è¯»</li><li><strong>Background</strong>ï¼šæ–‡ç« èƒŒæ™¯æ˜¯ä»€ä¹ˆ</li><li><strong>Why</strong>ï¼šæ–‡ç« å·¥ä½œçš„ç›®çš„æ˜¯ä»€ä¹ˆ</li><li><strong>How</strong>ï¼šæ–‡ç« ç”¨äº†ä»€ä¹ˆæ–¹æ³•</li><li><strong>What</strong>ï¼šè¿™ç¯‡æ–‡ç« çœŸæ­£çš„å‘ç°æ˜¯ä»€ä¹ˆ</li><li><strong>Conclusion</strong>ï¼šè¿™ç¯‡æ–‡ç« çš„ç ”ç©¶æˆæœæ˜¯ä»€ä¹ˆ</li></ul></li><li><p><strong>å¼•è¨€ï¼šæœ€é‡è¦ä¹Ÿæœ€éš¾å†™çš„éƒ¨åˆ†ï¼Œ</strong> From broad topic to specific issues to focused core questions.</p><ul><li>å¿…é¡»è¦ä¸‹åŠŸå¤«æŠŠå¼•è¨€å†™å¥½ï¼Œå†™åˆ°å®¡ç¨¿äººå®¹æ˜“çœ‹æ‡‚ã€‚</li><li><strong>Background</strong>ï¼šè¿™ç¯‡è®ºæ–‡æ˜¯<strong>å…³äºä»€ä¹ˆ</strong>çš„ï¼Œ</li><li><strong>Whyï¼š</strong> æ–‡ç« å·¥ä½œçš„ç›®çš„</li><li><strong>What</strong>ï¼šè§£å†³äº†ä»€ä¹ˆé—®é¢˜</li><li><strong>Howï¼š</strong> ç”¨çš„æ–¹æ³•</li><li><strong>Novelty</strong>ï¼šæœ‰ä»€ä¹ˆ<strong>æ–°é¢–çš„ä¸œè¥¿</strong>ï¼Œ</li><li><strong>Conclusion</strong>ï¼šä¸ºä»€ä¹ˆé‚£ä¹ˆç¥å¥‡ï¼ˆå¾—å‡ºçš„<strong>ä»¤äººçœ¼å‰ä¸€äº®çš„ç»“è®º</strong>ï¼‰</li></ul></li></ul><h1 id="2-ä»”ç»†é˜…è¯»ï¼šæ‰¹åˆ¤æ€ç»´"><a href="#2-ä»”ç»†é˜…è¯»ï¼šæ‰¹åˆ¤æ€ç»´" class="headerlink" title="2 ä»”ç»†é˜…è¯»ï¼šæ‰¹åˆ¤æ€ç»´"></a>2 ä»”ç»†é˜…è¯»ï¼šæ‰¹åˆ¤æ€ç»´</h1><h2 id="How-to-remember"><a href="#How-to-remember" class="headerlink" title="How to remember"></a>How to remember</h2><ul><li><strong>Content clarified</strong> by you is yours</li><li>Try to <strong>summarize main points</strong></li><li>Reading <strong>like a reviewer</strong></li><li>Must <strong>be critical</strong> about their <strong>method and ways of thinking</strong></li></ul><h2 id="Read-effectively"><a href="#Read-effectively" class="headerlink" title="Read effectively"></a>Read effectively</h2><ul><li><p>Always <strong>summarize main points</strong></p></li><li><p>Always <strong>be critical</strong></p></li><li><p>And <strong>be creative,</strong></p><ul><li>if their conclusion is true, what can you expect? (å¦‚æœä»–ä»¬çš„ç»“è®ºæ˜¯å¯¹çš„ï¼Œè¿™ä¸ªç»“è®ºèƒ½å¸¦æ¥ä»€ä¹ˆæ”¹å˜å‘¢?)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230220101228708.png" alt="ask questions, be suspicious"></p><ul><li><blockquote><p>å¦‚æœæ‰€è¯»çš„è®ºæ–‡æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘èƒ½è§£å†³ä¹ˆï¼Ÿæˆ‘èƒ½é‡‡ç”¨æ¯”è®ºæ–‡ä¸­æ›´ç®€å•çš„æ–¹æ³•è§£å†³ä¹ˆï¼Ÿ</p><p>æ‰€ä»¥ï¼Œä¸€æ—¦è¿›å…¥ä»”ç»†é˜…è¯»çš„çŠ¶æ€ï¼Œè¦åœ¨è¯»è®ºæ–‡ä¹‹å‰å¯¹è‡ªå·±è¯´ï¼šè¿™ç¯‡è®ºæ–‡å¯èƒ½æœ‰é—®é¢˜ï¼Œæˆ‘è¦æ‰¾å‡ºæ¥ã€‚</p></blockquote></li></ul><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230220101240115.png" alt="get stuck?"></p><ul><li><p>å¤š<strong>æ‰¾ä¸€äº›èƒŒæ™¯çŸ¥è¯†é˜…è¯»</strong>ï¼Œå¤š<strong>åšç¬”è®°</strong>ï¼Œå¤š<strong>åœ¨ç½‘ä¸Šæœç´¢ç›¸å…³è®ºæ–‡</strong>ï¼Œç„¶å<strong>å†æ¬¡é€šè¯»æ‰€å¡å£³çš„è®ºæ–‡</strong>ï¼Œå¹¶è¯•ç€æŠŠå®ƒ<strong>ä¸å…¶ä»–è®ºæ–‡ç›¸è”ç³»èµ·æ¥</strong>ï¼Œå¦‚æ­¤åšæŒä¸‹å»ï¼Œå®šèƒ½æ¸¡è¿‡éš¾å…³ã€‚</p></li><li><p>å¦ä¸€ä¸ªå»ºè®®æ˜¯ï¼Œ<strong>æ‰¾ç†Ÿæ‚‰è¿™æ–¹é¢å·¥ä½œçš„äººå¸®å¿™</strong>ï¼Œè®©ä»–ä»¬è§£é‡Šä½ é‡åˆ°çš„éš¾ç‚¹ã€‚</p><ul><li>ä½†ä½ è¦æ„è¯†åˆ°æ‰¾äººå¸®å¿™ä¹Ÿå¯èƒ½é‡åˆ°å›°éš¾ï¼Œä¸€æ–¹é¢ï¼Œä½ è¦æ‰¾è°å¸®å¿™ï¼Œå¯¼å¸ˆï¼Ÿå¸ˆå§ï¼Ÿå­¦é•¿ï¼Ÿå¦ä¸€æ–¹é¢ï¼Œå¦‚ä½•èƒ½è®©ä»–ä»¬æ„‰å¿«çš„æ¥å—ä½ å‡ åˆ†é’Ÿã€åå‡ åˆ†é’Ÿã€ç”šè‡³æ¥è¿‘ä¸€ä¸ªå°æ—¶çš„å’¨è¯¢ï¼Ÿ</li><li>æˆ‘ä»ä»–é‚£å­¦åˆ°çš„å…¶å®ä¸å…‰æ˜¯æˆ‘<strong>åº”è¯¥çœ‹å“ªäº›è®ºæ–‡ï¼Œæ›´å¤šçš„æ˜¯ä¸åº”è¯¥çœ‹å“ªäº›è®ºæ–‡</strong>ã€‚ä»–ä¼šå‘Šè¯‰æˆ‘<strong>æŸäººçš„è®ºæ–‡ä½ ä¸è¦è¯»ï¼Œå› ä¸ºé‚£ä¼šæ‰°ä¹±ä½ çš„æ€è·¯ã€‚</strong></li></ul></li></ul><h1 id="3-åˆ›é€ æ€§é˜…è¯»ï¼šç§¯ææ€è€ƒ"><a href="#3-åˆ›é€ æ€§é˜…è¯»ï¼šç§¯ææ€è€ƒ" class="headerlink" title="3 åˆ›é€ æ€§é˜…è¯»ï¼šç§¯ææ€è€ƒ"></a>3 åˆ›é€ æ€§é˜…è¯»ï¼šç§¯ææ€è€ƒ</h1><blockquote><p>åˆ›é€ æ€§çš„é˜…è¯»éœ€è¦<strong>æŠŠä½ æ‰€è¯»çš„è®ºæ–‡å’Œå…¶ä»–ç›¸å…³çš„è®ºæ–‡å»ºç«‹è”ç³»</strong>ï¼Œä»è€Œ<strong>äº§ç”Ÿä¸€äº›æ–°çš„æƒ³æ³•</strong>ï¼Œè¿™äº›æƒ³æ³•å¯ä»¥æ”¯æ’‘ä½ è¿›è¡Œä¸‰ä¸ªæœˆåˆ°äº”ä¸ªæœˆçš„ç ”ç©¶ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230220101253208.png" alt="positive thinking"></p><ul><li>è¿™ç¯‡æ–‡ç« ä¸­çš„<strong>å¥½æƒ³æ³•</strong></li><li>å¯èƒ½äº§ç”Ÿé‡è¦çš„å®é™…å·®å¼‚çš„<strong>æ”¹è¿›</strong></li><li>ä½œè€…æ²¡æœ‰æƒ³åˆ°çš„ <strong>åº”ç”¨/æ‰©å±•</strong></li><li>è¿™ç¯‡æ–‡ç« èƒ½<strong>è¢«è¿›ä¸€æ­¥æ¨å¹¿</strong>å—</li></ul><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230220101301774.png" alt="a list of questions"></p><ul><li>å…³äºè®ºæ–‡é˜…è¯»ï¼Œå¯ä»¥é—®è‡ªå·±çš„ <strong>å®¢è§‚å’Œä¸»è§‚é—®é¢˜</strong></li><li>è‹¥èƒ½å…¨éƒ¨å›ç­”ï¼Œåˆ™å¯¹æœ¬ç¯‡æ–‡ç« æœ‰æ·±åˆ»çš„ç†è§£</li></ul><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230220101312974.png" alt="Tools"></p><ul><li>åœ¨é˜…è¯»è®ºæ–‡å¡å£³æ—¶ï¼Œä»¥ä¸Š<strong>å·¥å…·</strong>å¯ä»¥å¸®åŠ©é˜…è¯»/è¯¥åšä»€ä¹ˆ</li></ul><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230220101322403.png" alt="Tips"></p><ul><li><p>å…»æˆ<strong>å†™å°æ€»ç»“</strong>çš„ä¹ æƒ¯ï¼Œ</p><ul><li>åªæœ‰æŠŠä¸œè¥¿å†™ä¸‹æ¥æˆ–è€…è¯´å‡ºæ¥æ‰èƒ½çœŸæ­£æ·±åˆ»ç†è§£</li></ul></li><li><p>æœ€å¥½èƒ½<strong>åšæŠ¥å‘Š</strong>ï¼Œè¿™æ ·çœŸçš„èƒ½å¤Ÿ<strong>å¢åŠ ä½ å¯¹æ‰€è¯»è®ºæ–‡çš„ç†è§£</strong></p><ul><li>åˆ«äººå¯ä»¥é—®ä½ é—®é¢˜ï¼Œè¿™ä¼šå¼ºè¿«ä½ ç†è§£æ‰€è¯»çš„è®ºæ–‡</li></ul></li></ul><h1 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h1><ol><li><a href="https://mp.weixin.qq.com/s?__biz=MzU2OTA0NzE2NA==&mid=2247527877&idx=5&sn=3edff184812c40dc3af44c2a7c14bcde&chksm=fc868cd6cbf105c07b416bbfec4a3903b43ac1c4a2ea086025c3a7c1f3a359a3ae549574c6a4#rd">æ²ˆå‘æ´‹ï¼šè¯»è®ºæ–‡çš„ä¸‰ä¸ªå±‚æ¬¡ (qq.com)</a></li><li><a href="https://www.bilibili.com/video/BV1JL4y1j7To/?spm_id_from=0.0.header_right.fav_list.click&vd_source=de5d636c079ac45214bd34891ede8c4b">ã€ç ”ç©¶ç”Ÿå¿…çœ‹ã€‘å¦‚ä½•å»è¯»ä¸€ç¯‡è®ºæ–‡ã€å¦‚ä½•å»ç»„ä¼šè®²è®ºæ–‡ &amp; è®ºæ–‡çš„ç¬”è®°_å“”å“©å“”å“©_bilibili</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> æ–¹æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Reading </tag>
            
            <tag> Paper </tag>
            
            <tag> Research </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoåšå®¢å°‘ç”Ÿæˆäº†indexä¸»é¡µæ–‡ä»¶</title>
      <link href="p/6de7b885.html"/>
      <url>p/6de7b885.html</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>åœ¨è¿›è¡Œ <code>node</code> å’Œ <code>npm</code> çš„ç‰ˆæœ¬æ›´æ–°ä¹‹åï¼Œå†ä»¥æ­¤è¿è¡Œ <code>hexo g</code>å’Œ <code>hexo s</code>ï¼Œå‘ç°è®¿é—®ä¸»é¡µä¸º <code>404</code>ï¼Œè€Œå…¶ä»–é¡µé¢å‡æ­£å¸¸ã€‚</p><h1 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h1><p>å¯¹æ¯”è¿‘å‡ æ¬¡çš„ <code>commit</code>å‘ç°å°‘ç”Ÿæˆäº† <code>index.html</code>æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ <code>package.json</code>ç­‰æ–‡ä»¶ä¸­å°‘äº†ä¸€è¡Œ <code>generator-inex</code>ï¼Œå¯èƒ½å’Œ <code>node</code>åŠ <code>npm</code>çš„æ›´æ–°ç›¸å…³ï¼Ÿ</p><p>ä½†æ˜¯ï¼Œä½¿ç”¨ <code>git reset --hard</code><a href="https://blog.csdn.net/luobeihai/article/details/128171764?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-128171764-blog-108067196.pc_relevant_vip_default&spm=1001.2101.3001.4242.1&utm_relevant_index=4">^1</a>å‘½ä»¤å›æº¯åˆ°ä»¥ä¸Šé…ç½®æ–‡ä»¶æœªæ”¹åŠ¨åï¼Œä¾ç„¶å‘ç°ä¸ä¼šç”Ÿæˆ <code>index.html</code>ï¼Œå’‹ä¹ˆå›äº‹ã€‚ã€‚ã€‚</p><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>ä½¿ç”¨ <code>npm install hexo-generator-index</code> å‘½ä»¤å°†ä¾èµ–åŒ…é‡æ–°ä¸‹è½½å›æ¥ã€‚ã€‚ã€‚ï¼ˆ</p><p>å…œå…œè½¬è½¬äº†ä¸€ä¸‹åˆï¼ˆæ¯”è¾ƒä¸¤ä¸ª <code>commit</code>ï¼Œç”šè‡³é‡æ–°åœ¨æœ¬åœ°æ„å»ºäº†ä¸€ä¸ªæ–°åšå®¢<a href="https://cloud.tencent.com/developer/article/1173652#:~:text=Hexo%2Bgithub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E5%92%8C%E5%8F%91%E5%B8%83%EF%BC%88%E5%9B%BE%E6%96%87%E8%AF%A6%E8%A7%A3%EF%BC%89%201%202.1%20Hexo%E8%AE%BE%E7%BD%AE%20%E8%BF%99%E4%B8%AA%E5%85%B6%E5%AE%9E%E5%B0%B1%E6%98%AF%E5%8D%9A%E5%AE%A2%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%20_config.yml%20%E6%96%87%E4%BB%B6%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%98%AF%E5%AF%B9Hexo%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BB%A5%E5%8F%8A%E7%AB%99%E7%82%B9%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%EF%BC%8C%E4%B8%8B%E9%9D%A2%E5%BC%80%E5%A7%8B%E8%BF%9B%E8%A1%8C%E5%88%86%E6%AE%B5%E8%AF%A6%E7%BB%86%E7%9A%84%E8%AF%B4%E6%98%8E%201%EF%BC%89,...%204%205.2%20%E6%B7%BB%E5%8A%A0SSH%20Key%20%E6%B3%A8%E5%86%8C%E5%AE%8C%E4%BB%A5%E5%90%8E%EF%BC%8C%E4%B8%BA%E4%BA%86%E8%AE%A9%E6%88%91%E4%BB%AC%E7%9A%84%E7%94%B5%E8%84%91%E8%83%BD%E7%9B%B4%E6%8E%A5%E5%85%8D%E5%AF%86%E7%A0%81%E9%80%9A%E8%BF%87SSH%E8%AE%BF%E9%97%AEGitHub%EF%BC%8C%E9%9C%80%E8%A6%81%E5%B0%86%E6%88%91%E4%BB%AC%E7%9A%84SSH%20Key%E6%B7%BB%E5%8A%A0%E5%88%B0GitHub%E4%B8%8A%E3%80%82%20">^2</a>æ¥ <code>hexo d --debug</code>å¯»æ‰¾æ„é€ çš„ä¸åŒï¼‰ã€‚å®é™…ä¸Šæˆ‘å¾ˆå¿«æ‰¾åˆ°ç¼ºå°‘äº†ä¾èµ–åŒ…çš„é—®é¢˜ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç«‹åˆ»å¯¹ä¾èµ–åŒ…è¿›è¡Œä¸‹è½½ï¼Œæµªè´¹äº†å¤§é‡æ—¶é—´ã€‚</p><p><code>hexo</code> æ ¹ç›®å½•çš„ <code>node_modules</code>å­˜å‚¨ç€é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–åŒ…ï¼Œä½†æ˜¯å¹¶ä¸éœ€è¦ä¸Šä¼ ï¼Œå› ä¸ºè¿‡äºåºå¤§ï¼Œè€Œ <code>package-lock.json</code>é‡Œå·²ç»å­˜å‚¨äº†ä¾èµ–åŒ…çš„åç§°å’Œç‰ˆæœ¬ã€‚</p><p>æƒ³èµ·æ¥äº†ï¼Œæˆ‘æ˜¯æƒ³é€šè¿‡å¸è½½ <code>hexo-generator-index</code>å¹¶å®‰è£… <code>hexo-generator-index-pin-top</code>æ¥å®ç°æ–‡ç« ç½®é¡¶çš„ï¼Œä½†æ˜¯å› ä¸ºç½‘ç»œé—®é¢˜ï¼Œæ²¡æœ‰å®‰è£…ä¸Šã€‚ã€‚ã€‚</p><h1 id="refs"><a href="#refs" class="headerlink" title="refs:"></a>refs:</h1><p>å­¦ä¼š <code>git log</code>, <code>git reset</code>ç­‰å‘½ä»¤</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> Debug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoåšå®¢å‹‰å¼ºæ”¯æŒtyporaä¸­çš„è„šæ³¨åŠŸèƒ½ï¼š)</title>
      <link href="p/ef4419f0.html"/>
      <url>p/ef4419f0.html</url>
      
        <content type="html"><![CDATA[<p>typora çš„è„šæ³¨åŠŸèƒ½ç±»ä¼¼äºè®ºæ–‡ä¸­çš„å¯¹æ–‡çŒ®å¼•ç”¨ã€‚åœ¨å­¦ä¹ æˆ–Debugåä¹¦å†™åšå®¢ä¸å…ä¹Ÿè¦å‚è€ƒå¤šç¯‡ç½‘é¡µï¼Œè¿™æ—¶ç”¨è„šæ³¨åŠŸèƒ½å¯ä»¥å°†å¼•ç”¨åˆ°çš„æ‰€æœ‰ç½‘é¡µç»Ÿä¸€å†™åœ¨åšæ–‡æœ€ä¸‹æ–¹ï¼Œä½¿å¾—æ–‡ç« çœ‹èµ·æ¥ä¸ä¼šé‚£ä¹ˆæ‚ä¹±ã€‚</p><p>typora æ”¯æŒçš„markdownè„šæ³¨åŠŸèƒ½ï¼Œä½†å®é™…ä¸ŠmarkdownåŸç”Ÿè¯­æ³•ä¸­å¹¶ä¸æ”¯æŒï¼Œå†™å…¥åªæ”¯æŒåŸç”Ÿ markdown è¯­æ³•çš„hexoåšå®¢é‡Œä¹Ÿä¸ä¼šæˆåŠŸæ˜¾ç¤º</p><ul><li>typora: æ”¯æŒçš„è„šæ³¨åŠŸèƒ½<ul><li>åœ¨å¼•ç”¨å¤„ä½¿ç”¨<code>[^x]</code>ï¼Œè¢«å¼•ç”¨å¤„ä½¿ç”¨<code>[^x]: description</code></li></ul></li><li>butterfly<a href="https://markdown.com.cn/basic-syntax/links.html#%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E9%93%BE%E6%8E%A5">^1</a>: å¯ä»¥ä½¿ç”¨markdownçš„ <code>Links</code> æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼š<ul><li>å¼•ç”¨å¤„ä½¿ç”¨<code>[è¿æ¥çš„æ–‡æœ¬ï¼Œå¯ä¸å¡«][x]</code>ï¼Œè¢«å¼•ç”¨å¤„ä½¿ç”¨<code>[x]: Links</code></li></ul></li></ul><p>è¿™ä½¿å¾—ä½¿ç”¨è„šæ³¨è¯­æ³•åï¼Œåœ¨typoraå’Œå¯¼å‡ºçš„pdfä¸­å¯ä»¥å¾ˆä¼˜é›…åœ°é€šè¿‡ç‚¹å‡»å¼•ç”¨å¤„çš„ç¬¦å·xæ¥è·³è½¬åˆ°æ–‡ç« æœ€åº•éƒ¨å­˜æ”¾æ‰€æœ‰è¢«å¼•ç”¨æ–‡çŒ®å¤„ã€‚ä½†æ˜¯åœ¨hexoåšå®¢é‡Œä¸ä¼šæ˜¾ç¤ºè¢«å¼•ç”¨çš„é“¾æ¥ã€‚å°½ç®¡å¾ˆå¥‡æ€ªï¼Œä½†æ˜¯å¥½åœ¨å¯ä»¥ç¨å¾®ç»Ÿä¸€å†™æ³•ã€‚</p><p>refs:</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥‡æ€ªé—®é¢˜â€”â€”fatal:æ— æ³•è¯»å–è¿œç¨‹ä»“åº“</title>
      <link href="p/fab1518.html"/>
      <url>p/fab1518.html</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>è¿æ¥æ ¡å›­ç½‘ï¼Œè¿è¡Œ<code>hexo d</code>å¾—åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š</p><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230218233114978.png" alt="image-20230218233114978"></p><p>è¯•å›¾å°†åšå®¢æºç æ¨é€è‡³Githubï¼Œä¹ŸæŠ¥å¦‚ä¸‹é”™è¯¯ï¼šåœ¨è¿æ¥æ‰‹æœºçƒ­ç‚¹ä¹‹åæ‰èƒ½æˆåŠŸæ¨é€</p><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230218233129157.png" alt="image-20230218233129157"></p><p>ä¹ŸæˆåŠŸå°†åšå®¢éƒ¨ç½²åˆ°Githubï¼š</p><p><img src="https://raw.githubusercontent.com/ZiHao256/Gallery/master/uPic/2023/02/image-20230218233138553.png" alt="image-20230218233138553"></p><h1 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h1><ul><li>çœ‹æŠ¥é”™æ˜¯è¢«github.comæœåŠ¡å™¨çš„22ç«¯å£å…³é—­äº†è¿æ¥ï¼Œå¯èƒ½å’Œè¿™ä¸ªç«¯å£æœ‰å…³</li></ul><h1 id="è§£å†³æ–¹æ³•1"><a href="#è§£å†³æ–¹æ³•1" class="headerlink" title="è§£å†³æ–¹æ³•1"></a>è§£å†³æ–¹æ³•1</h1><p><code>attempt to clone using an SSH connection made over the HTTPS port.</code></p><p>é€šè¿‡å®˜æ–¹ç»™å‡ºçš„è§£å†³æ–¹æ³•<a href="https://github.com/vernesong/OpenClash/issues/1960#issuecomment-1115732292">^1</a>å¦‚ä¸‹ï¼š</p><ul><li>å¯ä»¥æˆåŠŸè®¿é—®ä¸»æœºåä¸º<code>ssh.github.com</code>çš„ç«¯å£<code>443</code><ul><li>ä½†ä¸çŸ¥ä¸ºä½•ï¼Œè®¿é—®å“åº”æ—¶é—´å¾ˆä¹…ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</li></ul></li></ul><h1 id="è§£å†³æ–¹æ³•2"><a href="#è§£å†³æ–¹æ³•2" class="headerlink" title="è§£å†³æ–¹æ³•2"></a>è§£å†³æ–¹æ³•2</h1><p>é€šè¿‡æ–‡ç« <a href="https://blog.csdn.net/qq_43431735/article/details/106031021">^2</a>æŠŠ rsa å¯†é’¥åˆ æ‰ã€‚åœ¨å…³é—­VPNçš„æƒ…å†µä¸‹ï¼Œé‡æ–°åˆ›å»º rsa å¯†é’¥å¯¹ï¼Œå¹¶å°†å…¬é’¥åŠ å…¥githubï¼Œé‡æ–°ç”¨sshè¿æ¥ã€‚</p><p>å¯ä»¥æˆåŠŸè¿æ¥ã€‚ã€‚ã€‚</p><h1 id="refsï¼š"><a href="#refsï¼š" class="headerlink" title="refsï¼š"></a><strong>refsï¼š</strong></h1><p>æƒ…å†µä¸ä¸‹æ–‡ä¸€è‡´ï¼š</p><ul><li><a href="https://cloud.tencent.com/developer/article/1946906">sshè¿œç¨‹ç™»å½•æŠ¥é”™ï¼škex_exchange_identification: Connection closed by remote host - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ (tencent.com)</a></li></ul><p>ä¸¤ç§è§£æ³•ï¼š</p><p>å¯¹<code>SSH</code>çš„æ‹“å±•çŸ¥è¯†</p><p><a href="https://blog.csdn.net/weixin_42310154/article/details/118340458">Githubé…ç½®ssh keyçš„æ­¥éª¤ï¼ˆå¤§ç™½è¯+åŒ…å«åŸç†è§£é‡Šï¼‰_é£ä¸­ä¸€åŒ¹ç‹¼vçš„åšå®¢-CSDNåšå®¢_github ssh key</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> Bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¢åŠ è¯„è®ºåŠŸèƒ½</title>
      <link href="p/4ec99e36.html"/>
      <url>p/4ec99e36.html</url>
      
        <content type="html"><![CDATA[<p>Butterfly ä¸»é¢˜å·²ç»é›†æˆäº† gitalk åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¯¹å…¶å¯ç”¨å’Œé…ç½®å³å¯ï¼š</p><ol><li>åœ¨ Github è®¾ç½®ä¸­åˆ›å»ºä¸€ä¸ª OAuth Appï¼Œå¹¶å°†å¾—åˆ°çš„Client IDå’ŒSecretå¡«å…¥ä¸»é¢˜é…ç½®æ–‡ä»¶ç›¸åº”ä½ç½®å³å¯ï¼›</li><li>ç¬¬ä¸€æ¬¡é…ç½®æ—¶ï¼Œé‡åˆ°äº†ä¸ºåˆå§‹åŒ–çš„é—®é¢˜ï¼Œæ ¹æ®å¦‚ä¸‹æ–‡ç« <a href="https://www.jianshu.com/p/02fc71f3633f">^1</a>å¯ä»¥è§£å†³</li></ol><p>refs:</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°†Hexoåšå®¢éƒ¨ç½²åˆ°Github</title>
      <link href="p/82975e94.html"/>
      <url>p/82975e94.html</url>
      
        <content type="html"><![CDATA[<p>å…¶å®ä¸€å¼€å§‹å°±å°†åšå®¢éƒ¨ç½²åˆ° Github äº†ï¼Œä½†æ˜¯æ²¡æœ‰ææ¸…æ¥šä¸ºä»€ä¹ˆåˆ›å»ºä¸€ä¸ª hexo åˆ†æ”¯ï¼Œè¿™æ¬¡é‡åˆ°äº†æºä»£ç åˆå¹¶é—®é¢˜ï¼Œæ‰ä½¿å¾—æˆ‘çœŸæ­£æ˜ç™½åˆ›å»ºåˆ†æ”¯çš„å·§å¦™ã€‚</p><ol><li>åœ¨ Github åˆ›å»ºä¸€ä¸ªå…¬å¼€ä»“åº“</li><li>åˆ›å»ºä¸€ä¸ª <code>hexo</code> åˆ†æ”¯ç”¨äºå­˜å‚¨ <code>Hexo</code>åšå®¢ çš„æ–‡ä»¶æºç ï¼Œå°†å…¶è®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ï¼Œè¿™æ ·å¯ä»¥ç”¨æ¥åœ¨å¤šä¸ªç»ˆç«¯ä¸Šè¿›è¡Œåšå®¢ä¹¦å†™ã€‚<ol><li>æ³¨æ„ï¼šéœ€è¦è‡ªå·±æ‰‹åŠ¨å»æäº¤æœ€æ–°æºç </li></ol></li><li>åœ¨æœ¬åœ° Hexo æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®éƒ¨ç½²çš„ä»“åº“å’Œåˆ†æ”¯ï¼Œåˆ†æ”¯ä¸º masterã€‚è¿™æ ·åœ¨æœ¬åœ°ä½¿ç”¨å‘½ä»¤<code>hexo d</code>æ—¶ï¼Œä¼šè‡ªåŠ¨å°†ç”Ÿæˆçš„ HTML é™æ€æ–‡ä»¶è¦†ç›–å¹¶éƒ¨ç½²åˆ° master åˆ†æ”¯</li></ol><p>refsï¼š<br><a href="https://zhuanlan.zhihu.com/p/71544809">https://zhuanlan.zhihu.com/p/71544809</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Blogå¢åŠ å›¾åº“</title>
      <link href="p/9e54ba1.html"/>
      <url>p/9e54ba1.html</url>
      
        <content type="html"><![CDATA[<ul><li>Hexo çš„ Gallery ç›¸å†Œå›¾åº“åŠŸèƒ½</li><li>åœ¨Github ä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ä½œä¸ºå›¾åºŠ</li><li>ä½¿ç”¨ uPic ä½œä¸ºä¸Šä¼ å·¥å…·</li><li>åœ¨ typora åå¥½è®¾ç½®ä¸­è®¾ç½®æ’å…¥å›¾ç‰‡æ—¶å¯¹å…¶è¿›è¡Œä¸Šä¼ ï¼Œé€‰æ‹©ä¸Šä¼ æœåŠ¡ä¸ºuPic</li></ul><p>refs:</p><p><a href="https://www.jkg.tw/p3310/">Hugo éœæ…‹ç¶²ç«™ä¸‰åŠå®¢ Typora + uPic + imgur | jkgtwâ€™s blog ï£¿</a></p><p><a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB">Butterfly å®‰è£æ–‡æª”(ä¸‰) ä¸»é¡Œé…ç½®-1 | Butterfly</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘ç”¨ä»€ä¹ˆæ‰èƒ½ç•™ä½ä½ </title>
      <link href="p/d1fbce69.html"/>
      <url>p/d1fbce69.html</url>
      
        <content type="html"><![CDATA[<h1 id="æˆ‘ç”¨ä»€ä¹ˆæ‰èƒ½ç•™ä½ä½ "><a href="#æˆ‘ç”¨ä»€ä¹ˆæ‰èƒ½ç•™ä½ä½ " class="headerlink" title="æˆ‘ç”¨ä»€ä¹ˆæ‰èƒ½ç•™ä½ä½ "></a>æˆ‘ç”¨ä»€ä¹ˆæ‰èƒ½ç•™ä½ä½ </h1><p><a href="https://zh.wikipedia.org/wiki/%E8%B1%AA%E5%B0%94%E8%B5%AB%C2%B7%E8%B7%AF%E6%98%93%E6%96%AF%C2%B7%E5%8D%9A%E5%B0%94%E8%B5%AB%E6%96%AF">åšå°”èµ«æ–¯</a></p><p>æˆ‘ç»™ä½ ç˜¦è½çš„è¡—é“<br>ç»æœ›çš„è½æ—¥<br>è’éƒŠçš„æœˆäº®<br>æˆ‘ç»™ä½ ä¸€ä¸ªä¹…ä¹…åœ°æœ›ç€å­¤æœˆçš„äººçš„æ‚²å“€</p><p>æˆ‘ç»™ä½ æˆ‘å·²æ­»å»çš„ç¥–è¾ˆ<br>åäººä»¬ç”¨å¤§ç†çŸ³ç¥­å¥ çš„å…ˆé­‚<br>æˆ‘çˆ¶äº²çš„çˆ¶äº²<br>é˜µäº¡äºå¸ƒå®œè¯ºæ–¯è‰¾åˆ©æ–¯çš„è¾¹å¢ƒ<br>ä¸¤é¢—å­å¼¹å°„ç©¿äº†ä»–çš„èƒ¸è†›<br>æ­»çš„æ—¶å€™è“„ç€èƒ¡å­<br>å°¸ä½“è¢«å£«å…µä»¬ç”¨ç‰›çš®è£¹èµ·<br>æˆ‘æ¯äº²çš„ç¥–çˆ¶<br>é‚£å¹´æ‰äºŒåå››å²<br>åœ¨ç§˜é²ç‡é¢†ä¸‰ç™¾äººå†²é”‹<br>å¦‚ä»Šéƒ½æˆäº†æ¶ˆå¤±çš„é©¬èƒŒä¸Šçš„äº¡é­‚</p><p>æˆ‘ç»™ä½ <strong>æˆ‘çš„ä¹¦ä¸­æ‰€èƒ½è•´å«çš„ä¸€åˆ‡æ‚ŸåŠ›</strong><br>ä»¥åŠ<strong>æˆ‘ç”Ÿæ´»ä¸­æ‰€èƒ½æœ‰çš„ç”·å­æ°”æ¦‚å’Œå¹½é»˜</strong><br>æˆ‘ç»™ä½ <strong>ä¸€ä¸ªä»æœªæœ‰è¿‡ä¿¡ä»°çš„äººçš„å¿ è¯š</strong></p><p>æˆ‘ç»™ä½ <strong>æˆ‘è®¾æ³•ä¿å…¨çš„æˆ‘è‡ªå·±çš„æ ¸å¿ƒ</strong><br>ä¸è¥å­—é€ å¥ï¼Œä¸å’Œæ¢¦äº¤æ˜“<br>ä¸è¢«æ—¶é—´ã€æ¬¢ä¹å’Œé€†å¢ƒè§¦åŠ¨çš„æ ¸å¿ƒã€‚</p><p>æˆ‘ç»™ä½ æ—©åœ¨ä½ å‡ºç”Ÿå‰å¤šå¹´çš„ä¸€ä¸ªå‚æ™šçœ‹åˆ°çš„ä¸€æœµé»„ç«ç‘°çš„è®°å¿†<br>æˆ‘ç»™ä½ <strong>å…³äºä½ ç”Ÿå‘½çš„è¯ é‡Š</strong><br>å…³äºä½ è‡ªå·±çš„ç†è®º<br>ä½ çš„çœŸå®è€ŒæƒŠäººçš„å­˜åœ¨</p><p>æˆ‘ç»™ä½ <strong>æˆ‘çš„å¯‚å¯</strong><br><strong>æˆ‘çš„é»‘æš—</strong><br><strong>æˆ‘å¿ƒçš„é¥¥æ¸´</strong><br>æˆ‘è¯•å›¾<strong>ç”¨å›°æƒ‘ã€å±é™©ã€å¤±è´¥æ¥æ‰“åŠ¨ä½ </strong></p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
          <category> å°è¯— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå°”èµ«æ–¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¸… è¯´</title>
      <link href="p/90d31b3c.html"/>
      <url>p/90d31b3c.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>å½“ä½ ç€çœ¼äºç»“æœè€Œéè¿‡ç¨‹çš„æ—¶å€™ï¼Œä½ å°±å®¹æ˜“ç„¦è™‘</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
          <category> åæ€æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‹è°Š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Preparation-For-MIT6.824</title>
      <link href="p/c9d8503f.html"/>
      <url>p/c9d8503f.html</url>
      
        <content type="html"><![CDATA[<p><code>refs:</code></p><ul><li><h2 id="å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹ -MIT6-824-åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ-è°­æ–°å®‡çš„å›ç­”-çŸ¥ä¹"><a href="#å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹ -MIT6-824-åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ-è°­æ–°å®‡çš„å›ç­”-çŸ¥ä¹" class="headerlink" title="å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹  MIT6.824 åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ - è°­æ–°å®‡çš„å›ç­” - çŸ¥ä¹"></a><a href="https://www.zhihu.com/question/29597104/answer/1971438797">å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹  MIT6.824 åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ - è°­æ–°å®‡çš„å›ç­” - çŸ¥ä¹</a></h2></li><li><h2 id="å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹ -MIT6-824-åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ-Ed-Huangçš„å›ç­”-çŸ¥ä¹"><a href="#å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹ -MIT6-824-åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ-Ed-Huangçš„å›ç­”-çŸ¥ä¹" class="headerlink" title=" å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹  MIT6.824 åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ - Ed Huangçš„å›ç­” - çŸ¥ä¹"></a><a href="https://www.zhihu.com/question/29597104/answer/128443409"> å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹  MIT6.824 åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ - Ed Huangçš„å›ç­” - çŸ¥ä¹</a></h2></li><li><h2 id="å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹ -MIT6-824-åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ-æ‹“è·‹é˜¿ç§€çš„å›ç­”-çŸ¥ä¹"><a href="#å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹ -MIT6-824-åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ-æ‹“è·‹é˜¿ç§€çš„å›ç­”-çŸ¥ä¹" class="headerlink" title="å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹  MIT6.824 åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ - æ‹“è·‹é˜¿ç§€çš„å›ç­” - çŸ¥ä¹"></a><a href="https://www.zhihu.com/question/29597104/answer/2311413739">å¦‚ä½•çš„æ‰èƒ½æ›´å¥½åœ°å­¦ä¹  MIT6.824 åˆ†å¸ƒå¼ç³»ç»Ÿè¯¾ç¨‹ï¼Ÿ - æ‹“è·‹é˜¿ç§€çš„å›ç­” - çŸ¥ä¹</a></h2></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> MIT6.824 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database System </tag>
            
            <tag> Distributed </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Butterfly</title>
      <link href="p/463f518f.html"/>
      <url>p/463f518f.html</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»ºæ–°æ–‡ç« -è‰ç¨¿-é¡µé¢"><a href="#åˆ›å»ºæ–°æ–‡ç« -è‰ç¨¿-é¡µé¢" class="headerlink" title="åˆ›å»ºæ–°æ–‡ç« /è‰ç¨¿/é¡µé¢"></a>åˆ›å»ºæ–°æ–‡ç« /è‰ç¨¿/é¡µé¢</h1><p>å‘½ä»¤ï¼š<code>hexo new [layout] &lt;title&gt;</code><br>layout æœ‰ä¸‰ç§ï¼š</p><ol><li>postï¼Œé»˜è®¤ä¸º post åˆ›å»ºæ–°æ–‡ç« ï¼Œå­˜äº <code>/_post</code> ä¸­</li><li>draftï¼Œåˆ›å»ºæ–°è‰ç¨¿ï¼Œå­˜äº<code>/_draft</code> ä¸­ï¼Œéƒ¨ç½²åä¸ä¼šå‘å¸ƒ</li><li>page</li></ol><p>refs:</p><ul><li><a href="https://butterfly.js.org/">Butterfly - A Simple and Card UI Design theme for Hexo</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> DIY </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Obsidianå’ŒZoteroè”åŠ¨</title>
      <link href="p/52bffbc.html"/>
      <url>p/52bffbc.html</url>
      
        <content type="html"><![CDATA[<h1 id="Mdnotes-Better-Bibtex-Zotfile"><a href="#Mdnotes-Better-Bibtex-Zotfile" class="headerlink" title="Mdnotes + Better-Bibtex + Zotfile"></a>Mdnotes + Better-Bibtex + Zotfile</h1><p> <a href="https://zhuanlan.zhihu.com/p/349638221">Obsidianï¼šä¸€æ¬¾å®Œç¾çš„ç§‘ç ”ç¬”è®°/çŸ¥è¯†ç®¡ç†è½¯ä»¶ - çŸ¥ä¹ (zhihu.com)</a></p><h1 id="Obsidian-MarkMind-æ’ä»¶"><a href="#Obsidian-MarkMind-æ’ä»¶" class="headerlink" title="Obsidian MarkMind æ’ä»¶"></a>Obsidian MarkMind æ’ä»¶</h1><p><a href="https://www.bilibili.com/video/av381778544?vd_source=de5d636c079ac45214bd34891ede8c4b">macç‰ˆobsidian markmindåŸºç¡€æ•™ç¨‹_å“”å“©å“”å“©_bilibili</a></p><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li>åœ¨ä¸€ä¸ª markdown æ–‡ä»¶çš„ fontmatter ä¸­åŠ å…¥ <code>mindmap-plugin: basic</code> ç”Ÿæˆä¸€ä¸ªæ€ç»´å¯¼å›¾æ–‡ä»¶</li><li>æ‰“å¼€ä¸º markdown æ–‡ä»¶</li><li>ä½¿ç”¨ obsidian çš„è¯­æ³• <code>[[</code>åŠ å…¥ä¸€æœ¬ pdf æ–‡ä»¶</li><li>è¿›å…¥<strong>é¢„è§ˆæ¨¡å¼</strong>ï¼Œç‚¹å‡» pdf æ–‡ä»¶ï¼Œç”Ÿæˆå¹¶æ‰“å¼€ pdf æ³¨é‡Šæ–‡ä»¶</li><li>åœ¨è¯¥æ³¨é‡Šæ–‡ä»¶ä¸­ æ³¨é‡Šä¼šè‡ªåŠ¨å°†å†…å®¹å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ä¸­ï¼Œå¤åˆ¶åˆ°åŸ markdown ä¸­å³å¯ã€‚</li></ol><h1 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h1><ol><li>æ‰€æœ‰æ–‡çŒ®çš„ pdf/md é™„ä»¶éƒ½ä¿å­˜åœ¨ <code>OneDrive</code> ä¸­ï¼Œä¸éœ€è¦å ç”¨ <code>Zotero</code> çš„ç©ºé—´ï¼›</li><li>ä½¿ç”¨ Zotfile+Better-Bibtex åŸºäºå¯ä¿®æ”¹æ¨¡ç‰ˆå¯¹ Zotero ä¸­çš„æ–‡çŒ®æ¡ç›®ç”Ÿæˆ md æ–‡ä»¶ï¼ŒåŒæ—¶ä½¿ç”¨ Obsdian å¯¹é›†ä¸­äºåŒä¸€åº“ä¸­çš„ç¬”è®°è¿›è¡Œç¼–è¾‘å’Œç®¡ç†ï¼Œéƒ½ä¿å­˜äº OneDriveä¸­ï¼›</li><li>ç”±äºæ–‡çŒ® pdf é™„ä»¶å’Œç¬”è®°ä¿å­˜äºåŒä¸€ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ä½¿ç”¨ Obsidian MarkMind å¯¹ pdf è¿›è¡Œæ‰¹æ³¨ã€è®°ç¬”è®°å’Œç”Ÿæˆ æ€ç»´å¯¼å›¾ã€‚<ol><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªéœ€è¦åœ¨ md ç¬”è®°çš„ front matter ä¸­åŠ å…¥ <code>mindmap-plugin: basic</code> å³å¯å°† md æ–‡ä»¶ä»¥æ€ç»´å¯¼å›¾çš„å½¢å¼æ‰“å¼€ã€‚  è¿™å¯¹åç»­çš„å¤ä¹ æœ‰å¾ˆå¤§å¸®åŠ© <del>çŒœçš„</del></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> æ–¹æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> è®ºæ–‡ </tag>
            
            <tag> ç§‘ç ” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Obsidianå’ŒTyporaä¹‹é—´çš„æƒè¡¡</title>
      <link href="p/b7c2ebef.html"/>
      <url>p/b7c2ebef.html</url>
      
        <content type="html"><![CDATA[<ul><li>Typora ç”¨äº<strong>å†™åšå®¢ç¬”è®°</strong></li><li>Obsidian ç”¨äº<strong>å†™è®ºæ–‡ç¬”è®°</strong>å¹¶<strong>è¿›è¡Œç®¡ç†</strong> ^81a14d</li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> æ–¹æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zotero</title>
      <link href="p/6df03313.html"/>
      <url>p/6df03313.html</url>
      
        <content type="html"><![CDATA[<p>refsï¼š</p><ul><li><a href="https://zhuanlan.zhihu.com/p/349638221">Obsidianï¼šä¸€æ¬¾å®Œç¾çš„ç§‘ç ”ç¬”è®°/çŸ¥è¯†ç®¡ç†è½¯ä»¶ - çŸ¥ä¹ (zhihu.com)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> è®ºæ–‡ </tag>
            
            <tag> ç§‘ç ” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Obsidian</title>
      <link href="p/b58cbef5.html"/>
      <url>p/b58cbef5.html</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºæœ¬-markdown-è¯­æ³•"><a href="#åŸºæœ¬-markdown-è¯­æ³•" class="headerlink" title="åŸºæœ¬ markdown è¯­æ³•"></a>åŸºæœ¬ markdown è¯­æ³•</h1><h2 id="è„šæ³¨"><a href="#è„šæ³¨" class="headerlink" title="è„šæ³¨"></a>è„šæ³¨</h2><p>hello world<a href="%E5%BE%88%E9%95%BF%E7%9A%84%E8%84%9A%E6%B3%A8">^é•¿è„šæ³¨</a> ^968640</p><h2 id="é«˜äº®"><a href="#é«˜äº®" class="headerlink" title="é«˜äº®"></a>é«˜äº®</h2><p>==é«˜äº®==</p><h1 id="å»ºç«‹ç¬”è®°ä¸ç¬”è®°ä¹‹é—´çš„è¿æ¥"><a href="#å»ºç«‹ç¬”è®°ä¸ç¬”è®°ä¹‹é—´çš„è¿æ¥" class="headerlink" title="å»ºç«‹ç¬”è®°ä¸ç¬”è®°ä¹‹é—´çš„è¿æ¥"></a>å»ºç«‹ç¬”è®°ä¸ç¬”è®°ä¹‹é—´çš„è¿æ¥</h1><blockquote><p>å½¢æˆçŸ¥è¯†ç½‘ï¼Œå¯ä»¥ä½¿ç”¨å·¦ä¾§è¿›è¡Œ graph view</p></blockquote><h2 id="å†…éƒ¨é“¾æ¥"><a href="#å†…éƒ¨é“¾æ¥" class="headerlink" title="å†…éƒ¨é“¾æ¥"></a>å†…éƒ¨é“¾æ¥</h2><blockquote><p>é“¾æ¥åº“ä¸­æŸç¯‡ç¬”è®°</p></blockquote><p>è¾“å…¥ <code>[[</code> å³å¯é€‰æ‹©è¦é“¾æ¥çš„æŸç¯‡åº“å†…æ–‡ç« ï¼š<a href="Obsidian%E5%92%8CTypora%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9D%83%E8%A1%A1.md">Obsidianå’ŒTyporaä¹‹é—´çš„æƒè¡¡</a></p><ol><li>è¾“å…¥ # å¯ä»¥é€‰æ‹©é“¾æ¥æ–‡ç« æŸä¸ªæ®µè½ï¼š<a href="Obsidian.md#%E5%9F%BA%E6%9C%AC%20markdown%20%E8%AF%AD%E6%B3%95">åŸºæœ¬ markdown è¯­æ³•</a></li><li>è¾“å…¥ ^ å¯ä»¥é€‰æ‹©é“¾æ¥æ–‡ç« æŸä¸ªæ–‡å­—æ®µè½ï¼š<a href="Obsidian.md#%5E968640">é“¾æ¥hello world</a></li></ol><h2 id="åå‘é“¾æ¥"><a href="#åå‘é“¾æ¥" class="headerlink" title="åå‘é“¾æ¥"></a>åå‘é“¾æ¥</h2><blockquote><p>å…·ä½“æ˜¾ç¤ºäº†å“ªäº›ç¬”è®°é“¾æ¥äº†å½“å‰ç¬”è®°ï¼Œå“ªäº›ç¬”è®°æåˆ°äº†å½“å‰ç¬”è®°çš„åå­—ä½†å¹¶æœªè¿›è¡Œé“¾æ¥<br>åœ¨æ­£æ–‡ä¸­æåˆ°äº†å½“å‰ç¬”è®°çš„æ–‡ä»¶åï¼Œä½†æ²¡æœ‰é“¾æ¥å½“å‰ç¬”è®°ï¼ˆæ²¡æœ‰ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥ï¼‰</p></blockquote><ol><li>åŒ <code>é“¾æ¥å½“å‰æ–‡ä»¶</code> ä¸€æ ·åœ¨å³ä¾§è¾¹æ æ˜¾ç¤ºï¼Œå¯ä»¥å°†å…¶è½¬æ¢ä¸º<strong>é“¾æ¥</strong></li></ol><h1 id="åœ¨-Hexo-åšå®¢ä¸­æ’å…¥æœ¬åœ°å›¾ç‰‡"><a href="#åœ¨-Hexo-åšå®¢ä¸­æ’å…¥æœ¬åœ°å›¾ç‰‡" class="headerlink" title="åœ¨ Hexo åšå®¢ä¸­æ’å…¥æœ¬åœ°å›¾ç‰‡"></a>åœ¨ Hexo åšå®¢ä¸­æ’å…¥æœ¬åœ°å›¾ç‰‡</h1><ol><li>å›¾ç‰‡ä¿å­˜äºåŒä¸€ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ä¸­ï¼›</li><li>ä½¿ç”¨ <code>Hexo3</code> æ”¯æŒçš„è¯­æ³• <code>&#123;% asset_img example.jpg hello%&#125;</code> è¿›è¡Œæ’å…¥å›¾ç‰‡ï¼›</li></ol><p>ç¼ºç‚¹æ˜¯æ— æ³•åœ¨æœ¬åœ°æ¸²æŸ“å›¾ç‰‡</p><h1 id="æ£€ç´¢å’Œç®¡ç†"><a href="#æ£€ç´¢å’Œç®¡ç†" class="headerlink" title="æ£€ç´¢å’Œç®¡ç†"></a>æ£€ç´¢å’Œç®¡ç†</h1><blockquote><p>æ–‡ä»¶å¤¹ã€æ ‡ç­¾ã€é“¾æ¥</p></blockquote><ol><li>ç‚¹å‡»å·¦ä¾§çš„ ğŸ” å¯ä»¥æœç´¢æ–‡ä»¶å¤¹ã€æ–‡ä»¶ã€é“¾æ¥ç­‰å†…å®¹</li><li>åœ¨é˜…è¯»è§†å›¾é‡Œç‚¹å‡» front matter çš„æŸä¸ªæ ‡ç­¾å³å¯æœç´¢åˆ°æ‹¥æœ‰è¯¥æ ‡ç­¾çš„æ‰€æœ‰æ–‡ç« </li></ol><h1 id="å¯ä»¥ä½¿ç”¨-Latex-å…¬å¼"><a href="#å¯ä»¥ä½¿ç”¨-Latex-å…¬å¼" class="headerlink" title="å¯ä»¥ä½¿ç”¨ $Latex$ å…¬å¼"></a>å¯ä»¥ä½¿ç”¨ $Latex$ å…¬å¼</h1><blockquote><p>åŒ typora</p></blockquote><p>$$D(x) = \begin{cases}<br>\lim\limits_{x \to 0} \frac{a^x}{b+c}, &amp; x&lt;3 \<br>\pi, &amp; x=3 \<br>\int_a^{3b}x_{ij}+e^2 \mathrm{d}x,&amp; x&gt;3 \<br>\end{cases}$$</p><h1 id="å¥½ç”¨çš„æ’ä»¶"><a href="#å¥½ç”¨çš„æ’ä»¶" class="headerlink" title="å¥½ç”¨çš„æ’ä»¶"></a>å¥½ç”¨çš„æ’ä»¶</h1><h2 id="slide"><a href="#slide" class="headerlink" title="slide"></a>slide</h2><p>ç”¨  <code>---</code> æ¥åˆ†å‰²é¡µé¢ï¼Œåˆ¶ä½œä¸ºä¸€ä¸ªä¸€ä¸ª slide é¡µé¢ï¼Œç„¶åç‚¹å‡»å³ä¸Šè§’çš„ <code>å¼€å§‹æ¼”ç¤º</code></p><p><code>refs</code>ï¼š</p><ul><li><a href="https://publish.obsidian.md/help-zh">Obsidian ä¸­æ–‡å¸®åŠ© - Obsidian Publish</a></li><li><a href="https://zhuanlan.zhihu.com/p/349638221">Obsidianï¼šä¸€æ¬¾å®Œç¾çš„ç§‘ç ”ç¬”è®°/çŸ¥è¯†ç®¡ç†è½¯ä»¶ - çŸ¥ä¹ (zhihu.com)</a></li><li><a href="https://www.bilibili.com/video/BV1SA411i7BG?vd_source=de5d636c079ac45214bd34891ede8c4b">Obsidianï¼šç›®å‰æˆ‘ä»¬çœ¼ä¸­æœ€ç¾æœ€å¥½ç”¨çš„å…è´¹ç¬”è®°/çŸ¥è¯†ç®¡ç†è½¯ä»¶_å“”å“©å“”å“©_bilibili</a></li><li><a href="https://www.bilibili.com/video/BV1Ya4y1E7Mo?vd_source=de5d636c079ac45214bd34891ede8c4b">è¶…å¥½ç”¨ç¬”è®°è½¯ä»¶ï¼ç¥å¥‡çš„Obsidiané»‘æ›œçŸ³Markdownæ–‡æœ¬ç¼–è¾‘çŸ¥è¯†ç®¡ç†å·¥å…·ï¼Œæˆä¸ºä½ çš„ç¬¬äºŒå¤§è„‘ã€æ–¹ä¿Šçš“åŒå­¦ã€‘_å“”å“©å“”å“©_bilibili</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ©å™¨é…· </category>
          
          <category> æ–¹æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> è®ºæ–‡ </tag>
            
            <tag> ç§‘ç ” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VS2019 ä¸‹ C++ é¡¹ç›®è®¿é—®MySQLæ•°æ®åº“</title>
      <link href="p/22861f12.html"/>
      <url>p/22861f12.html</url>
      
        <content type="html"><![CDATA[<p><a href="%5B(5%E6%9D%A1%E6%B6%88%E6%81%AF)">å‚è€ƒåšå®¢</a> MySQLæ•°æ®åº“â€”VS019 C++è®¿é—®MySQL_ä¹°ä»£ç çš„å°çŒªçŒªçš„åšå®¢-CSDNåšå®¢](<a href="https://blog.csdn.net/weixin_49324123/article/details/116493884">https://blog.csdn.net/weixin_49324123/article/details/116493884</a>))</p><p>CMD å‘½ä»¤è¡Œçª—å£è¿›å…¥mysqlæ•°æ®åº“ï¼š</p><p><code>mysql -hlocalhost -uroot -p</code>:</p><ul><li><code>-hlocalhost</code>ï¼š-hè¡¨ç¤ºæœåŠ¡å™¨å, localhostè¡¨ç¤ºæœ¬åœ°</li><li><code>-uroot</code>: -uè¡¨ç¤ºæ•°æ®åº“ç”¨æˆ·åï¼Œrootæ˜¯MySQLé»˜è®¤ç”¨æˆ·å</li><li><code>-p</code>: ä¸ºå¯†ç </li></ul><h1 id="1-é…ç½®"><a href="#1-é…ç½®" class="headerlink" title="1 é…ç½®"></a>1 é…ç½®</h1><ul><li><p>é¡¹ç›®-&gt;å±æ€§-&gt;==å¹³å°ä¸º <code>x64</code>==</p></li><li><p>é¡¹ç›® -&gt; å±æ€§ -&gt; VC++ ç›®å½•</p><ul><li>å°†æ‰€å®‰è£…çš„MySQLç›®å½•ä¸‹çš„ <code>include</code> <code>lib</code>æ–‡ä»¶å¤¹ç›®å½•åˆ†åˆ«è¾“å…¥åŒ…å«ç›®å½•åº“ç›®å½•</li><li><img src="E:\Hexo\Blog\source_posts\VS2019-C++-MySQL.assets\image-20210522160110645.png" alt="image-20210522160110645"></li></ul></li><li><p>é“¾æ¥å™¨ -&gt; è¾“å…¥</p><ul><li>å°† MySQL çš„libç›®å½•ä¸‹çš„ <code>libmysql.lib</code>æ–‡ä»¶åè¾“å…¥é™„åŠ ä¾èµ–é¡¹ï¼Œåªéœ€è¾“å…¥æ–‡ä»¶å</li><li><img src="E:\Hexo\Blog\source_posts\VS2019-C++-MySQL.assets\image-20210522160248341.png" alt="image-20210522160248341"></li></ul></li><li><p>å°† lib ç›®å½•ä¸‹çš„ <code>libmysql.dll</code> æ–‡ä»¶å¤åˆ¶ <code>C:\Windows\System32</code>ç›®å½•ä¸‹</p></li></ul><h1 id="2-C-ä¸­-MySQL-çš„åŸºæœ¬æ“ä½œ"><a href="#2-C-ä¸­-MySQL-çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="2 C++ ä¸­ MySQL çš„åŸºæœ¬æ“ä½œ"></a>2 C++ ä¸­ MySQL çš„åŸºæœ¬æ“ä½œ</h1><p>ä¸€ä¸ªå¯¹å·²åˆ›å»ºçš„æ•°æ®åº“çš„è®¿é—®ä»£ç ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mysql.h&gt;</span> <span class="comment">// mysqlæ–‡ä»¶</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MYSQL mysql;    <span class="comment">//æ•°æ®åº“å¥æŸ„</span></span><br><span class="line">MYSQL_RES* res; <span class="comment">//æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">MYSQL_ROW row;  <span class="comment">//è®°å½•ç»“æ„ä½“</span></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æ•°æ®åº“</span></span><br><span class="line"><span class="built_in">mysql_init</span>(&amp;mysql);</span><br><span class="line"><span class="comment">//è®¾ç½®å­—ç¬¦ç¼–ç </span></span><br><span class="line"><span class="built_in">mysql_options</span>(&amp;mysql, MYSQL_SET_CHARSET_NAME, <span class="string">&quot;gbk&quot;</span>);</span><br><span class="line"><span class="comment">//è¿æ¥æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">mysql_real_connect</span>(&amp;mysql, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;qazedc12&quot;</span>, <span class="string">&quot;test&quot;</span>, <span class="number">3306</span>, <span class="literal">NULL</span>, <span class="number">0</span>) == <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;é”™è¯¯åŸå› ï¼š %s\n&quot;</span>, <span class="built_in">mysql_error</span>(&amp;mysql));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;è¿æ¥å¤±è´¥ï¼\n&quot;</span>);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="keyword">int</span> ret = <span class="built_in">mysql_query</span>(&amp;mysql, <span class="string">&quot;select * from students;&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ret: %d\n&quot;</span>, ret);</span><br><span class="line"><span class="comment">//è·å–ç»“æœé›†</span></span><br><span class="line">res = <span class="built_in">mysql_store_result</span>(&amp;mysql);</span><br><span class="line"><span class="comment">//ç»™ROWèµ‹å€¼ï¼Œåˆ¤æ–­ROWæ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºå°±æ‰“å°æ•°æ®ã€‚</span></span><br><span class="line"><span class="keyword">while</span> (row = <span class="built_in">mysql_fetch_row</span>(res))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s  &quot;</span>, row[<span class="number">0</span>]);   <span class="comment">//æ‰“å°ID</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s  &quot;</span>, row[<span class="number">1</span>]);   <span class="comment">//æ‰“å°å§“å</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s  &quot;</span>, row[<span class="number">2</span>]);  <span class="comment">//æ‰“å°ç­çº§</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s  &quot;</span>, row[<span class="number">3</span>]);  <span class="comment">//æ‰“å°æ€§åˆ«</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾ç»“æœé›†</span></span><br><span class="line"><span class="built_in">mysql_free_result</span>(res);</span><br><span class="line"><span class="comment">//å…³é—­æ•°æ®åº“</span></span><br><span class="line"><span class="built_in">mysql_close</span>(&amp;mysql);</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»å®ä¾‹ä»£ç ä¸­å¯ä»¥äº†è§£åˆ°è®¿é—®æ•°æ®åº“çš„æ­¥éª¤ï¼š</p><ul><li><p>éœ€è¦åŒ…å«çš„<strong>å¤´æ–‡ä»¶</strong> <code>mysql.h</code></p></li><li><p><strong>åˆå§‹åŒ–</strong>æ•°æ®åº“ï¼š</p><ul><li><strong>æ•°æ®åº“å¥æŸ„</strong> <code>MYSQL mysql</code></li><li>å®šä¹‰<strong>æŸ¥è¯¢ç»“æœé›†</strong> <code>MYSQL_RES* res</code></li><li>å®šä¹‰<strong>è®°å½•ç»“æ„ä½“</strong> <code>MYSQL_ROW row</code></li><li>åˆå§‹åŒ–æ•°æ®åº“ï¼š <code>mysql_init(&amp;mysql)</code></li></ul></li><li><p>è®¾ç½®å­—ç¬¦ç¼–ç ï¼š<code>mysql_options(&amp;mysql, MYSQL_SET_CHARSET_NAME, &quot;gbk&quot;);</code></p></li><li><p>è¿æ¥æ•°æ®åº“ï¼š<code>mysql_real_connect(&amp;mysql, &quot;127.0.0.1&quot;, &quot;root&quot;, &quot;123456Aa&quot;, &quot;school&quot;, 3306, NULL, 0)</code></p></li><li><p>æŸ¥è¯¢æ•°æ®ï¼š<code>mysql_query(&amp;mysql, &quot;select * from students;&quot;)</code></p></li><li><p>è·å–ç»“æœé›† <code>res = mysql_store_result(&amp;mysql)</code></p></li><li><p>æ‰“å°æ•°æ®ï¼š<code>while(row = mysql_fetch_row(res))</code></p></li><li><p>é‡Šæ”¾ç»“æœé›†ï¼š<code>mysql_free_result(res)</code></p></li><li><p>å…³é—­æ•°æ®åº“ï¼š<code>mysql_close(&amp;mysql)</code></p></li></ul><h2 id="å¸¸ç”¨çš„è¿æ¥-MySQL-å’Œ-ä»MySQLä¸­å–å‡ºæ•°æ®çš„API"><a href="#å¸¸ç”¨çš„è¿æ¥-MySQL-å’Œ-ä»MySQLä¸­å–å‡ºæ•°æ®çš„API" class="headerlink" title="å¸¸ç”¨çš„è¿æ¥ MySQL å’Œ ä»MySQLä¸­å–å‡ºæ•°æ®çš„API"></a>å¸¸ç”¨çš„è¿æ¥ MySQL å’Œ ä»MySQLä¸­å–å‡ºæ•°æ®çš„API</h2><p><code>mysql_real_connect()</code></p><ul><li><strong>å‡½æ•°åŸå‹</strong>ï¼š<code>MYSQL *mysql_real_connect(MYSQL *mysql, const char *host, const char* user, const char* password, const char* db, unsigned int port, const char* unix_socket, unsigned int client_flag)</code><ul><li>mysql: ç°å­˜MYSQLç»“æ„çš„åœ°å€</li><li>host : ä¸€ä¸ªä¸»æœºåæˆ–IPåœ°å€</li><li>user: ç”¨æˆ·ID</li><li>password: ç”¨æˆ·å¯†ç </li><li>db: æ•°æ®åº“å</li><li>port: è‹¥é0ï¼Œåˆ™ä½œTCP/IP è¿æ¥ç”¨ä½œç«¯å£å·</li><li>unix_socket: è‹¥éNULLï¼Œåˆ™æŒ‡å®šå¥—æ¥å­—æˆ–åº”è¯¥è¢«ä½¿ç”¨çš„å‘½åç®¡é“</li><li>clident_flag: é€šå¸¸ä¸º0</li></ul></li><li>è¿”å›å€¼ï¼š<ul><li>æˆåŠŸï¼šMYSQL* è¿æ¥å¥æŸ„</li><li>å¤±è´¥ï¼šNULL</li></ul></li></ul><p><code>mysql_select_db()</code></p><ul><li><strong>å‡½æ•°åŸå‹</strong>ï¼š<code>int mysql_select_db(MYSQL* mysql, const char *db)</code><ul><li>ä½¿å¾—ç”± <strong>db æŒ‡å®šçš„æ•°æ®åº“</strong>æˆä¸ºåœ¨ç”± mysql æŒ‡å®šçš„è¿æ¥ä¸Šçš„å½“å‰æ•°æ®åº“</li></ul></li><li>è¿”å›å€¼ï¼š<ul><li>æˆåŠŸï¼š0</li><li>å¤±è´¥ï¼šéé›¶</li></ul></li></ul><p><code>mysql_query</code></p><ul><li>å‡½æ•°åŸå‹ï¼š<code>int mysql_query(MYSQL* mysql, const char*query)</code><ul><li>æ‰§è¡Œç”± query æŒ‡å‘çš„ <strong>SQLæŸ¥è¯¢è¯­å¥</strong></li><li>å¿…é¡»åŒ…å«ä¸€æ¡çš„ SQL è¯­å¥ï¼›è‹¥å…è®¸å¤šè¯­å¥æ‰§è¡Œï¼Œå­—ç¬¦ä¸²å¯åŒ…å«å¤šæ¡ç”±åˆ†å·éš”å¼€çš„è¯­å¥</li><li>ä¸éœ€è¦åŠ ç»ˆæ­¢çš„åˆ†å·</li><li><strong>æ³¨æ„</strong>ï¼šå¯¹äºåŒ…å«äºŒè¿›åˆ¶æ•°æ®çš„æŸ¥è¯¢ï¼Œä½ å¿…é¡»ä½¿ç”¨mysql_real_query()è€Œä¸æ˜¯mysql_query()ï¼Œå› ä¸ºäºŒè¿›åˆ¶ä»£ç æ•°æ®å¯èƒ½åŒ…å«â€œ\0â€å­—ç¬¦ï¼Œè€Œä¸”ï¼Œmysql_real_query()æ¯”mysql_query()æ›´å¿«ï¼Œå› ä¸ºå®ƒå¯¹æŸ¥è¯¢å­—ç¬¦ä¸²è°ƒç”¨strlen()</li></ul></li></ul><p><code>mysql_store_result</code></p><ul><li>å‡½æ•°åŸå‹ï¼š<code>MYSQL_RES *mysql_store_result(MYSQL *mysql)</code></li><li>å¯¹äºæˆåŠŸæ£€ç´¢äº†æ•°æ®çš„æ¯ä¸ªæŸ¥è¯¢ï¼ˆSELECT, SHOW, DESCRIBE,ç­‰ï¼‰ï¼Œå¿…é¡»è°ƒç”¨mysql_store_result æˆ– mysql_use_result</li><li>å¯¹äºå…¶ä»–æŸ¥è¯¢ï¼Œä¸éœ€è¦è°ƒç”¨mysql_store_result æˆ–</li><li><blockquote><p>mysql_store_result()å°†æŸ¥è¯¢çš„å…¨éƒ¨ç»“æœè¯»å–åˆ°å®¢æˆ·ç«¯ï¼Œåˆ†é…1ä¸ªMYSQL_RESç»“æ„ï¼Œå¹¶å°†ç»“æœç½®äºè¯¥ç»“æ„ä¸­ã€‚</p><p>å¦‚æœæŸ¥è¯¢æœªè¿”å›ç»“æœé›†ï¼Œmysql_store_result()å°†è¿”å›NullæŒ‡é’ˆï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæŸ¥è¯¢æ˜¯INSERTè¯­å¥ï¼‰ã€‚</p><p>å¦‚æœè¯»å–ç»“æœé›†å¤±è´¥ï¼Œmysql_store_result()è¿˜ä¼šè¿”å›NullæŒ‡é’ˆã€‚é€šè¿‡æ£€æŸ¥mysql_error()æ˜¯å¦è¿”å›éç©ºå­—ç¬¦ä¸²ï¼Œmysql_errno()æ˜¯å¦è¿”å›é0å€¼ï¼Œæˆ–mysql_field_count()æ˜¯å¦è¿”å›0ï¼Œå¯ä»¥æ£€æŸ¥æ˜¯å¦å‡ºç°äº†é”™è¯¯ã€‚</p><p>å¦‚æœæœªè¿”å›è¡Œï¼Œå°†è¿”å›ç©ºçš„ç»“æœé›†ã€‚ï¼ˆç©ºç»“æœé›†è®¾ç½®ä¸åŒäºä½œä¸ºè¿”å›å€¼çš„ç©ºæŒ‡é’ˆï¼‰ã€‚</p><p>ä¸€æ—¦è°ƒç”¨äº†mysql_store_result()å¹¶è·å¾—äº†ä¸æ˜¯NullæŒ‡é’ˆçš„ç»“æœï¼Œå¯è°ƒç”¨mysql_num_rows()æ¥æ‰¾å‡ºç»“æœé›†ä¸­çš„è¡Œæ•°ã€‚</p><p>å¯ä»¥è°ƒç”¨mysql_fetch_row()æ¥è·å–ç»“æœé›†ä¸­çš„è¡Œï¼Œæˆ–è°ƒç”¨mysql_row_seek()å’Œmysql_row_tell()æ¥è·å–æˆ–è®¾ç½®ç»“æœé›†ä¸­çš„å½“å‰è¡Œä½ç½®ã€‚</p><p>ä¸€æ—¦å®Œæˆäº†å¯¹ç»“æœé›†çš„æ“ä½œï¼Œå¿…é¡»è°ƒç”¨mysql_free_result()ã€‚</p></blockquote></li></ul><p><code>mysql_fetch_row</code></p><h2 id="INSERT-ã€UPDATEè¯­å¥"><a href="#INSERT-ã€UPDATEè¯­å¥" class="headerlink" title="INSERT ã€UPDATEè¯­å¥"></a>INSERT ã€UPDATEè¯­å¥</h2><p><a href="https://www.cnblogs.com/fnlingnzb-learner/p/5829556.htmls">å‚è€ƒåšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL</title>
      <link href="p/4d712855.html"/>
      <url>p/4d712855.html</url>
      
        <content type="html"><![CDATA[<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><p>[toc]</p><ul><li><p>ä»€ä¹ˆæ˜¯ <code>SQL </code></p><ul><li>è®¿é—®å’Œå¤„ç† **å…³ç³»æ•°æ®åº“ **çš„ <strong>è®¡ç®—æœºæ ‡å‡†è¯­è¨€</strong></li></ul></li><li><p>ç¼–å†™ç¨‹åºæ—¶ï¼Œåªè¦æ¶‰åŠ <strong>æ“ä½œå…³ç³»æ•°æ®åº“</strong>ï¼Œå°±å¿…é¡»é€šè¿‡ SQL å®Œæˆ</p></li><li><p><code>NoSQL</code>: éSQLçš„æ•°æ®åº“ï¼Œéƒ½ä¸æ˜¯å…³ç³»æ•°æ®åº“</p></li></ul><h1 id="1-å…³ç³»æ•°æ®åº“æ¦‚è¿°"><a href="#1-å…³ç³»æ•°æ®åº“æ¦‚è¿°" class="headerlink" title="1 å…³ç³»æ•°æ®åº“æ¦‚è¿°"></a>1 å…³ç³»æ•°æ®åº“æ¦‚è¿°</h1><ul><li><p>ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“</p><ul><li>åº”ç”¨ç¨‹åº éœ€è¦ä¿å­˜ç”¨æˆ·çš„æ•°æ®</li><li>éšç€åº”ç”¨ç¨‹åºåŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œæ•°æ®é‡ä¹Ÿè¶Šæ¥è¶Šå¤§<ul><li>è¯»å†™æ–‡ä»¶å¹¶è§£æå‡ºæ•°æ®ï¼Œéœ€è¦å¤§é‡é‡å¤ä»£ç </li><li>ä»å¤§é‡æ•°æ®ä¸­ å¿«é€ŸæŸ¥è¯¢å‡º æŒ‡å®šæ•°æ®ï¼Œéœ€è¦å¤æ‚çš„é€»è¾‘</li></ul></li><li>æ¯ä¸ªåº”ç”¨ç¨‹åº<strong>è®¿é—®æ•°æ®çš„æ¥å£</strong>ä¸åŒï¼Œæ•°æ®éš¾ä»¥å¤ç”¨</li></ul></li><li><p><strong>æ•°æ®åº“</strong>ï¼šä¸“é—¨<strong>ç®¡ç†æ•°æ®</strong>çš„è½¯ä»¶</p><ul><li>åº”ç”¨ç¨‹åºé€šè¿‡æ•°æ®åº“è½¯ä»¶æä¾›çš„æ¥å£æ¥è¯»å†™æ•°æ®</li><li>æ•°æ®åº“è½¯ä»¶æ¥ç®¡ç†æ•°æ®å¦‚ä½•å­˜å‚¨è¿›æ–‡ä»¶</li><li>```ascii<br> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ application  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<pre><code>   â–²â”‚   â”‚â”‚</code></pre>   readâ”‚â”‚write<pre><code>   â”‚â”‚   â”‚â–¼</code></pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   database   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## æ•°æ®æ¨¡å‹</span><br><span class="line"></span><br><span class="line">* æ•°æ®åº“æŒ‰ç…§ **æ•°æ®ç»“æ„** æ¥**ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®**ï¼Œä¸‰ç§æ¨¡å‹</span><br><span class="line"></span><br><span class="line">  * å±‚æ¬¡æ¨¡å‹</span><br><span class="line">  * ç½‘çŠ¶æ¨¡å‹</span><br><span class="line">  * å…³ç³»æ¨¡å‹</span><br><span class="line">* **å±‚æ¬¡æ¨¡å‹ï¼š**ä¸Šä¸‹çº§çš„å±‚æ¬¡å…³ç³» æ¥ç»„ç»‡æ•°æ®</span><br><span class="line"></span><br><span class="line">  * ```ascii</span><br><span class="line">        â”Œâ”€â”€â”€â”€â”€â”</span><br><span class="line">                â”‚     â”‚</span><br><span class="line">                â””â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                   â”‚</span><br><span class="line">           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">           â”‚               â”‚</span><br><span class="line">        â”Œâ”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”</span><br><span class="line">        â”‚     â”‚         â”‚     â”‚</span><br><span class="line">        â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜</span><br><span class="line">           â”‚               â”‚</span><br><span class="line">       â”Œâ”€â”€â”€â”´â”€â”€â”€â”       â”Œâ”€â”€â”€â”´â”€â”€â”€â”</span><br><span class="line">       â”‚       â”‚       â”‚       â”‚</span><br><span class="line">    â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”</span><br><span class="line">    â”‚     â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚</span><br><span class="line">    â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ç½‘çŠ¶æ¨¡å‹ï¼š</strong>æŠŠæ¯ä¸ªæ•°æ®èŠ‚ç‚¹å’Œå…¶ä»–å¾ˆå¤šèŠ‚ç‚¹éƒ½è¿æ¥èµ·æ¥</p><ul><li>```ascii<pre><code> â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”</code></pre>   â”Œâ”€â”‚     â”‚â”€â”€â”€â”€â”€â”€â”‚     â”‚â”€â”€â”<br>   â”‚ â””â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”˜  â”‚<br>   â”‚    â”‚            â”‚     â”‚<br>   â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚<br>   â”‚           â”‚           â”‚<br>â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”<br>â”‚     â”‚â”€â”€â”€â”€â”€â”‚     â”‚â”€â”€â”€â”€â”€â”‚     â”‚<br>â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜<br>   â”‚           â”‚           â”‚<br>   â”‚     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”     â”‚<br>   â”‚     â”‚           â”‚     â”‚<br>   â”‚  â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”  â”‚<br>   â””â”€â”€â”‚     â”‚â”€â”€â”€â”€â”€â”‚     â”‚â”€â”€â”˜<pre><code>  â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* **å…³ç³»æ¨¡å‹ï¼š**å°†æ•°æ®å½“ä½œäºŒç»´è¡¨æ ¼ï¼Œä»»ä½•æ•°æ®é€šè¿‡ è¡Œå·+åˆ—å· å”¯ä¸€ç¡®å®š</span><br><span class="line"></span><br><span class="line">  * ```ascii</span><br><span class="line">    â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤</span><br><span class="line">    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">    â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å…³ç³»æ¨¡å‹è·å¾—äº†ç»å¯¹å¸‚åœºä»½é¢</p><ul><li>ç†è§£å’Œä½¿ç”¨èµ·æ¥æœ€ç®€å•</li><li>å…³ç³»æ•°æ®åº“ çš„ å…³ç³»æ¨¡å‹ï¼šåŸºäºæ•°å­¦ç†è®ºå»ºç«‹</li></ul></li><li><p>ç®€è€Œè¨€ä¹‹ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ªç­çº§åç§°ï¼Œå¯ä»¥æŸ¥åˆ°ä¸€æ¡ç­çº§è®°å½•ï¼Œæ ¹æ®ç­çº§IDï¼Œåˆå¯ä»¥æŸ¥åˆ°å¤šæ¡å­¦ç”Ÿè®°å½•ï¼Œè¿™æ ·ï¼ŒäºŒç»´è¡¨ä¹‹é—´å°±é€šè¿‡IDæ˜ å°„å»ºç«‹äº† <strong>â€œä¸€å¯¹å¤šâ€</strong> å…³ç³»ã€‚</p></li></ul><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><ul><li><p>ä¸€ä¸ª<strong>å…³ç³»è¡¨ï¼š</strong></p><ul><li><p>é¡»å®šä¹‰ <strong>æ¯ä¸€åˆ—çš„åç§°</strong>å’Œ<strong>æ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹</strong></p></li><li><p>å…³ç³»æ•°æ®åº“æ”¯æŒçš„æ ‡å‡†æ•°æ®ç±»å‹ï¼šæ•°å€¼ã€å­—ç¬¦ä¸²ã€æ—¶é—´ç­‰ï¼š</p><ul><li><table><thead><tr><th align="left">åç§°</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">INT</td><td align="left">æ•´å‹</td><td align="left">4å­—èŠ‚æ•´æ•°ç±»å‹ï¼ŒèŒƒå›´çº¦+/-21äº¿</td></tr><tr><td align="left">BIGINT</td><td align="left">é•¿æ•´å‹</td><td align="left">8å­—èŠ‚æ•´æ•°ç±»å‹ï¼ŒèŒƒå›´çº¦+/-922äº¿äº¿</td></tr><tr><td align="left">REAL</td><td align="left">æµ®ç‚¹å‹</td><td align="left">4å­—èŠ‚æµ®ç‚¹æ•°ï¼ŒèŒƒå›´çº¦+/-1038</td></tr><tr><td align="left">DOUBLE</td><td align="left">æµ®ç‚¹å‹</td><td align="left">8å­—èŠ‚æµ®ç‚¹æ•°ï¼ŒèŒƒå›´çº¦+/-10308</td></tr><tr><td align="left">DECIMAL(M,N)</td><td align="left">é«˜ç²¾åº¦å°æ•°</td><td align="left">ç”±ç”¨æˆ·æŒ‡å®šç²¾åº¦çš„å°æ•°ï¼Œä¾‹å¦‚ï¼ŒDECIMAL(20,10)è¡¨ç¤ºä¸€å…±20ä½ï¼Œå…¶ä¸­å°æ•°10ä½ï¼Œé€šå¸¸ç”¨äºè´¢åŠ¡è®¡ç®—</td></tr><tr><td align="left">CHAR(N)</td><td align="left">å®šé•¿å­—ç¬¦ä¸²</td><td align="left">å­˜å‚¨æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼ŒCHAR(100)æ€»æ˜¯å­˜å‚¨100ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²</td></tr><tr><td align="left">VARCHAR(N)</td><td align="left">å˜é•¿å­—ç¬¦ä¸²</td><td align="left">å­˜å‚¨å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼ŒVARCHAR(100)å¯ä»¥å­˜å‚¨0~100ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²</td></tr><tr><td align="left">BOOLEAN</td><td align="left">å¸ƒå°”ç±»å‹</td><td align="left">å­˜å‚¨Trueæˆ–è€…False</td></tr><tr><td align="left">DATE</td><td align="left">æ—¥æœŸç±»å‹</td><td align="left">å­˜å‚¨æ—¥æœŸï¼Œä¾‹å¦‚ï¼Œ2018-06-22</td></tr><tr><td align="left">TIME</td><td align="left">æ—¶é—´ç±»å‹</td><td align="left">å­˜å‚¨æ—¶é—´ï¼Œä¾‹å¦‚ï¼Œ12:20:59</td></tr><tr><td align="left">DATETIME</td><td align="left">æ—¥æœŸå’Œæ—¶é—´ç±»å‹</td><td align="left">å­˜å‚¨æ—¥æœŸ+æ—¶é—´ï¼Œä¾‹å¦‚ï¼Œ2018-06-22 12:20:59</td></tr></tbody></table></li></ul></li></ul></li><li><p>è®¸å¤šæ•°æ®ç±»å‹æœ‰åˆ«åï¼š</p><ul><li>ä¾‹å¦‚ <code>REAL</code> : <code>FLOAT(24)</code></li></ul></li><li><p>éœ€è¦æ ¹æ®ä¸šåŠ¡è§„åˆ™ é€‰æ‹©åˆé€‚çš„ç±»å‹ï¼š</p><ul><li><code>BIGINT</code> : æ»¡è¶³æ•´æ•°å­˜å‚¨çš„éœ€æ±‚</li><li><code>VARCHAR(N)</code> ï¼šæ»¡è¶³å­—ç¬¦ä¸²å­˜å‚¨çš„éœ€æ±‚</li></ul></li></ul><h2 id="ä¸»æµå…³ç³»æ•°æ®åº“"><a href="#ä¸»æµå…³ç³»æ•°æ®åº“" class="headerlink" title="ä¸»æµå…³ç³»æ•°æ®åº“"></a>ä¸»æµå…³ç³»æ•°æ®åº“</h2><ul><li><strong>ä¸»æµçš„å…³ç³»æ•°æ®åº“</strong>ï¼š<ul><li>å•†ç”¨æ•°æ®åº“ï¼š<ul><li><code>Oracle</code>, <code>SQL Server</code>, <code>DB2</code></li></ul></li><li>å¼€æºæ•°æ®åº“ï¼š<ul><li><code>MySQL</code>, <code>PostgreSQL</code></li></ul></li><li>æ¡Œé¢æ•°æ®åº“ï¼š<ul><li><code>Access</code> ï¼Œé€‚åˆæ¡Œé¢åº”ç”¨ç¨‹åºä½¿ç”¨</li></ul></li><li>åµŒå…¥å¼æ•°æ®åº“ï¼š<ul><li><code>Sqlite</code>, é€‚åˆæ‰‹æœºåº”ç”¨ å’Œæ¡Œé¢ç¨‹åº</li></ul></li></ul></li></ul><h2 id="SQL-1"><a href="#SQL-1" class="headerlink" title="SQL"></a>SQL</h2><ul><li><p><strong>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</strong> ï¼šç”¨æ¥è®¿é—®å’Œæ“ä½œ <strong>æ•°æ®åº“ç³»ç»Ÿ</strong></p><ul><li>å¯ä»¥ <strong>æŸ¥è¯¢ã€æ·»åŠ ã€æ›´æ–°ã€å’Œåˆ é™¤æ•°æ®åº“ä¸­çš„æ•°æ®</strong></li><li>å¯ä»¥ <strong>å¯¹æ•°æ®åº“è¿›è¡Œç®¡ç†å’Œç»´æŠ¤æ“ä½œ</strong></li></ul></li><li><p>ä¸åŒçš„æ•°æ®åº“ éƒ½æ”¯æŒ SQL</p></li><li><p>ä¸åŒçš„æ•°æ®åº“ å¯¹ æ ‡å‡†çš„SQLæ”¯æŒ ä¸å¤ªä¸€è‡´</p><ul><li>å¤§éƒ¨åˆ†æ•°æ®åº“åœ¨æ ‡å‡†çš„SQLåšäº†<strong>æ‰©å±•</strong></li></ul></li><li><p>åªä½¿ç”¨ANSI ç»„ç»‡å®šä¹‰çš„æ ‡å‡†SQLï¼Œæ‰€æœ‰æ•°æ®åº“éƒ½å¯ä»¥æ”¯æŒ</p></li><li><p>SQL å®šä¹‰çš„å¯¹ æ•°æ®åº“ çš„æ“ä½œï¼š</p><ul><li><code>DDL</code> : <strong>Data Definition Language</strong><ul><li>ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ï¼šåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€ä¿®æ”¹è¡¨ç»“æ„ç­‰æ“ä½œ</li><li>DDL é€šå¸¸ç”±æ•°æ®åº“ç®¡ç†å‘˜æ‰§è¡Œ</li></ul></li><li><code>DML</code> : <strong>Data Manipulation Language</strong><ul><li>ç”¨æˆ·æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°æ•°æ®çš„èƒ½åŠ›</li><li>åº”ç”¨ç¨‹åºå¯¹æ•°æ®åº“çš„æ—¥å¸¸æ“ä½œ</li></ul></li><li><code>DQL</code> : <strong>Data Query Language</strong><ul><li>ç”¨æˆ·æŸ¥è¯¢æ•°æ®ï¼Œæœ€é¢‘ç¹</li></ul></li></ul></li></ul><h2 id="è¯­æ³•ç‰¹ç‚¹"><a href="#è¯­æ³•ç‰¹ç‚¹" class="headerlink" title="è¯­æ³•ç‰¹ç‚¹"></a>è¯­æ³•ç‰¹ç‚¹</h2><ul><li>å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™</li><li>å¯¹äºè¡¨æ˜å’Œåˆ—åï¼šæœ‰çš„æ•°æ®åº“åŒºåˆ†å¤§å°å†™</li><li>åŒä¸€ä¸ªæ•°æ®åº“ï¼šä¸åŒæ“ä½œç³»ç»Ÿå¤§å°å†™ä¸åŒ</li><li>çº¦å®šï¼šSQL å…³é”®å­—æ€»æ˜¯å¤§å†™ï¼Œè¡¨åå’Œåˆ—åå‡ä½¿ç”¨å°å†™</li></ul><h1 id="2-å®‰è£…-MySQL"><a href="#2-å®‰è£…-MySQL" class="headerlink" title="2 å®‰è£… MySQL"></a>2 å®‰è£… MySQL</h1><ul><li><p>MySQL <strong>åº”ç”¨æœ€å¹¿æ³›çš„ å¼€æºå…³ç³»æ•°æ®åº“</strong></p></li><li><p>ä¸å…¶ä»–å…³ç³»æ•°æ®åº“ä¸åŒï¼šMySQL æœ¬èº«å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>SQL æ¥å£</strong>ï¼Œå†…éƒ¨åŒ…å«<strong>å¤šç§æ•°æ®åº“å¼•æ“</strong></p><ul><li><code>InnoDB</code> :  <strong>æ”¯æŒäº‹åŠ¡çš„æ•°æ®åº“å¼•æ“</strong></li><li><code>MyISAM</code> : MySQL æ—©æœŸé›†æˆçš„é»˜è®¤æ•°æ®åº“å¼•æ“ï¼Œ<strong>ä¸æ”¯æŒäº‹åŠ¡</strong></li></ul></li><li><p>åˆ‡æ¢ <strong>MySQL å¼•æ“</strong>ä¸å½±å“è‡ªå·±å†™çš„åº”ç”¨ç¨‹åºä½¿ç”¨ <strong>MySQL æ¥å£</strong></p></li><li><p>ä½¿ç”¨ MySQL æ—¶ï¼Œä¸åŒçš„è¡¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„<strong>æ•°æ®åº“å¼•æ“</strong></p><ul><li>æ€»æ˜¯é€‰æ‹© <code>InnoDB</code> å°±å¥½</li></ul></li><li><p>MySQL ä¸€å¼€å§‹ä¾¿æ˜¯<strong>å¼€æº</strong>çš„ï¼ŒåŸºäºæ­¤ï¼Œè¡ç”Ÿå‡ºå„ç§ç‰ˆæœ¬ï¼š</p><ul><li><code>MariaDB</code><ul><li>MySQL åˆ›å§‹äººåˆ›å»ºçš„å¼€æºåˆ†æ”¯ç‰ˆæœ¬ï¼Œä½¿ç”¨ <code>XtraDB</code> å¼•æ“</li></ul></li><li><code>Aurora</code><ul><li>ç”±Amazonæ”¹è¿›çš„ä¸€ä¸ªMySQLç‰ˆæœ¬ï¼Œä¸“é—¨æä¾›ç»™åœ¨ <code>AWS</code>æ‰˜ç®¡ <code>MySQL</code>ç”¨æˆ·ï¼Œå·ç§°5å€çš„æ€§èƒ½æå‡ã€‚</li></ul></li><li><code>PolarDB</code><ul><li>ç”± <code>Alibaba</code>æ”¹è¿›çš„ä¸€ä¸ªMySQLç‰ˆæœ¬ï¼Œä¸“é—¨æä¾›ç»™åœ¨<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=cz36baxa">é˜¿é‡Œäº‘</a>æ‰˜ç®¡çš„MySQLç”¨æˆ·ï¼Œå·ç§°6å€çš„æ€§èƒ½æå‡ã€‚</li></ul></li></ul></li><li><p>MySQL å®˜æ–¹ç‰ˆæœ¬åˆ†å‡ºçš„ç‰ˆæœ¬ï¼šåŠŸèƒ½ä¾æ¬¡é€’å¢ï¼Œå¢åŠ çš„ä¸»è¦åŠŸèƒ½ï¼šç›‘æ§å’Œé›†ç¾¤ç­‰ç®¡ç†åŠŸèƒ½ï¼Œå¯¹åŸºæœ¬çš„SQLåŠŸèƒ½ä¸€æ ·</p><ul><li><code>Community Edition</code> : ç¤¾åŒºå¼€æºç‰ˆæœ¬ï¼Œå…è´¹</li><li><code>Standard Edition</code> : æ ‡å‡†ç‰ˆ</li><li><code>Enterprise Edition</code> : ä¼ä¸šç‰ˆ</li><li><code>Cluster Carrier Grade Edition</code> : é›†ç¾¤ç‰ˆ</li></ul></li><li><p>å¯ä»¥å®‰è£…å…è´¹çš„ <code>Community Edition</code> ï¼Œè¿›è¡Œå­¦ä¹ ã€å¼€å‘ã€æµ‹è¯•</p><ul><li>éƒ¨ç½²çš„æ—¶å€™ï¼Œé€‰æ‹©é«˜çº§ç‰ˆæœ¬ï¼Œæˆ–è€…äº‘æœåŠ¡å•†æä¾›çš„å…¼å®¹ç‰ˆæœ¬</li></ul></li></ul><h2 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h2><ul><li>å®‰è£…è¿‡ç¨‹ä¸­ï¼ŒMySQL è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª <code>root</code> ç”¨æˆ·ï¼Œå¹¶æç¤ºè¾“å…¥ <code>root</code>å£ä»¤</li><li>è´¦å·ï¼š<code>ZiHaO</code><ul><li>å¯†ç  : <code>qazedc12 </code></li></ul></li></ul><h2 id="è¿è¡Œ-MySQL"><a href="#è¿è¡Œ-MySQL" class="headerlink" title="è¿è¡Œ MySQL"></a>è¿è¡Œ MySQL</h2><ul><li><p>MySQL å®‰è£…åè‡ªåŠ¨åœ¨åå°è¿è¡Œ</p></li><li><p>ä¸‹è½½å®‰è£…åï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡</p><ul><li>é€šè¿‡ <code>ä»»åŠ¡ç®¡ç†å™¨</code>æ‰¾åˆ° <code>mysql.exe</code> æŸ¥çœ‹å±æ€§ï¼Œæ‰¾åˆ° <code>bin</code>ç›®å½•</li><li>å°†è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡</li></ul></li><li><p>é€šè¿‡å‘½ä»¤è¡Œç¨‹åºè¿æ¥ MySQLæœåŠ¡å™¨ï¼Œå‘½ä»¤æç¤ºç¬¦ä¸‹è¾“å…¥ <code>mysql -u root -p</code>, è¾“å…¥å£ä»¤ï¼Œ</p><ul><li>è‹¥è¿æ¥åˆ° MySQL æœåŠ¡å™¨ï¼Œæç¤ºç¬¦å˜æˆ <code>mysql&gt;</code></li></ul></li><li><p>è¾“å…¥ <code>exit</code> é€€å‡º MySQL å‘½ä»¤è¡Œ</p></li><li><p>MySQL æœåŠ¡å™¨ä¾ç„¶åœ¨åå°è¿è¡Œ</p></li></ul><h1 id="3-å…³ç³»æ¨¡å‹"><a href="#3-å…³ç³»æ¨¡å‹" class="headerlink" title="3 å…³ç³»æ¨¡å‹"></a>3 å…³ç³»æ¨¡å‹</h1><ul><li><p>å…³ç³»æ•°æ®åº“ å»ºç«‹åœ¨å…³ç³»æ¨¡å‹ä¸Š</p></li><li><p>å…³ç³»æ¨¡å‹æœ¬è´¨ï¼šè‹¥å¹²ä¸ªå­˜å‚¨æ•°æ®çš„äºŒç»´è¡¨</p><ul><li>è¡¨çš„æ¯ä¸€è¡Œï¼š<code>è®°å½•Record</code>, ä¸€ä¸ªé€»è¾‘æ„ä¹‰ä¸Šçš„æ•°æ®</li><li>è¡¨çš„æ¯ä¸€åˆ—ï¼š<code>å­—æ®µColumn</code>ï¼ŒåŒä¸€ä¸ªè¡¨çš„æ¯ä¸€è¡Œ<strong>è®°å½•</strong>ï¼Œæ‹¥æœ‰ç›¸åŒçš„è‹¥å¹²<strong>å­—æ®µ</strong></li></ul></li><li><p><strong>å­—æ®µ</strong>ï¼šå®šä¹‰æ•°æ®ç±»å‹ï¼ˆæ•´å‹ï¼Œæµ®ç‚¹å‹ï¼Œå­—ç¬¦ä¸²ï¼Œæ—¥æœŸç­‰ï¼‰ï¼Œä»¥åŠæ˜¯å¦å…è®¸ <code>NULL</code></p><ul><li><code>NULL</code> è¡¨ç¤ºå­—æ®µæ•°æ®<strong>ä¸å­˜åœ¨</strong>ï¼Œä¸ºç©ºï¼Œè€Œéä¸ºæ•°æ®ç±»å‹çš„é›¶å€¼</li></ul></li><li><p>ä¸€èˆ¬æƒ…å†µï¼Œåº”é¿å…å…è®¸æ•°æ®ä¸º <code>NULL</code> , å¯ä»¥ç®€åŒ–æŸ¥è¯¢æ¡ä»¶ï¼ŒåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œæœ‰åˆ©äºåº”ç”¨ç¨‹åºè¯»å–æ•°æ®åæ— éœ€åˆ¤æ–­æ˜¯å¦ä¸º <code>NULL</code></p></li><li><p>å’ŒExcelè¡¨ä¸åŒï¼šå…³ç³»æ•°æ®åº“çš„è¡¨å’Œè¡¨ä¹‹é—´ éœ€è¦å»ºç«‹ <code>ä¸€å¯¹å¤š</code>ï¼Œ<code>å¤šå¯¹ä¸€</code>å’Œ <code>ä¸€å¯¹ä¸€</code>çš„å…³ç³»</p><ul><li>æ‰èƒ½æŒ‰ç…§ <strong>åº”ç”¨ç¨‹åºçš„é€»è¾‘</strong> æ¥ç»„ç»‡å’Œå­˜å‚¨æ•°æ®</li></ul></li><li><p><strong>ä¸€å¯¹å¤šï¼š</strong></p><ul><li>ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªè®°å½•ï¼Œå¯¹åº”ç€å¦ä¸€ä¸ªè¡¨ä¸­å¤šä¸ªè®°å½•</li></ul></li><li><p><strong>å¤šå¯¹ä¸€ï¼š</strong></p><ul><li>ä¸€ä¸ªè¡¨ä¸­çš„å¤šä¸ªè®°å½•ï¼Œå¯¹åº”ç€å¦ä¸€ä¸ªè¡¨ä¸­ä¸€ä¸ªè®°å½•</li></ul></li><li><p><strong>ä¸€å¯¹ä¸€ï¼š</strong></p><ul><li>ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªè®°å½•ï¼Œå¯¹åº”ç€å¦ä¸€ä¸ªè¡¨ä¸­ä¸€ä¸ªè®°å½•</li></ul></li><li><p><strong>å…³ç³»æ•°æ®åº“</strong>ä¸­ï¼Œå…³ç³» æ˜¯ é€šè¿‡ <code>ä¸»é”®</code> å’Œ <code>å¤–é”®</code> æ¥ç»´æŠ¤</p></li></ul><h2 id="ä¸»é”®"><a href="#ä¸»é”®" class="headerlink" title="ä¸»é”®"></a>ä¸»é”®</h2><ul><li><p><strong>å…³ç³»æ•°æ®åº“ä¸­</strong>ï¼š</p><ul><li>ä¸€å¼ è¡¨çš„æ¯ä¸€è¡Œæ•°æ®ï¼š<strong>ä¸€æ¡è®°å½•</strong></li><li>ä¸€æ¡è®°å½•<strong>ç”±å¤šä¸ªå­—æ®µç»„æˆ</strong></li><li>åŒä¸€ä¸ªè¡¨ä¸­æ¯ä¸€æ¡è®°å½•éƒ½æœ‰ç›¸åŒçš„å­—æ®µå®šä¹‰</li></ul></li><li><p><strong>å…³ç³»æ•°æ®åº“ä¸­</strong>ï¼Œå¾ˆé‡è¦çš„çº¦æŸï¼šä»»æ„ä¸¤æ¡è®°å½•ä¸èƒ½é‡å¤</p><ul><li>ä¸æ˜¯æŒ‡ ä¸¤æ¡è®°å½•ä¸å®Œå…¨ç›¸åŒ</li><li>æŒ‡ èƒ½é€šè¿‡æŸä¸ªå­—æ®µï¼Œ<strong>å”¯ä¸€åŒºåˆ†å‡ºä¸åŒçš„è®°å½•</strong>ï¼Œè¯¥å­—æ®µä¸º <strong>ä¸»é”®</strong></li><li>å› æ­¤ï¼ŒåŒä¸€å¼ è¡¨ä¸­ ä»»æ„ä¸¤æ¡è®°å½•çš„ ä¸»é”®å­—æ®µ çš„å€¼éƒ½ä¸ç›¸åŒ</li></ul></li><li><p><strong>å¯¹ä¸»é”®çš„è¦æ±‚</strong>ï¼šè®°å½•ä¸€æ—¦æ’å…¥è¡¨ä¸­ï¼Œä¸»é”®æœ€å¥½ä¸è¦ä¿®æ”¹ï¼Œå”¯ä¸€å®šä½è®°å½•çš„</p></li><li><p><strong>é€‰å–ä¸šåŠ¡çš„åŸºæœ¬åŸåˆ™ï¼š</strong>ä¸ä½¿ç”¨ä»»ä½•<strong>ä¸šåŠ¡ç›¸å…³</strong>çš„å­—æ®µä½œä¸ºä¸»é”®</p><ul><li>èº«ä»½è¯å·ã€æ‰‹æœºå·ã€é‚®ç®±åœ°å€ç­‰</li></ul></li><li><p>ä¸€èˆ¬å°†ä¸»é”®å­—æ®µå‘½åä¸º <code>id</code>ã€‚å¸¸è§çš„ <code>id</code>å­—æ®µçš„ç±»å‹</p><ul><li>è‡ªå¢æ•´æ•°ç±»å‹ï¼šæ•°æ®åº“ ä¼šåœ¨æ’å…¥æ•°æ®æ—¶ è‡ªåŠ¨ ä¸ºæ¯ä¸€æ¡è®°å½•åˆ†é…ä¸€ä¸ªè‡ªå¢æ•´æ•°ï¼Œä¸éœ€è¦æ‹…å¿ƒä¸»é”®é‡å¤ï¼Œä¸ç”¨é¢„å…ˆç”Ÿæˆä¸»é”®</li><li>å…¨å±€å”¯ä¸€ <code>GUID</code> ç±»å‹ï¼šä½¿ç”¨ä¸€ç§ å…¨å±€å”¯ä¸€ çš„å­—ç¬¦ä¸²ä½œä¸ºä¸»é”®ï¼Œ``<ul><li><code>GUID</code> ç®—æ³•é€šè¿‡ ç½‘å¡MACåœ°å€ã€æ—¶é—´æˆ³ã€éšæœºæ•° ä¿è¯ä»»æ„è®¡ç®—æœºåœ¨ä»»æ„æ—¶é—´ç”Ÿæˆçš„å­—ç¬¦ä¸²ä¸åŒï¼Œå¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€éƒ½å†…ç½®äº† <code>GUID</code>ç®—æ³•ï¼Œé¢„ç®—å‡ºä¸»é”®</li></ul></li></ul></li><li><p>ä¸€èˆ¬ï¼Œé€šå¸¸ è‡ªå¢ç±»å‹ çš„ä¸»é”®å°±èƒ½æ»¡è¶³éœ€æ±‚</p></li><li><p>æ³¨æ„ï¼š å¦‚æœä½¿ç”¨ <code>INT</code>è‡ªå¢ç±»å‹ï¼Œé‚£ä¹ˆå½“ä¸€å¼ è¡¨çš„è®°å½•æ•°è¶…è¿‡2147483647ï¼ˆçº¦21äº¿ï¼‰æ—¶ï¼Œä¼šè¾¾åˆ°ä¸Šé™è€Œå‡ºé”™ã€‚ä½¿ç”¨ <code>BIGINT</code>è‡ªå¢ç±»å‹åˆ™å¯ä»¥æœ€å¤šçº¦922äº¿äº¿æ¡è®°å½•ã€‚</p></li></ul><h3 id="è”åˆä¸»é”®"><a href="#è”åˆä¸»é”®" class="headerlink" title="è”åˆä¸»é”®"></a>è”åˆä¸»é”®</h3><ul><li><p><strong>è”åˆä¸»é”®</strong>ï¼šå…³ç³»æ•°æ®åº“ï¼Œå…è®¸é€šè¿‡å¤šä¸ªå­—æ®µ å”¯ä¸€æ ‡è¯†è®°å½•ï¼Œå³å¤šä¸ªå­—æ®µéƒ½è®¾ç½®ä¸ºä¸»é”®</p><ul><li>å…è®¸ä¸€åˆ—æœ‰é‡å¤ï¼Œåªè¦ä¸æ˜¯æ‰€æœ‰ä¸»é”®åˆ—éƒ½é‡å¤å³å¯</li></ul></li><li><p>è”åˆä¸»é”®è¦æ±‚ ä»»æ„ä¸¤æ¡è®°å½• çš„ä¸»é”®ç»„åˆéƒ½ä¸ç›¸åŒ</p></li><li><p>å°½é‡ä¸ä½¿ç”¨ è”åˆä¸»é”®ï¼Œç»™å…³ç³»è¡¨å¸¦æ¥äº† <strong>å¤æ‚åº¦çš„ä¸Šå‡</strong></p></li></ul><h2 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h2><ul><li><p><strong>ä¸»é”®</strong> å”¯ä¸€æ ‡è¯†è®°å½•æ—¶ï¼Œå¯ä»¥åœ¨è¡¨ä¸­ç¡®å®šä»»æ„è®°å½•</p></li><li><p>ç¡®å®š <code>student</code> è¡¨çš„ä¸€æ¡è®°å½•ï¼Œå±äºå“ªä¸ªç­çº§</p><ul><li>åœ¨ <code>student</code> è¡¨ä¸­ï¼Œæ·»åŠ å­—æ®µ <code>class_id</code> ï¼Œä½¿å¾—å…¶ä¸ <code>class</code> è¡¨çš„æŸæ¡è®°å½•å¯¹åº”</li></ul></li><li><p><strong>å¤–é”®ï¼š</strong>åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œé€šè¿‡ <code>xx_id</code>å­—æ®µï¼Œå°†<strong>è¯¥è¡¨æ•°æ® ä¸ å¦ä¸€å¼ è¡¨å…³è”èµ·æ¥çš„å­—æ®µ</strong></p></li><li><p><strong>å¤–é”®</strong> é€šè¿‡å®šä¹‰ <strong>å¤–é”®çº¦æŸ</strong> å®ç°</p><ul><li>```mysql<br>ALTER TABLE students<br>ADD CONSTRAINT fk_class_id<br>FOREIGN KEY (class_id)<br>REFERENCES classes (id);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  * `ADD CONSTRAINT fk_class_id`ï¼š**å¤–é”®çº¦æŸåç§°**ï¼Œå¯ä»¥ä»»æ„</span><br><span class="line">  * `FOREIGN KEY (class_id)` : æŒ‡å®š `class_id` ä¸ºå¤–é”®</span><br><span class="line">  * `REFERENCES classes (id)`: æŒ‡å®šè¿™ä¸ªå¤–é”® å°†å…³è”åˆ° `classes` è¡¨çš„ `id` åˆ—ï¼ˆå³ `classes` çš„ä¸»é”®</span><br><span class="line">* é€šè¿‡**å®šä¹‰ å¤–é”®çº¦æŸ**ï¼Œ**å…³ç³»æ•°æ®åº“å¯ä»¥ä¿è¯ æ— æ³•ç©¿æ’å¦‚æ— æ•ˆçš„æ•°æ®**ï¼š</span><br><span class="line"></span><br><span class="line">  * å³å¤–é”®æ‰€ç»‘å®šçš„å¦ä¸€å¼ è¡¨çš„ä¸»é”®æ•°æ®ï¼Œçº¦æŸç€å¤–é”®çš„æ•°æ®èŒƒå›´</span><br><span class="line">* **å¤–é”®çº¦æŸ** ä¼šé™ä½æ•°æ®åº“çš„æ€§èƒ½ï¼Œä¸ºäº†è¿½æ±‚é€Ÿåº¦ï¼Œå¹¶ä¸è®¾ç½®å¤–é”®çº¦æŸï¼Œä»…ä¾é åº”ç”¨ç¨‹åºè‡ªèº«æ¥ä¿è¯ é€»è¾‘çš„æ­£ç¡®æ€§</span><br><span class="line"></span><br><span class="line">  * è¿™ç§æƒ…å†µä¸‹ï¼Œå¤–é”®ä»…æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆ—</span><br><span class="line">* è¦**åˆ é™¤ä¸€ä¸ª å¤–é”®çº¦æŸ**ï¼Œé€šè¿‡ `ALTER TABLE`</span><br><span class="line"></span><br><span class="line">  * ```mysql</span><br><span class="line">    ALTER TABLE students</span><br><span class="line">    DROP FOREIGN KEY fk_class_id;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ³¨æ„ï¼šåˆ é™¤ å¤–é”®çº¦æŸ å¹¶æ²¡æœ‰åˆ é™¤å¤–é”®è¿™ä¸€åˆ—</p><ul><li>åˆ é™¤åˆ—é€šè¿‡ï¼š<code>DROP COLUMN ,..</code> å®ç°</li></ul></li></ul><h2 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h2><ul><li><p>é€šè¿‡ä¸€ä¸ªè¡¨çš„ å¤–é”® å…³è”åˆ°å¦ä¸€ä¸ªè¡¨ï¼Œå¯ä»¥å®šä¹‰å‡º ä¸€å¯¹å¤š å…³ç³»</p></li><li><p>å®šä¹‰<strong>å¤šå¯¹å¤šå…³ç³»</strong>ï¼š</p><ul><li>é€šè¿‡ ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³» å®ç°ï¼šå³é€šè¿‡<strong>ä¸€ä¸ªä¸­é—´è¡¨</strong>ï¼Œ<strong>å…³è”ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»</strong>ï¼Œå°±å½¢æˆäº†å¤šå¯¹å¤šå…³ç³»</li></ul></li><li><p>ç¤ºä¾‹ï¼š</p><ul><li><code>teachers</code>è¡¨ï¼š| id | name   |<br>| :- | :â€”â€“ |<br>| 1  | å¼ è€å¸ˆ |<br>| 2  | ç‹è€å¸ˆ |<br>| 3  | æè€å¸ˆ |<br>| 4  | èµµè€å¸ˆ |</li><li><code>classes</code>è¡¨ï¼š| id | name |<br>| :- | :â€” |<br>| 1  | ä¸€ç­ |<br>| 2  | äºŒç­ |</li><li>ä¸­é—´è¡¨ <code>teacher_class</code>å…³è”ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»ï¼š| id | teacher_id | class_id |<br>| :- | :â€”â€”â€” | :â€”â€”- |<br>| 1  | 1          | 1        |<br>| 2  | 1          | 2        |<br>| 3  | 2          | 1        |<br>| 4  | 2          | 2        |<br>| 5  | 3          | 1        |<br>| 6  | 4          | 2        |</li></ul></li><li><p>é€šè¿‡ <code>teacher_class</code> è¡¨ï¼Œå¯çŸ¥ <code>teachers</code> åˆ° <code>classes</code> çš„å…³ç³» å’Œ <code>classes</code> åˆ° <code>teachers</code> çš„å…³ç³»</p></li></ul><h2 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h2><ul><li><strong>ä¸€å¯¹ä¸€å…³ç³»</strong>ï¼šä¸€ä¸ªè¡¨çš„è®°å½• å¯¹åº”åˆ°å¦ä¸€ä¸ªè¡¨ çš„å”¯ä¸€ä¸€ä¸ªè®°å½•</li><li>æ—¢ç„¶æ˜¯ ä¸€å¯¹ä¸€å…³ç³» ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆå¹¶ä¸ºåŒä¸€ä¸ªè¡¨<ul><li>å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå¯ä»¥å°†ä¸¤ä¸ªè¡¨åˆå¹¶<ul><li>ä½†è‹¥æŸäº›æ•°æ®æ˜¯ç¼ºå¤±ï¼Œå°±ä¸å­˜åœ¨å¯¹åº”çš„è®°å½•</li><li>åªèƒ½è¯´ å­é›†è¡¨ ä¸€ä¸€å¯¹åº” å¦ä¸€ä¸ªè¡¨</li></ul></li><li>å°†å¤§è¡¨ <strong>æ‹†åˆ†æˆ</strong>ä¸¤ä¸ª ä¸€å¯¹ä¸€ çš„è¡¨ï¼šæŠŠç»å¸¸è¯»å–å’Œä¸ç»å¸¸è¯»å–çš„å­—æ®µåˆ†å¼€ï¼Œ<strong>è·å¾—é«˜æ€§èƒ½</strong></li></ul></li></ul><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><ul><li><p>åœ¨ <strong>å…³ç³»æ•°æ®åº“</strong> ä¸­ï¼Œè‹¥æœ‰ä¸Šä¸‡ä¸Šäº¿æ¡è®°å½•ï¼Œéœ€è¦ä½¿ç”¨<strong>ç´¢å¼•</strong>ï¼Œæ‰èƒ½è·å¾—é«˜é€Ÿåº¦</p></li><li><p>ç´¢å¼•ï¼šå…³ç³»æ•°æ®åº“ ä¸­ï¼Œå¯¹æŸä¸€åˆ—æˆ–å¤šä¸ªåˆ—çš„å€¼ <strong>è¿›è¡Œé¢„æ’åºçš„ æ•°æ®ç»“æ„</strong></p><ul><li>ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥è®©æ•°æ®åº“ç³»ç»Ÿä¸å¿…æ‰«ææ•´ä¸ªè¡¨ï¼Œè€Œæ˜¯<strong>ç›´æ¥å®šä½åˆ°ç¬¦åˆæ¡ä»¶çš„è®°å½•</strong></li></ul></li><li><p>ç¤ºä¾‹ï¼š</p><ul><li><code>students</code> è¡¨</li><li><table><thead><tr><th align="left">id</th><th align="left">class_id</th><th align="left">name</th><th align="left">gender</th><th align="left">score</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">1</td><td align="left">å°æ˜</td><td align="left">M</td><td align="left">90</td></tr><tr><td align="left">2</td><td align="left">1</td><td align="left">å°çº¢</td><td align="left">F</td><td align="left">95</td></tr><tr><td align="left">3</td><td align="left">1</td><td align="left">å°å†›</td><td align="left">M</td><td align="left">88</td></tr></tbody></table></li><li>æ›´å…· <code>score</code>åˆ—è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯¹ <code>score</code>åˆ—åˆ›å»ºç´¢å¼•ï¼š</li><li>```mysql<br>ALTER TABLE students<br>ADD INDEX idx_score (score);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* ä½¿ç”¨ `ADD INDEX idx_score (score)` : åˆ›å»ºä¸€ä¸ªåç§°ä¸º `idx_score` ï¼Œä½¿ç”¨åˆ— `score` çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">  * ç´¢å¼•åç§°ä»»æ„ï¼Œè‹¥ç´¢å¼•æœ‰å¾ˆå¤šåˆ—ï¼Œåœ¨æ‹¬å·é‡Œ ä¾æ¬¡å†™ä¸Šï¼š</span><br><span class="line"></span><br><span class="line">    * ```</span><br><span class="line">      ALTER TABLE students</span><br><span class="line">      ADD INDEX idx_name_score (name, score);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ç´¢å¼•çš„æ•ˆç‡</strong> å–å†³äº ç´¢å¼•åˆ—çš„è¡¨ æ˜¯å¦æ•£åˆ—ï¼Œå³ è¯¥åˆ—çš„å€¼äº’ä¸ç›¸åŒçš„ç¨‹åº¦è¶Šé«˜ï¼Œç´¢å¼•æ•ˆç‡è¶Šé«˜</p></li><li><p>å¯ä»¥å¯¹ä¸€å¼ è¡¨ åˆ›å»ºå¤šä¸ªç´¢å¼•</p><ul><li>ç´¢å¼•çš„ä¼˜ç‚¹ï¼šæé«˜æŸ¥è¯¢æ•ˆç‡</li><li>ç´¢å¼•çš„ç¼ºç‚¹ï¼šæ’å…¥ã€æ›´æ–°ã€åˆ é™¤è®°å½•æ—¶ï¼ŒåŒæ—¶ä¿®æ”¹ç´¢å¼•<ul><li>å› æ­¤ï¼Œç´¢å¼•è¶Šå¤šï¼Œæ’å…¥ã€åˆ é™¤ã€æ›´æ–°è®°å½•çš„é€Ÿåº¦è¶Šæ…¢</li></ul></li></ul></li><li><p>å¯¹äºä¸»é”®ï¼Œ<strong>å…³ç³»æ•°æ®åº“</strong> ä¼šè‡ªåŠ¨å¯¹å…¶åˆ›å»º<strong>ä¸»é”®ç´¢å¼•</strong></p><ul><li>ä½¿ç”¨ ä¸»é”®ç´¢å¼•çš„æ•ˆç‡æœ€é«˜ï¼Œå› ä¸ºä¸»é”®ä¼šä¿è¯ ç»å¯¹å”¯ä¸€</li></ul></li></ul><h3 id="å”¯ä¸€ç´¢å¼•"><a href="#å”¯ä¸€ç´¢å¼•" class="headerlink" title="å”¯ä¸€ç´¢å¼•"></a>å”¯ä¸€ç´¢å¼•</h3><ul><li><p>è®¾è®¡å…³ç³»æ•°æ®åº“çš„è¡¨æ—¶ï¼Œçœ‹ä¸Šå»å”¯ä¸€çš„åˆ—ï¼Œé€šå¸¸å…·æœ‰ä¸šåŠ¡å«ä¹‰ï¼Œä¸èƒ½ä½œä¸ºä¸»é”®</p><ul><li>èº«ä»½è¯å·</li></ul></li><li><p>è¿™äº›åˆ—æ ¹æ®ä¸šåŠ¡è¦æ±‚ï¼Œåˆ<strong>å…·æœ‰å”¯ä¸€æ€§çº¦æŸ</strong>ï¼šä»»æ„ä¸¤æ¡è®°å½•çš„è¯¥å­—æ®µä¸èƒ½ç›¸åŒ</p><ul><li>æ­¤æ—¶ï¼Œå¯ä»¥ä¸ºè¯¥åˆ—æ·»åŠ ä¸€ä¸ªå”¯ä¸€ç´¢å¼•</li></ul></li><li><p>ä¾‹å¦‚ï¼Œå‡è®¾ <code>students</code> è¡¨çš„ <code>name</code> ä¸èƒ½é‡å¤</p><ul><li>```mysql<br>ALTER TABLE students<br>ADD UNIQUE INDEX uni_name (name);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* é€šè¿‡å…³é”®å­— `UNIQUE` æ·»åŠ äº†å”¯ä¸€ç´¢å¼•</span><br><span class="line">* ä¹Ÿå¯ä»¥åªå¯¹æŸä¸€åˆ—æ·»åŠ ä¸€ä¸ª **å”¯ä¸€çº¦æŸ**ï¼Œè€Œä¸åˆ›å»º **å”¯ä¸€ç´¢å¼•**ï¼š</span><br><span class="line"></span><br><span class="line">  * ```mysql</span><br><span class="line">    ALTER TABLE students</span><br><span class="line">    ADD CONSTRAINT uni_name UNIQUE (name);</span><br></pre></td></tr></table></figure></li><li>æ­¤æ—¶ï¼Œ<code>name</code> åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œä½†å…·æœ‰å”¯ä¸€æ€§ä¿è¯</li></ul></li><li><p>æ— è®ºæ˜¯å¦åˆ›å»ºç´¢å¼•ï¼Œå¯¹äºç”¨æˆ·å’Œåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œä½¿ç”¨å…³ç³»æ•°æ®åº“ä¸ä¼šæœ‰ä»»ä½•åŒºåˆ«</p><ul><li>å³ï¼Œå½“æˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæœ‰ç›¸åº”çš„ç´¢å¼•å¯ç”¨ï¼Œ<strong>æ•°æ®åº“ç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ä½¿ç”¨ç´¢å¼•æ¥æé«˜æŸ¥è¯¢æ•ˆç‡</strong>ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼ŒæŸ¥è¯¢ä¹Ÿèƒ½æ­£å¸¸æ‰§è¡Œï¼Œåªæ˜¯é€Ÿåº¦ä¼šå˜æ…¢ã€‚</li><li>å› æ­¤ï¼Œç´¢å¼•å¯ä»¥åœ¨ä½¿ç”¨æ•°æ®åº“çš„è¿‡ç¨‹ä¸­é€æ­¥ä¼˜åŒ–</li></ul></li></ul><h1 id="4-åœ¨çº¿-SQL"><a href="#4-åœ¨çº¿-SQL" class="headerlink" title="4 åœ¨çº¿ SQL"></a>4 åœ¨çº¿ SQL</h1><ul><li>ä¾¿äºåœ¨çº¿ç»ƒä¹ ï¼Œæä¾›çš„åœ¨çº¿è¿è¡Œ SQL çš„åŠŸèƒ½</li><li>åœ¨æµè§ˆå™¨é¡µé¢ è¿è¡Œ çš„ä¸€ä¸ª <code>JS</code> ç¼–å†™çš„å†…å­˜å‹SQLæ•°æ®åº“ <code>AlaSQL</code><ul><li>ä¸å¿…è¿è¡Œ MySQL ç­‰å®é™…çš„æ•°æ®åº“è½¯ä»¶ï¼Œå³å¯åœ¨çº¿ç¼–å†™å¹¶æ‰§è¡Œ SQL è¯­å¥</li></ul></li></ul><h1 id="5-æŸ¥è¯¢æ•°æ®"><a href="#5-æŸ¥è¯¢æ•°æ®" class="headerlink" title="5 æŸ¥è¯¢æ•°æ®"></a>5 æŸ¥è¯¢æ•°æ®</h1><ul><li>å¯¹æ•°æ®åº“ æœ€å¸¸ç”¨çš„æ“ä½œ</li></ul><h2 id="å‡†å¤‡æ•°æ®"><a href="#å‡†å¤‡æ•°æ®" class="headerlink" title="å‡†å¤‡æ•°æ®"></a>å‡†å¤‡æ•°æ®</h2><ul><li><p>äº‹å…ˆå‡†å¤‡ <code>students</code> å’Œ <code>classes</code> è¡¨</p><ul><li><code>students</code>è¡¨å­˜å‚¨äº†å­¦ç”Ÿä¿¡æ¯ï¼š| id | class_id | name | gender | score |<br>| :- | :â€”â€”- | :â€” | :â€”â€“ | :â€”- |<br>| 1  | 1        | å°æ˜ | M      | 90    |<br>| 2  | 1        | å°çº¢ | F      | 95    |<br>| 3  | 1        | å°å†› | M      | 88    |<br>| 4  | 1        | å°ç±³ | F      | 73    |<br>| 5  | 2        | å°ç™½ | F      | 81    |<br>| 6  | 2        | å°å…µ | M      | 55    |<br>| 7  | 2        | å°æ— | M      | 85    |<br>| 8  | 3        | å°æ–° | F      | 91    |<br>| 9  | 3        | å°ç‹ | M      | 89    |<br>| 10 | 3        | å°ä¸½ | F      | 85    |</li><li><code>classes</code>è¡¨å­˜å‚¨äº†ç­çº§ä¿¡æ¯ï¼š| id | name |<br>| :- | :â€” |<br>| 1  | ä¸€ç­ |<br>| 2  | äºŒç­ |<br>| 3  | ä¸‰ç­ |<br>| 4  | å››ç­ |</li></ul></li></ul><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><ul><li><p><code>AlaSQL</code> æ˜¯<strong>å†…å­˜æ•°æ®åº“</strong>ï¼Œå’Œ <code>MySQL</code> çš„<strong>æŒä¹…åŒ–å­˜å‚¨</strong>ä¸åŒï¼Œå†…å­˜æ•°æ®åº“çš„è¡¨æ•°æ®åœ¨é¡µé¢åŠ è½½æ—¶å¯¼å…¥ï¼Œå¹¶ä¸”åªå­˜åœ¨äºæµè§ˆå™¨çš„å†…å­˜</p></li><li><p>ç”¨ MySQL ç»ƒä¹ ï¼š</p><ul><li>ä¸‹è½½<a href="https://github.com/michaelliao/learn-sql/blob/master/mysql/init-test-data.sql">SQLè„šæœ¬</a></li><li>åœ¨å‘½ä»¤è¡Œè¿è¡Œï¼š<code>$ mysql -u root -p &lt; init-test-data.sql</code></li></ul></li><li><p>è‡ªåŠ¨åˆ›å»º <code>test</code> æ•°æ®åº“ï¼Œå¹¶ä¸”åœ¨ <code>test</code> æ•°æ®åº“ä¸‹ï¼Œåˆ›å»º <code>students</code> å’Œ <code>classes</code> è¡¨ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–æ•°æ®</p></li><li><p>å¯¹ MySQL æ•°æ®åº“çš„ä¿®æ”¹éƒ½ä¼šä¿å­˜ï¼Œè‹¥å¸Œæœ›æ¢å¤åˆ°åˆå§‹çŠ¶æ€ï¼šå†æ¬¡è¿è¡Œï¼š<code>$ mysql -u root -p &lt; init-test-data.sql</code></p></li><li><p><strong>problem</strong>ï¼š<code>ERROR 1366 (HY000)</code></p><ul><li>solutionï¼šå¯¹äº <code>Win10</code>ï¼Œåªè¦å°†è„šæœ¬ç”¨ <code>GBK</code> æ ¼å¼é‡æ–°ä¿å­˜ï¼Œå†ç”¨ <code> CMD</code> è°ƒç”¨å³å¯</li></ul></li><li><p><code>mysql workbench</code> , MySQL çš„æ¡Œé¢é›†æˆç¯å¢ƒ, å¯è§†åŒ–MySQLæ•°æ®åº“è½¯ä»¶</p></li></ul><h2 id="åŸºæœ¬æŸ¥è¯¢"><a href="#åŸºæœ¬æŸ¥è¯¢" class="headerlink" title="åŸºæœ¬æŸ¥è¯¢"></a>åŸºæœ¬æŸ¥è¯¢</h2><ul><li><p>æŸ¥çœ‹å·²å­˜åœ¨çš„ æ•°æ®åº“ï¼š<code>mysql&gt; show databases;</code></p></li><li><p>åˆ‡æ¢æ•°æ®åº“ï¼š<code>use test;</code></p></li><li><p>æŸ¥è¯¢ æ•°æ®åº“è¡¨ ä¸­çš„æ•°æ®ï¼š</p><ul><li><code>SELECT * FROM &lt;è¡¨å&gt;</code> ï¼šæŸ¥è¯¢è¯¥è¡¨çš„æ‰€æœ‰æ•°æ®</li></ul></li><li><p><code>SELECT * FROM students</code></p><ul><li><code>SELECT</code> å…³é”®å­—ï¼šæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢</li><li><code>*</code> ï¼šæ‰€æœ‰åˆ—</li><li><code>FROM</code> ï¼šä»å“ªä¸ªè¡¨æŸ¥è¯¢</li></ul></li><li><p>å¯ä»¥ä½¿ç”¨ <code>SELECT</code> è¯­å¥è®¡ç®—ï¼Œä½†ä¸æ˜¯ SQL çš„å¼ºé¡¹</p></li><li><p><code>SELECT</code> : åˆ¤æ–­å½“å‰åˆ°æ•°æ®åº“çš„è¿æ¥æ˜¯å¦æœ‰æ•ˆ</p><ul><li><code>SELECT 1;</code></li></ul></li></ul><h2 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h2><ul><li>SELECT å…³é”®å­— å¯ä»¥é€šè¿‡ <code>WHERE</code> æ¡ä»¶æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢ç»“æœ æ˜¯æ»¡è¶³ æŸ¥è¯¢æ¡ä»¶çš„è®°å½•<ul><li>è¯­æ³•ï¼š<code>SELECT * FROM &lt;è¡¨å&gt; WHERE æ¡ä»¶è¡¨è¾¾å¼</code></li><li>ä¾‹å¦‚ <code>SELECT * FROM students WHERE score&gt;=80;</code></li><li>WHERE å…³é”®å­—åçš„ä¸ºæ¡ä»¶</li></ul></li></ul><h3 id="ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼"><a href="#ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼"></a>ä¸‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼</h3><ul><li><p>æ¡ä»¶è¡¨è¾¾å¼å¯ä»¥ç”¨ <code>&lt;æ¡ä»¶1&gt; AND &lt;æ¡ä»¶2&gt;</code> : æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶</p><ul><li>ä¾‹å¦‚åˆ¤æ–­ å³å¤§äº80åˆæ˜¯ç”·ç”Ÿï¼š<ul><li><code>WHERE score&gt;=80 AND gender=&#39;M&#39;</code></li><li>å­—ç¬¦ä¸²ç”¨ å•å¼•å·æ‹¬èµ·æ¥</li></ul></li></ul></li><li><p>æ¡ä»¶è¡¨è¾¾å¼å¯ä»¥ç”¨ <code>&lt;æ¡ä»¶1&gt; AND &lt;æ¡ä»¶2&gt;</code>ï¼šæ»¡è¶³ä¸¤è€…ä¹‹ä¸€</p></li><li><p>æ¡ä»¶è¡¨è¾¾å¼å¯ä»¥ç”¨ <code>NOT &lt;æ¡ä»¶&gt;</code>ï¼šä¸ç¬¦åˆè¯¥æ¡ä»¶çš„è®°å½•</p><ul><li>ä¾‹å¦‚ï¼šä¸æ˜¯äºŒç­çš„</li><li><code>WHERE NOT class_id = 2</code></li></ul></li><li><p><code>NOT class_id=2</code> ç­‰ä»·äº <code>class_id &lt;&gt; 2</code></p><ul><li><code>NOT</code> æŸ¥è¯¢ä¸å¸¸ç”¨</li></ul></li><li><p>ç»„åˆä¸‰ä¸ªä»¥ä¸Šçš„æ¡ä»¶ï¼šç”¨å°æ‹¬å· <code>()</code> æ¥è¯´æ˜å¦‚ä½•æ¡ä»¶è¿ç®—</p></li></ul><h3 id="å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼"><a href="#å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼"></a>å¸¸ç”¨çš„æ¡ä»¶è¡¨è¾¾å¼</h3><table><thead><tr><th align="left">æ¡ä»¶</th><th align="left">è¡¨è¾¾å¼ä¸¾ä¾‹1</th><th align="left">è¡¨è¾¾å¼ä¸¾ä¾‹2</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">ä½¿ç”¨=åˆ¤æ–­ç›¸ç­‰</td><td align="left">score = 80</td><td align="left">name = â€˜abcâ€™</td><td align="left">å­—ç¬¦ä¸²éœ€è¦ç”¨å•å¼•å·æ‹¬èµ·æ¥</td></tr><tr><td align="left">ä½¿ç”¨&gt;åˆ¤æ–­å¤§äº</td><td align="left">score &gt; 80</td><td align="left">name &gt; â€˜abcâ€™</td><td align="left">å­—ç¬¦ä¸²æ¯”è¾ƒæ ¹æ®ASCIIç ï¼Œä¸­æ–‡å­—ç¬¦æ¯”è¾ƒæ ¹æ®æ•°æ®åº“è®¾ç½®</td></tr><tr><td align="left">ä½¿ç”¨&gt;=åˆ¤æ–­å¤§äºæˆ–ç›¸ç­‰</td><td align="left">score &gt;= 80</td><td align="left">name &gt;= â€˜abcâ€™</td><td align="left"></td></tr><tr><td align="left">ä½¿ç”¨&lt;åˆ¤æ–­å°äº</td><td align="left">score &lt; 80</td><td align="left">name &lt;= â€˜abcâ€™</td><td align="left"></td></tr><tr><td align="left">ä½¿ç”¨&lt;=åˆ¤æ–­å°äºæˆ–ç›¸ç­‰</td><td align="left">score &lt;= 80</td><td align="left">name &lt;= â€˜abcâ€™</td><td align="left"></td></tr><tr><td align="left"><strong>ä½¿ç”¨&lt;&gt;åˆ¤æ–­ä¸ç›¸ç­‰</strong></td><td align="left">score &lt;&gt; 80</td><td align="left">name &lt;&gt; â€˜abcâ€™</td><td align="left"></td></tr><tr><td align="left"><strong>ä½¿ç”¨LIKEåˆ¤æ–­ç›¸ä¼¼</strong></td><td align="left">name LIKE â€˜ab%â€™</td><td align="left">name LIKE â€˜%bc%â€™</td><td align="left">%è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œä¾‹å¦‚â€™ab%â€™å°†åŒ¹é…â€™abâ€™ï¼Œâ€™abcâ€™ï¼Œâ€™abcdâ€™</td></tr></tbody></table><h2 id="æŠ•å½±æŸ¥è¯¢"><a href="#æŠ•å½±æŸ¥è¯¢" class="headerlink" title="æŠ•å½±æŸ¥è¯¢"></a>æŠ•å½±æŸ¥è¯¢</h2><ul><li><p><code>SELECT * FROM &lt;è¡¨å&gt;</code> : è¿”å›çš„äºŒç»´è¡¨å’ŒåŸè¡¨ä¸€æ ·</p><ul><li><code>*</code> ï¼šæŸ¥è¯¢æ‰€æœ‰åˆ—</li></ul></li><li><p><code>SELECT åˆ—1ï¼Œåˆ—2 FROM ...</code> : ä»…åŒ…å«æŒ‡å®šåˆ—ï¼Œæˆä¸ºæŠ•å½±æŸ¥è¯¢</p></li><li><p>è¿™æ ·è¿”å›çš„ç»“æœé›† åªåŒ…å«äº†æŒ‡å®šçš„åˆ—ï¼Œå¹¶ä¸” ç»“æœé›† çš„åˆ—çš„æ˜¯é¡ºåºå¯ä»¥å’ŒåŸè¡¨ä¸ä¸€æ ·</p></li><li><p><code>SELECT åˆ—1 åˆ«å1ï¼Œåˆ—2 åˆ«å2 FROM ...</code> : ä¸ºæŒ‡å®šåˆ—èµ·åˆ«å</p></li><li><p>æŠ•å½±æŸ¥è¯¢ åŒæ ·å¯ä»¥ä½¿ç”¨ <code>WHERE</code> å…³é”®å­—ï¼š</p><ul><li>è¯­æ³•ï¼š<code>SELECT åˆ—1ï¼Œåˆ—2 FROM &lt;è¡¨å&gt; WHERE ..</code></li></ul></li></ul><h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><ul><li><p>ä½¿ç”¨  å…³é”®å­— <code>SELECT</code> æ—¶ï¼ŒæŸ¥è¯¢çš„ç»“æœé€šå¸¸æŒ‰ç…§ <code>id</code> æ’åºï¼Œå³æ ¹æ® ä¸»é”® æ’åº</p></li><li><p>ä½¿ç”¨ å…³é”®å­— <code>ORDER BY åˆ—å (ASC)</code> : æ ¹æ®å…¶ä»–æ¡ä»¶æ­£åº, <code>ASC</code> å¯ä»¥çœç•¥</p><ul><li>ä¾‹å¦‚ï¼šæŒ‰ç…§æˆç»©ä»ä½åˆ°é«˜ï¼š</li><li><code>SELECT id,name,score FROM students ORDER BY score</code></li></ul></li><li><p>å¯ä»¥ç»™ <code>ORDER BY</code> åŠ ä¸Šå…³é”®å­— <code>DESC</code> è¡¨ç¤ºå€’åºï¼šä»é«˜åˆ°ä½æ’åº</p><ul><li>ä¾‹å¦‚ï¼š<code>SELECT id,name,score FROM students ORDER BY score DESC</code></li></ul></li><li><p>åœ¨ <code>ORDER BY</code> å…³é”®å­—åæ·»åŠ  åˆ—å ï¼šå…ˆæŒ‰ç…§ï¼Œå†æŒ‰ç…§ä¸‹ä¸€åˆ—æ’åº</p><ul><li>lä¾‹å¦‚ï¼šå…ˆæŒ‰ç…§åˆ†æ•°å€’åºï¼Œå†æŒ‰ç…§genderæ­£åº</li><li><code>ORDER BY score DESC,gender</code></li></ul></li><li><p>è‹¥æœ‰æ¡ä»¶ <code>WHERE</code> , éœ€å°† <code>ORDER BY</code> è¯­å¥æ”¾äº <code>WHERE</code> å</p><ul><li>ä¾‹å¦‚ æŸ¥è¯¢ä¸€ç­çš„æˆç»©ï¼Œå¹¶æŒ‰ç…§å€’åº</li><li><code>SELECT * FROM students WHERE class_id = 1 ORDER BY score DESC;</code></li><li>è¿™æ ·çš„è¯ï¼Œå…ˆç­›é€‰æ»¡è¶³ <code>WHERE</code> æ¡ä»¶çš„è®°å½•ï¼Œå†æ’åº</li></ul></li></ul><h2 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h2><ul><li><p>ä½¿ç”¨ <code>SELECT</code> æŸ¥è¯¢æ—¶ï¼Œè‹¥ç»“æœé›† å¾ˆå¤§ï¼Œéœ€è¦åˆ†é¡µæ˜¾ç¤ºï¼Œæ¯æ¬¡æ˜¾ç¤º 100 æ¡</p></li><li><p>åˆ†é¡µ å®é™…ä¸Šæ˜¯ä» ç»“æœé›† ä¸­æˆªå– <code>M-N</code> æ¡è®°å½•</p></li><li><p>è¯­æ³• <code>LIMIT &lt;M&gt; OFFSET &lt;N&gt;</code></p></li><li><p>å…ˆä½¿ç”¨ <code>SELECT</code> å…³é”®è¯æŸ¥è¯¢å‡ºç»“æœé›†ï¼Œå†ä½¿ç”¨ <code>LIMIT</code> å…³é”®å­—æˆªå–è®°å½•</p><ul><li>ä¾‹å¦‚ï¼šå…ˆæŠŠå­¦ç”ŸæŒ‰æˆç»© å€’åºï¼Œå†æŠŠç»“æœé›† åˆ†é¡µï¼Œæ¯é¡µ ä¸‰æ¡è®°å½•ï¼Œ</li><li><code>LIMIT 3 OFFSET 0</code><ul><li><code>OFFSET 0</code>ä»ç»“æœé›† 0 å·è®°å½•å¼€å§‹ï¼Œ<code>LIMIT 3</code>æœ€å¤š 3 æ¡</li></ul></li></ul></li><li><p>åˆ†é¡µæŸ¥è¯¢çš„å…³é”®ï¼š</p><ul><li>é¦–å…ˆç¡®å®šæ¯é¡µéœ€è¦æ˜¾ç¤ºçš„è®°å½•æ•°é‡ <code>PageSize</code></li><li>ç„¶åæ ¹æ®å½“å‰é¡µçš„ç´¢å¼• <code>PageIndex</code> ç¡®å®š <code>LIMIT</code> å’Œ <code>OFFSET</code> è®¾å®šçš„å€¼<ul><li><code>LIMIT</code> æ€»æ˜¯è®¾å®šä¸º <code>PageSize</code></li><li><code>OFFSET</code> æ€»æ˜¯è®¾å®šä¸º <code>PageSize*(PageIndex - 1)</code></li></ul></li></ul></li><li><p>åœ¨ MySQL ä¸­ï¼Œ<code>LIMIT 15 OFFSET 30</code> å¯ä»¥ç®€å†™æˆ <code>LIMIT 30,15</code></p></li></ul><h2 id="èšåˆæŸ¥è¯¢"><a href="#èšåˆæŸ¥è¯¢" class="headerlink" title="èšåˆæŸ¥è¯¢"></a>èšåˆæŸ¥è¯¢</h2><ul><li><p>SQL æä¾›äº†ä¸“é—¨çš„<strong>èšåˆå‡½æ•°</strong>ï¼š ç»Ÿè®¡æ€»æ•°ã€å¹³å‡æ•°ç­‰è®¡ç®—</p></li><li><p>ä½¿ç”¨ èšåˆå‡½æ•° è¿›è¡ŒæŸ¥è¯¢å°±æ˜¯ èšåˆæŸ¥è¯¢ï¼Œå¯ä»¥å¿«é€Ÿè·å¾—ç»“æœ</p></li><li><p><code>COUNT()</code> å‡½æ•°ï¼šæŸ¥è¯¢è¡¨ä¸­ ä¸€å…±å¤šå°‘è®°å½•</p><ul><li><code>SELECT COUNT(*) FROM students;</code><ul><li><code>COUNT(*)</code> è¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰åˆ—çš„è¡Œæ•°ï¼Œ</li><li>èšåˆçš„è®¡ç®—ç»“æœè™½ç„¶æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä½†æŸ¥è¯¢çš„ç»“æœä»ç„¶æ˜¯ä¸€ä¸ªäºŒç»´è¡¨ï¼ˆä¸€è¡Œä¸€åˆ—ï¼‰ï¼Œåˆ—åä¸º <code>COUNT(*)</code></li><li>é€šå¸¸ä½¿ç”¨èšåˆæŸ¥è¯¢æ—¶ï¼Œç»™åˆ—åä¸€ä¸ªåˆ«åï¼Œä¾¿äºå¤„ç†ç»“æœ</li></ul></li></ul></li><li><p><code>COUNT(*)</code> å…¶å®å’Œ <code>COUNT(åˆ—1)</code> æ•ˆæœä¸€æ ·</p></li><li><p>èšåˆæŸ¥è¯¢æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>WHERE</code> æ¡ä»¶å…³é”®å­—ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„è®°å½•æ¡æ•°</p></li><li><p>é™¤äº† <code>COUNT()</code> SQL è¿˜æä¾›äº†å…¶ä»–èšåˆå‡½æ•°ï¼š</p><ul><li><table><thead><tr><th align="left">å‡½æ•°</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">SUM</td><td align="left">è®¡ç®—æŸä¸€åˆ—çš„åˆè®¡å€¼ï¼Œè¯¥åˆ—å¿…é¡»ä¸ºæ•°å€¼ç±»å‹</td></tr><tr><td align="left">AVG</td><td align="left">è®¡ç®—æŸä¸€åˆ—çš„å¹³å‡å€¼ï¼Œè¯¥åˆ—å¿…é¡»ä¸ºæ•°å€¼ç±»å‹</td></tr><tr><td align="left">MAX</td><td align="left">è®¡ç®—æŸä¸€åˆ—çš„æœ€å¤§å€¼</td></tr><tr><td align="left">MIN</td><td align="left">è®¡ç®—æŸä¸€åˆ—çš„æœ€å°å€¼</td></tr></tbody></table></li><li>æ³¨æ„ï¼š<code>MAX()</code> å’Œ <code>MIN</code> å‡½æ•°ä¸é™äºæ•°å€¼ç±»å‹</li></ul></li><li><p>ä¾‹å¦‚ï¼Œè®¡ç®—ç”·ç”Ÿå¹³å‡æˆç»©ï¼š</p><ul><li><code>SELECT AVG(score) average FROM students WHERE gender=&#39;M&#39;;</code></li></ul></li><li><p>æ³¨æ„ï¼šè‹¥èšåˆæŸ¥è¯¢çš„ <code>WHERE</code> æ¡ä»¶å…³é”®å­—æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•æ•°æ®ï¼Œ</p><ul><li><code>COUNT()</code> è¿”å›0</li><li><code>SUM(),AVG(),MAX(),MIN()</code> è¿”å› <code>NULL</code></li></ul></li></ul><h3 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h3><ul><li><p>å¯¹äº <strong>èšåˆæŸ¥è¯¢</strong>ï¼ŒSQL æä¾›äº† <strong>åˆ†ç»„èšåˆ</strong> çš„åŠŸèƒ½</p></li><li><p>ä½¿ç”¨å…³é”®å­— <code>GROUP BY åˆ—å</code></p><ul><li>æ‰§è¡Œ SELECT è¯­å¥æ—¶ï¼Œä¼šå…ˆæŠŠè®°å½•æŒ‰ç…§ <code>åˆ—å</code> åˆ†ç»„ï¼Œç„¶åå†åˆ†åˆ«è®¡ç®—</li></ul></li><li><p>å¯ä»¥ç»™åˆ†ç»„èšåˆçš„ç»“æœé›† åŠ ä¸Šå¯¹åº”çš„åˆ—å€¼ï¼š</p><ul><li><code>SELECT class_id, COUNT(*) num FROM students GROUP BY class_id;</code></li></ul></li><li><p>æ³¨æ„ï¼šä¸èƒ½å°†å…¶ä»–åˆ—æ”¾å…¥ç»“æœé›†ä¸­ï¼Œå› ä¸ºä¸èƒ½å°†å¤šä¸ªå€¼æ”¾å…¥åŒä¸€è¡Œè®°å½•ä¸­</p></li><li><p>å¯ä»¥ä½¿ç”¨å¤šä¸ªåˆ—è¿›è¡Œåˆ†ç»„ï¼š</p><ul><li>ä¾‹å¦‚ï¼šç»Ÿè®¡å„ç­çš„ç”·ç”Ÿå’Œå¥³ç”Ÿï¼š</li><li><code>SELECT class_id,gender,COUNT(*) FROM students GROUP BY class_id,gender;</code></li></ul></li></ul><h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ul><li>æŸ¥è¯¢å‡ºæ¯ä¸ªç­çº§çš„å¹³å‡åˆ†</li><li><code>SELECT class_id,AVG(score) average FROM students GROUP BY class_id;</code></li><li>æŸ¥è¯¢å‡º æ¯ä¸ªç­çº§ç”·ç”Ÿå¥³ç”Ÿçš„å¹³å‡åˆ†</li><li><code>SELECT class_id,gender,AVG(score) FROM students GROUP BY class_id,gender;</code></li></ul><h2 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h2><ul><li><p><code>SELECT</code> å…³é”®å­—å¯ä»¥ä»å¤šå¼ è¡¨åŒæ—¶æŸ¥è¯¢å¯»æ•°æ®ï¼ŒåŒæ—¶ä» <code>students</code> å’Œ <code>classes</code> è¡¨çš„<strong>ä¹˜ç§¯</strong></p><ul><li>è¯­æ³•ï¼š<code>SELECT * FROM &lt;è¡¨1&gt;, &lt;è¡¨2&gt;</code></li></ul></li><li><p>ä¸€æ¬¡æŸ¥è¯¢ä¸¤ä¸ªè¡¨ï¼ŒæŸ¥è¯¢çš„ç»“æœä¹Ÿæ˜¯ ä¸€ä¸ªäºŒç»´è¡¨ï¼Œæ˜¯ä¸¤ä¸ªè¡¨çš„ä¹˜ç§¯</p><ul><li>è¿”å›çš„åˆ—æ•°æ˜¯ä¸¤ä¸ªè¡¨ä¹‹å’Œï¼Œè¿”å›çš„è¡Œæ•°æ˜¯ä¸¤ä¸ªè¡Œæ•°ä¹‹ç§¯</li></ul></li><li><p>å¤šè¡¨æŸ¥è¯¢ ï¼š åˆç§° <code>ç¬›å¡å°”æŸ¥è¯¢</code></p><ul><li>éœ€è¦æ³¨æ„ï¼šè¿”å›çš„è¡Œæ•°</li><li>å¹¶ä¸”åˆ—çš„åç§°å¯èƒ½é‡å¤</li></ul></li><li><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æŠ•å½±æŸ¥è¯¢æ¥ç»™åˆ—èµ·åˆ«åï¼š</p><ul><li><code>SELECT students.id sid, classes.id cid FROM students,classes;</code></li></ul></li><li><p>å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦ä½¿ç”¨ <code>è¡¨å.åˆ—å</code> å¼•ç”¨æŒ‡å®šåˆ— å’Œ ä¸ºå…¶è®¾å®šåˆ«å</p></li><li><p>è¿˜å¯ä»¥ä¸ºè¡¨è®¾ç½®åˆ«åï¼š<code>SELECT students.id sid, classes.id cid FROM students s, classes c;</code></p></li><li><p>å¤šè¡¨æŸ¥è¯¢ å¯ä»¥æ·»åŠ  <code>WHERE</code> æ¡ä»¶</p></li><li><p><code>SELECT s.id sid, c.id cid FROM students s, classes c WHERE s.gender = &quot;M&quot; AND c.id = 1;</code></p></li></ul><h2 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h2><ul><li><p>è¿æ¥æŸ¥è¯¢ æ˜¯å¦ä¸€ç§ç±»å‹çš„å¤šè¡¨æŸ¥è¯¢ï¼Œ</p></li><li><p>å¯¹å¤šä¸ªè¡¨è¿›è¡Œ <code>JOIN</code> è¿ç®—</p><ul><li>å…ˆç¡®å®šä¸€ä¸ªä¸»è¡¨ä½œä¸ºç»“æœé›†ï¼Œç„¶åå°†å…¶ä»–è¡¨ é€‰æ‹©æ€§åœ° <code>è¿æ¥</code> åˆ°ä¸»è¡¨ç»“æœé›†ä¸Š</li></ul></li><li><p>é€‰å‡º <code>students</code> ä¸­æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ï¼š</p><ul><li><code>SELECT s.id, s.name, ... FROM students s;</code></li></ul></li><li><p>å­˜æ”¾ç­çº§åç§°çš„ <code>name</code> å­˜åœ¨ <code>classes</code> è¡¨ä¸­ï¼Œåªæœ‰æ ¹æ® <code>students</code> çš„ <code>classes_id</code> æ‰¾åˆ° <code>classes</code>ä¸­å¯¹åº”çš„è®°å½•ï¼Œå†å–å‡º <code>name</code>åˆ—ï¼Œæ‰èƒ½è·å¾—ç­çº§åç§°</p></li><li><p>å¯ä»¥ä½¿ç”¨ <code>INNER JOIN</code>æ¥å®ç°</p><ul><li><code>SELECT s.id, s.class_id, c.name class_name FROM students s INNER JOIN classes c ON s.class_id = c.id</code></li></ul></li><li><p><code>INNER JOIN</code> è¯­æ³•ï¼š</p><ul><li>å…ˆç¡®å®šä¸»è¡¨ï¼Œ<code>FROM è¡¨1</code></li><li>ç¡®å®šè¦è¿æ¥çš„è¡¨ï¼Œ<code>INNER JOIN è¡¨2</code></li><li>ç¡®å®šè¿æ¥æ¡ä»¶ï¼š<code>ON æ¡ä»¶</code></li><li>å¯é€‰ï¼š<code>WHERE</code>, <code>ORDER BY</code></li></ul></li><li><p><code>OUTER JOIN</code></p><ul><li><code>INNER JOIN</code><ul><li>åªè¿”å›åŒæ—¶å­˜åœ¨ä¸¤è¡¨çš„è¡Œæ•°æ®</li></ul></li><li><code>RIGHT OUTER JOIN</code><ul><li>è¿”å›å³è¡¨éƒ½å­˜åœ¨çš„è¡Œï¼Œè‹¥è®°å½•ä»…åœ¨ä¸€è¡Œå­˜åœ¨ï¼Œåˆ™ç»“æœé›†ä¸­ä¼šä»¥ <code>NULL</code>å¡«å……</li></ul></li><li><code>LEFT OUTER JOIN</code><ul><li>è¿”å›å·¦è¡¨éƒ½å­˜åœ¨çš„è®°å½•ï¼Œ</li></ul></li><li><code>FULL OUTER JOIN</code><ul><li>è¿”å›ä¸¤å¼ è¡¨éƒ½å­˜åœ¨çš„è®°å½•ï¼Œè‡ªåŠ¨å°†å¯¹æ–¹ä¸å­˜åœ¨çš„è®°å½•å¡«å……ä¸º <code>NULL</code></li></ul></li></ul></li></ul><h1 id="6-ä¿®æ”¹æ•°æ®"><a href="#6-ä¿®æ”¹æ•°æ®" class="headerlink" title="6 ä¿®æ”¹æ•°æ®"></a>6 ä¿®æ”¹æ•°æ®</h1><ul><li>å¯¹å…³ç³»æ•°æ®åº“çš„åŸºæœ¬æ“ä½œï¼š<strong>å¢åˆ æ”¹æŸ¥</strong><ul><li><code>CRUD</code> : Createã€ Retrieveã€Updateã€Delete</li><li>æŸ¥è¯¢ï¼š<code>SELECT</code></li></ul></li><li>å¢åˆ æ”¹ï¼š<ul><li><code>INSERT</code>: æ’å…¥æ–°è®°å½•</li><li><code>UPDATE</code>: æ›´æ–°å·²æœ‰è®°å½•</li><li><code>DELETE</code>: åˆ é™¤å·²æœ‰è®°å½•</li></ul></li></ul><h2 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h2><ul><li><p><code>INSERT</code> è¯­å¥ï¼šå‘æ•°æ®åº“è¡¨ æ’å…¥ä¸€æ¡æ–°è®°å½•</p></li><li><p><code>INSERT</code>åŸºæœ¬è¯­æ³•ï¼š<code>INSERT INTO è¡¨å (å­—æ®µ1ï¼Œå­—æ®µ2...) VALUES (å€¼1ï¼Œå€¼2...)</code></p></li><li><p>å‘ <code>students</code>æ’å…¥ä¸€æ¡æ–°è®°å½•ï¼š</p><ul><li>å…ˆåˆ—ä¸¾å‡ºéœ€è¦æ’å…¥çš„å­—æ®µå</li><li>å†åœ¨ <code>VALUES</code> å­å¥ä¸­ä¾æ¬¡å†™å‡ºå¯¹åº”å­—æ®µçš„å€¼</li></ul></li><li><p>ä¾‹å¦‚ <code>INSERT INTO students (class_id, name, gender, score) VALUES (2, &#39;å¤§ç‰›&#39;, &#39;M&#39;, 80);</code></p></li><li><p><code>id</code> å­—æ®µæ˜¯ä¸€ä¸ª è‡ªå¢ä¸»é”®ï¼Œä¸éœ€è¦åˆ—ä¸º æ®µåç§°</p></li><li><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼šå­—æ®µå éœ€è¦å’Œ å€¼ ä¸€ä¸€å¯¹åº”</p></li><li><p>ä¸€æ¬¡æ€§æ·»åŠ å¤šæ¡è®°å½•ï¼šåœ¨ <code>VALUES</code>å­å¥æŒ‡å®šå¤šä¸ªè®°å½•å€¼ï¼Œæ¯ä¸ªè®°å½•ç”± <code>(...)</code>åŒ…å«</p></li></ul><h2 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h2><ul><li><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š<code>UPDATE è¡¨å SET å­—æ®µ1=å€¼1ï¼Œå­—æ®µ2=å€¼2... WHERE ... ; </code></p></li><li><p>ä¾‹å¦‚ï¼šæ›´æ–° <code>students</code>è¡¨ä¸­ <code>id=1</code>çš„è®°å½•çš„ <code>name</code>å’Œ <code>score</code>è¿™ä¸¤ä¸ªå­—æ®µ</p><ul><li><code>UPDATE students SET name=&#39;å¤§ç‰›&#39;, score=6 WHERE id=1</code></li></ul></li><li><p>åœ¨ <code>UPDATE</code> è¯­å¥ä¸­ï¼Œæ›´æ–°å­—æ®µæ—¶å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ï¼š<code>UPDATE students SET score=score+10 WHERE score&lt;80;</code></p></li><li><p>å½“æ²¡æœ‰ <code>WHERE</code> å…³é”®å­—æ—¶ï¼Œæ›´æ–°æ‰€æœ‰è®°å½•</p></li></ul><h3 id="MySQL-1"><a href="#MySQL-1" class="headerlink" title="MySQL"></a>MySQL</h3><ul><li>åœ¨ä½¿ç”¨ MySQL è¿™ç±»çœŸæ­£çš„å…³ç³»æ•°æ®åº“æ—¶ï¼Œ<code>UPDATE</code> ä¼šè¿”å›æ›´æ–°çš„è¡Œæ•°ä»¥åŠ <code>WHERE</code> æ¡ä»¶åŒ¹é…çš„è¡Œæ•°</li></ul><h2 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h2><ul><li><p><strong>åŸºæœ¬è¯­æ³•</strong>ï¼š <code>DELETE FROM student WHERE ...</code></p></li><li><p>åˆ é™¤ <code>students</code> è¡¨ä¸­ <code>id=1</code>çš„è®°å½•ï¼š</p><ul><li><code>DELETE FROM students WHERE id=1;</code></li></ul></li><li><p>ä¸å¸¦ <code>WHERE </code> è¯­å¥ï¼šåˆ é™¤æ•´ä¸ªè¡¨çš„æ•°æ®</p></li></ul><h3 id="MySQL-2"><a href="#MySQL-2" class="headerlink" title="MySQL"></a>MySQL</h3><ul><li><code>DELETE</code> è¯­å¥ä¼šè¿”å›åˆ é™¤çš„è¡Œæ•°ä»¥åŠ <code>WHERE</code> åŒ¹é…çš„è¡Œæ•°</li></ul><h1 id="7-MySQL"><a href="#7-MySQL" class="headerlink" title="7 MySQL"></a>7 MySQL</h1><ul><li><p>MySQLå®‰è£…ä¹‹åï¼š</p><ul><li><code>MySQL Server</code> ,å³çœŸæ­£çš„ MySQL æœåŠ¡å™¨</li><li><code>MySQL Client</code> , å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œå¯ä»¥é€šè¿‡ <code>MySQL Client</code> ç™»å½• MySQLï¼Œè¾“å…¥SQLè¯­å¥å¹¶æ‰§è¡Œ</li></ul></li><li><p><code>MySQL Server</code> å’Œ <code>MySQL Client</code> å…³ç³»ï¼š</p><ul><li>```ascii<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  SQL   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ MySQL Client â”‚â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ MySQL Server â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  TCP   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">* `MySQL Client` ä¸­è¾“å…¥çš„SQLè¯­å¥é€šè¿‡TCPè¿æ¥å‘é€åˆ°MySQL Server</span><br><span class="line"></span><br><span class="line">  * é»˜è®¤ç«¯å£å· 3306</span><br><span class="line">  * å³å‘é€åˆ°æœ¬æœºMySQL Server , åœ°å€ `127.0.0.1:3306`</span><br><span class="line">* ä¹Ÿå¯ä»¥åªå®‰è£… `MySQL Client` ï¼Œç„¶åè¿æ¥åˆ°è¿œç¨‹ `MySQL Server`</span><br><span class="line"></span><br><span class="line">  * å‡è®¾ è¿œç¨‹ `MySQL Server` çš„ IP åœ°å€ `10.0.1.99`, é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ `-h`æŒ‡å®š IP æˆ– åŸŸå</span><br><span class="line">    * `mysql -h 10.0.1.99 -u root -p`</span><br><span class="line"></span><br><span class="line">## ç®¡ç† MySQL</span><br><span class="line"></span><br><span class="line">* ç®¡ç† MySQLï¼Œå¯ä»¥ä½¿ç”¨ **å¯è§†åŒ–å›¾å½¢ç•Œé¢è½¯ä»¶**  `MySQL Workbench`</span><br><span class="line"></span><br><span class="line">  * ç”¨å¯è§†åŒ–çš„æ–¹å¼ æŸ¥è¯¢ã€åˆ›å»ºã€ä¿®æ”¹ æ•°æ®åº“è¡¨</span><br><span class="line">* `Workbench` å¯¹MySQLçš„æ“ä½œä¾ç„¶æ˜¯å‘é€ SQL è¯­å¥å¹¶æ‰§è¡Œï¼Œ</span><br><span class="line"></span><br><span class="line">  * Workbench å’Œ Clientå‘½ä»¤è¡Œéƒ½æ˜¯å®¢æˆ·ç«¯ï¼Œå’Œ MySQL äº¤äº’ï¼Œå”¯ä¸€çš„æ¥å£å°±æ˜¯ SQL</span><br><span class="line">* è™½ç„¶å¯ä»¥ä½¿ç”¨ `MySQL Workbench` å›¾å½¢ç•Œé¢æ¥ç›´æ¥ç®¡ç† MySQL</span><br><span class="line"></span><br><span class="line">  * ä¸€èˆ¬ï¼Œé€šè¿‡ `SSH`è¿œç¨‹è¿æ¥æ—¶ï¼Œåªèƒ½ä½¿ç”¨SQLå‘½ä»¤</span><br><span class="line"></span><br><span class="line">### æ•°æ®åº“</span><br><span class="line"></span><br><span class="line">* åœ¨ä¸€ä¸ªè¿è¡Œ MySQL çš„æœåŠ¡å™¨ä¸Šï¼Œå®é™…ä¸Šå¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ `Database`</span><br><span class="line"></span><br><span class="line">  * åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ï¼š`SHOW DATABASES;`</span><br><span class="line">* `information_schema`, `mysql`, `performance_schema` å’Œ `sys` æ˜¯ç³»ç»Ÿåº“ï¼Œä¸è¦å»æ”¹åŠ¨</span><br><span class="line">* åˆ›å»ºæ–°æ•°æ®åº“ï¼š`CREATE DATABASE test;`</span><br><span class="line">* åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ `DROP DATABASE test;`</span><br><span class="line">* åˆ‡æ¢ä¸ºå½“å‰æ•°æ®åº“ `USE test;`</span><br><span class="line"></span><br><span class="line">### è¡¨</span><br><span class="line"></span><br><span class="line">* åˆ—å‡ºå½“å‰æ•°æ®åº“çš„ **æ‰€æœ‰è¡¨**ï¼š `SHOW TABLES;`</span><br><span class="line"></span><br><span class="line">  * ```mysql</span><br><span class="line">    +----------------+</span><br><span class="line">    | Tables_in_test |</span><br><span class="line">    +----------------+</span><br><span class="line">    | classes        |</span><br><span class="line">    | students       |</span><br><span class="line">    +----------------+</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æŸ¥çœ‹<strong>ä¸€ä¸ªè¡¨çš„ç»“æ„</strong>ï¼š<code>DESC students;</code></p><ul><li><p>```mysql<br>+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”â€”â€”â€”-+<br>| Field    | Type         | Null | Key | Default | Extra          |<br>+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”â€”â€”â€”-+<br>| id       | bigint       | NO   | PRI | NULL    | auto_increment |<br>| class_id | bigint       | NO   |     | NULL    |                |<br>| name     | varchar(100) | NO   |     | NULL    |                |<br>| gender   | varchar(1)   | NO   |     | NULL    |                |<br>| score    | int          | NO   |     | NULL    |                |<br>+â€”â€”â€”-+â€”â€”â€”â€”â€“+â€”â€”+â€”â€“+â€”â€”â€”+â€”â€”â€”â€”â€”-+  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">* æŸ¥çœ‹ **åˆ›å»ºè¡¨** çš„SQLè¯­å¥ï¼š`SHOW CREATE TABLE students;`</span><br><span class="line">* **åˆ›å»ºè¡¨**ä½¿ç”¨ `CREATE TABLE`</span><br><span class="line">* **åˆ é™¤è¡¨**ä½¿ç”¨ `DROP TABLE`</span><br><span class="line">* **ä¿®æ”¹è¡¨**</span><br><span class="line"></span><br><span class="line">  * ç»™ `students`è¡¨æ–°å¢ä¸€åˆ— `birth` : `ALTER TABLE students ADD COLUMN birth VARCHAR(10) NOT NULL;`</span><br><span class="line">* **ä¿®æ”¹ `birth` åˆ—ï¼Œ**</span><br><span class="line"></span><br><span class="line">  * å°†åˆ—åæ”¹ä¸º `birthday`, ç±»å‹æ”¹ä¸º `VARCHAR(20)` : `ALTER TABLE students CHANGE COLUMN birth birthday VARCHAR(20) NOT NULL;`</span><br><span class="line">* **åˆ é™¤åˆ—ï¼š**</span><br><span class="line"></span><br><span class="line">  * `ALTER TABLE students DROP COLUMN birthday;`</span><br><span class="line"></span><br><span class="line">### é€€å‡ºMySQL</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨ `EXIT`å‘½ä»¤é€€å‡º MySQL</span><br><span class="line">  * ä»…ä»…æ–­å¼€äº† å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼ŒMySQL æœåŠ¡å™¨ä»ç„¶åœ¨è¿è¡Œ</span><br><span class="line"></span><br><span class="line">## å®ç”¨ SQL è¯­å¥</span><br><span class="line"></span><br><span class="line">### æ’å…¥æˆ–æ›¿æ¢</span><br><span class="line"></span><br><span class="line">* æ’å…¥ä¸€æ¡æ–°çš„è®°å½•ï¼Œè‹¥è®°å½•å·²ç»å­˜åœ¨ï¼Œå°±å…ˆåˆ é™¤åŸçºªå½•ï¼Œå†æ’å…¥æ–°è®°å½•</span><br><span class="line">  * ä¸å¿…å…ˆæŸ¥è¯¢</span><br><span class="line">* `REPLACE` è¯­æ³•ï¼š`INSERT INTO ... VALUES`</span><br><span class="line">  * `REPLACE INTO students (id,class_id,name,gender,score) VALUES (1,1,&#x27;xiaoming&#x27;,&#x27;F&#x27;,99);`</span><br><span class="line"></span><br><span class="line">### æ’å…¥æˆ–æ›´æ–°</span><br><span class="line"></span><br><span class="line">* æ’å…¥ä¸€æ¡æ–°è®°å½•ï¼Œè‹¥è®°å½•å·²ç»å­˜åœ¨ï¼Œå°±æ›´æ–°è¯¥è®°å½•</span><br><span class="line">* `INSERT INTO ... ON DUPLICATE KEY UPDATE ...`</span><br><span class="line">* ```mysql</span><br><span class="line">  INSERT INTO students (id, class_id, name, gender, score) VALUES (1, 1, &#x27;å°æ˜&#x27;, &#x27;F&#x27;, 99) ON DUPLICATE KEY UPDATE name=&#x27;å°æ˜&#x27;, gender=&#x27;F&#x27;, score=99;</span><br></pre></td></tr></table></figure></li><li><p>è‹¥ <code>id=1</code>ä¸å­˜åœ¨ï¼Œæ’å…¥æ–°è®°å½•ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™ç”± <code>UPDATE</code>æ›´æ–°å­—æ®µ</p></li></ul></li></ul><h3 id="æ’å…¥æˆ–å¿½ç•¥"><a href="#æ’å…¥æˆ–å¿½ç•¥" class="headerlink" title="æ’å…¥æˆ–å¿½ç•¥"></a>æ’å…¥æˆ–å¿½ç•¥</h3><ul><li><p>æ’å…¥ä¸€æ¡æ–°æ•°æ®ï¼Œè‹¥å·²ç»å­˜åœ¨ï¼Œå°±å¿½ç•¥</p></li><li><p><code>INSERT IGNORE INTO...</code></p><ul><li>```mysql<br>INSERT IGNORE INTO students (id, class_id, name, gender, score) VALUES (1, 1, â€˜å°æ˜â€™, â€˜Fâ€™, 99);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### å¿«ç…§</span><br><span class="line"></span><br><span class="line">* å¯¹ä¸€ä¸ªè¡¨è¿›è¡Œå¿«ç…§ï¼Œå³ å¤åˆ¶ä¸€ä»½å½“å‰è¡¨çš„æ•°æ®åˆ°ä¸€ä¸ªæ–°è¡¨ï¼Œç»“åˆ `CREATE TABLE` å’Œ `SELECT`</span><br><span class="line">* `CREATE TABLE students_of_class1 SELECT * FROM students WHERE class_id=1;`</span><br><span class="line">* åˆ›å»ºçš„è¡¨ç»“æ„å’ŒåŸè¡¨ä¸€æ ·</span><br><span class="line"></span><br><span class="line">### å†™å…¥æŸ¥è¯¢ç»“æœé›†</span><br><span class="line"></span><br><span class="line">* å°† æŸ¥è¯¢ç»“æœé›† å†™å…¥è¡¨ä¸­ï¼Œç»“åˆ `INSERT` å’Œ `SELECT`</span><br><span class="line">* ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªç»Ÿè®¡æˆç»©çš„è¡¨ `statistics`ï¼Œè®°å½•å„ç­çš„å¹³å‡æˆç»©ï¼š</span><br><span class="line"></span><br><span class="line">  * ```sql</span><br><span class="line">    CREATE TABLE statistics (</span><br><span class="line">        id BIGINT NOT NULL AUTO_INCREMENT,</span><br><span class="line">        class_id BIGINT NOT NULL,</span><br><span class="line">        average DOUBLE NOT NULL,</span><br><span class="line">        PRIMARY KEY (id)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å†™å…¥å„ç­çš„å¹³å‡æˆç»©ï¼š</p><ul><li>```sql<br>INSERT INTO statistics (class_id, average) SELECT class_id, AVG(score) FROM students GROUP BY class_id;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### å¼ºåˆ¶ä½¿ç”¨æŒ‡å®šç´¢å¼•</span><br><span class="line"></span><br><span class="line">* æŸ¥è¯¢æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†ææŸ¥è¯¢è¯­å¥ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªæœ€åˆé€‚çš„ç´¢å¼•</span><br><span class="line">* æœ‰æ—¶ï¼Œå¹¶ä¸ä¸€å®šæ˜¯æœ€ä¼˜ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨ `FORCE INDEX` å¼ºåˆ¶æŸ¥è¯¢ä½¿ç”¨æŒ‡å®šçš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">  * ```sql</span><br><span class="line">    SELECT * FROM students FORCE INDEX (idx_class_id) WHERE class_id = 1 ORDER BY id DESC;</span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸“é¢˜å››è®¾å¤‡é©±åŠ¨</title>
      <link href="p/4b288195.html"/>
      <url>p/4b288195.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>å®Œå–„ä¾‹å­ä¸­çš„å­—ç¬¦è®¾å¤‡ç¨‹åºï¼Œä½¿ä¹‹æ»¡è¶³ä»¥ä¸‹åŠŸèƒ½ï¼š</p><p> i.å®‰è£…è®¾å¤‡åä»è®¾å¤‡ä¸­è¯»å‡ºå­—ç¬¦ä¸²ä¸ºä½ çš„å­¦å·ï¼›</p><p> ii. è®¾å¤‡æ”¯æŒæ¯æ¬¡å†™å…¥å­—ç¬¦ä¸è¶…è¿‡1024ä¸ªï¼Œè¶…è¿‡éƒ¨åˆ†è¢«ä¸¢å¼ƒï¼›</p><p> iii. ç”¨æˆ·å¯ä»¥è¯»å‡ºæœ€è¿‘å†™å…¥åˆ°è®¾å¤‡ä¸­çš„å­—ç¬¦ï¼›</p><p> iv. è®¾å¤‡å…³é—­å‰ä¸èƒ½è¢«å¤šæ¬¡æ‰“å¼€ï¼›</p><p> v. è®¾å¤‡æ”¯æŒç³»ç»Ÿè°ƒç”¨ioctl(int d, int req,â€¦),req = 0x909090, æ¸…é™¤è®¾å¤‡ä¸­å†™å…¥çš„å­—ç¬¦ä¸²;</p><p> è‡ªå·±ç¼–å†™æµ‹è¯•ç¨‹åºï¼ŒéªŒè¯ä»¥ä¸ŠåŠŸèƒ½</p><p>æäº¤å†…å®¹ï¼š æµ‹è¯•è¿‡ç¨‹æˆªå›¾</p></blockquote><h1 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1 æ¦‚å¿µ"></a>1 æ¦‚å¿µ</h1><ul><li><p>æ“ä½œç³»ç»Ÿä¸­<strong>ç›´æ¥æ§åˆ¶è®¾å¤‡çš„ç¨‹åº</strong></p></li><li><p>Linux å°†è®¾å¤‡çœ‹æˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ï¼ˆ<strong>è®¾å¤‡æ–‡ä»¶</strong>ï¼‰</p><ul><li><strong>å­—ç¬¦å‹</strong>è®¾å¤‡</li><li>å—è®¾å¤‡</li></ul></li><li><p>Linux æ‰“å¼€è¯»å†™æˆ–å…³é—­è®¾å¤‡æ–‡ä»¶æ—¶ï¼Œåœ¨<strong>ä¸è®¾å¤‡é©±åŠ¨è¿›è¡Œäº¤äº’</strong></p></li></ul><h1 id="2-è®¾è®¡"><a href="#2-è®¾è®¡" class="headerlink" title="2 è®¾è®¡"></a>2 è®¾è®¡</h1><ul><li>ç”¨æˆ·è¿›ç¨‹è¯·æ±‚è®¾å¤‡æœåŠ¡æµç¨‹å›¾<ul><li><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜å››è®¾å¤‡é©±åŠ¨.assets\image-20210531201244104.png" alt="image-20210531201244104"></li><li><ol><li>ç”¨æˆ·è¿›ç¨‹å‘å‡º<strong>IOè¯·æ±‚</strong>ï¼Œç³»ç»Ÿå°†å¤„ç†ä¸‹ä¼ åˆ°<strong>VFS</strong>ä¸Š</li><li>VFS é€šè¿‡é©±åŠ¨ç¨‹åºæä¾›çš„æ¥å£å°†<strong>ä»»åŠ¡åˆ†é…</strong>åˆ°<strong>é©±åŠ¨ç¨‹åº</strong></li><li>é©±åŠ¨ç¨‹åºæ ¹æ®éœ€è¦ï¼Œ<strong>å¯¹è®¾å¤‡æ§åˆ¶å™¨è¿›è¡Œæ“ä½œ</strong></li><li>è®¾å¤‡æ§åˆ¶å™¨å»æ§åˆ¶è®¾å¤‡</li></ol></li></ul></li></ul><ul><li><strong>è®¾å¤‡é©±åŠ¨ç¨‹åºè®¾è®¡</strong><ul><li>VFS ç®¡ç†<strong>å­—ç¬¦è®¾å¤‡</strong>çš„æ¥å£ï¼š<code>struct file_operations</code><ul><li>é‡è¦çš„æ¥å£å‡½æ•°ï¼š<code>open,read,write,release,ioctl</code></li><li><strong>æ¥å£çš„å®ç°</strong>éƒ½ç”±<strong>è®¾å¤‡é©±åŠ¨</strong>æä¾›</li></ul></li><li>ä¸VFSçš„å¯¹æ¥ï¼š<ul><li><code>register_chrdev</code></li><li><strong>åŸç†</strong>ï¼šç”±æ•°ç»„chrdevs[255]ç®¡ç†å­—ç¬¦è®¾å¤‡é©±åŠ¨ä¸VFSçš„å¯¹æ¥æ¥å£ï¼Œä¸»è®¾å¤‡å·æ˜¯ä»–çš„ä¸‹æ ‡</li></ul></li><li><strong>è®¾å¤‡é©±åŠ¨</strong>ä¸è®¾å¤‡çš„å¯¹æ¥<ul><li>è®¾å¤‡å°±æ˜¯ä¸€å—å†…å­˜ï¼Œä»…è¯»å†™</li></ul></li></ul></li></ul><h1 id="3-å®ç°"><a href="#3-å®ç°" class="headerlink" title="3 å®ç°"></a>3 å®ç°</h1><ul><li>å®éªŒå†…å®¹ï¼š<ul><li>å®ç°ä¸€ä¸ªç”¨å†…å­˜æ¨¡æ‹Ÿçš„å­—ç¬¦è®¾å¤‡çš„é©±åŠ¨ç¨‹åºï¼ŒåŠŸèƒ½<ul><li>ç”¨æˆ·å¯ä»¥å‘è®¾å¤‡å†™å…¥å­—ç¬¦ä¸²</li><li>ç”¨æˆ·å¯ä»¥ä»è®¾å¤‡ä¸­è¯»å‡ºå†™å…¥çš„å­—ç¬¦ä¸²</li><li>ç”¨æˆ·å¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨<code>ioctl</code>æ¸…é™¤è®¾å¤‡ä¸­å†™å…¥çš„å­—ç¬¦ä¸²</li></ul></li></ul></li></ul><h2 id="3-2-è®¾å¤‡é©±åŠ¨çš„å®ç°â€”â€”ç”¨æ¨¡å—å®ç°"><a href="#3-2-è®¾å¤‡é©±åŠ¨çš„å®ç°â€”â€”ç”¨æ¨¡å—å®ç°" class="headerlink" title="3.2 è®¾å¤‡é©±åŠ¨çš„å®ç°â€”â€”ç”¨æ¨¡å—å®ç°"></a>3.2 è®¾å¤‡é©±åŠ¨çš„å®ç°â€”â€”ç”¨æ¨¡å—å®ç°</h2><ul><li>æ¨¡å—åˆå§‹åŒ–</li><li>æ¨¡å—é€€å‡ºæ—¶çš„æ¸…ç†</li><li>open close</li><li>read</li><li>write</li><li>ioctl</li></ul><p>æ‰“å¼€å¤±è´¥</p><p>è¯»å–å¤±è´¥</p><p>æ–‡ä»¶ç»“æŸ</p><p>å†™å…¥å¤±è´¥</p><p>å†™ bytes</p><p>clean å¤±è´¥</p><p>æ¸…é™¤!</p><p>å†™è®¾å¤‡error</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> XDU OSè¯¾ç¨‹è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> è®¾å¤‡é©±åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸“é¢˜ä¸‰å†…æ ¸æ¨¡å—</title>
      <link href="p/69488089.html"/>
      <url>p/69488089.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>å®éªŒè¦æ±‚ï¼š</strong></p><p><strong>é¢˜ç›®ä¸€</strong> ç¼–å†™ä¸€ä¸ªå†…æ ¸æ¨¡å—ï¼› ç¼–è¯‘è¯¥æ¨¡å—ï¼› åŠ è½½ã€å¸è½½è¯¥æ¨¡å—ï¼›</p><p><strong>é¢˜ç›®äºŒ</strong> ç”¨<strong>å†…æ ¸æ¨¡å—</strong>çš„æ–¹å¼ä¸ºç³»ç»Ÿæ·»åŠ ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ å…·ä½“è¦æ±‚åŒä¸“é¢˜äºŒ</p><p><strong>æäº¤å†…å®¹</strong>ï¼š</p><p>â€‹        <strong>å†…æ ¸æ¨¡å—åŠ è½½/å¸è½½æˆªå›¾</strong></p><p><strong>è¯„åˆ†æ ‡å‡†</strong>ï¼š è‡³å°‘å®Œæˆé¢˜ç›®ä¸€ï¼ˆ60-80åˆ†ï¼‰ è‡ªä¸»å®Œæˆé¢˜ç›®äºŒï¼ˆ90-100åˆ†ï¼‰</p></blockquote><h1 id="1-å†…æ ¸æ¨¡å—æ¦‚å¿µ"><a href="#1-å†…æ ¸æ¨¡å—æ¦‚å¿µ" class="headerlink" title="1 å†…æ ¸æ¨¡å—æ¦‚å¿µ"></a>1 å†…æ ¸æ¨¡å—æ¦‚å¿µ</h1><ul><li>æ˜¯ä¸€æ®µå¯ä»¥ åŠ¨æ€åŠ å…¥å†…æ ¸ï¼Œå¹¶ä¸”æˆä¸ºå†…æ ¸ä¸€éƒ¨åˆ†çš„ä»£ç </li><li>ä¼˜ç‚¹ï¼š<ul><li>é€šè¿‡åŠ¨æ€åŠ è½½å†…æ ¸æ¨¡å—ï¼Œä½¿å¾—åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ‰©å±•å†…æ ¸çš„åŠŸèƒ½</li><li>å‡å°å†…æ ¸æ˜ åƒå¤§å°ï¼Œå¢åŠ ç³»ç»Ÿçµæ´»æ€§</li><li>åªéœ€è¦ä¿®æ”¹å†…æ ¸ï¼Œè€Œä¸å¿…é‡æ–°ç¼–è¯‘æ•´ä¸ªå†…æ ¸</li></ul></li></ul><h1 id="2-å†…æ ¸æ¨¡å—ç›¸å…³å‘½ä»¤"><a href="#2-å†…æ ¸æ¨¡å—ç›¸å…³å‘½ä»¤" class="headerlink" title="2 å†…æ ¸æ¨¡å—ç›¸å…³å‘½ä»¤"></a>2 å†…æ ¸æ¨¡å—ç›¸å…³å‘½ä»¤</h1><ul><li>åŠ è½½å†…æ ¸æ¨¡å—ï¼š<ul><li><code>#insmod module_name</code></li></ul></li><li>å¸è½½å†…æ ¸æ¨¡å—ï¼š<ul><li><code>#rmmod module_name</code></li><li>æˆ–è€… <code>#modprobe -r module_name</code></li></ul></li><li>æŸ¥çœ‹ç³»ç»Ÿå·²ç»åŠ è½½çš„æ¨¡å—ï¼š<ul><li><code>#lsmod</code></li></ul></li><li>æŸ¥çœ‹ç³»ç»Ÿå·²ç»åŠ è½½çš„æ¨¡å—ä¿¡æ¯ï¼š<ul><li><code>#modinfo module_name</code></li></ul></li></ul><h1 id="3-å†…æ ¸æ¨¡å—çš„ç¼–å†™ï¼Œä¾‹å­"><a href="#3-å†…æ ¸æ¨¡å—çš„ç¼–å†™ï¼Œä¾‹å­" class="headerlink" title="3 å†…æ ¸æ¨¡å—çš„ç¼–å†™ï¼Œä¾‹å­"></a>3 å†…æ ¸æ¨¡å—çš„ç¼–å†™ï¼Œä¾‹å­</h1><p>å†…æ ¸æ¨¡å—æºä»£ç ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/init.h&gt;</span><span class="comment">//for module_init()</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/module.h&gt;</span><span class="comment">//mustbe included</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;linux/kernel.h&gt;</span><span class="comment">//for printk()</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hello_init</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//æ¨¡å—å…¥å£å‡½æ•°</span></span><br><span class="line">    printk(<span class="string">&quot;Hello module\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello_exit</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//æ¨¡å—é€€å‡ºå‡½æ•°</span></span><br><span class="line">    printk(<span class="string">&quot;Goodbye module\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(hello_init);</span><br><span class="line">module_exit(hello_exit);</span><br><span class="line"></span><br><span class="line">MODULE_LICENSE(<span class="string">&quot;GPL&quot;</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">&quot;CHUHUA&quot;</span>);</span><br><span class="line">MODULE_DESCRIPTION(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å†…æ ¸æ¨¡å—è¯´æ˜"><a href="#å†…æ ¸æ¨¡å—è¯´æ˜" class="headerlink" title="å†…æ ¸æ¨¡å—è¯´æ˜"></a>å†…æ ¸æ¨¡å—è¯´æ˜</h2><ul><li><code>hello_init()</code>: æ¨¡å—å…¥å£å‡½æ•°<ul><li>ç”±<code>module_init()</code>å®æŒ‡å®š</li><li>åœ¨æ¨¡å—è¢«åŠ è½½æ—¶è¢«è°ƒç”¨</li><li>è¿”å›å€¼ä¸º0ï¼šæˆåŠŸï¼Œéé›¶åˆ™å¤±è´¥</li></ul></li><li><code>hello_exit()</code>: æ¨¡å—é€€å‡ºå‡½æ•°<ul><li>ç”±<code>module_exit()</code>å®æŒ‡å®š</li><li>åœ¨æ¨¡å—è¢«å¸è½½æ—¶è¢«è°ƒç”¨</li><li>ä½œç”¨ï¼šæ¸…å®Œæˆèµ„æºçš„æ¸…ç†ï¼Œè¢«è°ƒç”¨å®Œæ¯•åï¼Œæ¨¡å—å°±è¢«å¸è½½äº†</li></ul></li><li>ä¸€ä¸ªæ¨¡å—è‡³å°‘æœ‰ å…¥å£ å’Œ é€€å‡ºå‡½æ•°</li><li>å®<code>MODULE_LICENSE(&quot;GLP&quot;)</code>: è®¾ç½®æ¨¡å—ç‰ˆæƒä¿¡æ¯</li><li>å®<code>MODULE_DESCRIPTION()</code>: æè¿°æ¨¡å—çš„ç”¨é€”</li><li>å®``</li></ul><h1 id="4-é€šè¿‡-module-è¿›è¡Œå†…æ ¸æ·»åŠ ç³»ç»Ÿè°ƒç”¨"><a href="#4-é€šè¿‡-module-è¿›è¡Œå†…æ ¸æ·»åŠ ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="4  é€šè¿‡ module è¿›è¡Œå†…æ ¸æ·»åŠ ç³»ç»Ÿè°ƒç”¨"></a>4  é€šè¿‡ module è¿›è¡Œå†…æ ¸æ·»åŠ ç³»ç»Ÿè°ƒç”¨</h1><p><a href="%5B(5%E6%9D%A1%E6%B6%88%E6%81%AF">å‚è€ƒåšå®¢</a> Linux/Ubuntu18.04 ä¸‹æ·»åŠ ç³»ç»Ÿè°ƒç”¨çš„ä¸¤ç§æ–¹æ³• (å†…æ ¸ç¼–è¯‘æ³•ï½œæ¨¡å—æ·»åŠ )_Egqawkqçš„åšå®¢-CSDNåšå®¢](<a href="https://blog.csdn.net/egqawkq/article/details/88970390">https://blog.csdn.net/egqawkq/article/details/88970390</a>))</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> XDU OSè¯¾ç¨‹è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> å†…æ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨</title>
      <link href="p/6e049acd.html"/>
      <url>p/6e049acd.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>å®éªŒè¦æ±‚ï¼š</strong></p><p> ä¸ºLinuxå†…æ ¸å¢åŠ ä¸€ä¸ª<strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼Œå¹¶ç¼–å†™<strong>ç”¨æˆ·è¿›ç¨‹çš„ç¨‹åº</strong>æ¥æµ‹è¯•ã€‚</p><p>è¦æ±‚<strong>è¯¥ç³»ç»Ÿè°ƒç”¨</strong>èƒ½å¤Ÿå®Œæˆ<strong>ä»¥ä¸‹åŠŸèƒ½</strong>ï¼š</p><pre><code> (1) è¯¥ç³»ç»Ÿè°ƒç”¨æœ‰1ä¸ªæ•´å‹å‚æ•°ï¼Œæ¥æ”¶è¾“å…¥è‡ªå·±çš„å­¦å·ï¼›        (2) è‹¥å‚æ•°ä¸ºå¥‡æ•°ï¼Œåˆ™è¿”å›è‡ªå·±å­¦å·çš„æœ€å5ä½ã€‚å¦‚ä½ çš„å­¦å·ä¸º16130120101 ï¼Œåˆ™è¿”å›20101ï¼›        (3) è‹¥å‚æ•°ä¸ºå¶æ•°ï¼Œåˆ™è¿”å›è‡ªå·±çš„å­¦å·çš„æœ€å6ä½ã€‚å¦‚ä½ çš„å­¦å·ä¸º16130120102 ï¼Œåˆ™è¿”å›120102 ã€‚</code></pre><p>æäº¤å†…å®¹ä¸ºï¼š</p><p>  <strong>æˆªå›¾1</strong>ï¼š è¿è¡Œç»“æœ</p><p>  <strong>æˆªå›¾2</strong>ï¼šæºä»£ç </p></blockquote><h1 id="1-çŸ¥è¯†ç‚¹-ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨"><a href="#1-çŸ¥è¯†ç‚¹-ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="1 [çŸ¥è¯†ç‚¹] ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨"></a>1 [çŸ¥è¯†ç‚¹] ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨</h1><h2 id="ç³»ç»Ÿè°ƒç”¨"><a href="#ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨"></a>ç³»ç»Ÿè°ƒç”¨</h2><p>Linux çš„<strong>è¿è¡Œç©ºé—´</strong>ï¼š<strong>å†…æ ¸ç©ºé—´</strong> å’Œ <strong>ç”¨æˆ·ç©ºé—´</strong></p><ul><li>é€»è¾‘ä¸Šç›¸äº’éš”ç¦»</li><li>ç”¨æˆ·è¿›ç¨‹é€šå¸¸æƒ…å†µä¸‹ ä¸å…è®¸ è®¿é—®<strong>å†…æ ¸æ•°æ®</strong>ï¼Œä¹Ÿæ— æ³•ä½¿<strong>ç”¨å†…æ ¸å‡½æ•°</strong></li><li>å†…æ ¸ æä¾›äº† <strong>ç”¨æˆ·è¿›ç¨‹ä¸å†…æ ¸è¿›è¡Œäº¤äº’çš„ä¸€ç»„æ¥å£</strong>ï¼šç”¨æˆ·è¿›ç¨‹å¯ä»¥é€šè¿‡è¿™ç»„æ¥å£æ¥è·å¾—æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›çš„æœåŠ¡</li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨çš„ä½œç”¨"><a href="#ç³»ç»Ÿè°ƒç”¨çš„ä½œç”¨" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨çš„ä½œç”¨"></a>ç³»ç»Ÿè°ƒç”¨çš„ä½œç”¨</h2><ul><li>æä¾›<strong>ç”¨æˆ·æ¨¡å¼</strong>çš„è¿›ç¨‹å’Œç¡¬ä»¶è®¾å¤‡çš„<strong>æ¥å£</strong></li><li>ä¿è¯<strong>ç³»ç»Ÿçš„ç¨³å®šå’Œå®‰å…¨</strong></li><li>å®ç°<strong>å¤šä»»åŠ¡å’Œè™šæ‹Ÿå†…å­˜</strong></li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨çš„åˆ†ç±»"><a href="#ç³»ç»Ÿè°ƒç”¨çš„åˆ†ç±»" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨çš„åˆ†ç±»"></a>ç³»ç»Ÿè°ƒç”¨çš„åˆ†ç±»</h2><ul><li>æ§åˆ¶ç¡¬ä»¶<ul><li>ç¡¬ä»¶èµ„æº ä¸ ç”¨æˆ·ç©ºé—´çš„æŠ½è±¡æ¥å£</li><li>è¯»å†™æ–‡ä»¶ï¼šwrite/read</li></ul></li><li>è¿›ç¨‹ç®¡ç†<ul><li>ä¿è¯ç³»ç»Ÿä¸­çš„è¿›ç¨‹èƒ½ä»¥<strong>å¤šä»»åŠ¡åœ¨è™šæ‹Ÿå†…å­˜ç¯å¢ƒä¸‹è¿è¡Œ</strong></li><li>forkï¼Œcloneï¼Œ<code>execve</code></li></ul></li><li>è®¾ç½®ç³»ç»ŸçŠ¶æ€æˆ–è¯»å–å†…æ ¸æ•°æ®<br>* </li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨å’Œ-API-æ¥å£"><a href="#ç³»ç»Ÿè°ƒç”¨å’Œ-API-æ¥å£" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨å’Œ API æ¥å£"></a>ç³»ç»Ÿè°ƒç”¨å’Œ API æ¥å£</h2><ul><li>ä¸€èˆ¬ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ <strong>åº”ç”¨ç¨‹åº API</strong>è€Œä¸æ˜¯ ç›´æ¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨ç¼–ç¨‹</li><li>åº”ç”¨ç¨‹åºä½¿ç”¨çš„ åº”ç”¨ç¨‹åºAPIï¼Œä¸éœ€è¦å’Œå†…æ ¸æä¾›çš„ ç³»ç»Ÿè°ƒç”¨ ä¸€ä¸€å¯¹åº”<ul><li>ä¸€ä¸ªAPI æ¥å£å¯ä»¥ ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª ç³»ç»Ÿè°ƒç”¨å®ç°</li></ul></li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨å’Œç³»ç»Ÿå‘½ä»¤"><a href="#ç³»ç»Ÿè°ƒç”¨å’Œç³»ç»Ÿå‘½ä»¤" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨å’Œç³»ç»Ÿå‘½ä»¤"></a>ç³»ç»Ÿè°ƒç”¨å’Œç³»ç»Ÿå‘½ä»¤</h2><ul><li><strong>ç³»ç»Ÿå‘½ä»¤</strong>æ¯”<strong>åº”ç”¨ç¨‹åºæ¥å£</strong>æ›´é«˜ä¸€å±‚</li><li>æ¯ä¸€ä¸ªç³»ç»Ÿå‘½ä»¤éƒ½æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº<ul><li>ls</li></ul></li><li><strong>ç³»ç»Ÿå‘½ä»¤</strong>çš„å®ç°è°ƒç”¨äº†ç³»ç»Ÿè°ƒç”¨</li><li><code>strace ls</code>å¯ä»¥ æŸ¥çœ‹ç³»ç»Ÿå‘½ä»¤æ‰€è°ƒç”¨çš„ç³»ç»Ÿè°ƒç”¨</li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨ä¸å†…æ ¸å‡½æ•°"><a href="#ç³»ç»Ÿè°ƒç”¨ä¸å†…æ ¸å‡½æ•°" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨ä¸å†…æ ¸å‡½æ•°"></a>ç³»ç»Ÿè°ƒç”¨ä¸å†…æ ¸å‡½æ•°</h2><ul><li><strong>å†…æ ¸å‡½æ•°</strong>åªæ˜¯åœ¨å†…æ ¸ä¸­å®ç°çš„å‡½æ•°</li><li><strong>ç³»ç»Ÿè°ƒç”¨</strong> æ˜¯ç”¨æˆ·è¿›å…¥å†…æ ¸çš„æ¥å£å±‚ï¼Œæœ¬èº«ä¸æ˜¯å†…æ ¸å‡½æ•°ï¼Œæ˜¯ç”±å†…æ ¸å‡½æ•°å®ç°çš„</li><li>è¿›å…¥å†…æ ¸åï¼Œä¸åŒçš„ç³»ç»Ÿè°ƒç”¨ æ‰¾åˆ° å„è‡ªå¯¹åº”çš„å†…æ ¸å‡½æ•°<ul><li>è¿™äº›å†…æ ¸å‡½æ•°ï¼šç³»ç»Ÿè°ƒç”¨çš„â€œæœåŠ¡ä¾‹ç¨‹â€</li><li>Linux ç³»ç»Ÿè°ƒç”¨ å¯¹åº”çš„ å†…æ ¸ä¾‹ç¨‹å…¨éƒ¨ä»¥â€sys_â€ å¼€å¤´ï¼š<code>sys_fork</code> </li></ul></li></ul><h1 id="2-çŸ¥è¯†ç‚¹-ç³»ç»Ÿè°ƒç”¨å®ç°åŸç†"><a href="#2-çŸ¥è¯†ç‚¹-ç³»ç»Ÿè°ƒç”¨å®ç°åŸç†" class="headerlink" title="2 [çŸ¥è¯†ç‚¹] ç³»ç»Ÿè°ƒç”¨å®ç°åŸç†"></a>2 [çŸ¥è¯†ç‚¹] ç³»ç»Ÿè°ƒç”¨å®ç°åŸç†</h1><h2 id="ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åº"><a href="#ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åº" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åº"></a>ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åº</h2><ul><li>å½“ç”¨æˆ·æ€çš„è¿›ç¨‹ è°ƒç”¨ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ—¶ï¼ŒCPU åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œå¹¶ä¸”æ‰§è¡Œä¸€ä¸ªå†…æ ¸å‡½æ•°</li><li><strong>ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åº</strong>æ‰§è¡Œçš„æ“ä½œï¼š<ul><li>åœ¨å†…æ ¸æ ˆ ä¿å­˜å¤§å¤šæ•°å¯„å­˜å™¨çš„å†…å®¹</li><li>è°ƒç”¨æ‰€è°“ç³»ç»Ÿè°ƒç”¨çš„æœåŠ¡ä¾‹ç¨‹ç›¸åº” çš„ Cå‡½æ•°å¤„ç†ç³»ç»Ÿè°ƒç”¨</li><li>é€šè¿‡ <code>ret_from_sys_call</code> å‡½æ•°ä»ç³»ç»Ÿè°ƒç”¨è¿”å›</li></ul></li></ul><h2 id="æœåŠ¡ä¾‹ç¨‹"><a href="#æœåŠ¡ä¾‹ç¨‹" class="headerlink" title="æœåŠ¡ä¾‹ç¨‹"></a>æœåŠ¡ä¾‹ç¨‹</h2><ul><li><p>Linux çš„<strong>ç³»ç»Ÿè°ƒç”¨</strong>æœ‰200å¤šä¸ªï¼Œç›¸åº”çš„<strong>æœåŠ¡ä¾‹ç¨‹</strong>ä¹Ÿæ˜¯</p></li><li><p>å®šä¹‰<code>_syscall0</code> - <code>_syscall5</code>å…­ä¸ª<strong>å®</strong>ï¼šå¯¹ç›¸åº”çš„ä¾‹ç¨‹è¿›è¡Œå°è£…</p><ul><li>æ¯ä¸ªå®åå­— åç¼€çš„æ•°å­—ï¼šç³»ç»Ÿè°ƒç”¨ æ‰€ç”¨çš„å‚æ•°ä¸ªæ•°ï¼ˆç³»ç»Ÿè°ƒç”¨å·é™¤å¤–ï¼‰</li></ul></li><li><p>æ¯ä¸ªå®ï¼šéœ€è¦<code>2+2*n</code> ä¸ªå‚æ•°</p><ul><li>n : ç³»ç»Ÿè°ƒç”¨çš„å‚æ•°ä¸ªæ•°</li><li>ä¸€å¯¹å‚æ•°ï¼šç³»ç»Ÿè°ƒç”¨çš„è¿”å›å€¼ç±»å‹å’Œåå­—</li><li>nå¯¹å‚æ•°ï¼šç³»ç»Ÿè°ƒç”¨å‚æ•°çš„ç±»å‹å’Œåå­—</li></ul></li><li><p>ä¾‹å¦‚ï¼šwrite() ä¾‹ç¨‹çš„å°è£…ï¼š</p><ul><li><code>_syscall3(int, write, int, fd, const char*, buf, unsigned int, count)</code></li></ul></li><li><p>ä¸€èˆ¬ï¼Œç³»ç»Ÿè°ƒç”¨äºç”¨æˆ·ç¨‹åºä¸­ï¼Œå†…æ ¸æ€ä¹Ÿå¯ä»¥åŒæ ·è°ƒç”¨å°è£…äº†çš„ç³»ç»Ÿè°ƒç”¨ï¼š</p><ul><li>åŒºåˆ«ï¼šç”¨æˆ·æ€è¿›è¡Œç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œéœ€è¦è¿›è¡Œç”¨æˆ·æ€å †æ ˆåˆ°å†…æ ¸æ€å †æ ˆçš„åˆ‡æ¢</li></ul></li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹"><a href="#ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹"></a>ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹</h2><p><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515141634577-1621059396007.png" alt="image-20210515141634577"></p><ul><li><p>é¦–å…ˆï¼š<strong>è½¯ä¸­æ–­</strong>ï¼šé€šè¿‡è½¯ä»¶æŒ‡ä»¤è§¦å‘è€Œéå¤–è®¾å¼•å‘çš„ä¸­æ–­</p><ul><li>æ—¶ç¼–ç¨‹äººå‘˜å¼€å‘çš„ä¸€ç§å¼‚å¸¸</li><li>å…·ä½“æ˜¯è°ƒç”¨<code>int $0x80</code>æ±‡ç¼–æŒ‡ä»¤ï¼Œäº§ç”Ÿå‘é‡ä¸º 0x80 çš„ç¼–ç¨‹å¼‚å¸¸</li></ul></li><li><p>ç„¶åï¼šå†…æ ¸è¿›è¡Œä¸­æ–­æœåŠ¡çš„å¤„ç†ï¼Œå¹¶æ‰§è¡Œ<code>system_call</code>å‡½æ•°</p><ul><li>è¿›å…¥ç³»ç»Ÿè°ƒç”¨å…¥å£çš„å…¬å…±å¤„ç†å‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ä¼šæŒ‰ç…§å¯„å­˜å™¨<code>eax</code>ä¸­çš„å†…å®¹è¯†åˆ«å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨</li></ul></li><li><p>è¿›å…¥ç³»ç»Ÿå†…æ ¸åï¼Œä½¿ç”¨<code>system_call_table</code>å’Œ<code>eax</code> æŸ¥åˆ°çœŸæ­£çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å†…æ ¸ä¾‹ç¨‹</p></li><li><p>æœ€åï¼šä»ç³»ç»Ÿè°ƒç”¨ä¸­è¿”å›åï¼Œæœ€ç»ˆæ‰§è¡Œ<code>syscall_exit</code>ï¼Œå¹¶è°ƒç”¨<code>resume_userspace</code>è¿”å›ç”¨æˆ·ç©ºé—´</p></li></ul><p><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515142513417-1621059914414.png" alt="image-20210515142513417"></p><p><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515142702100-1621060023561.png" alt="image-20210515142702100"></p><ul><li>ä»ç”¨æˆ·è§’åº¦å‘å†…æ ¸ï¼š<ul><li>ç³»ç»Ÿå‘½ä»¤</li><li>ç¼–ç¨‹æ¥å£</li><li>ç³»ç»Ÿè°ƒç”¨</li><li>å†…æ ¸å‡½æ•°</li></ul></li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨å®ç°"><a href="#ç³»ç»Ÿè°ƒç”¨å®ç°" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨å®ç°"></a>ç³»ç»Ÿè°ƒç”¨å®ç°</h2><ul><li><p>Linux ä¸­ï¼Œæ¯ä¸ªç³»ç»Ÿè°ƒç”¨è¢«èµ‹äºˆä¸€ä¸ª<code>ç³»ç»Ÿè°ƒç”¨å·</code></p></li><li><p>é€šè¿‡ç³»ç»Ÿè°ƒç”¨å·å¯ä»¥å…³è”ç³»ç»Ÿè°ƒç”¨</p></li><li><p>å†…æ ¸è®°å½•ç³»ç»Ÿè°ƒç”¨è¡¨ä¸­æ‰€æœ‰å·²æ³¨å†Œçš„ç³»ç»Ÿè°ƒç”¨åˆ—è¡¨ï¼Œå­˜å‚¨äº<code>sys_call_table</code></p></li><li></li><li><p><code>linux-ç‰ˆæœ¬å·/arch/x86/include/asm/unsted_32.h</code>ï¼šå®šä¹‰äº†æ‰€æœ‰<strong>ç³»ç»Ÿè°ƒç”¨çš„ç¼–å·</strong></p></li><li><p>æ€»ä¸ªæ•°ï¼š<code>NR_syscalls</code></p></li><li><p>ç³»ç»Ÿè°ƒç”¨å·æ˜¯å›ºå®šçš„</p></li></ul><p>1.é€šè¿‡ <strong>å¼‚å¸¸</strong> ä½¿è¿›ç¨‹åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼<code>int 80h</code>æŒ‡ä»¤å®Œæˆ</p><p>â€‹    ç³»ç»Ÿè°ƒç”¨ä¸­æ–­çš„å…¥å£<code>syscall(ç³»ç»Ÿè°ƒç”¨è°ƒç”¨å·)</code></p><p>2.<strong>ç³»ç»Ÿè°ƒç”¨è·³è½¬è¡¨</strong>ï¼š<code>linux/arch/x86/kernel/syscall_table_32.S</code>ï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„å‡½æ•°</p><h1 id="3-æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨"><a href="#3-æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="3 æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨"></a>3 æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨</h1><blockquote><p>è¦æ±‚<strong>è¯¥ç³»ç»Ÿè°ƒç”¨</strong>èƒ½å¤Ÿå®Œæˆ<strong>ä»¥ä¸‹åŠŸèƒ½</strong>ï¼š</p><pre><code> (1) è¯¥ç³»ç»Ÿè°ƒç”¨æœ‰1ä¸ªæ•´å‹å‚æ•°ï¼Œæ¥æ”¶è¾“å…¥è‡ªå·±çš„å­¦å·ï¼›        (2) è‹¥å‚æ•°ä¸ºå¥‡æ•°ï¼Œåˆ™è¿”å›è‡ªå·±å­¦å·çš„æœ€å5ä½ã€‚å¦‚ä½ çš„å­¦å·ä¸º16130120101 ï¼Œåˆ™è¿”å›20101ï¼›        (3) è‹¥å‚æ•°ä¸ºå¶æ•°ï¼Œåˆ™è¿”å›è‡ªå·±çš„å­¦å·çš„æœ€å6ä½ã€‚å¦‚ä½ çš„å­¦å·ä¸º16130120102 ï¼Œåˆ™è¿”å›120102 ã€‚</code></pre></blockquote><blockquote><p>ä¿®æ”¹ç³»ç»Ÿè°ƒç”¨è¡¨æ–‡ä»¶-&gt; ä¿®æ”¹ç³»ç»Ÿè°ƒç”¨å·æ–‡ä»¶-&gt;ä¸­å¢åŠ ç³»ç»Ÿè°ƒç”¨å£°æ˜-&gt;æ·»åŠ å®ç°</p></blockquote><ul><li>==éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯==ï¼šlong å‹è‡³å¤šè¡¨ç¤º10ä½åè¿›åˆ¶æ•°ï¼Œè€Œå­¦å·æ˜¯11ä½ï¼Œéœ€è¦ä½¿ç”¨long longæ¥æ”¶å‚æ•°</li></ul><p><strong>æ­¥éª¤ä¸€</strong>ï¼šæ‰“å¼€ ç³»ç»Ÿè°ƒç”¨å·è¡¨<code>syscall_64.tbl</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨</p><ul><li>å‘½ä»¤ï¼š<code>sudo gedit arch/x86/entry/syscalls/syscall_64.tbl</code></li><li><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515210516396-1621083917785.png" alt="image-20210515210516396"></li></ul><p><strong>æ­¥éª¤äºŒ</strong>ï¼šåœ¨å†…æ ¸å‡½æ•°å£°æ˜æ–‡ä»¶<code>syscalls.h</code>ä¸­æ·»åŠ ç³»ç»Ÿè°ƒç”¨çš„å†…æ ¸å‡½æ•°å£°æ˜ï¼š</p><ul><li><p><code>sudo gedit include/linux/syscalls.h</code></p></li><li><p>åœ¨æœ€å å‡½æ•°å£°æ˜ï¼š</p><ul><li><p><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515210608651-1621083970352.png" alt="image-20210515210608651"></p></li><li><p>```c<br>/* My Own syscall */<br>asmlinkage long sys_mysyscall(long long number);<br>#endif</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**æ­¥éª¤ä¸‰**ï¼šåœ¨å†…æ ¸å‡½æ•°å®šä¹‰æ–‡ä»¶`sys.c`æ–‡ä»¶ä¸­æ·»åŠ å‡½æ•°å®šä¹‰ï¼š</span><br><span class="line"></span><br><span class="line">* `sudo gedit kernel/sys.c`</span><br><span class="line"></span><br><span class="line">* ![image-20210515210709408](E:\Hexo\Blog\source\_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515210709408-1621084030357.png)</span><br><span class="line"></span><br><span class="line">* ```c</span><br><span class="line">  /* My Own syscall */</span><br><span class="line">  SYSCALL_DEFINE1(mysyscall, long long, number)&#123;</span><br><span class="line">  long ans=0;</span><br><span class="line">  if(number%2 == 0 )&#123;</span><br><span class="line">  ans = number%1000000;</span><br><span class="line">  &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">  ans = number%100000;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  return ans;</span><br><span class="line">  &#125;</span><br><span class="line">  #endif /* CONFIG_COMPAT */</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li></ul></li></ul><p><strong>æ¥ä¸‹æ¥</strong>ï¼Œ==é‡æ–°ç¼–è¯‘å†…æ ¸==</p><ul><li><strong>å‡€åŒ–å†…æ ¸</strong>ï¼š<ul><li><code>make mrproper</code><ul><li>åˆ é™¤æ‰€æœ‰ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶ã€å†…æ ¸é…ç½®æ–‡ä»¶ç­‰</li></ul></li><li><code>make clean</code><ul><li>åˆ é™¤å‰ä¸€æ¬¡ç¼–è¯‘è¿‡ç¨‹æ®‹ç•™çš„æ•°æ®</li></ul></li></ul></li><li><strong>é‡æ–°ç¼–è¯‘å®‰è£…å†…æ ¸</strong>ï¼šï¼š<del>å› ä¸º make å¤ªä¹…è€Œåœ¨ç»“æŸçš„æ—¶å€™å¿˜è®° å®‰è£…æ“ä½œ çš„æ†¨æ†¨æ˜¯æˆ‘</del><ul><li><code>make menuconfig</code></li><li><code>make </code></li><li><code>make modules_install</code></li><li><code>make install</code></li></ul></li><li><strong>æœ€åé‡å¯</strong><code>reboot</code></li></ul><p><strong>æ¥ç€</strong>å¯ä»¥éªŒè¯æ·»åŠ çš„ç³»ç»Ÿè°ƒç”¨æ˜¯å¦æˆåŠŸï¼š</p><h1 id="4-éªŒè¯æ·»åŠ çš„ç³»ç»Ÿè°ƒç”¨"><a href="#4-éªŒè¯æ·»åŠ çš„ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="4 éªŒè¯æ·»åŠ çš„ç³»ç»Ÿè°ƒç”¨"></a>4 éªŒè¯æ·»åŠ çš„ç³»ç»Ÿè°ƒç”¨</h1><p>å†™ä¸€æ®µè°ƒç”¨ç³»ç»Ÿè°ƒç”¨çš„ç¨‹åºï¼š</p><p><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515210743109-1621084064449.png" alt="image-20210515210743109"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/kernel.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/syscall.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="comment">//443:long long sys_mysyscall(long long)</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> number;</span><br><span class="line">    <span class="keyword">long</span> ans;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¾“å…¥å­¦å·ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;number);</span><br><span class="line">        ans = syscall(<span class="number">443</span>,number);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;mysyscall return %ld\n&quot;</span>,ans);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p><code>gcc -o test.c test</code></p></li><li><p><code>./test</code></p></li><li><p><strong>ç»“æœ</strong>ï¼š</p><ul><li><img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜äºŒç³»ç»Ÿè°ƒç”¨.assets\image-20210515210811389-1621084092512.png" alt="image-20210515210811389"></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> XDU OSè¯¾ç¨‹è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> å†…æ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸“é¢˜ä¸€å†…æ ¸ç¼–è¯‘</title>
      <link href="p/d1d6ca89.html"/>
      <url>p/d1d6ca89.html</url>
      
        <content type="html"><![CDATA[<ul><li><blockquote><p> <strong>ä½œä¸šè¦æ±‚ï¼š</strong></p><p> å®Œæˆæœ¬ä¸“é¢˜æ•™å­¦å†…å®¹ä¸­çš„éªŒæ”¶æµ‹è¯•é¢˜å¹¶æäº¤éªŒæ”¶ææ–™ã€‚</p><p> éªŒæ”¶ææ–™è¦æ±‚:</p><p> <strong>æ–°å†…æ ¸å¼•å¯¼æˆåŠŸå‰</strong>ï¼š</p><p> \1. æ‰§è¡Œå‘½ä»¤ï¼š<code>uname â€“a</code>,æäº¤<strong>æˆªå±ç»“æœ1</strong></p><p> <img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜ä¸€å†…æ ¸ç¼–è¯‘\image-20210514211226158-1620997948493.png" alt="image-20210514211226158"></p><p> <strong>æ–°å†…æ ¸å¼•å¯¼æˆåŠŸå</strong>ï¼š</p><p> \2. æ‰§è¡Œå‘½ä»¤ï¼š<code>uname â€“a</code>,æäº¤<strong>æˆªå±ç»“æœ2</strong></p><p> <img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜ä¸€å†…æ ¸ç¼–è¯‘.assets\image-20210514222101971-1621002063317.png" alt="image-20210514222101971"></p><p> \3. è¿›å…¥ç›®å½•/bootï¼Œæ‰§è¡Œå‘½ä»¤ï¼šls -l,æäº¤<strong>æˆªå±ç»“æœ3</strong></p><p> <img src="E:\Hexo\Blog\source_posts\ä¸“é¢˜ä¸€å†…æ ¸ç¼–è¯‘.assets\image-20210514222213871.png" alt="image-20210514222213871"></p></blockquote></li><li><p><strong>==tips:==</strong>  åœ¨åˆ›å»ºè™šæ‹Ÿæœºæ—¶ï¼Œæœ€å¥½åˆ†é… 50 GB ä»¥ä¸Šä»ç£ç›˜ç©ºé—´ï¼Œå››ä¸ªä»¥ä¸Šå†…æ ¸</p></li><li><p><strong>æœ€é‡è¦çš„æ˜¯</strong>ï¼šåˆ†é… 4 GB ä»¥ä¸Šçš„å†…å­˜ï¼Œé˜²æ­¢åœ¨å†…å­˜ä¸­æ­»é”</p></li><li><p><strong>æœ€æœ€é‡è¦çš„æ˜¯</strong>ï¼šæ–°ç‰ˆæœ¬çš„ Linux å†…æ ¸<code>make install</code>å®‰è£…åï¼Œ<strong>ä¸å†éœ€è¦</strong>æ‰‹åŠ¨å¼•å¯¼å†…æ ¸ï¼ï¼ï¼å³ä¸å†éœ€è¦é…ç½® grub</p></li></ul><h1 id="1-çŸ¥è¯†ç‚¹-ä»€ä¹ˆæ˜¯-Linux-å†…æ ¸"><a href="#1-çŸ¥è¯†ç‚¹-ä»€ä¹ˆæ˜¯-Linux-å†…æ ¸" class="headerlink" title="1 [çŸ¥è¯†ç‚¹]ä»€ä¹ˆæ˜¯ Linux å†…æ ¸"></a>1 [çŸ¥è¯†ç‚¹]ä»€ä¹ˆæ˜¯ Linux å†…æ ¸</h1><ul><li><p><strong>æ“ä½œç³»ç»Ÿçš„ç»“æ„</strong></p><ul><li><p><img src="E:\4th_term\OSè¯¾è®¾\è¯¾é¢˜ä¸€\ä¸“é¢˜ä¸€.assets\image-20210511210840223.png" alt="image-20210511210840223"></p></li><li><p>æ“ä½œç³»ç»Ÿï¼šKernel + Shell</p></li></ul></li><li><p><strong>Kernelçš„ç»„æˆå’ŒåŠŸèƒ½</strong>ï¼š</p><ul><li><img src="E:\4th_term\OSè¯¾è®¾\è¯¾é¢˜ä¸€\ä¸“é¢˜ä¸€.assets\image-20210511211233011.png" alt="image-20210511211233011"></li></ul></li><li><p>Linux <strong>å‘è¡Œç‰ˆæœ¬</strong>å’Œ<strong>å†…æ ¸ç‰ˆæœ¬</strong>ä¹‹é—´çš„å…³ç³»ï¼š</p><ul><li>ä¾‹å¦‚æ•™å­¦è§†é¢‘ä¸­ï¼š<code>Ubuntu10.04</code> = <code>Kernel2.6.30</code> + <code>SHELL</code> + <code>USERS APPLICATIONS</code></li><li>ä¸¤è€…ç‹¬ç«‹</li></ul></li><li><p>æœ¬æ¬¡è¯¾ç¨‹è®¾è®¡æˆ‘é€‰æ‹©çš„<strong>å‘è¡Œç‰ˆæœ¬</strong>æ˜¯ <code>Ubuntu20.04.20</code></p><ul><li>å…¶<strong>å†…æ ¸ç‰ˆæœ¬</strong>ï¼šç”¨å‘½ä»¤<code>uname -r</code><ul><li><code>5.8.0-50-generic</code></li></ul></li></ul></li></ul><h1 id="2-å®éªŒ-ä»å†…æ ¸æºç -åˆ°-å†…æ ¸é•œåƒ-Kernel-Image"><a href="#2-å®éªŒ-ä»å†…æ ¸æºç -åˆ°-å†…æ ¸é•œåƒ-Kernel-Image" class="headerlink" title="2 [å®éªŒ] ä»å†…æ ¸æºç  åˆ° å†…æ ¸é•œåƒ(Kernel Image)"></a>2 [å®éªŒ] ä»å†…æ ¸æºç  åˆ° å†…æ ¸é•œåƒ(Kernel Image)</h1><h2 id="å®éªŒå‡†å¤‡"><a href="#å®éªŒå‡†å¤‡" class="headerlink" title="å®éªŒå‡†å¤‡"></a>å®éªŒå‡†å¤‡</h2><p>å½“å‰Linuxå†…æ ¸ç‰ˆæœ¬ä¸º<code>5.8.0-50</code></p><p>ä»<a href="https://www.kernel.org/">å†…æ ¸ç‰ˆæœ¬</a>å®˜ç½‘ä¸‹è½½å¦ä¸€ä¸ªå†…æ ¸ç‰ˆæœ¬:</p><ul><li>ç‰ˆæœ¬å·å°¾å·ä¸ºå¶æ•°çš„æ˜¯stableç‰ˆçš„ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©<code>5.12.2</code></li></ul><p><em>tips:</em> ç›´æ¥ç‚¹å‡»å±é»„è‰²æŒ‰é’®ä¸‹è½½å¾ˆæ…¢ï¼Œå¯ä»¥å°†ä¸‹è½½é“¾æ¥å¤åˆ¶è‡³è‡ªå·±å–œæ¬¢çš„ä¸‹è½½è½¯ä»¶ä¸‹è½½<code>IDM</code></p><h2 id="å®éªŒæ­¥éª¤"><a href="#å®éªŒæ­¥éª¤" class="headerlink" title="å®éªŒæ­¥éª¤"></a>å®éªŒæ­¥éª¤</h2><p><strong>å®éªŒè¦æ±‚</strong>ï¼š åˆ©ç”¨<code>make menuconfig</code>çš„é…ç½®åŠŸèƒ½ï¼Œé…ç½®å¹¶ç¼–è¯‘ä¿¡æ¯ä¸­å¸¦æœ‰è‡ªå·±<strong>å­¦å·åŠ å§“å</strong>çš„å†…æ ¸</p><h3 id="1-å®‰è£…ç›¸åº”çš„è½¯ä»¶åŒ…"><a href="#1-å®‰è£…ç›¸åº”çš„è½¯ä»¶åŒ…" class="headerlink" title="1 å®‰è£…ç›¸åº”çš„è½¯ä»¶åŒ…"></a>1 å®‰è£…ç›¸åº”çš„è½¯ä»¶åŒ…</h3><p><strong>æ­¥éª¤</strong></p><ul><li><p>æ‰‹åŠ¨æˆ–ç»ˆç«¯è§£å‹<code>package</code></p></li><li><p><code>.deb</code> ç¦»çº¿å®‰è£…åŒ…</p><ul><li>è€ç‰ˆæœ¬çš„å‘è¡Œç‰ˆåœ¨çº¿å®‰è£…æ¯”è¾ƒéº»çƒ¦</li></ul></li><li><p><code>sudo bash ./INSTALL.sh</code>: æ‰§è¡Œå®‰è£…è„šæœ¬</p></li></ul><blockquote><p><strong>é‡åˆ°çš„é—®é¢˜</strong>ï¼šç›¸å…³ä¾èµ–ä¸‹è½½å®‰è£…</p><ol start="0"><li><p>å¯ä»¥å…ˆæ›´æ¢å›½å†…æº</p><ol><li>åœ¨ <em>è½¯ä»¶å’Œæ›´æ–°</em> é€‰æ‹© <code>æœ€ä½³çš„æœåŠ¡å™¨</code></li><li><img src="E:\4th_term\OSè¯¾è®¾\è¯¾é¢˜ä¸€\ä¸“é¢˜ä¸€.assets\image-20210512163243691-1620808365518.png" alt="image-20210512163243691" style="zoom:50%;" /></li></ol></li><li><p>åœ¨æ‰§è¡Œ INSTALL.sh æ—¶ï¼Œè®¸å¤šè­¦å‘Šï¼Œç¼ºå°‘ä¾èµ–ç­‰</p></li></ol><ol><li>ç™¾åº¦æ‰¾åˆ° Ubuntu20.04 ç¼–è¯‘å†…æ ¸æ‰€éœ€è¦çš„ä¾èµ–</li><li>é¦–æ›´æ–°<code>sudo apt-get update &amp;&amp; sudo apt-get upgrade</code></li><li><code>sudo apt-get install libelf-dev</code></li><li><code>sudo apt-get install libncurses5-dev libssl-dev</code></li><li><code>sudo apt-get install build-essential openssl</code></li><li><code>sudo apt-get install libidn11-dev libidn11</code></li><li><code>sudo apt-get install zlibc minizip</code></li><li><code>sudo apt-get install bison</code></li><li><code>sudo apt-get install flex</code></li><li><code>sudo apt-get install pkg-config</code><ol start="11"><li><code>sudo apt-get install libssl-dev</code></li></ol></li></ol></blockquote><h3 id="2-æ‹·è´æºç åŒ…è‡³-usr-srcå¹¶è§£å‹"><a href="#2-æ‹·è´æºç åŒ…è‡³-usr-srcå¹¶è§£å‹" class="headerlink" title="2 æ‹·è´æºç åŒ…è‡³/usr/srcå¹¶è§£å‹"></a>2 æ‹·è´æºç åŒ…è‡³<code>/usr/src</code>å¹¶è§£å‹</h3><ul><li>éœ€è¦ç”¨ root ç”¨æˆ·æƒé™å°†æºç åŒ…æ‹·å…¥æ ‡å‡†è·¯å¾„<code>/usr/src</code></li><li>è§£å‹å‘½ä»¤ <code>sudo tar xfv xxx </code><ul><li>è§£å‹ä¸ƒä¸‡å¤šä¸ªæ–‡ä»¶(.c .hæ–‡ä»¶)</li></ul></li></ul><blockquote><p>é‡åˆ°çš„é—®é¢˜ï¼š</p><p>éœ€è¦é‡æ–°å®‰è£…VMware tools</p><ol><li>é¦–å…ˆå°†å‹ç¼©åŒ…ç§»åŠ¨è‡³ usr/local`</li><li>ç„¶åä½¿ç”¨<code>tar -zxvf xxx </code>è§£å‹</li><li>è¿›å…¥vmware-tools-distrib, ä½¿ç”¨<code>sudo ./vmware-install.pl</code>å‘½ä»¤å®‰è£…</li><li>æ‰‹åŠ¨å¯åŠ¨<code>vmware-user</code></li></ol></blockquote><h3 id="3-è¿›å…¥æºç æ‰€åœ¨ç›®å½•"><a href="#3-è¿›å…¥æºç æ‰€åœ¨ç›®å½•" class="headerlink" title="3 è¿›å…¥æºç æ‰€åœ¨ç›®å½•"></a>3 è¿›å…¥æºç æ‰€åœ¨ç›®å½•</h3><ul><li>æŒ‰ç…§åŠŸèƒ½åˆ†</li><li>Makefile</li></ul><h3 id="4-æ‰§è¡Œä¸€ç³»åˆ—-make-æŒ‡ä»¤"><a href="#4-æ‰§è¡Œä¸€ç³»åˆ—-make-æŒ‡ä»¤" class="headerlink" title="4 æ‰§è¡Œä¸€ç³»åˆ— make æŒ‡ä»¤"></a>4 æ‰§è¡Œä¸€ç³»åˆ— make æŒ‡ä»¤</h3><blockquote><p>==tips:== å¯ä»¥ä½¿ç”¨å¤šæ ¸è¿›è¡Œç¼–è¯‘<code>make -j x   </code>: xä¸ºæ ¸å¿ƒæ•°ï¼Œä¸èƒ½è¶…è¿‡è‡ªå·±çš„æ ¸å¿ƒæ•°ï¼Œçœç•¥åˆ™ä½¿ç”¨æœ€å¤šæ•°</p></blockquote><ul><li><strong>æ­¥éª¤ä¸€ï¼š</strong><code>make menuconfig -j x</code><ul><li>è¿›å…¥<strong>é…ç½®èœå•</strong><ul><li><code>[ ]</code> : ç¼–è¯‘å…¥å†…æ ¸</li><li><code>[*]</code>ï¼šå¯é€‰</li><li><code>[M]</code>ï¼š ç¼–è¯‘ä¸ºå†…æ ¸æ¨¡å—</li></ul></li><li><strong>å¿…é¡»</strong>æ”¹ï¼šåœ¨ <code>General setup</code> â€”â€”&gt;<code>Local version</code>ï¼šåŠ å…¥<code>å­¦å·åŠ å§“å</code></li></ul></li></ul><blockquote><p><strong>é‡åˆ°çš„é”™è¯¯ï¼š</strong></p><p><code>Your display is too small to run Menuconfig! It must be at least 19 lines by 80 columns. make[1]: *** [scripts/kconfig/Makefile:34ï¼šmenuconfig] é”™è¯¯ 1 make: *** [Makefile:602ï¼šmenuconfig] é”™è¯¯ 2</code></p><ul><li>ç¬¬ä¸€ä¸ªé—®é¢˜ä¼¼ä¹æ˜¯ç»ˆç«¯çª—å£å¤ªå°ï¼Œæœ€å¤§åŒ–è¯•è¯•</li><li>æœ€å¤§åŒ–ä¹‹åå†å°†æ¯”ä¾‹ç¼©å°å³å¯</li></ul></blockquote><blockquote></blockquote><ul><li><strong>æ­¥éª¤äºŒï¼š</strong> <code>make -j x</code> (xä¸ºåˆ†é…çš„å†…æ ¸æ•°)ï¼š<code>.c</code>ç¼–è¯‘ä¸º<code>.o</code><ul><li>ä¸€åˆ°ä¸¤å°æ—¶<ul><li>å¯ä»¥ç”¨å¤šå†…æ ¸å‡å°‘ä¸€äº›æ—¶é—´</li></ul></li><li><strong>å¿«ç…§</strong>ï¼šä¿å­˜å½“å‰ç³»ç»Ÿçš„çŠ¶æ€ï¼Œéšæ—¶å¯ä»¥æ¢å¤è½½å…¥æ”¹çŠ¶æ€</li><li>ç¼–è¯‘finishedåï¼Œç›®å½•ä¸‹äº§ç”Ÿï¼š<code>vmlinux.o</code> ç›®æ ‡æ–‡ä»¶å’Œ<code>vmlinux</code> å¯æ‰§è¡Œæ–‡ä»¶</li></ul></li></ul><blockquote><p>makeä¹‹åæŠ¥é”™ï¼š<code>scripts/sign-file.c:25:10: fatal error: openssl/opensslv.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•    25 | #include &lt;openssl/opensslv.h&gt;       |          ^~~~~~~~~~~~~~~~~~~~ compilation terminated.</code></p><ul><li>è§£å†³ï¼š<code>sudo apt-get install libssl-dev</code></li><li>åº”æå‰å®‰è£…</li></ul></blockquote><ul><li><strong>æ­¥éª¤ä¸‰</strong>ï¼š<code>make modules_install -j x</code><ul><li>ç¼–è¯‘ä¸ºåŠ¨æ€é“¾æ¥åº“<code>.ko</code><ul><li><code>driver</code></li><li><code>fs</code></li><li><code>sound</code></li><li><code>lib</code></li></ul></li><li>å°†<code>.ko</code>ï¼ˆç±»ä¼¼äºåŠ¨æ€åº“ï¼‰ç§»åŠ¨è‡³æ ‡å‡†ç›®å½•</li></ul></li></ul><blockquote><p>make modules_installæŠ¥é”™ï¼š</p><p><code>sed: æ— æ³•è¯»å– modules.order: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½• make: *** [Makefile:1471ï¼š_modinst_] é”™è¯¯ 2</code></p><ul><li>é—®é¢˜è§£å†³ï¼š<ul><li><code>make[1]: *** æ²¡æœ‰è§„åˆ™å¯åˆ¶ä½œç›®æ ‡â€œdebian/canonical-certs.pemâ€ç”±â€œcerts/x509_certificate_listâ€ éœ€æ±‚ã€‚ åœæ­¢ã€‚ make: *** [Makefile:1851ï¼šcerts] é”™è¯¯ 2</code><ul><li>solution :<ul><li><code>vi .config</code></li><li><code>/</code>æœç´¢<code>CONFIG_SYSTEM_TRUSTED_KEYS</code>ï¼Œå°†é‡Œé¢å†…å®¹æ¸…ç©º</li></ul></li></ul></li></ul></li></ul></blockquote><ul><li><strong>æ­¥éª¤å››</strong>ï¼š<code>make install -j x</code><ul><li>æ‰§è¡Œ<code>.sh</code>è„šæœ¬ï¼šå°†å†…æ ¸é•œåƒç§»åŠ¨è‡³ <code>boot</code> å¼•å¯¼ç›®å½•<ul><li>ç”¨å¼•å¯¼ç¨‹åºå°†å†…æ ¸é•œåƒå¼•å¯¼èµ·æ¥</li></ul></li><li>æ‰§è¡Œå®Œå‘½ä»¤åï¼š<ul><li>ä¸‰ä¸ªä»¥ <code>å­¦å·å§“å</code> ä¸ºåç¼€çš„æ–‡ä»¶æ˜¯å¼•å¯¼æ‰€éœ€è¦çš„</li></ul></li></ul></li></ul><blockquote><p>Warning: </p><p><code>dpkg: warning: version &#39;5.12.2mazihao_19030500024~old&#39; has bad syntax: invalid character in version number dpkg: warning: version &#39;5.12.2mazihao_19030500024~old&#39; has bad syntax: invalid character in version number</code></p><ul><li>solution: </li></ul></blockquote><ul><li>æ³¨æ„ï¼šæ–°ç‰ˆæœ¬ï¼ˆæˆ‘çš„æ˜¯5.12.2ï¼‰çš„Linuxå†…æ ¸ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¼•å¯¼å†…æ ¸ï¼Œ<ul><li>make install ä¹‹åç›´æ¥é‡å¯å³å¯</li></ul></li></ul><h1 id="3-çŸ¥è¯†ç‚¹-GNU-makeå’Œmakefile"><a href="#3-çŸ¥è¯†ç‚¹-GNU-makeå’Œmakefile" class="headerlink" title="3 [çŸ¥è¯†ç‚¹] GNU makeå’Œmakefile"></a>3 [çŸ¥è¯†ç‚¹] GNU makeå’Œmakefile</h1><h2 id="ä»€ä¹ˆæ˜¯-make"><a href="#ä»€ä¹ˆæ˜¯-make" class="headerlink" title="ä»€ä¹ˆæ˜¯ make"></a>ä»€ä¹ˆæ˜¯ make</h2><ul><li><code>make menuconfig</code>: ç”¨å‘½ä»¤è¡Œæ¨¡å¼<strong>é…ç½®å†…æ ¸</strong></li><li><code>make</code>: ç¼–è¯‘<strong>å†…æ ¸</strong>å’Œ<strong>æ¨¡å—</strong></li><li><code>make modules_install</code>: å®‰è£…<strong>æ¨¡å—</strong><ul><li>åœ¨<code>/lib/modules/å†…æ ¸ç‰ˆæœ¬</code> å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œå»ºç«‹æ–‡ä»¶å¤¹å¹¶æŠŠæ¨¡å—æ–‡ä»¶æ”¾å…¥</li></ul></li><li><code>make install</code>: å®‰è£…<strong>å†…æ ¸</strong><ul><li>å³æ‹·è´å…¥<code>/boot</code>ç›®å½•ä¸‹</li></ul></li></ul><h2 id="ä»€ä¹ˆæ˜¯makefile"><a href="#ä»€ä¹ˆæ˜¯makefile" class="headerlink" title="ä»€ä¹ˆæ˜¯makefile"></a>ä»€ä¹ˆæ˜¯makefile</h2><ul><li>å‘Šè¯‰ make å‘½ä»¤å¦‚ä½•å»ç¼–è¯‘</li></ul><blockquote><p><strong>makefile</strong>æ–‡ä»¶ä¿å­˜äº† <strong>ç¼–è¯‘å™¨å’Œè¿æ¥å™¨çš„å‚æ•°é€‰é¡¹</strong>, è¿˜è¡¨è¿°äº†<strong>æ‰€æœ‰æºæ–‡ä»¶ä¹‹é—´çš„å…³ç³»(<strong>æºä»£ç æ–‡ä»¶éœ€è¦çš„</strong>ç‰¹å®šçš„åŒ…å«æ–‡ä»¶</strong>,å¯æ‰§è¡Œæ–‡ä»¶è¦æ±‚åŒ…å«çš„ç›®æ ‡æ–‡ä»¶æ¨¡å—åŠåº“ç­‰).</p><p><strong>åˆ›å»ºç¨‹åº(makeç¨‹åº</strong>) é¦–å…ˆè¯»å–makefileæ–‡ä»¶, ç„¶åå†æ¿€æ´»ç¼–è¯‘å™¨,æ±‡ç¼–å™¨,èµ„æºç¼–è¯‘å™¨å’Œè¿æ¥å™¨ä»¥ä¾¿äº§ç”Ÿæœ€åçš„è¾“å‡º, æœ€åè¾“å‡ºå¹¶ç”Ÿæˆçš„é€šå¸¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶.</p><p>åˆ›å»ºç¨‹åºåˆ©ç”¨å†…ç½®çš„æ¨ç†è§„åˆ™æ¥æ¿€æ´»ç¼–è¯‘å™¨,ä»¥ä¾¿é€šè¿‡å¯¹ç‰¹å®š<code>CPP</code>æ–‡ä»¶çš„ç¼–è¯‘æ¥äº§ç”Ÿç‰¹å®šçš„OBJæ–‡ä»¶. </p></blockquote><h2 id="makefile-è§„åˆ™"><a href="#makefile-è§„åˆ™" class="headerlink" title="makefile è§„åˆ™"></a>makefile è§„åˆ™</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target ... :prerequisites ...</span><br><span class="line">recipe</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="Makefile-demo-ä½¿ç”¨è§„åˆ™"><a href="#Makefile-demo-ä½¿ç”¨è§„åˆ™" class="headerlink" title="Makefile demo ä½¿ç”¨è§„åˆ™"></a>Makefile demo ä½¿ç”¨è§„åˆ™</h2><h2 id="è¯•è¯»å†…æ ¸æºç çš„Makefile"><a href="#è¯•è¯»å†…æ ¸æºç çš„Makefile" class="headerlink" title="è¯•è¯»å†…æ ¸æºç çš„Makefile"></a>è¯•è¯»å†…æ ¸æºç çš„Makefile</h2><h1 id="4-çŸ¥è¯†ç‚¹-æ“ä½œç³»ç»Ÿå¯åŠ¨"><a href="#4-çŸ¥è¯†ç‚¹-æ“ä½œç³»ç»Ÿå¯åŠ¨" class="headerlink" title="4 [çŸ¥è¯†ç‚¹] æ“ä½œç³»ç»Ÿå¯åŠ¨"></a>4 [çŸ¥è¯†ç‚¹] æ“ä½œç³»ç»Ÿå¯åŠ¨</h1><h2 id="æ“ä½œç³»ç»Ÿ-å¼•å¯¼è¿‡ç¨‹"><a href="#æ“ä½œç³»ç»Ÿ-å¼•å¯¼è¿‡ç¨‹" class="headerlink" title="æ“ä½œç³»ç»Ÿ å¼•å¯¼è¿‡ç¨‹"></a>æ“ä½œç³»ç»Ÿ å¼•å¯¼è¿‡ç¨‹</h2><ol><li>ç”µè„‘å¼€æœºåï¼Œ å¯åŠ¨ <strong>BIOS</strong> , BIOS <strong>è‡ªæ£€</strong></li><li>è‡ªæ£€åï¼ŒBIOS æ‰¾åˆ°ç¡¬ç›˜ä¸Šçš„<strong>ä¸»å¼•å¯¼è®°å½•</strong> <strong>MBR</strong></li><li><strong>MBR</strong> è¯»å–<strong>ç¡¬ç›˜åˆ†åŒºè¡¨ DPT</strong> ï¼Œæ‰¾åˆ°æ´»åŠ¨åˆ†åŒºä¸­çš„<strong>åˆ†åŒºå¼•å¯¼è®°å½• PBR</strong>ï¼Œå°†æ§åˆ¶æƒäº¤ç»™ <strong>PBR</strong></li><li><strong>PBR</strong> æœç´¢æ´»åŠ¨åˆ†åŒºä¸­çš„<strong>å¯åŠ¨ç®¡ç†å™¨</strong> <strong>bootmgr</strong> ï¼ˆLinuxä¸‹æ˜¯<strong>Grub</strong>ï¼Œgrub.conf , windowsä¸‹æ˜¯ï¼‰ï¼Œå°†æ§åˆ¶æƒäº¤ç»™ bootmgr</li><li><strong>bootmgr</strong> å¯»æ‰¾ boot æ–‡ä»¶å¤¹ä¸­çš„ <strong>BCD æ–‡ä»¶ï¼ˆå¯åŠ¨é…ç½®æ•°æ®ï¼‰</strong></li><li>æ‰¾åˆ° BCD åï¼Œ<strong>bootmgr</strong> é¦–å…ˆä» BCD ä¸­è¯»å–å¯åŠ¨ç®¡ç†å™¨ <strong>bootmgr</strong> èœå•ä¿¡æ¯ï¼Œåœ¨æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºå¤šæ“ä½œç³»ç»Ÿé€‰æ‹©ç”»é¢</li><li>å¦‚æœå­˜åœ¨å¤šä¸ªæ“ä½œç³»ç»Ÿå¹¶ä¸”ç³»ç»Ÿè®¾ç½®çš„ç­‰å¾…æ—¶é—´ä¸æ˜¯0ï¼Œå°±ä¼šæ˜¾ç¤ºå¤šä¸ªæ“ä½œç³»ç»Ÿã€‚è‹¥æ— ï¼Œåˆ™ç›´æ¥è¿›å…¥</li><li>è¿›å…¥ç³»ç»Ÿåï¼Œ<strong>bootmgr</strong> ä¼šè¯»å– BCD ä¸­win7ç³»ç»Ÿæ‰€åœ¨çš„ç›˜çš„<code>winload.exe</code> æ–‡ä»¶ï¼Œå°†æ§åˆ¶å™¨äº¤ç»™</li><li>winload.exe åŠ è½½win7 å†…æ ¸ã€ç¡¬ä»¶ã€æœåŠ¡ç­‰ï¼Œä¹‹ååŠ è½½æ¡Œé¢ç­‰ä¿¡æ¯ï¼Œä»è€Œå¯åŠ¨æ•´ä¸ªç³»ç»Ÿ</li></ol><h2 id="å¯åŠ¨ç®¡ç†ç¨‹åº-grub"><a href="#å¯åŠ¨ç®¡ç†ç¨‹åº-grub" class="headerlink" title="å¯åŠ¨ç®¡ç†ç¨‹åº grub"></a>å¯åŠ¨ç®¡ç†ç¨‹åº grub</h2><ul><li><code>grub.conf</code><ul><li>éœ€è¦æ”¹é…ç½®æ­£ç¡®æ‰èƒ½å¯åŠ¨</li></ul></li></ul><h1 id="5-å®éªŒ-Linux-å†…æ ¸çš„å¼•å¯¼"><a href="#5-å®éªŒ-Linux-å†…æ ¸çš„å¼•å¯¼" class="headerlink" title="5 [å®éªŒ] Linux å†…æ ¸çš„å¼•å¯¼"></a>5 [å®éªŒ] Linux å†…æ ¸çš„å¼•å¯¼</h1><p>å¼•å¯¼å‰ï¼š</p><p><img src="E:\4th_term\OSè¯¾è®¾\è¯¾é¢˜ä¸€\ä¸“é¢˜ä¸€å†…æ ¸ç¼–è¯‘.assets\image-20210514102943927.png" alt="image-20210514102943927"></p><blockquote><p>å†…æ ¸ make installæˆåŠŸå</p></blockquote><p>==<strong>æ³¨æ„ï¼š</strong>==</p><p>æ–°ç‰ˆæœ¬çš„<code>Ubuntu</code> ä¸å†éœ€è¦æ‰‹åŠ¨å¼•å¯¼å†…æ ¸ï¼ˆçŸ¥é“çœŸç›¸çš„æˆ‘çœ¼æ³ªæµä¸‹æ¥ï¼Œéœ€è¦å°†å†…å­˜åˆ†é…è‡³4GBä»¥ä¸Šï¼‰</p><p>ç„¶åï¼Œ<code>make install</code>ä¹‹åï¼Œç›´æ¥<code>reboot</code></p><p><del>é¦–å…ˆï¼šå°†å†…æ ¸ä½œä¸ºå¼•å¯¼ï¼Œæ•°å­—æ”¹ä¸ºè‡ªå·±ç¼–è¯‘çš„ç‰ˆæœ¬å·ï¼š</del></p><ul><li><del><code>sudo update-initramfs -c -k 5.12.2mzh19030500024</code></del></li></ul><p><del>ç„¶åï¼Œæ›´æ–° grubï¼š</del></p><ul><li><del><code>sudo update-grub</code></del></li></ul><p><del>ä¹‹åï¼Œä¿®æ”¹ grubæ–‡ä»¶ï¼š</del></p><ul><li><del><code>sudo gedit /etc/default/grub</code></del></li><li><del><img src="https://img2018.cnblogs.com/i-beta/1653979/201911/1653979-20191112233306483-1954394758.png" alt="img"></del></li></ul><p><del>ç„¶åï¼Œæ‰§è¡Œ<code>sudo update-grub</code></del></p><p><del>æœ€åé‡å¯ï¼Œé€‰æ‹©<strong>advanced</strong>ï¼Œé€‰æ‹©ç¼–è¯‘å¥½çš„å†…æ ¸</del></p><ul><li><del>æ­¥éª¤ä¸€ï¼š<code>sudo mkinitramfs -o /boot/initrd.img-5.12.2</code></del></li><li><del>æ­¥éª¤äºŒï¼š<code>sudo update-initramfs -c -k 5.12.2</code></del><ul><li><del>åœ¨bootç›®å½•ä¸‹äº§ç”Ÿ<code>init</code></del></li></ul></li><li><del>æ­¥éª¤ä¸‰ï¼š<code>sudo update-grub2 </code></del><ul><li><del>è‡ªåŠ¨ä¿®æ”¹ç³»ç»Ÿå¼•å¯¼é…ç½®ï¼Œäº§ç”Ÿgrub.cfgå¯åŠ¨æ–‡ä»¶ã€‚</del></li><li><del>ågrub.cfgæ–‡ä»¶ä¸­å¢åŠ äº†æ–°å†…æ ¸çš„å¯åŠ¨é¡¹</del></li></ul></li><li><del>æ­¥éª¤ä¸‰ï¼š<code>reboot</code></del> </li><li><del>é€‰æ‹©æ–°ç‰ˆæœ¬å†…æ ¸</del></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> XDU OSè¯¾ç¨‹è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> ç¼–è¯‘ </tag>
            
            <tag> å†…æ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ›å»ºè¿›ç¨‹ã€å­è¿›ç¨‹å’Œè¿›ç¨‹é—´é€šä¿¡</title>
      <link href="p/a3ec7244.html"/>
      <url>p/a3ec7244.html</url>
      
        <content type="html"><![CDATA[<h1 id="fork-æ–¹æ³•"><a href="#fork-æ–¹æ³•" class="headerlink" title="fork() æ–¹æ³•"></a>fork() æ–¹æ³•</h1><p>fork åŸå‹ï¼š</p><ul><li><code>pid_t fork(void)</code></li></ul><p>forkçš„å®šä¹‰ï¼š</p><p>çˆ¶è¿›ç¨‹åœ¨è°ƒç”¨ fork æ´¾ç”Ÿå­è¿›ç¨‹ï¼Œå®é™…ä¸Šç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªè¿›ç¨‹æ‹·è´</p><ul><li><p>è°ƒç”¨ä¸€æ¬¡ fork() ä¼šè¿”å›ä¸¤æ¬¡</p><ul><li>ä¸€æ¬¡ï¼šåœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„è¿›ç¨‹ä¸­è¿”å› <strong>å­è¿›ç¨‹çš„ id</strong></li><li>äºŒæ¬¡ï¼šåœ¨å­è¿›ç¨‹ä¸­è¿”å› 0</li><li>è‹¥åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶è¿”å› -1 åˆ™è¡¨ç¤ºè°ƒç”¨å¤±è´¥</li></ul></li><li><p>æ ¹æ® fork çš„è¿”å›å€¼åˆ¤æ–­å½“å‰è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ï¼š</p><ul><li><pre><code class="c">#include&lt;stdio.h&gt;#include&lt;unistd.h&gt;int main()&#123;    pid_t pid = fork();    if(pid == 0)&#123;        printf(&quot;child\n&quot;);    &#125;    else&#123;        printf(&quot;father\n&quot;);    &#125;    return 0;&#125;</code></pre></li></ul></li></ul><h1 id="è¿›ç¨‹é—´é€šä¿¡-IPC"><a href="#è¿›ç¨‹é—´é€šä¿¡-IPC" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡ IPC"></a>è¿›ç¨‹é—´é€šä¿¡ IPC</h1><p><code>Inter-Process Communication</code>: å¤šä¸ªè¿›ç¨‹ä¹‹é—´ç›¸äº’æ²Ÿé€šçš„ä¸€ç§æ–¹æ³•</p><p>ç®¡é“ã€å‘½åç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·ã€ä¿¡å·é‡ã€å…±äº«å†…å­˜ã€å†…å­˜æ˜ å°„ã€å¥—æ¥å­—</p><h2 id="ç®¡é“-PIPE"><a href="#ç®¡é“-PIPE" class="headerlink" title="ç®¡é“ PIPE"></a>ç®¡é“ PIPE</h2><ul><li>ç®¡é“ï¼šç”¨äºè¿›ç¨‹é—´é€šä¿¡ çš„ä¸€æ®µå…±äº«å†…å­˜<ul><li>åˆ›å»ºç®¡é“çš„è¿›ç¨‹ï¼šç®¡é“æœåŠ¡å™¨</li><li>è¿æ¥åˆ°çš„ä¸€ä¸ªç®¡é“çš„è¿›ç¨‹ï¼šç®¡é“å®¢æˆ·æœº</li></ul></li><li>ä¸€ä¸ªè¿›ç¨‹ï¼Œåœ¨å‘ç®¡é“å†™å…¥æ•°æ®åï¼Œå¦ä¸€ä¸ªè¿›ç¨‹å°±å¯ä»¥ä»ç®¡é“çš„å¦ä¸€ç«¯è¯»å–</li></ul><p>ç®¡é“çš„ç‰¹ç‚¹ï¼š</p><ul><li>å•å‘é€šä¿¡ï¼šæ•°æ®åªèƒ½å‘ä¸€ä¸ªæ–¹å‘æµåŠ¨ï¼Œ<ul><li>éœ€è¦åŒæ–¹äº¤æµæ—¶ï¼Œåˆ›å»ºä¸¤ä¸ªç®¡é“</li></ul></li><li>åªèƒ½ç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹ï¼š<ul><li>fork æˆ–è€… exec</li></ul></li><li>ç®¡é“åªèƒ½åœ¨æœ¬åœ°è®¡ç®—æœºä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºç½‘ç»œé—´çš„é€šä¿¡</li></ul><h3 id="ä½¿ç”¨ï¼š"><a href="#ä½¿ç”¨ï¼š" class="headerlink" title="ä½¿ç”¨ï¼š"></a>ä½¿ç”¨ï¼š</h3><ul><li>å‡½æ•°åŸå‹ï¼š<code>int pipe(int fd[2]);</code><ul><li>è¿”å›0 æˆåŠŸï¼Œè¿”å›-1å‡ºé”™</li></ul></li><li>faå‚æ•°è¿”å›ä¸¤ä¸ª<strong>æ–‡ä»¶æè¿°ç¬¦ï¼š</strong><ul><li>fd[0] æŒ‡å‘ç®¡é“çš„<strong>è¯»ç«¯</strong></li><li>fd[1]æŒ‡å‘ç®¡é“çš„<strong>å†™ç«¯</strong></li></ul></li></ul><p><strong>å®ç°è¿›ç¨‹é—´é€šä¿¡çš„æ­¥éª¤ï¼š</strong></p><ul><li>çˆ¶è¿›ç¨‹åˆ›å»º ç®¡é“ï¼Œå¾—åˆ°ä¸¤ä¸ªæè¿°ç¬¦ï¼ŒæŒ‡å‘ç®¡é“çš„ä¸¤ç«¯</li><li>çˆ¶è¿›ç¨‹ fork å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¹Ÿæœ‰ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦æŒ‡å‘åŒä¸€ä¸ªç®¡é“ä¸¤ç«¯</li><li>ä¸€ä¸ªè¿›ç¨‹å…³é—­å†™ç«¯ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹å…³é—­è¯»ç«¯ï¼Œå³å¯å®ç°é€šä¿¡<ul><li>ä½¿ç”¨ <code>close()</code> å…³é—­fd[]</li></ul></li><li>å…³é—­è¯»ç«¯çš„è¿›ç¨‹ä½¿ç”¨ <code>write(fd[1], )</code> æ¥å†™å…¥ç®¡é“ä¿¡æ¯</li><li>å…³é—­å†™ç«¯çš„è¿›ç¨‹ä½¿ç”¨ <code>read(fd[0], ) </code>æ¥è¯»å–ç®¡é“ä¸­çš„ä¿¡æ¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> XDU OSè¯¾ç¨‹è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåº”ç”¨ç¬¬äºŒéƒ¨åˆ†</title>
      <link href="p/77fbe329.html"/>
      <url>p/77fbe329.html</url>
      
        <content type="html"><![CDATA[<p>è¯¥éƒ¨åˆ†å°†å»ºç«‹æ•°æ®åº“ï¼Œåˆ›å»ºç¬¬ä¸€ä¸ªæ¨¡å‹module, å¹¶ä¸»è¦å…³æ³¨Djangoæä¾›çš„è‡ªåŠ¨ç”Ÿæˆçš„ç®¡ç†é¡µé¢</p><h2 id="æ•°æ®åº“é…ç½®"><a href="#æ•°æ®åº“é…ç½®" class="headerlink" title="æ•°æ®åº“é…ç½®"></a>æ•°æ®åº“é…ç½®</h2><ul><li><code>mysite/settings.py</code>: åŒ…å«äº†é¡¹ç›®é…ç½®çš„pythonæ¨¡å—</li><li>ä¸€èˆ¬ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä½¿ç”¨ <code>SQLite</code> ä½œä¸ºé»˜è®¤æ•°æ®åº“</li></ul><blockquote><p><strong>æ›´æ¢ æ•°æ®åº“</strong> â€”â€”[å®˜æ–¹æ–‡æ¡£](<a href="https://docs.djangoproject.com/zh-hans/3.2/intro/tutorial02/">ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Django åº”ç”¨ï¼Œç¬¬ 2 éƒ¨åˆ† | Django æ–‡æ¡£ | Django (djangoproject.com)</a>)</p><p>å¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–æ•°æ®åº“ï¼Œä½ éœ€è¦å®‰è£…åˆé€‚çš„ <a href="https://docs.djangoproject.com/zh-hans/3.2/topics/install/#database-installation">database bindings</a> ï¼Œç„¶åæ”¹å˜è®¾ç½®æ–‡ä»¶ä¸­ <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-DATABASES"><code>DATABASES</code></a> <code>&#39;default&#39;</code> é¡¹ç›®ä¸­çš„ä¸€äº›é”®å€¼ï¼š</p><ul><li><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-DATABASE-ENGINE"><code>ENGINE</code></a> â€“ å¯é€‰å€¼æœ‰ <code>&#39;django.db.backends.sqlite3&#39;</code>ï¼Œ<code>&#39;django.db.backends.postgresql&#39;</code>ï¼Œ<code>&#39;django.db.backends.mysql&#39;</code>ï¼Œæˆ– <code>&#39;django.db.backends.oracle&#39;</code>ã€‚å…¶å®ƒ <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/databases/#third-party-notes">å¯ç”¨åç«¯</a>ã€‚</li><li><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-NAME"><code>NAME</code></a> â€“ æ•°æ®åº“çš„åç§°ã€‚å¦‚æœä½ ä½¿ç”¨ SQLiteï¼Œæ•°æ®åº“å°†æ˜¯ä½ ç”µè„‘ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-NAME"><code>NAME</code></a> åº”è¯¥æ˜¯æ­¤æ–‡ä»¶å®Œæ•´çš„ç»å¯¹è·¯å¾„ï¼ŒåŒ…æ‹¬æ–‡ä»¶åã€‚é»˜è®¤å€¼ <code>BASE_DIR / &#39;db.sqlite3&#39;</code> å°†æŠŠæ•°æ®åº“æ–‡ä»¶å‚¨å­˜åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ã€‚</li></ul><p>å¦‚æœä½ ä¸ä½¿ç”¨ SQLiteï¼Œåˆ™å¿…é¡»æ·»åŠ ä¸€äº›é¢å¤–è®¾ç½®ï¼Œæ¯”å¦‚ <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-USER"><code>USER</code></a> ã€ <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-PASSWORD"><code>PASSWORD</code></a> ã€ <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-HOST"><code>HOST</code></a> ç­‰ç­‰ã€‚æƒ³äº†è§£æ›´å¤šæ•°æ®åº“è®¾ç½®æ–¹é¢çš„å†…å®¹ï¼Œè¯·çœ‹æ–‡æ¡£ï¼š<a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-DATABASES"><code>DATABASES</code></a> ã€‚</p></blockquote><ul><li><p>åœ¨ç¼–è¾‘ <code>settings.py</code>æ–‡ä»¶å‰ï¼Œéœ€è¦å…ˆè®¾ç½® <code>TIME_ZONE</code>ä¸ºè‡ªå·±çš„æ—¶åŒº</p><ul><li><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-TIME_ZONE">TIME_ZONE</a></li><li>ä¸­å›½æ—¶åŒºï¼š<code>CN</code></li></ul></li><li><p><code>setting.py</code>å¤´éƒ¨ <code>INSTALLED_APPS</code>è®¾ç½®é¡¹ï¼šåŒ…æ‹¬äº†ä¼šåœ¨é¡¹ç›®ä¸­å¯åŠ¨çš„æ‰€æœ‰åº”ç”¨</p><ul><li><blockquote><p>åº”ç”¨èƒ½åœ¨å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥æ‰“åŒ…å¹¶ä¸”å‘å¸ƒåº”ç”¨ï¼Œè®©åˆ«äººä½¿ç”¨å®ƒä»¬</p></blockquote></li></ul></li><li><p><code>INSTALLED_APPS</code>é»˜è®¤åŒ…æ‹¬äº†Djangoè‡ªå¸¦åº”ç”¨ï¼š</p><ul><li><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/contrib/admin/#module-django.contrib.admin"><code>django.contrib.admin</code></a> â€“ <strong>ç®¡ç†å‘˜ç«™ç‚¹</strong>ï¼Œ ä½ å¾ˆå¿«å°±ä¼šä½¿ç”¨å®ƒã€‚</li><li><a href="https://docs.djangoproject.com/zh-hans/3.2/topics/auth/#module-django.contrib.auth"><code>django.contrib.auth</code></a> â€“ <strong>è®¤è¯æˆæƒç³»ç»Ÿ</strong>ã€‚</li><li><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/contrib/contenttypes/#module-django.contrib.contenttypes"><code>django.contrib.contenttypes</code></a> â€“ <strong>å†…å®¹ç±»å‹æ¡†æ¶</strong>ã€‚</li><li><a href="https://docs.djangoproject.com/zh-hans/3.2/topics/http/sessions/#module-django.contrib.sessions"><code>django.contrib.sessions</code></a> â€“ <strong>ä¼šè¯æ¡†æ¶</strong>ã€‚</li><li><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/contrib/messages/#module-django.contrib.messages"><code>django.contrib.messages</code></a> â€“ <strong>æ¶ˆæ¯æ¡†æ¶</strong>ã€‚</li><li><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/contrib/staticfiles/#module-django.contrib.staticfiles"><code>django.contrib.staticfiles</code></a> â€“ <strong>ç®¡ç†é™æ€æ–‡ä»¶çš„æ¡†æ¶</strong>ã€‚</li></ul></li><li><p>é»˜è®¤å¼€å¯çš„åº”ç”¨è‡³å°‘éœ€è¦ä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œå› æ­¤éœ€åœ¨ä½¿ç”¨ä»–ä»¬ä¹‹å‰ï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€äº›è¡¨ï¼š</p><ul><li>```python<br>py manage.py migrate<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">  * `migrate`å‘½ä»¤:  æ£€æŸ¥ [`INSTALLED_APPS`](https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-INSTALLED_APPS) è®¾ç½®ï¼Œä¸ºå…¶ä¸­çš„æ¯ä¸ªåº”ç”¨åˆ›å»ºéœ€è¦çš„æ•°æ®è¡¨ï¼Œè‡³äºå…·ä½“ä¼šåˆ›å»ºä»€ä¹ˆï¼Œè¿™å–å†³äº `mysite/settings.py` è®¾ç½®æ–‡ä»¶å’Œæ¯ä¸ªåº”ç”¨çš„**æ•°æ®åº“è¿ç§»æ–‡ä»¶**</span><br><span class="line"></span><br><span class="line">    * è¯¥å‘½ä»¤ä¼šå°†æ‰€**æ‰§è¡Œ**çš„æ¯ä¸ª**è¿ç§»**æ“ä½œåœ¨ç»ˆç«¯æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">## åˆ›å»ºæ¨¡å‹</span><br><span class="line"></span><br><span class="line">åœ¨Djangoä¸­å†™ä¸€ä¸ªæ•°æ®åº“é©±åŠ¨çš„ Web åº”ç”¨çš„**ç¬¬ä¸€æ­¥**ï¼š==å®šä¹‰æ¨¡å‹==â€”â€”å³**æ•°æ®åº“ç»“æ„è®¾è®¡å’Œé™„åŠ çš„å…¶ä»–å…ƒæ•°æ®**</span><br><span class="line"></span><br><span class="line">&gt; æ¨¡å‹æ˜¯çœŸå®æ•°æ®çš„ç®€å•æ˜ç¡®çš„æè¿°</span><br><span class="line">&gt;</span><br><span class="line">&gt; åŒ…å«äº†å­˜å‚¨çš„æ•°æ®æ‰€å¿…è¦çš„å­—æ®µå’Œè¡Œä¸º</span><br><span class="line"></span><br><span class="line">åœ¨è¯¥åº”ç”¨ä¸­ï¼Œå°†å»ºç«‹ä¸¤ä¸ªæ¨¡å‹ï¼šQuestionå’ŒChoice</span><br><span class="line"></span><br><span class="line">* Questionæ¨¡å‹ï¼šåŒ…æ‹¬ä¸¤ä¸ªå­—æ®µï¼šé—®é¢˜æè¿°å’Œå‘å¸ƒæ—¶é—´</span><br><span class="line">* Choiceæ¨¡å‹ï¼šæœ‰ä¸¤ä¸ªå­—æ®µï¼Œé€‰é¡¹æè¿°å’Œå½“å‰å¾—ç¥¨æ•°ã€‚æ¯ä¸ªChoiceå±äºä¸€ä¸ªé—®é¢˜</span><br><span class="line"></span><br><span class="line">è¿™äº›æ¦‚å¿µéƒ½å¯ä»¥é€šè¿‡ Python ç±»æ¥æè¿°ï¼š</span><br><span class="line"></span><br><span class="line">ç¼–è¾‘ `polls/models.py`:</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line">class Question(models.Model):</span><br><span class="line">    question_text = models.CharField(max_length=200)</span><br><span class="line">    pub_date = models.DateTimeField(&#x27;date published&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Choice(models.Model):</span><br><span class="line">    question = models.ForeignKey(Question, on_delete=models.CASCADE)</span><br><span class="line">    choice_text = models.CharField(max_length=200)</span><br><span class="line">    votes = models.IntegerField(default=0)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ¯ä¸ªæ¨¡å‹éƒ½è¢«è¡¨ç¤ºä¸º <code>django.db.models.Model</code>ç±»çš„å­ç±»</p><ul><li>å­ç±»å†…æœ‰è®¸å¤šç±»å˜é‡ï¼šè¡¨ç¤ºæ¨¡å‹é‡Œçš„ä¸€ä¸ª<strong>æ•°æ®åº“å­—æ®µ</strong></li><li>æ¯ä¸ªå­—æ®µéƒ½æ˜¯ <code>Field</code>ç±»çš„å®ä¾‹ï¼šå°†å‘Šè¯‰Djangoæ¯ä¸ªå­—æ®µè¦å¤„ç†çš„æ•°æ®ç±»å‹<ul><li>å­—ç¬¦å­—æ®µï¼š<code>CharField</code></li><li>æ—¥æœŸæ—¶é—´å­—æ®µï¼š<code>DateTimeField</code></li><li>æ•´å‹å­—æ®µï¼š<code>IntegerField</code></li><li>æ›´å¤š<a href="https://docs.djangoproject.com/zh-hans/3.2/ref/models/fields/#django.db.models.Field"><code>Field</code></a></li></ul></li><li>æ¯ä¸ªFieldç±»çš„å®ä¾‹åä¹Ÿæ˜¯å­—æ®µå</li></ul></li><li><p>å®šä¹‰ä¸€äº› Field ç±»å®ä¾‹ éœ€è¦å‚æ•°ï¼š</p><ul><li><code>CharField</code> éœ€è¦ <code>max_length</code>å‚æ•°ï¼šç”¨äºå®šä¹‰æ•°æ®åº“ç»“æ„ï¼Œä¹Ÿç”¨äºéªŒè¯æ•°æ®</li></ul></li><li><p>æ³¨æ„ï¼Œä½¿ç”¨ <code>ForeignKey</code>å®šä¹‰å…³ç³»</p><ul><li>è¿™å°†å‘Šè¯‰Djangoï¼Œæ¯ä¸€ä¸ª Choice å¯¹è±¡éƒ½å…³è”åˆ°ä¸€ä¸ª Question å¯¹è±¡</li></ul></li></ul><h2 id="æ¿€æ´»æ¨¡å‹"><a href="#æ¿€æ´»æ¨¡å‹" class="headerlink" title="æ¿€æ´»æ¨¡å‹"></a>æ¿€æ´»æ¨¡å‹</h2><ul><li>åˆ›å»ºæ¨¡å‹çš„ä»£ç ç»™äºˆäº† Django è®¸å¤šä¿¡æ¯ï¼š<ul><li>ä¸ºåº”ç”¨åˆ›å»ºæ•°æ®åº“ schemaï¼šç”Ÿæˆ <code>CTEATE TABLE</code>è¯­å¥</li><li>åˆ›å»ºå¯ä»¥ä¸Questionå’ŒChoiceå¯¹è±¡ è¿›è¡Œäº¤äº’çš„<strong>Pythonæ•°æ®åº“API</strong></li></ul></li></ul><p><strong>é¦–å…ˆ</strong>ï¼Œå°† polls åº”ç”¨å®‰è£…è‡³Djangoé¡¹ç›®ä¸­</p><ul><li><p>ä¸ºäº†å·¥ç¨‹ä¸­åŒ…å«è¯¥åº”ç”¨ï¼Œåœ¨ <code>settings.py</code>çš„ <code>INSTALLED_APPS</code> ä¸­æ·»åŠ è®¾ç½®</p><ul><li><p><code>PollsConfig</code> ç±» å†™åœ¨ <code>polls/apps.py</code>ä¸­ï¼Œå› æ­¤ç‚¹å¼è·¯å¾„ï¼š<code>polls.apps.PollsConfig</code></p></li><li><p>åœ¨ <code>settings.py</code>çš„ <code>INSTALLED_APPS</code> å­é¡¹æ·»åŠ ç‚¹å¼è·¯å¾„</p><ul><li>```python<br>INSTALLED_APPS = [<pre><code>&#39;polls.apps.PollsConfig&#39;,&#39;django.contrib.admin&#39;,&#39;django.contrib.auth&#39;,&#39;django.contrib.contenttypes&#39;,&#39;django.contrib.sessions&#39;,&#39;django.contrib.messages&#39;,&#39;django.contrib.staticfiles&#39;,</code></pre>]<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç°åœ¨é¡¹ç›®ä¸­åŒ…å«äº†pollsåº”ç”¨</span><br><span class="line"></span><br><span class="line">**æ¥ç€**ï¼Œè¿è¡Œ `py manage.py makemigrations polls`</span><br><span class="line"></span><br><span class="line">* **ç»ˆç«¯è¾“å‡º**ï¼š</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    Migrations for &#x27;polls&#x27;:</span><br><span class="line">      polls/migrations/0001_initial.py</span><br><span class="line">        - Create model Question</span><br><span class="line">        - Create model Choice</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><code>makemigrations</code> : Django æ£€æµ‹å¯¹æ¨¡å‹æ–‡ä»¶ <code>polls/models.py</code>çš„ä¿®æ”¹ï¼Œå¹¶ä¸”å°†ä¿®æ”¹çš„éƒ¨åˆ†<strong>å­˜å‚¨</strong>ä¸ºä¸€æ¬¡ <strong>è¿ç§»</strong></p><ul><li><strong>è¿ç§»</strong>æ˜¯ Django å¯¹äº<strong>æ¨¡å‹</strong>å®šä¹‰ï¼ˆä¹Ÿå°±æ˜¯ä½ çš„æ•°æ®åº“ç»“æ„ï¼‰çš„<strong>å˜åŒ–çš„å‚¨å­˜å½¢å¼</strong> - å®ƒä»¬å…¶å®ä¹Ÿåªæ˜¯ä¸€äº›ä½ ç£ç›˜ä¸Šçš„æ–‡ä»¶</li></ul></li><li><p><a href="https://docs.djangoproject.com/zh-hans/3.2/ref/django-admin/#django-admin-migrate"><code>migrate</code></a>: è‡ªåŠ¨<strong>æ‰§è¡Œæ•°æ®åº“è¿ç§»</strong> å¹¶ <strong>åŒæ­¥ç®¡ç†æ•°æ®åº“ç»“æ„</strong>çš„å‘½ä»¤ã€‚</p><ul><li>è¿ç§»å‘½ä»¤æ‰§è¡Œçš„SQLè¯­å¥ï¼š<a href="https://docs.djangoproject.com/zh-hans/3.2/ref/django-admin/#django-admin-sqlmigrate"><code>sqlmigrate</code></a>å‘½ä»¤æ¥æ”¶ä¸€ä¸ªè¿ç§»çš„åç§°ï¼Œç„¶åè¿”å›å¯¹åº”çš„SQL<ul><li><code>py manage.py sqlmigrate polls 0001</code></li></ul></li></ul></li><li><p>è¾“å‡ºæ˜¯è¿ç§»æ‰€å¯¹åº”çš„SQLè¯­å¥</p><ul><li>è¡¨åæ˜¯ç”±åº”ç”¨åå’Œæ¨¡å‹åçš„å°å†™å½¢å¼è¿æ¥è€Œæˆ</li><li>ä¸»é”®è¢«è‡ªåŠ¨åˆ›å»º</li></ul></li></ul><p><strong>ç„¶å</strong>ï¼Œè¿è¡Œmigrateå‘½ä»¤ï¼Œå°†åœ¨æ•°æ®åº“é‡Œåˆ›å»º æ–°å®šä¹‰çš„æ¨¡å‹çš„æ•°æ®è¡¨ï¼š<code>py manage.py migrate</code></p><ul><li><p>è¯¥ migrate å‘½ä»¤ä¼šé€‰ä¸­æœªæ‰§è¡Œè¿‡çš„è¿ç§»å¹¶åº”ç”¨åœ¨æ•°æ®åº“ä¸­</p></li><li><blockquote><p>è¿ç§»æ˜¯éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒèƒ½è®©ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­æŒç»­çš„æ”¹å˜æ•°æ®åº“ç»“æ„è€Œä¸éœ€è¦é‡æ–°åˆ é™¤å’Œåˆ›å»ºè¡¨ - å®ƒä¸“æ³¨äºä½¿æ•°æ®åº“å¹³æ»‘å‡çº§è€Œä¸ä¼šä¸¢å¤±æ•°æ®</p></blockquote></li><li><p>æ³¨æ„ï¼šæ”¹å˜æ¨¡å‹éœ€è¦ä¸‰æ­¥ï¼š</p><ul><li>ç¼–è¾‘ models æ–‡ä»¶ï¼Œæ”¹å˜æ¨¡å‹</li><li>è¿è¡Œ <code>makemigrations</code> å‘½ä»¤ç”Ÿæˆè¿ç§»</li><li>è¿è¡Œ migrate å‘½ä»¤ åº”ç”¨è¿ç§»</li></ul></li></ul><h2 id="åˆè¯•-API"><a href="#åˆè¯•-API" class="headerlink" title="åˆè¯• API"></a>åˆè¯• API</h2><p><strong>é¦–å…ˆ</strong>ï¼Œè¿›å…¥ äº¤äº’å¼ Python å‘½ä»¤è¡Œï¼Œä»¥ä½¿ç”¨Djangoåˆ›å»ºçš„å„ç§ API</p><ul><li><code>py manage.py shell</code><ul><li>manage ä¼šè®¾ç½® <code>DJANGO_SETTINGS_MODULE</code> ç¯å¢ƒå˜é‡ï¼Œæ ¹æ® <code>settings</code>æ–‡ä»¶è®¾ç½®åŒ…çš„å¯¼å…¥è·¯å¾„</li></ul></li></ul><p><strong>ç„¶å</strong>ï¼Œå°è¯• <a href="https://docs.djangoproject.com/zh-hans/3.2/topics/db/queries/">æ•°æ®åº“ API</a></p><ul><li>```<br>from polls.models import Choice, Question  # Import the model classes we just wrote.<br>from django.utils import timezone<br>q = Question(question_text=â€Whatâ€™s new?â€, pub_date=timezone.now())<br>q.save()<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* ç¼–è¾‘æ¨¡å‹ä»£ç ï¼Œå¯ä»¥æ›´äº†è§£æ¨¡å‹å¯¹è±¡çš„ç»†èŠ‚ï¼šç»™æ¨¡å‹å¢åŠ  `__str__()`æ–¹æ³•</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    from django.db import models</span><br><span class="line"></span><br><span class="line">    class Question(models.Model):</span><br><span class="line">        # ...</span><br><span class="line">        def __str__(self):</span><br><span class="line">            return self.question_text</span><br><span class="line"></span><br><span class="line">    class Choice(models.Model):</span><br><span class="line">        # ...</span><br><span class="line">        def __str__(self):</span><br><span class="line">            return self.choice_text</span><br></pre></td></tr></table></figure></li><li>```<br>Question.objects.filter(id=1)<br>q = Question.objects.get(pk=1)<br>q.choice_set.all()<br>q.choice_set.create(choice_text=â€™Not muchâ€™, votes=0)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Django ç®¡ç†é¡µé¢</span><br><span class="line"></span><br><span class="line">&gt; ä¸ºä½ çš„å‘˜å·¥æˆ–å®¢æˆ·ç”Ÿæˆä¸€ä¸ªç”¨æˆ·æ·»åŠ ï¼Œä¿®æ”¹å’Œåˆ é™¤å†…å®¹çš„åå°æ˜¯ä¸€é¡¹ç¼ºä¹åˆ›é€ æ€§å’Œä¹å‘³çš„å·¥ä½œã€‚å› æ­¤ï¼ŒDjango å…¨è‡ªåŠ¨åœ°æ ¹æ®æ¨¡å‹åˆ›å»ºåå°ç•Œé¢ã€‚</span><br><span class="line"></span><br><span class="line">ç®¡ç†é¡µé¢é»˜è®¤å¼€å¯</span><br><span class="line"></span><br><span class="line">### åˆ›å»ºç®¡ç†å‘˜è´¦å·</span><br><span class="line"></span><br><span class="line">* `py manage.py createsuperuser`</span><br><span class="line"></span><br><span class="line">### å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line">* `py manage.py runserver`</span><br><span class="line">* è®¿é—®ï¼š`http://127.0.0.1:8000/admin/`</span><br><span class="line"></span><br><span class="line">### ç®¡ç†ç«™ç‚¹é¡µé¢</span><br><span class="line"></span><br><span class="line">* è¿›å…¥ç®¡ç†é¡µé¢çš„ç´¢å¼•é¡µåï¼Œå¯ç¼–è¾‘çš„ `Groups`å’Œ `Users` æ˜¯Django å¼€å‘çš„è®¤è¯æ¡†æ¶</span><br><span class="line"></span><br><span class="line">### å‘ç®¡ç†é¡µé¢åŠ å…¥æŠ•ç¥¨åº”ç”¨</span><br><span class="line"></span><br><span class="line">* éœ€è¦åœ¨ç®¡ç†æ–‡ä»¶ `polls/admin.py`åŠ å…¥åº”ç”¨çš„æ¨¡å‹</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    from django.contrib import admin</span><br><span class="line"></span><br><span class="line">    from .models import Question</span><br><span class="line"></span><br><span class="line">    admin.site.register(Question)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> å¼€å‘æ¡†æ¶å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django åº”ç”¨ç¬¬ä¸€éƒ¨åˆ†</title>
      <link href="p/497f9043.html"/>
      <url>p/497f9043.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¼–å†™ç¬¬ä¸€ä¸ª-Django-åº”ç”¨ï¼Œç¬¬ä¸€éƒ¨åˆ†"><a href="#ç¼–å†™ç¬¬ä¸€ä¸ª-Django-åº”ç”¨ï¼Œç¬¬ä¸€éƒ¨åˆ†" class="headerlink" title="ç¼–å†™ç¬¬ä¸€ä¸ª Django åº”ç”¨ï¼Œç¬¬ä¸€éƒ¨åˆ†"></a>ç¼–å†™ç¬¬ä¸€ä¸ª Django åº”ç”¨ï¼Œç¬¬ä¸€éƒ¨åˆ†</h1><p>[å®˜æ–¹æ–‡æ¡£](<a href="https://docs.djangoproject.com/zh-hans/3.2/intro/overview/">åˆè¯† Django | Django æ–‡æ¡£ | Django (djangoproject.com)</a>)</p><ul><li><p>ç›®æ ‡ï¼šåˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„æŠ•ç¥¨åº”ç”¨</p><ul><li>è®©äººä»¬ æŸ¥çœ‹å’ŒæŠ•ç¥¨ çš„<strong>å…¬å…±ç«™ç‚¹</strong></li><li>è®©å¼€å‘è€…èƒ½ æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤æŠ•ç¥¨çš„<strong>ç®¡ç†ç«™ç‚¹</strong></li></ul></li><li><p>ç¯å¢ƒï¼š</p><ul><li><code>pycharm 2019</code></li><li><code>python 3.6</code></li><li><code>Django 3.2.1</code>æ”¯æŒPython å’Œåç»­ç‰ˆæœ¬</li></ul></li></ul><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><ul><li><p>åˆå§‹åŒ–è®¾ç½®ï¼š</p><ul><li>ç”ŸæˆDjangoé¡¹ç›®éœ€è¦çš„ è®¾ç½®é¡¹é›†åˆï¼šæ•°æ®åº“é…ç½®ã€Django é…ç½®å’Œåº”ç”¨ç¨‹åºé…ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite(é¡¹ç›®å)</span><br></pre></td></tr></table></figure><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¡»æå‰å°†django-adminåŠ å…¥ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯ <code>Pycharm Professional</code> æ‰€ä»¥å¯ä»¥ä¸€é”®åˆ›å»ºDjangoé¡¹ç›®</li></ul></li><li><p><code>startproject</code> æ‰€åˆ›å»ºçš„ï¼š</p><ul><li>![image-20210507200938455](E:\LearningNotes\python\ç¼–å†™ç¬¬ä¸€ä¸ª Django åº”ç”¨ï¼Œç¬¬ä¸€éƒ¨åˆ†.assets\image-20210507200938455-1620389380924.png)</li></ul></li><li><p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li>æœ€å¤–å±‚ <code>mysite</code>ï¼šæ˜¯æˆ‘ä»¬é¡¹ç›®çš„å®¹å™¨</li><li><code>manage.py</code>: å¯ä»¥è®©æˆ‘ä»¬ç”¨å„ç§æ–¹å¼ç®¡ç†é¡¹ç›®çš„å‘½ä»¤è¡Œå·¥å…·</li><li>å†…å±‚ <code>mysite</code>ï¼šæ˜¯ä¸€ä¸ªçº¯PythonåŒ…ã€‚å½“éœ€è¦å¼•ç”¨å…¶å†…éƒ¨çš„å†…å®¹æ—¶çš„åŒ…å</li><li><code>mysite/__init__.py</code>: ç©ºæ–‡ä»¶ï¼Œå‘ŠçŸ¥Pythonè¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªPythonåŒ…</li><li><code>mysite/settings.py</code>: Django é¡¹ç›®çš„é…ç½®æ–‡ä»¶</li><li><code>mysite/urls.py</code>: é¡¹ç›®çš„ URL å£°æ˜ï¼Œç±»ä¼¼äºç½‘ç«™çš„ç›®å½•</li><li><code>mysite/asgi.py</code>: ä½œä¸ºä½ çš„é¡¹ç›®çš„è¿è¡Œåœ¨ ASGI å…¼å®¹çš„ Web æœåŠ¡å™¨ä¸Šçš„å…¥å£</li><li><code>mysite/wsgi.py</code>: ä½œä¸ºä½ çš„é¡¹ç›®çš„è¿è¡Œåœ¨ WSGI å…¼å®¹çš„WebæœåŠ¡å™¨ä¸Šçš„å…¥å£</li></ul></li></ul><h2 id="ç”¨äºå¼€å‘çš„ç®€æ˜“æœåŠ¡å™¨"><a href="#ç”¨äºå¼€å‘çš„ç®€æ˜“æœåŠ¡å™¨" class="headerlink" title="ç”¨äºå¼€å‘çš„ç®€æ˜“æœåŠ¡å™¨"></a>ç”¨äºå¼€å‘çš„ç®€æ˜“æœåŠ¡å™¨</h2><ul><li><p>æµ‹è¯•é¡¹ç›®æ˜¯å¦åˆ›å»ºæˆåŠŸï¼šåœ¨é¡¹ç›®å®¹å™¨ç›®å½•è¿è¡Œ <code>py manage.py runserver</code></p></li><li><p>å‡ºç°æŠ¥é”™ï¼š</p><ul><li><p>```<br>Traceback (most recent call last):<br>  File â€œmanage.pyâ€, line 22, in <module></p><pre><code>main()</code></pre><p>  File â€œmanage.pyâ€, line 18, in main</p><pre><code>execute_from_command_line(sys.argv)</code></pre><p>  File â€œE:\Django_tests\mysite\venv\lib\site-packages\django\core\management_<em>init</em>_.pyâ€, line 419,<br> in execute_from_command_line</p><pre><code>utility.execute()</code></pre><p>  File â€œE:\Django_tests\mysite\venv\lib\site-packages\django\core\management_<em>init</em>_.pyâ€, line 363,<br> in execute</p><pre><code>settings.INSTALLED_APPS</code></pre><p>  File â€œE:\Django_tests\mysite\venv\lib\site-packages\django\conf_<em>init</em>_.pyâ€, line 82, in <strong>getatt<br>r</strong></p><pre><code>self._setup(name)</code></pre><p>  File â€œE:\Django_tests\mysite\venv\lib\site-packages\django\conf_<em>init</em>_.pyâ€, line 69, in _setup</p><pre><code>self._wrapped = Settings(settings_module)</code></pre><p>  File â€œE:\Django_tests\mysite\venv\lib\site-packages\django\conf_<em>init</em>_.pyâ€, line 170, in _<em>init</em><br>_</p><pre><code>mod = importlib.import_module(self.SETTINGS_MODULE)</code></pre><p>  File â€œC:\Users\Light\AppData\Local\Programs\Python\Python36\lib\importlib_<em>init</em>_.pyâ€, line 126,<br>in import_module</p><pre><code>return _bootstrap._gcd_import(name[level:], package, level)</code></pre><p>  File â€œ<frozen importlib._bootstrap>â€œ, line 994, in _gcd_import<br>  File â€œ<frozen importlib._bootstrap>â€œ, line 971, in _find_and_load<br>  File â€œ<frozen importlib._bootstrap>â€œ, line 955, in _find_and_load_unlocked<br>  File â€œ<frozen importlib._bootstrap>â€œ, line 665, in _load_unlocked<br>  File â€œ<frozen importlib._bootstrap_external>â€œ, line 678, in exec_module<br>  File â€œ<frozen importlib._bootstrap>â€œ, line 219, in _call_with_frames_removed<br>  File â€œE:\Django_tests\mysite\mysite\settings.pyâ€, line 57, in <module></p><pre><code>&#39;DIRS&#39;: [os.path.join(BASE_DIR, &#39;templates&#39;)]</code></pre><p>NameError: name â€˜osâ€™ is not defined</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* åˆ†æï¼š`xxxx\settings.py` `os not defined`, å¯èƒ½æ˜¯è¯¥æ–‡ä»¶æœªå¯¼å…¥osæ¨¡å—å¯¼å…¥åæˆåŠŸ</span><br><span class="line">* solutionï¼šå¯¼å…¥åæˆåŠŸ</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    Watching for file changes with StatReloader</span><br><span class="line">    Performing system checks...</span><br><span class="line"></span><br><span class="line">    System check identified no issues (0 silenced).</span><br><span class="line"></span><br><span class="line">    You have 18 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.</span><br><span class="line">    Run &#x27;python manage.py migrate&#x27; to apply them.</span><br><span class="line">    May 07, 2021 - 20:20:20</span><br><span class="line">    Django version 3.2.2, using settings &#x27;mysite.settings&#x27;</span><br><span class="line">    Starting development server at http://127.0.0.1:8000/</span><br><span class="line">    Quit the server with CTRL-BREAK.</span><br></pre></td></tr></table></figure></li></ul></li><li><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯åŠ¨äº†Djangoè‡ªå¸¦çš„ <strong>ç”¨äºå¼€å‘çš„ç®€æ˜“æœåŠ¡å™¨</strong></p><ul><li><p>ç”¨çº¯pythonå†™çš„è½»é‡çº§WebæœåŠ¡å™¨</p></li><li><p>æ³¨æ„ï¼š</p><ul><li><blockquote><p><strong>åƒä¸‡ä¸è¦</strong> å°†è¿™ä¸ªæœåŠ¡å™¨ç”¨äºå’Œç”Ÿäº§ç¯å¢ƒç›¸å…³çš„ä»»ä½•åœ°æ–¹ã€‚è¿™ä¸ªæœåŠ¡å™¨åªæ˜¯ä¸ºäº†å¼€å‘è€Œè®¾è®¡çš„ã€‚(æˆ‘ä»¬åœ¨ Web æ¡†æ¶æ–¹é¢æ˜¯ä¸“å®¶ï¼Œåœ¨ Web æœåŠ¡å™¨æ–¹é¢å¹¶ä¸æ˜¯ã€‚)</p></blockquote></li></ul></li></ul></li><li><p>æ›´æ¢ç«¯å£ï¼š</p><ul><li>é»˜è®¤runserverå‘½ä»¤ä¼šå°†æœåŠ¡å™¨è®¾ç½®ä¸ºç›‘å¬æœ¬æœºå†…éƒ¨ IP çš„8000ç«¯å£</li><li>è‹¥æƒ³æ›´æ¢ç«¯å£ï¼š<ul><li><code>py manage.py runserver 8080</code></li></ul></li><li>è‹¥æƒ³ä¿®æ”¹æœåŠ¡å™¨ç›‘å¬çš„ IPï¼š<ul><li><code>py manage.py runserver 0:8080</code></li></ul></li></ul></li></ul><h2 id="åˆ›å»ºæŠ•ç¥¨åº”ç”¨"><a href="#åˆ›å»ºæŠ•ç¥¨åº”ç”¨" class="headerlink" title="åˆ›å»ºæŠ•ç¥¨åº”ç”¨"></a>åˆ›å»ºæŠ•ç¥¨åº”ç”¨</h2><ul><li><p>å¼€å‘ç¯å¢ƒâ€”â€”é¡¹ç›®é…ç½®åˆå§‹åŒ–æˆåŠŸ</p></li><li><blockquote><p>Django ä¸­ï¼Œæ¯ä¸€ä¸ªåº”ç”¨éƒ½æ˜¯ä¸€ä¸ªPythonåŒ…</p></blockquote></li><li><blockquote><p><strong>é¡¹ç›® VS åº”ç”¨</strong></p><p>é¡¹ç›®å’Œåº”ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p><strong>åº”ç”¨</strong>æ˜¯ä¸€ä¸ªä¸“é—¨åšæŸä»¶äº‹çš„<strong>ç½‘ç»œåº”ç”¨ç¨‹åº</strong>â€”â€”æ¯”å¦‚åšå®¢ç³»ç»Ÿï¼Œæˆ–è€…å…¬å…±è®°å½•çš„æ•°æ®åº“ï¼Œæˆ–è€…å°å‹çš„æŠ•ç¥¨ç¨‹åºã€‚</p><p><strong>é¡¹ç›®</strong>åˆ™æ˜¯<strong>ä¸€ä¸ªç½‘ç«™ä½¿ç”¨çš„é…ç½®å’Œåº”ç”¨çš„é›†åˆ</strong>ã€‚é¡¹ç›®å¯ä»¥åŒ…å«å¾ˆå¤šä¸ªåº”ç”¨ã€‚åº”ç”¨å¯ä»¥è¢«å¾ˆå¤šä¸ªé¡¹ç›®ä½¿ç”¨ã€‚</p></blockquote></li><li><p>åº”ç”¨å¯ä»¥å­˜æ”¾ä»»ä½•Pythonè·¯å¾„ä¸­å®šä¹‰çš„è·¯å¾„</p></li><li><p>åœ¨æ­¤é¡¹ç›®ï¼Œé¡»åœ¨ <code>manage.py</code>åŒçº§ç›®å½•ä¸‹åˆ›å»ºåº”ç”¨</p><ul><li>å¯ä»¥ä½œä¸ºé¡¶çº§æ¨¡å—å¯¼å…¥ï¼Œè€Œä¸æ˜¯mysiteçš„å­æ¨¡å—</li></ul></li><li><p>åˆ›å»ºåº”ç”¨ï¼š</p><ul><li>```<br>py manage.py startapp polls<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">* å‘½ä»¤ä¼šåˆ›å»ºpollsç›®å½•ï¼šåŒ…å«äº†åº”ç”¨çš„å…¨éƒ¨å†…å®¹</span><br><span class="line"></span><br><span class="line">  * ![image-20210507203223797](E:\LearningNotes\python\ç¼–å†™ç¬¬ä¸€ä¸ª Django åº”ç”¨ï¼Œç¬¬ä¸€éƒ¨åˆ†.assets\image-20210507203223797-1620390751727.png)</span><br><span class="line"></span><br><span class="line">## ç¼–å†™ç¬¬ä¸€ä¸ªè§†å›¾</span><br><span class="line"></span><br><span class="line">é¦–å…ˆï¼š</span><br><span class="line"></span><br><span class="line">* åœ¨ `polls/views.py`ï¼š</span><br><span class="line"></span><br><span class="line">  * ```python</span><br><span class="line">    from django.http import HttpResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def index(request):</span><br><span class="line">        return HttpResponse(&quot;Hello, world. You&#x27;re at the polls index.&quot;)</span><br></pre></td></tr></table></figure></li></ul><p>å…¶æ¬¡ï¼š</p></li><li><p>éœ€è¦å°†ä¸€ä¸ª <code>URL</code> æ˜ å°„åˆ°å®ƒ</p><ul><li>å› æ­¤éœ€è¦ <code>URLconf</code></li></ul></li><li><p>åœ¨pollsç›®å½•é‡Œåˆ›å»º <code>urls.py</code>æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ï¼š</p><ul><li><p>```python<br>from django.urls import path</p><p>from . import views</p><p>urlpatterns = [</p><pre><code>path(&#39;&#39;, views.index, name=&#39;index&#39;),</code></pre><p>]</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç„¶åï¼š</span><br><span class="line"></span><br><span class="line">* åœ¨æ ¹ `URLconf`æ–‡ä»¶ä¸­ï¼ŒæŒ‡å®šåˆšåˆšåˆ›å»ºçš„ `polls.urls`æ¨¡å—</span><br><span class="line"></span><br><span class="line">  * åœ¨ `mysite/urls.py`ä¸­çš„ `urlpatterns`åˆ—è¡¨ä¸­æ’å…¥ `include()`</span><br><span class="line">  * ```python</span><br><span class="line">    from django.contrib import admin</span><br><span class="line">    from django.urls import include, path</span><br><span class="line"></span><br><span class="line">    urlpatterns = [</span><br><span class="line">        path(&#x27;polls/&#x27;, include(&#x27;polls.urls&#x27;)),</span><br><span class="line">        path(&#x27;admin/&#x27;, admin.site.urls),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å‡½æ•° include å…è®¸å¼•ç”¨å…¶ä»– <code>URLconfs</code>, å½“åŒ…æ‹¬å…¶ä»– <code>URL</code>æ¨¡å¼æ—¶ï¼Œå°±ä½¿ç”¨è¯¥å‡½æ•°</p><ul><li>å½“ Django é‡åˆ°è¯¥å‡½æ•°æ—¶ï¼Œä¼šæˆªæ–­ä¸æ­¤é¡¹åŒ¹é…çš„ URL éƒ¨åˆ†ï¼Œå°†å‰©ä½™çš„å­—ç¬¦ä¸²å‘é€åˆ° <code>URLconf</code>ä¸€å…±è¿›ä¸€æ­¥å¤„ç†</li><li><blockquote><p>æˆ‘ä»¬è®¾è®¡ <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/urls/#django.urls.include"><code>include()</code></a> çš„ç†å¿µæ˜¯ä½¿å…¶å¯ä»¥å³æ’å³ç”¨ã€‚å› ä¸ºæŠ•ç¥¨åº”ç”¨æœ‰å®ƒè‡ªå·±çš„ URLconf( <code>polls/urls.py</code> )ï¼Œä»–ä»¬èƒ½å¤Ÿè¢«æ”¾åœ¨ â€œ/polls/â€œ ï¼Œ â€œ/fun_polls/â€œ ï¼Œâ€/content/polls/â€œï¼Œæˆ–è€…å…¶ä»–ä»»ä½•è·¯å¾„ä¸‹ï¼Œè¿™ä¸ªåº”ç”¨éƒ½èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚</p></blockquote></li></ul></li><li><p>ç°åœ¨å·²ç»å°†indexè§†å›¾ å¤©åŠ å…¥äº†æ ¹URLconf</p></li></ul><p>æœ€åï¼Œ</p><ul><li><p>éªŒè¯æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼š<code>py manage.py runserver</code></p></li><li><p>è®¿é—®ï¼š<code>http://localhost:8000/polls/ </code></p><ul><li>æˆåŠŸ</li></ul></li></ul><h2 id="å‡½æ•°pathï¼ˆï¼‰"><a href="#å‡½æ•°pathï¼ˆï¼‰" class="headerlink" title="å‡½æ•°pathï¼ˆï¼‰"></a>å‡½æ•°pathï¼ˆï¼‰</h2><p>å‡½æ•°çš„å››ä¸ªå‚æ•°ï¼š</p><ul><li><p>å¿…é¡»å‚æ•°ï¼š<code>route</code> <code>view</code></p></li><li><p>å¯é€‰å‚æ•°ï¼š<code>kwargs</code> <code>name</code></p></li><li><p><code>route</code>: ä¸€ä¸ªåŒ¹é… URL çš„å‡†åˆ™ï¼ˆç±»ä¼¼äºæ­£åˆ™è¡¨è¾¾å¼ï¼‰</p><ul><li><blockquote><p>å½“ Django å“åº”ä¸€ä¸ª<strong>è¯·æ±‚request</strong>æ—¶ï¼Œå®ƒä¼šä» <code>urlpatterns</code> çš„ç¬¬ä¸€é¡¹å¼€å§‹ï¼ŒæŒ‰é¡ºåºä¾æ¬¡åŒ¹é…åˆ—è¡¨ä¸­çš„é¡¹ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„é¡¹ã€‚</p></blockquote></li><li><blockquote><p>è¿™äº›å‡†åˆ™ä¸ä¼šåŒ¹é… GET å’Œ POST å‚æ•°æˆ–åŸŸåã€‚ä¾‹å¦‚ï¼ŒURLconf åœ¨å¤„ç†è¯·æ±‚ <code>https://www.example.com/myapp/</code> æ—¶ï¼Œå®ƒä¼šå°è¯•åŒ¹é… <code>myapp/</code> ã€‚å¤„ç†è¯·æ±‚ <code>https://www.example.com/myapp/?page=3</code> æ—¶ï¼Œä¹Ÿåªä¼šå°è¯•åŒ¹é… <code>myapp/</code>ã€‚</p></blockquote></li></ul></li><li><p><code>view</code>: å½“Django æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…çš„å‡†åˆ™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªç‰¹å®šçš„è§†å›¾å‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ª <code>HttpRequest</code>å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</p><ul><li>è¢«â€œæ•è·â€çš„å‚æ•°ä»¥<strong>å…³é”®å­—å‚æ•°</strong>çš„å½¢å¼ä¼ å…¥</li></ul></li><li><p><code>kwargs</code>: ä»»æ„å…³é”®å­—å‚æ•° å¯ä»¥ä½œä¸ºä¸€ä¸ªå­—å…¸ä¼ é€’ç»™ç›®æ ‡è§†å›¾å‡½æ•°ï¼Œæœ¬æ­¤é¡¹ç›®ä¸ä¼šä½¿ç”¨</p></li><li><p><code>name</code>:</p><ul><li><blockquote><p>ä¸º URL å–åèƒ½ä½¿ä½ åœ¨ Django çš„<strong>ä»»æ„åœ°æ–¹å”¯ä¸€åœ°å¼•ç”¨</strong>å®ƒï¼Œå°¤å…¶æ˜¯åœ¨æ¨¡æ¿ä¸­ã€‚è¿™ä¸ªæœ‰ç”¨çš„ç‰¹æ€§å…è®¸ä½ åªæ”¹ä¸€ä¸ªæ–‡ä»¶å°±èƒ½å…¨å±€åœ°ä¿®æ”¹æŸä¸ª URL æ¨¡å¼ã€‚</p></blockquote></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> å¼€å‘æ¡†æ¶å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lab1</title>
      <link href="p/bf869091.html"/>
      <url>p/bf869091.html</url>
      
        <content type="html"><![CDATA[<h1 id="lab1"><a href="#lab1" class="headerlink" title="lab1"></a>lab1</h1><p>[toc]</p><h1 id="1-Producer-Consumer-problem"><a href="#1-Producer-Consumer-problem" class="headerlink" title="1 Producer-Consumer problem"></a>1 Producer-Consumer problem</h1><p><a href="https://blog.csdn.net/zhou1021jian/article/details/71514738">å‚è€ƒåšå®¢1</a></p><p><a href="https://www.jianshu.com/p/a2ade02979d1">å‚è€ƒåšå®¢2</a></p><p><a href="https://www.cnblogs.com/linhaostudy/p/7554942.html">å‚è€ƒåšå®¢3</a></p><p><a href="">å‚è€ƒåšå®¢4</a></p><ul><li>ä¹Ÿç§° æœ‰é™ç¼“å†²é—®é¢˜ <code>Bounded-buffer problem</code></li><li>å¤šçº¿ç¨‹åŒæ­¥çš„é—®é¢˜</li></ul><h2 id="1-1-ä¿¡å·é‡é…åˆäº’æ–¥é”"><a href="#1-1-ä¿¡å·é‡é…åˆäº’æ–¥é”" class="headerlink" title="1.1 ä¿¡å·é‡é…åˆäº’æ–¥é”"></a>1.1 ä¿¡å·é‡é…åˆäº’æ–¥é”</h2><ul><li><p>ä¿¡å·é‡ç‰¹æ€§ï¼š</p><ul><li>éè´Ÿæ•´æ•°ï¼Œå¯¹å…±äº«èµ„æºå’Œçº¿ç¨‹çš„æ§åˆ¶</li><li>é€šè¿‡ä¿¡å·é‡çš„çº¿ç¨‹ä¼šä½¿å¾—ä¿¡å·é‡å‡ä¸€ï¼Œå½“ä¸ºé›¶æ—¶ï¼Œæ‰€æœ‰è¯•å›¾é€šè¿‡çš„çº¿ç¨‹ç­‰å¾…</li><li>æ“ä½œï¼š<ul><li>Waitï¼šçº¿ç¨‹è°ƒç”¨è¯¥å‡½æ•°æ—¶<ul><li>è¦ä¹ˆå¾—åˆ°èµ„æºå¹¶å°†ä¿¡å·é‡å‡ä¸€</li><li>è¦ä¹ˆçº¿ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°ä¿¡å·é‡å¤§äºé›¶</li></ul></li><li>Releaseï¼šåœ¨ä¿¡å·é‡ä¸Šæ‰§è¡ŒåŠ ä¸€<ul><li>é‡Šæ”¾ç”±ä¿¡å·é‡å®ˆæŠ¤çš„èµ„æº</li></ul></li></ul></li></ul></li><li><p>Waitï¼ŒReleaseå†Linuxä¸­ï¼š</p><ul><li><code>int sem_wait(sem_t* sem)</code></li><li><code>int sem_post(sem_t* sem)</code></li></ul></li><li><p>é’ˆå¯¹è¯¥é—®é¢˜ï¼š</p><ul><li>è®¾å®šä¸¤ä¸ªä¿¡å·é‡ï¼š<ul><li><code>empty</code>: ç©ºæ§½çš„ä¸ªæ•°</li><li><code>full</code>: å æœ‰çš„ä¸ªæ•°</li></ul></li><li>ç”Ÿäº§è€… å‘ä»»åŠ¡é˜Ÿåˆ— æ”¾èµ„æºæ—¶ï¼Œè°ƒç”¨ <code>sem_wait(&amp;empty)</code> æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œ<ul><li>è‹¥æ»¡ï¼Œå°±é˜»å¡ï¼Œç›´åˆ°æœ‰æ¶ˆè´¹è€…ä»é˜Ÿåˆ—é‡Œå–èµ„æº</li><li>è‹¥ä¸æ»¡ï¼Œå°±æ”¾å…¥èµ„æºï¼Œå¹¶é€šçŸ¥æ¶ˆè´¹è€…å–</li></ul></li><li>æ¶ˆè´¹è€… ä»ä»»åŠ¡é˜Ÿåˆ— å–èµ„æºæ—¶ï¼Œè°ƒç”¨ <code>sem_wait(&amp;full)</code> æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦å·²ç©º<ul><li>è‹¥å·²ç©ºï¼Œå°±é˜»å¡ï¼Œç›´åˆ°ç”Ÿäº§è€…å‘é‡Œé¢æ”¾å…¥èµ„æºåœ¨è‹é†’</li><li>è‹¥éç©ºï¼Œå°±å–èµ„æºï¼Œå¹¶é€šçŸ¥ç”Ÿäº§è€…æ¥æ”¾å…¥</li></ul></li></ul></li><li><p>äº’æ–¥é”æ˜¯å¯¹ä»»åŠ¡é˜Ÿåˆ—è¿›è¡Œä¿æŠ¤</p></li><li><p>```C</p><p>#include &lt;stdio.h&gt;<br>#include &lt;pthread.h&gt;            //pthread_mutex_t, pthread_mutex_lock/unlock, pthread_tï¼Œpthread_create(), pthread_join()<br>#include &lt;semaphore.h&gt;            //sem_wait, sem_post, sem_init</p><p>#define MAX 5  //é˜Ÿåˆ—é•¿åº¦</p><p>pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;<br>sem_t full;     //å¡«å……çš„ä¸ªæ•°<br>sem_t empty;     //ç©ºæ§½çš„ä¸ªæ•°</p><p>int top = 0;     //é˜Ÿå°¾<br>int bottom = 0;  //é˜Ÿå¤´</p><p>void* produce(void* arg)<br>{</p><pre><code>int i;for ( i = 0; i &lt; MAX*2; i++)&#123;    printf(&quot;producer is preparing data\n&quot;);    sem_wait(&amp;empty);//è‹¥ç©ºæ§½ä¸ªæ•°ä½äº0é˜»å¡    pthread_mutex_lock(&amp;mutex);    top = (top+1) % MAX;    printf(&quot;now top is %d\n&quot;, top);    pthread_mutex_unlock(&amp;mutex);    sem_post(&amp;full);&#125;return (void*)1;</code></pre><p>}</p><p>void* consume(void* arg)<br>{</p><pre><code>int i;for ( i = 0; i &lt; MAX*2; i++)&#123;    printf(&quot;consumer is preparing data\n&quot;);    sem_wait(&amp;full);//è‹¥å¡«å……ä¸ªæ•°ä½äº0é˜»å¡    pthread_mutex_lock(&amp;mutex);    bottom = (bottom+1) % MAX;    printf(&quot;now bottom is %d\n&quot;, bottom);    pthread_mutex_unlock(&amp;mutex);    sem_post(&amp;empty);&#125;return (void*)2;</code></pre><p>}</p><p>int main(int argc, char *argv[])<br>{</p><pre><code>pthread_t thid1;        //åˆ›å»ºå››ä¸ªçº¿ç¨‹ï¼Œunsigned long intpthread_t thid2;pthread_t thid3;pthread_t thid4;int  ret1;int  ret2;int  ret3;int  ret4;sem_init(&amp;full, 0, 0);            //åˆå§‹åŒ–ä¿¡å·é‡fullä¸º0sem_init(&amp;empty, 0, MAX);        //åˆå§‹åŒ–ä¿¡å·é‡emptyä¸ºMAX=5pthread_create(&amp;thid1, NULL, produce, NULL);        //pthread_create(&amp;thid2, NULL, consume, NULL);pthread_create(&amp;thid3, NULL, produce, NULL);pthread_create(&amp;thid4, NULL, consume, NULL);pthread_join(thid1, (void**)&amp;ret1);                    //pthread_join(thid2, (void**)&amp;ret2);pthread_join(thid3, (void**)&amp;ret3);pthread_join(thid4, (void**)&amp;ret4);return 0;</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * è‹¥å°† `sem_wait()`ï¼Œ `sem_post()`æ”¾äºlockå’Œunlockä¹‹é—´</span><br><span class="line">  * æ­»é”ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½é¢„çŸ¥çº¿ç¨‹è¿›å…¥å…±äº«åŒºé¡ºåºï¼Œå¦‚æœæ¶ˆè´¹è€…çº¿ç¨‹å…ˆå¯¹mutexåŠ é”ï¼Œå¹¶è¿›å…¥ï¼Œsem_wait()å‘ç°é˜Ÿåˆ—ä¸ºç©ºï¼Œé˜»å¡ï¼Œè€Œç”Ÿäº§è€…åœ¨å¯¹mutexåŠ é”æ—¶ï¼Œå‘ç°å·²ä¸Šé”ä¹Ÿé˜»å¡ï¼ŒåŒæ–¹æ°¸è¿œæ— æ³•å”¤é†’å¯¹æ–¹ã€‚</span><br><span class="line">* </span><br><span class="line">* `sem_init`: é•¿æ•´å‹</span><br><span class="line"></span><br><span class="line">  * `int sem_init(sem_t *sem, int pshared, unsigned int value);`</span><br><span class="line">    * sem: æŒ‡å‘ä¿¡å·é‡ç»“æ„çš„ä¸€ä¸ªæŒ‡é’ˆ</span><br><span class="line">    * psharedä¸ä¸ºé›¶æ—¶ï¼Œä¿¡å·é‡åœ¨è¿›ç¨‹é—´å…±äº«ï¼Œå¦åˆ™åªèƒ½ä¸ºå½“å‰è¿›ç¨‹çš„çº¿ç¨‹å…±äº«</span><br><span class="line">    * valueä¸ºä¿¡å·é‡çš„åˆå§‹å€¼</span><br><span class="line"></span><br><span class="line">## 1.2 Pthread</span><br><span class="line"></span><br><span class="line">* linuxä¸‹ç”¨Cè¯­è¨€å¼€å‘å¤šçº¿ç¨‹ç¨‹åºï¼ŒLinuxç³»ç»Ÿä¸‹çš„å¤šçº¿ç¨‹éµå¾ªPOSIXçº¿ç¨‹æ¥å£ï¼Œç§°ä¸ºpthreadã€‚</span><br><span class="line">* `pthread_create()`ï¼šåˆ›å»ºå­çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">  * Linux ä¸‹åˆ›å»ºçš„çº¿ç¨‹çš„ API æ¥å£</span><br><span class="line">  * `int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg);`</span><br><span class="line">  * å‚æ•°ï¼š</span><br><span class="line">    * thread: è¿”å›æˆåŠŸæ—¶ï¼Œç”± thread æŒ‡å‘çš„å†…å­˜å•å…ƒè¢«è®¾ç½®ä¸ºæ–°åˆ›å»ºçº¿ç¨‹çš„çº¿ç¨‹ID</span><br><span class="line">    * attrï¼šçº¿ç¨‹å±æ€§ï¼Œé»˜è®¤ä½¿ç”¨NULL</span><br><span class="line">    * start_routine: æ–°åˆ›å»ºçš„çº¿ç¨‹ä» `start_routine`å‡½æ•°çš„åœ°å€å¼€å§‹è¿è¡Œï¼Œè¯¥å‡½æ•°åªæœ‰ä¸€ä¸ªä¸‡èƒ½å‚æ•°argï¼Œå¦‚æœéœ€è¦å‘ `start_rutine`å‡½æ•°ä¼ é€’çš„å‚æ•°ä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆéœ€è¦æŠŠè¿™äº›å‚æ•°æ”¾åˆ°ä¸€ä¸ªç»“æ„ä¸­ï¼Œç„¶åæŠŠè¿™ä¸ªç»“æ„çš„åœ°å€ä½œä¸ºargçš„å‚æ•°ä¼ å…¥ã€‚</span><br><span class="line">    * arg: å­çº¿ç¨‹å¤„ç†å‡½æ•°çš„å‚æ•°</span><br><span class="line">  * ç®€å•æ¥è¯´ï¼š</span><br><span class="line">    * ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŒ‡å‘çº¿ç¨‹ [æ ‡è¯†ç¬¦](http://baike.baidu.com/item/æ ‡è¯†ç¬¦)çš„ [æŒ‡é’ˆ](http://baike.baidu.com/item/æŒ‡é’ˆ)ã€‚</span><br><span class="line">    * ç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥è®¾ç½®çº¿ç¨‹å±æ€§ã€‚</span><br><span class="line">    * ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯çº¿ç¨‹è¿è¡Œå‡½æ•°çš„èµ·å§‹åœ°å€ã€‚</span><br><span class="line">    * æœ€åä¸€ä¸ªå‚æ•°æ˜¯è¿è¡Œå‡½æ•°çš„å‚æ•°ã€‚</span><br><span class="line">  * è¿”å›å€¼ï¼š</span><br><span class="line">    * æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›é”™è¯¯å·</span><br><span class="line">* `pthread_join()`: å­çº¿ç¨‹åˆå…¥ä¸»çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">  * ` int pthread_join(pthread_t thread, void **retval);`</span><br><span class="line">  * ä¸»çº¿ç¨‹é˜»å¡ï¼Œç­‰å¾…å­çº¿ç¨‹ç»“æŸï¼Œç„¶åå›æ”¶å­çº¿ç¨‹èµ„æº</span><br><span class="line">  * ä»¥é˜»å¡çš„æ–¹å¼ï¼Œç­‰å¾…threadæŒ‡å®šçš„çº¿ç¨‹ç»“æŸ</span><br><span class="line">    * å½“å‡½æ•°è¿”å›æ—¶ï¼Œè¢«ç­‰å¾…çº¿ç¨‹çš„èµ„æºè¢«å›æ”¶</span><br><span class="line">    * è‹¥çº¿ç¨‹å·²ç»ç»“æŸï¼Œè¯¥å‡½æ•°ç«‹å³è¿”å›</span><br><span class="line">  * å‚æ•°ï¼š</span><br><span class="line">    * thread : çº¿ç¨‹æ ‡è¯†ç¬¦ï¼Œçº¿ç¨‹id</span><br><span class="line">    * retvalï¼šæŒ‡å‘ä¸€ä¸ªæŒ‡å‘è¢«è¿æ¥çº¿ç¨‹çš„è¿”å›ç çš„æŒ‡é’ˆçš„æŒ‡é’ˆ</span><br><span class="line">  * è¿”å›å€¼ï¼Œ0æˆåŠŸï¼Œé”™è¯¯å·å¤±è´¥</span><br><span class="line">* &gt; åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹ç”Ÿæˆå¹¶èµ·åŠ¨äº†å­çº¿ç¨‹ï¼Œå¦‚æœå­çº¿ç¨‹é‡Œè¦è¿›è¡Œå¤§é‡çš„è€—æ—¶çš„è¿ç®—ï¼Œä¸»çº¿ç¨‹å¾€å¾€å°†äºå­çº¿ç¨‹ä¹‹å‰ç»“æŸï¼Œä½†æ˜¯å¦‚æœä¸»çº¿ç¨‹å¤„ç†å®Œå…¶ä»–çš„äº‹åŠ¡åï¼Œéœ€è¦ç”¨åˆ°å­çº¿ç¨‹çš„å¤„ç†ç»“æœï¼Œä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹éœ€è¦ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæˆä¹‹åå†ç»“æŸï¼Œè¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°pthread_join()æ–¹æ³•äº†ã€‚</span><br><span class="line">  &gt; å³pthread_join()çš„ä½œç”¨å¯ä»¥è¿™æ ·ç†è§£ï¼šä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹çš„ç»ˆæ­¢ã€‚ä¹Ÿå°±æ˜¯åœ¨å­çº¿ç¨‹è°ƒç”¨äº†pthread_join()æ–¹æ³•åé¢çš„ä»£ç ï¼Œåªæœ‰ç­‰åˆ°å­çº¿ç¨‹ç»“æŸäº†æ‰èƒ½æ‰§è¡Œã€‚</span><br><span class="line">  &gt;</span><br><span class="line">* å¦‚æœæ²¡æœ‰åŠ pthread_join()æ–¹æ³•ï¼Œmainçº¿ç¨‹é‡Œé¢ç›´æ¥å°±æ‰§è¡Œèµ·èµ°äº†ï¼ŒåŠ äº†ä¹‹åæ˜¯ç­‰å¾…çº¿ç¨‹æ‰§è¡Œäº†ä¹‹åæ‰æ‰§è¡Œçš„åé¢çš„ä»£ç ã€‚</span><br><span class="line"></span><br><span class="line">![image-20210505195248476](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210505195248476.png)</span><br><span class="line"></span><br><span class="line">![image-20210505195202511](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210505195202511.png)</span><br><span class="line"></span><br><span class="line"># 2 ç”¨å…±äº«å†…å­˜çš„å¤šè¿›ç¨‹å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</span><br><span class="line"></span><br><span class="line">## .1 å‰ç½®çŸ¥è¯†</span><br><span class="line"></span><br><span class="line">### 2.1.1 å…±äº«å†…å­˜</span><br><span class="line"></span><br><span class="line">  å…±äº«å†…å­˜æ˜¯ä¸åŒè¿›ç¨‹é—´ä¸ºäº†é€šä¿¡è€Œç”³è¯·çš„å¯ä»¥è¢«ä¸åŒè¿›ç¨‹å…±åŒè®¿é—®çš„å†…å­˜åŒºåŸŸã€‚åœ¨Linux ä¸­ï¼Œå…±äº«å†…å­˜çš„ç›¸å…³APIç”±POSIXæä¾›ã€‚</span><br><span class="line"></span><br><span class="line">\1. shmgetå‡½æ•°ï¼š</span><br><span class="line"></span><br><span class="line">å‡½æ•°åŸå‹ï¼šint shmget(key_t key, size_t size, int shmflg);</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">  Key: ç”¨äºå…±äº«å†…å­˜å‘½åï¼Œä¸åŒè¿›ç¨‹é€šè¿‡keyè¿›è¡Œå…±äº«å†…å­˜è¯†åˆ«;</span><br><span class="line"></span><br><span class="line">  Size: éœ€è¦çš„å…±äº«å†…å­˜å¤§å°ï¼›</span><br><span class="line"></span><br><span class="line">  shmflg: æƒé™æ ‡å¿—ã€‚Keyæ ‡è¯†çš„å†…å­˜ä¸å­˜åœ¨æ—¶ï¼Œè¯¥å‚æ•°ä¸ºIPC_CREATã€‚</span><br><span class="line"></span><br><span class="line">\2. shmat å‡½æ•°ï¼šåˆ›å»ºå®Œå…±äº«å†…å­˜åï¼Œä¸èƒ½è¢«è¿›ç¨‹è®¿é—®ï¼Œéœ€è¦è°ƒç”¨shmatå¯åŠ¨è¯¥å…±äº«å†…å­˜çš„è®¿é—®ï¼Œå¹¶æŠŠå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´</span><br><span class="line"></span><br><span class="line">å‡½æ•°åŸå‹ï¼švoid *shmat(int shm_id, const void *shm_addr, int shmflg);</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">  Shm_id: shmgetè¿”å›çš„æè¿°ç¬¦</span><br><span class="line"></span><br><span class="line">  Shm_addr: æŒ‡å®šå…±äº«å†…å­˜é“¾æ¥åˆ°å½“å‰è¿›ç¨‹ä¸­çš„åœ°å€ä½ç½®ï¼Œé€šå¸¸ä¸ºç©ºï¼Œè®©ç³»ç»Ÿè‡ªå·±é€‰æ‹©</span><br><span class="line"></span><br><span class="line">  Shmflg: æ ‡å¿—ä½ï¼Œé€šå¸¸ä¸º0</span><br><span class="line"></span><br><span class="line">\3. shmctl å‡½æ•°ï¼šæ§åˆ¶å…±äº«å†…å­˜</span><br><span class="line"></span><br><span class="line">å‡½æ•°åŸå‹ï¼šint shmctl(int shm_id, int command, struct shmid_ds *buf);</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">  Shm_id: åŒä¸Š</span><br><span class="line"></span><br><span class="line">  Command: è¦é‡‡å–çš„æ“ä½œ</span><br><span class="line"></span><br><span class="line">  Buf: ç»“æ„ä½“æŒ‡é’ˆï¼ŒæŒ‡å‘å…±äº«å†…å­˜çš„ shmid_ds ç»“æ„ã€‚</span><br><span class="line"></span><br><span class="line">### 2.1.2 ä¿¡å·é‡</span><br><span class="line"></span><br><span class="line">    ä¿¡å·é‡æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œç¨‹åºå¯¹å…¶è®¿é—®éƒ½æ˜¯åŸå­æ“ä½œï¼Œä¸”åªå…è®¸å¯¹å®ƒè¿›è¡Œç­‰å¾…ï¼ˆå³P(ä¿¡å·å˜é‡))å’Œå‘é€ï¼ˆå³V(ä¿¡å·å˜é‡))ä¿¡æ¯æ“ä½œã€‚æœ€ç®€å•çš„ä¿¡å·é‡æ˜¯åªèƒ½å–0å’Œ1çš„å˜é‡ï¼Œè¿™ä¹Ÿæ˜¯ä¿¡å·é‡æœ€å¸¸è§çš„ä¸€ç§å½¢å¼ï¼Œå«åšäºŒè¿›åˆ¶ä¿¡å·é‡ã€‚è€Œå¯ä»¥å–å¤šä¸ªæ­£æ•´æ•°çš„ä¿¡å·é‡è¢«ç§°ä¸ºé€šç”¨ä¿¡å·é‡ã€‚</span><br><span class="line"></span><br><span class="line">Linuxä¸­å¯¹ä¿¡å·é‡çš„æ“ä½œåœ¨æˆ‘ä»¬å°ç»„çš„è¯¾é¢˜ã€ŠLinuxä¸­ä¿¡å·é‡çš„å®ç°æœºåˆ¶ã€‹ä¸­è¯¦ç»†è®²è¿‡ï¼Œæ¥ä¸‹æ¥ç®€å•ä»‹ç»ï¼š</span><br><span class="line"></span><br><span class="line">å‡½æ•°semgetåˆ›å»ºä¸€ä¸ªæ–°ä¿¡å·é‡æˆ–å–å¾—ä¸€ä¸ªå·²æœ‰ä¿¡å·é‡ï¼›</span><br><span class="line"></span><br><span class="line">å‡½æ•°semop å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œï¼›</span><br><span class="line"></span><br><span class="line">å‡½æ•° semctl æ§åˆ¶ä¿¡å·é‡çš„é”€æ¯ç­‰</span><br><span class="line"></span><br><span class="line">## 2.2 æ€è·¯</span><br><span class="line"></span><br><span class="line">  è¯¥ Task æ¶‰åŠè¿›ç¨‹ç®¡ç†å’Œè¿›ç¨‹é—´å…±äº«å†…å­˜é€šä¿¡ï¼Œå¯å°†mainå‡½æ•°å½“æˆä¸»è¿›ç¨‹ï¼Œforkå‡ºå¤šä¸ªå­è¿›ç¨‹ï¼Œå¹¶è´Ÿè´£åˆ›å»ºå…±äº«å†…å­˜å’Œä¿¡å·é‡ã€‚å°†å­è¿›ç¨‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œé€šè¿‡ä¿¡å·é‡å¯¹å…±äº«å†…å­˜è¿›è¡Œäº’æ–¥è¯»å†™ã€‚</span><br><span class="line"></span><br><span class="line">  ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„æ“ä½œéƒ½ç±»ä¼¼äºTask1ä¸­çš„æ“ä½œï¼Œä¸å†èµ˜è¿°ã€‚</span><br><span class="line"></span><br><span class="line"># 3 æµ‹è¯•æœ‰å/åŒ¿åï¼Œå…±æœ‰/ç§æœ‰å†…å­˜æ˜ å°„</span><br><span class="line"></span><br><span class="line">## å†…å­˜æ˜ å°„</span><br><span class="line"></span><br><span class="line">## .1 å‰ç½®çŸ¥è¯†</span><br><span class="line"></span><br><span class="line">    å†…å­˜æ˜ å°„ mmap æ˜¯Linux å†…æ ¸çš„ä¸€ä¸ªé‡è¦æœºåˆ¶ï¼Œå’Œè™šæ‹Ÿå†…å­˜ç®¡ç†ä»¥åŠæ–‡ä»¶IOéƒ½æœ‰ç›´æ¥å…³ç³»ã€‚</span><br><span class="line"></span><br><span class="line">  Linux çš„è™šæ‹Ÿå†…å­˜ç®¡ç†æ˜¯åŸºäº mmap å®ç°çš„ï¼Œvm_area_struct åœ¨mmap åˆ›å»ºæ—¶åˆ›å»ºï¼Œä»£è¡¨äº†ä¸€æ®µè¿ç»­çš„è™šæ‹Ÿåœ°å€ï¼Œè¿™äº›è™šæ‹Ÿåœ°å€ç›¸åº”çš„æ˜ å°„åˆ°ä¸€ä¸ªåå¤‡æ–‡ä»¶æˆ–è€…åŒ¿åæ–‡ä»¶çš„è™šæ‹Ÿé¡µã€‚ä¸€ä¸ªvm_area_structæ˜ å°„åˆ°ä¸€ç»„è¿ç»­çš„é¡µè¡¨é¡¹ï¼Œé¡µè¡¨é¡¹æ˜ å°„ç‰©ç†å†…å­˜page frameï¼Œè¿™æ ·æ–‡ä»¶å’Œç‰©ç†å†…å­˜é¡µç›¸æ˜ å°„ã€‚</span><br><span class="line"></span><br><span class="line">### 3.1.1 mmap å’Œ è™šæ‹Ÿå†…å­˜ç®¡ç†</span><br><span class="line"></span><br><span class="line">  Linuxå†…æ ¸çš„ç”¨æˆ·è¿›ç¨‹è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼šå†…æ ¸å®šä¹‰äº†mm_struct ç»“æ„è¡¨ç¤ºä¸€ä¸ªç”¨æˆ·è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜åœ°å€ç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line">  mm**_**struct**ç»“æ„**ï¼š</span><br><span class="line"></span><br><span class="line">    ![image-20210507110545709](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210507110545709.png)</span><br><span class="line"></span><br><span class="line">\1.  start_code, end_code: æŒ‡å®šäº†è¿›ç¨‹çš„ä»£ç æ®µçš„è¾¹ç•Œï¼›</span><br><span class="line"></span><br><span class="line">\2.  start_data, end_data: æŒ‡å®šäº†è¿›ç¨‹æ•°æ®æ®µçš„è¾¹ç•Œï¼›</span><br><span class="line"></span><br><span class="line">\3.  start_brkæŒ‡å®šäº†å †çš„èµ·å§‹åœ°å€; brkæŒ‡å®šäº†å †çš„ç»“æŸä½ç½®ï¼›</span><br><span class="line"></span><br><span class="line">\4.  start_stack: æŒ‡å®šäº†ç«™çš„èµ·å§‹ä½ç½®ï¼›</span><br><span class="line"></span><br><span class="line">\5.  mmap_base: æŒ‡å®šäº†ç”¨æˆ·è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ ç”¨ä½œå†…å­˜æ˜ å°„éƒ¨åˆ†çš„åœ°å€çš„åŸºåœ°å€ï¼Œ</span><br><span class="line"></span><br><span class="line">\6.  task_size: æŒ‡å®šäº†ç”¨æˆ·è¿›ç¨‹åœ°å€ç©ºé—´çš„é•¿åº¦ã€‚</span><br><span class="line"></span><br><span class="line">è¿›ç¨‹çš„mm_struct é™¤äº†åŒ…å«**è¿›ç¨‹è™šæ‹Ÿå†…å­˜åœ°å€ç©ºé—´å¸ƒå±€**ï¼Œè¿˜åŒ…å«äº†**è™šæ‹Ÿå†…å­˜åŒºåŸŸ**vm_area_structä¿¡æ¯ã€‚è™šæ‹Ÿå†…å­˜åŒºåŸŸæ˜¯å†…æ ¸ç®¡ç†ç”¨æˆ·è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„æ–¹å¼ï¼Œæ•°æ®æ®µã€ä»£ç æ®µã€å…±äº«åº“ç­‰éƒ½æ˜¯é€šè¿‡vm_area_atructç®¡ç†ã€‚</span><br><span class="line"></span><br><span class="line">vm_area_structç»“æ„ï¼š</span><br><span class="line"></span><br><span class="line"> ![image-20210507110550648](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210507110550648.png)</span><br><span class="line"></span><br><span class="line">\1. vm_start, vm_endè¡¨ç¤ºåŒºåŸŸçš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œç¡®å®šäº†åŒºåŸŸçš„è¾¹ç•Œã€‚ä¸¤ä¸ªvm_area_structä¸ä¼šå‡ºç°äº¤å‰çš„æƒ…å†µ</span><br><span class="line"></span><br><span class="line">\2. vm_page_prot è¡¨ç¤ºè¿™ä¸ªåŒºåŸŸçš„é¡µçš„è®¿é—®æƒé™</span><br><span class="line"></span><br><span class="line">\3. sharedç»“æ„å¤„ç†æœ‰åå¤‡æ–‡ä»¶çš„å†…å­˜æ˜ å°„ï¼Œå’Œåå¤‡æ–‡ä»¶çš„address_spaceåœ°å€ç©ºé—´å…³è”èµ·æ¥</span><br><span class="line"></span><br><span class="line">\4. anon_vma_node, anon_vmaå¤„ç†åŒ¿åæ–‡ä»¶å…±äº«å†…å­˜æ˜ å°„çš„æƒ…å†µï¼Œæ˜ å°„åˆ°åŒä¸€ç‰©ç†å†…å­˜é¡µçš„æ˜ å°„éƒ½ä¿å­˜åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­</span><br><span class="line"></span><br><span class="line">\5. vm_pgoff, vm_fileéƒ½æ˜¯å¤„ç†æœ‰åå¤‡æ–‡ä»¶å†…å­˜æ˜ å°„çš„æƒ…å†µï¼Œè·å¾—è¯¥æ˜ å°„åœ¨æ–‡ä»¶çš„é¡µåç§»é‡ï¼Œä»¥åŠæ‰“å¼€æ–‡ä»¶fileå®ä¾‹çš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">## 3.2 mmap çš„å››ç§ç±»å‹</span><br><span class="line"></span><br><span class="line">mmapåˆ†ä¸º**åå¤‡æ–‡ä»¶çš„æ˜ å°„**å’Œ**åŒ¿åæ–‡ä»¶çš„æ˜ å°„**ï¼Œè¿™ä¸¤ç§æ˜ å°„åˆæœ‰**ç§æœ‰æ˜ å°„å’Œå…±äº«æ˜ å°„**ä¹‹åˆ†ï¼Œæ‰€ä»¥mmapå¯ä»¥åˆ›å»º4ç§ç±»å‹çš„æ˜ å°„</span><br><span class="line"></span><br><span class="line">\1. **åå¤‡æ–‡ä»¶çš„å…±äº«æ˜ å°„**ï¼Œå¤šä¸ªè¿›ç¨‹çš„vm_area_structæŒ‡å‘åŒä¸€ä¸ªç‰©ç†å†…å­˜åŒºåŸŸï¼Œä¸€ä¸ªè¿›ç¨‹å¯¹æ–‡ä»¶å†…å®¹çš„ä¿®æ”¹ï¼Œä¼šè¢«å…¶ä»–è¿›ç¨‹å¯è§ã€‚å¯¹æ–‡ä»¶å†…å®¹çš„ä¿®æ”¹ä¼šè¢«å†™å›åˆ°åå¤‡æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line"> ![image-20210507110514289](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210507110514289.png)</span><br><span class="line"></span><br><span class="line">\2. **åå¤‡æ–‡ä»¶çš„ç§æœ‰æ˜ å°„**ï¼Œå¤šä¸ªè¿›ç¨‹çš„vm_area_structæŒ‡å‘åŒä¸€ä¸ªç‰©ç†å†…å­˜åŒºåŸŸï¼Œé‡‡ç”¨å†™æ—¶æ‹·è´çš„æ–¹å¼ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹å¯¹æ–‡ä»¶å†…å®¹åšä¿®æ”¹ï¼Œä¸ä¼šè¢«å…¶ä»–è¿›ç¨‹çœ‹åˆ°ã€‚å¦å¤–å¯¹æ–‡ä»¶å†…çš„ä¿®æ”¹ä¹Ÿä¸ä¼šè¢«å†™å›åˆ°åå¤‡æ–‡ä»¶ã€‚å½“å†…å­˜ä¸å¤Ÿéœ€è¦è¿›è¡Œé¡µå›æ”¶æ—¶ï¼Œç§æœ‰æ˜ å°„çš„é¡µè¢«äº¤æ¢åˆ°äº¤æ¢åŒºã€‚ä¸€èˆ¬ç”¨åœ¨åŠ è½½å…±äº«ä»£ç åº“</span><br><span class="line"></span><br><span class="line"> ![image-20210507110518143](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210507110518143.png)</span><br><span class="line"></span><br><span class="line">\3. **åŒ¿åæ–‡ä»¶çš„å…±äº«æ˜ å°„**ï¼Œå†…æ ¸åˆ›å»ºä¸€ä¸ªåˆå§‹éƒ½æ˜¯0çš„ç‰©ç†å†…å­˜åŒºåŸŸï¼Œç„¶åå¤šä¸ªè¿›ç¨‹çš„vm_area_structæŒ‡å‘è¿™ä¸ªå…±äº«çš„ç‰©ç†å†…å­˜åŒºåŸŸï¼Œå¯¹è¯¥åŒºåŸŸå†…å®¹çš„ä¿®æ”¹å¯¹æ‰€æœ‰è¿›ç¨‹å¯è§ã€‚åŒ¿åæ–‡ä»¶åœ¨é¡µå›æ”¶æ—¶è¢«äº¤æ¢åˆ°äº¤æ¢åŒº</span><br><span class="line"></span><br><span class="line"> ![image-20210507110530695](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210507110530695.png)</span><br><span class="line"></span><br><span class="line">\4. **åŒ¿åæ–‡ä»¶çš„ç§æœ‰æ˜ å°„**ï¼Œå†…æ ¸åˆ›å»ºä¸€ä¸ªåˆå§‹éƒ½æ˜¯0çš„ç‰©ç†å†…å­˜åŒºåŸŸï¼Œå¯¹è¯¥åŒºåŸŸå†…å®¹çš„ä¿®æ”¹åªå¯¹åˆ›å»ºè€…è¿›ç¨‹å¯è§ã€‚åŒ¿åæ–‡ä»¶åœ¨é¡µå›æ”¶æ—¶è¢«äº¤æ¢åˆ°äº¤æ¢åŒºã€‚malloc()åº•å±‚æ˜¯ç”¨äº†åŒ¿åæ–‡ä»¶çš„ç§æœ‰æ˜ å°„æ¥åˆ†é…å¤§å—å†…å­˜ã€‚</span><br><span class="line"></span><br><span class="line"> ![image-20210507110535432](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210507110535432.png)</span><br><span class="line"></span><br><span class="line"># 4 å…±äº«åº“çš„åˆ›å»ºå’Œä½¿ç”¨</span><br><span class="line"></span><br><span class="line">## 4.1 å‰ç½®çŸ¥è¯†ï¼šæºä»£ç åˆ°è¿è¡Œç¨‹åºçš„è¿‡ç¨‹</span><br><span class="line"></span><br><span class="line">1. é¢„å¤„ç†ï¼šå¯¹æ‰€æœ‰é¢„å¤„ç†æŒ‡ä»¤è¿›è¡Œå¤„ç†ã€‚ä»¥#å¼€å§‹çš„è¯­å¥</span><br><span class="line">2. ç¼–è¯‘ï¼šé€šå¸¸æŒ‡ ç¨‹åºæ„å»ºçš„è¿‡ç¨‹ï¼Œç§°ä¸º `compilation proper`, å°†cæºä»£ç æ–‡ä»¶è½¬æ¢æˆobjectæ–‡ä»¶</span><br><span class="line">3. è¿æ¥ï¼šå°† objectæ–‡ä»¶å’Œåº“ ä¸²è”èµ·æ¥ï¼Œç§°ä¸ºå¯æ‰§è¡Œç¨‹åº</span><br><span class="line">   1. é™æ€åº“å·²ç»æ¤å…¥ç¨‹åºä¸­</span><br><span class="line">   2. å…±äº«åº“ï¼Œåªåœ¨ç¨‹åºä¸­å¯¹å…¶å¼•ç”¨</span><br><span class="line">4. åŠ è½½ï¼šåŠ è½½ å‘ç”Ÿåœ¨å¯æ‰§è¡Œç¨‹åºå¯åŠ¨æ—¶ã€‚</span><br><span class="line">   1. é¦–å…ˆï¼Œæ‰«æç¨‹åºï¼Œæ¥å¼•ç”¨å…±äº«åº“</span><br><span class="line">   2. ç„¶åæ‰€æœ‰å¼•ç”¨éƒ½ç«‹å³ç”Ÿæ•ˆï¼Œå¯¹åº”çš„åº“ä¹Ÿè¢«æ˜ å°„åˆ°ç¨‹åºä¸­</span><br><span class="line"></span><br><span class="line">* ä¸€ä¸ªç¨‹åºå‡½æ•°åº“ï¼šä¸€ä¸ªæ–‡ä»¶åŒ…å«äº†ä¸€äº›ç¼–è¯‘å¥½çš„ä»£ç å’Œæ•°æ®ï¼Œå¯ä¾›å…¶ä»–ç¨‹åºä½¿ç”¨</span><br><span class="line">* å¯ä»¥ä½¿å¾—æ•´ä¸ªç¨‹åºæ›´åŠ æ¨¡å—åŒ–ï¼Œæ›´å®¹æ˜“é‡æ–°ç¼–è¯‘ï¼Œæ–¹ä¾¿å‡çº§</span><br><span class="line">* ç¨‹åºå‡½æ•°åº“åˆ†ä¸º3ç±»ï¼š</span><br><span class="line">  * é™æ€å‡½æ•°åº“(static libraries): åœ¨ç¨‹åºæ‰§è¡Œå‰å°±åŠ å…¥åˆ°äº†ç›®æ ‡ç¨‹åºä¸­</span><br><span class="line">  * å…±äº«å‡½æ•°åº“(shared libraries)ï¼š`.so`</span><br><span class="line">  * åŠ¨æ€åŠ è½½å‡½æ•°åº“(dynamically loaded libraries)ï¼š`.dll`, ä¸å…±äº«å‡½æ•°åº“æ˜¯ä¸€æ ·çš„ï¼Œåœ¨l Windows ä¸­å«åŠ¨æ€åŠ è½½å‡½æ•°åº“</span><br><span class="line"></span><br><span class="line">## 4.2 é™æ€å‡½æ•°åº“</span><br><span class="line"></span><br><span class="line">### 4.2.1 ç”Ÿæˆé™æ€å‡½æ•°åº“</span><br><span class="line"></span><br><span class="line">* ç®€å•çš„ä¸€ä¸ªæ™®é€šçš„ç›®æ ‡æ–‡ä»¶çš„é›†åˆï¼Œ`.a`åç¼€æ–‡ä»¶</span><br><span class="line">* å…è®¸ç¨‹åºå‘˜æŠŠç¨‹åº link èµ·æ¥è€Œä¸ç”¨é‡æ–°ç¼–è¯‘ä»£ç ï¼ŒèŠ‚çœäº†é‡æ–°ç¼–è¯‘ä»£ç çš„æ—¶é—´</span><br><span class="line">  * å¦‚ä»Šè¯¥ä¼˜åŠ¿ä¸å†é‚£ä¹ˆæ˜æ˜¾</span><br><span class="line">* é™æ€å‡½æ•°åº“å¯¹å¼€å‘è€…æ¥è¯´è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä¾‹å¦‚ä½ æƒ³æŠŠè‡ªå·±æä¾›çš„å‡½æ•°ç»™åˆ«äººä½¿ç”¨ï¼Œä½†æ˜¯åˆæƒ³å¯¹å‡½æ•°çš„æºä»£ç è¿›è¡Œä¿å¯†</span><br><span class="line">* ç†è®ºä¸Šè¯´ï¼Œä½¿ç”¨ELFæ ¼å¼çš„é™æ€åº“å‡½æ•°ç”Ÿæˆçš„ä»£ç å¯ä»¥æ¯”ä½¿ç”¨å…±äº«å‡½æ•°åº“ï¼ˆæˆ–è€…åŠ¨æ€å‡½æ•°åº“ï¼‰çš„ç¨‹åºè¿è¡Œé€Ÿåº¦ä¸Šå¿«ä¸€äº›ï¼Œå¤§æ¦‚1ï¼5ï¼…ã€‚</span><br><span class="line">* `ar rcs my_library.a file.o file1.o`</span><br><span class="line"></span><br><span class="line">### 4.2.2 ä½¿ç”¨é™æ€å‡½æ•°åº“</span><br><span class="line"></span><br><span class="line">* æŠŠå®ƒä½œä¸ºä½ ç¼–è¯‘å’Œè¿æ¥è¿‡ç¨‹ä¸­çš„ä¸€éƒ¨åˆ†ç”¨æ¥ç”Ÿæˆä½ çš„å¯æ‰§è¡Œä»£ç </span><br><span class="line">* ç”¨gccæ¥ç¼–è¯‘äº§ç”Ÿå¯æ‰§è¡Œä»£ç çš„è¯ï¼Œä½ å¯ä»¥ç”¨â€œ-lâ€å‚æ•°æ¥æŒ‡å®šè¿™ä¸ªåº“å‡½æ•°ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨ldæ¥åšï¼Œä½¿ç”¨å®ƒçš„â€œ-lâ€å’Œâ€œ-Lâ€å‚æ•°é€‰é¡¹ã€‚å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒinfo:gccã€‚</span><br><span class="line"></span><br><span class="line">## 4.3 å…±äº«å‡½æ•°åº“</span><br><span class="line"></span><br><span class="line">* **ä½œç”¨ï¼š**å…±äº«å‡½æ•°åº“ä¸­çš„å‡½æ•°æ˜¯åœ¨å½“ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºåœ¨å¯åŠ¨çš„æ—¶å€™è¢«åŠ è½½</span><br><span class="line">* å¦‚æœä¸€ä¸ªå…±äº«å‡½æ•°åº“æ­£å¸¸å®‰è£…ï¼Œæ‰€æœ‰çš„ç¨‹åºåœ¨é‡æ–°è¿è¡Œçš„æ—¶å€™éƒ½å¯ä»¥è‡ªåŠ¨åŠ è½½æœ€æ–°çš„å‡½æ•°åº“ä¸­çš„å‡½æ•°ã€‚å¯¹äºLinuxç³»ç»Ÿè¿˜æœ‰æ›´å¤šå¯ä»¥å®ç°çš„åŠŸèƒ½ï¼š</span><br><span class="line">  * å‡çº§äº†å‡½æ•°åº“ä½†æ˜¯ä»ç„¶å…è®¸ç¨‹åºä½¿ç”¨è€ç‰ˆæœ¬çš„å‡½æ•°åº“</span><br><span class="line">  * å½“æ‰§è¡ŒæŸä¸ªç‰¹å®šç¨‹åºçš„æ—¶å€™å¯ä»¥è¦†ç›–æŸä¸ªç‰¹å®šçš„åº“æˆ–è€…åº“ä¸­æŒ‡å®šçš„å‡½æ•°</span><br><span class="line">  * å¯ä»¥åœ¨åº“å‡½æ•°è¢«ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¿®æ”¹è¿™äº›å‡½æ•°åº“</span><br><span class="line"></span><br><span class="line">### 4.3.1 çº¦å®š</span><br><span class="line"></span><br><span class="line">* ä¸ºäº†ç¼–å†™çš„å…±äº«å‡½æ•°åº“æ”¯æŒæ‰€æœ‰æœ‰ç”¨çš„ç‰¹æ€§ï¼Œå¿…é¡»éµå¾ªä¸€ç³»åˆ—çº¦å®š</span><br><span class="line"></span><br><span class="line">#### 4.3.1.1 å‘½å</span><br><span class="line"></span><br><span class="line">* æ¯ä¸ªå…±äº«å‡½æ•°åº“çš„**ç‰¹æ®Šåå­—**, ç§°ä½œ `soname`</span><br><span class="line">  * ä»¥ `lib`ä¸ºå‰ç¼€ï¼Œç„¶åæ˜¯å‡½æ•°å</span><br><span class="line">  * ä»¥ `.so`ä¸ºåç¼€</span><br><span class="line">  * æœ€åæ˜¯ç‰ˆæœ¬å·ä¿¡æ¯</span><br><span class="line">* ç‰¹ä¾‹ï¼šéå¸¸åº•å±‚çš„Cåº“å‡½æ•°éƒ½ä¸æ˜¯ä»¥libå¼€å¤´å‘½å</span><br><span class="line">* æ¯ä¸ªå…±äº«å‡½æ•°åº“éƒ½æœ‰ä¸€ä¸ª**çœŸæ­£åå­—**ï¼Œç§°ä¸º `real name`</span><br><span class="line">  * åŒ…å«çœŸæ­£å‡½æ•°ä»£ç çš„æ–‡ä»¶</span><br><span class="line">  * çœŸåæœ‰ä¸€ä¸ªä¸»ç‰ˆæœ¬å·å’Œä¸€ä¸ªå‘è¡Œä¸»ç‰ˆå·ï¼ˆå¯æœ‰å¯æ— ï¼‰</span><br><span class="line">    * çŸ¥é“å®‰è£…äº†ä»€ä¹ˆç‰ˆæœ¬çš„å‡½æ•°åº“</span><br><span class="line">* è¿˜æœ‰ä¸€ä¸ªåå­—ï¼Œ**ç¼–è¯‘å™¨ç¼–è¯‘æ—¶éœ€è¦çš„å‡½æ•°åº“åå­—**ï¼šç®€å•çš„sonameï¼Œä¸åŒ…å«ä»»ä½•ç‰ˆæœ¬å·ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">## 4.4 å‡½æ•°åº“å¦‚ä½•ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">* åŸºäºGNU glibcçš„ç³»ç»Ÿä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªELFæ ¼å¼çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨å¯åŠ¨å’Œè¿è¡Œä¸€ä¸ªprogram loader</span><br><span class="line"></span><br><span class="line">  * å¯¹äºLinux ç³»ç»Ÿï¼Œloaderçš„åå­—æ˜¯ `/lib/ld-linux.so.Xï¼ˆç‰ˆæœ¬å·ï¼‰`</span><br><span class="line">  * loaderå¯åŠ¨åï¼Œä¼šload å…¶ä»–æœ¬ç¨‹åºè¦ä½¿ç”¨çš„å…±äº«åº“</span><br><span class="line"></span><br><span class="line">## 4.5 åˆ›å»ºä¸€ä¸ªå…±äº«åº“</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">* `foo.h`: å®šä¹‰æ¥å£ï¼Œè¿æ¥åŠ¨æ€åº“</span><br><span class="line"></span><br><span class="line">  * ![image-20210506205836103](E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210506205836103-1620305918992.png)</span><br><span class="line">  * ```</span><br><span class="line">    #ifndef foo_h__</span><br><span class="line">    #define foo_h__</span><br><span class="line"></span><br><span class="line">    extern void foo(void);</span><br><span class="line"></span><br><span class="line">    #endif  // foo_h__</span><br></pre></td></tr></table></figure></li><li><p><code>foo.c</code>ï¼šå¯¹æ¥å£foo()çš„å®ç°</p><ul><li><img src="E:\4th_term\æ“ä½œç³»ç»ŸOS\Lab1\lab1.assets\image-20210506205941576.png" alt="image-20210506205941576"></li><li>```<br>#include &lt;stdio.h&gt;</li></ul></li></ul><pre><code>void foo(void)&#123;    puts(&quot;Hello, I&#39;m a shared library&quot;);&#125;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* `main.c`ï¼š åº“çš„é©±åŠ¨ç¨‹åº</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    #include &lt;stdio.h&gt;</span><br><span class="line">    #include &quot;foo.h&quot;</span><br><span class="line"></span><br><span class="line">    int main(void)</span><br><span class="line">    &#123;</span><br><span class="line">        puts(&quot;This is a shared library test...&quot;);</span><br><span class="line">        foo();</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre><ul><li><p>é¦–å…ˆï¼Œç¼–è¯‘ä½ç½®æ— å…³ä»£ç ï¼Œå³åˆ›å»ºobjectæ–‡ä»¶</p><ul><li>é€šè¿‡ <code>gcc -fPIC</code>å‚æ•°åŠ å…¥åˆ°å…±äº«å‡½æ•°åº“ä¸­ï¼š<code>PIC</code>: ä½ç½®æ— å…³ä»£ç </li></ul></li><li><p>ç„¶åï¼Œå°†å¯¹è±¡æ–‡ä»¶åˆ›å»ºå…±äº«åº“ï¼Œ</p></li><li><p>ä¾‹å¦‚ï¼šåˆ›å»ºa.0, b.o, ç„¶ååˆ›å»ºä¸€ä¸ªåŒ…å«a.o, b.oçš„å…±äº«åº“</p><ul><li><code>gcc -fPIC -g -c -Wall a.c</code></li><li><code>gcc -fPIC -g -c -Wall b.c</code></li><li><code>gcc -shared -WL -libmath.so -o  a.o b.o -lc</code></li></ul></li><li><p>é€šå¸¸ï¼ŒåŠ¨æ€å‡½æ•°åº“çš„ç¬¦å·è¡¨é‡Œé¢åŒ…å«äº†è¿™äº›åŠ¨æ€çš„å¯¹è±¡çš„ç¬¦å·ã€‚è¿™ä¸ªé€‰é¡¹åœ¨åˆ›å»ºELFæ ¼å¼çš„æ–‡ä»¶æ—¶å€™ï¼Œä¼šå°†æ‰€æœ‰çš„ç¬¦å·åŠ å…¥åˆ°åŠ¨æ€ç¬¦å·è¡¨ä¸­ã€‚å¯ä»¥å‚è€ƒldçš„å¸®åŠ©è·å¾—æ›´è¯¦ç»†çš„è¯´æ˜ã€‚</p></li></ul><h2 id="4-6-å®‰è£…å’Œä½¿ç”¨å…±äº«åº“"><a href="#4-6-å®‰è£…å’Œä½¿ç”¨å…±äº«åº“" class="headerlink" title="4.6 å®‰è£…å’Œä½¿ç”¨å…±äº«åº“"></a>4.6 å®‰è£…å’Œä½¿ç”¨å…±äº«åº“</h2><h3 id="æ–¹æ³•ä¸€ï¼šå°†å…±äº«åº“æ‹·è´å…¥æ ‡å‡†ç›®å½•-usr-libæˆ–-usr-local-lib"><a href="#æ–¹æ³•ä¸€ï¼šå°†å…±äº«åº“æ‹·è´å…¥æ ‡å‡†ç›®å½•-usr-libæˆ–-usr-local-lib" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå°†å…±äº«åº“æ‹·è´å…¥æ ‡å‡†ç›®å½•(/usr/libæˆ–/usr/local/lib)"></a>æ–¹æ³•ä¸€ï¼šå°†å…±äº«åº“æ‹·è´å…¥æ ‡å‡†ç›®å½•(/usr/libæˆ–/usr/local/lib)</h3><ul><li>éœ€è¦æœ‰æƒé™</li><li>ä½¿å¾—ç³»ç»Ÿä¸Šæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨è¯¥å…±äº«åº“</li></ul><p>æ–¹æ³•ï¼š</p><ul><li><p>é¦–å…ˆï¼Œä»¥rootæƒé™ï¼Œå°†åº“æ”¾åˆ°æ ‡å‡†ä½ç½®ï¼ˆ/usr/libæˆ–/usr/local/libï¼‰</p><ul><li><code>sudo cp /home/zihao/task4/libfoo.so /usr/lib</code></li></ul></li><li><p>ç„¶åï¼Œä»¥rootæƒé™æ›´æ–°ç¼“å­˜ï¼Œå‘Šè¯‰åŠ è½½å™¨ åº“æ–‡ä»¶å¯ç”¨ï¼Œ</p><ul><li><code>sudo ldconfig</code>: æ£€æŸ¥ä¸€å—å­˜åœ¨çš„åº“æ–‡ä»¶ï¼Œç„¶ååˆ›å»ºsonameç¬¦å·é“¾æ¥åˆ°çœŸæ­£çš„å‡½æ•°åº“</li><li>å°†åˆ›å»ºé“¾æ¥åˆ°å…±äº«åº“ï¼Œå¹¶ä¸”æ›´æ–°ç¼“å­˜ä»¥ä¾¿å¯ç«‹å³ç”Ÿæ•ˆ</li><li>ä½¿ç”¨ <code>ldconfig -p | grep foo</code>ï¼Œæ ¸å®åˆ›å»ºäº†é“¾æ¥</li></ul></li><li><p>å…¶æ¬¡ï¼Œé‡æ–°è¿æ¥å¯æ‰§è¡Œç¨‹åº</p><ul><li><code>gcc -Wall -o main.c -lfoo</code></li></ul></li><li><p>æœ€åï¼Œè¿è¡Œç¨‹åº</p><ul><li><code>./test</code></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> XDU OSè¯¾ç¨‹è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>17 ç½‘ç»œç¼–ç¨‹</title>
      <link href="p/527606cb.html"/>
      <url>p/527606cb.html</url>
      
        <content type="html"><![CDATA[<h1 id="17-ç½‘ç»œç¼–ç¨‹"><a href="#17-ç½‘ç»œç¼–ç¨‹" class="headerlink" title="17 ç½‘ç»œç¼–ç¨‹"></a>17 ç½‘ç»œç¼–ç¨‹</h1><ul><li><p>ä½¿å¾—<strong>ç¨‹åºç›¸äº’é€šä¿¡</strong></p></li><li><p>æ¼”ç¤ºä½¿ç”¨<code>net</code> åŒ…è¿›è¡Œ<code>TCP</code> å’Œ<code>UDP</code> é€šä¿¡</p></li></ul><h1 id="äº’è”ç½‘åè®®ä»‹ç»"><a href="#äº’è”ç½‘åè®®ä»‹ç»" class="headerlink" title="äº’è”ç½‘åè®®ä»‹ç»"></a>äº’è”ç½‘åè®®ä»‹ç»</h1><ul><li>äº’è”ç½‘çš„æ ¸å¿ƒæ˜¯<strong>ä¸€ç³»åˆ—åè®®</strong>ï¼Œæ€»ç§°ä¸º<code>äº’è”ç½‘åè®®</code> <strong>(Internet Protocol Suite)</strong> <ul><li>è¿™ä¸€ç³»åˆ—åè®®è§„å®šäº†ç”µè„‘å¦‚ä½•<strong>è¿æ¥å’Œç»„ç½‘</strong></li></ul></li></ul><h2 id="äº’è”ç½‘åˆ†å±‚æ¨¡å‹"><a href="#äº’è”ç½‘åˆ†å±‚æ¨¡å‹" class="headerlink" title="äº’è”ç½‘åˆ†å±‚æ¨¡å‹"></a>äº’è”ç½‘åˆ†å±‚æ¨¡å‹</h2><ul><li><p>äº’è”ç½‘çš„é€»è¾‘å®ç°ï¼š</p><ul><li>![osiä¸ƒå±‚æ¨¡å‹](E:\LearningNotes\Go\17 ç½‘ç»œç¼–ç¨‹.assets\osi.png)</li></ul></li><li><p>äº’è”ç½‘æŒ‰ç…§ä¸åŒçš„æ¨¡å‹åˆ’åˆ†ä¸ºä¸åŒçš„åˆ†å±‚</p></li><li><p>æ— è®ºæŒ‰ç…§ä»€ä¹ˆæ¨¡å‹åˆ’åˆ†ï¼šè¶Šå¾€ä¸Šçš„å±‚è¶Š é è¿‘<strong>ç”¨æˆ·</strong>ï¼Œè¶Šå¾€ä¸‹çš„å±‚è¶Š é è¿‘<strong>ç¡¬ä»¶</strong></p></li></ul><h3 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h3><ul><li>ç”µè„‘ä¸å¤–ç•Œäº’è”ç½‘é€šä¿¡<ul><li>å…ˆæŠŠç”µè„‘è¿æ¥ç½‘ç»œï¼šä½¿ç”¨ åŒç»çº¿ã€å…‰çº¤ã€æ— çº¿ç”µæ³¢ ç­‰æ–¹å¼</li></ul></li><li><strong>å®ç‰©ç†å±‚</strong>ï¼šæŠŠç”µè„‘è¿æ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µ</li><li>ä¸»è¦æ˜¯<strong>è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µæ°”ç‰¹æ€§</strong>ï¼Œä½œç”¨æ˜¯è´Ÿè´£ä¼ é€ 0 å’Œ 1 çš„ç”µä¿¡å·</li></ul><h3 id="æ•°æ®é“¾è·¯å±‚"><a href="#æ•°æ®é“¾è·¯å±‚" class="headerlink" title="æ•°æ®é“¾è·¯å±‚"></a>æ•°æ®é“¾è·¯å±‚</h3><ul><li>åŠŸèƒ½ï¼šè§„å®šè§£è¯»ç”µä¿¡å·çš„æ–¹å¼ï¼Œç¡®å®šäº†ç‰©ç†å±‚ä¼ è¾“çš„ 0 å’Œ 1 çš„åˆ†ç»„æ–¹å¼åŠä»£è¡¨æ„ä¹‰<ul><li>ä¾‹å¦‚ï¼šå¤šå°‘ç”µä¿¡å·ç®—ä¸€ç»„ï¼Ÿæ¯ä¸ªä¿¡å·ä½æœ‰ä½•æ„ä¹‰</li></ul></li><li><strong>ä»¥å¤ªç½‘ (Ethernet) çš„åè®®</strong>å æ®äº†ä¸»å¯¼åœ°ä½</li></ul><ul><li>ä»¥å¤ªç½‘ è§„å®šï¼Œ<strong>ä¸€ç»„ç”µä¿¡å·</strong>æ„æˆä¸€ä¸ª<strong>æ•°æ®åŒ…</strong>ï¼Œå«åš <code>å¸§Frame</code> <ul><li><strong>ä¸€ä¸ªå¸§</strong>ï¼š<code>æ ‡å¤´Head</code> å’Œ <code>æ•°æ®Data</code> ç»„æˆ</li><li><strong>æ ‡å¤´ ï¼š</strong>åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›<strong>è¯´æ˜é¡¹</strong>ï¼šå¦‚å‘é€è€…ã€æ¥æ”¶è€…ã€æ•°æ®ç±»å‹ç­‰<ul><li>é•¿åº¦ï¼šå›ºå®š 18 å­—èŠ‚</li></ul></li><li><strong>æ•°æ® ï¼š</strong>æ•°æ®åŒ…çš„<strong>å…·ä½“å†…å®¹</strong><ul><li>é•¿åº¦ï¼šæœ€çŸ­ 46 å­—èŠ‚ï¼Œæœ€é•¿ 1500 å­—èŠ‚</li></ul></li><li>è‹¥æ•°æ®å¾ˆé•¿ï¼Œå¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§å‘é€</li></ul></li></ul><ul><li>æ ‡è¯† å‘é€è€… å’Œ æ¥æ”¶è€…ï¼š</li><li>ä»¥å¤ªç½‘åè®® è§„å®šï¼šè¿å…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡ å¿…é¡»å…·æœ‰ ç½‘å¡æ¥å£<ul><li>æ•°æ®åŒ…å¿…é¡»æ˜¯ä»ä¸€å—ç½‘å¡ï¼Œä¼ é€åˆ°å¦ä¸€å—ç½‘å¡</li><li>ç½‘å¡åœ°å€ï¼Œå°±æ˜¯æ•°æ®åŒ…çš„å‘é€åœ°å€å’Œæ¥æ”¶åœ°å€ï¼Œè¿™å°±æ˜¯<strong>MACåœ°å€</strong></li></ul></li><li>æ¯å—ç½‘å¡æ‹¥æœ‰ç‹¬ä¸€æ— äºŒçš„<strong>MACåœ°å€</strong>ï¼Œé•¿åº¦æ˜¯ 48 ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé€šå¸¸ç”¨ 12 ä¸ªåå…­è¿›åˆ¶æ•°è¡¨ç¤º<ul><li>å‰ 6 ä¸ªåå…­è¿›åˆ¶æ•° æ˜¯å‚å•†ç¼–å·</li><li>å 6 ä¸ªæ˜¯è¯¥å‚å•†çš„ç½‘å¡æµæ°´å·</li></ul></li><li>MAC åœ°å€ï¼šå®šä½ç½‘å¡å’Œæ•°æ®åŒ…çš„è·¯å¾„</li></ul><ul><li>é€šè¿‡ ARP åè®®è·å–æ¥æ”¶æ–¹çš„ MACåœ°å€ï¼Œ</li><li>ä»¥å¤ªç½‘é‡‡ç”¨<code>å¹¿æ’­broadcasting</code> å‘é€æ–¹å¼<ul><li>å‘æœ¬ç½‘ç»œå†…æ‰€æœ‰è®¡ç®—æœºéƒ½å‘é€æ•°æ®åŒ…</li><li>æ¯å°è®¡ç®—æœºè¯»å–è¿™ä¸ªåŒ…çš„ <code>æ ‡å¤´</code> ï¼Œæ‰¾åˆ°æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œ</li><li>ç„¶åä¸è‡ªèº«çš„MACåœ°å€ç›¸æ¯”è¾ƒï¼Œè‹¥ç›¸åŒå°±æ¥å—è¿™ä¸ªåŒ…ï¼›å¦åˆ™å°±ä¸¢å¼ƒ</li></ul></li></ul><h3 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h3><ul><li>æ ¹æ®ä»¥å¤ªç½‘åè®®ï¼Œå¯ä»¥ä¾é  <strong>MAC åœ°å€</strong> å‘å¤–å‘é€æ•°æ®</li><li>ä»¥å¤ªç½‘é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ… é‡å¤§ç¼ºé™·ï¼š<ul><li>æ‰€æœ‰æˆå‘˜äººæ‰‹ä¸€åŒ…ï¼Œä¸ä»…æ•ˆç‡ä½</li><li>è€Œä¸”å‘é€çš„æ•°æ®åªèƒ½å±€é™åœ¨ å‘é€è€… æ‰€åœ¨çš„å­ç½‘ç»œ</li></ul></li></ul><ul><li>åŒºåˆ«å“ªäº› MAC åœ°å€å±äºåŒä¸€ä¸ªå­ç½‘ç»œ<ul><li>è‹¥æ˜¯åŒä¸€ä¸ªå­—ç½‘ç»œï¼Œå°±é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€</li><li>å¦åˆ™å°±é‡‡ç”¨<code>è·¯ç”±</code> æ–¹å¼å‘é€</li></ul></li><li>é’ˆå¯¹è¯¥é—®é¢˜ï¼Œå¯¼è‡´äº†ç½‘ç»œå±‚çš„è¯ç”Ÿï¼Œ</li><li>ç½‘ç»œå±‚çš„ä½œç”¨ï¼šå¼•è¿›ä¸€å¥—æ–°çš„åœ°å€ï¼ŒåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œ<ul><li>è¿™å¥—åœ°å€ å³ç½‘ç»œåœ°å€ï¼Œç®€ç§° ç½‘å€</li></ul></li></ul><ul><li>è‡³æ­¤ï¼Œæ¯å°è®¡ç®—æœºæ‹¥æœ‰ä¸¤ç§åœ°å€ï¼š<ul><li><strong>MAC åœ°å€</strong>ï¼šå°†æ•°æ®åŒ… é€åˆ°è¯¥å­ç½‘ç»œï¼ˆç½‘ç»œåœ°å€ç¡®å®šçš„ï¼‰ä¸­çš„ç›®æ ‡ç½‘å¡<ul><li>ç»‘å®šäºç½‘å¡</li></ul></li><li><strong>ç½‘ç»œåœ°å€</strong>ï¼šå¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å­ç½‘ç»œ<ul><li>ç½‘ç»œç®¡ç†å‘˜åˆ†é…çš„</li></ul></li><li>ä¸¤è€…æ— ä»»ä½•è”ç³»</li></ul></li><li>å…ˆå¤„ç†ç½‘ç»œåœ°å€ï¼Œåœ¨å¤„ç†MACåœ°å€</li></ul><ul><li><strong>IP åè®®</strong>ï¼šè§„å®šç½‘ç»œåœ°å€çš„åè®®<ul><li>æ‰€å®šä¹‰çš„åœ°å€ï¼šIP åœ°å€</li></ul></li><li>ç›®å‰ï¼Œå¹¿æ³›é‡‡ç”¨ <code>IPv4</code> , IP åè®®ç¬¬å››ç‰ˆ<ul><li>ç½‘ç»œåœ°å€ï¼š32 ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆ</li><li>ä¹ æƒ¯ç”¨<strong>åˆ†æˆå››æ®µ</strong>çš„åè¿›åˆ¶æ•°è¡¨ç¤º IP åœ°å€ï¼šä»<code>0.0.0.0åˆ°255.255.255.255</code></li></ul></li></ul><ul><li>IP æ•°æ®åŒ…ï¼šæ ¹æ® IP åè®®å‘é€çš„æ•°æ®<ul><li><strong>æ ‡å¤´</strong>ï¼šç‰ˆæœ¬ã€é•¿åº¦ã€IP åœ°å€<ul><li>é•¿åº¦ï¼š20 - 60å­—èŠ‚</li></ul></li><li><strong>æ•°æ®ï¼š</strong>IP æ•°æ®åŒ…çš„å…·ä½“å†…å®¹</li><li>æ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º 65535 å­—èŠ‚</li></ul></li></ul><h3 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h3><ul><li>æœ‰äº† MAC åœ°å€ å’Œ IP åœ°å€ï¼Œå¯ä»¥åœ¨äº’è”ç½‘ä¸Šçš„ ä»»æ„ä¸¤å°ä¸»æœºå»ºç«‹é€šä¿¡</li><li>åŒä¸€å°ä¸»æœºä¸Šçš„è®¸å¤šç¨‹åº éœ€è¦ä½¿ç”¨ç½‘ç»œæ”¶å‘æ•°æ®åŒ…ï¼Œè¯¥å¦‚ä½•åŒºåˆ†æ•°æ®åŒ…çš„å½’å±</li><li>ä½¿ç”¨å‚æ•° <code>ç«¯å£Port</code> è¡¨ç¤ºæ•°æ®åŒ…ä¾›å“ªä¸ªè¿›ç¨‹ä½¿ç”¨<ul><li>Port æ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·</li><li>æ¯ä¸€ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£</li></ul></li></ul><ul><li>ç«¯å£ æ˜¯<code>0-65535</code> çš„ä¸€ä¸ªæ•´æ•°ï¼Œä½¿ç”¨16 ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤º<ul><li><code>0-1023</code> çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨</li><li>ç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äº 1023 çš„ç«¯å£</li></ul></li><li>æœ‰äº† IP å’Œ ç«¯å£ï¼Œå¯ä»¥å”¯ä¸€ç¡®å®šäº’è”ç½‘ä¸Šä¸€ä¸ªç¨‹åºï¼Œè¿›è€Œå®ç°ç½‘ç»œé—´çš„ç¨‹åºé€šä¿¡</li></ul><ul><li>å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ ç«¯å£ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦æ–°çš„åè®®<ul><li><code>UDP</code> åè®®ï¼šåœ¨æ•°æ®å‰åŠ ä¸Šç«¯å£å·ï¼Œæ€»é•¿åº¦ä¸è¶…è¿‡<code>65535</code> å­—èŠ‚<ul><li>ç¼ºé™·ï¼šæ— æ³•ç¡®å®šå¯¹æ–¹æ˜¯å¦æ”¶åˆ°</li><li>æ ‡å¤´ï¼šå‘å‡ºç«¯å£ï¼Œæ¥æ”¶ç«¯å£<ul><li>8ä¸ªå­—èŠ‚</li></ul></li><li>æ•°æ®ï¼šå…·ä½“å†…å®¹</li></ul></li><li><code>TCP</code> åè®®ï¼šä¿è¯æ•°æ®ä¸ä¸¢å¤±<ul><li>ç¼ºé™·ï¼šè¿‡ç¨‹å¤æ‚ï¼Œå®ç°å›°éš¾ï¼Œæ¶ˆè€—è¾ƒå¤šçš„èµ„æº</li><li>æ— é•¿åº¦é™åˆ¶</li><li>é€šå¸¸é•¿åº¦ä¸è¶…è¿‡ IP æ•°æ®åŒ…çš„é•¿åº¦</li></ul></li></ul></li></ul><h3 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h3><ul><li>åº”ç”¨ç¨‹åºæ”¶åˆ° ä¼ è¾“å±‚æ•°æ®ï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œè§£åŒ…ï¼šï¼ˆéœ€è¦äº‹å…ˆè§„å®šå¥½é€šä¿¡çš„æ•°æ®æ ¼å¼ï¼‰</li><li>åº”ç”¨å±‚çš„ä½œç”¨ï¼šè§„å®šåº”ç”¨ç¨‹åºä½¿ç”¨çš„æ•°æ®æ ¼å¼<ul><li>ä¾‹å¦‚ï¼šTCPåè®®ä¹‹ä¸Šçš„ Emailï¼ŒHTTPï¼ŒFTPç­‰åè®®</li><li>è¿™äº›åè®®ç»„æˆäº†äº’è”ç½‘åè®®çš„åº”ç”¨å±‚</li></ul></li><li>å‘é€æ–¹çš„<code>HTTP</code> æ•°æ®ï¼Œç»è¿‡äº’è”ç½‘çš„ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¼šä¾æ¬¡æ·»åŠ å„å±‚åè®®çš„æ ‡å¤´ä¿¡æ¯ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åŒ…åï¼Œ å†ä¾æ¬¡æ ¹æ®åè®®è§£åŒ…å¾—åˆ°æ•°æ®<ul><li>![HTTPæ•°æ®ä¼ è¾“å›¾è§£](E:\LearningNotes\Go\17 ç½‘ç»œç¼–ç¨‹.assets\httptcpip.png)</li></ul></li></ul><h1 id="socket-ç¼–ç¨‹"><a href="#socket-ç¼–ç¨‹" class="headerlink" title="socket ç¼–ç¨‹"></a>socket ç¼–ç¨‹</h1><ul><li>Socket æ˜¯ BSD UNIX çš„è¿›ç¨‹é€šä¿¡æœºåˆ¶ï¼Œç§°ä½œ<code>å¥—æ¥å­—</code></li><li>ä½œç”¨ï¼šæè¿° IP åœ°å€å’Œç«¯å£ï¼Œä¸€ä¸ªé€šä¿¡é“¾çš„å¥æŸ„</li><li>å¯ä»¥ç†è§£ä¸º <code>TCP/IP</code> ç½‘ç»œçš„ API ï¼Œå®šä¹‰äº†è®¸å¤šå‡½æ•°å’Œä¾‹ç¨‹ï¼Œç¨‹åºå‘˜å¯ä»¥ç”¨å®ƒä»¬å¼€å‘<code>TCP/IP</code> ç½‘ç»œä¸Šçš„åº”ç”¨ç¨‹åº</li><li>ç”µè„‘ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œé€šå¸¸é€šè¿‡<code>å¥—æ¥å­—</code>å‘ç½‘ç»œå‘å‡ºè¯·æ±‚æˆ–è€…åº”ç­”è¯·æ±‚</li></ul><h2 id="socket-å›¾è§£"><a href="#socket-å›¾è§£" class="headerlink" title="socket å›¾è§£"></a>socket å›¾è§£</h2><ul><li><code>Socket</code> æ˜¯åº”ç”¨å±‚ä¸<code>TCP/IP</code> åè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚</li><li>å°†å¤æ‚çš„<code>TCP/IP</code> åè®®æ— éšè—åœ¨<code>Socket</code> åï¼Œ<ul><li>ç”¨æˆ·åªéœ€è°ƒç”¨Socketç›¸å…³å‡½æ•°ï¼Œ</li><li>è®©Socketå»ç»„ç»‡ç¬¦åˆæŒ‡å®šçš„åè®®æ•°æ®ï¼Œç„¶åè¿›è¡Œé€šä¿¡</li></ul></li><li>![socketå›¾è§£](E:\LearningNotes\Go\17 ç½‘ç»œç¼–ç¨‹.assets\socket.png)</li></ul><h2 id="Go-è¯­è¨€å®ç°-TCP-é€šä¿¡"><a href="#Go-è¯­è¨€å®ç°-TCP-é€šä¿¡" class="headerlink" title="Go è¯­è¨€å®ç° TCP é€šä¿¡"></a>Go è¯­è¨€å®ç° TCP é€šä¿¡</h2><h3 id="TCP-åè®®"><a href="#TCP-åè®®" class="headerlink" title="TCP åè®®"></a>TCP åè®®</h3><h3 id="TCP-æœåŠ¡ç«¯"><a href="#TCP-æœåŠ¡ç«¯" class="headerlink" title="TCP æœåŠ¡ç«¯"></a>TCP æœåŠ¡ç«¯</h3><h3 id="TCP-å®¢æˆ·ç«¯"><a href="#TCP-å®¢æˆ·ç«¯" class="headerlink" title="TCP å®¢æˆ·ç«¯"></a>TCP å®¢æˆ·ç«¯</h3><h2 id="TCP-é»åŒ…"><a href="#TCP-é»åŒ…" class="headerlink" title="TCP é»åŒ…"></a>TCP é»åŒ…</h2><h3 id="é»åŒ…ç¤ºä¾‹"><a href="#é»åŒ…ç¤ºä¾‹" class="headerlink" title="é»åŒ…ç¤ºä¾‹"></a>é»åŒ…ç¤ºä¾‹</h3><h3 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°é»åŒ…"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°é»åŒ…" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºç°é»åŒ…"></a>ä¸ºä»€ä¹ˆä¼šå‡ºç°é»åŒ…</h3><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><h2 id="Go-è¯­è¨€å®ç°UDPé€šä¿¡"><a href="#Go-è¯­è¨€å®ç°UDPé€šä¿¡" class="headerlink" title="Go è¯­è¨€å®ç°UDPé€šä¿¡"></a>Go è¯­è¨€å®ç°UDPé€šä¿¡</h2><h3 id="UDP-åè®®"><a href="#UDP-åè®®" class="headerlink" title="UDP åè®®"></a>UDP åè®®</h3><h3 id="UDP-æœåŠ¡ç«¯"><a href="#UDP-æœåŠ¡ç«¯" class="headerlink" title="UDP æœåŠ¡ç«¯"></a>UDP æœåŠ¡ç«¯</h3><h3 id="UDP-å®¢æˆ·ç«¯"><a href="#UDP-å®¢æˆ·ç«¯" class="headerlink" title="UDP å®¢æˆ·ç«¯"></a>UDP å®¢æˆ·ç«¯</h3><p>304301980</p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>16 å¹¶å‘</title>
      <link href="p/a4216756.html"/>
      <url>p/a4216756.html</url>
      
        <content type="html"><![CDATA[<h1 id="16-å¹¶å‘"><a href="#16-å¹¶å‘" class="headerlink" title="16 å¹¶å‘"></a>16 å¹¶å‘</h1><p>[toc]</p><p>Go è¯­è¨€ <strong>åœ¨è¯­è¨€å±‚é¢å¤©ç”Ÿæ”¯æŒå¹¶å‘</strong></p><h1 id="å¹¶å‘-ä¸-å¹¶è¡Œ"><a href="#å¹¶å‘-ä¸-å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ ä¸ å¹¶è¡Œ"></a>å¹¶å‘ ä¸ å¹¶è¡Œ</h1><ul><li><strong>å¹¶å‘</strong>ï¼šåœ¨<strong>åŒä¸€æ—¶é—´æ®µ</strong>å†…æ‰§è¡Œå¤šä¸ªä»»åŠ¡<ul><li>ç”¨å¾®ä¿¡å’Œä¸¤ä¸ªäººèŠå¤©</li></ul></li><li><strong>å¹¶è¡Œ</strong>ï¼š<strong>åŒä¸€æ—¶åˆ»</strong>æ‰§è¡Œå¤šä¸ªä»»åŠ¡<ul><li>æˆ‘å’Œæœ‹å‹éƒ½åœ¨ç”¨å¾®ä¿¡åˆ«äººèŠå¤©</li></ul></li><li><strong>Go çš„å¹¶å‘</strong>é€šè¿‡<code>goroutine</code> å®ç°<ul><li><code>goroutin</code> <strong>ç±»ä¼¼äºçº¿ç¨‹</strong>ï¼Œå±äºç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œå¯ä»¥åˆ›å»ºè®¸å¤šä¸ª<code>goroutine</code> å¹¶å‘å·¥ä½œ</li><li><code>goroutine</code> æ˜¯ ç”±Go è¯­è¨€è¿è¡Œæ—¶ï¼Œè°ƒåº¦å®Œæˆï¼Œè€Œçº¿ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿè°ƒåº¦å®Œæˆ</li></ul></li><li>Go è¿˜æä¾›<code>channel</code> åœ¨å¤šä¸ª<code>goroutine</code> é—´è¿›è¡Œé€šä¿¡</li><li><code>goroutine</code> å’Œ <code>channel</code> æ˜¯Go è¯­è¨€ç§‰æ‰¿çš„ <strong><code>CSP(Communicating Sequential Process)</code> å¹¶å‘æ¨¡å¼</strong>çš„é‡è¦å®ç°åŸºç¡€</li></ul><h1 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h1><ul><li><p><code>java/c++ </code>ä¸­å®ç°å¹¶å‘ç¼–ç¨‹ï¼šè€—è´¹å¤§é‡å¿ƒæ™º</p><ul><li>éœ€è¦è‡ªå·±ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œ</li><li>éœ€è¦è‡ªå·±å»åŒ…è£…ä¸€ä¸ªåˆä¸€ä¸ªä»»åŠ¡</li><li>éœ€è¦è‡ªå·±å»è°ƒåº¦çº¿ç¨‹æ‰§è¡Œä»»åŠ¡å¹¶ç»´æŠ¤ä¸Šä¸‹æ–‡åˆ‡æ¢</li></ul></li><li><p>Go ä¸­<code>goroutine</code> æœºåˆ¶ï¼šç¨‹åºå‘˜è‡ªå·±å®šä¹‰å¤šä¸ªä»»åŠ¡ï¼Œè®©ç³»ç»Ÿå¸®åŠ©æˆ‘ä»¬å°†ä»»åŠ¡åˆ†é…åˆ° CPU ä¸Šå®ç°å¹¶å‘</p></li><li><p><code>goroutine</code> :ç±»ä¼¼äºçº¿ç¨‹ï¼Œç”±Go åœ¨ runtime æ—¶è°ƒåº¦å’Œç®¡ç†</p></li><li><p>Go ç¨‹åºä¼šæ™ºèƒ½åœ°å°† goroutine ä¸­çš„ä»»åŠ¡åˆç†åœ°åˆ†é…ç»™æ¯ä¸ªCPU</p></li><li><p><strong>ç°ä»£åŒ–çš„ç¼–ç¨‹è¯­è¨€</strong>ï¼šåœ¨è¯­è¨€å±‚é¢å·²ç»<strong>å†…ç½®äº†è°ƒåº¦å’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æœºåˆ¶</strong></p></li><li><p>Go ä¸­ä¸éœ€è¦è‡ªå·±å†™è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Œåªéœ€è¦<code>goroutine</code>ï¼Œ</p></li><li><p>å½“éœ€è¦<strong>è®©æŸä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œ</strong>çš„æ—¶å€™ï¼Œåªéœ€è¦å°†è¿™ä¸ªä»»åŠ¡ <strong>åŒ…è£…æˆä¸€ä¸ªå‡½æ•°</strong>ï¼Œå¼€å¯ä¸€ä¸ª<code>goroutine</code> å»æ‰§è¡Œè¿™ä¸ªå‡½æ•°å°±å¯ä»¥</p></li></ul><h2 id="ä½¿ç”¨-goroutine"><a href="#ä½¿ç”¨-goroutine" class="headerlink" title="ä½¿ç”¨ goroutine"></a>ä½¿ç”¨ goroutine</h2><ul><li>Go ä¸­ä½¿ç”¨<code>goroutine</code> ï¼š<ul><li>å†è°ƒç”¨å‡½æ•°çš„æ—¶å€™å‰é¢åŠ å…³é”®å­—<code>go</code> ï¼Œå³å¯ä¸ºå‡½æ•°åˆ›å»ºä¸€ä¸ª<code>goroutine</code></li></ul></li><li>ä¸€ä¸ª<code>goroutine</code> å¿…å®šå¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ª<code>goroutine</code> å»æ‰§è¡Œç›¸åŒçš„å‡½æ•°</li></ul><h2 id="å¯åŠ¨å•ä¸ª-goroutine"><a href="#å¯åŠ¨å•ä¸ª-goroutine" class="headerlink" title="å¯åŠ¨å•ä¸ª goroutine"></a>å¯åŠ¨å•ä¸ª goroutine</h2><ul><li><p>åœ¨åŒ¿åå‡½æ•°æˆ–è€…æ™®é€šå‡½æ•°å‰<code>go</code> </p></li><li><p>ç¤ºä¾‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hello</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Hello Goroutine!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">hello()</span><br><span class="line">fmt.Println(<span class="string">&quot;main goroutine done!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¤ºä¾‹ä¸­ï¼Œhello( ) å’Œ main() æ˜¯ä¸²è¡Œæ‰§è¡Œçš„<br>ç»“æœ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello Goroutine!</span><br><span class="line">main goroutine done!</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å‡½æ•°helloå‰åŠ å…³é”®å­—<code>go</code> ï¼Œå¯åŠ¨ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloå‡½æ•°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">go</span> hello() <span class="comment">// å¯åŠ¨å¦å¤–ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloå‡½æ•°</span></span><br><span class="line">fmt.Println(<span class="string">&quot;main goroutine done!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œç»“æœçº¸æ‰“å°äº†<code>main goroutine done!</code></p><ul><li>å› ä¸ºç¨‹åºå¯åŠ¨å½“æ—¶ï¼ŒGo ç¨‹åºä¼šä¸º<code>main()</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„<code>goroutine</code></li><li>å½“main() è¿”å›æ—¶ï¼Œè¯¥<code>goroutine</code> å°±ç»“æŸäº†ï¼Œæ‰€æœ‰åœ¨<code>main()</code> ä¸­å¯åŠ¨çš„<code>goroutine</code> ä¼šä¸€åŒç»“æŸï¼Œ<code>main</code> æ‰€åœ¨çš„<code>goroutine</code> æ˜¯å¤œç‹ï¼Œè€Œå…¶ä»–<code>goroutine</code> æ˜¯å¼‚é¬¼</li></ul></li><li><p>è®©mainå‡½æ•°ç­‰helloå‡½æ•°ï¼š<code>time.Sleep</code></p><ul><li>```go<br>func main() {<pre><code>go hello() // å¯åŠ¨å¦å¤–ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloå‡½æ•°fmt.Println(&quot;main goroutine done!&quot;)time.Sleep(time.Second)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ‰§è¡Œç»“æœï¼šå…ˆæ‰“å°`main goroutine done!` , åœ¨æ‰“å°`Hello Goroutine!`</span><br><span class="line">* åœ¨åˆ›å»º`goroutine` æ—¶éœ€è¦èŠ±è´¹æ—¶é—´ï¼Œæ­¤æ—¶mainå‡½æ•°æ‰€åœ¨çš„`goroutine` æ˜¯ç»§ç»­æ‰§è¡Œçš„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## å¯åŠ¨å¤šä¸ª goroutine</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨`sysnc.WaitGroup` å®ç°`goroutine` çš„åŒæ­¥</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  var wg sync.WaitGroup</span><br><span class="line">  </span><br><span class="line">  func hello(i int) &#123;</span><br><span class="line">  defer wg.Done() // goroutineç»“æŸå°±ç™»è®°-1</span><br><span class="line">  fmt.Println(&quot;Hello Goroutine!&quot;, i)</span><br><span class="line">  &#125;</span><br><span class="line">  func main() &#123;</span><br><span class="line">  </span><br><span class="line">  for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">  wg.Add(1) // å¯åŠ¨ä¸€ä¸ªgoroutineå°±ç™»è®°+1</span><br><span class="line">  go hello(i)</span><br><span class="line">  &#125;</span><br><span class="line">  wg.Wait() // ç­‰å¾…æ‰€æœ‰ç™»è®°çš„goroutineéƒ½ç»“æŸ</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¤šæ¬¡æ‰§è¡Œï¼Œæ‰“å°çš„é¡ºåºä¸ä¸€è‡´ï¼Œ</p><ul><li>å› ä¸º10<code>goroutine</code> æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œè€Œ<code>goroutine</code> çš„è°ƒåº¦æ˜¯éšæœºçš„</li></ul></li></ul><h1 id="goroutine-ä¸-çº¿ç¨‹"><a href="#goroutine-ä¸-çº¿ç¨‹" class="headerlink" title="goroutine ä¸ çº¿ç¨‹"></a>goroutine ä¸ çº¿ç¨‹</h1><h2 id="å¯å¢é•¿çš„æ ˆ"><a href="#å¯å¢é•¿çš„æ ˆ" class="headerlink" title="å¯å¢é•¿çš„æ ˆ"></a>å¯å¢é•¿çš„æ ˆ</h2><ul><li>OS çº¿ç¨‹ä¸€èˆ¬éƒ½æœ‰å›ºå®šçš„æ ˆå†…å­˜(é€šå¸¸ä¸º2 MB)</li><li>ä¸€ä¸ª<code>goroutine</code> çš„æ ˆåœ¨å…¶ç”Ÿå‘½å‘¨æœŸå¼€å§‹æ—¶åªæœ‰å¾ˆå°çš„æ ˆï¼ˆä¸€èˆ¬ä¸º2 KBï¼‰ï¼Œ<code>goroutine</code> çš„æ ˆä¸æ˜¯å›ºå®šçš„ï¼ŒæŒ‰éœ€å¢å¤§å’Œç¼©å°ï¼Œ<code>goroutine</code> çš„æ ˆå¤§å°æœ€å¤§ä¸º<code>1 GB</code>ï¼Œ</li><li>å› æ­¤ä¸€æ¬¡åˆ›å»ºåä¸‡<code>groutine</code> ä¹Ÿå¯ä»¥</li></ul><h2 id="goroutine-è°ƒåº¦"><a href="#goroutine-è°ƒåº¦" class="headerlink" title="goroutine è°ƒåº¦"></a>goroutine è°ƒåº¦</h2><ul><li><p><strong><code>GPM</code></strong> æ˜¯Go<strong>è¿è¡Œæ—¶(runtime) å±‚é¢çš„å®ç°</strong>ï¼Œæ˜¯G<strong>oè‡ªå·±å®ç°çš„ä¸€å¥—è°ƒåº¦ç³»ç»Ÿ</strong>ï¼ŒåŒºåˆ«äºæ“ä½œç³»ç»Ÿè°ƒåº¦OSçº¿ç¨‹</p><ul><li><strong><code>G</code>:</strong> ä¸€ä¸ª<code>goroutine</code> , å­˜æ”¾ç€æœ¬<strong>å…±routineä¿¡æ¯</strong>ï¼Œå’Œ<strong>ä¸æ‰€åœ¨<code>P</code>çš„ç»‘å®š</strong></li><li><strong><code>P</code></strong>: <strong>ç®¡ç†ç€ä¸€ç»„ goroutine é˜Ÿåˆ—</strong>ï¼Œ<ul><li>P ä¸­å­˜å‚¨ç€å½“å‰ goroutine è¿è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå‡½æ•°æŒ‡é’ˆã€å †æ ˆåœ°å€ã€åœ°å€è¾¹ç•Œï¼‰</li><li>P å¯¹è‡ªå·±ç®¡ç†çš„ goroutine é˜Ÿåˆ—åšå‡ºä¸€äº›è°ƒåº¦ï¼ˆä¾‹å¦‚å°†å ç”¨CPUæ—¶é—´é•¿çš„ goroutine æš‚åœã€è¿è¡Œåç»­çš„goroutineç­‰ï¼‰</li><li>å½“è‡ªå·±çš„é˜Ÿåˆ—æ¶ˆè´¹å®Œåï¼Œå°±å»å…¨å±€é˜Ÿåˆ—é‡Œå–ï¼Œè‹¥å…¨å±€é˜Ÿåˆ—ä¹Ÿæ¶ˆè´¹å®Œäº†ï¼Œå»å…¶ä»–Pçš„é˜Ÿåˆ—é‡ŒæŠ¢ä»»åŠ¡</li></ul></li><li><strong><code>M(machine)</code></strong>: Go è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å¯¹ <strong>æ“ä½œç³»ç»Ÿå†…æ ¸çº¿ç¨‹çš„è™šæ‹Ÿ</strong>ï¼Œ<em>M ä¸å†…æ ¸çº¿ç¨‹</em>ä¸€èˆ¬æ˜¯<strong>ä¸€ä¸€æ˜ å°„</strong>çš„å…³ç³»ï¼Œ<strong>ä¸€ä¸ª goroutine æœ€ç»ˆæ˜¯è¦æ”¾åˆ° M ä¸Šæ‰§è¡Œ</strong>çš„</li></ul></li><li><p><strong><code>P</code> å’Œ <code>M</code></strong> ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”ï¼š</p><ul><li><strong>P ç®¡ç†ç€ä¸€ç»„ G æŒ‚è½½ åœ¨Mä¸Šè¿è¡Œ</strong></li><li>å½“ä¸€ä¸ª G é•¿ä¹…é˜»å¡åœ¨ä¸€ä¸ª M ä¸Šæ—¶ï¼Œ<strong>runtime</strong> ä¼šæ–°å»ºä¸€ä¸ª Mï¼Œ<strong>é˜»å¡G</strong> æ‰€åœ¨çš„Pä¼šæŠŠå…¶ä»–çš„ G æŒ‚è½½åœ¨æ–°å»ºçš„ M ä¸Š</li><li>å½“æ—§ çš„ <strong>Gé˜»å¡å®Œæˆæˆ–è€…è®¤ä¸ºå…¶å·²ç»æ­»æ‰</strong>æ—¶ï¼Œå›æ”¶æ—§çš„ M</li></ul></li><li><p>P çš„ä¸ªæ•°é€šè¿‡<code>runtime.GOMAXPROCS</code>è®¾å®šï¼Œæœ€å¤§256ï¼Œ<code>Go1.5</code> å<strong>é»˜è®¤</strong>ä¸º<strong>ç‰©ç†çº¿ç¨‹æ•°</strong></p><ul><li>åœ¨<strong>å¹¶å‘é‡å¤§æ—¶</strong>ï¼Œä¼šå¢åŠ ä¸€äº› P å’Œ Mï¼Œä¸ä¼šå¤ªå¤š</li></ul></li><li><p>==æ³¨æ„==</p><ul><li><strong>ä»çº¿ç¨‹è°ƒåº¦çœ‹ï¼ŒGoè¯­è¨€ä¸å…¶å®ƒè¯­è¨€ç›¸æ¯”çš„ä¼˜åŠ¿</strong>ï¼š<ul><li><strong>OSçº¿ç¨‹</strong>æ˜¯ç”±<strong>OSå†…æ ¸</strong>æ¥è°ƒåº¦çš„ï¼Œ<strong>goroutine</strong> åˆ™æ˜¯ç”±Goè¿è¡Œæ—¶ï¼ˆruntimeï¼‰<strong>è‡ªå·±çš„è°ƒåº¦å™¨</strong>è°ƒåº¦çš„ï¼Œ<strong>è°ƒåº¦å™¨</strong>ä½¿ç”¨ä¸€ä¸ªç§°ä¸º**<code>m:n</code>è°ƒåº¦<strong>çš„æŠ€æœ¯ï¼ˆ</strong>å¤ç”¨/è°ƒåº¦ m ä¸ªgoroutineåˆ° n ä¸ªOSçº¿ç¨‹**ï¼‰<ul><li>ä¸€å¤§ç‰¹ç‚¹ï¼š goroutine çš„è°ƒåº¦åœ¨<strong>ç”¨æˆ·æ€</strong>å®Œæˆï¼Œä¸æ¶‰åŠå†…æ ¸æ€ä¸ç”¨æˆ·å°çš„é¢‘ç¹åˆ‡æ¢ï¼ŒåŒ…æ‹¬<strong>å†…å­˜çš„åˆ†é…ä¸é‡Šæ”¾</strong>ï¼Œéƒ½æ˜¯åœ¨<strong>ç”¨æˆ·æ€ç»´æŠ¤ç€ä¸€å—å†…å­˜æ± </strong>ï¼Œä¸ç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„     <code>malloc</code> å‡½æ•°ï¼Œæˆæœ¬æ¯”è°ƒåº¦OSçº¿ç¨‹ä½å¾ˆå¤š</li><li>å¦ä¸€æ–¹é¢ï¼Œå……åˆ†åˆ©ç”¨äº†<strong>å¤šæ ¸çš„ç¡¬ä»¶èµ„æº</strong>ï¼Œè¿‘ä¼¼åœ°æŠŠè‹¥å¹² goroutine å‡åˆ†åœ¨ç‰©ç†çº¿ç¨‹ä¸Šï¼Œå†åŠ ä¸Š<strong>goroutineçš„è¶…è½»é‡</strong>ï¼Œéƒ½èƒ½ä¿è¯goè°ƒåº¦æ–¹é¢çš„æ€§èƒ½</li></ul></li></ul></li></ul></li></ul><h2 id="GOMAXPROCS"><a href="#GOMAXPROCS" class="headerlink" title="GOMAXPROCS"></a>GOMAXPROCS</h2><ul><li><p>Go <strong>è¿è¡Œæ—¶çš„è°ƒåº¦å™¨</strong>ä½¿ç”¨<code>GOMAXPROCS</code>å‚æ•°ï¼Œç¡®å®šä½¿ç”¨å¤šå°‘ä¸ª <strong>OS çº¿ç¨‹</strong> æ¥åŒæ—¶æ‰§è¡Œ Go ä»£ç </p><ul><li><strong>é»˜è®¤å€¼</strong>æ˜¯æœºå™¨ä¸Šçš„ <strong>CPU æ ¸å¿ƒæ•°</strong></li><li>ä¾‹å¦‚ï¼šä¸€ä¸ª8 æ ¸å¿ƒçš„æœºå™¨ä¸Šï¼Œè°ƒåº¦å™¨ä¼šæŠŠ Go ä»£ç åŒæ—¶è°ƒåº¦åˆ° 8 ä¸ªOSçº¿ç¨‹ä¸Š</li><li>8 å³ä¸º <code>m:n</code> è°ƒåº¦ä¸­çš„n</li></ul></li><li><p>Go ä¸­é€šè¿‡<code>runtime.GOMAXPROCS()</code>å‡½æ•° è®¾ç½®å½“å‰ç¨‹åº å¹¶å‘æ—¶ <strong>å ç”¨çš„CPUé€»è¾‘æ ¸å¿ƒæ•°</strong></p></li><li><p><code>Go 1.5</code>ä¹‹å‰ï¼Œé»˜è®¤ä½¿ç”¨ å•æ ¸å¿ƒ æ‰§è¡Œï¼Œ<code>Go 1.5</code> ä¹‹åï¼Œé»˜è®¤ä½¿ç”¨å…¨éƒ¨çš„CPUé€»è¾‘æ ¸å¿ƒæ•°</p></li><li><p>å¯ä»¥é€šè¿‡ <strong>å°†ä»»åŠ¡åˆ†é…åˆ°ä¸åŒçš„CPUé€»è¾‘æ ¸å¿ƒ</strong> ä¸Šå®ç° <strong>å¹¶è¡Œ</strong> çš„æ•ˆæœï¼š</p><ul><li>```go<br>func a() {<pre><code>for i := 1; i &lt; 10; i++ &#123;    fmt.Println(&quot;A:&quot;, i)&#125;</code></pre>}func b() {<pre><code>for i := 1; i &lt; 10; i++ &#123;    fmt.Println(&quot;B:&quot;, i)&#125;</code></pre>}func main() {<pre><code>runtime.GOMAXPROCS(1)go a()go b()time.Sleep(time.Second)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä¸¤ä¸ªä»»åŠ¡åªæœ‰ä¸€ä¸ªé€»è¾‘æ ¸å¿ƒï¼Œæ­¤æ—¶æ˜¯åšå®Œä¸€ä¸ªä»»åŠ¡å†åšå¦ä¸€ä¸ªä»»åŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">* å°†é€»è¾‘æ ¸å¿ƒæ•°è®¾ä¸º 2ï¼Œæ­¤æ—¶ä¸¤ä¸ªä»»åŠ¡å¹¶è¡Œæ‰§è¡Œï¼š</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  func a() &#123;</span><br><span class="line">  for i := 1; i &lt; 10; i++ &#123;</span><br><span class="line">  fmt.Println(&quot;A:&quot;, i)</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func b() &#123;</span><br><span class="line">  for i := 1; i &lt; 10; i++ &#123;</span><br><span class="line">  fmt.Println(&quot;B:&quot;, i)</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  runtime.GOMAXPROCS(2)</span><br><span class="line">  go a()</span><br><span class="line">  go b()</span><br><span class="line">  time.Sleep(time.Second)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Go ä¸­çš„ <strong>æ“ä½œç³»ç»Ÿçº¿ç¨‹</strong> å’Œ <strong>goroutine</strong> çš„å…³ç³»</p><ul><li>ä¸€ä¸ª <strong>OSçº¿ç¨‹</strong> å¯¹åº” <strong>ç”¨æˆ·æ€å¤šä¸ªgoroutine</strong></li><li>go ç¨‹åºå¯ä»¥<strong>åŒæ—¶ä½¿ç”¨å¤šä¸ª</strong> <strong>OSçº¿ç¨‹</strong></li><li><strong>goroutine</strong> å’Œ <strong>OSçº¿ç¨‹</strong> æ˜¯å¤šå¯¹å¤šçš„å…³ç³»å³**<code>m:n</code>**</li></ul></li></ul><h1 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h1><ul><li><p>å•çº¯çš„å°†å‡½æ•°å¹¶å‘æ‰§è¡Œæ— æ„ä¹‰ï¼Œ<strong>å‡½æ•°ä¸å‡½æ•°é—´ äº¤æ¢æ•°æ®</strong>æ‰èƒ½ä½“ç°<strong>å¹¶å‘æ‰§è¡Œå‡½æ•°çš„æ„ä¹‰</strong></p></li><li><p>å¯ä»¥ä½¿ç”¨<strong>å…±äº«å†…å­˜</strong>è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œä½†æ˜¯å…±äº«å†…å­˜åœ¨ä¸åŒçš„<code>goroutine</code>ä¸­å®¹æ˜“å‘ç”Ÿç«äº‰</p><ul><li>ä¸ºäº† æ•°æ®äº¤æ¢ çš„æ­£ç¡®æ€§ï¼Œå¿…é¡»ä½¿ç”¨ <strong>äº’æ–¥é‡</strong> <strong>å¯¹å†…å­˜è¿›è¡ŒåŠ é”</strong>ï¼Œè¿™ç§åšæ³•ä¼šæœ‰<strong>æ€§èƒ½é—®é¢˜</strong></li></ul></li><li><p><strong>Go çš„å¹¶å‘æ¨¡å‹</strong>ï¼š**<code>CSP(Communicating Sequential Process)</code>**, æå€¡é€šè¿‡ <strong>é€šä¿¡å…±äº«å†…å­˜</strong> è€Œä¸æ˜¯ é€šè¿‡å…±äº«å†…å­˜è€Œå®ç°é€šä¿¡</p></li><li><p><code>goroutine</code> æ˜¯Go å¹¶å‘æ‰§è¡Œçš„<strong>æ‰§è¡Œä½“</strong>ï¼Œ<code>channel</code> æ˜¯ä»–ä»¬ä¹‹é—´çš„<strong>è¿æ¥</strong></p><ul><li><code>channel</code> å¯ä»¥è®©ä¸€ä¸ª<code>goroutine</code> å‘é€ç‰¹å®šå€¼åˆ°å¦ä¸€ä¸ª<code>goroutine</code>çš„é€šä¿¡æœºåˆ¶</li></ul></li><li><p><code>channel</code> æ˜¯ç‰¹æ®Šçš„ç±»å‹ï¼Œåƒä¸€ä¸ªä¼ é€å¸¦æˆ–è€…<strong>é˜Ÿåˆ—</strong>ï¼Œæ€»æ˜¯éµå¾ªå…ˆå…¥å…ˆå‡ºçš„è§„åˆ™ï¼Œä»¥ä¿è¯æ”¶å‘æ•°æ®çš„é¡ºåº</p><ul><li><strong>æ¯ä¸€ä¸ªé€šé“æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹çš„å¯¼ç®¡</strong>ï¼Œå³åœ¨å£°æ˜channelæ—¶éœ€è¦æŒ‡å®šå…¶å…ƒç´ ç±»å‹</li></ul></li></ul><h2 id="channel-ç±»å‹"><a href="#channel-ç±»å‹" class="headerlink" title="channel ç±»å‹"></a>channel ç±»å‹</h2><ul><li><p><code>channel</code> æ˜¯ä¸€ç§<strong>å¼•ç”¨ç±»å‹</strong></p></li><li><p>å£°æ˜ <code>channel</code> ç±»å‹çš„æ ¼å¼ï¼š<code>var å˜é‡ chan å…ƒç´ ç±»å‹</code></p></li><li><p>```go<br>var ch1 chan int   // å£°æ˜ä¸€ä¸ªä¼ é€’æ•´å‹çš„é€šé“<br>var ch2 chan bool  // å£°æ˜ä¸€ä¸ªä¼ é€’å¸ƒå°”å‹çš„é€šé“<br>var ch3 chan []int // å£°æ˜ä¸€ä¸ªä¼ é€’intåˆ‡ç‰‡çš„é€šé“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## åˆ›å»º channel</span><br><span class="line"></span><br><span class="line">* channel æ˜¯**å¼•ç”¨ç±»å‹**ï¼Œ**ç©ºå€¼**æ˜¯`nil`</span><br><span class="line"></span><br><span class="line">* å£°æ˜çš„é€šé“éœ€è¦ä½¿ç”¨`make` åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">* åˆ›å»º channel çš„æ ¼å¼ï¼š`make(chan å…ƒç´ ç±»å‹ï¼Œç¼“å†²åŒºå¤§å°)`</span><br><span class="line"></span><br><span class="line">  * ç¼“å†²åŒºå¤§å°å¯é€‰</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  ch4 := make(chan int)</span><br><span class="line">  ch5 := make(chan bool)</span><br><span class="line">  ch6 := make(chan []int)</span><br></pre></td></tr></table></figure></li></ul><h2 id="channel-æ“ä½œ"><a href="#channel-æ“ä½œ" class="headerlink" title="channel æ“ä½œ"></a>channel æ“ä½œ</h2><ul><li>channelæ“ä½œ:<ul><li><strong>å‘é€ï¼šsend</strong></li><li><strong>æ¥æ”¶ï¼šreceive</strong></li><li><strong>å…³é—­ï¼šclose</strong></li></ul></li><li>å‘é€ å’Œ æ¥æ”¶ï¼šä½¿ç”¨<code>&lt;-</code> ç¬¦å·</li><li>å®šä¹‰ä¸€ä¸ªé€šé“<code>ch := make(chan int)</code></li></ul><h3 id="å‘é€"><a href="#å‘é€" class="headerlink" title="å‘é€"></a>å‘é€</h3><ul><li>å°†ä¸€ä¸ªå€¼å‘é€åˆ°é€šé“ä¸­</li><li><code>ch &lt;- 10</code></li></ul><h3 id="æ¥æ”¶"><a href="#æ¥æ”¶" class="headerlink" title="æ¥æ”¶"></a>æ¥æ”¶</h3><ul><li><p>ä»ä¸€ä¸ªé€šé“ä¸­æ¥æ”¶å€¼</p></li><li><p>```go<br>x := &lt;- ch //ä»ché€šé“ä¸­æ¥æ”¶å€¼å¹¶èµ‹å€¼ç»™å˜é‡x<br>&lt;- ch        //ä»chä¸­æ¥æ”¶å€¼ï¼Œå¿½ç•¥ç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### å…³é—­</span><br><span class="line"></span><br><span class="line">* è°ƒç”¨å†…ç½®å‡½æ•°`close` å…³é—­é€šé“</span><br><span class="line">* `close(ch)`</span><br><span class="line">* ==æ³¨æ„ï¼š==</span><br><span class="line">  * åªæœ‰åœ¨é€šçŸ¥æ¥æ”¶æ–¹ goroutine **æ‰€æœ‰çš„æ•°æ®éƒ½å‘é€å®Œæ¯•**æ—¶ï¼Œæ‰éœ€è¦å…³é—­é€šé“</span><br><span class="line">  * **é€šé“å¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶**çš„ï¼Œå’Œå…³é—­æ–‡ä»¶ä¸ä¸€æ ·ï¼ˆå¿…é¡»åšï¼‰ï¼Œå…³é—­é€šé“ä¸ä¸€å®šè¦åš</span><br><span class="line">* å…³é—­åçš„é€šé“çš„==ç‰¹ç‚¹==</span><br><span class="line">  * å¯¹ä¸€ä¸ªå…³é—­çš„é€šé“ å†å‘é€å€¼å°±ä¼šå¯¼è‡´ panic</span><br><span class="line">  * å¯¹ä¸€ä¸ªå…³é—­çš„é€šé“è¿›è¡Œæ¥æ”¶ä¼šä¸€ç›´è·å–å€¼ï¼Œç›´åˆ°é€šé“ä¸ºç©º</span><br><span class="line">  * å¯¹ä¸€ä¸ªå…³é—­ä¸”æ²¡æœ‰å€¼çš„é€šé“æ‰§è¡Œæ¥å—æ“ä½œï¼Œä¼šå¾—åˆ°å¯¹åº”ç±»å‹çš„é›¶å€¼</span><br><span class="line">  * å…³é—­ä¸€ä¸ªå·²ç»å…³é—­çš„é€šé“ä¼šå¯¼è‡´ panic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## æ— ç¼“å†²çš„é€šé“</span><br><span class="line"></span><br><span class="line">* æ— ç¼“å†²çš„é€šé“ï¼ˆé˜»å¡çš„é€šé“ï¼‰</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func main() &#123;</span><br><span class="line">    ch := make(chan int)</span><br><span class="line">    ch &lt;- 10</span><br><span class="line">    fmt.Println(&quot;å‘é€æˆåŠŸ&quot;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¯‘èƒ½é€šè¿‡ï¼Œä½†æ‰§è¡Œä¼šæŠ¥é”™ï¼š</p><ul><li><p>```<br>fatal error: all goroutines are asleep - deadlock!</p><p>goroutine 1 [chan send]:<br>main.main()</p><pre><code>e:/LearningNotes/Go/goroutine/zuse.go:7 +0x5f</code></pre><p>exit status 2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * `deadlock`: </span><br><span class="line"></span><br><span class="line">  * å› ä¸º`ch:=make(chan int)` åˆ›å»ºçš„æ˜¯**æ— ç¼“å†²åŒºçš„é€šé“**ï¼Œæ— ç¼“å†²åŒºçš„é€šé“åªæœ‰åœ¨**æœ‰äºº æ¥å—å€¼ çš„æ—¶å€™**æ‰èƒ½å‘é€å€¼</span><br><span class="line"></span><br><span class="line">  * ä¸Šé¢ä»£ç é˜»å¡äº`ch &lt;- 10`ï¼Œå½¢æˆæ­»é”</span><br><span class="line"></span><br><span class="line">* **ä¸€ç§æ–¹æ³•**ï¼šå¯ç”¨ä¸€ä¸ª`goroutine`æ¥æ”¶å€¼</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func recv(c chan int) &#123;</span><br><span class="line">    ret := &lt;-c</span><br><span class="line">    fmt.Println(&quot;æ¥æ”¶æˆåŠŸ&quot;, ret)</span><br><span class="line">    &#125;</span><br><span class="line">    func main() &#123;</span><br><span class="line">    ch := make(chan int)</span><br><span class="line">    go recv(ch) // å¯ç”¨goroutineä»é€šé“æ¥æ”¶å€¼</span><br><span class="line">    ch &lt;- 10</span><br><span class="line">    fmt.Println(&quot;å‘é€æˆåŠŸ&quot;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ— ç¼“å†²é€šé“</strong> ä¸Šçš„ <strong>å‘é€æ“ä½œ</strong> ä¼šé˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ª<code>goroutine</code> åœ¨è¯¥é€šé“ä¸Šæ‰§è¡Œ <strong>æ¥æ”¶æ“ä½œ</strong>ï¼Œæ‰èƒ½å‘é€æˆåŠŸï¼Œä¸¤ä¸ª<code>goroutine</code> ä¼šç»§ç»­æ‰§è¡Œ</p></li><li><p>ç›¸åï¼Œè‹¥ <strong>æ¥å—æ“ä½œ</strong> å…ˆæ‰§è¡Œï¼Œæ¥æ”¶æ–¹çš„<code>goroutine</code> å°†é˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ª<code>goroutine</code> åœ¨è¯¥é€šé“ä¸Šå‘é€ä¸€ä¸ªå€¼</p></li></ul></li><li><p>ä½¿ç”¨ <strong>æ— ç¼“å†²é€šé“</strong> è¿›è¡Œé€šä¿¡å°†å¯¼è‡´å‘é€å’Œæ¥æ”¶çš„<code>goroutine</code> <strong>åŒæ­¥åŒ–</strong></p></li><li><p>å› æ­¤ <strong>æ— ç¼“å†²é€šé“</strong> è¢«ç§°ä¸º<code>åŒæ­¥é€šé“</code></p></li></ul><h2 id="æœ‰ç¼“å†²çš„é€šé“"><a href="#æœ‰ç¼“å†²çš„é€šé“" class="headerlink" title="æœ‰ç¼“å†²çš„é€šé“"></a>æœ‰ç¼“å†²çš„é€šé“</h2><ul><li><p>è§£å†³ä¸Šé¢çš„é—®é¢˜<strong>ï¼Œå¦ä¸€ç§æ–¹æ³•ï¼š</strong> ä½¿ç”¨æœ‰ç¼“å†²çš„é€šé“</p></li><li><p><strong>æœ‰ç¼“å†²çš„é€šé“</strong>ï¼šä½¿ç”¨ makeåˆå§‹åŒ– çš„æ—¶å€™ä¸ºå…¶<strong>æŒ‡å®šå®¹é‡ï¼š</strong></p><ul><li>```go<br>func main() {<pre><code>ch := make(chan int, 1) // åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º1çš„æœ‰ç¼“å†²åŒºé€šé“ch &lt;- 10fmt.Println(&quot;å‘é€æˆåŠŸ&quot;)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* åªè¦é€šé“å®¹é‡å¤§äºé›¶ï¼Œè¯¥é€šé“å°±æ˜¯**æœ‰ç¼“å†²çš„é€šé“**ï¼Œå®¹é‡è¡¨ç¤ºé€šé“ä¸­èƒ½å­˜æ”¾å…ƒç´ çš„æ•°é‡</span><br><span class="line">* è‹¥æ»¡åˆ™é˜»å¡</span><br><span class="line">* å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•°`len`è·å–é€šé“å†…å…ƒç´ çš„æ•°é‡ï¼Œä½¿ç”¨`cap`è·å–é€šé“çš„å®¹é‡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## for range ä»é€šé“å¾ªç¯å–å€¼</span><br><span class="line"></span><br><span class="line">* å‘é€šé“å‘é€å®Œæ•°æ®åï¼Œå¯ä»¥é€šè¿‡ `close` å…³é—­é€šé“</span><br><span class="line"></span><br><span class="line">* é€šé“è¢«å…³é—­æ—¶ï¼Œåœ¨å‘é€šé“å‘é€å€¼ ä¼šå¼•å‘`panic`ï¼Œä»è¯¥é€šé“å–å€¼çš„æ“ä½œä¼šå…ˆå–å®Œé€šé“å†…çš„å€¼ï¼Œç„¶åä¸€ç›´å–å¾—éƒ½æ˜¯**å¯¹åº”ç±»å‹çš„é›¶å€¼**</span><br><span class="line"></span><br><span class="line">* åˆ¤æ–­é€šé“æ˜¯å¦è¢«å…³é—­ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    // channel ç»ƒä¹ </span><br><span class="line">    func main() &#123;</span><br><span class="line">    ch1 := make(chan int)</span><br><span class="line">    ch2 := make(chan int)</span><br><span class="line">    // å¼€å¯goroutineå°†0~100çš„æ•°å‘é€åˆ°ch1ä¸­</span><br><span class="line">    go func() &#123;</span><br><span class="line">    for i := 0; i &lt; 100; i++ &#123;</span><br><span class="line">    ch1 &lt;- i</span><br><span class="line">    &#125;</span><br><span class="line">    close(ch1)</span><br><span class="line">    &#125;()</span><br><span class="line">    // å¼€å¯goroutineä»ch1ä¸­æ¥æ”¶å€¼ï¼Œå¹¶å°†è¯¥å€¼çš„å¹³æ–¹å‘é€åˆ°ch2ä¸­</span><br><span class="line">    go func() &#123;</span><br><span class="line">    for &#123;</span><br><span class="line">    i, ok := &lt;-ch1 // é€šé“å…³é—­åå†å–å€¼ok=false</span><br><span class="line">    if !ok &#123;</span><br><span class="line">    break</span><br><span class="line">    &#125;</span><br><span class="line">    ch2 &lt;- i * i</span><br><span class="line">    &#125;</span><br><span class="line">    close(ch2)</span><br><span class="line">    &#125;()</span><br><span class="line">    // åœ¨ä¸»goroutineä¸­ä»ch2ä¸­æ¥æ”¶å€¼æ‰“å°</span><br><span class="line">    for i := range ch2 &#123; // é€šé“å…³é—­åä¼šé€€å‡ºfor rangeå¾ªç¯</span><br><span class="line">    fmt.Println(i)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æœ‰ä¸¤ç§æ–¹å¼åœ¨æ¥æ”¶å€¼æ—¶ï¼Œåˆ¤æ–­è¯¥é€šé“æ˜¯å¦è¢«å…³é—­</p><ul><li>```go<br>for {<pre><code>        i, ok := &lt;-ch1 // é€šé“å…³é—­åå†å–å€¼ok=false        if !ok &#123;            break        &#125;        ch2 &lt;- i * i    &#125;</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  for i := range ch2 &#123; // é€šé“å…³é—­åä¼šé€€å‡ºfor rangeå¾ªç¯</span><br><span class="line">  fmt.Println(i)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="å•å‘é€šé“"><a href="#å•å‘é€šé“" class="headerlink" title="å•å‘é€šé“"></a>å•å‘é€šé“</h2><ul><li><p>å¯ä»¥å°†é€šé“ä½œä¸º <strong>å‚æ•°</strong> åœ¨ <strong>å¤šä¸ªä»»åŠ¡å‡½æ•°é—´</strong> ä¼ é€’</p></li><li><p>å¯ä»¥åœ¨<strong>ä¸åŒçš„ä»»åŠ¡å‡½æ•°</strong>ä¸­ï¼Œå¯¹ä½¿ç”¨çš„é€šé“è¿›è¡Œ<strong>é™åˆ¶</strong>ï¼š<strong>åªèƒ½å‘é€</strong> æˆ– <strong>åªèƒ½æ¥æ”¶</strong></p></li><li><p>Go æä¾›äº† <strong>å•å‘é€šé“</strong> ï¼š</p><ul><li>```go<br>func counter(out chan&lt;- int) {<pre><code>for i := 0; i &lt; 100; i++ &#123;    out &lt;- i&#125;close(out)</code></pre>}func squarer(out chan&lt;- int, in &lt;-chan int) {<pre><code>for i := range in &#123;    out &lt;- i * i&#125;close(out)</code></pre>}<br>func printer(in &lt;-chan int) {<pre><code>for i := range in &#123;    fmt.Println(i)&#125;</code></pre>}func main() {<pre><code>ch1 := make(chan int)ch2 := make(chan int)go counter(ch1)go squarer(ch2, ch1)printer(ch2)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * `chan&lt;- int` æ˜¯ä¸€ä¸ª**åªå†™å•å‘é€šé“**ï¼ˆåªèƒ½å¯¹å…¶å†™å…¥intç±»å‹ï¼‰ï¼Œå¯ä»¥å¯¹å…¶**å‘é€æ“ä½œ**ï¼Œä½†ä¸èƒ½æ‰§è¡Œæ¥æ”¶æ“ä½œ</span><br><span class="line">  * `&lt;-chan int` æ˜¯ä¸€ä¸ª**åªè¯»å•å‘é€šé“**ï¼ˆåªèƒ½å¯¹å…¶è¯»å–intç±»å‹ï¼‰ï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œ**æ¥æ”¶æ“ä½œ**ï¼Œä½†ä¸èƒ½æ‰§è¡Œå‘é€æ“ä½œ</span><br><span class="line"></span><br><span class="line">* åœ¨å‡½æ•°ä¼ å‚ï¼Œä»¥åŠä»»ä½•èµ‹å€¼æ“ä½œä¸­ï¼Œå¯ä»¥**å°†åŒå‘é€šé“è½¬æ¢æˆå•å‘é€šé“**ï¼Œä¸èƒ½åä¹‹ï¼›</span><br><span class="line"></span><br><span class="line">## é€šé“æ€»ç»“</span><br><span class="line"></span><br><span class="line">* channel **å¼‚å¸¸æ€»ç»“**ï¼š</span><br><span class="line">  * ![channelå¼‚å¸¸æ€»ç»“](https://www.liwenzhou.com/images/Go/concurrence/channel01.png)</span><br><span class="line"></span><br><span class="line">* å…³é—­å·²å…³é—­ çš„`channel` ä¼šå¼•å‘`panic`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># worker pool(goroutine æ± )</span><br><span class="line"></span><br><span class="line">* é€šå¸¸ä¼šä½¿ç”¨ å¯ä»¥æŒ‡å®šå¯åŠ¨çš„ `goroutine` æ•°é‡- `worker pool` æ¨¡å¼ï¼Œä»¥æ§åˆ¶`goroutine` çš„æ•°é‡ï¼Œé˜²æ­¢`goroutine` çš„æ³„éœ²å’Œæš´æ¶¨</span><br><span class="line"></span><br><span class="line">* ç®€æ˜“ `worker pool` ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func worker(id int, jobs &lt;-chan int, results chan&lt;- int) &#123;</span><br><span class="line">    for j := range jobs &#123;</span><br><span class="line">    fmt.Printf(&quot;worker:%d start job:%d\n&quot;, id, j)</span><br><span class="line">    time.Sleep(time.Second)</span><br><span class="line">    fmt.Printf(&quot;worker:%d end job:%d\n&quot;, id, j)</span><br><span class="line">    results &lt;- j * 2</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    jobs := make(chan int, 100)</span><br><span class="line">    results := make(chan int, 100)</span><br><span class="line">    // å¼€å¯3ä¸ªgoroutine</span><br><span class="line">    for w := 1; w &lt;= 3; w++ &#123;</span><br><span class="line">    go worker(w, jobs, results)</span><br><span class="line">    &#125;</span><br><span class="line">    // 5ä¸ªä»»åŠ¡</span><br><span class="line">    for j := 1; j &lt;= 5; j++ &#123;</span><br><span class="line">    jobs &lt;- j</span><br><span class="line">    &#125;</span><br><span class="line">    close(jobs)</span><br><span class="line">    // è¾“å‡ºç»“æœ</span><br><span class="line">    for a := 1; a &lt;= 5; a++ &#123;</span><br><span class="line">    &lt;-results</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="select-å¤šè·¯å¤ç”¨"><a href="#select-å¤šè·¯å¤ç”¨" class="headerlink" title="select å¤šè·¯å¤ç”¨"></a>select å¤šè·¯å¤ç”¨</h1><ul><li><p>é€šé“åœ¨ æ¥æ”¶æ•°æ® æ—¶ï¼Œè‹¥æ²¡æœ‰æ•°æ®å¯ä»¥æ¥æ”¶ä¼šå‘ç”Ÿ é˜»å¡</p></li><li><p>è‹¥éœ€è¦åŒæ—¶ä»å¤šä¸ªé€šé“æ¥æ”¶æ•°æ®ï¼Œåˆ™æ›´æœ‰å¯èƒ½å‘ç”Ÿä¸Šè¿°é˜»å¡</p></li><li><p>ä¾‹å¦‚ï¼š</p><ul><li>```go<br>for{<pre><code>// å°è¯•ä»ch1æ¥æ”¶å€¼data, ok := &lt;-ch1// å°è¯•ä»ch2æ¥æ”¶å€¼data, ok := &lt;-ch2â€¦</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * è¿™ç§éå†æ–¹å¼ï¼Œå¯ä»¥å®ç°ä»å¤šä¸ªé€šé“æ¥æ”¶å€¼ï¼Œä½†è¿è¡Œæ€§èƒ½å¾ˆå·®</span><br><span class="line"></span><br><span class="line">* ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼šGo å†…ç½®äº†`select` å…³é”®å­—ï¼Œå¯ä»¥åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œ</span><br><span class="line"></span><br><span class="line">* `select` çš„ä½¿ç”¨ç±»ä¼¼äº`switch` è¯­å¥ï¼Œæœ‰ä¸€ç³»åˆ—`case` åˆ†æ”¯å’Œä¸€ä¸ªé»˜è®¤åˆ†æ”¯</span><br><span class="line"></span><br><span class="line">  * æ¯ä¸ª`case` ä¼šå¯¹åº”ä¸€ä¸ªé€šé“çš„é€šä¿¡è¿‡ç¨‹ï¼ˆsend or receiveï¼‰</span><br><span class="line">  * `select` ä¼šä¸€ç›´ç­‰å¾…ï¼ŒçŸ¥é“æŸä¸ª`case` çš„é€šä¿¡æ“ä½œå®Œæˆï¼Œä¼šæ‰§è¡Œ`case` åˆ†æ”¯å¯¹åº”çš„è¯­å¥</span><br><span class="line"></span><br><span class="line">* æ ¼å¼ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    select&#123;</span><br><span class="line">        case &lt;-ch1:</span><br><span class="line">            ...</span><br><span class="line">        case data := &lt;-ch2:</span><br><span class="line">            ...</span><br><span class="line">        case ch3&lt;-data:</span><br><span class="line">            ...</span><br><span class="line">        default:</span><br><span class="line">            é»˜è®¤æ“ä½œ</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ç¤ºä¾‹ï¼š</p><ul><li>```go<br>func main() {<pre><code>ch := make(chan int, 1)for i := 0; i &lt; 10; i++ &#123;    select &#123;    case x := &lt;-ch:        fmt.Println(x)    case ch &lt;- i:    &#125;&#125;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä½¿ç”¨`select` è¯­å¥å¢åŠ ä»£ç å¯è¯»æ€§ï¼š</span><br><span class="line">  * å¯å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ª channel çš„å‘é€/æ¥å—æ“ä½œ</span><br><span class="line">  * å¦‚æœå¤šä¸ª`case` åŒæ—¶æ»¡è¶³ï¼Œ`select` ä¼šéšæœºé€‰æ‹©ä¸€ä¸ª</span><br><span class="line">  * å¯¹äºæ²¡æœ‰`case` çš„`select&#123;&#125;` ä¼šä¸€ç›´ç­‰å¾…ï¼Œå¯ç”¨äºé˜»å¡`main` å‡½æ•°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å¹¶å‘å®‰å…¨å’Œé”</span><br><span class="line"></span><br><span class="line">* Go ä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¤šä¸ª`goroutine` åŒæ—¶æ“ä½œä¸€ä¸ªèµ„æºï¼ˆä¸´ç•ŒåŒºï¼‰ï¼Œè¿™ç§æƒ…å†µä¼šå‘ç”Ÿ`ç«æ€é—®é¢˜` æ•°æ®ç«äº‰</span><br><span class="line"></span><br><span class="line">* ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    var x int64</span><br><span class="line">    var wg sync.WaitGroup</span><br><span class="line">    </span><br><span class="line">    func add() &#123;</span><br><span class="line">    for i := 0; i &lt; 5000; i++ &#123;</span><br><span class="line">    x = x + 1</span><br><span class="line">    &#125;</span><br><span class="line">    wg.Done()</span><br><span class="line">    &#125;</span><br><span class="line">    func main() &#123;</span><br><span class="line">    wg.Add(2)</span><br><span class="line">    go add()</span><br><span class="line">    go add()</span><br><span class="line">    wg.Wait()</span><br><span class="line">    fmt.Println(x)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¼€å¯ä¸¤ä¸ª<code>goroutine</code> å»ç´¯åŠ  x çš„å€¼ï¼Œè¿™ä¸¤ä¸ª<code>goroutine</code> åœ¨è®¿é—®å’Œä¿®æ”¹<code>x</code> æ—¶ä¼šå­˜åœ¨æ•°æ®ç«äº‰ï¼Œå¯¼è‡´ç»“æœä¸æœŸå¾…ä¸ç¬¦</p></li><li><p>package <code>time</code></p><ul><li><code>time.Sleep(time.Second)</code> : ä¸»çº¿ç¨‹ç­‰åˆ°æ‰€æœ‰çš„ goroutine éƒ½è¿è¡Œå®Œæ¯•ï¼Œä½¿å¾—ä¸»çº¿ç¨‹ç¡çœ ä¸€ä¼šï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å……åˆ†è¿è¡Œ</li><li><code>sync.WaitGroup</code> : å†…éƒ¨æœ‰ä¸ªè®¡æ—¶å™¨ï¼Œæœ€åˆä»é›¶å¼€å§‹ã€‚æœ‰ä¸‰ä¸ªæ–¹æ³•æ§åˆ¶è®¡æ•°å™¨çš„æ•°é‡<ul><li><code>Add()</code> : å°†è®¡æ•°å™¨è®¾ç½®ä¸ºn</li><li><code>Done()</code> : æ¯æ¬¡å°†è®¡æ•°å™¨ -1</li><li><code>Wait()</code> : ä¼šé˜»å¡ä»£ç è¿è¡Œï¼Œç›´åˆ°è®¡æ•°å™¨çš„å€¼å‡å°‘ä¸º0</li></ul></li></ul></li></ul><h2 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h2><ul><li><p><strong>äº’æ–¥é”</strong>ï¼šå¸¸ç”¨çš„æ§åˆ¶å…±äº«èµ„æºè®¿é—®çš„æ–¹æ³•ï¼Œèƒ½ä¿è¯åŒæ—¶åªæœ‰ä¸€ä¸ª<code>goroutine</code> å¯ä»¥è®¿é—®å…±äº«èµ„æº</p></li><li><p>Go ä¸­ä½¿ç”¨<code>sync</code> å’Œ <code>Mutex</code> åŒ…å®ç°äº’æ–¥é”</p><ul><li>```go<br>var x int64<br>var wg sync.WaitGroup<br>var lock sync.Mutexfunc add() {<pre><code>for i := 0; i &lt; 5000; i++ &#123;    lock.Lock() // åŠ é”    x = x + 1    lock.Unlock() // è§£é”&#125;wg.Done()</code></pre>}<br>func main() {<pre><code>wg.Add(2)go add()go add()wg.Wait()fmt.Println(x)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä½¿ç”¨ **äº’æ–¥é”** èƒ½ä¿è¯åŒä¸€æ—¶é—´æœ‰ä¸”åªæœ‰ä¸€ä¸ª`goroutine` è¿›å…¥ **ä¸´ç•ŒåŒº**ï¼Œå…¶ä»–çš„`goroutine` åˆ™åœ¨ç­‰å¾…é”</span><br><span class="line">* å½“äº’æ–¥é”é‡Šæ”¾åï¼Œç­‰å¾…çš„`goroutine` æ‰å¯ä»¥è·å–é”è¿›å…¥ä¸´ç•ŒåŒº</span><br><span class="line">  </span><br><span class="line">  * å½“å¤šä¸ª`goroutine` åŒæ—¶ç­‰å¾…ä¸€ä¸ªé”æ—¶ï¼Œå”¤é†’çš„ç­–ç•¥æ˜¯éšæœºçš„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## è¯»å†™äº’æ–¥é”</span><br><span class="line"></span><br><span class="line">* äº’æ–¥é” æ˜¯ **å®Œå…¨äº’æ–¥** çš„</span><br><span class="line"></span><br><span class="line">* å¹¶å‘çš„è¯»å–ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¸æ¶‰åŠä¿®æ”¹èµ„æºä¸éœ€è¦åŠ é”ï¼Œè¿™æ—¶ä½¿ç”¨è¯»å†™é”æ›´å¥½</span><br><span class="line"></span><br><span class="line">* **è¯»å†™é”** åœ¨ Go ä¸­ï¼š`sync` åŒ… ä¸­çš„`RWMutex`</span><br><span class="line"></span><br><span class="line">* è¯»å†™é”ï¼šè¯»é” å’Œ å†™é”</span><br><span class="line"></span><br><span class="line">  * å½“ä¸€ä¸ª `goroutine ` è·å–è¯»é”åï¼Œå…¶ä»–çš„`goroutine` è‹¥è·å–è¯»é”ä¼šç»§ç»­è·å¾—é”ï¼Œè‹¥è·å–å†™é”ä¼šç­‰å¾…</span><br><span class="line">  * å½“ä¸€ä¸ª`goroutine` è·å–å†™é”ä¹‹åï¼Œå…¶ä»–çš„`goroutine` æ— è®ºæ˜¯è·å–è¯»é”è¿˜æ˜¯å†™é”éƒ½ä¼šç­‰å¾…</span><br><span class="line"></span><br><span class="line">* ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    var (</span><br><span class="line">    x      int64</span><br><span class="line">    wg     sync.WaitGroup</span><br><span class="line">    lock   sync.Mutex</span><br><span class="line">    rwlock sync.RWMutex</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    func write() &#123;</span><br><span class="line">    // lock.Lock()   // åŠ äº’æ–¥é”</span><br><span class="line">    rwlock.Lock() // åŠ å†™é”</span><br><span class="line">    x = x + 1</span><br><span class="line">    time.Sleep(10 * time.Millisecond) // å‡è®¾å†™æ“ä½œè€—æ—¶10æ¯«ç§’</span><br><span class="line">    rwlock.Unlock()                   // è§£å†™é”</span><br><span class="line">    // lock.Unlock()                     // è§£äº’æ–¥é”</span><br><span class="line">    wg.Done()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func read() &#123;</span><br><span class="line">    // lock.Lock()                  // åŠ äº’æ–¥é”</span><br><span class="line">    rwlock.RLock()               // åŠ è¯»é”</span><br><span class="line">    time.Sleep(time.Millisecond) // å‡è®¾è¯»æ“ä½œè€—æ—¶1æ¯«ç§’</span><br><span class="line">    rwlock.RUnlock()             // è§£è¯»é”</span><br><span class="line">    // lock.Unlock()                // è§£äº’æ–¥é”</span><br><span class="line">    wg.Done()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    start := time.Now()</span><br><span class="line">    for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    wg.Add(1)</span><br><span class="line">    go write()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    for i := 0; i &lt; 1000; i++ &#123;</span><br><span class="line">    wg.Add(1)</span><br><span class="line">    go read()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    wg.Wait()</span><br><span class="line">    end := time.Now()</span><br><span class="line">    fmt.Println(end.Sub(start))</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>è¯»å†™é”</strong> é€‚åˆ è¯»å¤šå†™å°‘çš„åœºæ™¯</p></li></ul><h2 id="sync-WaitGroup"><a href="#sync-WaitGroup" class="headerlink" title="sync.WaitGroup"></a>sync.WaitGroup</h2><ul><li><p>Go ä¸­ ä½¿ç”¨<code>sync.WaitGroup</code> æ¥å®ç°å¹¶å‘ä»»åŠ¡çš„åŒæ­¥ã€‚<code>sync.WaitGroup</code> çš„æ–¹æ³•ï¼š</p><ul><li><table><thead><tr><th>æ–¹æ³•å</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>(wg *WaitGroup) Add(delta int)</td><td>è®¡æ•°å™¨+delta</td></tr><tr><td>(wg *WaitGroup) Done()</td><td>è®¡æ•°å™¨-1</td></tr><tr><td>(wg *WaitGroup) Wait()</td><td>é˜»å¡ ç›´åˆ°è®¡æ•°å™¨å˜ä¸º0</td></tr></tbody></table></li></ul></li><li><p><code>sync.WaitGroup</code> å†…éƒ¨ç»´æŠ¤è¿™ä¸€ä¸ª<strong>è®¡æ•°å™¨</strong>ï¼Œè®¡æ•°å™¨çš„å€¼å¯ä»¥å¢åŠ å’Œå‡å°‘</p><ul><li>å½“å¯åŠ¨äº† N ä¸ªå¹¶å‘ä»»åŠ¡æ—¶ï¼Œå°±å°†è®¡æ•°å™¨å€¼å¢åŠ N</li><li>æ¯ä¸ªä»»åŠ¡å®Œæˆæ—¶ï¼Œé€šè¿‡è°ƒç”¨Done() å°†è®¡æ•°å™¨å‡ 1 </li><li>é€šè¿‡è°ƒç”¨ Wait() æ¥ç­‰å¾…å¹¶å‘ä»»åŠ¡æ‰§è¡Œå®Œï¼Œå½“è®¡æ•°å™¨å€¼ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰å¹¶å‘ä»»åŠ¡å·²ç»å®Œæˆ</li></ul></li><li><p><code>sync.WaitGroup</code>ç¤ºä¾‹ï¼š</p><ul><li>```go<br>var wg sync.WaitGroupfunc hello() {<pre><code>defer wg.Done()fmt.Println(&quot;Hello Goroutine!&quot;)</code></pre>}<br>func main() {<pre><code>wg.Add(1)go hello() // å¯åŠ¨å¦å¤–ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloå‡½æ•°fmt.Println(&quot;main goroutine done!&quot;)wg.Wait()</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ³¨æ„ï¼š`sync.WaitGroup` æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä¼ é€’çš„æ—¶å€™éœ€è¦ä¼ é€’æŒ‡é’ˆ</span><br><span class="line"></span><br><span class="line">## sync.Once</span><br><span class="line"></span><br><span class="line">* åœ¨è®¸å¤šåœºæ™¯ï¼Œç¡®ä¿æŸäº›æ“ä½œåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹åªæ‰§è¡Œä¸€æ¬¡</span><br><span class="line">  * ä¾‹å¦‚ åªåŠ è½½ä¸€æ¬¡é…ç½®æ–‡ä»¶ï¼Œåªiå…³é—­ä¸€æ¬¡é€šé“</span><br><span class="line"></span><br><span class="line">### åŠ è½½é…ç½®æ–‡ä»¶ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">### å¹¶å‘å®‰å…¨çš„å•ä¾‹æ¨¡å¼</span><br><span class="line"></span><br><span class="line">## sync.Map</span><br><span class="line"></span><br><span class="line">* Go ä¸­çš„å†…ç½®map ä¸æ˜¯å¹¶å‘å®‰å…¨ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    var m = make(map[string]int)</span><br><span class="line">    </span><br><span class="line">    func get(key string) int &#123;</span><br><span class="line">    return m[key]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func set(key string, value int) &#123;</span><br><span class="line">    m[key] = value</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    wg := sync.WaitGroup&#123;&#125;</span><br><span class="line">    for i := 0; i &lt; 20; i++ &#123;</span><br><span class="line">    wg.Add(1)</span><br><span class="line">    go func(n int) &#123;</span><br><span class="line">    key := strconv.Itoa(n)</span><br><span class="line">    set(key, n)</span><br><span class="line">    fmt.Printf(&quot;k=:%v,v:=%v\n&quot;, key, get(key))</span><br><span class="line">    wg.Done()</span><br><span class="line">    &#125;(i)</span><br><span class="line">    &#125;</span><br><span class="line">    wg.Wait()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å½“å¹¶å‘å¤šäº†ä¹‹åï¼Œä¼šæŠ¥<code>fatal error: concurrent map writes</code> é”™è¯¯</p></li><li><p>éœ€è¦ä¸º map åŠ é”æ¥ä¿è¯å¹¶å‘çš„å®‰å…¨æ€§ï¼ŒGo çš„<code>sync</code> åŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å¹¶å‘å®‰å…¨ç‰ˆ map <code>sync.Map</code></p><ul><li>å¼€ç®±å³ç”¨ ä¸éœ€è¦åƒå†…ç½® map ä¸€æ ·ä½¿ç”¨makeåˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨</li><li><code>sync.Map</code> å†…ç½®äº†<code>Store</code>,  <code>Load</code>, <code>LoadOrStore</code>, <code>Delete</code>, <code>Range</code> ç­‰æ–¹æ³•</li></ul></li><li><p>```go<br>var m = sync.Map{}</p><p>func main() {</p><pre><code>wg := sync.WaitGroup&#123;&#125;for i := 0; i &lt; 20; i++ &#123;    wg.Add(1)    go func(n int) &#123;        key := strconv.Itoa(n)        m.Store(key, n)        value, _ := m.Load(key)        fmt.Printf(&quot;k=:%v,v:=%v\n&quot;, key, value)        wg.Done()    &#125;(i)&#125;wg.Wait()</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># åŸå­æ“ä½œ</span><br><span class="line"></span><br><span class="line">* åŠ é”æ“ä½œï¼šæ¶‰åŠå†…æ ¸æ€çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¼šæ¯”è¾ƒè€—æ—¶ã€ä»£ä»·æ¯”è¾ƒé«˜</span><br><span class="line">* é’ˆå¯¹**åŸºæœ¬æ•°æ®ç±»å‹**ï¼Œä½¿ç”¨**åŸå­æ“ä½œ**ä¿è¯å¹¶å‘å®‰å…¨</span><br><span class="line">  * åŸå­æ“ä½œ æ˜¯Goæä¾›çš„æ–¹æ³•ï¼Œåœ¨ç”¨æˆ·æ€å®Œæˆï¼Œæ€§èƒ½æ¯”åŠ é”æ›´å¥½</span><br><span class="line">  * Go ä¸­åŸå­æ“ä½œç”±å†…ç½®æ ‡å‡†åº“`sync/atomic` æä¾›</span><br><span class="line"></span><br><span class="line">## atomicåŒ…</span><br><span class="line"></span><br><span class="line">* **æ–¹æ³•ï¼š**</span><br><span class="line">  * è¯»å–æ“ä½œï¼š`LoadInt`</span><br><span class="line">  * å†™å…¥æ“ä½œ: `StoreInt`</span><br><span class="line">  * ä¿®æ”¹æ“ä½œ : `AddInt`</span><br><span class="line">  * äº¤æ¢æ“ä½œ : `SwapInt`</span><br><span class="line">  * æ¯”è¾ƒå¹¶äº¤æ¢æ“ä½œ : `CompareAndSwapPointer`</span><br><span class="line"></span><br><span class="line">## ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">* æ¯”è¾ƒäº’æ–¥é”å’ŒåŸå­æ“ä½œçš„æ€§èƒ½</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  package main</span><br><span class="line">  </span><br><span class="line">  import (</span><br><span class="line">  &quot;fmt&quot;</span><br><span class="line">  &quot;sync&quot;</span><br><span class="line">  &quot;sync/atomic&quot;</span><br><span class="line">  &quot;time&quot;</span><br><span class="line">  )</span><br><span class="line">  </span><br><span class="line">  type Counter interface &#123;</span><br><span class="line">  Inc()</span><br><span class="line">  Load() int64</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // æ™®é€šç‰ˆ</span><br><span class="line">  type CommonCounter struct &#123;</span><br><span class="line">  counter int64</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func (c CommonCounter) Inc() &#123;</span><br><span class="line">  c.counter++</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func (c CommonCounter) Load() int64 &#123;</span><br><span class="line">  return c.counter</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // äº’æ–¥é”ç‰ˆ</span><br><span class="line">  type MutexCounter struct &#123;</span><br><span class="line">  counter int64</span><br><span class="line">  lock    sync.Mutex</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func (m *MutexCounter) Inc() &#123;</span><br><span class="line">  m.lock.Lock()</span><br><span class="line">  defer m.lock.Unlock()</span><br><span class="line">  m.counter++</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func (m *MutexCounter) Load() int64 &#123;</span><br><span class="line">  m.lock.Lock()</span><br><span class="line">  defer m.lock.Unlock()</span><br><span class="line">  return m.counter</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // åŸå­æ“ä½œç‰ˆ</span><br><span class="line">  type AtomicCounter struct &#123;</span><br><span class="line">  counter int64</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func (a *AtomicCounter) Inc() &#123;</span><br><span class="line">  atomic.AddInt64(&amp;a.counter, 1)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func (a *AtomicCounter) Load() int64 &#123;</span><br><span class="line">  return atomic.LoadInt64(&amp;a.counter)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func test(c Counter) &#123;</span><br><span class="line">  var wg sync.WaitGroup</span><br><span class="line">  start := time.Now()</span><br><span class="line">  for i := 0; i &lt; 1000; i++ &#123;</span><br><span class="line">  wg.Add(1)</span><br><span class="line">  go func() &#123;</span><br><span class="line">  c.Inc()</span><br><span class="line">  wg.Done()</span><br><span class="line">  &#125;()</span><br><span class="line">  &#125;</span><br><span class="line">  wg.Wait()</span><br><span class="line">  end := time.Now()</span><br><span class="line">  fmt.Println(c.Load(), end.Sub(start))</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  c1 := CommonCounter&#123;&#125; // éå¹¶å‘å®‰å…¨</span><br><span class="line">  test(c1)</span><br><span class="line">  c2 := MutexCounter&#123;&#125; // ä½¿ç”¨äº’æ–¥é”å®ç°å¹¶å‘å®‰å…¨</span><br><span class="line">  test(&amp;c2)</span><br><span class="line">  c3 := AtomicCounter&#123;&#125; // å¹¶å‘å®‰å…¨ä¸”æ¯”äº’æ–¥é”æ•ˆç‡æ›´é«˜</span><br><span class="line">  test(&amp;c3)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p><code>atomic</code> åŒ…æä¾›äº†åº•å±‚çš„åŸå­çº§å†…å­˜æ“ä½œï¼Œå¯¹äºåŒæ­¥ç®—æ³•çš„å®ç°å¾ˆæœ‰ç”¨</p></li><li></li></ul><h1 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h1><ol><li><p>ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goroutine</span><br></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel</span><br></pre></td></tr></table></figure><p>å®ç°ä¸€ä¸ªè®¡ç®—int64éšæœºæ•°å„ä½æ•°å’Œçš„ç¨‹åºã€‚</p><ol><li>å¼€å¯ä¸€ä¸ª<code>goroutine</code>å¾ªç¯ç”Ÿæˆint64ç±»å‹çš„éšæœºæ•°ï¼Œå‘é€åˆ°<code>jobChan</code></li><li>å¼€å¯24ä¸ª<code>goroutine</code>ä»<code>jobChan</code>ä¸­å–å‡ºéšæœºæ•°è®¡ç®—å„ä½æ•°çš„å’Œï¼Œå°†ç»“æœå‘é€åˆ°<code>resultChan</code></li><li>ä¸»<code>goroutine</code>ä»<code>resultChan</code>å–å‡ºç»“æœå¹¶æ‰“å°åˆ°ç»ˆç«¯è¾“å‡º</li></ol></li><li><p>ä¸ºäº†ä¿è¯ä¸šåŠ¡ä»£ç çš„æ‰§è¡Œæ€§èƒ½å°†ä¹‹å‰å†™çš„æ—¥å¿—åº“æ”¹å†™ä¸ºå¼‚æ­¥è®°å½•æ—¥å¿—æ–¹å¼ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>15 åå°„</title>
      <link href="p/16e69ce4.html"/>
      <url>p/16e69ce4.html</url>
      
        <content type="html"><![CDATA[<h1 id="15-åå°„"><a href="#15-åå°„" class="headerlink" title="15 åå°„"></a>15 åå°„</h1><h1 id="å˜é‡çš„å†…åœ¨æœºåˆ¶"><a href="#å˜é‡çš„å†…åœ¨æœºåˆ¶" class="headerlink" title="å˜é‡çš„å†…åœ¨æœºåˆ¶"></a>å˜é‡çš„å†…åœ¨æœºåˆ¶</h1><ul><li>Go çš„å˜é‡åˆ†ä¸ºä¸¤éƒ¨åˆ†<ul><li><strong>ç±»å‹ä¿¡æ¯</strong>ï¼šé¢„å…ˆå®šä¹‰å¥½çš„å…ƒä¿¡æ¯</li><li><strong>å€¼ä¿¡æ¯</strong>ï¼šç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯åŠ¨æ€å˜åŒ–çš„</li></ul></li></ul><h1 id="åå°„ä»‹ç»"><a href="#åå°„ä»‹ç»" class="headerlink" title="åå°„ä»‹ç»"></a>åå°„ä»‹ç»</h1><ul><li><strong>ç¨‹åºè¿è¡Œæ—¶</strong> <strong>å¯¹ç¨‹åºæœ¬èº«è¿›è¡Œè®¿é—®å’Œä¿®æ”¹</strong>çš„èƒ½åŠ›<ul><li>ä¸€èˆ¬ï¼Œç¨‹åºåœ¨ç¼–è¯‘æ—¶ï¼Œå˜é‡è¢«è½¬æ¢æˆå†…å­˜åœ°å€ï¼Œå˜é‡åä¸ä¼šè¢«ç¼–è¯‘å™¨å†™é“å¯æ‰§è¡Œéƒ¨åˆ†</li><li>åœ¨è¿è¡Œç¨‹åºæ—¶ï¼Œç¨‹åºæ— æ³•è·å–è‡ªèº«çš„ä¿¡æ¯</li></ul></li><li>ä½†å¯¹äº<strong>æ”¯æŒåå°„çš„è¯­è¨€</strong>ï¼Œåœ¨ç¨‹åº<strong>ç¼–è¯‘æ—¶</strong>ä¼šå°†å˜é‡çš„<strong>åå°„ä¿¡æ¯</strong>ï¼ˆå­—æ®µåã€ç±»å‹ä¿¡æ¯ã€ç»“æ„ä½“ä¿¡æ¯ç­‰ï¼‰æ•´åˆåˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå¹¶ç»™ç¨‹åºæä¾› <strong>æ¥å£</strong> è®¿é—®åå°„ä¿¡æ¯</li><li>Go åœ¨è¿è¡ŒæœŸé—´ ä½¿ç”¨ <strong>reflectåŒ…</strong> è®¿é—®ç¨‹åºçš„<strong>åå°„ä¿¡æ¯</strong></li></ul><h1 id="reflect-åŒ…"><a href="#reflect-åŒ…" class="headerlink" title="reflect åŒ…"></a>reflect åŒ…</h1><ul><li>åœ¨ Go çš„åå°„æœºåˆ¶ä¸­ï¼Œ<strong>ä»»ä½•æ¥å£å€¼</strong> éƒ½æ˜¯ç”±<code>ä¸€ä¸ªå…·ä½“ç±»å‹</code> å’Œ <code>å…·ä½“ç±»å‹çš„å€¼</code> ä¸¤éƒ¨åˆ†ç»„æˆ</li><li>åå°„ç›¸å…³åŠŸèƒ½ç”± å†…ç½® reflect åŒ…æä¾›ï¼Œ<ul><li>ä»»æ„æ¥å£å€¼åœ¨åå°„ä¸­éƒ½å¯ä»¥ç†è§£ä¸º<code>reflect.Type</code> å’Œ <code>reflect.Value</code> ä¸¤éƒ¨åˆ†ï¼Œ</li><li>reflect åŒ…æä¾›äº†<code>reflect.TypeOf</code> <code>reflect.ValueOf</code> è·å–ä»»æ„å¯¹è±¡çš„ Value å’Œ Type</li></ul></li></ul><h2 id="TypeOf"><a href="#TypeOf" class="headerlink" title="TypeOf"></a>TypeOf</h2><ul><li><p>ä½¿ç”¨<code>reflect.TypeOf()</code> å¯ä»¥è·å¾—ä»»æ„å€¼çš„<strong>ç±»å‹å¯¹è±¡<code>(reflect.Type)</code></strong>, ç¨‹åºé€šè¿‡ç±»å‹å¯¹è±¡å¯ä»¥è®¿é—®ä»»æ„å€¼çš„ç±»å‹ä¿¡æ¯</p><ul><li><p>```go<br>package main</p><p>import (</p><pre><code>&quot;fmt&quot;&quot;reflect&quot;</code></pre><p>)</p><p>func reflectType(x interface{}) {</p><pre><code>v := reflect.TypeOf(x)fmt.Printf(&quot;type:%v\n&quot;, v)</code></pre><p>}<br>func main() {</p><pre><code>var a float32 = 3.14reflectType(a) // type:float32var b int64 = 100reflectType(b) // type:int64</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### type name å’Œ type kind</span><br><span class="line"></span><br><span class="line">* åœ¨åå°„ä¸­ï¼Œå…³äºç±»å‹è¿˜åˆ’åˆ†ä¸ºä¸¤ç§ï¼š`ç±»å‹Type` å’Œ `ç§ç±»Kind`</span><br><span class="line"></span><br><span class="line">* `type` å…³é”®å­—ï¼Œä½¿æˆ‘ä»¬å¯ä»¥æ„é€ å¾ˆå¤šè‡ªå®šä¹‰ç±»å‹</span><br><span class="line"></span><br><span class="line">* `kind` æŒ‡åº•å±‚çš„ç±»å‹</span><br><span class="line"></span><br><span class="line">* åœ¨åå°„ä¸­ï¼Œéœ€è¦åŒºåˆ† æŒ‡é’ˆã€ç»“æ„ä½“ç­‰å¤§å“ç§çš„ç±»å‹æ—¶ï¼Œä¼šç”¨åˆ°`kind`</span><br><span class="line"></span><br><span class="line">* ç¤ºä¾‹ï¼šå®šä¹‰ æŒ‡é’ˆç±»å‹å’Œç»“æ„ä½“ç±»å‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    package main</span><br><span class="line">    </span><br><span class="line">    import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;reflect&quot;</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    type myInt int64</span><br><span class="line">    </span><br><span class="line">    func reflectType(x interface&#123;&#125;) &#123;</span><br><span class="line">    t := reflect.TypeOf(x)</span><br><span class="line">    fmt.Printf(&quot;type:%v kind:%v\n&quot;, t.Name(), t.Kind())</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    var a *float32 // æŒ‡é’ˆ</span><br><span class="line">    var b myInt    // è‡ªå®šä¹‰ç±»å‹</span><br><span class="line">    var c rune     // ç±»å‹åˆ«å</span><br><span class="line">    reflectType(a) // type: kind:ptr</span><br><span class="line">    reflectType(b) // type:myInt kind:int64</span><br><span class="line">    reflectType(c) // type:int32 kind:int32</span><br><span class="line">    </span><br><span class="line">    type person struct &#123;</span><br><span class="line">    name string</span><br><span class="line">    age  int</span><br><span class="line">    &#125;</span><br><span class="line">    type book struct&#123; title string &#125;</span><br><span class="line">    var d = person&#123;</span><br><span class="line">    name: &quot;æ²™æ²³å°ç‹å­&quot;,</span><br><span class="line">    age:  18,</span><br><span class="line">    &#125;</span><br><span class="line">    var e = book&#123;title: &quot;ã€Šè·Ÿå°ç‹å­å­¦Goè¯­è¨€ã€‹&quot;&#125;</span><br><span class="line">    reflectType(d) // type:person kind:struct</span><br><span class="line">    reflectType(e) // type:book kind:struct</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>Go çš„åå°„ä¸­ï¼Œåƒæ•°ç»„ã€åˆ‡ç‰‡ã€Mapã€æŒ‡é’ˆç­‰ç±»å‹å˜é‡ï¼Œä»–ä»¬çš„<code>.Name()</code>è¿”å›ç©º</p></li></ul></li><li><p><code>reflect</code> åŒ…ä¸­ï¼Œå®šä¹‰çš„ Kind ç±»å‹ï¼š</p><ul><li>```go<br>type Kind uint<br>const (<pre><code>Invalid Kind = iota  // éæ³•ç±»å‹Bool                 // å¸ƒå°”å‹Int                  // æœ‰ç¬¦å·æ•´å‹Int8                 // æœ‰ç¬¦å·8ä½æ•´å‹Int16                // æœ‰ç¬¦å·16ä½æ•´å‹Int32                // æœ‰ç¬¦å·32ä½æ•´å‹Int64                // æœ‰ç¬¦å·64ä½æ•´å‹Uint                 // æ— ç¬¦å·æ•´å‹Uint8                // æ— ç¬¦å·8ä½æ•´å‹Uint16               // æ— ç¬¦å·16ä½æ•´å‹Uint32               // æ— ç¬¦å·32ä½æ•´å‹Uint64               // æ— ç¬¦å·64ä½æ•´å‹Uintptr              // æŒ‡é’ˆFloat32              // å•ç²¾åº¦æµ®ç‚¹æ•°Float64              // åŒç²¾åº¦æµ®ç‚¹æ•°Complex64            // 64ä½å¤æ•°ç±»å‹Complex128           // 128ä½å¤æ•°ç±»å‹Array                // æ•°ç»„Chan                 // é€šé“Func                 // å‡½æ•°Interface            // æ¥å£Map                  // æ˜ å°„Ptr                  // æŒ‡é’ˆSlice                // åˆ‡ç‰‡String               // å­—ç¬¦ä¸²Struct               // ç»“æ„ä½“UnsafePointer        // åº•å±‚æŒ‡é’ˆ</code></pre>)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## ValueOf</span><br><span class="line"></span><br><span class="line">* `reflect.ValueOf()` è¿”å›çš„æ˜¯ `reflect.Value` ç±»å‹ï¼ŒåŒ…å«äº†**åŸå§‹å€¼**çš„å€¼ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">* `reflect.Value` ä¸**åŸå§‹å€¼**ä¹‹é—´å¯ä»¥**ç›¸äº’è½¬æ¢**</span><br><span class="line"></span><br><span class="line">* `reflect.Value` æä¾›è·å–åŸå§‹å€¼çš„æ–¹æ³•ï¼š</span><br><span class="line"></span><br><span class="line">  * |             æ–¹æ³•             |                             è¯´æ˜                             |</span><br><span class="line">    | :--------------------------: | :----------------------------------------------------------: |</span><br><span class="line">    | Interface() **interface &#123;&#125;** | å°†å€¼ä»¥ interface&#123;&#125; ç±»å‹è¿”å›ï¼Œå¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€è½¬æ¢ä¸ºæŒ‡å®šç±»å‹  |</span><br><span class="line">    |         Int() int64          |     å°†å€¼ä»¥ int ç±»å‹è¿”å›ï¼Œæ‰€æœ‰æœ‰ç¬¦å·æ•´å‹å‡å¯ä»¥æ­¤æ–¹å¼è¿”å›      |</span><br><span class="line">    |        Uint() uint64         |     å°†å€¼ä»¥ uint ç±»å‹è¿”å›ï¼Œæ‰€æœ‰æ— ç¬¦å·æ•´å‹å‡å¯ä»¥æ­¤æ–¹å¼è¿”å›     |</span><br><span class="line">    |       Float() float64        | å°†å€¼ä»¥åŒç²¾åº¦ï¼ˆfloat64ï¼‰ç±»å‹è¿”å›ï¼Œæ‰€æœ‰æµ®ç‚¹æ•°ï¼ˆfloat32ã€float64ï¼‰å‡å¯ä»¥æ­¤æ–¹å¼è¿”å› |</span><br><span class="line">    |         Bool() bool          |                     å°†å€¼ä»¥ bool ç±»å‹è¿”å›                     |</span><br><span class="line">    |       Bytes() []bytes        |               å°†å€¼ä»¥å­—èŠ‚æ•°ç»„ []bytes ç±»å‹è¿”å›                |</span><br><span class="line">    |       String() string        |                     å°†å€¼ä»¥å­—ç¬¦ä¸²ç±»å‹è¿”å›                     |</span><br><span class="line"></span><br><span class="line">### é€šè¿‡åå°„è·å–å€¼</span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">func reflectValue(x interface&#123;&#125;) &#123;</span><br><span class="line">v := reflect.ValueOf(x)</span><br><span class="line">k := v.Kind()</span><br><span class="line">switch k &#123;</span><br><span class="line">case reflect.Int64:</span><br><span class="line">// v.Int()ä»åå°„ä¸­è·å–æ•´å‹çš„åŸå§‹å€¼ï¼Œç„¶åé€šè¿‡int64()å¼ºåˆ¶ç±»å‹è½¬æ¢</span><br><span class="line">fmt.Printf(&quot;type is int64, value is %d\n&quot;, int64(v.Int()))</span><br><span class="line">case reflect.Float32:</span><br><span class="line">// v.Float()ä»åå°„ä¸­è·å–æµ®ç‚¹å‹çš„åŸå§‹å€¼ï¼Œç„¶åé€šè¿‡float32()å¼ºåˆ¶ç±»å‹è½¬æ¢</span><br><span class="line">fmt.Printf(&quot;type is float32, value is %f\n&quot;, float32(v.Float()))</span><br><span class="line">case reflect.Float64:</span><br><span class="line">// v.Float()ä»åå°„ä¸­è·å–æµ®ç‚¹å‹çš„åŸå§‹å€¼ï¼Œç„¶åé€šè¿‡float64()å¼ºåˆ¶ç±»å‹è½¬æ¢</span><br><span class="line">fmt.Printf(&quot;type is float64, value is %f\n&quot;, float64(v.Float()))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">var a float32 = 3.14</span><br><span class="line">var b int64 = 100</span><br><span class="line">reflectValue(a) // type is float32, value is 3.140000</span><br><span class="line">reflectValue(b) // type is int64, value is 100</span><br><span class="line">// å°†intç±»å‹çš„åŸå§‹å€¼è½¬æ¢ä¸ºreflect.Valueç±»å‹</span><br><span class="line">c := reflect.ValueOf(10)</span><br><span class="line">fmt.Printf(&quot;type c :%T\n&quot;, c) // type c :reflect.Value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="é€šè¿‡åå°„è®¾ç½®å˜é‡çš„å€¼"><a href="#é€šè¿‡åå°„è®¾ç½®å˜é‡çš„å€¼" class="headerlink" title="é€šè¿‡åå°„è®¾ç½®å˜é‡çš„å€¼"></a>é€šè¿‡åå°„è®¾ç½®å˜é‡çš„å€¼</h3><ul><li><p>åœ¨å‡½æ•°ä¸­é€šè¿‡åå°„ä¿®æ”¹å˜é‡çš„å€¼ï¼Œéœ€è¦<strong>ä¼ é€’å˜é‡åœ°å€</strong>æ‰èƒ½ä¿®æ”¹å˜é‡å€¼</p></li><li><p>åå°„ä¸­ï¼Œä½¿ç”¨ä¸“æœ‰çš„<code>Elem()</code>æ–¹æ³•<strong>å¯ä»¥è·å–æŒ‡é’ˆå¯¹åº”çš„å€¼</strong></p><ul><li>```go<br>package mainimport (<pre><code>&quot;fmt&quot;&quot;reflect&quot;</code></pre>)func reflectSetValue1(x interface{}) {<pre><code>v := reflect.ValueOf(x)if v.Kind() == reflect.Int64 &#123;    v.SetInt(200) //ä¿®æ”¹çš„æ˜¯å‰¯æœ¬ï¼ŒreflectåŒ…ä¼šå¼•å‘panic&#125;</code></pre>}<br>func reflectSetValue2(x interface{}) {<pre><code>v := reflect.ValueOf(x)// åå°„ä¸­ä½¿ç”¨ Elem()æ–¹æ³•è·å–æŒ‡é’ˆå¯¹åº”çš„å€¼if v.Elem().Kind() == reflect.Int64 &#123;    v.Elem().SetInt(200)&#125;</code></pre>}<br>func main() {<pre><code>var a int64 = 100// reflectSetValue1(a) //panic: reflect: reflect.Value.SetInt using unaddressable valuereflectSetValue2(&amp;a)fmt.Println(a)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### IsNil() å’Œ IsValid</span><br><span class="line"></span><br><span class="line">#### IsNil()</span><br><span class="line"></span><br><span class="line">* å‡½æ•°åŸå‹ï¼š`func (v Value) IsNil() bool`</span><br><span class="line"></span><br><span class="line">* åˆ¤æ–­ v æŒæœ‰çš„å€¼æ˜¯å¦ä¸º`Nil`</span><br><span class="line">  * v æŒæœ‰çš„å€¼çš„åˆ†ç±»å¿…é¡»æ˜¯é€šé“ã€å‡½æ•°ã€æ¥å£ã€æ˜ å°„ã€æŒ‡é’ˆã€åˆ‡ç‰‡ä¹‹ä¸€ï¼Œ</span><br><span class="line">  * å¦åˆ™`IsNil`å‡½æ•°ä¼šå¯¼è‡´ panic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### IsValid</span><br><span class="line"></span><br><span class="line">* å‡½æ•°åŸå‹ï¼š`func (v Value) IsValid() bool`</span><br><span class="line"></span><br><span class="line">* åˆ¤æ–­ v æ˜¯å¦æŒæœ‰ä¸€ä¸ªå€¼ï¼Œå¦‚æœ v æ˜¯**Valueé›¶å€¼**ï¼Œè¿”å›å‡ï¼Œæ­¤æ—¶vé™¤äº†IsValid , String, Kind ä¹‹å¤–çš„æ–¹æ³•éƒ½ä¼šå¯¼è‡´ panic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">* `IsNil` å¸¸ç”¨äºåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºç©º</span><br><span class="line">* `IsValid` å¸¸ç”¨äºåˆ¤æ–­è¿”å›å€¼æ˜¯å¦æœ‰æ•ˆ</span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">func main() &#123;</span><br><span class="line">// *intç±»å‹ç©ºæŒ‡é’ˆ</span><br><span class="line">var a *int</span><br><span class="line">fmt.Println(&quot;var a *int IsNil:&quot;, reflect.ValueOf(a).IsNil())</span><br><span class="line">// nilå€¼</span><br><span class="line">fmt.Println(&quot;nil IsValid:&quot;, reflect.ValueOf(nil).IsValid())</span><br><span class="line">// å®ä¾‹åŒ–ä¸€ä¸ªåŒ¿åç»“æ„ä½“</span><br><span class="line">b := struct&#123;&#125;&#123;&#125;</span><br><span class="line">// å°è¯•ä»ç»“æ„ä½“ä¸­æŸ¥æ‰¾&quot;abc&quot;å­—æ®µ</span><br><span class="line">fmt.Println(&quot;ä¸å­˜åœ¨çš„ç»“æ„ä½“æˆå‘˜:&quot;, reflect.ValueOf(b).FieldByName(&quot;abc&quot;).IsValid())</span><br><span class="line">// å°è¯•ä»ç»“æ„ä½“ä¸­æŸ¥æ‰¾&quot;abc&quot;æ–¹æ³•</span><br><span class="line">fmt.Println(&quot;ä¸å­˜åœ¨çš„ç»“æ„ä½“æ–¹æ³•:&quot;, reflect.ValueOf(b).MethodByName(&quot;abc&quot;).IsValid())</span><br><span class="line">// map</span><br><span class="line">c := map[string]int&#123;&#125;</span><br><span class="line">// å°è¯•ä»mapä¸­æŸ¥æ‰¾ä¸€ä¸ªä¸å­˜åœ¨çš„é”®</span><br><span class="line">fmt.Println(&quot;mapä¸­ä¸å­˜åœ¨çš„é”®ï¼š&quot;, reflect.ValueOf(c).MapIndex(reflect.ValueOf(&quot;å¨œæ‰&quot;)).IsValid())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="ç»“æ„ä½“åå°„"><a href="#ç»“æ„ä½“åå°„" class="headerlink" title="ç»“æ„ä½“åå°„"></a>ç»“æ„ä½“åå°„</h1><h2 id="ä¸ç»“æ„ä½“ç›¸å…³çš„æ–¹æ³•"><a href="#ä¸ç»“æ„ä½“ç›¸å…³çš„æ–¹æ³•" class="headerlink" title="ä¸ç»“æ„ä½“ç›¸å…³çš„æ–¹æ³•"></a>ä¸ç»“æ„ä½“ç›¸å…³çš„æ–¹æ³•</h2><h2 id="ç»“æ„ä½“åå°„ç¤ºä¾‹"><a href="#ç»“æ„ä½“åå°„ç¤ºä¾‹" class="headerlink" title="ç»“æ„ä½“åå°„ç¤ºä¾‹"></a>ç»“æ„ä½“åå°„ç¤ºä¾‹</h2><h1 id="åå°„æ˜¯æŠŠåŒåˆƒå‰‘"><a href="#åå°„æ˜¯æŠŠåŒåˆƒå‰‘" class="headerlink" title="åå°„æ˜¯æŠŠåŒåˆƒå‰‘"></a>åå°„æ˜¯æŠŠåŒåˆƒå‰‘</h1><ul><li>åå°„å¼ä¸€ä¸ªå¼ºå¤§å¹¶å¯Œæœ‰è¡¨ç°åŠ›çš„å·¥å…·ï¼Œèƒ½ä½¿å¾—æˆ‘ä»¬å†™å‡ºçµæ´»çš„ä»£ç <ul><li>åŸºäºåå°„çš„ä»£ç ååˆ†è„†å¼±ï¼Œåå°„ä¸­ç±»å‹é”™è¯¯ä¼šåœ¨çœŸæ­£è¿è¡Œçš„æ—¶å€™æ‰ä¼šå¼•å‘ panic ï¼Œé‚£å¾ˆå¯èƒ½æ˜¯åœ¨ä»£ç å†™å®Œçš„å¾ˆé•¿æ—¶é—´ä¹‹å</li><li>å¤§é‡ä½¿ç”¨åå°„çš„ä»£ç é€šå¸¸éš¾ä»¥ç†è§£</li><li>åå°„çš„æ€§èƒ½ä½ä¸‹</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>14 æ¥å£</title>
      <link href="p/f9eadfe2.html"/>
      <url>p/f9eadfe2.html</url>
      
        <content type="html"><![CDATA[<h1 id="14-æ¥å£"><a href="#14-æ¥å£" class="headerlink" title="14 æ¥å£"></a>14 æ¥å£</h1><ul><li><code>Interface</code> å®šä¹‰äº†<strong>ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºè§„èŒƒ</strong>ï¼Œ</li><li>åªå®šä¹‰è§„èŒƒè€Œä¸å®ç°ï¼Œç”±<strong>å…·ä½“çš„å¯¹è±¡æ¥å®ç°è§„èŒƒçš„ç»†èŠ‚</strong></li></ul><h1 id="æ¥å£ç±»å‹"><a href="#æ¥å£ç±»å‹" class="headerlink" title="æ¥å£ç±»å‹"></a>æ¥å£ç±»å‹</h1><ul><li>`Interface Â·æ˜¯ä¸€ç§æŠ½è±¡çš„ç±»å‹</li><li><code>Interface</code>  æ˜¯ä¸€ç»„ <code>method</code>çš„é›†åˆï¼Œæ˜¯ <code>duck-type programming</code>çš„ä¸€ç§ä½“ç°</li><li>æ¥å£çš„ä½œç”¨ï¼šå®šä¹‰ä¸€ä¸ªåå®š(è§„åˆ™)ï¼Œ<ul><li>ä¸ç”¨å…³å¿ƒå…¶æ•°æ®ï¼Œå’Œæ–¹æ³•å…·ä½“æ˜¯ä»€ä¹ˆ</li></ul></li><li>`InterfaceÂ· æ˜¯ä¸€ç§ç±»å‹</li></ul><h1 id="ä¸ºä»€ä¹ˆä½¿ç”¨æ¥å£"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨æ¥å£" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨æ¥å£"></a>ä¸ºä»€ä¹ˆä½¿ç”¨æ¥å£</h1><ul><li><p>```go<br>type Cat struct{}</p><p>func (c Cat) Say() string { return â€œå–µå–µå–µâ€ }</p><p>type Dog struct{}</p><p>func (d Dog) Say() string { return â€œæ±ªæ±ªæ±ªâ€ }</p><p>func main() {</p><pre><code>c := Cat&#123;&#125;fmt.Println(&quot;çŒ«:&quot;, c.Say())d := Dog&#123;&#125;fmt.Println(&quot;ç‹—:&quot;, d.Say())</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* å…±åŒç‰¹ç‚¹ï¼šéƒ½ä¼šå«</span><br><span class="line"></span><br><span class="line">  * æœ‰é‡å¤ä»£ç </span><br><span class="line">* ä¸ºäº†è§£å†³ æœ‰å…±åŒç‰¹ç‚¹è€Œå¯¼è‡´çš„ä»£ç é‡å¤ï¼Œè®¾è®¡äº†æ¥å£</span><br><span class="line">* æ¥å£æ˜¯ä¸€ç§æŠ½è±¡çš„ç±»å‹ï¼Œ</span><br><span class="line"></span><br><span class="line">  * çœ‹åˆ°ä¸€ä¸ªæ¥å£ï¼ŒåªçŸ¥é“é€šè¿‡å®ƒçš„æ–¹æ³•èƒ½åšä»€ä¹ˆ</span><br><span class="line"></span><br><span class="line"># æ¥å£çš„å®šä¹‰</span><br><span class="line"></span><br><span class="line">* Go æå€¡é¢å‘æ¥å£ç¼–ç¨‹</span><br><span class="line">* æ¯ä¸ªæ¥å£ç”±æ•°ä¸ªæ–¹æ³•ç»„æˆï¼Œå®šä¹‰æ ¼å¼:</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    type æ¥å£ç±»å‹å interface&#123;</span><br><span class="line">        æ–¹æ³•å1(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨</span><br><span class="line">        æ–¹æ³•å2(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li><p><strong>æ¥å£å</strong>ï¼šè‡ªå®šä¹‰çš„ç±»å‹å</p><ul><li>ä¸€èˆ¬å‘½åæ—¶ï¼Œåœ¨å•è¯å <code>er</code> , æ¥å£åæœ€å¥½èƒ½çªå‡ºè¯¥æ¥å£çš„ç±»å‹å«ä¹‰</li></ul></li><li><p><strong>æ–¹æ³•åï¼š</strong>å½“æ¥å£åé¦–å­—æ¯æ˜¯å¤§å†™ï¼Œå¹¶ä¸”æ–¹æ³•åé¦–å­—æ¯ä¹Ÿæ˜¯å¤§å†™æ—¶ï¼Œæ–¹æ³•å¯ä»¥è¢«æ¥å£æ˜¯æ‰€åœ¨çš„åŒ… ä¹‹å¤–çš„ä»£ç è®¿é—®</p></li><li><p><strong>å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼åˆ—è¡¨ï¼š</strong>å…¶ä¸­çš„å‚æ•°å˜é‡åå¯ä»¥çœç•¥</p></li></ul></li></ul><h1 id="å®ç°æ¥å£çš„æ¡ä»¶"><a href="#å®ç°æ¥å£çš„æ¡ä»¶" class="headerlink" title="å®ç°æ¥å£çš„æ¡ä»¶"></a>å®ç°æ¥å£çš„æ¡ä»¶</h1><ul><li><p>æ¥å£ æ˜¯ä¸€ä¸ª<strong>éœ€è¦å®ç°çš„æ–¹æ³•åˆ—è¡¨</strong></p></li><li><p>å®ç°äº†æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•ï¼Œå°±å®ç°äº†è¿™ä¸ªæ¥å£</p></li><li><p>ç¤ºä¾‹ï¼š</p><ul><li><p>å®šä¹‰ <code>Sayer</code> æ¥å£ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Sayer <span class="keyword">interface</span>&#123;</span><br><span class="line">say()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®šä¹‰ç»“æ„ä½“</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"><span class="keyword">type</span> cat <span class="keyword">struct</span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>éœ€è¦<strong>å¯¹dogå’Œcat</strong>åˆ†åˆ«å®ç° <code>say</code>æ–¹æ³•ï¼Œå³å¯å®ç°Sayeræ¥å£</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dogå®ç°äº†Sayeræ¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d dog)</span> <span class="title">say</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;æ±ªæ±ªæ±ª&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// catå®ç°äº†Sayeræ¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c cat)</span> <span class="title">say</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;å–µå–µå–µ&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="æ¥å£ç±»å‹å˜é‡"><a href="#æ¥å£ç±»å‹å˜é‡" class="headerlink" title="æ¥å£ç±»å‹å˜é‡"></a>æ¥å£ç±»å‹å˜é‡</h1><ul><li><p><strong>æ¥å£ç±»å‹å˜é‡</strong> èƒ½<strong>å­˜å‚¨æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„å®ä¾‹</strong></p><ul><li>ä¾‹å¦‚ï¼Œ<code>Sayer</code> ç±»å‹çš„å˜é‡èƒ½å­˜å‚¨ <code>dog</code>å’Œ <code>cat</code>ç±»å‹çš„å˜é‡</li><li>```go<br>func main() {<pre><code>var x Sayer // å£°æ˜ä¸€ä¸ªSayerç±»å‹çš„å˜é‡xa := cat&#123;&#125;  // å®ä¾‹åŒ–ä¸€ä¸ªcatb := dog&#123;&#125;  // å®ä¾‹åŒ–ä¸€ä¸ªdogx = a       // å¯ä»¥æŠŠcatå®ä¾‹ç›´æ¥èµ‹å€¼ç»™xx.say()     // å–µå–µå–µx = b       // å¯ä»¥æŠŠdogå®ä¾‹ç›´æ¥èµ‹å€¼ç»™xx.say()     // æ±ªæ±ªæ±ª</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* ```go</span><br><span class="line">  // æ‘˜è‡ªginæ¡†æ¶routergroup.go</span><br><span class="line">  type IRouter interface&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">  type RouterGroup struct &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">  var _ IRouter = &amp;RouterGroup&#123;&#125;  // ç¡®ä¿RouterGroupå®ç°äº†æ¥å£IRouter</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ç¡®ä¿ <code>RouterGroup</code> ä¸€å®šå®ç°äº† <code>IRouter</code></p></li></ul><h1 id="å€¼æ¥æ”¶è€…-å’Œ-æŒ‡é’ˆæ¥æ”¶è€…-å®ç°æ¥å£çš„åŒºåˆ«"><a href="#å€¼æ¥æ”¶è€…-å’Œ-æŒ‡é’ˆæ¥æ”¶è€…-å®ç°æ¥å£çš„åŒºåˆ«" class="headerlink" title="å€¼æ¥æ”¶è€… å’Œ æŒ‡é’ˆæ¥æ”¶è€… å®ç°æ¥å£çš„åŒºåˆ«"></a>å€¼æ¥æ”¶è€… å’Œ æŒ‡é’ˆæ¥æ”¶è€… å®ç°æ¥å£çš„åŒºåˆ«</h1><ul><li><p>ç¤ºä¾‹ï¼Œä¸€ä¸ª <code>Mover</code> æ¥å£å’Œ <code>dog</code> ç»“æ„ä½“</p><ul><li><p>```go<br>type Mover interface {</p><pre><code>move()</code></pre><p>}</p><p>type dog struct {}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## å€¼æ¥æ”¶è€…å®ç°æ¥å£</span><br><span class="line"></span><br><span class="line">* dog ç±»å‹å®ç°æ¥å£ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func (d dog) move() &#123;</span><br><span class="line">    fmt.Println(&quot;ç‹—ä¼šåŠ¨&quot;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>```go<br>func main() {</p><pre><code>var x Movervar wangcai = dog&#123;&#125; // æ—ºè´¢æ˜¯dogç±»å‹x = wangcai         // xå¯ä»¥æ¥æ”¶dogç±»å‹var fugui = &amp;dog&#123;&#125;  // å¯Œè´µæ˜¯*dogç±»å‹x = fugui           // xå¯ä»¥æ¥æ”¶*dogç±»å‹x.move()</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* ä½¿ç”¨å€¼æ¥æ”¶è€…å®ç°æ¥å£ åï¼Œd**og ç»“æ„ä½“å’Œç»“æ„ä½“æŒ‡é’ˆç±»å‹çš„å˜é‡** éƒ½å¯ä»¥èµ‹å€¼ç»™è¯¥æ¥å£å˜é‡</span><br><span class="line"></span><br><span class="line">  * ç”±äºGoä¸­æœ‰å¯¹æŒ‡é’ˆç±»å‹å˜é‡æ±‚å€¼çš„è¯­æ³•ç³–ï¼ŒæŒ‡é’ˆç±»å‹å†…éƒ¨ä¼šè‡ªåŠ¨æ±‚å€¼</span><br><span class="line"></span><br><span class="line">### æŒ‡é’ˆæ¥æ”¶è€…å®ç°æ¥å£</span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">func (d *dog) move() &#123;</span><br><span class="line">fmt.Println(&quot;ç‹—ä¼šåŠ¨&quot;)</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">var x Mover</span><br><span class="line">var wangcai = dog&#123;&#125; // æ—ºè´¢æ˜¯dogç±»å‹</span><br><span class="line">x = wangcai         // xä¸å¯ä»¥æ¥æ”¶dogç±»å‹</span><br><span class="line">var fugui = &amp;dog&#123;&#125;  // å¯Œè´µæ˜¯*dogç±»å‹</span><br><span class="line">x = fugui           // xå¯ä»¥æ¥æ”¶*dogç±»å‹</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ­¤æ—¶å®ç° <code>Mover</code> æ¥å£çš„æ˜¯ <code>*dog</code>ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½ç»™ x ä¼ å…¥ dogç±»å‹çš„wangcaiï¼Œæ­¤æ—¶xåªèƒ½å­˜å‚¨*dogç±»å‹çš„å€¼</p></li></ul><h3 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h3><ul><li><p>èƒ½å¦é€šè¿‡ç¼–è¯‘</p></li><li><p>```go<br>type People interface {</p><pre><code>Speak(string) string</code></pre><p>}</p><p>type Student struct{}</p><p>func (stu *Student) Speak(think string) (talk string) {</p><pre><code>if think == &quot;sb&quot; &#123;    talk = &quot;ä½ æ˜¯ä¸ªå¤§å¸…æ¯”&quot;&#125; else &#123;    talk = &quot;æ‚¨å¥½&quot;&#125;return</code></pre><p>}</p><p>func main() {</p><pre><code>var peo People = Student&#123;&#125;think := &quot;bitch&quot;fmt.Println(peo.Speak(think))</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* ä¸èƒ½ã€‚å¯èƒ½æ˜¯å› ä¸º `var peo People = Student&#123;&#125;`</span><br><span class="line"></span><br><span class="line">  * å®ç°Peopleæ¥å£çš„æ˜¯ `*Student`ç±»å‹</span><br><span class="line">* å°†å…¶ä¿®æ”¹åï¼š`æ‚¨å¥½`</span><br><span class="line"></span><br><span class="line"># ç±»å‹ä¸æ¥å£çš„å…³ç³»</span><br><span class="line"></span><br><span class="line">## ä¸€ä¸ªç±»å‹å®ç°å¤šä¸ªæ¥å£</span><br><span class="line"></span><br><span class="line">* **ä¸€ä¸ªç±»å‹**å¯ä»¥**åŒæ—¶å®ç°å¤šä¸ªæ¥å£**ï¼Œè€Œæ¥å£é—´å½¼æ­¤ç‹¬ç«‹ï¼Œä¸çŸ¥é“å¯¹æ–¹çš„å®ç°</span><br><span class="line"></span><br><span class="line">  * ä¾‹å¦‚ï¼Œç‹—å¯ä»¥å«ï¼Œä¹Ÿå¯ä»¥åŠ¨ã€‚å®šä¹‰ `Sayer` å’Œ `Mover` æ¥å£ï¼š</span><br><span class="line"></span><br><span class="line">    * ```go</span><br><span class="line">      // Sayer æ¥å£</span><br><span class="line">      type Sayer interface &#123;</span><br><span class="line">      say()</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // Mover æ¥å£</span><br><span class="line">      type Mover interface &#123;</span><br><span class="line">      move()</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><ul><li><p>å¯¹ dog å®ç° <code>Sayer</code> å’Œ <code>Mover</code> æ¥å£</p><ul><li><p>```go<br>type dog struct {</p><pre><code>name string</code></pre><p>}</p><p>// å®ç°Sayeræ¥å£<br>func (d dog) say() {</p><pre><code>fmt.Printf(&quot;%sä¼šå«æ±ªæ±ªæ±ª\n&quot;, d.name)</code></pre><p>}</p><p>// å®ç°Moveræ¥å£<br>func (d dog) move() {</p><pre><code>fmt.Printf(&quot;%sä¼šåŠ¨\n&quot;, d.name)</code></pre><p>}</p><p>func main() {</p><pre><code>var x Sayervar y Movervar a = dog&#123;name: &quot;æ—ºè´¢&quot;&#125;x = ay = ax.say()y.move()</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## å¤šä¸ªç±»å‹å®ç°ç»Ÿä¸€æ¥å£</span><br><span class="line"></span><br><span class="line">* **ä¸åŒçš„ç±»å‹** å¯ä»¥ **å®ç°ç»Ÿä¸€æ¥å£**</span><br><span class="line"></span><br><span class="line">  * å®šä¹‰ä¸€ä¸ª `Mover`æ¥å£ï¼Œæœ‰ä¸€ä¸ª move æ–¹æ³•</span><br><span class="line"></span><br><span class="line">    * ```go</span><br><span class="line">      // Mover æ¥å£</span><br><span class="line">      type Mover interface &#123;</span><br><span class="line">      move()</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¤šä¸ªç±»å‹å®ç° <code>Mover</code>çš„æ–¹æ³• <code>move</code></p><ul><li><p>```go<br>type dog struct {</p><pre><code>name string</code></pre><p>}</p><p>type car struct {</p><pre><code>brand string</code></pre><p>}</p><p>// dogç±»å‹å®ç°Moveræ¥å£<br>func (d dog) move() {</p><pre><code>fmt.Printf(&quot;%sä¼šè·‘\n&quot;, d.name)</code></pre><p>}</p><p>// carç±»å‹å®ç°Moveræ¥å£<br>func (c car) move() {</p><pre><code>fmt.Printf(&quot;%sé€Ÿåº¦70è¿ˆ\n&quot;, c.brand)</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* åœ¨ä»£ç ä¸­ï¼Œå°±å¯ä»¥æŠŠä¸åŒçš„ç±»å‹ï¼Œå½“æˆæ‹¥æœ‰åŒä¸€ç‰¹æ€§çš„ç‰©ä½“å¤„ç†ï¼Œä¸éœ€è¦å…³æ³¨å…·ä½“æ˜¯ä»€ä¹ˆï¼Œ</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func main() &#123;</span><br><span class="line">    var x Mover</span><br><span class="line">    var a = dog&#123;name: &quot;æ—ºè´¢&quot;&#125;</span><br><span class="line">    var b = car&#123;brand: &quot;ä¿æ—¶æ·&quot;&#125;</span><br><span class="line">    x = a</span><br><span class="line">    x.move()</span><br><span class="line">    x = b</span><br><span class="line">    x.move()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>ä¸€ä¸ªæ¥å£çš„æ–¹æ³•ï¼Œä¸ä¸€å®šéœ€è¦ç”±ä¸€ä¸ªç±»å‹å®Œå…¨å®ç°ï¼Œæ¥å£çš„æ–¹æ³•å¯ä»¥é€šè¿‡åœ¨ç±»å‹ä¸­åµŒå…¥å…¶ä»–ç±»å‹æˆ–è€…ç»“æ„ä½“æ¥å®ç°</p><ul><li><p>```go<br>// WashingMachine æ´—è¡£æœº<br>type WashingMachine interface {</p><pre><code>wash()dry()</code></pre><p>}</p><p>// ç”©å¹²å™¨<br>type dryer struct{}</p><p>// å®ç°WashingMachineæ¥å£çš„dry()æ–¹æ³•<br>func (d dryer) dry() {</p><pre><code>fmt.Println(&quot;ç”©ä¸€ç”©&quot;)</code></pre><p>}</p><p>// æµ·å°”æ´—è¡£æœº<br>type haier struct {</p><pre><code>dryer //åµŒå…¥ç”©å¹²å™¨</code></pre><p>}</p><p>// å®ç°WashingMachineæ¥å£çš„wash()æ–¹æ³•<br>func (h haier) wash() {</p><pre><code>fmt.Println(&quot;æ´—åˆ·åˆ·&quot;)</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># æ¥å£åµŒå¥—</span><br><span class="line"></span><br><span class="line">* æ¥å£ä¸æ¥å£ é—´ å¯ä»¥é€šè¿‡ åµŒå¥—åˆ›é€ æ–°çš„æ¥å£</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    // Sayer æ¥å£</span><br><span class="line">    type Sayer interface &#123;</span><br><span class="line">    say()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Mover æ¥å£</span><br><span class="line">    type Mover interface &#123;</span><br><span class="line">    move()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ¥å£åµŒå¥—</span><br><span class="line">    type animal interface &#123;</span><br><span class="line">    Sayer</span><br><span class="line">    Mover</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åµŒå¥—å¾—åˆ°çš„æ¥å£ ä½¿ç”¨ä¸æ™®é€šæ¥å£ä¸€è‡´ï¼Œ</p><ul><li><p>```go<br>type cat struct {</p><pre><code>name string</code></pre><p>}</p><p>func (c cat) say() {</p><pre><code>fmt.Println(&quot;å–µå–µå–µ&quot;)</code></pre><p>}</p><p>func (c cat) move() {</p><pre><code>fmt.Println(&quot;çŒ«ä¼šåŠ¨&quot;)</code></pre><p>}</p><p>func main() {</p><pre><code>var x animalx = cat&#123;name: &quot;èŠ±èŠ±&quot;&#125;x.move()x.say()</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># ç©ºæ¥å£</span><br><span class="line"></span><br><span class="line">## ç©ºæ¥å£çš„å®šä¹‰</span><br><span class="line"></span><br><span class="line">* æ²¡æœ‰æŒ‡å®šä»»ä½•æ–¹æ³•çš„æ¥å£ï¼Œ**ä»»ä½•ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£**</span><br><span class="line">* **ç©ºæ¥å£ç±»å‹çš„å˜é‡**å¯ä»¥**å­˜å‚¨ä»»æ„ç±»å‹çš„å˜é‡**</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func main() &#123;</span><br><span class="line">    // å®šä¹‰ä¸€ä¸ªç©ºæ¥å£x</span><br><span class="line">    var x interface&#123;&#125;</span><br><span class="line">    s := &quot;Hello æ²™æ²³&quot;</span><br><span class="line">    x = s</span><br><span class="line">    fmt.Printf(&quot;type:%T value:%v\n&quot;, x, x)</span><br><span class="line">    i := 100</span><br><span class="line">    x = i</span><br><span class="line">    fmt.Printf(&quot;type:%T value:%v\n&quot;, x, x)</span><br><span class="line">    b := true</span><br><span class="line">    x = b</span><br><span class="line">    fmt.Printf(&quot;type:%T value:%v\n&quot;, x, x)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="ç©ºæ¥å£çš„åº”ç”¨"><a href="#ç©ºæ¥å£çš„åº”ç”¨" class="headerlink" title="ç©ºæ¥å£çš„åº”ç”¨"></a>ç©ºæ¥å£çš„åº”ç”¨</h2><h3 id="ç©ºæ¥å£ä½œä¸ºå‡½æ•°çš„å‚æ•°"><a href="#ç©ºæ¥å£ä½œä¸ºå‡½æ•°çš„å‚æ•°" class="headerlink" title="ç©ºæ¥å£ä½œä¸ºå‡½æ•°çš„å‚æ•°"></a>ç©ºæ¥å£ä½œä¸ºå‡½æ•°çš„å‚æ•°</h3><ul><li><p>ä½¿ç”¨ç©ºæ¥å£å¯ä»¥å®ç°æ¥å— <strong>ä»»æ„ç±»å‹çš„å‡½æ•°å‚æ•°</strong></p><ul><li>```go<br>// ç©ºæ¥å£ä½œä¸ºå‡½æ•°å‚æ•°<br>func show(a interface{}) {<pre><code>fmt.Printf(&quot;type:%T value:%v\n&quot;, a, a)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### ç©ºæ¥å£ä½œä¸º map çš„å€¼</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨ç©ºæ¥å£å®ç° å¯ä»¥**ä¿å­˜ä»»æ„å€¼çš„å­—å…¸**</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    // ç©ºæ¥å£ä½œä¸ºmapå€¼</span><br><span class="line">    var studentInfo = make(map[string]interface&#123;&#125;)</span><br><span class="line">    studentInfo[&quot;name&quot;] = &quot;æ²™æ²³å¨œæ‰&quot;</span><br><span class="line">    studentInfo[&quot;age&quot;] = 18</span><br><span class="line">    studentInfo[&quot;married&quot;] = false</span><br><span class="line">    fmt.Println(studentInfo)</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h1><ul><li>ç©ºæ¥å£å®ç°ï¼Œå¯ä»¥ä½¿å¾—mapå­˜å‚¨ä»»æ„ç±»å‹çš„å€¼ï¼Œ</li><li>å¦‚ä½•è·å–å­˜å‚¨çš„å…·ä½“æ•°æ®</li></ul><h2 id="æ¥å£å€¼"><a href="#æ¥å£å€¼" class="headerlink" title="æ¥å£å€¼"></a>æ¥å£å€¼</h2><ul><li><p>ä¸€ä¸ªæ¥å£çš„å€¼ <strong>ç®€ç§°ä¸ºæ¥å£å€¼</strong>ã€‚<del>åºŸè¯</del></p></li><li><p><strong>æ¥å£å€¼</strong> ï¼š <code>ä¸€ä¸ªå…·ä½“çš„ç±»å‹</code> å’Œ <code>å…·ä½“ç±»å‹çš„å€¼</code> ç»„æˆ</p><ul><li>ç§°ä¸º æ¥å£çš„ <code>åŠ¨æ€ç±»å‹</code> å’Œ <code>åŠ¨æ€å€¼</code></li></ul></li><li><p><strong>ç¤ºä¾‹ï¼š</strong></p><ul><li><p>```go<br>var w io.Writer<br>w = os.Stdout<br>w = new(bytes.Buffer)<br>w = nil</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  * ![æ¥å£å€¼å›¾è§£](E:\LearningNotes\Go\14 æ¥å£.assets\interface.png)</span><br><span class="line">* **åˆ¤æ–­ç©ºæ¥å£ä¸­çš„å€¼**ï¼Œä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œæ ¼å¼</span><br><span class="line"></span><br><span class="line">  * `x.(T)`</span><br><span class="line">  * `x` : è¡¨ç¤ºç±»å‹ä¸º `interface&#123;&#125;` çš„å˜é‡</span><br><span class="line">  * `T `ï¼šè¡¨ç¤ºæ–­è¨€ x å¯èƒ½æ˜¯çš„ç±»å‹</span><br><span class="line">* è¯¥è¯­æ³•è¿”å›ä¸¤ä¸ªå‚æ•°</span><br><span class="line"></span><br><span class="line">  * **ç¬¬ä¸€ä¸ªï¼š**x è½¬åŒ–ä¸º T ç±»å‹åçš„å˜é‡</span><br><span class="line">  * **ç¬¬äºŒä¸ª ï¼š**å¸ƒå°”å€¼ï¼Œè‹¥ä¸º `true` è¡¨ç¤ºæ–­è¨€æˆåŠŸ</span><br><span class="line">* ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func main() &#123;</span><br><span class="line">    var x interface&#123;&#125;</span><br><span class="line">    x = &quot;Hello æ²™æ²³&quot;</span><br><span class="line">    v, ok := x.(string)</span><br><span class="line">    if ok &#123;</span><br><span class="line">    fmt.Println(v)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    fmt.Println(&quot;ç±»å‹æ–­è¨€å¤±è´¥&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>switch</code> è¯­å¥å®ç°ï¼š</p><ul><li>```go<br>func justifyType(x interface{}) {<pre><code>switch v := x.(type) &#123;case string:    fmt.Printf(&quot;x is a stringï¼Œvalue is %v\n&quot;, v)case int:    fmt.Printf(&quot;x is a int is %v\n&quot;, v)case bool:    fmt.Printf(&quot;x is a bool is %v\n&quot;, v)default:    fmt.Println(&quot;unsupport typeï¼&quot;)&#125;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">* ==ç©ºæ¥å£ å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹å€¼==</span><br><span class="line">* **æ³¨æ„**ï¼šåªæœ‰å½“ä¸¤ä¸ªä»¥ä¸Šçš„**å…·ä½“ç±»å‹å¿…é¡»ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç†**æ—¶ï¼Œæ‰éœ€è¦å®šä¹‰æ¥å£</span><br><span class="line"></span><br><span class="line"># ç»ƒä¹ é¢˜</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨æ¥å£çš„æ–¹å¼å®ç°ä¸€ä¸ªæ—¢å¯ä»¥å¾€ç»ˆç«¯å†™æ—¥å¿—ä¹Ÿå¯ä»¥å¾€æ–‡ä»¶å†™æ—¥å¿—çš„ç®€æ˜“æ—¥å¿—åº“</span><br><span class="line">* `os` å’Œ `io` åŒ…çš„å­¦ä¹ ï¼š</span><br><span class="line"></span><br><span class="line">  * `os`</span><br><span class="line">  * `io`</span><br><span class="line"></span><br><span class="line">    * `io.Writer` ï¼šè¡¨ç¤ºä¸€ä¸ªç¼–å†™å™¨ï¼Œä»ç¼“å†²åŒºè¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®å†™å…¥ç›®æ ‡èµ„æº</span><br><span class="line"></span><br><span class="line">      * å¿…é¡»å®ç° `io.Writer`æ¥å£çš„å”¯ä¸€æ–¹æ³• `Write(p []byte)`</span><br><span class="line">      * ```go</span><br><span class="line">        type Writer interface &#123;</span><br><span class="line">            Write(p []byte) (n int, err error) //è¿”å›å†™å…¥åˆ°ç›®æ ‡èµ„æºçš„å­—èŠ‚æ•°ï¼Œå‘ç”Ÿé”™è¯¯æ—¶çš„é”™è¯¯</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>13 åŒ…</title>
      <link href="p/9d9aaa60.html"/>
      <url>p/9d9aaa60.html</url>
      
        <content type="html"><![CDATA[<h1 id="13-åŒ…"><a href="#13-åŒ…" class="headerlink" title="13 åŒ…"></a>13 åŒ…</h1><ul><li>åœ¨å·¥ç¨‹åŒ–Go å¼€å‘é¡¹ç›®ä¸­ï¼ŒGo çš„æºç å¤ç”¨å»ºç«‹åœ¨ åŒ… åŸºç¡€ä¹‹ä¸Š</li><li>å®šä¹‰åŒ…ã€å¯¼å‡ºåŒ…å†…å®¹ã€å¯¼å…¥å…¶ä»–åŒ…</li></ul><h2 id="åŒ…ä»‹ç»"><a href="#åŒ…ä»‹ç»" class="headerlink" title="åŒ…ä»‹ç»"></a>åŒ…ä»‹ç»</h2><ul><li><code>package</code> æ˜¯å¤šä¸ªGo æºç çš„é›†åˆï¼Œé«˜çº§çš„ä»£ç å¤ç”¨æ–¹æ¡ˆ</li><li>å†…ç½®åŒ…ï¼š<code>fmt</code>, <code>os</code>,<code>io</code></li></ul><h2 id="å®šä¹‰åŒ…"><a href="#å®šä¹‰åŒ…" class="headerlink" title="å®šä¹‰åŒ…"></a>å®šä¹‰åŒ…</h2><ul><li><strong>ä¸€ä¸ªåŒ…</strong> ç®€å•ç†è§£ä¸ºå­˜æ”¾<code>.go</code>æ–‡ä»¶çš„<strong>æ–‡ä»¶å¤¹</strong><ul><li>è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰<code>go</code>æ–‡ä»¶ï¼Œéƒ½è¦åœ¨ä»£ç ç¬¬ä¸€è¡Œæ·»åŠ <code>package åŒ…å</code>,å£°æ˜è¯¥æ–‡ä»¶å½’å±çš„åŒ…</li></ul></li><li>==æ³¨æ„ï¼š==<ul><li>ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œç›´æ¥åŒ…å«çš„æ–‡ä»¶åªèƒ½å½’å±äºä¸€ä¸ª<code>package</code>, åŒæ ·ä¸€ä¸ª<code>package</code>æ–‡ä»¶ä¸èƒ½åœ¨å¤šä¸ªæ–‡ä»¶å¤¹ä¸‹</li><li>åŒ…åä¸å¯ä»¥å’Œæ–‡ä»¶å¤¹åä¸€æ ·</li><li>åŒ…åä¸º<code>main</code>çš„åŒ…ï¼Œæ˜¯ç¨‹åºçš„å…¥å£åŒ…ï¼Œè¿™ç§åŒ…ç¼–è¯‘åä¼šå¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œç¼–è¯‘ä¸åŒ…å«<code>main</code>åŒ…çš„æºä»£ç åˆ™ä¸ä¼šå¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶</li></ul></li></ul><h2 id="å¯è§æ€§"><a href="#å¯è§æ€§" class="headerlink" title="å¯è§æ€§"></a>å¯è§æ€§</h2><ul><li><p>å¦‚æœæƒ³åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œå¼•ç”¨å¦ä¸€ä¸ªåŒ…é‡Œçš„ <strong>æ ‡è¯†ç¬¦</strong>ï¼Œè¯¥æ ‡è¯†ç¬¦å¿…é¡»å¯¹å¤–å¯è§ï¼ˆ<code>public</code>ï¼‰,</p></li><li><p>Go ä¸­åªéœ€è¦å°†æ ‡è¯†ç¬¦çš„é¦–å­—æ¯å¤§å†™ï¼Œå³ä¸º<code>public</code></p></li><li><p>```go<br>package pkg2</p><p>import â€œfmtâ€</p><p>// åŒ…å˜é‡å¯è§æ€§</p><p>var a = 100 // é¦–å­—æ¯å°å†™ï¼Œå¤–éƒ¨åŒ…ä¸å¯è§ï¼Œåªèƒ½åœ¨å½“å‰åŒ…å†…ä½¿ç”¨</p><p>// é¦–å­—æ¯å¤§å†™å¤–éƒ¨åŒ…å¯è§ï¼Œå¯åœ¨å…¶ä»–åŒ…ä¸­ä½¿ç”¨<br>const Mode = 1</p><p>type person struct { // é¦–å­—æ¯å°å†™ï¼Œå¤–éƒ¨åŒ…ä¸å¯è§ï¼Œåªèƒ½åœ¨å½“å‰åŒ…å†…ä½¿ç”¨</p><pre><code>name string</code></pre><p>}</p><p>// é¦–å­—æ¯å¤§å†™ï¼Œå¤–éƒ¨åŒ…å¯è§ï¼Œå¯åœ¨å…¶ä»–åŒ…ä¸­ä½¿ç”¨<br>func Add(x, y int) int {</p><pre><code>return x + y</code></pre><p>}</p><p>func age() { // é¦–å­—æ¯å°å†™ï¼Œå¤–éƒ¨åŒ…ä¸å¯è§ï¼Œåªèƒ½åœ¨å½“å‰åŒ…å†…ä½¿ç”¨</p><pre><code>var Age = 18 // å‡½æ•°å±€éƒ¨å˜é‡ï¼Œå¤–éƒ¨åŒ…ä¸å¯è§ï¼Œåªèƒ½åœ¨å½“å‰å‡½æ•°å†…ä½¿ç”¨fmt.Println(Age)</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ç»“æ„ä½“çš„ **å­—æ®µåå’Œæ¥å£ä¸­çš„æ–¹æ³•å** å¦‚æœ**é¦–å­—æ¯éƒ½æ˜¯å¤§å†™**ï¼Œå¤–éƒ¨åŒ…å¯ä»¥è®¿é—®è¿™äº›å­—æ®µå’Œæ–¹æ³•</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    type Student struct &#123;</span><br><span class="line">    Name  string //å¯åœ¨åŒ…å¤–è®¿é—®çš„æ–¹æ³•</span><br><span class="line">    class string //ä»…é™åŒ…å†…è®¿é—®çš„å­—æ®µ</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    type Payer interface &#123;</span><br><span class="line">    init() //ä»…é™åŒ…å†…è®¿é—®çš„æ–¹æ³•</span><br><span class="line">    Pay()  //å¯åœ¨åŒ…å¤–è®¿é—®çš„æ–¹æ³•</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="åŒ…çš„å¯¼å…¥"><a href="#åŒ…çš„å¯¼å…¥" class="headerlink" title="åŒ…çš„å¯¼å…¥"></a>åŒ…çš„å¯¼å…¥</h2><ul><li>ä½¿ç”¨<code>import</code>å…³é”®å­— å¯¼å…¥åŒ…<ul><li><code>import &quot;åŒ…çš„è·¯å¾„&quot;</code></li></ul></li><li>æ³¨æ„ï¼š<ul><li>import å¯¼å…¥è¯­å¥é€šå¸¸æ”¾åœ¨æ–‡ä»¶å¼€å¤´åŒ…å£°æ˜è¯­å¥ä¸‹é¢</li><li>å¯¼å…¥çš„åŒ…åéœ€è¦ä½¿ç”¨åŒå¼•å·åŒ…è£¹</li><li>åŒ…åæ˜¯ä»<code>$GOPATH/src/</code> åå¼€å§‹çš„</li><li>ç¦æ­¢å¾ªç¯å¯¼å…¥åŒ…</li></ul></li></ul><h3 id="å•è¡Œå¯¼å…¥"><a href="#å•è¡Œå¯¼å…¥" class="headerlink" title="å•è¡Œå¯¼å…¥"></a>å•è¡Œå¯¼å…¥</h3><ul><li><code>import &quot;&quot;</code></li><li><code>import &quot;&quot;</code></li></ul><h3 id="å¤šè¡Œå¯¼å…¥"><a href="#å¤šè¡Œå¯¼å…¥" class="headerlink" title="å¤šè¡Œå¯¼å…¥"></a>å¤šè¡Œå¯¼å…¥</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰åŒ…å"><a href="#è‡ªå®šä¹‰åŒ…å" class="headerlink" title="è‡ªå®šä¹‰åŒ…å"></a>è‡ªå®šä¹‰åŒ…å</h2><ul><li>å¯¼å…¥åŒ…åæ—¶ï¼Œå¯ä»¥ä¸ºå¯¼å…¥çš„åŒ…è®¾ç½®åˆ«å<ul><li><code>import åˆ«å &quot;åŒ…çš„è·¯å¾„&quot;</code></li></ul></li></ul><h2 id="åŒ¿åå¯¼å…¥åŒ…"><a href="#åŒ¿åå¯¼å…¥åŒ…" class="headerlink" title="åŒ¿åå¯¼å…¥åŒ…"></a>åŒ¿åå¯¼å…¥åŒ…</h2><ul><li>å¦‚æœåªå¸Œæœ›å¯¼å…¥åŒ…ï¼Œä¸ä½¿ç”¨å†…éƒ¨æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå¯¼å…¥ï¼š<ul><li><code>import _ &quot;åŒ…çš„è·¯å¾„&quot;</code></li></ul></li><li>ä¸€æ ·ä¼šè¢«ç¼–è¯‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­</li></ul><h2 id="init-åˆå§‹åŒ–å‡½æ•°"><a href="#init-åˆå§‹åŒ–å‡½æ•°" class="headerlink" title="init() åˆå§‹åŒ–å‡½æ•°"></a>init() åˆå§‹åŒ–å‡½æ•°</h2><h3 id="init-å‡½æ•°ä»‹ç»"><a href="#init-å‡½æ•°ä»‹ç»" class="headerlink" title="init() å‡½æ•°ä»‹ç»"></a>init() å‡½æ•°ä»‹ç»</h3><ul><li><p>Go è¯­è¨€ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå¯¼å…¥åŒ…è¯­å¥ ä¼šè‡ªåŠ¨è§¦å‘åŒ…å†…éƒ¨<code>init()</code> å‡½æ•°çš„è°ƒç”¨</p></li><li><p><code>init()</code> å‡½æ•°æ²¡æœ‰å‚æ•°å’Œè¿”å›å€¼</p></li><li><p><code>init()</code>å‡½æ•°åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œ<strong>ä¼šè¢«è‡ªåŠ¨è°ƒç”¨æ‰§è¡Œ</strong>ï¼Œ<strong>ä¸èƒ½åœ¨ä»£ç ä¸­ä¸»åŠ¨è°ƒç”¨</strong></p></li><li><p>åŒ…ä¸­ <code>init()</code> å‡½æ•°çš„æ‰§è¡Œæ—¶æœº</p><ul><li><img src="E:\LearningNotes\Go\åŒ….assets\init01.png" alt="åŒ…ä¸­çš„init()æ‰§è¡Œæ—¶æœº"></li></ul></li></ul><h3 id="init-å‡½æ•°æ‰§è¡Œé¡ºåº"><a href="#init-å‡½æ•°æ‰§è¡Œé¡ºåº" class="headerlink" title="init() å‡½æ•°æ‰§è¡Œé¡ºåº"></a>init() å‡½æ•°æ‰§è¡Œé¡ºåº</h3><ul><li>Go ä¼šä»<code>main</code> åŒ…å¼€å§‹æ£€æŸ¥å…¶å¯¼å…¥çš„æ‰€æœ‰åŒ…ï¼Œæ¯ä¸ªåŒ…æœ‰å¯èƒ½å¯¼å…¥äº†å…¶ä»–åŒ…</li><li>Go ç¼–è¯‘å™¨ç”±æ­¤æ„å»ºå‡ºä¸€ä¸ªæ ‘çŠ¶çš„åŒ…å¼•ç”¨å…³ç³»ï¼Œå†æ ¹æ®å¼•ç”¨é¡ºåºå†³å®šç¼–è¯‘é¡ºåºï¼Œä¾æ¬¡ç¼–è¯‘è¿™äº›åŒ…çš„ä»£ç </li><li>åœ¨è¿è¡Œæ—¶ï¼Œæœ€åè¢«å¯¼å…¥çš„åŒ… æœ€å…ˆè¢«åˆå§‹åŒ–å¹¶è°ƒç”¨å…¶<code>init()</code> å‡½æ•°<ul><li><img src="E:\LearningNotes\Go\åŒ….assets\init02.png" alt="åŒ…ä¹‹é—´çš„init()æ‰§è¡Œé¡ºåº"></li></ul></li></ul><h2 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h2><ul><li>ç¼–å†™ä¸€ä¸ª<code>calc</code>åŒ…å®ç°åŠ å‡ä¹˜é™¤å››ä¸ªåŠŸèƒ½å‡½æ•°ï¼Œåœ¨<code>snow</code>è¿™ä¸ªåŒ…ä¸­å¯¼å…¥å¹¶ä½¿ç”¨åŠ å‡ä¹˜é™¤å››ä¸ªå‡½æ•°å®ç°æ•°å­¦è¿ç®—</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12 ç»“æ„ä½“</title>
      <link href="p/9a7f2d8e.html"/>
      <url>p/9a7f2d8e.html</url>
      
        <content type="html"><![CDATA[<h1 id="12-ç»“æ„ä½“"><a href="#12-ç»“æ„ä½“" class="headerlink" title="12 ç»“æ„ä½“"></a>12 ç»“æ„ä½“</h1><ul><li>Go ä¸­æ—  Â·ç±»Â· çš„æ¦‚å¿µï¼Œä¸æ”¯æŒç±»çš„ç»§æ‰¿ç­‰é¢å‘å¯¹è±¡çš„æ¦‚å¿µ</li><li>é€šè¿‡ <strong>ç»“æ„ä½“çš„å†…åµŒå†é…åˆæ¥å£</strong> æ¯”é¢å‘å¯¹è±¡å…·æœ‰æ›´é«˜çš„æ‰©å±•æ€§å’Œçµæ´»æ€§</li></ul><h2 id="ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹"><a href="#ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹" class="headerlink" title="ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹"></a>ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹</h2><h3 id="è‡ªå®šä¹‰ç±»å‹"><a href="#è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹"></a>è‡ªå®šä¹‰ç±»å‹</h3><ul><li>Go ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼š<code>string</code>, <code>int</code>â€¦ ,<code>æµ®ç‚¹æ•°</code>ç­‰</li><li>Go å¯ä»¥ä½¿ç”¨<code>type</code> å…³é”®å­—å®šä¹‰è‡ªå®šä¹‰ç±»å‹</li><li>è‡ªå®šä¹‰ç±»å‹ï¼šå®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ç±»å‹<ul><li>å¯ä»¥åŸºäºå†…ç½®åŸºæœ¬æ•°æ®ç±»å‹</li><li>å¯ä»¥é€šè¿‡structå®šä¹‰</li></ul></li><li><code>type name T</code></li><li>name å°±æ˜¯ä¸€ç§æ–°ç±»å‹ï¼Œå…·æœ‰ Tç±»å‹çš„ç‰¹æ€§</li></ul><h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><ul><li><strong>ç±»å‹åˆ«å</strong>è§„å®šï¼š<code>type TypeAlias = Type</code><ul><li><code>TypeAlias</code> åªæ˜¯<code>Type</code> çš„<strong>åˆ«å</strong>ï¼Œ</li><li><strong>æœ¬è´¨ä¸Šæ˜¯åŒä¸€ä¸ªç±»å‹</strong></li></ul></li><li><code>rune</code> å’Œ <code>byte</code> å°±æ˜¯ç±»å‹åˆ«åï¼š<ul><li><code>type rune = int32</code></li><li><code>type byte = uint8</code></li></ul></li></ul><h3 id="ç±»å‹å®šä¹‰-å’Œ-ç±»å‹åˆ«åçš„åŒºåˆ«"><a href="#ç±»å‹å®šä¹‰-å’Œ-ç±»å‹åˆ«åçš„åŒºåˆ«" class="headerlink" title="ç±»å‹å®šä¹‰ å’Œ ç±»å‹åˆ«åçš„åŒºåˆ«"></a>ç±»å‹å®šä¹‰ å’Œ ç±»å‹åˆ«åçš„åŒºåˆ«</h3><ul><li><code>type NewInt int</code> : <code>%T</code> : <code>main.NewInt</code></li><li><code>type MyInt = int</code>: <code>%T</code> : <code>int</code></li></ul><p>ç»“æœæ˜¾ç¤ºaçš„ç±»å‹æ˜¯<code>main.NewInt</code>ï¼Œè¡¨ç¤º<strong>mainåŒ…ä¸‹å®šä¹‰</strong>çš„<code>NewInt</code>ç±»å‹ã€‚</p><p>bçš„ç±»å‹æ˜¯<code>int</code>ã€‚<code>MyInt</code>ç±»å‹åªä¼šåœ¨ä»£ç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘å®Œæˆæ—¶å¹¶ä¸ä¼šæœ‰<code>MyInt</code>ç±»å‹ã€‚</p><h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><ul><li><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>å¯ä»¥è¡¨ç¤ºä¸€äº›äº‹ç‰©çš„éƒ¨åˆ†å±æ€§</li><li><strong>ç»“æ„ä½“</strong>å¯ä»¥å°è£…å¤šä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¡¨è¾¾ä¸€ä¸ªäº‹ç‰©çš„å…¨éƒ¨å±æ€§<ul><li>æœ¬è´¨ä¸Šæ˜¯ä¸€ç§èšåˆç±»å‹</li></ul></li><li>Go é€šè¿‡structå®ç°é¢å‘å¯¹è±¡</li></ul><h3 id="ç»“æ„ä½“çš„å®šä¹‰"><a href="#ç»“æ„ä½“çš„å®šä¹‰" class="headerlink" title="ç»“æ„ä½“çš„å®šä¹‰"></a>ç»“æ„ä½“çš„å®šä¹‰</h3><ul><li><p>ä½¿ç”¨<code>type</code> å’Œ <code>struct</code></p><ul><li>```go<br>type ç±»å‹å struct{<pre><code>å­—æ®µå å­—æ®µç±»å‹å­—æ®µå å­—æ®µç±»å‹</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * ç±»å‹åï¼šåŒä¸€ä¸ªåŒ…å†…ä¸èƒ½é‡å¤</span><br><span class="line"></span><br><span class="line">  * å­—æ®µåï¼šå­—æ®µåå¿…é¡»å”¯ä¸€ï¼ŒåŒæ ·å­—æ®µç±»å‹çš„å­—æ®µåå¯å†™åœ¨åŒä¸€è¡Œ</span><br><span class="line"></span><br><span class="line">  * å­—æ®µç±»å‹ï¼šç»“æ„ä½“å­—æ®µçš„å…·ä½“ç±»å‹</span><br><span class="line"></span><br><span class="line">### ç»“æ„ä½“å®ä¾‹åŒ–</span><br><span class="line"></span><br><span class="line">* åªæœ‰å½“ç»“æ„ä½“å®ä¾‹åŒ–æ—¶ï¼Œæ‰ä¼šçœŸæ­£çš„åˆ†é…å†…å­˜ï¼Œæ‰èƒ½ä½¿ç”¨ç»“æ„ä½“çš„å­—æ®µ</span><br><span class="line">* ä½¿ç”¨å…³é”®å­—`var`å£°æ˜ï¼š`var ç»“æ„ä½“å®ä¾‹ ç»“æ„ä½“ç±»å‹`</span><br><span class="line"></span><br><span class="line">#### åŸºæœ¬å®ä¾‹åŒ–</span><br><span class="line"></span><br><span class="line">* å£°æ˜åï¼Œä½¿ç”¨æ“ä½œç¬¦`.`è®¿é—®ç»“æ„ä½“å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰è¿›è¡Œåˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  type person struct &#123;</span><br><span class="line">  name string</span><br><span class="line">  city string</span><br><span class="line">  age  int8</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  var p1 person</span><br><span class="line">  p1.name = &quot;æ²™æ²³å¨œæ‰&quot;</span><br><span class="line">  p1.city = &quot;åŒ—äº¬&quot;</span><br><span class="line">  p1.age = 18</span><br><span class="line">  fmt.Printf(&quot;p1=%v\n&quot;, p1)  //p1=&#123;æ²™æ²³å¨œæ‰ åŒ—äº¬ 18&#125;</span><br><span class="line">  fmt.Printf(&quot;p1=%#v\n&quot;, p1) //p1=main.person&#123;name:&quot;æ²™æ²³å¨œæ‰&quot;, city:&quot;åŒ—äº¬&quot;, age:18&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="åŒ¿åç»“æ„ä½“"><a href="#åŒ¿åç»“æ„ä½“" class="headerlink" title="åŒ¿åç»“æ„ä½“"></a>åŒ¿åç»“æ„ä½“</h4><ul><li><p>å®šä¹‰ä¸€äº›ä¸´æ—¶æ•°æ®ç»“æ„ï¼Œä½¿ç”¨åŒ¿åç»“æ„ä½“</p><p><code>var user struct&#123;Name string; Age int&#125;</code></p></li></ul><h4 id="åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“"><a href="#åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“" class="headerlink" title="åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“"></a>åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“</h4><ul><li><p>å¯ä»¥ä½¿ç”¨<code>new</code> å¯¹ç»“æ„ä½“è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¾—åˆ°ç»“æ„ä½“çš„åœ°å€</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">new</span>(person)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%T&quot;</span>,p2) <span class="comment">//*main.person</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%#v&quot;</span>,p2) <span class="comment">//&amp;main.person(..)</span></span><br></pre></td></tr></table></figure></li><li><p><code>p2</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆ</p></li><li><p>æ³¨æ„ï¼šGo æ”¯æŒ<strong>å¯¹ç»“æ„ä½“æŒ‡é’ˆ</strong>ç›´æ¥ä½¿ç”¨<code>.</code>è®¿é—®ç»“æ„ä½“æˆå‘˜</p></li></ul><h4 id="å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–"><a href="#å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–" class="headerlink" title="å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–"></a>å–ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–</h4><ul><li><p>ä½¿ç”¨<code>&amp;</code> å¯¹ç»“æ„ä½“è¿›è¡Œå–åœ°å€æ“ä½œï¼Œç›¸å½“äºå¯¹è¯¥ç»“æ„ä½“ç±»å‹ è¿›è¡Œäº†ä¸€æ¬¡<code>new</code>å®ä¾‹åŒ–æ“ä½œ</p></li><li><p>```go<br>p3 := &amp;person()<br>p3.name = â€œqimiâ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* `p3.name = &quot;qimi&quot;` åœ¨åº•å±‚ æ˜¯`(*p3).name = &quot;qimi&quot;`</span><br><span class="line"></span><br><span class="line">  * æ˜¯ Go å¸®æˆ‘ä»¬å®ç°çš„è¯­æ³•ç³–</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ç»“æ„ä½“åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">* **æœªåˆå§‹åŒ–çš„ç»“æ„ä½“**ï¼Œå…¶æˆå‘˜å˜é‡éƒ½æ˜¯å¯¹åº”å…¶ç±»å‹çš„é›¶å€¼</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  type person struct &#123;</span><br><span class="line">  name string</span><br><span class="line">  city string</span><br><span class="line">  age  int8</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  var p4 person</span><br><span class="line">  fmt.Printf(&quot;p4=%#v\n&quot;, p4) //p4=main.person&#123;name:&quot;&quot;, city:&quot;&quot;, age:0&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–"><a href="#ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–" class="headerlink" title="ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–"></a>ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–</h4><ul><li><p>é”®å¯¹åº”ç»“æ„ä½“çš„å­—æ®µ</p></li><li><p>å€¼å¯¹åº”è¯¥å­—æ®µçš„åˆå§‹å€¼</p><ul><li>```go<br>p5 := person{<pre><code>name : &quot;å°ç‹å­&quot;,city : &quot;beijing&quot;,age : 18,</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* å¯¹ç»“æ„ä½“æŒ‡é’ˆè¿›è¡Œé”®å€¼å¯¹åˆå§‹åŒ–ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    p6 := &amp;person&#123;</span><br><span class="line">    name: &quot;å°ç‹å­&quot;,</span><br><span class="line">    city: &quot;åŒ—äº¬&quot;,</span><br><span class="line">    age:  18,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æœªæŒ‡å®šåˆå§‹å€¼çš„å­—æ®µçš„å€¼ä¸ºè¯¥å­—æ®µç±»å‹çš„é›¶å€¼</p><ul><li><p>```go<br>p7 := &amp;person{</p><pre><code>city: &quot;åŒ—äº¬&quot;,</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### ä½¿ç”¨å€¼å¾—åˆ—è¡¨åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">* åˆå§‹åŒ–ç»“æ„ä½“æ—¶ï¼Œç›´æ¥å†™å€¼ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    p8 := &amp;person&#123;</span><br><span class="line">    &quot;æ²™æ²³å¨œæ‰&quot;,</span><br><span class="line">    &quot;åŒ—äº¬&quot;,</span><br><span class="line">    28,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>å¿…é¡»è¦åˆå§‹åŒ–ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µ</p></li><li><p>åˆå§‹å€¼çš„å¡«å……é¡ºåºå¿…é¡»ä¸å­—æ®µï¼Œåœ¨ç»“æ„ä½“ä¸­çš„å£°æ˜é¡ºåºä¸€è‡´</p></li><li><p>ä¸èƒ½å’Œé”®å€¼å¯¹åˆå§‹åŒ–æ··ç”¨</p></li></ul></li></ul><h3 id="ç»“æ„ä½“å†…å­˜å¸ƒå±€"><a href="#ç»“æ„ä½“å†…å­˜å¸ƒå±€" class="headerlink" title="ç»“æ„ä½“å†…å­˜å¸ƒå±€"></a>ç»“æ„ä½“å†…å­˜å¸ƒå±€</h3><ul><li>ç»“æ„ä½“å ç”¨ä¸€å— <strong>è¿ç»­çš„å†…å­˜</strong></li></ul><h4 id="ç©ºç»“æ„ä½“"><a href="#ç©ºç»“æ„ä½“" class="headerlink" title="ç©ºç»“æ„ä½“"></a>ç©ºç»“æ„ä½“</h4><ul><li>ç©ºç»“æ„ä½“ä¸å ç”¨ç©ºé—´</li></ul><p><code>fmt.Printf(unsafe.Sizeof(v))</code> //0</p><h3 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="keyword">string</span></span><br><span class="line">age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]*student)</span><br><span class="line">stus := []student&#123;</span><br><span class="line">&#123;name: <span class="string">&quot;å°ç‹å­&quot;</span>, age: <span class="number">18</span>&#125;,</span><br><span class="line">&#123;name: <span class="string">&quot;å¨œæ‰&quot;</span>, age: <span class="number">23</span>&#125;,</span><br><span class="line">&#123;name: <span class="string">&quot;å¤§ç‹å…«&quot;</span>, age: <span class="number">9000</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, stu := <span class="keyword">range</span> stus &#123;</span><br><span class="line">        m[stu.name] = &amp;stu  <span class="comment">//m : &quot;å°ç‹å­&quot;ï¼š&amp;student&#123;name: &quot;å°ç‹å­&quot;, age: 18&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">fmt.Println(k, <span class="string">&quot;=&gt;&quot;</span>, v.name)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ‰§è¡Œç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å°ç‹å­ =&gt; å°ç‹å­</span><br><span class="line">å¨œæ‰ =&gt; å¨œæ‰</span><br><span class="line">å¤§ç‹å…« =&gt; å¤§ç‹å…«</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œç»“æœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¤§ç‹å…« =&gt; å¤§ç‹å…«</span><br><span class="line">å°ç‹å­ =&gt; å¤§ç‹å…«</span><br><span class="line">å¨œæ‰ =&gt; å¤§ç‹å…«</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><ul><li><p>Go ç»“æ„ä½“æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œéœ€è¦<strong>è‡ªå·±å®ç°</strong></p></li><li><p><code>struct</code> æ˜¯å€¼ç±»å‹ï¼Œå€¼æ‹·è´æ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥<strong>æ„é€ å‡½æ•°è¿”å›çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆç±»å‹</strong></p><ul><li>```go<br>func newPerson(name, city string, age int8) *person {<pre><code>return &amp;person&#123;    name: name,    city: city,    age:  age,&#125;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* è°ƒç”¨ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    p9 := newPerson(&quot;å¼ ä¸‰&quot;, &quot;æ²™æ²³&quot;, 90)</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="æ–¹æ³•å’Œæ¥æ”¶è€…"><a href="#æ–¹æ³•å’Œæ¥æ”¶è€…" class="headerlink" title="æ–¹æ³•å’Œæ¥æ”¶è€…"></a>æ–¹æ³•å’Œæ¥æ”¶è€…</h3><ul><li><p>Go ä¸­çš„<strong>æ–¹æ³•ï¼ˆMethodï¼‰</strong>ï¼šä¸€ç§ä½œç”¨äº<strong>ç‰¹å®šç±»å‹å˜é‡</strong>çš„å‡½æ•°</p><ul><li>è¿™ç§ç‰¹å®šç±»å‹å˜é‡å«åš<code>æ¥æ”¶è€…Receiver</code></li><li>æ¥æ”¶è€…çš„æ¦‚å¿µç±»ä¼¼äº<code>this</code>, <code>self</code></li></ul></li><li><p>æ–¹æ³•çš„<strong>å®šä¹‰æ ¼å¼</strong>ï¼š</p><ul><li>```go<br>func (æ¥æ”¶è€…å˜é‡ æ¥æ”¶è€…ç±»å‹) æ–¹æ³•å(å‚æ•°åˆ—è¡¨) (è¿”å›å‚æ•°) {<pre><code>å‡½æ•°ä½“</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">  * **æ¥æ”¶è€…å˜é‡ï¼š**æ¥æ”¶è€…ä¸­çš„å‚æ•°å˜é‡ååœ¨å‘½åæ—¶ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨æ¥æ”¶è€…ç±»å‹åç§°é¦–å­—æ¯çš„å°å†™ï¼Œè€Œä¸æ˜¯`self`ã€`this`ä¹‹ç±»çš„å‘½å</span><br><span class="line">  * **æ¥æ”¶è€…ç±»å‹ï¼š**æ¥æ”¶è€…ç±»å‹å’Œå‚æ•°ç±»ä¼¼ï¼Œå¯ä»¥æ˜¯**æŒ‡é’ˆç±»å‹å’ŒéæŒ‡é’ˆç±»å‹**</span><br><span class="line">  * **æ–¹æ³•åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å‚æ•°ï¼š** ä¸å‡½æ•°å®šä¹‰ç›¸åŒ</span><br><span class="line">  </span><br><span class="line">* ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  ```go</span><br><span class="line">  //Person ç»“æ„ä½“</span><br><span class="line">  type Person struct &#123;</span><br><span class="line">  name string</span><br><span class="line">  age  int8</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  //NewPerson æ„é€ å‡½æ•°</span><br><span class="line">  func NewPerson(name string, age int8) *Person &#123;</span><br><span class="line">  return &amp;Person&#123;</span><br><span class="line">  name: name,</span><br><span class="line">  age:  age,</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  //Dream Personåšæ¢¦çš„æ–¹æ³•</span><br><span class="line">  func (p Person) Dream() &#123;</span><br><span class="line">  fmt.Printf(&quot;%sçš„æ¢¦æƒ³æ˜¯å­¦å¥½Goè¯­è¨€ï¼\n&quot;, p.name)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  p1 := NewPerson(&quot;å°ç‹å­&quot;, 25)</span><br><span class="line">  p1.Dream()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ–¹æ³•ä¸å‡½æ•°çš„åŒºåˆ«ï¼š</p><ul><li>å‡½æ•°<strong>ä¸å±äºä»»ä½•ç±»å‹</strong></li><li>æ–¹æ³•<strong>å±äºç‰¹å®šç±»å‹</strong></li></ul></li></ul><h4 id="æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"><a href="#æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…" class="headerlink" title="æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"></a>æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…</h4><ul><li><p>æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€… ï¼š ç»“æ„ä½“çš„æŒ‡é’ˆ</p></li><li><p>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¿®æ”¹æ¥æ”¶è€…æŒ‡é’ˆçš„ä»»æ„æˆå‘˜å˜é‡ï¼Œéƒ½æ˜¯æœ‰æ•ˆçš„</p><ul><li>æ¥è¿‘äºå…¶ä»–é¢å‘å¯¹è±¡ä¸­çš„<code>this</code>, <code>self</code></li></ul></li><li><p>ç¤ºä¾‹ï¼šä¸€ä¸ªæ–¹æ³•ï¼šä¿®æ”¹å®ä¾‹å˜é‡çš„å¹´é¾„</p><ul><li>```go<br>// SetAge è®¾ç½®pçš„å¹´é¾„<br>// ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…<br>func (p *Person) SetAge(newAge int8) {<pre><code>p.age = newAge</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  func main() &#123;</span><br><span class="line">  p1 := NewPerson(&quot;å°ç‹å­&quot;, 25)</span><br><span class="line">  fmt.Println(p1.age) // 25</span><br><span class="line">  p1.SetAge(30)</span><br><span class="line">  fmt.Println(p1.age) // 30</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="å€¼ç±»å‹çš„æ¥æ”¶è€…"><a href="#å€¼ç±»å‹çš„æ¥æ”¶è€…" class="headerlink" title="å€¼ç±»å‹çš„æ¥æ”¶è€…"></a>å€¼ç±»å‹çš„æ¥æ”¶è€…</h4><ul><li><p>æ–¹æ³•ä½œç”¨äº å€¼ç±»å‹æ¥æ”¶è€…æ—¶ï¼ŒGo ä¼šåœ¨è¿è¡Œå‰å°†<strong>æ¥æ”¶è€…çš„å€¼å¤åˆ¶ä¸€ä»½</strong></p></li><li><p>åœ¨å€¼ç±»å‹æ¥æ”¶è€…çš„æ–¹æ³•ä¸­ï¼Œå¯ä»¥è·å–æ¥æ”¶è€…çš„æˆå‘˜å€¼ï¼Œä½†æ— æ³•ä¿®æ”¹æ¥æ”¶è€…å˜é‡æœ¬èº«</p><ul><li>```go<br>// SetAge2 è®¾ç½®pçš„å¹´é¾„<br>// ä½¿ç”¨å€¼æ¥æ”¶è€…<br>func (p Person) SetAge2(newAge int8) {<pre><code>p.age = newAge</code></pre>}func main() {<pre><code>p1 := NewPerson(&quot;å°ç‹å­&quot;, 25)p1.Dream()fmt.Println(p1.age) // 25p1.SetAge2(30) // (*p1).SetAge2(30)fmt.Println(p1.age) // 25</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### ä½•æ—¶ä½¿ç”¨ æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…</span><br><span class="line"></span><br><span class="line">* éœ€è¦ä¿®æ”¹æ¥æ”¶è€…çš„æˆå‘˜å€¼</span><br><span class="line">* æ¥æ”¶è€…æ˜¯ æ‹·è´ä»£ä»·æ¯”è¾ƒå¤§çš„å¤§å¯¹è±¡</span><br><span class="line">* ä¿è¯ä¸€è‡´æ€§ï¼Œè‹¥æœ‰ä¸ªæ–¹æ³•ä½¿ç”¨äº†æŒ‡é’ˆæ¥æ”¶è€…ï¼Œå…¶ä»–ä¹Ÿåº”è¯¥åŒæ­¥</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ä»»æ„ç±»å‹æ·»åŠ æ–¹æ³•</span><br><span class="line"></span><br><span class="line">* åœ¨Goä¸­ï¼Œ**ä»»ä½•ç±»å‹**éƒ½å¯ä»¥æ‹¥æœ‰æ–¹æ³•ï¼Œ**æ¥æ”¶è€…å¯ä»¥æ˜¯ä»»ä½•ç±»å‹**</span><br><span class="line"></span><br><span class="line">  * ä¾‹å¦‚ï¼šå°†å†…ç½®ç±»å‹`int` ä½¿ç”¨å…³é”®å­—typeï¼Œå®šä¹‰ä¸ºæ–°çš„è‡ªå®šä¹‰ç±»å‹ï¼Œå¯ä»¥ä¸ºå…¶æ·»åŠ æ–¹æ³•</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    //MyInt å°†intå®šä¹‰ä¸ºè‡ªå®šä¹‰MyIntç±»å‹</span><br><span class="line">    type MyInt int</span><br><span class="line">    </span><br><span class="line">    //SayHello ä¸ºMyIntæ·»åŠ ä¸€ä¸ªSayHelloçš„æ–¹æ³•</span><br><span class="line">    func (m MyInt) SayHello() &#123;</span><br><span class="line">    fmt.Println(&quot;Hello, æˆ‘æ˜¯ä¸€ä¸ªintã€‚&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    func main() &#123;</span><br><span class="line">    var m1 MyInt</span><br><span class="line">    m1.SayHello() //Hello, æˆ‘æ˜¯ä¸€ä¸ªintã€‚</span><br><span class="line">    m1 = 100</span><br><span class="line">    fmt.Printf(&quot;%#v  %T\n&quot;, m1, m1) //100  main.MyInt</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ³¨æ„ï¼šä¸èƒ½ç»™å…¶ä»–åŒ…çš„ ç±»å‹å®šä¹‰æ–¹æ³•</p></li></ul><h3 id="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ"><a href="#ç»“æ„ä½“çš„åŒ¿åå­—æ®µ" class="headerlink" title="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ"></a>ç»“æ„ä½“çš„åŒ¿åå­—æ®µ</h3><ul><li><p>ç»“æ„ä½“ å…è®¸ å…¶æˆå‘˜å­—æ®µåœ¨å£°æ˜æ—¶ï¼Œ<strong>æ²¡æœ‰å­—æ®µåï¼Œåªæœ‰ç±»å‹</strong></p></li><li><p>==æ³¨æ„ï¼š==Go ä¼šé»˜è®¤é‡‡ç”¨ç±»å‹åä½œä¸ºå­—æ®µåï¼Œ<strong>ç»“æ„ä½“è¦æ±‚å­—æ®µåç§°å¿…é¡»å”¯ä¸€</strong></p><ul><li>å› æ­¤ï¼Œä¸€ä¸ªç»“æ„ä½“ä¸­ï¼ŒåŒç§ç±»å‹çš„åŒ¿åå­—æ®µåªèƒ½æœ‰ä¸€ä¸ª</li></ul></li><li><p>```go<br>//Person ç»“æ„ä½“Personç±»å‹<br>type Person struct {</p><pre><code>stringint</code></pre><p>}</p><p>func main() {</p><pre><code>p1 := Person&#123;    &quot;å°ç‹å­&quot;,    18,&#125;fmt.Printf(&quot;%#v\n&quot;, p1)        //main.Person&#123;string:&quot;åŒ—äº¬&quot;, int:18&#125;fmt.Println(p1.string, p1.int) //åŒ—äº¬ 18</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* </span><br><span class="line"></span><br><span class="line">### åµŒå¥—ç»“æ„ä½“</span><br><span class="line"></span><br><span class="line">* ç»“æ„ä½“ä¸­ï¼Œå¯ä»¥**åµŒå¥—åŒ…å«** å¦ä¸€ä¸ªç»“æ„ä½“æˆ–ç»“æ„ä½“æŒ‡é’ˆ</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">    ```go</span><br><span class="line">    //Address åœ°å€ç»“æ„ä½“</span><br><span class="line">    type Address struct &#123;</span><br><span class="line">    Province string</span><br><span class="line">    City     string</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //User ç”¨æˆ·ç»“æ„ä½“</span><br><span class="line">    type User struct &#123;</span><br><span class="line">    Name    string</span><br><span class="line">    Gender  string</span><br><span class="line">    Address Address</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    user1 := User&#123;</span><br><span class="line">    Name:   &quot;å°ç‹å­&quot;,</span><br><span class="line">    Gender: &quot;ç”·&quot;,</span><br><span class="line">    Address: Address&#123;</span><br><span class="line">    Province: &quot;å±±ä¸œ&quot;,</span><br><span class="line">    City:     &quot;å¨æµ·&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(&quot;user1=%#v\n&quot;, user1)//user1=main.User&#123;Name:&quot;å°ç‹å­&quot;, Gender:&quot;ç”·&quot;, Address:main.Address&#123;Province:&quot;å±±ä¸œ&quot;, City:&quot;å¨æµ·&quot;&#125;&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="åµŒå¥—åŒ¿åå­—æ®µ"><a href="#åµŒå¥—åŒ¿åå­—æ®µ" class="headerlink" title="åµŒå¥—åŒ¿åå­—æ®µ"></a>åµŒå¥—åŒ¿åå­—æ®µ</h4><ul><li><p>åµŒå¥—çš„ç»“æ„ä½“ä¹Ÿå¯é‡‡ç”¨åŒ¿åå­—æ®µï¼š</p><ul><li>```go<br>//Address åœ°å€ç»“æ„ä½“<br>type Address struct {<pre><code>Province stringCity     string</code></pre>}//User ç”¨æˆ·ç»“æ„ä½“<br>type User struct {<pre><code>Name    stringGender  stringAddress //åŒ¿åå­—æ®µ</code></pre>}func main() {<pre><code>var user2 Useruser2.Name = &quot;å°ç‹å­&quot;user2.Gender = &quot;ç”·&quot;user2.Address.Province = &quot;å±±ä¸œ&quot;    // åŒ¿åå­—æ®µé»˜è®¤ä½¿ç”¨ç±»å‹åä½œä¸ºå­—æ®µåuser2.City = &quot;å¨æµ·&quot;                // åŒ¿åå­—æ®µå¯ä»¥çœç•¥fmt.Printf(&quot;user2=%#v\n&quot;, user2) //user2=main.User&#123;Name:&quot;å°ç‹å­&quot;, Gender:&quot;ç”·&quot;, Address:main.Address&#123;Province:&quot;å±±ä¸œ&quot;, City:&quot;å¨æµ·&quot;&#125;&#125;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* å½“è®¿é—®ç»“æ„ä½“æˆå‘˜æ—¶ï¼Œç°åœ¨ç»“æ„ä½“ä¸­æŸ¥æ‰¾è¯¥å­—æ®µï¼Œå†å»åµŒå¥—çš„åŒ¿åå­—æ®µæ‰¾</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### åµŒå¥—ç»“æ„ä½“çš„å­—æ®µåå†²çª</span><br><span class="line"></span><br><span class="line">* åµŒå¥—ç»“æ„ä½“å†…éƒ¨å¯èƒ½å­˜åœ¨ç›¸åŒçš„å­—æ®µåã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºäº†é¿å…æ­§ä¹‰éœ€è¦é€šè¿‡æŒ‡å®šå…·ä½“çš„å†…åµŒç»“æ„ä½“å­—æ®µåã€‚</span><br><span class="line"></span><br><span class="line">  ```go</span><br><span class="line">  //Address åœ°å€ç»“æ„ä½“</span><br><span class="line">  type Address struct &#123;</span><br><span class="line">  Province   string</span><br><span class="line">  City       string</span><br><span class="line">  CreateTime string</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  //Email é‚®ç®±ç»“æ„ä½“</span><br><span class="line">  type Email struct &#123;</span><br><span class="line">  Account    string</span><br><span class="line">  CreateTime string</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  //User ç”¨æˆ·ç»“æ„ä½“</span><br><span class="line">  type User struct &#123;</span><br><span class="line">  Name   string</span><br><span class="line">  Gender string</span><br><span class="line">  Address</span><br><span class="line">  Email</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  var user3 User</span><br><span class="line">  user3.Name = &quot;æ²™æ²³å¨œæ‰&quot;</span><br><span class="line">  user3.Gender = &quot;ç”·&quot;</span><br><span class="line">  // user3.CreateTime = &quot;2019&quot; //ambiguous selector user3.CreateTime</span><br><span class="line">  user3.Address.CreateTime = &quot;2000&quot; //æŒ‡å®šAddressç»“æ„ä½“ä¸­çš„CreateTime</span><br><span class="line">  user3.Email.CreateTime = &quot;2000&quot;   //æŒ‡å®šEmailç»“æ„ä½“ä¸­çš„CreateTime</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="ç»“æ„ä½“çš„-â€œç»§æ‰¿â€"><a href="#ç»“æ„ä½“çš„-â€œç»§æ‰¿â€" class="headerlink" title="ç»“æ„ä½“çš„ â€œç»§æ‰¿â€"></a>ç»“æ„ä½“çš„ â€œç»§æ‰¿â€</h3><ul><li><p>Go ä¸­ä½¿ç”¨ç»“æ„ä½“ï¼Œå¯ä»¥å®ç°å…¶ä»–é¢å‘å¯¹è±¡ä¸­çš„ ç»§æ‰¿</p><ul><li>```go<br>//Animal åŠ¨ç‰©<br>type Animal struct {<pre><code>name string</code></pre>}func (a *Animal) move() {<pre><code>fmt.Printf(&quot;%sä¼šåŠ¨ï¼\n&quot;, a.name)</code></pre>}//Dog ç‹—<br>type Dog struct {<pre><code>Feet    int8*Animal //é€šè¿‡åµŒå¥—åŒ¿åç»“æ„ä½“å®ç°ç»§æ‰¿</code></pre>}func (d *Dog) wang() {<pre><code>fmt.Printf(&quot;%sä¼šæ±ªæ±ªæ±ª~\n&quot;, d.name)</code></pre>}func main() {<pre><code>d1 := &amp;Dog&#123;    Feet: 4,    Animal: &amp;Animal&#123; //æ³¨æ„åµŒå¥—çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆ        name: &quot;ä¹ä¹&quot;,    &#125;,&#125;d1.wang() //ä¹ä¹ä¼šæ±ªæ±ªæ±ª~d1.move() //ä¹ä¹ä¼šåŠ¨ï¼</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ç»“æ„ä½“å­—æ®µçš„å¯è§æ€§</span><br><span class="line"></span><br><span class="line">* ç»“æ„ä½“ä¸­ï¼š</span><br><span class="line">  * **å¤§å†™**å¼€å¤´è¡¨ç¤º**å¯å…¬å¼€è®¿é—®**</span><br><span class="line">  * **å°å†™**è¡¨ç¤º**ç§æœ‰**(ä»…åœ¨å®šä¹‰å½“å‰ç»“æ„ä½“çš„åŒ…ä¸­è®¿é—®)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ç»“æ„ä½“ ä¸ JSON åºåˆ—åŒ–</span><br><span class="line"></span><br><span class="line">* `JSON` ï¼š`JavaScript Object Notation`</span><br><span class="line"></span><br><span class="line">  * è½»é‡çº§çš„**æ•°æ®äº¤æ¢æ ¼å¼**</span><br><span class="line">  * æ˜“äº é˜…è¯»å’Œç¼–å†™</span><br><span class="line">  * æ˜“äº æœºå™¨è§£æå’Œç”Ÿæˆ</span><br><span class="line"></span><br><span class="line">* JSON é”®å€¼å¯¹ï¼šç”¨äºä¿å­˜ JS å¯¹è±¡çš„ä¸€ç§æ–¹å¼</span><br><span class="line"></span><br><span class="line">  * é”®/å€¼å¯¹ æ ¼å¼ï¼š`&quot;é”®å&quot; : å€¼, `</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    //Student å­¦ç”Ÿ</span><br><span class="line">    type Student struct &#123;</span><br><span class="line">    ID     int</span><br><span class="line">    Gender string</span><br><span class="line">    Name   string</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //Class ç­çº§</span><br><span class="line">    type Class struct &#123;</span><br><span class="line">    Title    string</span><br><span class="line">    Students []*Student</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    c := &amp;Class&#123;</span><br><span class="line">    Title:    &quot;101&quot;,</span><br><span class="line">    Students: make([]*Student, 0, 200),</span><br><span class="line">    &#125;</span><br><span class="line">    for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    stu := &amp;Student&#123;</span><br><span class="line">    Name:   fmt.Sprintf(&quot;stu%02d&quot;, i),</span><br><span class="line">    Gender: &quot;ç”·&quot;,</span><br><span class="line">    ID:     i,</span><br><span class="line">    &#125;</span><br><span class="line">    c.Students = append(c.Students, stu)</span><br><span class="line">    &#125;</span><br><span class="line">    //JSONåºåˆ—åŒ–ï¼šç»“æ„ä½“--&gt;JSONæ ¼å¼çš„å­—ç¬¦ä¸²</span><br><span class="line">    data, err := json.Marshal(c)</span><br><span class="line">    if err != nil &#123;</span><br><span class="line">    fmt.Println(&quot;json marshal failed&quot;)</span><br><span class="line">    return</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(&quot;json:%s\n&quot;, data)</span><br><span class="line">    //JSONååºåˆ—åŒ–ï¼šJSONæ ¼å¼çš„å­—ç¬¦ä¸²--&gt;ç»“æ„ä½“</span><br><span class="line">    str := `&#123;&quot;Title&quot;:&quot;101&quot;,&quot;Students&quot;:[&#123;&quot;ID&quot;:0,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu00&quot;&#125;,&#123;&quot;ID&quot;:1,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu01&quot;&#125;,&#123;&quot;ID&quot;:2,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu02&quot;&#125;,&#123;&quot;ID&quot;:3,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu03&quot;&#125;,&#123;&quot;ID&quot;:4,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu04&quot;&#125;,&#123;&quot;ID&quot;:5,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu05&quot;&#125;,&#123;&quot;ID&quot;:6,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu06&quot;&#125;,&#123;&quot;ID&quot;:7,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu07&quot;&#125;,&#123;&quot;ID&quot;:8,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu08&quot;&#125;,&#123;&quot;ID&quot;:9,&quot;Gender&quot;:&quot;ç”·&quot;,&quot;Name&quot;:&quot;stu09&quot;&#125;]&#125;`</span><br><span class="line">    c1 := &amp;Class&#123;&#125;</span><br><span class="line">    err = json.Unmarshal([]byte(str), c1)</span><br><span class="line">    if err != nil &#123;</span><br><span class="line">    fmt.Println(&quot;json unmarshal failed!&quot;)</span><br><span class="line">    return</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(&quot;%#v\n&quot;, c1)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="ç»“æ„ä½“æ ‡ç­¾-Tag"><a href="#ç»“æ„ä½“æ ‡ç­¾-Tag" class="headerlink" title="ç»“æ„ä½“æ ‡ç­¾(Tag)"></a>ç»“æ„ä½“æ ‡ç­¾(Tag)</h3><ul><li><p><code>Tag</code> æ˜¯ç»“æ„ä½“ä¸­çš„ <strong>å…ƒä¿¡æ¯</strong>ï¼Œè¿è¡Œçš„æ—¶å€™é€šè¿‡åå°„æœºåˆ¶è¯»å–å‡ºæ¥</p><ul><li><p><code>Tag</code> åœ¨<strong>ç»“æ„ä½“å­—æ®µçš„åæ–¹</strong>å®šä¹‰ï¼Œç”¨==åå¼•å·==åŒ…è£¹</p></li><li><p>```<br><code>key1:&quot;balue1&quot; key2:&quot;value2&quot;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ç»“æ„ä½“`tag` æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹ç»„æˆ</span><br><span class="line"></span><br><span class="line">  * é”®ä¸å€¼æ˜¯ç”¨å†’å·åˆ†éš”ï¼Œå€¼ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥</span><br><span class="line">  * åŒä¸€ä¸ªç»“æ„ä½“å­—æ®µå¯ä»¥è®¾ç½®å¤šä¸ªé”®å€¼å¯¹ï¼Œä¸åŒé”®å€¼å¯¹ä½¿ç”¨ç©ºæ ¼åˆ†éš”</span><br><span class="line"></span><br><span class="line">* ==æ³¨æ„ï¼š ==ä¸ºç»“æ„ä½“ç¼–å†™`Tag`æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆé”®å€¼å¯¹çš„è§„åˆ™ã€‚ç»“æ„ä½“æ ‡ç­¾çš„è§£æä»£ç çš„å®¹é”™èƒ½åŠ›å¾ˆå·®ï¼Œä¸€æ—¦æ ¼å¼å†™é”™ï¼Œç¼–è¯‘å’Œè¿è¡Œæ—¶éƒ½ä¸ä¼šæç¤ºä»»ä½•é”™è¯¯ï¼Œé€šè¿‡åå°„ä¹Ÿæ— æ³•æ­£ç¡®å–å€¼ã€‚ä¾‹å¦‚**ä¸è¦åœ¨keyå’Œvalueä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* ç¤ºä¾‹ï¼šæ¯ä¸ªå­—æ®µå®šä¹‰jsonåºåˆ—åŒ–æ—¶ä½¿ç”¨çš„ Tag</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    //Student å­¦ç”Ÿ</span><br><span class="line">    type Student struct &#123;</span><br><span class="line">    ID     int    `json:&quot;id&quot;` //é€šè¿‡æŒ‡å®štagå®ç°jsonåºåˆ—åŒ–è¯¥å­—æ®µæ—¶çš„key</span><br><span class="line">    Gender string //jsonåºåˆ—åŒ–æ˜¯é»˜è®¤ä½¿ç”¨å­—æ®µåä½œä¸ºkey</span><br><span class="line">    name   string //ç§æœ‰ä¸èƒ½è¢«jsonåŒ…è®¿é—®</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    s1 := Student&#123;</span><br><span class="line">    ID:     1,</span><br><span class="line">    Gender: &quot;ç”·&quot;,</span><br><span class="line">    name:   &quot;æ²™æ²³å¨œæ‰&quot;,</span><br><span class="line">    &#125;</span><br><span class="line">    data, err := json.Marshal(s1)</span><br><span class="line">    if err != nil &#123;</span><br><span class="line">    fmt.Println(&quot;json marshal failed!&quot;)</span><br><span class="line">    return</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(&quot;json str:%s\n&quot;, data) //json str:&#123;&quot;id&quot;:1,&quot;Gender&quot;:&quot;ç”·&quot;&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹"><a href="#ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹" class="headerlink" title="ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹"></a>ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹</h3><ul><li><p>slice å’Œ mapéƒ½åŒ…å«äº†æŒ‡å‘åº•å±‚æ•°æ®çš„æŒ‡é’ˆï¼Œåœ¨å¤åˆ¶æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„</p><ul><li><p>```go<br>type Person struct {</p><pre><code>name   stringage    int8dreams []string</code></pre><p>}</p><p>func (p *Person) SetDreams(dreams []string) {</p><pre><code>p.dreams = dreams</code></pre><p>}</p><p>func main() {</p><pre><code>p1 := Person&#123;name: &quot;å°ç‹å­&quot;, age: 18&#125;data := []string&#123;&quot;åƒé¥­&quot;, &quot;ç¡è§‰&quot;, &quot;æ‰“è±†è±†&quot;&#125;p1.SetDreams(data)// ä½ çœŸçš„æƒ³è¦ä¿®æ”¹ p1.dreams å—ï¼Ÿdata[1] = &quot;ä¸ç¡è§‰&quot;fmt.Println(p1.dreams)  // ?</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ­£ç¡®çš„åšæ³•ï¼šåœ¨æ–¹æ³•ä¸­ä½¿ç”¨ä¼ å…¥çš„ slice çš„æ‹·è´ï¼Œè¿›è¡Œç»“æ„ä½“èµ‹å€¼</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func (p *Person) SetDreams(dreams []string) &#123;</span><br><span class="line">    p.dreams = make([]string, len(dreams))</span><br><span class="line">    copy(p.dreams, dreams)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>åŒæ ·çš„é—®é¢˜ï¼šè¿”å›å€¼ slice å’Œ mapæƒ…å†µ</p></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11 æŒ‡é’ˆ</title>
      <link href="p/9b3b896b.html"/>
      <url>p/9b3b896b.html</url>
      
        <content type="html"><![CDATA[<h2 id="11-æŒ‡é’ˆ"><a href="#11-æŒ‡é’ˆ" class="headerlink" title="11 æŒ‡é’ˆ"></a>11 æŒ‡é’ˆ</h2><ul><li>ä¸C/C++ ä¸­çš„æŒ‡é’ˆä¸åŒï¼ŒGo ä¸­çš„æŒ‡é’ˆä¸èƒ½è¿›è¡Œåç§»å’Œè¿ç®—ï¼Œæ˜¯å®‰å…¨æŒ‡é’ˆ<ul><li>å–åœ°å€ç¬¦ï¼š<code>&amp;</code></li><li>æ ¹æ®æŒ‡é’ˆå–å€¼ï¼š<code>*</code></li></ul></li><li>éœ€è¦çŸ¥é“ï¼šæŒ‡é’ˆåœ°å€ã€æŒ‡é’ˆç±»å‹ã€æŒ‡é’ˆå–å€¼</li></ul><h3 id="æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹"><a href="#æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹" class="headerlink" title="æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹"></a>æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹</h3><ul><li>æ¯ä¸ªå˜é‡è¿è¡Œæ—¶éƒ½æœ‰ä¸€ä¸ªåœ°å€ï¼Œä»£è¡¨å˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½®</li><li>æŒ‡é’ˆç±»å‹ï¼š<code>*int</code>â€¦</li><li>å–å˜é‡æŒ‡é’ˆçš„è¯­æ³•ï¼š<code>ptr := &amp;v</code><ul><li><code>v</code> : <strong>è¢«å–åœ°å€çš„å˜é‡</strong></li><li><code>ptr</code> ï¼š<strong>æ¥æ”¶åœ°å€çš„å˜é‡</strong>ï¼Œptr çš„ç±»å‹å°±ä¸º<code>*T</code>ï¼Œç§°ä¸ºTçš„æŒ‡é’ˆç±»å‹</li></ul></li></ul><h3 id="æŒ‡é’ˆå–å€¼"><a href="#æŒ‡é’ˆå–å€¼" class="headerlink" title="æŒ‡é’ˆå–å€¼"></a>æŒ‡é’ˆå–å€¼</h3><ul><li>å¯¹æ™®é€šå˜é‡ä½¿ç”¨ <code>&amp;</code> å–åœ°å€åï¼Œä¼šè·å¾—è¿™ä¸ªå˜é‡çš„æŒ‡é’ˆ<ul><li>å¯ä»¥å¯¹æŒ‡é’ˆä½¿ç”¨<code>*</code>æ“ä½œï¼Œå¯¹æŒ‡é’ˆå–å€¼</li><li>æ ¹æ®æŒ‡é’ˆå»å†…å­˜å–å€¼</li></ul></li></ul><p><strong>æ€»ç»“ï¼š</strong> å–åœ°å€æ“ä½œç¬¦<code>&amp;</code>å’Œå–å€¼æ“ä½œç¬¦<code>*</code>æ˜¯ä¸€å¯¹äº’è¡¥æ“ä½œç¬¦ï¼Œ<code>&amp;</code>å–å‡ºåœ°å€ï¼Œ<code>*</code>æ ¹æ®åœ°å€å–å‡ºåœ°å€æŒ‡å‘çš„å€¼ã€‚</p><p><strong>å˜é‡ã€æŒ‡é’ˆåœ°å€ã€æŒ‡é’ˆå˜é‡ã€å–åœ°å€ã€å–å€¼</strong>çš„ç›¸äº’å…³ç³»å’Œç‰¹æ€§å¦‚ä¸‹ï¼š</p><ul><li>å¯¹å˜é‡è¿›è¡Œ<strong>å–åœ°å€ï¼ˆ&amp;ï¼‰æ“ä½œ</strong>ï¼Œå¯ä»¥è·å¾—è¿™ä¸ªå˜é‡çš„<strong>æŒ‡é’ˆå˜é‡</strong>ã€‚</li><li>æŒ‡é’ˆå˜é‡çš„å€¼æ˜¯<strong>æŒ‡é’ˆåœ°å€</strong>ã€‚</li><li>å¯¹æŒ‡é’ˆå˜é‡è¿›è¡Œ<strong>å–å€¼ï¼ˆ*ï¼‰æ“ä½œ</strong>ï¼Œå¯ä»¥è·å¾—æŒ‡é’ˆå˜é‡æŒ‡å‘çš„åŸå˜é‡çš„å€¼ã€‚</li></ul><ul><li>å®šä¹‰å‡½æ•°æ—¶ï¼Œå¯ä»¥ä¼ å…¥åœ°å€ï¼Œä½¿ç”¨<strong>æŒ‡é’ˆä¼ å€¼</strong></li></ul><h3 id="new-å’Œ-make"><a href="#new-å’Œ-make" class="headerlink" title="new å’Œ make"></a>new å’Œ make</h3><ul><li><p>Go ä¸­å¯¹äº<strong>å¼•ç”¨ç±»å‹çš„å˜é‡</strong>ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶ï¼Œä¸ä»…è¦å£°æ˜å®ƒï¼Œè¿˜è¦<strong>ä¸ºå…¶åˆ†é…å†…å­˜</strong>ï¼Œå¦åˆ™å…¶å€¼æ— æ³•å­˜å‚¨</p></li><li><p>å¯¹äº<strong>å€¼ç±»å‹çš„å£°æ˜</strong>ï¼Œä¸éœ€è¦åˆ†é…å†…å­˜ç©ºé—´ï¼Œå› ä¸ºä»–ä»¬åœ¨å£°æ˜çš„æ—¶å€™ï¼Œå·²ç»<strong>é»˜è®¤åˆ†é…å¥½äº†</strong>å†…å­˜ç©ºé—´</p><ul><li>```go<br>func main() {<pre><code>var a *int*a = 100fmt.Println(*a)var b map[string]intb[&quot;æ²™æ²³å¨œæ‰&quot;] = 100fmt.Println(b)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* `new`, `make` ç”¨æ¥åˆ†é…å†…å­˜</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### new</span><br><span class="line"></span><br><span class="line">* å†…ç½®å‡½æ•°</span><br><span class="line"></span><br><span class="line">* å‡½æ•°åŸå‹ï¼š`func new(Type) *Type`</span><br><span class="line"></span><br><span class="line">  * Type : new åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªç±»å‹</span><br><span class="line">  * *Type ï¼šnewå‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥ç±»å‹å†…å­˜åœ°å€çš„æŒ‡é’ˆ</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨`new`å¾—åˆ°æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå¹¶ä¸”è¯¥æŒ‡é’ˆå¯¹åº”çš„å€¼ï¼Œä¸º**è¯¥ç±»å‹çš„é›¶å€¼**</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">    ```go</span><br><span class="line">    func main() &#123;</span><br><span class="line">    a := new(int)</span><br><span class="line">    b := new(bool)</span><br><span class="line">    fmt.Printf(&quot;%T\n&quot;, a) // *int</span><br><span class="line">    fmt.Printf(&quot;%T\n&quot;, b) // *bool</span><br><span class="line">    fmt.Println(*a)       // 0</span><br><span class="line">    fmt.Println(*b)       // false</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¯¹äº<code>var a *int</code>: </p><ul><li>åªæ˜¯å£°æ˜äº†ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œä½†æœªåˆå§‹åŒ–, ä¸èƒ½è¢«èµ‹å€¼</li><li>æŒ‡é’ˆæ˜¯å¼•ç”¨ç±»å‹ï¼Œéœ€è¦åˆå§‹åŒ–æ‰æœ‰å†…å­˜ç©ºé—´</li><li></li></ul></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a *<span class="keyword">int</span></span><br><span class="line">a = <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br></pre></td></tr></table></figure><h4 id="make"><a href="#make" class="headerlink" title="make"></a>make</h4><ul><li><p>ä¹Ÿæ˜¯<strong>ç”¨äºå†…å­˜åˆ†é…</strong>ï¼Œ</p></li><li><p>ä¸ <code>new</code> ä¸åŒï¼Œåªç”¨äº<code>slice</code> , <code>map</code> , <code>chan</code> çš„å†…å­˜åˆ›å»º</p></li><li><p>è€Œä¸”å‡½æ•°è¿”å›çš„ç±»å‹å°±æ˜¯ç±»å‹æœ¬èº«, è€ŒéæŒ‡é’ˆç±»å‹ï¼Œå› ä¸ºè¿™ä¸‰ç§ç±»å‹å°±æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥æ²¡å¿…è¦è¿”å›ä»–ä»¬çš„æŒ‡é’ˆ</p></li><li><p><code>make</code> çš„åŸå‹ï¼š<code>func make(t Type, size ...InterType) Type</code></p></li><li><p>éœ€è¦ä½¿ç”¨make å¯¹<code>slice</code>, <code>map</code>,<code>channel</code> è¿›è¡Œåˆå§‹åŒ–</p><ul><li><pre><code class="go">m := make(map[string]int,10)</code></pre></li></ul></li></ul><h4 id="new-å’Œ-make-çš„åŒºåˆ«"><a href="#new-å’Œ-make-çš„åŒºåˆ«" class="headerlink" title="new å’Œ make çš„åŒºåˆ«"></a>new å’Œ make çš„åŒºåˆ«</h4><ul><li>äºŒè€…éƒ½æ˜¯ç”¨äºå†…å­˜åˆ†é…</li><li><code>make</code> åªç”¨äº<code>slice</code>, <code>map</code>, <code>channel</code> çš„åˆå§‹åŒ–ï¼Œå¹¶ä¸”è¿”å›çš„è¿˜æ˜¯è¿™<strong>ä¸‰ä¸ªå¼•ç”¨ç±»å‹çš„æœ¬èº«</strong></li><li><code>new</code> ç”¨äºç±»å‹çš„å†…å­˜åˆ†é…ï¼Œå¹¶ä¸”å†…å­˜å¯¹åº”çš„å€¼ä¸º è¯¥ç±»å‹çš„é›¶å€¼ï¼Œ**è¿”å›çš„æ˜¯æŒ‡å‘è¯¥ç±»å‹çš„æŒ‡é’ˆ</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10 å†…ç½®å‡½æ•°ä»‹ç»</title>
      <link href="p/bacdba6b.html"/>
      <url>p/bacdba6b.html</url>
      
        <content type="html"><![CDATA[<h2 id="10-å†…ç½®å‡½æ•°ä»‹ç»"><a href="#10-å†…ç½®å‡½æ•°ä»‹ç»" class="headerlink" title="10 å†…ç½®å‡½æ•°ä»‹ç»"></a>10 å†…ç½®å‡½æ•°ä»‹ç»</h2><table><thead><tr><th>å†…ç½®å‡½æ•°</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>close</td><td>å…³é—­ channel</td></tr><tr><td>len</td><td>æ±‚é•¿åº¦(string, array, slice, map, channel)</td></tr><tr><td>new</td><td>åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨æ¥åˆ†é…å€¼ç±»å‹ï¼Œintï¼Œstructã€‚è¿”å›çš„æ˜¯æŒ‡é’ˆ</td></tr><tr><td>make</td><td>åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨æ¥åˆ†é…å¼•ç”¨ç±»å‹ï¼Œchanï¼Œmap, slice</td></tr><tr><td>append</td><td>ç”¨æ¥è¿½åŠ å…ƒç´ åˆ°æ•°ç»„ã€slice</td></tr><tr><td>panic, recover</td><td>åšé”™è¯¯å¤„ç†</td></tr></tbody></table><h4 id="panic-recover"><a href="#panic-recover" class="headerlink" title="panic/recover"></a>panic/recover</h4><ul><li><p>Go æ— å¼‚å¸¸æœºåˆ¶ï¼Œä½†æ˜¯ä½¿ç”¨ <code>panic/recover</code> æ¨¡å¼æ¥å¤„ç†é”™è¯¯</p></li><li><p><code>panic</code> å¯åœ¨<strong>ä»»ä½•åœ°æ–¹å¼•å‘</strong>ï¼Œä½†<code>recover</code> åªæœ‰åœ¨**<code>defer</code> è°ƒç”¨çš„å‡½æ•°ä¸­**æœ‰æ•ˆ</p><ul><li><p>ä¾‹å­ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funcA</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;func A&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funcB</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(<span class="string">&quot;panic in B&quot;</span>)<span class="comment">//panic</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">funcC</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;func C&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">funcA()</span><br><span class="line">funcB()</span><br><span class="line">funcC()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¾“å‡ºï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">A</span></span></span><br><span class="line"><span class="built_in">panic</span>: <span class="built_in">panic</span> in B</span><br><span class="line"></span><br><span class="line">goroutine <span class="number">1</span> [running]:</span><br><span class="line">main.funcB(...)</span><br><span class="line">e:/LearningNotes/Go/_function/<span class="built_in">panic</span>.<span class="keyword">go</span>:<span class="number">10</span></span><br><span class="line">main.main()</span><br><span class="line">e:/LearningNotes/Go/_function/<span class="built_in">panic</span>.<span class="keyword">go</span>:<span class="number">18</span> +<span class="number">0xa5</span></span><br><span class="line">exit status <span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨å‡½æ•° funcB æ—¶ï¼Œå¼•å‘äº†<code>panic</code>å¯¼è‡´ç¨‹åºå´©æºƒå¼‚å¸¸é€€å‡º</p></li><li><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>recover</code> å°†ç¨‹åºæ¢å¤ï¼Œç»§ç»­æ‰§è¡Œ</p><ul><li>```go<br>func funcA() {<pre><code>fmt.Println(&quot;func A&quot;)</code></pre>}func funcB() {<pre><code>defer func() &#123;    err := recover()    //å¦‚æœç¨‹åºå‡ºå‡ºç°äº†panicé”™è¯¯,å¯ä»¥é€šè¿‡recoveræ¢å¤è¿‡æ¥    if err != nil &#123;        fmt.Println(&quot;recover in B&quot;)    &#125;&#125;()panic(&quot;panic in B&quot;)</code></pre>}func funcC() {<pre><code>fmt.Println(&quot;func C&quot;)</code></pre>}<br>func main() {<pre><code>funcA()funcB()funcC()</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * æ³¨æ„ï¼š</span><br><span class="line"></span><br><span class="line">    * `recoer()` å¿…é¡»æ­é… `defer` ä½¿ç”¨</span><br><span class="line">    * `defer` ä¸€å®šè¦åœ¨å¯èƒ½å¼•å‘ `panic` **çš„è¯­å¥å‰å®šä¹‰**</span><br><span class="line"></span><br><span class="line">### ç»ƒä¹ é¢˜</span><br><span class="line"></span><br><span class="line">* **åˆ†é‡‘å¸**</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  /*</span><br><span class="line">  ä½ æœ‰50æšé‡‘å¸ï¼Œéœ€è¦åˆ†é…ç»™ä»¥ä¸‹å‡ ä¸ªäººï¼šMatthew,Sarah,Augustus,Heidi,Emilie,Peter,Giana,Adriano,Aaron,Elizabethã€‚</span><br><span class="line">  åˆ†é…è§„åˆ™å¦‚ä¸‹ï¼š</span><br><span class="line">  a. åå­—ä¸­æ¯åŒ…å«1ä¸ª&#x27;e&#x27;æˆ–&#x27;E&#x27;åˆ†1æšé‡‘å¸</span><br><span class="line">  b. åå­—ä¸­æ¯åŒ…å«1ä¸ª&#x27;i&#x27;æˆ–&#x27;I&#x27;åˆ†2æšé‡‘å¸</span><br><span class="line">  c. åå­—ä¸­æ¯åŒ…å«1ä¸ª&#x27;o&#x27;æˆ–&#x27;O&#x27;åˆ†3æšé‡‘å¸</span><br><span class="line">  d: åå­—ä¸­æ¯åŒ…å«1ä¸ª&#x27;u&#x27;æˆ–&#x27;U&#x27;åˆ†4æšé‡‘å¸</span><br><span class="line">  å†™ä¸€ä¸ªç¨‹åºï¼Œè®¡ç®—æ¯ä¸ªç”¨æˆ·åˆ†åˆ°å¤šå°‘é‡‘å¸ï¼Œä»¥åŠæœ€åå‰©ä½™å¤šå°‘é‡‘å¸ï¼Ÿ</span><br><span class="line">  ç¨‹åºç»“æ„å¦‚ä¸‹ï¼Œè¯·å®ç° â€˜dispatchCoinâ€™ å‡½æ•°</span><br><span class="line">  */</span><br><span class="line">  var (</span><br><span class="line">  coins = 50</span><br><span class="line">  users = []string&#123;</span><br><span class="line">  &quot;Matthew&quot;, &quot;Sarah&quot;, &quot;Augustus&quot;, &quot;Heidi&quot;, &quot;Emilie&quot;, &quot;Peter&quot;, &quot;Giana&quot;, &quot;Adriano&quot;, &quot;Aaron&quot;, &quot;Elizabeth&quot;,</span><br><span class="line">  &#125;</span><br><span class="line">  distribution = make(map[string]int, len(users))</span><br><span class="line">  )</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  left := dispatchCoin()</span><br><span class="line">  fmt.Println(&quot;å‰©ä¸‹ï¼š&quot;, left)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>æˆ‘çš„ç­”æ¡ˆï¼š</p></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">coins = <span class="number">50</span></span><br><span class="line">users = []<span class="keyword">string</span>&#123;</span><br><span class="line"><span class="string">&quot;Matthew&quot;</span>, <span class="string">&quot;Sarah&quot;</span>, <span class="string">&quot;Augustus&quot;</span>, <span class="string">&quot;Heidi&quot;</span>, <span class="string">&quot;Emilie&quot;</span>, <span class="string">&quot;Peter&quot;</span>, <span class="string">&quot;Giana&quot;</span>, <span class="string">&quot;Adriano&quot;</span>, <span class="string">&quot;Aaron&quot;</span>, <span class="string">&quot;Elizabeth&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">distribution = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="built_in">len</span>(users))</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dispatchCoin</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">ans := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> _, i := <span class="keyword">range</span> users &#123;</span><br><span class="line"><span class="keyword">for</span> _, j := <span class="keyword">range</span> i &#123;</span><br><span class="line">k := j</span><br><span class="line"><span class="keyword">switch</span> k &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;E&#x27;</span>:</span><br><span class="line">ans[i] += <span class="number">1</span></span><br><span class="line">coins -= <span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;I&#x27;</span>:</span><br><span class="line">ans[i] += <span class="number">2</span></span><br><span class="line">coins -= <span class="number">2</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;O&#x27;</span>:</span><br><span class="line">ans[i] += <span class="number">3</span></span><br><span class="line">coins -= <span class="number">3</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;U&#x27;</span>:</span><br><span class="line">ans[i] += <span class="number">4</span></span><br><span class="line">coins -= <span class="number">4</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(ans)</span><br><span class="line"><span class="keyword">return</span> (coins)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">left := dispatchCoin()</span><br><span class="line">fmt.Println(<span class="string">&quot;å‰©ä¸‹ï¼š&quot;</span>, left)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9 å‡½æ•°è¿›é˜¶</title>
      <link href="p/a3f04df4.html"/>
      <url>p/a3f04df4.html</url>
      
        <content type="html"><![CDATA[<h2 id="9-å‡½æ•°è¿›é˜¶"><a href="#9-å‡½æ•°è¿›é˜¶" class="headerlink" title="9 å‡½æ•°è¿›é˜¶"></a>9 å‡½æ•°è¿›é˜¶</h2><h3 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a>å˜é‡ä½œç”¨åŸŸ</h3><h4 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h4><ul><li>å®šä¹‰äºå‡½æ•°å¤–éƒ¨ï¼Œåœ¨ç¨‹åºæ•´ä¸ªè¿è¡Œå‘¨æœŸå†…æœ‰æ•ˆ</li></ul><h4 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h4><ul><li>å‡½æ•°å†…å®šä¹‰çš„å˜é‡æ— æ³•åœ¨è¯¥å‡½æ•°å¤–ä½¿ç”¨</li><li>è‹¥å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡é‡åï¼Œä¼˜å…ˆè®¿é—®å±€éƒ¨å˜é‡</li><li>if æ¡ä»¶åˆ¤æ–­ã€forå¾ªç¯ã€switchè¯­å¥å—ä¸­å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨è¯¥è¯­å¥å—ä¸­ä½¿ç”¨</li></ul><h3 id="å‡½æ•°ç±»å‹ä¸å˜é‡"><a href="#å‡½æ•°ç±»å‹ä¸å˜é‡" class="headerlink" title="å‡½æ•°ç±»å‹ä¸å˜é‡"></a>å‡½æ•°ç±»å‹ä¸å˜é‡</h3><h4 id="å®šä¹‰å‡½æ•°ç±»å‹"><a href="#å®šä¹‰å‡½æ•°ç±»å‹" class="headerlink" title="å®šä¹‰å‡½æ•°ç±»å‹"></a>å®šä¹‰å‡½æ•°ç±»å‹</h4><ul><li>ä½¿ç”¨å…³é”®å­—<code>type</code> å®šä¹‰ä¸€ä¸ª<strong>å‡½æ•°ç±»å‹</strong>ï¼Œæ ¼å¼ï¼š<ul><li><code>type calculation func(int,int) int</code></li><li>å®šä¹‰äº†ä¸€ä¸ª<code>calculation</code> ç±»å‹ï¼Œä¸€ç§å‡½æ•°ç±»å‹ï¼Œæ¥æ”¶ä¸¤ä¸ªintç±»å‹å‚æ•°å¹¶ä¸”è¿”å›ä¸€ä¸ªintç±»å‹</li><li>æ»¡è¶³ <strong>å‚æ•°åˆ—è¡¨ä¸€è‡´</strong>å¹¶ä¸”<strong>è¿”å›å€¼åˆ—è¡¨ä¸€è‡´</strong>çš„ éƒ½æ˜¯æŸä¸€å‡½æ•°ç±»å‹<ul><li><code>var c calculation</code></li></ul></li></ul></li></ul><h4 id="å‡½æ•°ç±»å‹å˜é‡"><a href="#å‡½æ•°ç±»å‹å˜é‡" class="headerlink" title="å‡½æ•°ç±»å‹å˜é‡"></a>å‡½æ•°ç±»å‹å˜é‡</h4><ul><li><p>å¯ä»¥ å£°æ˜å‡½æ•°ç±»å‹çš„å˜é‡å¹¶ä¸”ä¸ºè¯¥å˜é‡èµ‹å€¼</p><ul><li>```go<pre><code>func main() &#123;var c calculation               // å£°æ˜ä¸€ä¸ªcalculationç±»å‹çš„å˜é‡cc = add                         // æŠŠaddèµ‹å€¼ç»™cfmt.Printf(&quot;type of c:%T\n&quot;, c) // type of c:main.calculationfmt.Println(c(1, 2))            // åƒè°ƒç”¨addä¸€æ ·è°ƒç”¨cf := add                        // å°†å‡½æ•°addèµ‹å€¼ç»™å˜é‡f1fmt.Printf(&quot;type of f:%T\n&quot;, f) // type of f:func(int, int) intfmt.Println(f(10, 20))          // åƒè°ƒç”¨addä¸€æ ·è°ƒç”¨f</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">### é«˜é˜¶å‡½æ•°</span><br><span class="line"></span><br><span class="line">* é«˜é˜¶å‡½æ•°ï¼š</span><br><span class="line">  * å‡½æ•°ä½œä¸ºå‚æ•°</span><br><span class="line">  * å‡½æ•°ä½œä¸ºè¿”å›å€¼</span><br><span class="line"></span><br><span class="line">#### å‡½æ•°ä½œä¸ºå‚æ•°</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">func add(x, y int) int &#123;</span><br><span class="line">return x + y</span><br><span class="line">&#125;</span><br><span class="line">func calc(x, y int, op func(int, int) int) int &#123;</span><br><span class="line">return op(x, y)</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">ret2 := calc(10, 20, add)</span><br><span class="line">fmt.Println(ret2) //30</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="å‡½æ•°ä½œä¸ºè¿”å›å€¼"><a href="#å‡½æ•°ä½œä¸ºè¿”å›å€¼" class="headerlink" title="å‡½æ•°ä½œä¸ºè¿”å›å€¼"></a>å‡½æ•°ä½œä¸ºè¿”å›å€¼</h4><p>ç¤ºä¾‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">do</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">error</span>)</span> &#123;</span><br><span class="line"><span class="keyword">switch</span> s &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line"><span class="keyword">return</span> add, <span class="literal">nil</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line"><span class="keyword">return</span> sub, <span class="literal">nil</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">err := errors.New(<span class="string">&quot;æ— æ³•è¯†åˆ«çš„æ“ä½œç¬¦&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŒ¿åå‡½æ•°å’Œé—­åŒ…"><a href="#åŒ¿åå‡½æ•°å’Œé—­åŒ…" class="headerlink" title="åŒ¿åå‡½æ•°å’Œé—­åŒ…"></a>åŒ¿åå‡½æ•°å’Œé—­åŒ…</h3><h4 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h4><ul><li><p>å¤šç”¨äº å®ç°<strong>å›è°ƒå‡½æ•°å’Œé—­åŒ…</strong></p></li><li><p>å‡½æ•° å¯ä»¥ä½œä¸ºè¿”å›å€¼ï¼Œä½†æ˜¯Go ä¸­ï¼Œå‡½æ•°å†…éƒ¨ä¸èƒ½ä¸€èˆ¬é‚£æ ·å®šä¹‰å‡½æ•°ï¼Œåªèƒ½å®šä¹‰åŒ¿åå‡½æ•°</p><ul><li><p>æ ¼å¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(å‚æ•°)</span><span class="params">(è¿”å›å€¼)</span></span>&#123;</span><br><span class="line">å‡½æ•°ä½“</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åŒ¿åå‡½æ•°æ²¡æœ‰å‡½æ•°åï¼šéœ€è¦ <strong>ä¿å­˜åœ¨æŸä¸ªå˜é‡</strong> æˆ–è€… <strong>ä½œä¸ºç«‹å³æ‰§è¡Œå‡½æ•°</strong></p><ul><li><p>```go<br>func main() {</p><pre><code>// å°†åŒ¿åå‡½æ•°ä¿å­˜åˆ°å˜é‡add := func(x, y int) &#123;    fmt.Println(x + y)&#125;add(10, 20) // é€šè¿‡å˜é‡è°ƒç”¨åŒ¿åå‡½æ•°//è‡ªæ‰§è¡Œå‡½æ•°ï¼šåŒ¿åå‡½æ•°å®šä¹‰å®ŒåŠ ()ç›´æ¥æ‰§è¡Œfunc(x, y int) &#123;    fmt.Println(x + y)&#125;(10, 20)</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### é—­åŒ…ï¼ˆä¸å¤ªæ‡‚ï¼‰</span><br><span class="line"></span><br><span class="line">* é—­åŒ…å¯ä»¥ç†è§£æˆ**â€œå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°â€œ**ã€‚åœ¨æœ¬è´¨ä¸Šï¼Œ**é—­åŒ…æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„æ¡¥æ¢**ã€‚æˆ–è€…è¯´æ˜¯**å‡½æ•°å’Œå…¶å¼•ç”¨ç¯å¢ƒçš„ç»„åˆä½“**ã€‚</span><br><span class="line"></span><br><span class="line">* **ä¸€ä¸ªå‡½æ•°** å’Œ **ä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒ** ç»„åˆè€Œæˆçš„**å®ä½“**</span><br><span class="line"></span><br><span class="line">  * `é—­åŒ… = å‡½æ•°+å¼•ç”¨ç¯å¢ƒ`</span><br><span class="line"></span><br><span class="line">* ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func adder() func(int) int &#123;</span><br><span class="line">    var x int</span><br><span class="line">    return func(y int) int &#123;</span><br><span class="line">    x += y</span><br><span class="line">    return x</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    func main() &#123;</span><br><span class="line">    var f = adder()</span><br><span class="line">    fmt.Println(f(10)) //10</span><br><span class="line">    fmt.Println(f(20)) //30</span><br><span class="line">    fmt.Println(f(30)) //60</span><br><span class="line">    </span><br><span class="line">    f1 := adder()</span><br><span class="line">    fmt.Println(f1(40)) //40</span><br><span class="line">    fmt.Println(f1(50)) //90</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>å˜é‡<code>f</code>: ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å®ƒå¼•ç”¨äº†å…¶å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„<code>x</code></p><ul><li>æ­¤æ—¶ <code>f</code> å°±æ˜¯ä¸€ä¸ªé—­åŒ…</li><li>åœ¨f çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå˜é‡<code>x</code> ä¹Ÿä¸€ç›´æœ‰æ•ˆ</li></ul></li></ul></li><li><p><strong>é—­åŒ…è¿›é˜¶ç¤ºä¾‹1</strong></p><ul><li>```go<br>func adder2(x int) func(int) int {<pre><code>return func(y int) int &#123;    x += y    return x&#125;</code></pre>}<br>func main() {<pre><code>var f = adder2(10)fmt.Println(f(10)) //20fmt.Println(f(20)) //40fmt.Println(f(30)) //70f1 := adder2(20)fmt.Println(f1(40)) //60fmt.Println(f1(50)) //110</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **é—­åŒ…è¿›é˜¶ç¤ºä¾‹2**</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func makeSuffixFunc(suffix string) func(string) string &#123;</span><br><span class="line">    return func(name string) string &#123;</span><br><span class="line">    if !strings.HasSuffix(name, suffix) &#123;</span><br><span class="line">    return name + suffix</span><br><span class="line">    &#125;</span><br><span class="line">    return name</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    jpgFunc := makeSuffixFunc(&quot;.jpg&quot;)</span><br><span class="line">    txtFunc := makeSuffixFunc(&quot;.txt&quot;)</span><br><span class="line">    fmt.Println(jpgFunc(&quot;test&quot;)) //test.jpg</span><br><span class="line">    fmt.Println(txtFunc(&quot;test&quot;)) //test.txt</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>é—­åŒ…è¿›é˜¶ç¤ºä¾‹3</strong></p><ul><li><p>```go<br>func calc(base int) (func(int) int, func(int) int) {</p><pre><code>add := func(i int) int &#123;    base += i    return base&#125;sub := func(i int) int &#123;    base -= i    return base&#125;return add, sub</code></pre><p>}</p><p>func main() {</p><pre><code>f1, f2 := calc(10)fmt.Println(f1(1), f2(2)) //11 9fmt.Println(f1(3), f2(4)) //12 8fmt.Println(f1(5), f2(6)) //13 7</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ç‰¢è®° `é—­åŒ… = å‡½æ•° + å¼•ç”¨ç¯å¢ƒ`</span><br><span class="line"></span><br><span class="line">### defer è¯­å¥</span><br><span class="line"></span><br><span class="line">* defer è¯­å¥çš„**å»¶è¿Ÿè°ƒç”¨**çš„ç‰¹æ€§</span><br><span class="line"></span><br><span class="line">  * ä½¿å¾—èƒ½éå¸¸æ–¹ä¾¿çš„**å¤„ç†èµ„æºé‡Šæ”¾é—®é¢˜**</span><br><span class="line">    * èµ„æºæ¸…ç†ï¼Œæ–‡ä»¶å…³é—­ï¼Œè§£é”åŠè®°å½•æ—¶é—´</span><br><span class="line">    * C++ è¯­è¨€ä¸­çš„ææ„å‡½æ•°ï¼ˆDestructor)å¯ä»¥èµ·åˆ°ç±»ä¼¼ä½œç”¨ï¼šC++ æœºåˆ¶æ‹…ä¿åœ¨å¯¹è±¡è¢«é”€æ¯å‰ä¸€å®šä¼šæ‰§è¡Œææ„å‡½æ•°ä¸­çš„ä»£ç </span><br><span class="line">    * ææ„å‡½æ•°ï¼šææ„å¯¹è±¡</span><br><span class="line">    * deferï¼šææ„å‡½æ•°</span><br><span class="line"></span><br><span class="line">* Go ä¸­çš„`def` å°†è¯­å¥è¿›è¡Œ **å»¶è¿Ÿå¤„ç†**</span><br><span class="line"></span><br><span class="line">* åœ¨`defer`å½’å±çš„å‡½æ•°å³å°†è¿”å›æ—¶ï¼Œå°†å»¶è¿Ÿå¤„ç†çš„è¯­å¥æŒ‰`defer`å®šä¹‰çš„é€†åºè¿›è¡Œæ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">* å³ï¼šå…ˆè¢«`defer` çš„è¯­å¥æœ€åè¢«æ‰§è¡Œï¼Œæœ€åè¢«`defer` çš„è¯­å¥æœ€å…ˆè¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func main() &#123;</span><br><span class="line">    fmt.Println(&quot;start&quot;)</span><br><span class="line">    defer fmt.Println(1)</span><br><span class="line">    defer fmt.Println(2)</span><br><span class="line">    defer fmt.Println(3)</span><br><span class="line">    fmt.Println(&quot;end&quot;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>è¾“å‡ºï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">end</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="defer-æ‰§è¡Œæ—¶æœº"><a href="#defer-æ‰§è¡Œæ—¶æœº" class="headerlink" title="defer æ‰§è¡Œæ—¶æœº"></a>defer æ‰§è¡Œæ—¶æœº</h4><ul><li>åœ¨ Go çš„å‡½æ•°ä¸­ï¼Œreturn è¯­å¥<strong>åœ¨åº•å±‚å¹¶ä¸æ˜¯åŸå­æ“ä½œ</strong><ul><li><strong>ç»™è¿”å›å€¼èµ‹å€¼</strong></li><li><strong>RET æŒ‡ä»¤</strong></li></ul></li><li>è€Œ <code>defer</code> è¯­å¥çš„æ‰§è¡Œæ—¶æœºï¼Œ<strong>å°±åœ¨ç»™è¿”å›å€¼èµ‹å€¼åï¼ŒRET æŒ‡ä»¤æ‰§è¡Œå‰</strong></li><li><strong>deferã€ returnã€è¿”å›å€¼</strong> ä¸‰è€…çš„æ‰§è¡Œé¡ºåºæ˜¯ :<ul><li><strong>return</strong> æœ€å…ˆ<strong>ç»™è¿”å›å€¼èµ‹å€¼ï¼›</strong></li><li>æ¥ç€ defer å¼€å§‹<strong>æ‰§è¡Œä¸€äº›æ”¶å°¾å·¥ä½œ</strong>ï¼›</li><li>æœ€å <strong>RET æŒ‡ä»¤æºå¸¦è¿”å›å€¼é€€å‡ºå‡½æ•°</strong>ã€‚</li></ul></li></ul><h4 id="defer-ç»å…¸æ¡ˆä¾‹-ä¸å¤ªæ‡‚"><a href="#defer-ç»å…¸æ¡ˆä¾‹-ä¸å¤ªæ‡‚" class="headerlink" title="defer ç»å…¸æ¡ˆä¾‹(ä¸å¤ªæ‡‚)"></a>defer ç»å…¸æ¡ˆä¾‹(ä¸å¤ªæ‡‚)</h4><ul><li><p>é˜…è¯»ä»£ç ï¼Œæ‰“å°ç»“æœ</p><ul><li><pre><code class="go">func f1() int &#123;    x := 5    defer func() &#123;        x++    &#125;()    return x&#125;func f2() (x int) &#123;    defer func() &#123;        x++    &#125;()    return 5&#125;func f3() (y int) &#123;    x := 5    defer func() &#123;        x++    &#125;()    return x&#125;func f4() (x int) &#123;    defer func(x int) &#123;        x++    &#125;(x)    return 5&#125;func main() &#123;    fmt.Println(f1())        //5    fmt.Println(f2())        //6    fmt.Println(f3())        //0    fmt.Println(f4())        //1&#125;</code></pre></li><li><p>æˆ‘çš„ç­”æ¡ˆ:<code>5 6 0 1</code></p></li><li><p>è¿è¡Œç­”æ¡ˆï¼š<code>5 6 5 5</code></p></li></ul></li></ul><h4 id="defer-é¢è¯•é¢˜ï¼ˆä¸å¤ªæ‡‚ï¼‰"><a href="#defer-é¢è¯•é¢˜ï¼ˆä¸å¤ªæ‡‚ï¼‰" class="headerlink" title="defer é¢è¯•é¢˜ï¼ˆä¸å¤ªæ‡‚ï¼‰"></a>defer é¢è¯•é¢˜ï¼ˆä¸å¤ªæ‡‚ï¼‰</h4><ul><li>ä»£ç çš„è¾“å‡ºç»“æœï¼š<ul><li><strong>æç¤º</strong>ï¼šdeferæ³¨å†Œè¦ <strong>å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°</strong> æ—¶ï¼Œè¯¥å‡½æ•°**æ‰€æœ‰çš„å‚æ•°éƒ½éœ€è¦ç¡®å®šå…¶å€¼</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8 å‡½æ•°</title>
      <link href="p/3cd8bf08.html"/>
      <url>p/3cd8bf08.html</url>
      
        <content type="html"><![CDATA[<h2 id="8-å‡½æ•°"><a href="#8-å‡½æ•°" class="headerlink" title="8 å‡½æ•°"></a>8 å‡½æ•°</h2><ul><li><p>å‡½æ•°æ˜¯<strong>ç»„ç»‡å¥½çš„ã€å¯é‡å¤ä½¿ç”¨çš„ã€ç”¨äºæ‰§è¡ŒæŒ‡å®šä»»åŠ¡</strong>çš„ä»£ç å—</p></li><li><p>Go ä¸­æ”¯æŒ<strong>å‡½æ•°ã€åŒ¿åå‡½æ•°å’Œé—­åŒ…</strong>ï¼Œå¹¶ä¸”å‡½æ•°åœ¨Goä¸­å±äºâ€ä¸€ç­‰å…¬æ°‘â€</p></li></ul><h3 id="å‡½æ•°å®šä¹‰"><a href="#å‡½æ•°å®šä¹‰" class="headerlink" title="å‡½æ•°å®šä¹‰"></a>å‡½æ•°å®šä¹‰</h3><ul><li><p>å…·ä½“æ ¼å¼ï¼š</p><ul><li><p>```go<br>func å‡½æ•°å(å‚æ•°)(è¿”å›å€¼){</p><pre><code>å‡½æ•°ä½“</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * **å‡½æ•°å**ï¼š*å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿*ç»„æˆã€‚åœ¨**åŒä¸€ä¸ªåŒ…å†…**ï¼Œå‡½æ•°åä¸èƒ½é‡å¤</span><br><span class="line">  * **å‚æ•°**ï¼šç”± *å‚æ•°å˜é‡å’Œå‚æ•°å˜é‡* çš„ç±»å‹ç»„æˆï¼Œå¤šä¸ªå‚æ•°ä½¿ç”¨**é€—å·**éš”å¼€</span><br><span class="line">  * **è¿”å›å€¼**ï¼šç”± *è¿”å›å€¼å˜é‡å’Œå…¶ç±»å‹* ç»„æˆï¼Œä¹Ÿ**å¯ä»¥åªå†™è¿”å›å€¼ç±»å‹**ï¼Œ**å¤šä¸ªè¿”å›å€¼å¿…é¡»ç”¨`()`åŒ…è£¹**ï¼Œå¹¶ç”¨é€—å·éš”å¼€</span><br><span class="line">  * **å‡½æ•°ä½“**ï¼šå®ç°æŒ‡å®šåŠŸèƒ½çš„ä»£ç å—</span><br><span class="line"></span><br><span class="line">* ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func intSum(x int, y int) int &#123;</span><br><span class="line">    return x +y</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯å¯é€‰çš„</p></li></ul></li></ul><h3 id="å‡½æ•°çš„è°ƒç”¨"><a href="#å‡½æ•°çš„è°ƒç”¨" class="headerlink" title="å‡½æ•°çš„è°ƒç”¨"></a>å‡½æ•°çš„è°ƒç”¨</h3><ul><li>å®šä¹‰å‡½æ•°åï¼Œä½¿ç”¨<code>å‡½æ•°å()</code>è°ƒç”¨å‡½æ•°</li><li>è°ƒç”¨æœ‰è¿”å›å€¼çš„å‡½æ•°æ—¶ï¼Œå¯ä»¥ä¸æ¥æ”¶å…¶è¿”å›å€¼</li></ul><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><h4 id="ç±»å‹ç®€å†™"><a href="#ç±»å‹ç®€å†™" class="headerlink" title="ç±»å‹ç®€å†™"></a>ç±»å‹ç®€å†™</h4><ul><li>å‡½æ•°å‚æ•°åˆ—è¡¨ ä¸­ï¼Œè‹¥ç›¸é‚»å˜é‡çš„å‚æ•°ç›¸åŒï¼Œåˆ™å¯ä»¥<strong>çœç•¥å·¦è¾¹çš„ç±»å‹</strong><br>* </li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">intSum</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x+y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a>å¯å˜å‚æ•°</h4><ul><li><p>å¯å˜å‚æ•°ï¼šå‡½æ•°çš„å‚æ•°æ•°é‡ä¸å›ºå®š</p><ul><li><p>åœ¨å‚æ•°åˆ—è¡¨ä¸­åŠ <code>...</code>æ ‡è¯†</p></li><li><p>å‰é¢ä¸€ä¸ªå˜é‡æ˜¯<strong>åˆ‡ç‰‡</strong></p></li><li><p>```go<br>func intSum(x â€¦ int) int{</p><pre><code>//xæ˜¯ä¸€ä¸ªåˆ‡ç‰‡sum := 0for _,v := range x&#123;    sum += v&#125;return sum</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">* è°ƒç”¨ä»…å«æœ‰å¯å˜å‚æ•°çš„å‡½æ•°æ—¶ï¼šå¯æœ‰0æˆ–å¤šä¸ªå˜é‡</span><br><span class="line"></span><br><span class="line">* å›ºå®šå‚æ•° æ­é…å¯å˜å‚æ•°æ—¶ï¼Œå¯å˜å‚æ•°æ”¾åœ¨å›ºå®šå‚æ•°åï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func intSum(x int, y ... int) int&#123;</span><br><span class="line">        sum := x</span><br><span class="line">        for _,v := range y&#123;</span><br><span class="line">            sum += v</span><br><span class="line">        &#125;</span><br><span class="line">        return sum</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>è°ƒç”¨å«æœ‰æ··åˆå‹çš„å‚æ•°æ—¶ï¼Œå¿…é¡»è¦æœ‰å›ºå®šå‚æ•°</p></li><li><p>æœ¬è´¨ä¸Šï¼Œ<strong>å¯å˜å‚æ•°é€šè¿‡åˆ‡ç‰‡å®ç°</strong></p></li></ul><h3 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><ul><li>Go ä¸­é€šè¿‡å…³é”®å­—<code>return</code>å‘å¤–è¾“å‡ºè¿”å›å€¼</li></ul><h4 id="å¤šè¿”å›å€¼"><a href="#å¤šè¿”å›å€¼" class="headerlink" title="å¤šè¿”å›å€¼"></a>å¤šè¿”å›å€¼</h4><ul><li><p>Go æ”¯æŒå¤šè¿”å›å€¼ï¼Œå¿…é¡»ç”¨<code>()</code>å°†æ‰€æœ‰è¿”å›å€¼åŒ…è£¹èµ·æ¥</p><ul><li>```go<br>func calc(x,y int) (int,int){<pre><code>return x+y,x-y</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">#### è¿”å›å€¼å‘½å</span><br><span class="line"></span><br><span class="line">* å‡½æ•°å®šä¹‰æ—¶ï¼Œ å¯ä»¥ç»™è¿”å›å€¼å‘½åï¼Œå¹¶åœ¨å‡½æ•°ä½“å†…ç›´æ¥ä½¿ç”¨ï¼Œæœ€ååªéœ€è¦`return `å…³é”®å­—è¿”å›</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func calc(x,y int) (sum,sub int)&#123;</span><br><span class="line">    sum = x+y</span><br><span class="line">    sub = x-y</span><br><span class="line">    return</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="è¿”å›å€¼è¡¥å……"><a href="#è¿”å›å€¼è¡¥å……" class="headerlink" title="è¿”å›å€¼è¡¥å……"></a>è¿”å›å€¼è¡¥å……</h4><ul><li>å½“ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸º åˆ‡ç‰‡ æ—¶ï¼Œ<code>nil</code>å¯çœ‹ä½œä¸€ä¸ªæœ‰æ•ˆçš„ åˆ‡ç‰‡ï¼Œæ²¡å¿…è¦æ˜¾ç¤ºé•¿åº¦ä¸ºé›¶çš„åˆ‡ç‰‡</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7 map</title>
      <link href="p/19fd4f1c.html"/>
      <url>p/19fd4f1c.html</url>
      
        <content type="html"><![CDATA[<h2 id="7-map"><a href="#7-map" class="headerlink" title="7 map"></a>7 map</h2><ul><li>æ— åºçš„åŸºäº<code>key-value</code>çš„æ•°æ®ç»“æ„</li><li>å†…éƒ¨ä½¿ç”¨<code>æ•£åˆ—è¡¨(hash)</code>å®ç°</li><li>Go ä¸­çš„mapæ˜¯å¼•ç”¨ç±»å‹ï¼Œå¿…é¡»åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨</li></ul><h3 id="map-å®šä¹‰"><a href="#map-å®šä¹‰" class="headerlink" title="map å®šä¹‰"></a>map å®šä¹‰</h3><ul><li>Go ä¸­mapåŸºæœ¬è¯­æ³•<ul><li><code>map[KeyType]ValueType</code></li><li>KeyType : é”®çš„ç±»å‹</li><li>ValueType ï¼šé”®å¯¹åº”çš„å€¼å¾—ç±»å‹</li></ul></li><li>é»˜è®¤åˆå§‹å€¼ï¼š<code>nil</code> éœ€è¦ä½¿ç”¨make åˆ†é…å†…å­˜<ul><li><code>make(map[KeyType]ValueType, [cap])</code><ul><li>cap ï¼šå®¹é‡ï¼Œå¯çœç•¥ã€‚ä½†åº”è¯¥åœ¨åˆå§‹åŒ–æ—¶æŒ‡å®šä¸€ä¸ªåˆé€‚çš„å®¹é‡</li></ul></li></ul></li></ul><h3 id="map-åŸºæœ¬ä½¿ç”¨"><a href="#map-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="map åŸºæœ¬ä½¿ç”¨"></a>map åŸºæœ¬ä½¿ç”¨</h3><ul><li><p>map ä¸­çš„æ•°æ®éƒ½æ˜¯æˆå¯¹å‡ºç°</p><ul><li><p>ç¤ºä¾‹</p></li><li><p>```go<br>scoreMap := make(map[string]int, 8)<br>scoreMap[â€œå°æ˜â€] = 90<br>fmt.Println(scoreMap)<br>fmt.Println(scoreMap[â€œå°æ˜â€])</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* map æ”¯æŒåœ¨å£°æ˜æ—¶ï¼Œåˆ—è¡¨åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    userInfo := map[string]string&#123;</span><br><span class="line">    &quot;username&quot;: &quot;é©¬å­è±ª&quot;,</span><br><span class="line">    &quot;password&quot;:&quot;122&quot;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="map-çš„éå†"><a href="#map-çš„éå†" class="headerlink" title="map çš„éå†"></a>map çš„éå†</h3><ul><li><p>åˆ¤æ–­ map ä¸­é”®æ˜¯å¦å­˜åœ¨çš„ç‰¹æ®Šå†™æ³•ï¼š</p><ul><li><p><code>value,ok := mapname[key]</code></p><ul><li>å¦‚æœkeyå­˜åœ¨ï¼Œåˆ™ ok ä¸º trueï¼Œvalue ä¸ºå¯¹åº”çš„ <strong>å€¼</strong></li><li>è‹¥keyä¸å­˜åœ¨ï¼Œåˆ™ok ä¸ºfalse</li></ul></li><li><p>exampe</p><ul><li>```go<pre><code>scoreMap := make(map[string]int)scoreMap[&quot;å¼ ä¸‰&quot;] = 90scoreMap[&quot;å°æ˜&quot;] = 100// å¦‚æœkeyå­˜åœ¨okä¸ºtrue,vä¸ºå¯¹åº”çš„å€¼ï¼›ä¸å­˜åœ¨okä¸ºfalse,vä¸ºå€¼ç±»å‹çš„é›¶å€¼v, ok := scoreMap[&quot;å¼ ä¸‰&quot;]if ok &#123;    fmt.Println(v)&#125; else &#123;    fmt.Println(&quot;æŸ¥æ— æ­¤äºº&quot;)&#125;</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">### map çš„éå†</span><br><span class="line"></span><br><span class="line">* `for range`é”®å€¼éå†ï¼ŒåŒå­—ç¬¦ä¸²å’Œæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå˜é‡`_`çœç•¥keyæˆ–è€…value</span><br><span class="line">  * æ³¨æ„ï¼šéå†mapæ—¶ï¼Œå…ƒç´ é¡ºåºä¸æ·»åŠ æ—¶é¡ºåºæ— å…³</span><br><span class="line">  * ç¤ºä¾‹, </span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">scoreMap := make(map[string]int)</span><br><span class="line">scoreMap[&quot;å¼ ä¸‰&quot;] = 90</span><br><span class="line">scoreMap[&quot;å°æ˜&quot;] = 100</span><br><span class="line">scoreMap[&quot;å¨œæ‰&quot;] = 60</span><br><span class="line">for k, v := range scoreMap &#123;</span><br><span class="line">fmt.Println(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="ä½¿ç”¨-delete-å‡½æ•°åˆ é™¤é”®å€¼å¯¹"><a href="#ä½¿ç”¨-delete-å‡½æ•°åˆ é™¤é”®å€¼å¯¹" class="headerlink" title="ä½¿ç”¨ delete() å‡½æ•°åˆ é™¤é”®å€¼å¯¹"></a>ä½¿ç”¨ delete() å‡½æ•°åˆ é™¤é”®å€¼å¯¹</h3><ul><li><p>ä½¿ç”¨å†…ç½®å‡½æ•°<code>delete()</code> ä»mapåˆ é™¤ä¸€ç»„ é”®å€¼å¯¹ ï¼Œ</p><ul><li>è¯­æ³•ï¼š<code>delete(mapname,key)</code></li><li>mapname: è¦åˆ é™¤çš„é”®å€¼å¯¹çš„ map</li><li>keyï¼šè¦åˆ é™¤çš„é”®å€¼å¯¹çš„é”®</li></ul></li><li><p>ç¤ºä¾‹</p><ul><li>```go<pre><code>scoreMap := make(map[string]int)scoreMap[&quot;å¼ ä¸‰&quot;] = 90scoreMap[&quot;å°æ˜&quot;] = 100scoreMap[&quot;å¨œæ‰&quot;] = 60delete(scoreMap, &quot;å°æ˜&quot;)//å°†å°æ˜:100ä»mapä¸­åˆ é™¤</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### æŒ‰ç…§æŒ‡å®šé¡ºåºéå†map</span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">func main() &#123;</span><br><span class="line">rand.Seed(time.Now().UnixNano()) //åˆå§‹åŒ–éšæœºæ•°ç§å­</span><br><span class="line"></span><br><span class="line">var scoreMap = make(map[string]int, 200)</span><br><span class="line"></span><br><span class="line">for i := 0; i &lt; 100; i++ &#123;</span><br><span class="line">key := fmt.Sprintf(&quot;stu%02d&quot;, i) //ç”Ÿæˆstuå¼€å¤´çš„å­—ç¬¦ä¸²</span><br><span class="line">value := rand.Intn(100)          //ç”Ÿæˆ0~99çš„éšæœºæ•´æ•°</span><br><span class="line">scoreMap[key] = value</span><br><span class="line">&#125;</span><br><span class="line">//å–å‡ºmapä¸­çš„æ‰€æœ‰keyå­˜å…¥åˆ‡ç‰‡keys</span><br><span class="line">var keys = make([]string, 0, 200)</span><br><span class="line">for key := range scoreMap &#123;</span><br><span class="line">keys = append(keys, key)</span><br><span class="line">&#125;</span><br><span class="line">//å¯¹åˆ‡ç‰‡è¿›è¡Œæ’åº</span><br><span class="line">sort.Strings(keys)</span><br><span class="line">//æŒ‰ç…§æ’åºåçš„keyéå†map</span><br><span class="line">for _, key := range keys &#123;</span><br><span class="line">fmt.Println(key, scoreMap[key])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å…ˆå¯¹keyå€¼æ’åºï¼Œ</p></li><li><p>å†è¾“å‡ºå¯¹åº”é¡ºåºçš„<code>mapname[key]</code></p></li></ul><h3 id="å…ƒç´ ä¸º-map-ç±»å‹çš„åˆ‡ç‰‡"><a href="#å…ƒç´ ä¸º-map-ç±»å‹çš„åˆ‡ç‰‡" class="headerlink" title="å…ƒç´ ä¸º map ç±»å‹çš„åˆ‡ç‰‡"></a>å…ƒç´ ä¸º map ç±»å‹çš„åˆ‡ç‰‡</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> mapSlice = <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> index, value := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;index:%d value:%v\n&quot;</span>, index, value)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;after init&quot;</span>)</span><br><span class="line"><span class="comment">// å¯¹åˆ‡ç‰‡ä¸­çš„mapå…ƒç´ è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">mapSlice[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">mapSlice[<span class="number">0</span>][<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;å°ç‹å­&quot;</span></span><br><span class="line">mapSlice[<span class="number">0</span>][<span class="string">&quot;password&quot;</span>] = <span class="string">&quot;123456&quot;</span></span><br><span class="line">mapSlice[<span class="number">0</span>][<span class="string">&quot;address&quot;</span>] = <span class="string">&quot;æ²™æ²³&quot;</span></span><br><span class="line"><span class="keyword">for</span> index, value := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;index:%d value:%v\n&quot;</span>, index, value)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„-map"><a href="#å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„-map" class="headerlink" title="å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„ map"></a>å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„ map</h3><ul><li>é”®ä¸º<code>string</code></li><li>å€¼ä¸º<code>[]string</code>, åˆ‡ç‰‡</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> sliceMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>][]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">fmt.Println(sliceMap)</span><br><span class="line">fmt.Println(<span class="string">&quot;after init&quot;</span>)</span><br><span class="line">key := <span class="string">&quot;ä¸­å›½&quot;</span></span><br><span class="line">    </span><br><span class="line">value, ok := sliceMap[key]</span><br><span class="line"><span class="keyword">if</span> !ok &#123;</span><br><span class="line">        </span><br><span class="line">value = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">&#125;</span><br><span class="line">value = <span class="built_in">append</span>(value, <span class="string">&quot;åŒ—äº¬&quot;</span>, <span class="string">&quot;ä¸Šæµ·&quot;</span>)</span><br><span class="line">sliceMap[key] = value</span><br><span class="line">fmt.Println(sliceMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><h4 id="ç»ƒä¹ ä¸€"><a href="#ç»ƒä¹ ä¸€" class="headerlink" title="ç»ƒä¹ ä¸€"></a>ç»ƒä¹ ä¸€</h4><ul><li><p>å†™ä¸€ä¸ªç¨‹åºï¼Œç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚æ¯”å¦‚ï¼šâ€how do you doâ€ä¸­how=1 do=2 you=1ã€‚</p></li><li><p>åˆ†æï¼šç»™ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥æŸä¸ªç¬¦å·åˆ†éš”ï¼šä½¿ç”¨<code>strings</code>åŒ…ä¸­çš„Splitæ–¹æ³•</p></li><li><p>```go<br>package main</p><p>import (</p><pre><code>&quot;fmt&quot;&quot;strings&quot;</code></pre><p>)</p><p>func main() {</p><pre><code>a := &quot;how do you do&quot;result := make(map[string]int, 10)b := strings.Split(a, &quot; &quot;)for _, s := range b &#123;    result[s]++&#125;fmt.Println(result)</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### ç»ƒä¹ äºŒ</span><br><span class="line"></span><br><span class="line">* ```go</span><br><span class="line">  func main() &#123;</span><br><span class="line">  type Map map[string][]int   //å€¼ä¸ºåˆ‡ç‰‡ï¼ˆå…ƒç´ ä¸ºintç±»å‹ï¼‰çš„mapç±»å‹</span><br><span class="line">  m := make(Map)//åˆå§‹åŒ–</span><br><span class="line">  s := []int&#123;1, 2&#125;//åˆ‡ç‰‡</span><br><span class="line">      s = append(s, 3)//s : [1 2 3]</span><br><span class="line">  fmt.Printf(&quot;%+v\n&quot;, s)//[1 2 3]</span><br><span class="line">      m[&quot;q1mi&quot;] = s//m : [&quot;qlmi&quot;:[1 2 3]]</span><br><span class="line">      s = append(s[:1], s[2:]...)//s : [1 3]</span><br><span class="line">  fmt.Printf(&quot;%+v\n&quot;, s)//[1 3]</span><br><span class="line">  fmt.Printf(&quot;%+v\n&quot;, m[&quot;q1mi&quot;])//[1 2 3]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç›®æµ‹ç»“æœ: </p><ul><li><code>[1 2 3]</code></li><li><code>[1 3]</code></li><li><code>[1 2 3]</code></li></ul></li><li><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span> <span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span> <span class="number">3</span> <span class="number">3</span>]</span><br></pre></td></tr></table></figure><ul><li>ä¸ºä»€ä¹ˆæœ€åä¸€è¡Œ`[1 3 3]</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6 åˆ‡ç‰‡</title>
      <link href="p/6b9cb04b.html"/>
      <url>p/6b9cb04b.html</url>
      
        <content type="html"><![CDATA[<h2 id="6-åˆ‡ç‰‡"><a href="#6-åˆ‡ç‰‡" class="headerlink" title="6 åˆ‡ç‰‡"></a>6 åˆ‡ç‰‡</h2><ul><li><p>æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ•°ç»„çš„é•¿åº¦ä¹Ÿå±äºç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæœ‰è®¸å¤šå±€é™æ€§</p><ul><li>ä¾‹å¦‚ï¼Œå‡½æ•°ä¼ å‚æ—¶åªèƒ½æ”¯æŒä¸€ç§æ•°ç»„ç±»å‹</li><li>ä¾‹å¦‚ï¼Œä¸èƒ½å†ç»§ç»­å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ </li></ul></li><li><p><code>Slice</code> æ˜¯ä¸€ä¸ªæ‹¥æœ‰<strong>ç›¸åŒç±»å‹å…ƒç´ çš„å¯å˜é•¿åº¦åºåˆ—</strong></p><ul><li>æ˜¯åŸºäºæ•°ç»„ç±»å‹åšçš„ä¸€å±‚å°è£…</li><li>ååˆ†çµæ´»ï¼Œæ”¯æŒè‡ªåŠ¨æ‰©å®¹</li></ul></li><li><p>åˆ‡ç‰‡æ˜¯ä¸€ä¸ª <strong>å¼•ç”¨ç±»å‹</strong>,ä¸æ”¯æŒç›´æ¥æ¯”è¾ƒï¼Œåªèƒ½å’Œ<code>nil</code>æ¯”è¾ƒ</p><ul><li>å†…éƒ¨ç»“æ„åŒ…å« <code>åœ°å€</code>ã€<code>é•¿åº¦</code>ã€<code>å®¹é‡</code></li></ul></li><li><p>ä¸€èˆ¬ç”¨äº<strong>å¿«é€Ÿçš„</strong>æ“ä½œ<strong>ä¸€å—æ•°æ®é›†åˆ</strong></p></li></ul><h3 id="åˆ‡ç‰‡çš„å®šä¹‰"><a href="#åˆ‡ç‰‡çš„å®šä¹‰" class="headerlink" title="åˆ‡ç‰‡çš„å®šä¹‰"></a>åˆ‡ç‰‡çš„å®šä¹‰</h3><ul><li><p>åŸºæœ¬è¯­æ³•ï¼š<code>var name []T</code></p><ul><li>name : å˜é‡å</li><li>T : åˆ‡ç‰‡ä¸­çš„å…ƒç´ ç±»å‹</li></ul></li><li><p>ç¤ºä¾‹ï¼š</p><ul><li>```<br>var a []string<br>var b = []int{}<br>var c = []bool{false, true}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">#### åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡</span><br><span class="line"></span><br><span class="line">* åˆ‡ç‰‡æ‹¥æœ‰è‡ªå·±çš„é•¿åº¦å’Œå®¹é‡ï¼š</span><br><span class="line">  * `len()` æ±‚é•¿åº¦</span><br><span class="line">  * `cap()` æ±‚å®¹é‡</span><br><span class="line"></span><br><span class="line">#### åˆ‡ç‰‡çš„è¡¨è¾¾å¼</span><br><span class="line"></span><br><span class="line">* åˆ‡ç‰‡è¡¨è¾¾å¼ ä»`å­—ç¬¦ä¸²ã€æ•°ç»„ã€æŒ‡å‘æ•°ç»„æˆ–åˆ‡ç‰‡çš„æŒ‡é’ˆ` æ„é€  å­å­—ç¬¦ä¸²æˆ–åˆ‡ç‰‡</span><br><span class="line">* ä¸¤ç§å˜ä½“</span><br><span class="line">  * æŒ‡å®š`low`å’Œ`high`ä¸¤ä¸ªç´¢å¼•ç•Œé™å€¼çš„ç®€å•å½¢å¼</span><br><span class="line">  * é™¤äº†`low`å’Œ`high`ç´¢å¼•ç•Œé™å€¼å¤–ï¼Œè¿˜æŒ‡å®šå®¹é‡ çš„å®Œæ•´å½¢å¼</span><br><span class="line"></span><br><span class="line">##### ç®€å•åˆ‡ç‰‡è¡¨è¾¾å¼</span><br><span class="line"></span><br><span class="line">* åˆ‡ç‰‡çš„åº•å±‚å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span><br><span class="line"></span><br><span class="line">* å¯ä»¥**åŸºäº æ•°ç»„** é€šè¿‡åˆ‡ç‰‡è¡¨è¾¾å¼å¾—åˆ°åˆ‡ç‰‡</span><br><span class="line"></span><br><span class="line">* `[low , high)`: å·¦åŒ…å«ï¼Œå³ä¸åŒ…å«</span><br><span class="line"></span><br><span class="line">  * å¾—åˆ°çš„**åˆ‡ç‰‡é•¿åº¦** `high - low`</span><br><span class="line"></span><br><span class="line">  * å¾—åˆ°çš„**åˆ‡ç‰‡å®¹é‡æ˜¯** æ“ä½œæ•°æ•°ç»„ä¸‹æ ‡ä»`low` åˆ°æœ€åä¸€ä¸ªå…ƒç´ æ‰€ç»„æˆçš„æ•°ç»„çš„é•¿åº¦</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">    * ```go</span><br><span class="line">      a := [5]int&#123;1,2,3,4,5&#125;</span><br><span class="line">      s := a[1:3]  </span><br><span class="line">      fmt.Pritf(&quot;s:%v len(s):%v cap(s): %v&quot;,s,len(s),cap(s))</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åˆ‡ç‰‡è¡¨è¾¾å¼ä¸­çš„ä»»ä½•ç´¢å¼•å¯ä»¥çœç•¥ï¼š</p><ul><li><code>low</code>é»˜è®¤ä¸º <strong>0</strong></li><li><code>high</code>é»˜è®¤ä¸º <strong>åˆ‡ç‰‡æ“ä½œæ•°çš„é•¿åº¦</strong></li><li><code>a[2:] </code> : <code>high</code> = len(a)</li><li><code>a[:3]</code>: <code>low</code> = 0</li><li><code>a[:]</code> low = 0, high = len(a)</li></ul></li><li><p>==æ³¨æ„ï¼š==</p><ul><li>å¯¹äºæ•°ç»„å’Œå­—ç¬¦ä¸²ï¼šè‹¥<code>0&lt;=low&lt;=high&lt;=len(a)</code> åˆ™ç´¢å¼•åˆæ³•ï¼Œå¦åˆ™<strong>ç´¢å¼•è¶Šç•Œ</strong>ï¼Œè¿è¡Œæ—¶ä¼š<code>panic</code></li><li>å¯¹ åˆ‡ç‰‡ å†æ‰§è¡Œåˆ‡ç‰‡è¡¨è¾¾å¼(åˆ‡ç‰‡åœ¨åˆ‡ç‰‡æ—¶)ï¼Œ<ul><li><code>high</code> çš„ä¸Šé™æ˜¯ åˆ‡ç‰‡çš„å®¹é‡<code>cap(s)</code>ï¼Œè€Œéé•¿åº¦<code>len(s)</code></li></ul></li><li><strong>å¸¸é‡ç´¢å¼•</strong>å¿…é¡»æ˜¯éè´Ÿï¼Œintç±»å‹</li></ul></li><li></li></ul><h5 id="å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼"><a href="#å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼" class="headerlink" title="å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼"></a>å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼</h5><ul><li><em>æ•°ç»„ï¼ŒæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œæˆ–åˆ‡ç‰‡</em> æ”¯æŒå®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼<ul><li>æ³¨æ„ï¼Œ<strong>å­—ç¬¦ä¸²ä¸æ”¯æŒ</strong></li></ul></li><li>æ ¼å¼ <code>a[low : high : max]</code></li><li>æ„é€ ä¸ç®€å•åˆ‡ç‰‡è¡¨è¾¾å¼<code>a[low,high]</code> <ul><li>ç›¸åŒç±»å‹ã€ç›¸åŒé•¿åº¦ã€ç›¸åŒå…ƒç´ </li><li>å°†åˆ‡ç‰‡çš„å®¹é‡è®¾ç½®ä¸º<code>max-low</code> </li></ul></li><li>åœ¨å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼ä¸­ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªç´¢å¼•å€¼<code>low</code>å¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¸º 0<ul><li>ç¤ºä¾‹</li><li></li></ul></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">t := a[<span class="number">1</span>:<span class="number">3</span>:<span class="number">5</span>]</span><br><span class="line"><span class="comment">//t: [2 3] len(t):2 cap(t):4</span></span><br></pre></td></tr></table></figure><ul><li>å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼ éœ€æ»¡è¶³<ul><li><code>0 &lt;= low &lt;= high &lt;= max &lt;= cap(a)</code></li></ul></li></ul><h4 id="ä½¿ç”¨-make-å‡½æ•°æ„é€ åˆ‡ç‰‡"><a href="#ä½¿ç”¨-make-å‡½æ•°æ„é€ åˆ‡ç‰‡" class="headerlink" title="ä½¿ç”¨ make() å‡½æ•°æ„é€ åˆ‡ç‰‡"></a>ä½¿ç”¨ make() å‡½æ•°æ„é€ åˆ‡ç‰‡</h4><ul><li><p>é™¤äº†åŸºäºæ•°ç»„æ„é€ åˆ‡ç‰‡ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºåˆ‡ç‰‡</p></li><li><p>make æ ¼å¼ï¼š<code>make ([]T, size, cap)</code></p><ul><li><code>T</code> : åˆ‡ç‰‡å†…å…ƒç´ ç±»å‹</li><li><code>size</code> ï¼šåˆ‡ç‰‡ä¸­å…ƒç´ æ•°é‡</li><li><code>cap</code> ï¼šåˆ‡ç‰‡å®¹é‡</li></ul></li><li><p>ç¤ºä¾‹ï¼š</p><ul><li><p>```go<br>a := make([]int, 2, 10)<br>//a: [0 0] len(a):2 cap(a): 10</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * aåˆ‡ç‰‡çš„å†…éƒ¨å­˜å‚¨ç©ºé—´åˆ†é…äº†10ï¼Œå®é™…ä¸Šåªç”¨äº†2ä¸ª</span><br><span class="line"></span><br><span class="line">  * å®¹é‡ä¸ä¼šå½±å“å½“å‰å…ƒç´ çš„ä¸ªæ•°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### åˆ‡ç‰‡çš„æœ¬è´¨</span><br><span class="line"></span><br><span class="line">* **æœ¬è´¨ï¼š**å¯¹åº•å±‚æ•°ç»„çš„å°è£…ï¼ŒåŒ…å«ä¸‰ä¸ªä¿¡æ¯</span><br><span class="line"></span><br><span class="line">  * åº•å±‚æ•°ç»„çš„æŒ‡é’ˆ</span><br><span class="line">  * åˆ‡ç‰‡çš„é•¿åº¦</span><br><span class="line">  * åˆ‡ç‰‡çš„å®¹é‡</span><br><span class="line"></span><br><span class="line">* ä¾‹å¦‚</span><br><span class="line"></span><br><span class="line">  ```go</span><br><span class="line">  a := [8]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">  s1 := a[:5]</span><br></pre></td></tr></table></figure></li><li><p><img src="E:\LearningNotes\Go\GoLearning.assets\slice_01.png" alt="slice_01"></p></li><li><p>åˆ‡ç‰‡<code>s2 := a[3:6]</code></p><ul><li><img src="E:\LearningNotes\Go\GoLearning.assets\slice_02.png" alt="slice_02"></li></ul></li></ul></li></ul><h4 id="åˆ¤æ–­åˆ‡ç‰‡æ˜¯å¦ä¸ºç©º"><a href="#åˆ¤æ–­åˆ‡ç‰‡æ˜¯å¦ä¸ºç©º" class="headerlink" title="åˆ¤æ–­åˆ‡ç‰‡æ˜¯å¦ä¸ºç©º"></a>åˆ¤æ–­åˆ‡ç‰‡æ˜¯å¦ä¸ºç©º</h4><ul><li>æœ€å¥½ä½¿ç”¨åˆ‡ç‰‡çš„é•¿åº¦ <code>len(s)==0</code> æ¥åˆ¤æ–­</li></ul><h3 id="åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ"><a href="#åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ" class="headerlink" title="åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ"></a>åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ</h3><ul><li><p>ä¸èƒ½ä½¿ç”¨ <code>==</code> æ“ä½œç¬¦åˆ¤æ–­åˆ‡ç‰‡æ˜¯å¦å…¨éƒ¨å…ƒç´ ç›¸ç­‰</p></li><li><p>åˆ‡ç‰‡å”¯ä¸€åˆæ³•çš„æ¯”è¾ƒæ“ä½œï¼šå’Œ<code>nil</code>æ¯”è¾ƒ</p></li><li><p>ä¸€ä¸ª<code>nil</code>å€¼çš„åˆ‡ç‰‡ï¼Œæ²¡æœ‰åº•å±‚æ•°ç»„</p><ul><li>åˆ‡ç‰‡é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯ 0</li></ul></li><li><p>ä½†æ˜¯ä¸€ä¸ªé•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0çš„åˆ‡ç‰‡ä¸ä¸€å®šæ˜¯<code>nil</code></p><ul><li><p>ç¤ºä¾‹</p></li><li><p>```go<br>var s1 []int         //len(s1)=0;cap(s1)=0;s1==nil<br>s2 := []int{}        //len(s2)=0;cap(s2)=0;s2!=nil<br>s3 := make([]int, 0) //len(s3)=0;cap(s3)=0;s3!=nil</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">* å› æ­¤åˆ¤æ–­åˆ‡ç‰‡æ˜¯å¦ä¸ºç©ºä¸»è¦ç”¨`len(s)==0`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### åˆ‡ç‰‡çš„èµ‹å€¼æ‹·è´</span><br><span class="line"></span><br><span class="line">* ä¸€ä¸ªåˆ‡ç‰‡ **æ‹·è´èµ‹å€¼** å¦ä¸€ä¸ªåˆ‡ç‰‡ï¼Œä¸¤ä¸ªåˆ‡ç‰‡ä¼šå…±äº«åº•å±‚æ•°ç»„ï¼Œå› æ­¤å¯¹ä¸€ä¸ªåˆ‡ç‰‡çš„ä¿®æ”¹ä¼šå½±å“å¦ä¸€ä¸ªåˆ‡ç‰‡</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    s1 := make([]int, 3) //[0 0 0]</span><br><span class="line">    s2 := s1             //å°†s1ç›´æ¥èµ‹å€¼ç»™s2ï¼Œs1å’Œs2å…±ç”¨ä¸€ä¸ªåº•å±‚æ•°ç»„</span><br><span class="line">    s2[0] = 100</span><br><span class="line">    fmt.Println(s1) //[100 0 0]</span><br><span class="line">    fmt.Println(s2) //[100 0 0]</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="åˆ‡ç‰‡éå†"><a href="#åˆ‡ç‰‡éå†" class="headerlink" title="åˆ‡ç‰‡éå†"></a>åˆ‡ç‰‡éå†</h3><ul><li>æ”¯æŒä¸‹æ ‡ç´¢å¼•éå†å’Œ<code>for range</code>é”®å€¼éå†</li></ul><h3 id="append-æ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ "><a href="#append-æ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ " class="headerlink" title="append() æ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ "></a>append() æ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ </h3><ul><li><p>Go ä¸­çš„å†…ç½®å‡½æ•°<code>append()</code> å¯ä»¥ä¸ºåˆ‡ç‰‡åŠ¨æ€æ·»åŠ å…ƒç´ </p><ul><li>æ·»åŠ ä¸€ä¸ªï¼š<code>s = append(s,1)</code></li><li>æ·»åŠ å¤šä¸ªï¼š<code>s = append(s,1,2,3)</code></li><li>æ·»åŠ å¦ä¸€ä¸ªåˆ‡ç‰‡ä¸­çš„å…ƒç´  ï¼š<code>s = append(s, s2...)</code></li></ul></li><li><p>==æ³¨æ„ï¼š==é€šè¿‡<strong>varå£°æ˜</strong>çš„ <code>é›¶å€¼åˆ‡ç‰‡</code> å¯ä»¥åœ¨<code>append()</code> ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€åˆå§‹åŒ–</p><ul><li><p>```go<br>var s []int   //å£°æ˜åç›´æ¥ä½¿ç”¨<br>s = append(s,1,2)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ¯ä¸ªåˆ‡ç‰‡æŒ‡å‘ä¸€ä¸ª**åº•å±‚æ•°ç»„**ï¼Œ</span><br><span class="line"></span><br><span class="line">  * è¿™ä¸ªæ•°ç»„çš„**å®¹é‡å¤Ÿç”¨**å°±ç›´æ¥åœ¨è¯¥æ•°ç»„æ–°å¢å…ƒç´ </span><br><span class="line">  * å½“**å®¹é‡ä¸å¤Ÿç”¨**æ—¶ï¼Œåˆ‡ç‰‡**æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œæ‰©å®¹**ã€‚æ­¤æ—¶è¯¥åˆ‡ç‰‡æŒ‡å‘çš„**åº•å±‚æ•°ç»„ä¼šæ›´æ¢**</span><br><span class="line">  * **æ‰©å®¹æ“ä½œ**å‘ç”Ÿåœ¨`append`æ—¶ï¼Œå› æ­¤éœ€è¦ç”¨åŸå˜é‡æ¥æ”¶å‡½æ•°è¿”å›å€¼</span><br><span class="line"></span><br><span class="line">* `append`:</span><br><span class="line"></span><br><span class="line">  * å°†å…ƒç´ è¿½åŠ åˆ°åˆ‡ç‰‡çš„æœ€åå¹¶è¿”å›è¯¥åˆ‡ç‰‡</span><br><span class="line">  * åˆ‡ç‰‡æ‰©å®¹çš„è§„åˆ™éƒ½æ˜¯æ‰©å®¹å‰çš„ä¸¤å€</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### åˆ‡ç‰‡çš„æ‰©å®¹ç­–ç•¥</span><br><span class="line"></span><br><span class="line">* æŸ¥çœ‹æºç ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    newcap := old.cap</span><br><span class="line">    doublecap := newcap + newcap</span><br><span class="line">    if cap &gt; doublecap &#123;</span><br><span class="line">    newcap = cap</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    if old.len &lt; 1024 &#123;</span><br><span class="line">    newcap = doublecap</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    // Check 0 &lt; newcap to detect overflow</span><br><span class="line">    // and prevent an infinite loop.</span><br><span class="line">    for 0 &lt; newcap &amp;&amp; newcap &lt; cap &#123;</span><br><span class="line">    newcap += newcap / 4</span><br><span class="line">    &#125;</span><br><span class="line">    // Set newcap to the requested cap when</span><br><span class="line">    // the newcap calculation overflowed.</span><br><span class="line">    if newcap &lt;= 0 &#123;</span><br><span class="line">    newcap = cap</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol><li><p>é¦–å…ˆåˆ¤æ–­ï¼Œè‹¥æ–°ç”³è¯·(cap)å¤§äºä¸¤å€çš„æ—§å®¹é‡(old.cap)ï¼Œæœ€ç»ˆå®¹é‡(newcap)å°±æ˜¯æ–°ç”³è¯·çš„å®¹é‡</p></li><li><p>å¦åˆ™åˆ¤æ–­ï¼Œè‹¥æ—§åˆ‡ç‰‡çš„é•¿åº¦å°äº1024ï¼Œæœ€ç»ˆå®¹é‡å°±æ˜¯æ—§å®¹é‡çš„ä¸¤å€ï¼Œ</p></li><li><p>å¦åˆ™åˆ¤æ–­ï¼Œè‹¥æ—§åˆ‡ç‰‡çš„é•¿åº¦å¤§äºç­‰äº1024ï¼Œæœ€ç»ˆå®¹é‡ä»æ—§å®¹é‡å¼€å§‹å¾ªå¢åŠ åŸæ¥çš„1/4ï¼Œç›´åˆ°æœ€ç»ˆå®¹é‡å¤§äºç­‰äºæ–°ç”³è¯·çš„å®¹é‡</p></li><li><p>å¦‚æœæœ€ç»ˆå®¹é‡è®¡ç®—å€¼æº¢å‡ºï¼Œåˆ™æœ€ç»ˆå®¹é‡å°±æ˜¯æ–°ç”³è¯·çš„å®¹é‡</p></li></ol></li></ul></li><li><p>æ³¨æ„ï¼šåˆ‡ç‰‡æ‰©å®¹ä¼šæ ¹æ®åˆ‡ç‰‡ä¸­å…ƒç´ ç±»å‹çš„ä¸åŒè€Œä½œä¸åŒå¤„ç†</p></li></ul><h3 id="ä½¿ç”¨-copy-å‡½æ•°å¤åˆ¶åˆ‡ç‰‡"><a href="#ä½¿ç”¨-copy-å‡½æ•°å¤åˆ¶åˆ‡ç‰‡" class="headerlink" title="ä½¿ç”¨ copy() å‡½æ•°å¤åˆ¶åˆ‡ç‰‡"></a>ä½¿ç”¨ copy() å‡½æ•°å¤åˆ¶åˆ‡ç‰‡</h3><ul><li><p>ç”±äºåˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´èµ‹å€¼æ—¶ï¼Œä¸¤ä¸ªåˆ‡ç‰‡éƒ½æŒ‡å‘åŒä¸€å—å†…å­˜åœ°å€</p><ul><li><p>ç¤ºä¾‹</p></li><li><p>```go</p><pre><code>a := []int&#123;1, 2, 3, 4, 5&#125;b := afmt.Println(a) //[1 2 3 4 5]fmt.Println(b) //[1 2 3 4 5]b[0] = 1000fmt.Println(a) //[1000 2 3 4 5]fmt.Println(b) //[1000 2 3 4 5]</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">* å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•°`copy()`è¿…é€Ÿåœ°å°†ä¸€ä¸ªåˆ‡ç‰‡çš„æ•°æ®å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªåˆ‡ç‰‡ç©ºé—´ä¸­ï¼Œ</span><br><span class="line"></span><br><span class="line">  * `copy(destSlice, srcSlice []T)`</span><br><span class="line"></span><br><span class="line">    * srcSliceï¼šæ•°æ®æ¥æºåˆ‡ç‰‡</span><br><span class="line">    * dextSlice:ç›®æ ‡åˆ‡ç‰‡</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    a := []int&#123;1, 2, 3, 4, 5&#125;</span><br><span class="line">    c := make([]int, 5, 5)</span><br><span class="line">    copy(c, a)     //ä½¿ç”¨copy()å‡½æ•°å°†åˆ‡ç‰‡aä¸­çš„å…ƒç´ å¤åˆ¶åˆ°åˆ‡ç‰‡c</span><br><span class="line">    fmt.Println(a) //[1 2 3 4 5]</span><br><span class="line">    fmt.Println(c) //[1 2 3 4 5]</span><br><span class="line">    c[0] = 1000</span><br><span class="line">    fmt.Println(a) //[1 2 3 4 5]</span><br><span class="line">    fmt.Println(c) //[1000 2 3 4 5]</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ "><a href="#ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ " class="headerlink" title="ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ "></a>ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ </h3><ul><li><p>Go ä¸­æ— åˆ é™¤åˆ‡ç‰‡å…ƒç´ çš„ä¸“ç”¨æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨åˆ‡ç‰‡æœ¬èº«ç‰¹æ€§ï¼š</p><ul><li><p>è‹¥è¦åˆ é™¤ä¸‹è¡¨ä¸º<code>index</code>: <code>s = append(s[:index],s[index+1:]...)</code></p></li><li><p>```go<br>func main() {</p><pre><code>// ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ a := []int&#123;30, 31, 32, 33, 34, 35, 36, 37&#125;// è¦åˆ é™¤ç´¢å¼•ä¸º2çš„å…ƒç´ a = append(a[:2], a[3:]...)fmt.Println(a) //[30 31 33 34 35 36 37]</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ç»ƒä¹ é¢˜</span><br><span class="line"></span><br><span class="line">#### ç»ƒä¹ ä¸€</span><br><span class="line"></span><br><span class="line">è¯·å†™å‡ºä¸‹é¢ä»£ç çš„è¾“å‡ºç»“æœã€‚</span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">func main() &#123;</span><br><span class="line">    var a = make([]string, 5, 10)//a : [0 0 0 0 0 0 0 0 0 0 ],len 5, cap 10</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">a = append(a, fmt.Sprintf(&quot;%v&quot;, i)) //[0 0 0 0 0 &quot;0&quot; &quot;1&quot; ...&quot;9&quot;]</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ç›´æ¥åˆ†æï¼š[0 0 0 0 0 â€œ0â€ â€œ1â€ â€¦â€9â€]</p></li><li><p>run ï¼š<code>[   0 1 2 3 4 5 6 7 8 9]</code></p><ul><li>å‰é¢äº”ä¸ªç©ºå­—ç¬¦ä¸²</li></ul></li></ul><h4 id="ç»ƒä¹ äºŒ"><a href="#ç»ƒä¹ äºŒ" class="headerlink" title="ç»ƒä¹ äºŒ"></a>ç»ƒä¹ äºŒ</h4><p>è¯·ä½¿ç”¨å†…ç½®çš„<code>sort</code>åŒ…å¯¹æ•°ç»„<code>var a = [...]int&#123;3, 7, 8, 9, 1&#125;</code>è¿›è¡Œæ’åºï¼ˆé™„åŠ é¢˜ï¼Œè‡ªè¡ŒæŸ¥èµ„æ–™è§£ç­”ï¼‰ã€‚</p><ul><li><p><code>sort</code> åŒ…ä¸»è¦é’ˆå¯¹[]int., []float64,[]string ä»¥åŠå…¶ä»–è‡ªå®šä¹‰åˆ‡ç‰‡çš„æ’åº</p><ul><li><p>å†…éƒ¨å®ç°äº†ï¼šæ’å…¥æ’åºã€å½’å¹¶æ’åºã€å †æ’åºã€å¿«é€Ÿæ’åº</p></li><li><p>sort ä¼šä¾æ®å®é™…æ•°æ®è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„æ’åºæ–¹æ³•</p></li><li><p>æˆ‘ä»¬åªéœ€è¦è€ƒè™‘å®ç° <code>sort.Interface</code>ç±»å‹</p><ul><li>```go<br>type Interface interface {<pre><code>Len() int           // Lenæ–¹æ³•è¿”å›é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°Less(i, j int) bool // i&gt;jï¼Œè¯¥æ–¹æ³•è¿”å›ç´¢å¼•içš„å…ƒç´ æ˜¯å¦æ¯”ç´¢å¼•jçš„å…ƒç´ å°ã€Swap(i, j int)      // äº¤æ¢i, jçš„å€¼</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä¾‹å¦‚ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    package main</span><br><span class="line">     </span><br><span class="line">    import (</span><br><span class="line">        &quot;fmt&quot;</span><br><span class="line">        &quot;sort&quot;</span><br><span class="line">    )</span><br><span class="line">     </span><br><span class="line">    type IntSlice []int</span><br><span class="line">     </span><br><span class="line">    func (s IntSlice) Len() int &#123; </span><br><span class="line">        return len(s) </span><br><span class="line">    &#125;</span><br><span class="line">    func (s IntSlice) Swap(i, j int)&#123;</span><br><span class="line">        s[i], s[j] = s[j], s[i] </span><br><span class="line">    &#125;</span><br><span class="line">    func (s IntSlice) Less(i, j int) bool &#123;</span><br><span class="line">        return s[i] &lt; s[j] </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    func main() &#123;</span><br><span class="line">        a := []int&#123;4,3,2,1,5,9,8,7,6&#125;</span><br><span class="line">        sort.Sort(IntSlice(a))</span><br><span class="line">        fmt.Println(&quot;After sorted: &quot;, a)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5 Array</title>
      <link href="p/c6746613.html"/>
      <url>p/c6746613.html</url>
      
        <content type="html"><![CDATA[<h2 id="5-Array-æ•°ç»„"><a href="#5-Array-æ•°ç»„" class="headerlink" title="5 Array æ•°ç»„"></a>5 Array æ•°ç»„</h2><ul><li>åŒä¸€ç§æ•°æ®ç±»å‹çš„é›†åˆ</li><li>Go ä¸­ï¼Œæ•°ç»„ä»å£°æ˜æ—¶å°±ç¡®å®šï¼Œä½¿ç”¨æ—¶å¯ä»¥ä¿®æ”¹æ•°ç»„æˆå‘˜ï¼Œä½†æ˜¯<strong>æ•°ç»„å¤§å°ä¸å¯å˜</strong><ul><li>è¯­æ³•ï¼š<code>var a [3]int</code></li></ul></li></ul><h3 id="æ•°ç»„å®šä¹‰"><a href="#æ•°ç»„å®šä¹‰" class="headerlink" title="æ•°ç»„å®šä¹‰"></a>æ•°ç»„å®šä¹‰</h3><ul><li><code>var name [size]T</code><ul><li>size å¿…é¡»æ˜¯å¸¸é‡</li><li>é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå®šä¹‰åä¸å¯å˜</li><li>ä¸åŒé•¿åº¦ï¼Œä¸å¯ç›¸äº’èµ‹å€¼</li></ul></li><li>æ•°ç»„å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è®¿é—®ï¼Œ<code>0 - size-1</code></li><li>è‹¥è¶Šç•Œï¼Œä¼šè§¦å‘è®¿é—®è¶Šç•Œï¼Œpanic</li></ul><h3 id="æ•°ç»„çš„åˆå§‹åŒ–"><a href="#æ•°ç»„çš„åˆå§‹åŒ–" class="headerlink" title="æ•°ç»„çš„åˆå§‹åŒ–"></a>æ•°ç»„çš„åˆå§‹åŒ–</h3><h4 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h4><ul><li><p>å¯ä»¥ä½¿ç”¨ åˆå§‹åŒ–åˆ—è¡¨ è®¾ç½®æ•°ç»„å…ƒç´ çš„å€¼</p><ul><li>```go<br>var a [3]int                        //æ•°ç»„å…ƒç´ åˆå§‹åŒ–ä¸ºintç±»å‹çš„0<br>var b = [3]int{1,2}                    //ä½¿ç”¨æŒ‡å®šçš„åˆå§‹å€¼å®Œæˆæˆåˆå§‹åŒ–<br>var c = [3]string{â€œåŒ—äº¬â€,â€ä¸Šæµ·â€}     //æŒ‡å®šçš„å€¼å®Œæˆåˆå§‹åŒ–<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">#### æ–¹æ³•äºŒ</span><br><span class="line"></span><br><span class="line">* æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨æ ¹æ®åˆå§‹å€¼çš„ä¸ªæ•°è‡ªè¡Œæ¨æ–­é•¿åº¦</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    var a = [...]int&#123;1,2&#125;</span><br><span class="line">    var b = [...]string&#123;&quot;ss&quot;&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="æ–¹æ³•ä¸‰"><a href="#æ–¹æ³•ä¸‰" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h4><ul><li>ä½¿ç”¨æŒ‡å®šç´¢å¼•å€¼çš„æ–¹å¼ï¼Œåˆå§‹åŒ–æ•°ç»„<br>* </li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>:<span class="number">1</span>, <span class="number">3</span>:<span class="number">5</span>&#125;</span><br><span class="line"><span class="comment">//[0 1 0 5]</span></span><br><span class="line"><span class="comment">//type : [4]int</span></span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„çš„éå†"><a href="#æ•°ç»„çš„éå†" class="headerlink" title="æ•°ç»„çš„éå†"></a>æ•°ç»„çš„éå†</h3><p>ä¸¤ç§æ–¹æ³•</p><ul><li><p>forå¾ªç¯</p><ul><li>```go<br>a := [â€¦]string{â€œxâ€, â€œyâ€}<br>for i:=0; i&lt;len(a); i++{<pre><code>fmt.Println(a[i])</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* for rangeé”®å€¼å¾ªç¯</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    a := [...]string&#123;&quot;x&quot;, &quot;y&quot;&#125;</span><br><span class="line">    for index, value := range a&#123;</span><br><span class="line">        fmt.Println(index,value)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="å¤šç»´æ•°ç»„"><a href="#å¤šç»´æ•°ç»„" class="headerlink" title="å¤šç»´æ•°ç»„"></a>å¤šç»´æ•°ç»„</h3><ul><li>Go æ”¯æŒå¤šç»´æ•°ç»„ï¼Œæ•°ç»„ä¸­åµŒå¥—æ•°ç»„</li></ul><h4 id="äºŒç»´æ•°ç»„çš„å®šä¹‰"><a href="#äºŒç»´æ•°ç»„çš„å®šä¹‰" class="headerlink" title="äºŒç»´æ•°ç»„çš„å®šä¹‰"></a>äºŒç»´æ•°ç»„çš„å®šä¹‰</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">&#123;<span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;z&quot;</span>, <span class="string">&quot;j&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(a[<span class="number">2</span>][<span class="number">1</span>]) <span class="comment">//æ”¯æŒç´¢å¼•å–å€¼</span></span><br></pre></td></tr></table></figure><h4 id="äºŒç»´æ•°ç»„çš„éå†"><a href="#äºŒç»´æ•°ç»„çš„éå†" class="headerlink" title="äºŒç»´æ•°ç»„çš„éå†"></a>äºŒç»´æ•°ç»„çš„éå†</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _, i := <span class="keyword">range</span> a&#123;</span><br><span class="line">    <span class="keyword">for</span> _, j := <span class="keyword">range</span> i&#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s\t\n&quot;</span>,j)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>==æ³¨æ„==ï¼šå¤šç»´æ•°ç»„åªæœ‰ç¬¬ä¸€å±‚å¯ä»¥ä½¿ç”¨<code>...</code> æ¥è®©ç¼–è¯‘å™¨æ¨å¯¼æ•°ç»„çš„é•¿åº¦</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a := [...][<span class="number">2</span>]&#123;</span><br><span class="line">    &#123;<span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;z&quot;</span>, <span class="string">&quot;j&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„æ˜¯å€¼ç±»å‹"><a href="#æ•°ç»„æ˜¯å€¼ç±»å‹" class="headerlink" title="æ•°ç»„æ˜¯å€¼ç±»å‹"></a>æ•°ç»„æ˜¯å€¼ç±»å‹</h3><ul><li>æ•°ç»„çš„<strong>èµ‹å€¼å’Œä¼ å‚</strong>ä¼š <strong>å¤åˆ¶æ•´ä¸ªæ•°ç»„</strong>ï¼Œæ”¹å˜å‰¯æœ¬çš„å€¼ä¸ä¼šå½±å“åˆ°æœ¬èº«</li><li>==æ³¨æ„ï¼š==<ul><li>æ•°ç»„æ”¯æŒ<code>==</code> <code>!=</code>æ“ä½œç¬¦ï¼Œå› ä¸º<strong>å†…å­˜æ€»æ˜¯è¢«åˆå§‹åŒ–è¿‡çš„</strong></li><li><code>[n]*T</code>è¡¨ç¤º<strong>æŒ‡é’ˆæ•°ç»„</strong>ï¼Œ<code>*[n]T</code>è¡¨ç¤º<strong>æ•°ç»„æŒ‡é’ˆ</strong></li></ul></li></ul><h3 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><h4 id="ç»ƒä¹ ä¸€"><a href="#ç»ƒä¹ ä¸€" class="headerlink" title="ç»ƒä¹ ä¸€"></a>ç»ƒä¹ ä¸€</h4><ul><li>æ±‚æ•°ç»„<code>[1, 3, 5, 7, 8]</code>æ‰€æœ‰å…ƒç´ çš„å’Œ</li></ul><h4 id="ç»ƒä¹ äºŒ"><a href="#ç»ƒä¹ äºŒ" class="headerlink" title="ç»ƒä¹ äºŒ"></a>ç»ƒä¹ äºŒ</h4><ul><li><p>æ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºæŒ‡å®šå€¼çš„ä¸¤ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œæ¯”å¦‚ä»æ•°ç»„<code>[1, 3, 5, 7, 8]</code>ä¸­æ‰¾å‡ºå’Œä¸º8çš„ä¸¤ä¸ªå…ƒç´ çš„ä¸‹æ ‡åˆ†åˆ«ä¸º<code>(0,3)</code>å’Œ<code>(1,2)</code>ã€‚</p></li><li><pre><code class="go">package mainimport &quot;fmt&quot;func main() &#123;    a := [...]int&#123;1, 3, 5, 7, 8&#125;    for i := 0; i &lt; len(a); i++ &#123;        for j := i + 1; j &lt; len(a); j++ &#123;            if a[i]+a[j] == 8 &#123;                fmt.Printf(&quot;%d %d\n&quot;, i, j)            &#125;        &#125;    &#125;&#125;</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lab 0</title>
      <link href="p/20b5d973.html"/>
      <url>p/20b5d973.html</url>
      
        <content type="html"><![CDATA[<h1 id="Lab-0"><a href="#Lab-0" class="headerlink" title="Lab 0"></a>Lab 0</h1><p>[toc]</p><ul><li>ucoreè¿è¡Œç¯å¢ƒï¼šX86 ç¡¬ä»¶æ¨¡æ‹Ÿå™¨ï¼ŒQEMUã€VirtualBoxã€VMware Player</li><li>ucoreå¼€å‘ç¯å¢ƒï¼šGCCçš„gccã€gasã€ldå’ŒMAKEï¼Œæˆ–é›†æˆå¼€å‘ç¯å¢ƒEclipse-CDT</li><li>åˆ†ææºä»£ç ï¼šunderstand</li><li>è½¯ä»¶å¼€å‘ç‰ˆæœ¬ç®¡ç†ï¼šGITã€SVN</li><li>æ¯”è¾ƒæ–‡ä»¶å’Œç›®å½•çš„ä¸åŒï¼Œå‘ç°ä¸åŒå®éªŒä¸­çš„å·®å¼‚æ€§å’Œè¿›è¡Œæ–‡ä»¶åˆå¹¶æ“ä½œï¼šmeldã€kdiff3ã€UltraCompare</li><li>è°ƒè¯•ï¼ˆdebugï¼‰å‘ç°è®¾è®¡ä¸­å¾—å‡ºé”™è¯¯ï¼šgdbï¼ˆé…åˆQEMUï¼‰ç­‰è°ƒè¯•å·¥å…·è½¯ä»¶</li></ul><h1 id="1-å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š"><a href="#1-å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š" class="headerlink" title="1 å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š"></a>1 <strong>å®‰è£…ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å¼€å‘è¿‡ç¨‹ï¼š</strong></h1><ol><li><strong>Bootloader+toy ucore:</strong> ç†è§£æ“ä½œç³»ç»Ÿå¯åŠ¨å‰çš„ç¡¬ä»¶çŠ¶æ€å’Œè¦åšçš„å‡†å¤‡å·¥ä½œï¼Œäº†è§£è¿è¡Œæ“ä½œç³»ç»Ÿçš„å¤–è®¾ç¡¬ä»¶æ”¯æŒï¼Œæ“ä½œç³»ç»Ÿå¦‚ä½•åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç†è§£ä¸¤ç±»ä¸­æ–­â€”â€œå¤–è®¾ä¸­æ–­â€ï¼Œâ€œé™·é˜±ä¸­æ–­â€ï¼Œå†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åŒºåˆ«ï¼›</li><li><strong>ç‰©ç†å†…å­˜ç®¡ç†ï¼š</strong>ç†è§£x86åˆ†æ®µ/åˆ†é¡µæ¨¡å¼ï¼Œäº†è§£æ“ä½œç³»ç»Ÿå¦‚ä½•ç®¡ç†ç‰©ç†å†…å­˜ï¼›</li><li><strong>è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼š</strong>ç†è§£OSè™šå­˜çš„åŸºæœ¬åŸç†å’Œç›®æ ‡ï¼Œä»¥åŠå¦‚ä½•ç»“åˆé¡µè¡¨+ä¸­æ–­å¤„ç†ï¼ˆç¼ºé¡µæ•…éšœå¤„ç†ï¼‰æ¥å®ç°è™šå­˜çš„ç›®æ ‡ï¼Œå¦‚ä½•å®ç°åŸºäºé¡µçš„å†…å­˜æ›¿æ¢ç®—æ³•å’Œæ›¿æ¢è¿‡ç¨‹ï¼›</li><li><strong>å†…æ ¸çº¿ç¨‹ç®¡ç†ï¼š</strong>ç†è§£å†…æ ¸çº¿ç¨‹åˆ›å»ºã€æ‰§è¡Œã€åˆ‡æ¢å’Œç»“æŸçš„åŠ¨æ€ç®¡ç†è¿‡ç¨‹ï¼Œä»¥åŠå†…æ ¸çº¿ç¨‹çš„è¿è¡Œå‘¨æœŸç­‰ï¼›</li><li><strong>ç”¨æˆ·è¿›ç¨‹ç®¡ç†ï¼š</strong>ç†è§£ç”¨æˆ·è¿›ç¨‹åˆ›å»ºã€æ‰§è¡Œã€åˆ‡æ¢å’Œç»“æŸçš„åŠ¨æ€ç®¡ç†è¿‡ç¨‹ï¼Œä»¥åŠåœ¨ç”¨æˆ·æ€é€šè¿‡ç³»ç»Ÿè°ƒç”¨å¾—åˆ°å†…æ ¸ä¸­å„ç§æœåŠ¡çš„è¿‡ç¨‹ï¼›</li><li><strong>å¤„ç†å™¨è°ƒåº¦ï¼š</strong>ç†è§£æ“ä½œç³»ç»Ÿçš„è°ƒåº¦è¿‡ç¨‹å’Œè°ƒåº¦ç®—æ³•ï¼›</li><li><strong>åŒæ­¥äº’æ–¥ä¸è¿›ç¨‹é—´é€šä¿¡ï¼š</strong>ç†è§£åŒæ­¥äº’æ–¥çš„å…·ä½“å®ç°ä»¥åŠå¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼Œç ”ç©¶æ­»é”äº§ç”Ÿçš„åŸå› ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Œä»¥åŠçº¿ç¨‹/è¿›ç¨‹é—´å¦‚ä½•è¿›è¡Œä¿¡æ¯äº¤æ¢å’Œå…±äº«ï¼›</li><li><strong>æ–‡ä»¶ç³»ç»Ÿï¼š</strong>ç†è§£æ–‡ä»¶ç³»ç»Ÿçš„å…·ä½“å®ç°ï¼Œä¸è¿›ç¨‹ç®¡ç†å’Œå†…å­˜ç®¡ç†ç­‰çš„å…³ç³»ï¼Œç¼“å­˜å¯¹æ“ä½œç³»ç»ŸIOè®¿é—®çš„æ€§èƒ½æ”¹è¿›ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ã€buffer cacheå’Œdisk driverä¹‹é—´çš„å…³ç³»ã€‚</li></ol><ul><li>æ¯ä¸ªå¼€å‘æ­¥éª¤éƒ½æ˜¯å»ºç«‹åœ¨ä¸Šä¸€ä¸ªæ­¥éª¤ä¹‹ä¸Šçš„</li><li>ä»ç†è§£æ“ä½œç³»ç»ŸåŸç†åˆ°å®è·µæ“ä½œç³»ç»Ÿè®¾è®¡ä¸å®ç°çš„æ¢ç´¢è¿‡ç¨‹</li></ul><p><img src="https://static.sitestack.cn/projects/simple_os_book/bf9d40a8440c97f51c06416e01c91a5f.png" alt="ucoreæ“ä½œç³»ç»Ÿæ¶æ„"></p><h1 id="2-å®éªŒç¯å¢ƒ"><a href="#2-å®éªŒç¯å¢ƒ" class="headerlink" title="2 å®éªŒç¯å¢ƒ"></a>2 å®éªŒç¯å¢ƒ</h1><h2 id="2-1-ä½¿ç”¨-Linux-å®éªŒç¯å¢ƒ"><a href="#2-1-ä½¿ç”¨-Linux-å®éªŒç¯å¢ƒ" class="headerlink" title="2.1 ä½¿ç”¨ Linux å®éªŒç¯å¢ƒ"></a>2.1 ä½¿ç”¨ Linux å®éªŒç¯å¢ƒ</h2><ul><li><p>å®‰è£… Ubuntu Linux 20.04</p><ul><li><a href="https://blog.csdn.net/qq_31939617/article/details/100114546">å‚è€ƒåšå®¢</a></li><li>å§“åï¼šzihao</li><li>å¯†ç ï¼š123456</li><li>æ³¨æ„ï¼šä¸è¦ skip</li></ul></li><li><p>å‘½ä»¤è¡Œæ–¹å¼çš„ç¼–è¯‘ã€è°ƒè¯•ã€è¿è¡Œæ“ä½œç³»ç»Ÿ</p></li><li><p>å‘½ä»¤æ¨¡å¼çš„åŸºæœ¬ç»“æ„å’Œæ¦‚å¿µï¼šå®ç°éœ€è¦çš„æ‰€æœ‰æ“ä½œ</p></li><li><p>è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼šGNOMEèœå•-&gt;é™„ä»¶-&gt;ç»ˆç«¯</p></li><li><p>å‘½ä»¤è¡Œç»ˆç«¯æç¤ºç¬¦ï¼šè¡¨ç¤ºè®¡ç®—æœºå·²å°±ç»ªï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥æ“ä½œæŒ‡ä»¤ã€‚æ­¤æ—¶è¾“å…¥ä»»ä½•æŒ‡ä»¤æŒ‰å›è½¦åï¼Œè¯¥æŒ‡ä»¤å°†ä¼šè¢«æäº¤åˆ°è®¡ç®—æœºè¿è¡Œ</p></li><li><p><strong>å¸¸ç”¨æŒ‡ä»¤</strong>ï¼š</p><ul><li>lsï¼šæŸ¥è¯¢æ–‡ä»¶åˆ—è¡¨<ul><li>ls /: åˆ—å‡ºæ ¹ç›®å½•</li><li>ls -l: åˆ—å‡ºæ›´è¯¦ç»†çš„æ–‡ä»¶æ¸…å•</li><li>ls -a:åˆ—å‡ºåŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆä»¥.å¼€å¤´çš„æ–‡ä»¶ï¼‰</li></ul></li><li>pwdï¼šæŸ¥è¯¢å½“å‰æ‰€åœ¨ç›®å½•</li><li>cd /ç›®å½•è·¯å¾„ : è¿›å…¥å…¶ä»–ç›®å½•</li><li>echo â€œå­—ç¬¦ä¸²â€: åœ¨å±å¹•è¾“å‡ºå­—ç¬¦</li><li>catï¼šæ˜¾ç¤ºæ–‡ä»¶å†…å®¹<ul><li>less/moreä½œä¸ºé€‰é¡¹æ˜¾ç¤ºæ¯”è¾ƒå¤§çš„æ–‡ä»¶å†…å®¹</li></ul></li><li>cp: å¤åˆ¶æ–‡ä»¶</li><li>mvï¼šç§»åŠ¨æ–‡ä»¶</li><li>touchï¼šå»ºç«‹ä¸€ä¸ªç©ºæ–‡æœ¬æ–‡ä»¶</li><li>mkdirï¼šå»ºç«‹ä¸€ä¸ªç›®å½•</li><li>rmï¼šåˆ é™¤æ–‡ä»¶/ç›®å½•</li></ul></li><li><p><strong>é€‰é¡¹</strong>ï¼š</p><ul><li>-p: è®©ç³»ç»Ÿæ˜¾ç¤ºæŸä¸€é¡¹çš„ç±»å‹ï¼Œæ¯”å¦‚æ˜¯æ–‡ä»¶/æ–‡ä»¶å¤¹/å¿«æ·é“¾æ¥</li><li>-iï¼ˆinteractiveï¼‰ï¼šåœ¨ç³»ç»Ÿåˆ é™¤æ“ä½œå‰è¾“å‡ºç¡®å®šæŒ‡ç¤º</li><li>-rï¼ˆrecursiveï¼‰: åˆ é™¤æ–‡ä»¶å¤¹</li></ul></li><li><p><strong>å…¶ä»–åŸºæœ¬æŒ‡ä»¤</strong>ï¼š</p><ul><li>psï¼šæŸ¥è¯¢å½“å‰è¿›ç¨‹<ul><li>åˆ—å‡ºæ‰€å¯åŠ¨çš„æ‰€æœ‰è¿›ç¨‹</li><li>-a : åˆ—å‡ºæ‰€æœ‰çš„ï¼ˆåŒ…æ‹¬å…¶ä»–ç”¨æˆ·ï¼‰</li><li>ps auxww:  åˆ—å‡ºé™¤ä¸€äº›ç‰¹æ®Šè¿›ç¨‹ä»¥å¤–çš„æ‰€æœ‰è¿›ç¨‹ï¼Œå¹¶ä¼šä»¥ä¸€ä¸ªé«˜å¯è¯»çš„å½¢å¼æ˜¾ç¤ºç»“æœï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰è¾ƒä¸ºè¯¦ç»†çš„è§£é‡Š</li></ul></li></ul></li><li><p>æ§åˆ¶æµç¨‹</p><ul><li><p>è¾“å…¥/è¾“å‡º</p><ul><li>inputï¼šè¯»å–é€šè¿‡æ ‡å‡†è¾“å…¥è®¾å¤‡è¾“å…¥çš„ä¿¡æ¯</li><li>outputï¼šè¾“å‡ºæŒ‡å®šçš„è¾“å‡ºå†…å®¹ã€‚åœ¨é‡åˆ°æ“ä½œé”™è¯¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå‘½ä»¤è¾“å‡ºæ ‡å‡†é”™è¯¯æç¤º</li></ul></li><li><p>é‡å®šå‘</p></li><li><p>ç®¡é“ï¼šæŠŠå‡ ä¸ªç®€å•å‘½ä»¤è”åˆæˆä¸ºå¤æ‚çš„åŠŸèƒ½</p><ul><li><code>|</code><ul><li><code>grep -i command &lt; myfile | sort &gt; result.text</code></li><li>æœç´¢myfileä¸­çš„å‘½ä»¤ï¼Œå°†è¾“å‡ºåˆ†ç±»å¹¶å†™å…¥åˆ°åˆ†ç±»æ–‡ä»¶result.text</li></ul></li></ul></li><li><p>åå°è¿›ç¨‹ï¼šè¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹åˆ°åå°ï¼Œè¿½åŠ  &amp; åˆ°å‘½ä»¤åé¢</p><ul><li><code>sleep 60 &amp;</code></li><li>ç¡çœ å‘½ä»¤åœ¨åå°è¿è¡Œï¼Œå®ä¾ç„¶å¯ä»¥ä¸è®¡ç®—æœºäº¤äº’ã€‚é™¤äº†ä¸åŒæ­¥å¯åŠ¨å‘½ä»¤å¤–ï¼Œ</li><li>å¦‚æœä¸€ä¸ªå‘½ä»¤å°†å ç”¨å¾ˆå¤šæ—¶é—´ï¼Œæƒ³è®©å…¶æ”¾å…¥åå°è¿è¡Œ</li><li><blockquote><p>sleep 60</p><p>&lt; ctrl z&gt;   # åœæ­¢</p><p>bg  #è½¬å…¥åå°</p><p>fg  # è½¬å›å‰å°</p></blockquote></li><li><code>ctrl c</code>:æ€æ­»ä¸€ä¸ªå‰å°ç¨‹åº</li></ul></li></ul></li><li><p>ç¯å¢ƒå˜é‡</p></li><li><p>è·å¾—è½¯ä»¶åŒ…</p><ul><li><p>å‘½ä»¤è¡Œè·å–è½¯ä»¶åŒ…</p><ul><li><p><code>apt-get</code>: è‡ªåŠ¨ä»äº’è”ç½‘è½¯ä»¶åº“ä¸­æœç´¢ã€å®‰è£…ã€å‡çº§ä»¥åŠå¸è½½è½¯ä»¶æˆ–è€…æ“ä½œç³»ç»Ÿ</p></li><li><p>ä¸€èˆ¬éœ€è¦root æ‰§è¡Œæƒé™</p></li><li><p>è¯­æ³• <code>sudo apt-get install gcc</code></p></li><li><p>å¸¸è§ apt å‘½ä»¤ï¼š</p><ul><li><blockquote><p>apt-get install <code>&lt;package&gt;</code> # ä¸‹è½½<code>&lt;package&gt;</code> ä»¥åŠæ‰€ä¾èµ–çš„è½¯ä»¶åŒ…ï¼ŒåŒæ—¶è¿›è¡Œè½¯ä»¶åŒ…çš„å®‰è£…æˆ–è€…å‡çº§</p><p>apt-get remove <code>&lt;package&gt;</code> #ç§»é™¤<code>&lt;package&gt;</code>ä»¥åŠæ‰€ä¾èµ–çš„è½¯ä»¶åŒ…</p><p>apt-cache search <code>&lt;pattern&gt;</code> #æœç´¢æ»¡è¶³pattern çš„è½¯ä»¶åŒ…</p><p>apt-cache show/showpkg <code>&lt;package&gt;</code> #æ˜¾ç¤ºè½¯ä»¶åŒ… <code>&lt;package&gt;</code> çš„å®Œæ•´æè¿°</p></blockquote></li></ul></li></ul></li><li><p><strong>è§£å†³ apt ä¸‹è½½é€Ÿåº¦å¤ªæ…¢ï¼š</strong></p><ul><li><a href="https://blog.csdn.net/qq_34246778/article/details/92849180">é€‰æ‹©æœ€ä½³æœåŠ¡å™¨</a></li></ul></li><li><p>å›¾å½¢ç•Œé¢è½¯ä»¶åŒ…è·å–</p><ul><li><code>èœå•æ -&gt;ç³»ç»Ÿç®¡ç† -&gt; æ–°å¾·é‡Œè½¯ä»¶åŒ…ç®¡ç†å™¨</code></li></ul></li><li><p>é…ç½®å‡çº§æº</p><ul><li><blockquote><p>Ubuntuçš„è½¯ä»¶åŒ…è·å–ä¾èµ–å‡çº§æºï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ â€œ/etc/apt/sources.listâ€ æ–‡ä»¶æ¥ä¿®æ”¹å‡çº§æºï¼ˆéœ€è¦ root æƒé™ï¼‰ï¼›æˆ–è€…ä¿®æ”¹æ–°ç«‹å¾—è½¯ä»¶åŒ…ç®¡ç†å™¨ä¸­ â€œè®¾ç½® &gt; è½¯ä»¶åº“â€ã€‚</p></blockquote></li></ul></li></ul></li><li><p>æŸ¥æ‰¾å¸®åŠ©æ–‡ä»¶</p><ul><li>å‘½ä»¤ <code>man</code></li><li>å¯¹ Linux ä¸‹å¸¸ç”¨å‘½ä»¤ã€å®‰è£…è½¯ä»¶ã€ä»¥åŠCè¯­è¨€å¸¸ç”¨å‡½æ•°è¿›è¡ŒæŸ¥è¯¢</li><li>è¯­æ³• <code>man å‘½ä»¤</code></li></ul></li></ul><h2 id="2-2-å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶"><a href="#2-2-å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶" class="headerlink" title="2.2 å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶"></a>2.2 å¯èƒ½ç”¨åˆ°çš„è½¯ä»¶</h2><ul><li><p><strong>ç¼–è¾‘å™¨</strong></p><ul><li><p>gnome</p></li><li><p><strong>Vim</strong></p><ul><li><p>ä¸‹è½½å®‰è£…VIm <code>sudo spt-get install vim</code></p></li><li><p>æŸ¥çœ‹ vim ç‰ˆæœ¬å‘½ä»¤ <code>vim --version</code></p></li><li><p>ç¼–è¾‘é…ç½®æ–‡ä»¶è‡³ <code>~/.vimrc</code></p><ul><li><blockquote><p>åœ¨å¯åŠ¨vimæ—¶ï¼Œå½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹çš„.vimrcæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨è¯»å–ï¼Œè¯¥æ–‡ä»¶å¯ä»¥åŒ…å«ä¸€äº›è®¾ç½®ç”šè‡³è„šæœ¬ï¼Œæ‰€ä»¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æŠŠ.vimrcæ–‡ä»¶åˆ›å»ºåœ¨å½“å‰ç”¨æˆ·çš„æ ¹ç›®å½•ä¸‹æ¯”è¾ƒæ–¹ä¾¿</p></blockquote></li></ul></li><li><blockquote><p>```<br>set nocompatible<br>set encoding=utf-8<br>set fileencodings=utf-8,chinese<br>set tabstop=4<br>set cindent shiftwidth=4<br>set backspace=indent,eol,start<br>autocmd Filetype c set omnifunc=ccomplete#Complete<br>autocmd Filetype cpp set omnifunc=cppcomplete#Complete<br>set incsearch<br>set number<br>set display=lastline<br>set ignorecase<br>syntax on<br>set nobackup<br>set ruler<br>set showcmd<br>set smartindent<br>set hlsearch<br>set cmdheight=1<br>set laststatus=2<br>set shortmess=atI<br>set formatoptions=tcrqn<br>set autoindent </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **exuberant-ctags:** ä¸ºç¨‹åºè¯­è¨€å¯¹è±¡ç”Ÿæˆç´¢å¼•ï¼Œå…¶ç»“æœèƒ½å¤Ÿè¢«ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æˆ–è€…å…¶ä»–å·¥å…·ç®€æ·è¿…é€Ÿçš„å®šä½</span><br><span class="line"></span><br><span class="line"># 3 äº†è§£ç¼–ç¨‹å¼€å‘è°ƒè¯•çš„åŸºæœ¬å·¥å…·</span><br><span class="line"></span><br><span class="line">## 3.1 gcc çš„åŸºæœ¬ç”¨æ³•</span><br><span class="line"></span><br><span class="line">* ä½¿ç”¨ vim ç¼–è¾‘ä¸€ä¸ª .c æ–‡ä»¶</span><br><span class="line">* ç”¨ gcc ç¼–è¯‘æ–‡ä»¶ï¼š`gcc -Wall hello.c -o hello`</span><br><span class="line"></span><br><span class="line"> * &gt; è¯¥å‘½ä»¤å°†æ–‡ä»¶â€˜hello.câ€™ä¸­çš„ä»£ç **ç¼–è¯‘**ä¸ºæœºå™¨ç å¹¶**å­˜å‚¨**åœ¨å¯æ‰§è¡Œæ–‡ä»¶ â€˜helloâ€™ä¸­ã€‚æœºå™¨ç çš„æ–‡ä»¶åæ˜¯é€šè¿‡ -o é€‰é¡¹æŒ‡å®šçš„ã€‚è¯¥é€‰é¡¹é€šå¸¸ä½œä¸ºå‘½ä»¤è¡Œä¸­çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚å¦‚æœè¢«çœç•¥ï¼Œè¾“å‡ºæ–‡ä»¶é»˜è®¤ä¸º â€˜a.out</span><br><span class="line"></span><br><span class="line">* `-Wall`: å¼€å¯ç¼–è¯‘å™¨å‡ ä¹æ‰€æœ‰å¸¸ç”¨çš„è­¦å‘Š</span><br><span class="line">* è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼šè¾“å…¥å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„</span><br><span class="line"></span><br><span class="line"> * `./hello`</span><br><span class="line"> * &gt; è¯¥å‘½ä»¤å°†å¯æ‰§è¡Œæ–‡ä»¶**è½½å…¥å†…å­˜**ï¼Œå¹¶**ä½¿CPUå¼€å§‹æ‰§è¡Œ**å…¶åŒ…å«çš„æŒ‡ä»¤</span><br><span class="line"></span><br><span class="line">./ å½“å‰ç›®å½•</span><br><span class="line"></span><br><span class="line">å› æ­¤ `./hello`: è½½å…¥å¹¶æ‰§è¡Œå½“å‰ç›®å½•ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ hello</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 3.1.1 AT &amp; Tæ±‡ç¼–åŸºæœ¬è¯­æ³•</span><br><span class="line"></span><br><span class="line">* Ucore ç”¨çš„æ˜¯ AT&amp;T æ ¼å¼çš„æ±‡ç¼–</span><br><span class="line"></span><br><span class="line"> * 1.**å¯„å­˜å™¨å¼•ç”¨**ï¼š åœ¨å¯„å­˜å™¨å·å‰åŠ  `%`</span><br><span class="line"> * 2.**æ“ä½œæ•°é¡ºåº**ï¼šä»å·¦åˆ°å³</span><br><span class="line"> * 3.**ç«‹å³æ•°**ï¼šåœ¨æ•°å‰é¢åŠ  `$`</span><br><span class="line">   * 16 è¿›åˆ¶å¸¸æ•°ï¼š`0x $`</span><br><span class="line"> * 4**.ç¬¦å·å¸¸æ•°**ï¼šç›´æ¥å¼•ç”¨</span><br><span class="line">   * åœ¨å‰åŠ  `$`ï¼šå¼•ç”¨ç¬¦å·åœ°å€</span><br><span class="line"> * 5.**æ“ä½œæ•°é•¿åº¦**ï¼šåŠ åœ¨æŒ‡ä»¤å</span><br><span class="line">   * b : 8-bit</span><br><span class="line">   * w: 16-bit</span><br><span class="line">   * l: 32-bit</span><br><span class="line">   * è‹¥æ²¡æœ‰æŒ‡å®šæ“ä½œæ•°é•¿åº¦ï¼Œç¼–è¯‘å™¨æŒ‰ç…§**ç›®æ ‡æ“ä½œæ•°**çš„é•¿åº¦æ¥è®¾ç½®</span><br><span class="line"> * 6**.å†…å­˜å¼•ç”¨**ï¼š</span><br><span class="line">   * Intel æ ¼å¼çš„ç®€ä»‹å†…å­˜å¼•ç”¨ï¼š</span><br><span class="line">     * `section:[base+index*scale+displacement]`</span><br><span class="line">   * AT&amp;T æ ¼å¼çš„é—´æ¥å†…å­˜å¼•ç”¨ï¼š</span><br><span class="line">     * `section:displacement(base,index,scale)`</span><br><span class="line">* ä¸ Intelæ ¼å¼çš„æ±‡ç¼–çš„ä¸åŒ</span><br><span class="line"></span><br><span class="line"> * </span><br><span class="line"> * ```</span><br><span class="line">   * å¯„å­˜å™¨å‘½ååŸåˆ™</span><br><span class="line">           AT&amp;T: %eax                      Intel: eax</span><br><span class="line">       * æº/ç›®çš„æ“ä½œæ•°é¡ºåº </span><br><span class="line">           AT&amp;T: movl %eax, %ebx           Intel: mov ebx, eax</span><br><span class="line">       * å¸¸æ•°/ç«‹å³æ•°çš„æ ¼å¼ã€€</span><br><span class="line">           AT&amp;T: movl $_value, %ebx        Intel: mov eax, _value</span><br><span class="line">         æŠŠvalueçš„åœ°å€æ”¾å…¥eaxå¯„å­˜å™¨</span><br><span class="line">           AT&amp;T: movl $0xd00d, %ebx        Intel: mov ebx, 0xd00d</span><br><span class="line">       * æ“ä½œæ•°é•¿åº¦æ ‡è¯† </span><br><span class="line">           AT&amp;T: movw %ax, %bx             Intel: mov bx, ax</span><br><span class="line">       * å¯»å€æ–¹å¼ </span><br><span class="line">           AT&amp;T:   immed32(basepointer, indexpointer, indexscale)</span><br><span class="line">           Intel:  [basepointer + indexpointer Ã— indexscale + imm32)</span><br></pre></td></tr></table></figure></blockquote></li></ul></li><li><p>OS å·¥ä½œäºä¿æŠ¤æ¨¡å¼ä¸‹æ—¶ï¼Œç”¨ 32 ä½çº¿æ€§åœ°å€ï¼Œæ‰€ä»¥åœ¨è®¡ç®—åœ°å€æ—¶ä¸ç”¨è€ƒè™‘ segment ï¼šoffse</p></li><li><p>ä¸Šå¼ä¸­çš„åœ°å€ <code>immed32+basepointer+indexpointer*indexscale</code></p></li><li><p>```</p><pre><code>* ç›´æ¥å¯»å€         AT&amp;T:  foo                         Intel: [foo]        fooæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚æ³¨æ„åŠ ä¸Š$æ˜¯è¡¨ç¤ºåœ°å€å¼•ç”¨ï¼Œä¸åŠ æ˜¯è¡¨ç¤ºå€¼å¼•ç”¨ã€‚å¯¹äºå±€éƒ¨å˜é‡ï¼Œå¯ä»¥é€šè¿‡å †æ ˆæŒ‡é’ˆå¼•ç”¨ã€‚* å¯„å­˜å™¨é—´æ¥å¯»å€         AT&amp;T: (%eax)                        Intel: [eax]* å˜å€å¯»å€         AT&amp;T: _variable(%eax)               Intel: [eax + _variable]        AT&amp;T: _array( ,%eax, 4)             Intel: [eax Ã— 4 + _array]        AT&amp;T: _array(%ebx, %eax,8)          Intel: [ebx + eax Ã— 8 + _array]</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 3.1.4 GCC åŸºæœ¬å†…è”æ±‡ç¼–</span><br><span class="line"></span><br><span class="line">* GCC æ”¯æŒåœ¨ C++ ä»£ç ä¸­åµŒå…¥æ±‡ç¼–ä»£ç ï¼šGCC Inline ASMâ€”â€”GCC å†…è”æ±‡ç¼–</span><br><span class="line"></span><br><span class="line">  * æœ‰åˆ©äºå°†ä¸€äº›C++æ— æ³•è¡¨è¾¾çš„æŒ‡ä»¤ç›´æ¥åµŒå…¥</span><br><span class="line">  * å…è®¸æˆ‘ä»¬ç›´æ¥å†™æ±‡ç¼–ï¼Œæ¥ç¼–å†™ç®€æ´ä»£ç </span><br><span class="line">* GCC æä¾›äº†ä¸¤å†…è”æ±‡ç¼–è¯­å¥ï¼ˆInline asm statementsï¼‰:</span><br><span class="line"></span><br><span class="line">  * åŸºæœ¬å†…è”æ±‡ç¼–è¯­å¥ï¼ˆbasic inline asm statementsï¼‰</span><br><span class="line">    * æ ¼å¼ï¼š`asm(&quot;statements&quot;);`</span><br><span class="line">  * æ‰©å±•å†…è”æ±‡ç¼–è¯­å¥ï¼ˆextended inline asm statementsï¼‰</span><br><span class="line">* `&quot;asm&quot;`å’Œ `â€œ_asm_â€`çš„å«ä¹‰ä¸€è‡´: å£°æ˜ä¸€ä¸ªå†…è”æ±‡ç¼–è¡¨è¾¾å¼</span><br><span class="line"></span><br><span class="line">  * asm æ˜¯ GCC å…³é”®å­— asmçš„å®å®šä¹‰</span><br><span class="line">    * `#define _asm_ asm`</span><br><span class="line">* è‹¥æœ‰å¤šè¡Œæ±‡ç¼–ï¼Œæ¯è¡Œæœ€ååŠ  `\n\t`</span><br><span class="line"></span><br><span class="line">  * \n : æ¢è¡Œç¬¦</span><br><span class="line">  * \t : tabç¬¦å·</span><br><span class="line">  * ä¸ºäº† ä½¿å¾— gcc åœ¨ç¼–è¯‘å†…è”æ±‡ç¼–ä»£ç ï¼Œæˆä¸ºä¸€èˆ¬çš„æ±‡ç¼–ä»£ç æ—¶èƒ½å¤Ÿä¿è¯æ¢è¡Œï¼Œå’Œæœ‰ä¸€å®šçš„ç©ºæ ¼</span><br><span class="line">  * GCC ç¼–è¯‘å‡ºæ¥çš„æ±‡ç¼–ä»£ç å°±æ˜¯åŒå¼•å·ä¸­çš„å†…å®¹</span><br><span class="line">* gcc åœ¨å¤„ç†æ±‡ç¼–æ—¶ï¼ŒæŠŠasmï¼ˆï¼‰çš„å†…å®¹æ‰“å°åˆ°æ±‡ç¼–æ–‡ä»¶ä¸­ï¼Œæ ¼å¼æ§åˆ¶å­—ç¬¦æ˜¯å¿…è¦çš„</span><br><span class="line">* ```</span><br><span class="line">      asm(&quot;movl %eax, %ebx&quot;);</span><br><span class="line">      asm(&quot;xorl %ebx, %edx&quot;);</span><br><span class="line">      asm(&quot;movl $0, _boo);</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç”±äºæˆ‘ä»¬åœ¨<strong>å†…è”æ±‡ç¼–</strong>ä¸­æ”¹å˜äº† edx å’Œ ebx çš„å€¼ï¼Œä½†æ˜¯ç”±äº gcc çš„ç‰¹æ®Šçš„å¤„ç†æ–¹æ³•ï¼Œå³å…ˆå½¢æˆæ±‡ç¼–æ–‡ä»¶ï¼Œå†äº¤ç»™ GAS å»æ±‡ç¼–ï¼Œæ‰€ä»¥ GAS å¹¶ä¸çŸ¥é“æˆ‘ä»¬å·²ç»æ”¹å˜äº† edxå’Œ ebx çš„å€¼ï¼Œå¦‚æœç¨‹åºçš„ä¸Šä¸‹æ–‡éœ€è¦ edx æˆ– ebx ä½œå…¶ä»–å†…å­˜å•å…ƒæˆ–å˜é‡çš„æš‚å­˜ï¼Œå°±ä¼šäº§ç”Ÿæ²¡æœ‰é¢„æ–™çš„å¤šæ¬¡èµ‹å€¼ï¼Œå¼•èµ·ä¸¥é‡çš„åæœã€‚å¯¹äºå˜é‡ _booä¹Ÿå­˜åœ¨ä¸€æ ·çš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ç”¨åˆ°<strong>æ‰©å±• GCC å†…è”æ±‡ç¼–è¯­æ³•</strong>ã€‚</p></blockquote></li></ul><h3 id="3-1-5-GCC-æ‰©å±•å†…è”æ±‡ç¼–"><a href="#3-1-5-GCC-æ‰©å±•å†…è”æ±‡ç¼–" class="headerlink" title="3.1.5 GCC æ‰©å±•å†…è”æ±‡ç¼–"></a>3.1.5 GCC æ‰©å±•å†…è”æ±‡ç¼–</h3><p><a href="https://blog.csdn.net/u014160900/article/details/44900303">å‚è€ƒåšå®¢</a></p><ul><li><blockquote><pre><code>#define read_cr0() (&#123; \ unsigned int __dummy; \ __asm__( \     &quot;movl %%cr0,%0\n\t&quot; \     :&quot;=r&quot; (__dummy)); \  __dummy; \&#125;)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* GCC æ‰©å±•å†…è”æ±‡ç¼–åŸºæœ¬æ ¼å¼</span><br><span class="line"></span><br><span class="line"> * &gt; asm [volatile] (Assembler Template</span><br><span class="line"></span><br><span class="line">    : Output operands</span><br><span class="line"></span><br><span class="line">    [ : Input Operands</span><br><span class="line"></span><br><span class="line">    [ : Clobbers  ] ] )</span><br><span class="line"></span><br><span class="line"> * asm ä»£è¡¨æ±‡ç¼–ä»£ç çš„å¼€å§‹</span><br><span class="line"> * [volatile] : å¯é€‰é¡¹ï¼Œé¿å… asm æŒ‡ä»¤è¢«åˆ é™¤ã€ç§»åŠ¨æˆ–ç»„åˆ</span><br><span class="line"> * æŒ‡ä»¤ `â€œmovl %%cr0,%0\n\tâ€`</span><br><span class="line"> * æ•°å­—å‰ç¼€ï¼š`%1`, è¡¨ç¤ºä½¿ç”¨å¯„å­˜å™¨çš„æ ·æ¿æ“ä½œæ•°</span><br><span class="line"></span><br><span class="line">   * æŒ‡ä»¤ä¸­å‡ ä¸ªæ“ä½œæ•°ï¼Œè¡¨ç¤ºæœ‰å‡ ä¸ªå˜é‡éœ€è¦ä¸å¯„å­˜å™¨ç»“åˆï¼Œç”±gccåœ¨ç¼–è¯‘æ—¶æ ¹æ®åé¢çš„è¾“å‡ºéƒ¨åˆ†å’Œè¾“å…¥éƒ¨åˆ†çš„çº¦æŸæ¡ä»¶è¿›è¡Œç›¸åº”çš„å¤„ç†</span><br><span class="line">   * å¯ä½¿ç”¨çš„æ“ä½œæ•°æ€»æ•°å–å†³äºå…·ä½“CPUä¸­é€šç”¨å¯„å­˜å™¨çš„æ•°é‡</span><br><span class="line">   * `%%cr0`: ä¸¤ä¸ª % ï¼Œè¡¨ç¤ºç”¨åˆ°å…·ä½“çš„å¯„å­˜å™¨</span><br><span class="line"> * Output Operands listï¼šè¾“å‡ºéƒ¨åˆ†ï¼Œç”¨ä»¥è§„å®šå¯¹è¾“å‡ºå˜é‡ï¼ˆç›®æ ‡æ“ä½œæ•°ï¼‰å¦‚ä½•ä¸å¯„å­˜å™¨ç»“åˆçš„çº¦æŸï¼ˆconstraintï¼‰ã€‚è¾“å‡ºéƒ¨åˆ†å¯ä»¥æœ‰å¤šä¸ªçº¦æŸï¼Œä»¥é€—å·åˆ†å¼€</span><br><span class="line"></span><br><span class="line">   * æ¯ä¸ªçº¦æŸè¯­æ³•ï¼š`â€œ=çº¦æŸå­—æ¯â€ å…³äºå˜é‡ç»“åˆçš„çº¦æŸ`</span><br><span class="line">   * `:&quot;=r&quot; (_dummy)`</span><br><span class="line"></span><br><span class="line">     * =r è¡¨ç¤ºç›¸åº”çš„ç›®æ ‡æ“ä½œæ•°ï¼ˆ%0ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œå¹¶ä¸”å˜é‡ _dummy å­˜æ”¾åœ¨è¿™ä¸ªå¯„å­˜å™¨ä¸­</span><br><span class="line">   * `:&quot;=m&quot; (_dummy)`</span><br><span class="line"></span><br><span class="line">     * =m è¡¨ç¤ºç›¸åº”çš„ç›®æ ‡æ“ä½œæ•°æ˜¯å­˜æ”¾åœ¨å†…å­˜å•å…ƒ _dummy ä¸­</span><br><span class="line">   * å‡ ä¸ªä¸»è¦çš„çº¦æŸå­—æ¯</span><br><span class="line"></span><br><span class="line">     | å­—æ¯       | å«ä¹‰                                             |</span><br><span class="line">     | ---------- | ------------------------------------------------ |</span><br><span class="line">     | m, v, o    | å†…å­˜å•å…ƒ                                         |</span><br><span class="line">     | R          | ä»»ä½•é€šç”¨å¯„å­˜å™¨                                   |</span><br><span class="line">     | Q          | å¯„å­˜å™¨eax, ebx, ecx,edxä¹‹ä¸€                      |</span><br><span class="line">     | I, h       | ç›´æ¥æ“ä½œæ•°                                       |</span><br><span class="line">     | E, F       | æµ®ç‚¹æ•°                                           |</span><br><span class="line">     | G          | ä»»æ„                                             |</span><br><span class="line">     | a, b, c, d | å¯„å­˜å™¨eax/ax/al, ebx/bx/bl, ecx/cx/clæˆ–edx/dx/dl |</span><br><span class="line">     | S, D       | å¯„å­˜å™¨esiæˆ–edi                                   |</span><br><span class="line">     | I          | å¸¸æ•°ï¼ˆ0ï½31ï¼‰                                    |</span><br><span class="line"> * ==Input Operand list: è¾“å…¥éƒ¨åˆ†==</span><br><span class="line"></span><br><span class="line">   * ä¸è¾“å‡ºéƒ¨åˆ†ç›¸ä¼¼ï¼Œä½†æ²¡æœ‰ `=`</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line"></span><br><span class="line">### 3.1.6 **Extended Asm**</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https://www.jianshu.com/p/1782e14a0766)</span><br><span class="line"></span><br><span class="line">* å†…è”å‡½æ•°ï¼šåœ¨Cè¯­è¨€ä¸­ï¼ŒæŒ‡å®šç¼–è¯‘å™¨å°†ä¸€ä¸ªå‡½æ•°ä»£ç ç›´æ¥å¤åˆ¶åˆ°è°ƒç”¨å…¶ä»£ç çš„åœ°æ–¹æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line"> * å†…è”å‡½æ•°é™ä½äº†å‡½æ•°çš„è°ƒç”¨å¼€é”€</span><br><span class="line"> * æŒ‡å®šç¼–è¯‘å™¨å°†ä¸€ä¸ªå‡½æ•°å¤„ç†ä¸ºå†…è”å‡½æ•°ï¼Œåªè¦åœ¨å‡½æ•°ç”³æ˜å‰åŠ ä¸Š inline å…³é”®å­—</span><br><span class="line">* å†…è”æ±‡ç¼–ï¼šç”¨æ±‡ç¼–è¯­å¥å†™æˆçš„å†…è”å‡½æ•°</span><br><span class="line"></span><br><span class="line"> * GCCï¼ˆCNU Compiler Collection for Linuxï¼‰ ä¸­å£°æ˜ä¸€ä¸ªå†…è”æ±‡ç¼–å‡½æ•°ï¼Œç”¨ asm å…³é”®å­—</span><br><span class="line"> * æ“ä½œ C è¯­è¨€å˜é‡</span><br><span class="line">* åœ¨æ‰©å±•å½¢å¼ä¸­ï¼Œå¯ä»¥æŒ‡å®šæ“ä½œæ•°ï¼Œé€‰æ‹©è¾“å…¥è¾“å‡ºå¯„å­˜å™¨ï¼ŒæŒ‡æ˜è¦ä¿®æ”¹çš„å¯„å­˜å™¨åˆ—è¡¨</span><br><span class="line">* å½¢å¼ï¼š</span><br><span class="line"></span><br><span class="line"> * ```cpp</span><br><span class="line">   asm ( assembler template</span><br><span class="line">           : output operands                /* optional */</span><br><span class="line">           : input operands                   /* optional */</span><br><span class="line">           : list of clobbered registers   /* optional */</span><br><span class="line">   );</span><br></pre></td></tr></table></figure></code></pre></blockquote><ul><li><p><code>assembler template</code>: æ±‡ç¼–æŒ‡ä»¤éƒ¨åˆ†</p></li><li><p>æ‹¬å·å†…çš„operandsï¼šC è¯­è¨€è¡¨è¾¾å¼ä¸­å¸¸é‡å­—ç¬¦ä¸²ï¼Œä¸åŒéƒ¨åˆ†ä¹‹é—´ç”¨å†’å·åˆ†éš”</p><p>ç›¸åŒéƒ¨åˆ†è¯­å¥ä¸­çš„æ¯ä¸ªå°éƒ¨åˆ†ç”¨é€—å·åˆ†éš”</p><p>æœ€å¤šæŒ‡å®š10ä¸ªæ“ä½œæ•°</p></li></ul></li><li><p>è‹¥æ²¡æœ‰ output operands ,æœ‰input operandsï¼Œéœ€è¦ä¿ç•™output å‰çš„å†’å·</p><ul><li><p>```cpp<br>asm ( â€œcld\n\tâ€</p><pre><code>      &quot;rep\n\t&quot;      &quot;stosl&quot;     : /* no output registers */     : &quot;c&quot; (count), &quot;a&quot; (fill_value), &quot;D&quot; (dest)     : &quot;%ecx&quot;, &quot;%edi&quot;  );</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* ä¾‹å­ï¼šç”¨æ±‡ç¼–ä»£ç æŠŠaçš„å€¼èµ‹ç»™b</span><br><span class="line"></span><br><span class="line">  * ```php</span><br><span class="line">    int a=10, b;</span><br><span class="line">    asm ( &quot;movl %1, %%eax;</span><br><span class="line">               movl %%eax, %0;&quot;</span><br><span class="line">              :&quot;=r&quot;(b)           /* output */</span><br><span class="line">              :&quot;r&quot;(a)              /* input */</span><br><span class="line">              :&quot;%eax&quot;         /* clobbered register */</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><ul><li>b æ˜¯è¾“å‡ºæ“ä½œæ•°ï¼Œç”¨ %0 è®¿é—®</li><li>a æ˜¯è¾“å…¥æ“ä½œæ•°ï¼Œç”¨ %1 è®¿é—®</li><li>r æ˜¯constraintï¼šè®© GCC è‡ªå·±é€‰æ‹©ä¸€ä¸ªå¯„å­˜å™¨å­˜å‚¨å˜é‡a<ul><li>è¾“å‡ºéƒ¨åˆ†constraint å‰éœ€è¦ = ä¿®é¥°</li></ul></li><li>ç”¨ %% å’Œ % åŒºåˆ†æ“ä½œæ•°å’Œå¯„å­˜å™¨<ul><li>æ“ä½œæ•°å·²ç»ç”¨ä¸€ä¸ª%åšå‰ç¼€ï¼Œå¯„å­˜å™¨åªèƒ½ç”¨%%åšå‰ç¼€</li></ul></li><li>clobbered registerï¼šä»£è¡¨å†…è”æ±‡ç¼–ä»£ç ä¼šæ”¹å˜å¯„å­˜å™¨eaxçš„å†…å®¹</li></ul></li></ul></li></ul><h4 id="æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler-templateï¼‰"><a href="#æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler-templateï¼‰" class="headerlink" title="æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler templateï¼‰"></a>æ±‡ç¼–æ¨¡æ¿ï¼ˆassembler templateï¼‰</h4><ul><li>åµŒå…¥åœ¨Cä¸­çš„æ±‡ç¼–æŒ‡ä»¤<ul><li>æ¯æ¡æŒ‡ä»¤æ”¾åœ¨ä¸€ä¸ªåŒå¼•å·å†…ï¼Œæˆ–éƒ½åœ¨ä¸€ä¸ªåŒå¼•å·</li><li>æ¯æ¡æŒ‡ä»¤å <code>\n\t</code></li><li>è®¿é—® <strong>C è¯­è¨€å˜é‡</strong>ç”¨ %0ï¼Œ%1â€¦</li></ul></li></ul><h4 id="æ“ä½œæ•°ï¼ˆOperandsï¼‰"><a href="#æ“ä½œæ•°ï¼ˆOperandsï¼‰" class="headerlink" title="æ“ä½œæ•°ï¼ˆOperandsï¼‰"></a>æ“ä½œæ•°ï¼ˆOperandsï¼‰</h4><ul><li><p>æ ¼å¼ <code>&quot;constraint&quot; (C expr) //&quot;=r&quot;(result)</code></p></li><li><p>asm å†…éƒ¨ä½¿ç”¨<strong>Cè¯­è¨€å­—ç¬¦ä¸²</strong>ä½œä¸ºæ“ä½œæ•°</p></li><li><p>æ“ä½œæ•°éƒ½è¦æ”¾åœ¨åŒå¼•å·å†…</p><ul><li>å¯¹äº output æ“ä½œæ•°è¦ç”¨ =</li></ul></li><li><p>constraint å’Œ ä¿®é¥°éƒ½æ”¾åœ¨åŒå¼•å·å†…</p></li><li><p>constraintï¼šæŒ‡å®šæ“ä½œæ•°çš„å¯»å€ç±»å‹ï¼ˆå†…å­˜å¯»å€æˆ–è€…å¯„å­˜å™¨å¯»å€ï¼‰ï¼Œä¹Ÿç”¨æ¥æŒ‡æ˜ä½¿ç”¨é‚£ä¸ªå¯„å­˜å™¨</p></li><li><p>è‹¥æœ‰å¤šä¸ªæ“ä½œæ•°ï¼Œä½¿ç”¨é€—å·éš”å¼€</p></li><li><p>åœ¨æ±‡ç¼–æ¨¡æ¿éƒ¨åˆ†ï¼ŒæŒ‰é¡ºåºç”¨æ•°å­—å»å¼•ç”¨æ“ä½œæ•°</p></li><li><p>è¾“å‡ºæ“ä½œæ•°è¡¨è¾¾å¼å¿…é¡»æ˜¯å·¦å€¼ï¼Œè¾“å…¥æ“ä½œæ•°ä¸ä¸€å®šæ˜¯</p><ul><li>å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼æˆ–è€…å˜é‡</li></ul></li><li><p>ä¾‹å­ï¼šæŠŠä¸€ä¸ªæ•°å­—ä¹˜ä»¥äº”</p><ul><li>```cpp<br>asm ( â€œleal (%1,%1,4), %0â€<pre><code>    : &quot;=r&quot; (five_times_x)    : &quot;r&quot; (x) );</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  * è¾“å…¥æ“ä½œæ•°æ˜¯ xï¼ŒæœªæŒ‡å®šå…·ä½“ä½¿ç”¨é‚£ä¸ªå¯„å­˜å™¨</span><br><span class="line">* ä¿®æ”¹ constraint éƒ¨åˆ†å†…å®¹ï¼Œä½¿å¾— GCC å›ºå®šä½¿ç”¨åŒä¸€ä¸ªå¯„å­˜å™¨å¤„ç†è¾“å…¥è¾“å‡ºæ“ä½œæ•°,ä½†æœªæŒ‡å®šå…·ä½“å“ªä¸ªå¯„å­˜å™¨</span><br><span class="line"></span><br><span class="line">  * ```cpp</span><br><span class="line">    asm( &quot;lea (%0,%0,4),%0&quot;</span><br><span class="line">            : &quot;=r&quot; (five_times_x)</span><br><span class="line">            : &quot;0&quot; (x)</span><br><span class="line">        );</span><br></pre></td></tr></table></figure></li></ul></li><li><p>éœ€è¦æŒ‡å®šå…·ä½“çš„å¯„å­˜å™¨</p><ul><li>```cpp<br>asm ( â€œleal (%%ecx,%%ecx,4), %%ecxâ€<pre><code>    : &quot;=c&quot; (x)    : &quot;c&quot; (x) </code></pre>);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br></pre></td><td class="code"><pre><span class="line">* ä¸éœ€è¦å¡«å†™ClobberList</span><br><span class="line"></span><br><span class="line">  * æŒ‡å®šGCCè‡ªå·±é€‰æ‹©åˆé€‚çš„å¯„å­˜å™¨</span><br><span class="line">  * å› ä¸º GCC çŸ¥é“xå°†å­˜å…¥ ecx ï¼ŒGCCå®Œå…¨çŸ¥é“ecxçš„å€¼</span><br><span class="line"></span><br><span class="line">#### ç ´ååˆ—è¡¨ Clobber List</span><br><span class="line"></span><br><span class="line">* å¦‚æœæŸä¸ªæŒ‡ä»¤æ”¹å˜äº†æŸä¸ªå¯„å­˜å™¨çš„å€¼ï¼Œå°±å¿…é¡»åœ¨ç¬¬ä¸‰ä¸ªå†’å·åæ ‡è¯†å‡ºè¯¥å¯„å­˜å™¨</span><br><span class="line">* ä¸ºäº†å‘ŠçŸ¥ GCC ï¼Œè®©å…¶ä¸åœ¨å‡å®šä¹‹å‰å¯„å­˜å™¨ä¸­çš„å€¼ä¾ç„¶åˆæ³•</span><br><span class="line">* è¾“å…¥è¾“å‡ºå¯„å­˜å™¨ä¸ç”¨æ”¾å…¥Clobber List</span><br><span class="line">  * GCC èƒ½å¤ŸçŸ¥é“asmå°†ä½¿ç”¨è¿™äº›å¯„å­˜å™¨</span><br><span class="line">  * å·²ç»è¢«æ˜¾ç¤ºåœ°æŒ‡å®šè¾“å…¥è¾“å‡º</span><br><span class="line">  * å…¶ä»–ä½¿ç”¨åˆ°çš„å¯„å­˜å™¨æ— è®ºæ˜¯æ˜¾ç¤ºæˆ–éšå¼éƒ½éœ€è¦æ ‡æ˜</span><br><span class="line">* è‹¥æŒ‡ä»¤ä¸­å·²æ— æ³•æ„æ–™çš„å½¢å¼ä¿®æ”¹äº†å†…å­˜å€¼ï¼Œéœ€è¦åœ¨ Clobber List ä¸­åŠ å…¥ memory</span><br><span class="line">  * ä½¿å¾— GCC ä¸å»ç¼“å­˜è¿™äº›å†…å­˜å€¼</span><br><span class="line">  * Clobber List ä¸­åˆ—å‡ºçš„å¯„å­˜å™¨å¯ä»¥è¢«å¤šæ¬¡å†™è¯»</span><br><span class="line"></span><br><span class="line">#### ç‰¹å¾ä¿®é¥°ç¬¦ Volatile</span><br><span class="line"></span><br><span class="line">* è¦æ±‚æ±‡ç¼–ä»£ç å¿…é¡»åœ¨è¢«æ”¾ç½®çš„ä½ç½®æ‰§è¡Œï¼ˆä¸èƒ½è¢«å¾ªç¯ä¼˜åŒ–æˆ–ç§»é™¤å¾ªç¯ï¼‰</span><br><span class="line">* ç¦æ­¢è¿™äº›ä»£ç è¢«ç§»åŠ¨æˆ–åˆ é™¤</span><br><span class="line">* `asm volatile ();`</span><br><span class="line"></span><br><span class="line">#### çº¦æŸ Constraints</span><br><span class="line"></span><br><span class="line">* å¯„å­˜å™¨æ“ä½œæ•° constraintsï¼š`r`</span><br><span class="line"></span><br><span class="line">  * æ“ä½œæ•°å°†è¢«å­˜å‚¨åœ¨é€šç”¨å¯„å­˜å™¨ä¸­</span><br><span class="line">  * `asm (&quot;movl %%eax, %0&quot;: &quot;=r&quot; (myval));`</span><br><span class="line"></span><br><span class="line">    * å˜é‡ myval å°†è¢«ä¿å­˜åœ¨ GCC è‡ªå·±é€‰æ‹©çš„å¯„å­˜å™¨ä¸­</span><br><span class="line">    * eax ä¸­çš„å€¼è¢«æ‹·è´åˆ°è¿™ä¸ªå¯„å­˜å™¨ä¸­</span><br><span class="line">    * åœ¨å†…å­˜ä¸­çš„ myval å€¼ä¹Ÿä¼šæŒ‰ç…§è¿™ä¸ªå¯„å­˜å™¨å€¼æ›´æ–°</span><br><span class="line">    * r GCC å¯èƒ½ä¼šåœ¨ä»»ä½•ä¸€ä¸ªå¯ç”¨çš„é€šç”¨å¯„å­˜å™¨ä¸­ä¿å­˜è¿™ä¸ªå€¼</span><br><span class="line">  * å…·ä½“æŒ‡å®šä½¿ç”¨é‚£ä¸ªå¯„å­˜å™¨ï¼š</span><br><span class="line">  * | r | Register(s)     |</span><br><span class="line">    | :- | :-------------- |</span><br><span class="line">    | a | %eax, %ax, %al  |</span><br><span class="line">    | b | %ebx, %bx, %bl  |</span><br><span class="line">    | c | %ecx, %cx, %cl  |</span><br><span class="line">    | d | %edx, %dx, %adl |</span><br><span class="line">    | S | %esi, %si       |</span><br><span class="line">    | D | %edi, %di       |</span><br><span class="line">* å†…å­˜æ“ä½œæ•°constraintï¼š`m`</span><br><span class="line"></span><br><span class="line">  * å½“æ“ä½œæ•°åœ¨å†…å­˜ä¸­æ—¶ï¼Œä»»ä½•å¯¹å…¶æ“ä½œä¼šç›´æ¥åœ¨å†…å­˜ä¸­è¿è¡Œ</span><br><span class="line">    * æŒ‡å®šå¯„å­˜å™¨ï¼šå†…å­˜æ“ä½œæ—¶ä¼šæŠŠå€¼å­˜åœ¨ä¸€ä¸ªå¯„å­˜å™¨ä¸­ï¼Œä¿®æ”¹åå†å°†è¯¥å€¼ åä¼šåˆ°è¯¥å†…å­˜ä¸­</span><br><span class="line">* åŒ¹é… constraint</span><br><span class="line"></span><br><span class="line">#### çº¦æŸ Constraints Modifiersä¿®é¥°ç¬¦</span><br><span class="line"></span><br><span class="line">#### å¸¸ç”¨ä»£ç ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">## 3.2 make å’Œ Makefile</span><br><span class="line"></span><br><span class="line">* GNU make æ˜¯ä¸€ç§ä»£ç ç»´æŠ¤å·¥å…·</span><br><span class="line">  * é¡¹ç›®ä¸­ï¼Œæ ¹æ®ç¨‹åºå„ä¸ªæ¨¡å—çš„æ›´æ–°æƒ…å†µï¼Œè‡ªåŠ¨çš„ç»´æŠ¤å’Œç”Ÿæˆç›®æ ‡ä»£ç </span><br><span class="line">* æ‰§è¡Œ make å‘½ä»¤æ—¶ï¼Œéœ€è¦ makefile æ–‡ä»¶ï¼Œä»¥å‘Šè¯‰makeå‘½ä»¤ï¼Œéœ€è¦æ€æ ·å»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åº</span><br><span class="line">* ç¼–è¯‘å’Œé“¾æ¥çš„è§„åˆ™</span><br><span class="line">  * å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚</span><br><span class="line">  * å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªcæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</span><br><span class="line">  * å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</span><br><span class="line">* ç¼–å†™å¥½ makefile åï¼Œåªéœ€è¦ make å‘½ä»¤ï¼Œå°±å¯è‡ªåŠ¨çš„æ ¹æ®å½“å‰çš„æ–‡ä»¶ä¿®æ”¹æƒ…å†µæ¥ç¡®å®šå“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘å¹¶é‡æ–°é“¾æ¥</span><br><span class="line"></span><br><span class="line">### 3.2.1 makefile çš„è§„åˆ™</span><br><span class="line"></span><br><span class="line">* &gt; target ... :prerequisites ...</span><br><span class="line">  &gt;</span><br><span class="line">  &gt;     command</span><br><span class="line">  &gt;</span><br><span class="line">  &gt;     ...</span><br><span class="line">  &gt;</span><br><span class="line">  &gt;     ...</span><br><span class="line">  &gt;</span><br><span class="line"></span><br><span class="line">  * target æ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ : å¯ä»¥æ˜¯ object æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª label</span><br><span class="line">  * prerequisiteï¼šè¦ç”Ÿæˆé‚£ä¸ª target æ‰€éœ€è¦çš„æ–‡ä»¶</span><br><span class="line">  * commandï¼šmake éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä»»æ„çš„ shell å‘½ä»¤ï¼‰</span><br><span class="line">  * æ–‡ä»¶ä¾èµ–å…³ç³»</span><br><span class="line">    * target æ–‡ä»¶ä¾èµ–äº prerequisite ä¸­çš„æ–‡ä»¶</span><br><span class="line">    * ç”Ÿæˆè§„åˆ™ å®šä¹‰åœ¨ command ä¸­</span><br><span class="line">  * å¦‚æœ prerequisites ä¸­æœ‰æ–‡ä»¶æ¯” target æ–‡ä»¶æ–°ï¼Œé‚£ä¹ˆcommandæ‰€å®šä¹‰çš„å‘½ä»¤å°±è¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">##3.3  gdb çš„ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https://wiki.ubuntu.org.cn/%E7%94%A8GDB%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F#.E7.9B.B8.E5.85.B3.E8.AF.8D.E6.9D.A1)</span><br><span class="line"></span><br><span class="line">* è°ƒè¯•å‘½ä»¤ `gcc -g  -Wall åŸæ–‡ä»¶.c -o è¾“å‡ºçš„ç›®æ ‡æ–‡ä»¶`</span><br><span class="line">  * -g : è°ƒè¯• C/C++ ç¨‹åºï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå°±éœ€è¦æŠŠè°ƒè¯•ä¿¡æ¯åŠ åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­</span><br><span class="line">  * æ²¡æœ‰ -g çš„è¯ï¼Œçœ‹ä¸è§ç¨‹åºå‡½æ•°åã€å˜é‡åï¼Œè€Œæ˜¯è¿è¡Œæ—¶çš„å†…å­˜ä»£ç </span><br><span class="line">* å¯åŠ¨ gdb ï¼šè¿›å…¥ gdb ç¯å¢ƒå’ŒåŠ è½½è¢«è°ƒè¯•ç¨‹åºåŒæ—¶è¿›è¡Œï¼š</span><br><span class="line">  * `gdb å¯æ‰§è¡Œæ–‡ä»¶å`</span><br><span class="line">  * `gdb å¯æ‰§è¡Œæ–‡ä»¶å core`</span><br><span class="line">    * ç”¨gdb åŒæ—¶è°ƒè¯•ä¸€ä¸ªè¿è¡Œç¨‹åºå’Œcoreæ–‡ä»¶ï¼ˆç¨‹åºéæ³•æ‰§è¡Œå core dump åäº§ç”Ÿçš„æ–‡ä»¶ï¼‰</span><br><span class="line">  * `gdb å¯æ‰§è¡Œæ–‡ä»¶å &lt;PID&gt;`</span><br><span class="line">    * è‹¥ç¨‹åºæ˜¯ä¸€ä¸ªæœåŠ¡ç¨‹åºï¼Œå¯ä»¥æŒ‡å®šæœåŠ¡ç¨‹åºè¿è¡Œæ—¶çš„è¿›ç¨‹ ID</span><br><span class="line">* gdb å¯åŠ¨å¼€å…³</span><br><span class="line">* `help`:æŸ¥çœ‹å‘½ä»¤ç§ç±»</span><br><span class="line">  * `help å‘½ä»¤`ï¼šæŸ¥çœ‹ç§ç±»ä¸­çš„å‘½ä»¤</span><br><span class="line">* è°ƒè¯•å·²è¿è¡Œçš„ç¨‹åº</span><br><span class="line">  * 1. `ps` æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ç¨‹åº IDï¼Œ`gdb &lt;program&gt; PID` æ ¼å¼æŒ‚æ¥æ­£åœ¨è¿è¡Œçš„ç¨‹åº</span><br><span class="line">    2. `gdb &lt;program&gt;` å…³è”ä¸Šæºä»£ç ï¼Œå¹¶è¿›è¡Œgdbï¼Œåœ¨ gdb ç¯å¢ƒä¸­ ç”¨ `attach` å‘½ä»¤æ¥æŒ‚æ¥è¿›ç¨‹ PID ï¼Œç”¨ `detach` å–æ¶ˆæŒ‚æ¥</span><br><span class="line">* æš‚åœ/æ¢å¤ç¨‹åºè¿è¡Œ</span><br><span class="line">  * å¯ä»¥è®¾ç½®ç¨‹åºåœ¨å“ªè¡Œåœï¼Œåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹åœï¼Œåœ¨å—åˆ°ä»€ä¹ˆä¿¡å·æ—¶åœ</span><br><span class="line">  * `info program` æŸ¥çœ‹ç¨‹åºæ˜¯å¦åœ¨è¿è¡Œï¼Œè¿›ç¨‹å·ï¼Œè¢«æš‚åœåŸå› </span><br><span class="line">  * æš‚åœæ–¹å¼ï¼š</span><br><span class="line">    * BreakPoint: æ–­ç‚¹</span><br><span class="line">    * WatchPoint: è§‚å¯Ÿç‚¹</span><br><span class="line">    * CatchPointï¼šæ•æ‰ç‚¹</span><br><span class="line">    * Signalsï¼šä¿¡å·</span><br><span class="line">    * ThreadStopsï¼šçº¿ç¨‹åœæ­¢</span><br><span class="line">  * æ¢å¤ç¨‹åºè¿è¡Œï¼š`c` / `continue`</span><br><span class="line"></span><br><span class="line">### è®¾ç½®æ–­ç‚¹ï¼ˆBreak Pointsï¼‰</span><br><span class="line"></span><br><span class="line">* `break &lt;function&gt;`: åœ¨è¿›å…¥æŒ‡å®šå‡½æ•°æ—¶åœä½</span><br><span class="line">* `break &lt;linenum&gt;`: åœ¨æŒ‡å®šè¡Œå·åœä½</span><br><span class="line">* `break +offset`: åœ¨å½“å‰è¡Œå·å‰é¢çš„ offset è¡Œåœä½</span><br><span class="line">* `break -offset`: åœ¨å½“å‰è¡Œå·åé¢ offset è¡ŒæŒºä½</span><br><span class="line">* `break filename: linenum`: åœ¨æºæ–‡ä»¶ filename çš„ linenum è¡Œåœä½</span><br><span class="line">* `break filename: function`: åœ¨æºæ–‡ä»¶filenameçš„functionå…¥å£å¤„åŒä½</span><br><span class="line">* `break *address`: åœ¨ç¨‹åºè¿è¡Œçš„å†…å­˜åœ°å€å¤„åœä½</span><br><span class="line">* `break`: æ²¡æœ‰å‚æ•°æ—¶ï¼Œè¡¨ç¤ºåœ¨ä¸‹ä¸€æ¡æŒ‡ä»¤å¤„åœä½</span><br><span class="line">* `break ... if &lt;conditon&gt;`: åœ¨æ¡ä»¶æˆç«‹æ—¶åœä½</span><br><span class="line">  * `...` æ˜¯ä¸Šè¿°å‚æ•°ï¼Œconditon è¡¨ç¤ºæ¡ä»¶</span><br><span class="line">* æŸ¥çœ‹æ–­ç‚¹ï¼šn ä¸ºæ–­ç‚¹å·</span><br><span class="line">  * `info breakpoints [n]`</span><br><span class="line">  * `info break [n]`</span><br><span class="line"></span><br><span class="line">### è®¾ç½®è§‚å¯Ÿç‚¹ï¼ˆWatch Pointsï¼‰</span><br><span class="line"></span><br><span class="line">è§‚å¯Ÿç‚¹ä¸€èˆ¬æ¥è§‚å¯ŸæŸä¸ªè¡¨è¾¾å¼ï¼ˆæˆ–å˜é‡ï¼‰çš„å€¼æ˜¯å¦å˜åŒ–ï¼Œè‹¥å˜åŒ–åˆ™åœä½</span><br><span class="line"></span><br><span class="line">* `watch &lt;expr&gt;`:  ä¸ºè¡¨è¾¾å¼ expr è®¾ç½®è§‚å¯Ÿç‚¹</span><br><span class="line">* `rwatch &lt;expr&gt;`: å½“è¡¨è¾¾å¼ expr è¢«è¯»æ—¶ï¼Œåœä½</span><br><span class="line">* `awatch &lt;expr&gt;`: å½“è¡¨è¾¾å¼çš„å€¼è¢«è¯»æˆ–å†™æ—¶ï¼Œåœä½</span><br><span class="line">* `info watchpoints`: åˆ—å‡ºæ‰€æœ‰è§‚å¯Ÿç‚¹</span><br><span class="line"></span><br><span class="line">### è®¾ç½®æ•æ‰ç‚¹ï¼ˆCatch Pointsï¼‰</span><br><span class="line"></span><br><span class="line">è®¾ç½®æ•æ‰ç‚¹æ¥æ•æ‰ç¨‹åºè¿è¡Œæ—¶çš„ä¸€äº›äº‹ä»¶</span><br><span class="line"></span><br><span class="line">* `catch &lt;event&gt;`: å½“eventå‘ç”Ÿæ—¶ï¼Œåœä½</span><br><span class="line">  * throw ä¸€ä¸ªC++ æŠ›å‡ºçš„å¼‚å¸¸</span><br><span class="line">  * catch ä¸€ä¸ªC++æ•æ‰åˆ°çš„å¼‚å¸¸</span><br><span class="line">  * exec è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ exec æ—¶</span><br><span class="line">  * fork è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ fork æ—¶</span><br><span class="line">  * vfork è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ vfork æ—¶</span><br><span class="line">  * load</span><br><span class="line">  * unload</span><br><span class="line">* `tcatch &lt;event&gt;`: å€¼è®¾ç½®ä¸€æ¬¡æ•æ‰ç‚¹ï¼Œå½“ç¨‹åºåœä½åï¼Œè¯¥åº—è¢«è‡ªåŠ¨åˆ é™¤</span><br><span class="line"></span><br><span class="line">### ç»´æŠ¤åœæ­¢ç‚¹</span><br><span class="line"></span><br><span class="line">åœæ­¢ç‚¹å³ä¸Šè¿°ä¸‰ç±»</span><br><span class="line"></span><br><span class="line">* clear</span><br><span class="line">  * `clear` : æ¸…é™¤æ‰€æœ‰å·²å®šä¹‰çš„åœæ­¢ç‚¹</span><br><span class="line">  * `clear &lt;function&gt;` / `clear &lt;filename: function&gt;`: æ¸…é™¤æ‰€æœ‰è®¾ç½®åœ¨å‡½æ•°ä¸Šçš„åœæ­¢ç‚¹</span><br><span class="line">  * `clear &lt;linenum&gt;` /  `clear &lt;filename: linenum&gt;`: æ¸…é™¤æ‰€æœ‰è®¾ç½®åœ¨æŒ‡å®šè¡Œä¸Šçš„åœæ­¢ç‚¹</span><br><span class="line">* delete</span><br><span class="line">  * `delete [breakpoints] [range...]`: åˆ é™¤æŒ‡å®šçš„æ–­ç‚¹ï¼Œæ–­ç‚¹å·ï¼Œè‹¥ä¸æŒ‡å®šæ–­ç‚¹å·åˆ™åˆ é™¤æ‰€æœ‰æ–­ç‚¹ã€‚range è¡¨ç¤ºæ–­ç‚¹å·èŒƒå›´</span><br><span class="line">* disableï¼šgdb ä¸ä¼šåˆ é™¤ï¼Œenable å¯ä»¥æ¢å¤</span><br><span class="line">  * `disable [breakpoints] [range]`:</span><br><span class="line">  * `enable [breakpoints] [range]`</span><br><span class="line">  * `enable [breakpoints] once range...`</span><br><span class="line">  * `enable [breakpoints] delete range ...`</span><br><span class="line"></span><br><span class="line">### åœæ­¢æ¡ä»¶ç»´æŠ¤</span><br><span class="line"></span><br><span class="line">æ–­ç‚¹æ¡ä»¶è®¾ç½®å¥½åï¼Œç”¨ conditon å‘½ä»¤ä¿®æ”¹æ¡ä»¶ï¼ˆä»…breakå’Œwatchæ”¯æŒifï¼‰</span><br><span class="line"></span><br><span class="line">* `condition &lt;bnum&gt; &lt;expr&gt;`: ä¿®æ”¹æ–­ç‚¹å·ä¸º bnum çš„åœæ­¢æ¡ä»¶ä¸º expr</span><br><span class="line">* `condition &lt;bnum&gt;` : æ¸…é™¤æ–­ç‚¹å·ä¸º bnum çš„åœæ­¢æ¡ä»¶</span><br><span class="line"></span><br><span class="line">### ä¸ºåœæ­¢ç‚¹è®¾å®šè¿è¡Œå‘½ä»¤</span><br><span class="line"></span><br><span class="line">### æ–­ç”µèœå•</span><br><span class="line"></span><br><span class="line">### æ¢å¤ç¨‹åºè¿è¡Œå’Œå•æ­¥è°ƒè¯•</span><br><span class="line"></span><br><span class="line">å½“ç¨‹åºè¢«åœä½ï¼Œå¯ä»¥ç”¨ continue å‘½ä»¤æ¢å¤ç¨‹åºè¿è¡Œç›´åˆ°ç»“æŸï¼Œæˆ–ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œ</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥ä½¿ç”¨ step æˆ– next å‘½ä»¤å•æ­¥è·Ÿè¸ªç¨‹åº</span><br><span class="line"></span><br><span class="line">* `continue [ignore-count]` / c / fg</span><br><span class="line">  * æ¢å¤ç¨‹åºè¿è¡Œè‡³ç»“æŸæˆ–è€…ä¸‹ä¸€ä¸ªæ–­ç‚¹</span><br><span class="line">  * æˆ–è€…è®¾ç½®å¿½ç•¥çš„æ¬¡æ•°</span><br><span class="line">* `step &lt;count&gt;`</span><br><span class="line">  * å•æ­¥è·Ÿè¸ªï¼Œè‹¥æœ‰å‡½æ•°è°ƒç”¨ä¼šè¿›å…¥å‡½æ•°</span><br><span class="line">* `next &lt;count&gt;`</span><br><span class="line">  * å•æ­¥è·Ÿè¸ªï¼Œè‹¥æœ‰å‡½æ•°è°ƒç”¨ï¼Œä¸ä¼šè¿›å…¥å‡½æ•°</span><br><span class="line">* `set step-mod`</span><br><span class="line">* `set step-mod on`</span><br><span class="line">* `set step-mod off`</span><br><span class="line">* `finish`</span><br><span class="line">* `until / u`</span><br><span class="line">  * é€€å‡ºå¾ªç¯ä½“</span><br><span class="line">* `stepi`</span><br><span class="line">* `nexti`</span><br><span class="line"></span><br><span class="line">### ä¿¡å·ï¼ˆSignalsï¼‰</span><br><span class="line"></span><br><span class="line">### çº¿ç¨‹ï¼ˆThread Stopsï¼‰</span><br><span class="line"></span><br><span class="line">* åŠŸèƒ½å¼ºå¤§çš„è°ƒè¯•ç¨‹åº</span><br><span class="line"></span><br><span class="line">  * è®¾ç½®æ–­ç‚¹</span><br><span class="line">  * ç›‘è§†ç¨‹åºå˜é‡çš„å€¼</span><br><span class="line">  * ç¨‹åºçš„å•æ­¥æ‰§è¡Œ</span><br><span class="line">  * æ˜¾ç¤º/ä¿®æ”¹å˜é‡çš„å€¼</span><br><span class="line">  * æ˜¾ç¤º/ä¿®æ”¹å¯„å­˜å™¨</span><br><span class="line">  * æŸ¥çœ‹ç¨‹åºçš„å †æ ˆæƒ…å†µ</span><br><span class="line">  * è¿œç¨‹è°ƒè¯•</span><br><span class="line">  * è°ƒè¯•çº¿ç¨‹</span><br><span class="line">* å¿…é¡»å…ˆç”¨ -g æˆ– -ggdb ç¼–è¯‘é€‰é¡¹ç¼–è¯‘æºæ–‡ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨ gdb è°ƒè¯•ç¨‹åº</span><br><span class="line"></span><br><span class="line">  * è¿è¡Œ gdb è°ƒè¯•ç¨‹åºå‘½ä»¤ï¼š`gdb progname`</span><br><span class="line">* åœ¨ gdb æç¤ºç¬¦å¤„é”®å…¥ help ï¼Œ</span><br><span class="line"></span><br><span class="line">  * aliasesï¼šå‘½ä»¤åˆ«å</span><br><span class="line">  * breakpointsï¼šæ–­ç‚¹å®šä¹‰</span><br><span class="line">  * dataï¼šæ•°æ®æŸ¥çœ‹</span><br><span class="line">  * filesï¼šæŒ‡å®šå¹¶æŸ¥çœ‹æ–‡ä»¶</span><br><span class="line">  * internalsï¼šç»´æŠ¤å‘½ä»¤</span><br><span class="line">  * runningï¼šç¨‹åºæ‰§è¡Œ</span><br><span class="line">  * stackï¼šè°ƒç”¨æ ˆæŸ¥çœ‹</span><br><span class="line">  * statusï¼šçŠ¶æ€æŸ¥çœ‹</span><br><span class="line">  * tracepoints: è·Ÿè¸ªç¨‹åºæ‰§è¡Œ</span><br><span class="line">* `help å‘½ä»¤`ï¼šè¯¥å‘½ä»¤çš„è¯¦ç»†</span><br><span class="line">* gdb å¸¸ç”¨å‘½ä»¤</span><br><span class="line"></span><br><span class="line">  * | break FILENAME:NUM | åœ¨ç‰¹å®šæºæ–‡ä»¶ç‰¹å®šè¡Œä¸Šè®¾ç½®æ–­ç‚¹                            |</span><br><span class="line">    | ------------------ | ------------------------------------------------------- |</span><br><span class="line">    | clear FILENAME:NUM | åˆ é™¤è®¾ç½®åœ¨ç‰¹å®šæºæ–‡ä»¶ç‰¹å®šè¡Œä¸Šçš„æ–­ç‚¹                      |</span><br><span class="line">    | run                | è¿è¡Œè°ƒè¯•ç¨‹åº                                            |</span><br><span class="line">    | step               | å•æ­¥æ‰§è¡Œè°ƒè¯•ç¨‹åºï¼Œä¸ä¼šç›´æ¥æ‰§è¡Œå‡½æ•°                      |</span><br><span class="line">    | next               | å•æ­¥æ‰§è¡Œè°ƒè¯•ç¨‹åºï¼Œä¼šç›´æ¥æ‰§è¡Œå‡½æ•°                        |</span><br><span class="line">    | backtrace          | æ˜¾ç¤ºæ‰€æœ‰çš„è°ƒç”¨æ ˆå¸§ã€‚è¯¥å‘½ä»¤å¯ç”¨æ¥æ˜¾ç¤ºå‡½æ•°çš„è°ƒç”¨é¡ºåº      |</span><br><span class="line">    | where continue     | ç»§ç»­æ‰§è¡Œæ­£åœ¨è°ƒè¯•çš„ç¨‹åº                                  |</span><br><span class="line">    | display EXPR       | æ¯æ¬¡ç¨‹åºåœæ­¢åæ˜¾ç¤ºè¡¨è¾¾å¼çš„å€¼,è¡¨è¾¾å¼ç”±ç¨‹åºå®šä¹‰çš„å˜é‡ç»„æˆ |</span><br><span class="line">    | file FILENAME      | è£…è½½æŒ‡å®šçš„å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œè°ƒè¯•                            |</span><br><span class="line">    | help CMDNAME       | æ˜¾ç¤ºæŒ‡å®šè°ƒè¯•å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯                              |</span><br><span class="line">    | info break         | æ˜¾ç¤ºå½“å‰æ–­ç‚¹åˆ—è¡¨ï¼ŒåŒ…æ‹¬åˆ°è¾¾æ–­ç‚¹å¤„çš„æ¬¡æ•°ç­‰                |</span><br><span class="line">    | info files         | æ˜¾ç¤ºè¢«è°ƒè¯•æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯                                |</span><br><span class="line">    | info func          | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æ‰€æœ‰å‡½æ•°åç§°                            |</span><br><span class="line">    | info prog          | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€                                |</span><br><span class="line">    | info local         | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºå½“å‰å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ä¿¡æ¯                  |</span><br><span class="line">    | info var           | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æ‰€æœ‰å…¨å±€å’Œé™æ€å˜é‡åç§°                  |</span><br><span class="line">    | kill               | ç»ˆæ­¢æ­£åœ¨è¢«è°ƒè¯•çš„ç¨‹åº                                    |</span><br><span class="line">    | list               | æ˜¾ç¤ºè¢«è°ƒè¯•ç¨‹åºçš„æºä»£ç                                   |</span><br><span class="line">    | quit               | é€€å‡º gdb                                                |</span><br><span class="line"></span><br><span class="line">## Eclipse + CDT ä¸‹è½½å®‰è£…</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https://blog.csdn.net/qq_42824983/article/details/114671702)</span><br><span class="line"></span><br><span class="line">* JDK: æ˜¯ Java è¯­è¨€çš„è½¯ä»¶å¼€å‘åŒ…ï¼ŒåŒ…å«äº† Java çš„è¿è¡Œç¯å¢ƒ</span><br><span class="line">* Eclipse ï¼šè¿è¡Œä¾èµ–äº JDK</span><br><span class="line">* CDTï¼šC/C++ Developing Tools</span><br><span class="line">* </span><br><span class="line"></span><br><span class="line"># 4 åŸºäºç¡¬ä»¶æ¨¡æ‹Ÿå™¨å®ç°æºç çº§è°ƒè¯•</span><br><span class="line"></span><br><span class="line">## 4.1 å®‰è£…ç¡¬ä»¶æ¨¡æ‹Ÿå™¨ QEMU</span><br><span class="line"></span><br><span class="line">* ç”¨äºæ¨¡æ‹Ÿä¸€å° X86 è®¡ç®—æœºï¼Œè®© uCore è¿è¡Œåœ¨ QEMU ä¸Š</span><br><span class="line">* ç›´æ¥ä½¿ç”¨ Ubuntu ä¸­æä¾›çš„ QEMU</span><br><span class="line">  * `sudo apt-gett install qemu-system`</span><br><span class="line"></span><br><span class="line">## 4.2 Linux ç¯å¢ƒä¸‹çš„æºç çº§å®‰è£… QEMU</span><br><span class="line"></span><br><span class="line">[å‚è€ƒåšå®¢](https://blog.csdn.net/wxh0000mm/article/details/90056912?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-4&amp;spm=1001.2101.3001.4242)</span><br><span class="line"></span><br><span class="line">* å®‰è£…æ—¶é‡åˆ°çš„é—®é¢˜ï¼š</span><br><span class="line">  * analysis: æœªå®‰è£…åˆ°é»˜è®¤è·¯å¾„</span><br><span class="line">  * problem;è¾“å…¥ `qemu` æ— ååº”</span><br><span class="line">  * solutionï¼š[å‚è€ƒåšå®¢](https://blog.csdn.net/u013045749/article/details/53575639)</span><br><span class="line">  * è‹¥è¾“å…¥ `qemu-system-x86_64è¯´æ˜å®‰è£…æˆåŠŸï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œé“¾æ¥ï¼š`sudo ln -s /usr/bin/qumu-system-x86_64 /usr/bin/qemu`</span><br><span class="line"></span><br><span class="line">## 4.3 ä½¿ç”¨ QEMU</span><br><span class="line"></span><br><span class="line">### 4.3.1 è¿è¡Œå‚æ•°</span><br><span class="line"></span><br><span class="line">* é»˜è®¤å®‰è£…è·¯å¾„ï¼š`/usr/local/bin`</span><br><span class="line">* è¿è¡Œå‘½ä»¤ï¼š`qemu`</span><br><span class="line">* qemu è¿è¡Œå¤šå‚æ•°æ ¼å¼ `qemu [options] [disk_image]`</span><br><span class="line"></span><br><span class="line">  * disk_imageï¼šç¡¬ç›˜é•œåƒæ–‡ä»¶</span><br><span class="line">* éƒ¨åˆ†å‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    `-hda file&#x27;        `-hdb file&#x27; `-hdc file&#x27; `-hdd file&#x27;</span><br><span class="line">     ä½¿ç”¨ file  ä½œä¸ºç¡¬ç›˜0ã€1ã€2ã€3é•œåƒã€‚</span><br><span class="line">    `-fda file&#x27;  `-fdb file&#x27;</span><br><span class="line">     ä½¿ç”¨ file  ä½œä¸ºè½¯ç›˜é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ /dev/fd0 ä½œä¸º file æ¥ä½¿ç”¨ä¸»æœºè½¯ç›˜ã€‚</span><br><span class="line">    `-cdrom file&#x27;</span><br><span class="line">     ä½¿ç”¨ file  ä½œä¸ºå…‰ç›˜é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ /dev/cdrom ä½œä¸º file æ¥ä½¿ç”¨ä¸»æœº cd-romã€‚</span><br><span class="line">    `-boot [a|c|d]&#x27;</span><br><span class="line">     ä»è½¯ç›˜(a)ã€å…‰ç›˜(c)ã€ç¡¬ç›˜å¯åŠ¨(d)ï¼Œé»˜è®¤ç¡¬ç›˜å¯åŠ¨ã€‚</span><br><span class="line">    `-snapshot&#x27;</span><br><span class="line">     å†™å…¥ä¸´æ—¶æ–‡ä»¶è€Œä¸å†™å›ç£ç›˜é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ C-a s æ¥å¼ºåˆ¶å†™å›ã€‚</span><br><span class="line">    `-m megs&#x27;</span><br><span class="line">     è®¾ç½®è™šæ‹Ÿå†…å­˜ä¸º msg Må­—èŠ‚ï¼Œé»˜è®¤ä¸º 128M å­—èŠ‚ã€‚</span><br><span class="line">    `-smp n&#x27;</span><br><span class="line">     è®¾ç½®ä¸ºæœ‰ n ä¸ª CPU çš„ SMP ç³»ç»Ÿã€‚ä»¥ PC ä¸ºç›®æ ‡æœºï¼Œæœ€å¤šæ”¯æŒ 255 ä¸ª CPUã€‚</span><br><span class="line">    `-nographic&#x27;</span><br><span class="line">     ç¦æ­¢ä½¿ç”¨å›¾å½¢è¾“å‡ºã€‚</span><br><span class="line">    å…¶ä»–ï¼š</span><br><span class="line">     å¯ç”¨çš„ä¸»æœºè®¾å¤‡ dev ä¾‹å¦‚ï¼š</span><br><span class="line">         vc</span><br><span class="line">             è™šæ‹Ÿç»ˆç«¯ã€‚</span><br><span class="line">         null</span><br><span class="line">             ç©ºè®¾å¤‡</span><br><span class="line">         /dev/XXX</span><br><span class="line">             ä½¿ç”¨ä¸»æœºçš„ ttyã€‚</span><br><span class="line">         file: filename</span><br><span class="line">             å°†è¾“å‡ºå†™å…¥åˆ°æ–‡ä»¶ filename ä¸­ã€‚</span><br><span class="line">         stdio</span><br><span class="line">             æ ‡å‡†è¾“å…¥/è¾“å‡ºã€‚</span><br><span class="line">         pipeï¼špipename</span><br><span class="line">             å‘½ä»¤ç®¡é“ pipenameã€‚</span><br><span class="line">         ç­‰ã€‚</span><br><span class="line">     ä½¿ç”¨ dev è®¾å¤‡çš„å‘½ä»¤å¦‚ï¼š</span><br><span class="line">         `-serial dev&#x27;</span><br><span class="line">             é‡å®šå‘è™šæ‹Ÿä¸²å£åˆ°ä¸»æœºè®¾å¤‡ dev ä¸­ã€‚</span><br><span class="line">         `-parallel dev&#x27;</span><br><span class="line">             é‡å®šå‘è™šæ‹Ÿå¹¶å£åˆ°ä¸»æœºè®¾å¤‡ dev ä¸­ã€‚</span><br><span class="line">         `-monitor dev&#x27;</span><br><span class="line">             é‡å®šå‘ monitor åˆ°ä¸»æœºè®¾å¤‡ dev ä¸­ã€‚</span><br><span class="line">     å…¶ä»–å‚æ•°ï¼š</span><br><span class="line">         `-s&#x27;</span><br><span class="line">             ç­‰å¾… gdb è¿æ¥åˆ°ç«¯å£ 1234ã€‚</span><br><span class="line">         `-p port&#x27;</span><br><span class="line">             æ”¹å˜ gdb è¿æ¥ç«¯å£åˆ° portã€‚</span><br><span class="line">         `-S&#x27;</span><br><span class="line">             åœ¨å¯åŠ¨æ—¶ä¸å¯åŠ¨ CPUï¼Œ éœ€è¦åœ¨ monitor ä¸­è¾“å…¥ &#x27;c&#x27;ï¼Œæ‰èƒ½è®©qemuç»§ç»­æ¨¡æ‹Ÿå·¥ä½œã€‚</span><br><span class="line">         `-d&#x27;</span><br><span class="line">             è¾“å‡ºæ—¥å¿—åˆ° qemu.log æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å°†ç”¨åˆ°çš„å‘½ä»¤ï¼š</p><ul><li><code>qemu -hda ucore.img -parallel stdip</code>: ä½¿å¾—ucoreåœ¨qemuæ¨¡æ‹Ÿçš„ x86 ç¡¬ä»¶ç¯å¢ƒä¸­æ‰§è¡Œ</li><li><code>qemu -S -s -hda ucore.img -monitor stdio</code>: ç”¨äºä¸ gdb é…åˆè¿›è¡Œæºç è°ƒè¯•</li></ul></li></ul><h4 id="å¸¸ç”¨è°ƒè¯•å‘½ä»¤"><a href="#å¸¸ç”¨è°ƒè¯•å‘½ä»¤" class="headerlink" title="å¸¸ç”¨è°ƒè¯•å‘½ä»¤"></a>å¸¸ç”¨è°ƒè¯•å‘½ä»¤</h4><ul><li><p>qemu ä¸­ monitor çš„å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><table><thead><tr><th>help</th><th>æŸ¥çœ‹ qemu å¸®åŠ©ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ”¯æŒçš„å‘½ä»¤ã€‚</th></tr></thead><tbody><tr><td>q|quit|exit</td><td>é€€å‡º qemuã€‚</td></tr><tr><td>stop</td><td>åœæ­¢ qemuã€‚</td></tr><tr><td>c|cont|continue</td><td>è¿ç»­æ‰§è¡Œã€‚</td></tr><tr><td>x /fmt addr xp /fmt addr</td><td>æ˜¾ç¤ºå†…å­˜å†…å®¹ï¼Œå…¶ä¸­ â€˜xâ€™ ä¸ºè™šåœ°å€ï¼Œâ€™xpâ€™ ä¸ºå®åœ°å€ã€‚ å‚æ•° /fmt i è¡¨ç¤ºåæ±‡ç¼–ï¼Œç¼ºçœå‚æ•°ä¸ºå‰ä¸€æ¬¡å‚æ•°ã€‚</td></tr><tr><td>p|printâ€™</td><td>è®¡ç®—è¡¨è¾¾å¼å€¼å¹¶æ˜¾ç¤ºï¼Œä¾‹å¦‚ $reg è¡¨ç¤ºå¯„å­˜å™¨ç»“æœã€‚</td></tr><tr><td>memsave addr size file pmemsave addr size file</td><td>å°†å†…å­˜ä¿å­˜åˆ°æ–‡ä»¶ï¼Œmemsave ä¸ºè™šåœ°å€ï¼Œpmemsave ä¸ºå®åœ°å€ã€‚</td></tr><tr><td>breakpoint ç›¸å…³ï¼š</td><td>è®¾ç½®ã€æŸ¥çœ‹ä»¥åŠåˆ é™¤ breakpointï¼Œpcæ‰§è¡Œåˆ° breakpointï¼Œqemu åœæ­¢ã€‚ï¼ˆæš‚æ—¶æ²¡æœ‰æ­¤åŠŸèƒ½ï¼‰</td></tr><tr><td>watchpoint ç›¸å…³ï¼š</td><td>è®¾ç½®ã€æŸ¥çœ‹ä»¥åŠåˆ é™¤ watchpoint, å½“ watchpoint åœ°å€å†…å®¹è¢«ä¿®æ”¹ï¼Œåœæ­¢ã€‚ï¼ˆæš‚æ—¶æ²¡æœ‰æ­¤åŠŸèƒ½ï¼‰</td></tr><tr><td>s|step</td><td>å•æ­¥ä¸€æ¡æŒ‡ä»¤ï¼Œèƒ½å¤Ÿè·³è¿‡æ–­ç‚¹æ‰§è¡Œã€‚</td></tr><tr><td>r|registers</td><td>æ˜¾ç¤ºå…¨éƒ¨å¯„å­˜å™¨å†…å®¹ã€‚</td></tr><tr><td>info ç›¸å…³æ“ä½œ</td><td>æŸ¥è¯¢ qemu æ”¯æŒçš„å…³äºç³»ç»ŸçŠ¶æ€ä¿¡æ¯çš„æ“ä½œã€‚</td></tr></tbody></table></li></ul></li><li><p><code>single arg</code>: argä¸ºå‚æ•°ï¼Œè®¾ç½®å•æ­¥æ ‡å¿—å‘½ä»¤</p><ul><li><code>single on</code>: å…è®¸å•æ­¥<ul><li>åœ¨æ­¤æƒ…å†µä¸‹ä½¿ç”¨ <code>cont</code> è¿›è¡Œå•æ­¥æ“ä½œ</li></ul></li><li><code>single off</code>: ç¦æ­¢å•æ­¥</li></ul></li></ul><h2 id="4-4-ç»“åˆ-gdb-å’Œ-qemu-æºç çº§è°ƒè¯•-uCore"><a href="#4-4-ç»“åˆ-gdb-å’Œ-qemu-æºç çº§è°ƒè¯•-uCore" class="headerlink" title="4.4 ç»“åˆ gdb å’Œ qemu æºç çº§è°ƒè¯• uCore"></a>4.4 ç»“åˆ gdb å’Œ qemu æºç çº§è°ƒè¯• uCore</h2><h3 id="ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶"><a href="#ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶" class="headerlink" title="ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶"></a>ç¼–è¯‘å¯è°ƒå¼çš„ç›®æ ‡æ–‡ä»¶</h3><ul><li>éœ€è¦åœ¨ä½¿ç”¨ gcc ç¼–è¯‘æºæ–‡ä»¶æ—¶ï¼Œæ·»åŠ å‚æ•° -g</li><li>è¿™æ ·ç¼–è¯‘å‡ºæ¥çš„ç›®æ ‡æ–‡ä»¶ä¸­æ‰ä¼šåŒ…å«å¯ä»¥ç”¨äº gdb è°ƒè¯•çš„ç›¸å…³ç¬¦å·ä¿¡æ¯</li></ul><h3 id="ucore-ä»£ç ç¼–è¯‘"><a href="#ucore-ä»£ç ç¼–è¯‘" class="headerlink" title="ucore ä»£ç ç¼–è¯‘"></a>ucore ä»£ç ç¼–è¯‘</h3><ul><li>ç¼–è¯‘è¿‡ç¨‹ï¼šè§£å‹ç¼©åçš„ ucore æºç åŒ…ä¸­ä½¿ç”¨ make å‘½ä»¤<ul><li>å°†ç”Ÿæˆä¸€äº›åˆ—ç›®æ ‡æ–‡ä»¶</li><li>ä¾‹å¦‚ lab1ï¼š<code>[]:~/lab1$ make</code><ul><li>ucore.img: è¢«qemuè®¿é—®è¿‡çš„è™šæ‹Ÿç¡¬ç›˜æ–‡ä»¶</li><li>kernel: ELF æ ¼å¼çš„ toy ucore kernel æ‰§è¡Œæ–‡ä»¶ï¼Œè¢«åµŒå…¥åˆ°äº† ucore.img ä¸­</li><li>bootblockï¼šè™šæ‹Ÿçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºï¼ˆ512å­—èŠ‚ï¼‰ï¼ŒåŒ…å«äº† bootloader æ‰§è¡Œä»£ç ï¼Œè¢«åµŒå…¥åˆ°äº† ucore.img ä¸­</li><li>signï¼šå¤–éƒ¨æ‰§è¡Œç¨‹åºï¼Œç”¨æ¥ç”Ÿæˆè™šæ‹Ÿçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº</li></ul></li></ul></li><li>ä¿å­˜ä¿®æ”¹:<ul><li>ä½¿ç”¨ diff å‘½ä»¤å¯¹ä¿®æ”¹åçš„ ucore ä»£ç  å’Œ ucore æºç è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¾ƒä¹‹å‰ä½¿ç”¨ make clean æ¸…é™¤æ‰ä¸å¿…è¦æ–‡ä»¶</li></ul></li><li>åº”ç”¨ä¿®æ”¹ï¼š</li></ul><h3 id="ä½¿ç”¨è¿œç¨‹è°ƒè¯•"><a href="#ä½¿ç”¨è¿œç¨‹è°ƒè¯•" class="headerlink" title="ä½¿ç”¨è¿œç¨‹è°ƒè¯•"></a>ä½¿ç”¨è¿œç¨‹è°ƒè¯•</h3><ul><li><p>ä¸ qemu é…åˆè¿›è¡Œæºä»£ç çº§åˆ«çš„è°ƒè¯•ï¼Œéœ€è¦å…ˆè®© qemu è¿›å…¥ç­‰å¾… gdb è°ƒè¯•å™¨çš„æ¥å…¥å¹¶ä¸”è¿˜ä¸èƒ½è®© qemu çš„CPUæ‰§è¡Œ</p><ul><li>å› æ­¤å¯åŠ¨ qemu æ—¶ï¼Œéœ€è¦ä½¿ç”¨ -S -s</li><li><code>qemu -S -s</code>ï¼šqemu ä¸­çš„CPUå¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œ</li></ul></li><li><p>ç„¶åå¯åŠ¨ gdb ï¼Œ<code>target remote 127.0.0.1:1234</code> è¿æ¥åˆ°qemu</p></li><li><p><code>c</code>: qemu ç»§ç»­æ‰§è¡Œ</p></li><li><p><strong>é‡åˆ°çš„é—®é¢˜</strong>ï¼š<img src="E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\lab0.assets\image-20210403211514163.png" alt="image-20210403211514163"></p><ul><li>analysisï¼š</li><li>solutionï¼š</li></ul></li><li><p>ä¸ºäº†ä½¿å¾— gdb è·çŸ¥ç¬¦å·ä¿¡æ¯ï¼Œéœ€è¦æŒ‡å®šè°ƒè¯•ç›®æ ‡æ–‡ä»¶ï¼Œgdb ä¸­ <code>file ./bin/kernel</code></p><ul><li>gdb ä¾¿å¯è½½å…¥è¿™ä¸ªæ–‡ä»¶ä¸­çš„ç¬¦å·ä¿¡æ¯</li></ul></li><li><p>é‡åˆ°çš„é—®é¢˜ï¼š</p></li><li><p>é€šè¿‡ gdb å¯ä»¥å¯¹ ucore ä»£ç è¿›è¡Œè°ƒè¯•</p></li><li><p>ä¾‹å¦‚ï¼š è°ƒè¯•memsetå‡½æ•°ï¼š</p><ol><li>è¿è¡Œ <code>qemu -S -s -hda ./bin/ucore.img -monitor stdio</code></li><li>è¿è¡Œ gdb å¹¶ä¸ qemu è¿›è¡Œè¿æ¥</li><li>è®¾ç½®æ–­ç‚¹å¹¶æ‰§è¡Œ</li><li>qemu å•æ­¥è°ƒè¯•</li></ol></li></ul><h3 id="ä½¿ç”¨-gdb-é…ç½®æ–‡ä»¶"><a href="#ä½¿ç”¨-gdb-é…ç½®æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ gdb é…ç½®æ–‡ä»¶"></a>ä½¿ç”¨ gdb é…ç½®æ–‡ä»¶</h3><h3 id="åŠ è½½è°ƒè¯•ç›®æ ‡"><a href="#åŠ è½½è°ƒè¯•ç›®æ ‡" class="headerlink" title="åŠ è½½è°ƒè¯•ç›®æ ‡"></a>åŠ è½½è°ƒè¯•ç›®æ ‡</h3><ul><li>å› ä¸ºåœ¨æŒ‡å®šäº†æ‰§è¡Œæ–‡ä»¶æ—¶å°±å·²ç»åŠ è½½äº†æ–‡ä»¶ä¸­åŒ…å«çš„è°ƒè¯•ä¿¡æ¯ï¼Œå› æ­¤ä¸ç”¨åœ¨ä½¿ç”¨ gdb å‘½ä»¤ä¸“é—¨åŠ è½½</li><li>ä½†æ˜¯åœ¨ä½¿ç”¨ qemu è¿›è¡Œè¿œç¨‹è°ƒè¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨åŠ è½½ç¬¦å·è¡¨ï¼Œå³ <code>file</code></li></ul><h3 id="è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„"><a href="#è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„" class="headerlink" title="è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„"></a>è®¾å®šè°ƒè¯•ç›®æ ‡æ¶æ„</h3><ul><li>åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œè‹¥éœ€è¦è°ƒè¯•ä¸æ˜¯ i386 ä¿æŠ¤æ¨¡å¼ä»£ç ï¼Œæ¯”å¦‚8086å®æ¨¡å¼ä»£ç ï¼Œéœ€è¦è®¾å®šå½“å‰ä½¿ç”¨çš„æ¶æ„ï¼š<code>(gdb) set arch i8086</code></li><li></li></ul><h1 id="5-äº†è§£å¤„ç†å™¨ç¡¬ä»¶"><a href="#5-äº†è§£å¤„ç†å™¨ç¡¬ä»¶" class="headerlink" title="5 äº†è§£å¤„ç†å™¨ç¡¬ä»¶"></a>5 äº†è§£å¤„ç†å™¨ç¡¬ä»¶</h1><ul><li>äº†è§£å¤„ç†å™¨ä½“ç³»ç»“æ„ï¼ˆäº†è§£ç¡¬ä»¶å¯¹ uCore çš„å½±å“ï¼‰å’Œæœºå™¨æŒ‡ä»¤é›†ï¼ˆè¯»æ‡‚ uCore çš„æ±‡ç¼–ï¼‰</li><li>uCore ç›®å‰æ”¯æŒçš„ç¡¬ä»¶ç¯å¢ƒæ˜¯åŸºäºIntel 80386ä»¥ä¸Šçš„è®¡ç®—æœºç³»ç»Ÿ</li></ul><h2 id="5-1-Intel-80386-è¿è¡Œæ¨¡å¼"><a href="#5-1-Intel-80386-è¿è¡Œæ¨¡å¼" class="headerlink" title="5.1 Intel 80386 è¿è¡Œæ¨¡å¼"></a>5.1 Intel 80386 è¿è¡Œæ¨¡å¼</h2><ul><li>ä¸€èˆ¬CPU åªæœ‰ä¸€ç§è¿è¡Œæ¨¡å¼ï¼Œ<ul><li>èƒ½å¤Ÿæ”¯æŒå¤šä¸ªç¨‹åºåœ¨å„è‡ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´ä¸­å¹¶å‘æ‰§è¡Œï¼Œ</li><li>ä¸”æœ‰ç”¨æˆ·ç‰¹æƒçº§å’Œå†…æ ¸ç‰¹æƒçº§çš„åŒºåˆ†ï¼Œä½¿å¾—ä¸€èˆ¬ç”¨æˆ·ä¸èƒ½ç ´åæ“ä½œç³»ç»Ÿå†…æ ¸å’Œæ‰§è¡Œç‰¹æƒçº§æŒ‡ä»¤</li></ul></li><li>80386 å¤„ç†å™¨æœ‰å››ç§è¿è¡Œæ¨¡å¼<ul><li>å®æ¨¡å¼</li><li>ä¿æŠ¤æ¨¡å¼</li><li>SMM æ¨¡å¼</li><li>è™šæ‹Ÿ8086 æ¨¡å¼</li></ul></li><li><strong>å®æ¨¡å¼</strong><ul><li>ä¸ªäººè®¡ç®—æœºæ—©æœŸ8086å¤„ç†å™¨é‡‡ç”¨çš„ä¸€ç§ç®€å•è¿è¡Œæ¨¡å¼</li><li>åŠ ç”µå¯åŠ¨åå¤„äºå®æ¨¡å¼è¿è¡ŒçŠ¶æ€</li><li>å®æ¨¡å¼çŠ¶æ€ä¸‹ï¼Œè½¯ä»¶<strong>å¯è®¿é—®çš„ç‰©ç†å†…å­˜åœ°å€ç©ºé—´ä¸èƒ½è¶…è¿‡1 MB</strong>ï¼Œä¸”æ— æ³•å‘æŒ¥ Intel 80386ä»¥ä¸Šçº§åˆ«<strong>32ä½ CPU çš„4 GB å†…å­˜ç®¡ç†èƒ½åŠ›</strong></li><li>å®æ¨¡å¼å°†æ•´ä¸ªç‰©ç†å†…å­˜çœ‹æˆåˆ†æ®µåŒºåŸŸï¼Œç¨‹åºä»£ç å’Œæ•°æ®ä½äºä¸åŒåŒºåŸŸ</li><li><strong>æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·ç¨‹åºæœªåŒºåˆ«å¯¹å¾…</strong>ï¼Œæ¯ä¸€ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘å®é™…çš„ç‰©ç†åœ°å€</li><li>æ³¨æ„ï¼šè‹¥ç”¨æˆ·ç¨‹åºçš„ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†æ“ä½œç³»ç»ŸåŒºåŸŸæˆ–è€…å…¶ä»–ç”¨æˆ·ç¨‹åºåŒºåŸŸï¼Œå¹¶ä¿®æ”¹ï¼Œåæœä¸å ªè®¾æƒ³</li></ul></li></ul><blockquote><p>å¯¹äºucoreæ— å¿…è¦æ¶‰åŠ</p></blockquote><ul><li><strong>ä¿æŠ¤æ¨¡å¼</strong><ul><li><strong>ä¸»è¦ç›®æ ‡</strong>æ˜¯ç¡®ä¿åº”ç”¨ç¨‹åºæ— æ³•å¯¹æ“ä½œç³»ç»Ÿè¿›è¡Œç ´å</li><li>å®é™…ä¸Šï¼Œ80386å°±æ˜¯é€šè¿‡åœ¨<strong>å®æ¨¡å¼</strong>ä¸‹åˆå§‹åŒ–<strong>æ§åˆ¶å¯„å­˜å™¨</strong>ï¼ˆå¦‚GDTRï¼ŒLDTRï¼ŒIDTRä¸TRç­‰ç®¡ç†å¯„å­˜å™¨ï¼‰ä»¥åŠ<strong>é¡µè¡¨</strong>ï¼Œç„¶åå†é€šè¿‡è®¾ç½®<strong>CR0å¯„å­˜å™¨</strong>ä½¿å…¶ä¸­çš„<strong>ä¿æŠ¤æ¨¡å¼</strong> <strong>ä½¿èƒ½ä½ç½®ä½</strong>ï¼Œä»è€Œè¿›å…¥åˆ°80386çš„ä¿æŠ¤æ¨¡å¼</li><li>å½“80386å·¥ä½œåœ¨<strong>ä¿æŠ¤æ¨¡å¼</strong>ä¸‹çš„æ—¶å€™ï¼Œå…¶æ‰€æœ‰çš„<strong>32æ ¹åœ°å€çº¿</strong>éƒ½å¯ä¾›å¯»å€ï¼Œç‰©ç†å¯»å€ç©ºé—´é«˜è¾¾4 GB</li><li>åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ”¯æŒ<strong>å†…å­˜åˆ†é¡µæœºåˆ¶</strong>ï¼Œæä¾›äº†<strong>å¯¹è™šæ‹Ÿå†…å­˜çš„è‰¯å¥½æ”¯æŒ</strong></li><li><strong>ä¿æŠ¤æ¨¡å¼</strong>ä¸‹80386æ”¯æŒ<strong>å¤šä»»åŠ¡</strong>ï¼Œè¿˜æ”¯æŒ<strong>ä¼˜å…ˆçº§æœºåˆ¶</strong>ï¼Œ<strong>ä¸åŒçš„ç¨‹åºå¯ä»¥è¿è¡Œåœ¨ä¸åŒçš„ç‰¹æƒçº§ä¸Š</strong><ul><li>ç‰¹æƒçº§ä¸€å…±åˆ†0ï½3å››ä¸ªçº§åˆ«ï¼Œæ“ä½œç³»ç»Ÿè¿è¡Œåœ¨æœ€é«˜çš„ç‰¹æƒçº§0ä¸Šï¼Œåº”ç”¨ç¨‹åºåˆ™è¿è¡Œåœ¨æ¯”è¾ƒä½çš„çº§åˆ«ä¸Šï¼›</li><li>é…åˆè‰¯å¥½çš„æ£€æŸ¥æœºåˆ¶åï¼Œæ—¢å¯ä»¥åœ¨ä»»åŠ¡é—´<strong>å®ç°æ•°æ®çš„å®‰å…¨å…±äº«</strong>ä¹Ÿå¯ä»¥å¾ˆå¥½åœ°<strong>éš”ç¦»å„ä¸ªä»»åŠ¡</strong>ã€‚</li></ul></li></ul></li></ul><h2 id="5-2-Intel-80386å†…å­˜æ¶æ„"><a href="#5-2-Intel-80386å†…å­˜æ¶æ„" class="headerlink" title="5.2 Intel 80386å†…å­˜æ¶æ„"></a>5.2 Intel 80386å†…å­˜æ¶æ„</h2><ul><li><strong>32</strong> ä½çš„å¤„ç†å™¨ï¼š<strong>å¯ä»¥å¯»å€çš„ç‰©ç†å†…å­˜åœ°å€ç©ºé—´</strong>ä¸º 2^32 = 4 G å­—èŠ‚</li><li>ä¸‰ä¸ªåœ°å€ç©ºé—´æ¦‚å¿µï¼š<ul><li><strong>ç‰©ç†åœ°å€</strong><ul><li>å¤„ç†å™¨æäº¤åˆ°æ€»çº¿ä¸Šç”¨äºè®¿é—®è®¡ç®—æœºç³»ç»Ÿä¸­çš„å†…å­˜å’Œå¤–è®¾çš„<strong>æœ€ç»ˆåœ°å€</strong></li><li>ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªç‰©ç†åœ°å€ç©ºé—´</li></ul></li><li><strong>çº¿æ€§åœ°å€</strong><ul><li>80386å¤„ç†å™¨é€šè¿‡<strong>æ®µï¼ˆSegmentï¼‰æœºåˆ¶</strong>æ§åˆ¶ä¸‹çš„å½¢æˆçš„åœ°å€ç©ºé—´</li><li><strong>æ®µæœºåˆ¶</strong><ul><li>åœ¨æ“ä½œç³»ç»Ÿçš„ç®¡ç†ä¸‹ï¼Œ<strong>æ¯ä¸ªè¿è¡Œ</strong>çš„åº”ç”¨ç¨‹åºæœ‰<strong>ç›¸å¯¹ç‹¬ç«‹</strong>çš„ä¸€ä¸ªæˆ–å¤šä¸ªå†…å­˜ç©ºé—´æ®µï¼Œæ¯ä¸ªæ®µæœ‰å„è‡ªçš„èµ·å§‹åœ°å€å’Œé•¿åº¦å±æ€§ï¼Œå¤§å°ä¸å›ºå®šï¼Œè¿™æ ·å¯è®©å¤šä¸ªè¿è¡Œçš„åº”ç”¨ç¨‹åºä¹‹é—´<strong>ç›¸äº’éš”ç¦»</strong>ï¼Œå®ç°<strong>å¯¹åœ°å€ç©ºé—´çš„ä¿æŠ¤</strong>ã€‚</li><li>åœ¨æ“ä½œç³»ç»Ÿå®Œæˆå¯¹80386å¤„ç†å™¨æ®µæœºåˆ¶çš„<strong>åˆå§‹åŒ–å’Œé…ç½®</strong>ï¼ˆ<em>ä¸»è¦æ˜¯éœ€è¦æ“ä½œç³»ç»Ÿé€šè¿‡ç‰¹å®šçš„æŒ‡ä»¤å’Œæ“ä½œå»ºç«‹<strong>å…¨å±€æè¿°ç¬¦è¡¨</strong>ï¼Œå®Œæˆè™šæ‹Ÿåœ°å€ä¸çº¿æ€§åœ°å€çš„æ˜ å°„å…³ç³»</em>ï¼‰åï¼Œ80386å¤„ç†å™¨çš„<strong>æ®µç®¡ç†åŠŸèƒ½å•å…ƒ</strong>è´Ÿè´£æŠŠè™šæ‹Ÿåœ°å€è½¬æ¢æˆçº¿æ€§åœ°å€</li></ul></li><li><strong>é¡µæœºåˆ¶</strong><ul><li><strong>é¡µæœºåˆ¶</strong>ï¼Œæ¯ä¸ªé¡µçš„å¤§å°æ˜¯å›ºå®šçš„<strong>ï¼ˆ4 KBï¼‰</strong>ï¼Œå¯å®Œæˆ<strong>å¯¹å†…å­˜å•å…ƒçš„å®‰å…¨ä¿æŠ¤ï¼Œéš”ç¦»</strong>ï¼Œå¯æœ‰æ•ˆ<strong>æ”¯æŒå¤§é‡åº”ç”¨ç¨‹åºåˆ†æ•£çš„ä½¿ç”¨å¤§å†…å­˜</strong>çš„æƒ…å†µ</li><li>åœ¨æ“ä½œç³»ç»Ÿå®Œæˆå¯¹80386å¤„ç†å™¨é¡µæœºåˆ¶çš„<strong>åˆå§‹åŒ–å’Œé…ç½®</strong>ï¼ˆ<em>ä¸»è¦æ˜¯éœ€è¦æ“ä½œç³»ç»Ÿé€šè¿‡ç‰¹å®šçš„æŒ‡ä»¤å’Œæ“ä½œå»ºç«‹é¡µè¡¨ï¼Œå®Œæˆè™šæ‹Ÿåœ°å€ä¸çº¿æ€§åœ°å€çš„æ˜ å°„å…³ç³»</em>ï¼‰åï¼Œåº”ç”¨ç¨‹åºçœ‹åˆ°çš„<strong>é€»è¾‘åœ°å€å…ˆè¢«å¤„ç†å™¨ä¸­çš„æ®µç®¡ç†åŠŸèƒ½å•å…ƒè½¬æ¢ä¸ºçº¿æ€§åœ°å€</strong>ï¼Œç„¶åå†é€šè¿‡80386<strong>å¤„ç†å™¨ä¸­çš„é¡µç®¡ç†åŠŸèƒ½å•å…ƒæŠŠçº¿æ€§åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€</strong>ã€‚</li></ul></li></ul></li><li><strong>é€»è¾‘åœ°å€</strong></li></ul></li></ul><blockquote><p>é¡µæœºåˆ¶å’Œæ®µæœºåˆ¶æœ‰ä¸€å®šç¨‹åº¦çš„åŠŸèƒ½é‡å¤ï¼Œä½†Intelå…¬å¸ä¸ºäº†å‘ä¸‹å…¼å®¹ï¼Œä½¿å¾—ä¸¤è€…ä¸€ç›´å…±å­˜</p></blockquote><ul><li>åˆ†æ®µæœºåˆ¶å¯åŠ¨ï¼Œåˆ†é¡µæœºåˆ¶ä¸ºå¯åŠ¨æ—¶ï¼šé€»è¾‘åœ°å€â€”â€”<strong>æ®µæœºåˆ¶å¤„ç†</strong>â€”â€”&gt;çº¿æ€§åœ°å€==ç‰©ç†åœ°å€</li><li>ä¸¤ä¸ªæœºåˆ¶éƒ½å¯åŠ¨æ—¶ï¼šé€»è¾‘åœ°å€â€”â€”<strong>æ®µæœºåˆ¶å¤„ç†</strong>â€”â€”&gt;çº¿æ€§åœ°å€â€”â€”<strong>é¡µæœºåˆ¶å¤„ç†</strong>â€”â€”&gt;ç‰©ç†åœ°å€</li></ul><h2 id="5-3-Intel-80386-å¯„å­˜å™¨"><a href="#5-3-Intel-80386-å¯„å­˜å™¨" class="headerlink" title="5.3 Intel 80386 å¯„å­˜å™¨"></a>5.3 Intel 80386 å¯„å­˜å™¨</h2><ul><li><p>80386 å¯„å­˜å™¨å¯åˆ†ä¸º8ç±»ï¼šå®½åº¦éƒ½ä¸º 32 ä½</p><ol><li><p><strong>é€šç”¨å¯„å­˜å™¨</strong>ï¼ˆGeneral Registerï¼‰</p><ul><li><p>EAXï¼ˆ<strong>ç´¯åŠ å™¨</strong>ï¼‰/EBXï¼ˆ<strong>åŸºå€å¯„å­˜å™¨</strong>ï¼‰/ECXï¼ˆ<strong>è®¡æ•°å™¨</strong>ï¼‰/EDXï¼ˆ<strong>æ•°æ®å¯„å­˜å™¨</strong>ï¼‰/</p><p>ESIï¼ˆ<strong>æºåœ°å€æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰/EDIï¼ˆ<strong>ç›®çš„åœ°å€æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰/ESPï¼ˆ<strong>å †æ ˆæŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰/EBPï¼ˆ<strong>åŸºå€æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼‰</p><ul><li>ä½åå…­ä½ï¼šAX/BX/CX/DX/SI/DI/SP/BP<ul><li>å¯ä»¥å•ç‹¬å­˜å–AX,BX,CX,DX çš„é«˜å…«ä½å’Œä½å…«ä½</li><li>AH,AL/BH,BL/CH,CL/DH,DL</li></ul></li></ul></li></ul></li><li><p><strong>æ®µå¯„å­˜å™¨</strong>ï¼ˆSegment Registerï¼‰: éƒ½æ˜¯ 16 ä½çš„</p><ul><li>CS,  <strong>ä»£ç æ®µ</strong>ï¼ˆCode Segmentï¼‰</li><li>DS, <strong>æ•°æ®æ®µ</strong>ï¼ˆData Segmentï¼‰</li><li>ES, <strong>é™„åŠ æ•°æ®æ®µ</strong>ï¼ˆExtra Segmentï¼‰</li><li>SS, <strong>å †æ ˆæ®µ</strong>ï¼ˆStack Segmentï¼‰</li><li>FS, <strong>é™„åŠ æ®µ</strong></li><li>GS, <strong>é™„åŠ æ®µ</strong></li></ul></li><li><p><strong>æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨</strong>ï¼ˆInstruction Pointerï¼‰</p><ul><li>EIP çš„ä½ 16 ä½å°±æ˜¯8086çš„IPï¼Œä»–å­˜å‚¨çš„æ˜¯ä¸‹ä¸€æ¡è¦æ‰§è¡ŒæŒ‡ä»¤çš„å†…å­˜åœ°å€ï¼Œåœ¨åˆ†æ®µåœ°å€è½¬æ¢ä¸­ï¼Œè¡¨ç¤ºæŒ‡ä»¤çš„æ®µå†…åç§»åœ°å€</li></ul></li><li><p><strong>æ ‡å¿—å¯„å­˜å™¨</strong>ï¼ˆFlag Registerï¼‰ï¼š</p><ul><li>EFLAGSï¼Œå’Œ8086çš„16ä½æ ‡å¿—å¯„å­˜å™¨ç›¸æ¯”ï¼Œå¢åŠ äº†4ä¸ªæ§åˆ¶ä½ï¼Œè€…20ä½æ§åˆ¶/æ ‡å¿—ä½ï¼š<ul><li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab0_figs/image006.png" alt="çŠ¶æ€å¯„å­˜å™¨"></li><li>æ§åˆ¶/æ ‡å¿—ä½å«ä¹‰ï¼š</li></ul></li></ul></li><li><p>ç³»ç»Ÿåœ°å€å¯„å­˜å™¨</p></li><li><p>æ§åˆ¶å¯„å­˜å™¨</p></li><li><p>è°ƒè¯•å¯„å­˜å™¨</p></li><li><p>æµ‹è¯•å¯„å­˜å™¨</p></li></ol></li></ul><h1 id="6-äº†è§£-uCore-ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„"><a href="#6-äº†è§£-uCore-ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„" class="headerlink" title="6 äº†è§£ uCore ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„"></a>6 äº†è§£ uCore ç¼–ç¨‹æ–¹æ³•å’Œé€šç”¨æ•°æ®ç»“æ„</h1><h2 id="6-1-é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•"><a href="#6-1-é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•" class="headerlink" title="6.1 é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•"></a>6.1 é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•</h2><ul><li>uCore è®¾è®¡ä¸­é‡‡ç”¨äº†ä¸€å®šçš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•</li><li>éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç”¨ C è¯­è¨€æ¨¡æ‹Ÿå‡ºä¸€ä¸ªå¸¸è§C++ç¼–è¯‘å™¨å·²ç»å®ç°çš„å¯¹è±¡æ¨¡å‹</li><li>uCore çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•ï¼Œç›®å‰ä¸»è¦æ˜¯é‡‡ç”¨äº†ç±»ä¼¼ C++ çš„æ¥å£ï¼ˆinterfaceï¼‰<ul><li>å³æ˜¯è®©å®ç°ç»†èŠ‚ä¸åŒçš„æŸç±»å†…æ ¸å­ç³»ç»Ÿï¼ˆæ¯”å¦‚ç‰©ç†å†…å­˜åˆ†é…å™¨ã€è°ƒåº¦å™¨ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰æœ‰å…±åŒçš„æ“ä½œæ–¹å¼</li><li>è™½ç„¶å†…å­˜å­ç³»ç»Ÿçš„å®ç°åƒå·®ä¸‡åˆ«ï¼Œä½†å®ƒçš„è®¿é—®æ¥å£æ˜¯ä¸å˜çš„</li></ul></li><li>æ¥å£åœ¨ C è¯­è¨€ä¸­ï¼Œè¡¨ç°ä¸ºä¸€ç»„å‡½æ•°æŒ‡é’ˆçš„é›†åˆ</li><li>æ¥å£è®¾è®¡çš„éš¾ç‚¹æ˜¯å¦‚ä½•æ‰¾å‡ºå„ç§å†…æ ¸å­ç³»ç»Ÿçš„å…±æ€§è®¿é—®/æ“ä½œæ¨¡å¼ï¼Œä»è€Œå¯ä»¥æ ¹æ®è®¿é—®æ¨¡å¼æå–å‡ºå‡½æ•°æŒ‡é’ˆåˆ—è¡¨</li></ul><h2 id="6-2-é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨"><a href="#6-2-é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨" class="headerlink" title="6.2 é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨"></a>6.2 é€šç”¨æ•°æ®ç»“æ„åŒå‘å¾ªç¯é“¾è¡¨</h2><h3 id="6-2-1-åŒå‘å¾ªç¯é“¾è¡¨"><a href="#6-2-1-åŒå‘å¾ªç¯é“¾è¡¨" class="headerlink" title="6.2.1 åŒå‘å¾ªç¯é“¾è¡¨"></a>6.2.1 åŒå‘å¾ªç¯é“¾è¡¨</h3><ul><li><p>æ•°æ®ç»“æ„è¯¾ç¨‹ä¸­</p><ul><li>ä¸“é—¨çš„æˆå‘˜å˜é‡ data</li><li>ä¸¤ä¸ªæŒ‡å‘è¯¥ç±»å‹çš„æŒ‡é’ˆ next å’Œ prev</li><li>```C<br>typedef struct foo {<pre><code>ElemType data;struct foo *prev;struct foo *next;</code></pre>} foo_t;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* ç‰¹ç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">  * å°¾èŠ‚ç‚¹çš„åç»§æŒ‡å‘é¦–èŠ‚ç‚¹</span><br><span class="line">  * ![åŒå‘å¾ªç¯é“¾è¡¨](https://objectkuan.gitbooks.io/ucore-docs/content/lab0_figs/image007.png)</span><br><span class="line">* æ½œåœ¨é—®é¢˜ï¼šç”±äºæ¯ç§ç‰¹å®šæ•°æ®ç»“æ„ç±»å‹ä¸ä¸€è‡´ï¼Œéœ€è¦ä¸ºæ¯ç§ç‰¹å®šæ•°æ®ç»“æ„ç±»å‹ å®šä¹‰é’ˆå¯¹è¿™ä¸ªæ•°æ®ç»“æ„çš„ç‰¹å®šé“¾è¡¨æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œ</span><br><span class="line">* åœ¨uCoreä¸­ï¼Œå€Ÿé‰´äº† Linux å†…æ ¸çš„åŒå‘é“¾è¡¨å®ç°ï¼š</span><br><span class="line"></span><br><span class="line">  * ```C</span><br><span class="line">    struct list_entry_t &#123;</span><br><span class="line">        struct list_entry_t *prev, *next;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure></li><li>é“¾è¡¨èŠ‚ç‚¹ list_entry_t æ²¡æœ‰åŒ…å«æ•°æ®åŸŸï¼Œè€Œæ˜¯<strong>åœ¨å…·ä½“çš„æ•°æ®ç»“æ„ä¸­åŒ…å«è¯¥é“¾è¡¨èŠ‚ç‚¹</strong></li></ul></li><li><p>ä¾‹å¦‚ lab 2 ä¸­çš„ç©ºé—²å†…å­˜å—åˆ—è¡¨ï¼Œ<strong>ç©ºé—²å—é“¾è¡¨çš„å¤´æŒ‡é’ˆ</strong>å®šä¹‰ä¸ºï¼š</p><ul><li><p>```C<br>/* free_area_t - maintains a doubly linked list to record free (unused) pages */</p><p>typedef struct {</p><pre><code>list_entry_t free_list;         // the list headerunsigned int nr_free;           // # of free pages in this free list</code></pre><p>} free_area_t;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">* æ¯ä¸€ä¸ª**ç©ºé—²å—é“¾è¡¨èŠ‚ç‚¹**å®šä¹‰ä¸ºï¼š</span><br><span class="line"></span><br><span class="line">  * ```C</span><br><span class="line">    /* *</span><br><span class="line">     * struct Page - Page descriptor structures. Each Page describes one</span><br><span class="line">     * physical page. In kern/mm/pmm.h, you can find lots of useful functions</span><br><span class="line">     * that convert Page to other data types, such as phyical address.</span><br><span class="line">     * */</span><br><span class="line">    struct Page &#123;</span><br><span class="line">        atomic_t ref;          // page frame&#x27;s reference counter</span><br><span class="line">        â€¦â€¦</span><br><span class="line">        list_entry_t page_link;         // free list link</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure></li></ul></li><li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab0_figs/image008.png" alt="ç©ºé—²å—åŒå‘å¾ªç¯é“¾è¡¨" style="zoom:150%;" /></li><li><p>é€šç”¨åŒå‘å¾ªç¯é“¾è¡¨ç»“æ„</p><ul><li>é¿å…äº†ä¸ºæ¯ä¸ªç‰¹å®šæ•°æ®ç»“æ„ç±»å‹ å®šä¹‰é’ˆå¯¹è¿™ä¸ªæ•°æ®ç»“æ„çš„ç‰¹å®šé“¾è¡¨çš„éº»çƒ¦ï¼Œ</li><li>è®©æ‰€æœ‰çš„ç‰¹å®šæ•°æ®ç»“æ„å…±äº«é€šç”¨çš„é“¾è¡¨æ“ä½œå‡½æ•°</li></ul></li><li><p>é€šç”¨åŒå‘å¾ªç¯é“¾è¡¨å‡½æ•°å®šä¹‰ï¼š</p><ul><li><p>åˆå§‹åŒ–ï¼š</p><ul><li><p>uCore åªå®šä¹‰äº†é“¾è¡¨èŠ‚ç‚¹ï¼Œæ²¡æœ‰ä¸“é—¨å®šä¹‰é“¾è¡¨å¤´</p></li><li><p>å†…è”å‡½æ•°ï¼ˆ<strong>inline function</strong>ï¼‰list_init:</p><ul><li>```C<br>static inline void<br>list_init(list_entry_t *elm) {<pre><code>elm-&gt;prev = elm-&gt;next = elm;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  * è°ƒç”¨ list_init(free_area.free_list) ï¼Œ</span><br><span class="line"></span><br><span class="line">    * å£°æ˜äº†ä¸€ä¸ªåä¸º free_area.free_list çš„é“¾è¡¨å¤´</span><br><span class="line">    * ç©ºé“¾è¡¨ï¼Œé“¾è¡¨å¤´çš„ next å’Œ prev éƒ½åˆå§‹åŒ–æŒ‡å‘è‡ªå·±</span><br><span class="line">    * å¯ä»¥ç”¨next æ˜¯å¦æŒ‡å‘è‡ªå·±åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br><span class="line">* æ’å…¥ï¼š</span><br><span class="line"></span><br><span class="line">  * è¡¨å¤´æ’å…¥ï¼ˆ**list_add_after**ï¼‰</span><br><span class="line">  * è¡¨å°¾æ’å…¥ï¼ˆ**list_add_before**ï¼‰</span><br><span class="line">  * ç”±äºåŒå‘å¾ªç¯é“¾è¡¨çš„é“¾è¡¨å¤´ next å’Œ prev åˆ†åˆ«æŒ‡å‘é“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸¤è€…å®ç°åŒºåˆ«å¹¶ä¸å¤§</span><br><span class="line">  * uCore</span><br><span class="line"></span><br><span class="line">    * **list_add(elm, listelm, listelm-&gt;next)** å®ç°è¡¨å¤´æ’å…¥</span><br><span class="line">    * **list_add(elm, listelm-&gt;prev, listelm)** å®ç°è¡¨å°¾æ’å…¥</span><br><span class="line">  * list_add:</span><br><span class="line"></span><br><span class="line">    * ```C</span><br><span class="line">      static inline void</span><br><span class="line">      __list_add(list_entry_t *elm, list_entry_t *prev, list_entry_t *next) &#123;</span><br><span class="line">          prev-&gt;next = next-&gt;prev = elm;</span><br><span class="line">          elm-&gt;next = next;</span><br><span class="line">          elm-&gt;prev = prev;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>è¡¨å¤´æ’å…¥ï¼šæ’å…¥åœ¨listelm åï¼Œå³æ’åœ¨é“¾è¡¨çš„æœ€å‰ä½ç½®</p></li><li><p>è¡¨å°¾æ’å…¥ï¼šæ’å…¥åœ¨ listelm-&gt;prev ä¹‹åï¼Œå³æ’å…¥åœ¨é“¾è¡¨æœ€åä½ç½®</p></li></ul></li><li><p>åˆ é™¤</p><ul><li>åˆ é™¤ç©ºé—²å—é“¾è¡¨ä¸­çš„ Page ç»“æ„çš„é“¾è¡¨èŠ‚ç‚¹æ—¶ï¼Œè°ƒç”¨ å†…è”å‡½æ•° list_del , list_del è¿›ä¸€æ­¥è°ƒç”¨äº†_list_del å®Œæˆå…·ä½“çš„åˆ é™¤æ“ä½œ</li><li>```C<br>static inline void<br>list_del(list_entry_t *listelm) {<pre><code>__list_del(listelm-&gt;prev, listelm-&gt;next);</code></pre>}<br>static inline void<br>__list_del(list_entry_t *prev, list_entry_t *next) {<pre><code>prev-&gt;next = next;next-&gt;prev = prev;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  * å¦‚æœè¦ç¡®ä¿ è¢«åˆ é™¤çš„èŠ‚ç‚¹ listelm ä¸åœ¨æŒ‡å‘é“¾è¡¨ä¸­å…¶ä»–èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ list_init æ¥æŠŠ listelm çš„preã€next æŒ‡é’ˆåˆ†åˆ«æŒ‡å‘è‡ªèº«â€”â€”å¯ä»¥é€šè¿‡ list_del_int å®Œæˆ</span><br><span class="line">* è®¿é—®é“¾è¡¨èŠ‚ç‚¹æ‰€åœ¨çš„å®¿ä¸»æ•°æ®ç»“æ„</span><br><span class="line"></span><br><span class="line">  * list_entry_t é€šç”¨åŒå‘å¾ªç¯é“¾è¡¨ ä»…ä»…ä¿å­˜äº†æŸç‰¹å®šæ•°æ®ç»“æ„ä¸­é“¾è¡¨èŠ‚ç‚¹æˆå‘˜å˜é‡çš„åœ°å€</span><br><span class="line">  * å¦‚ä½•é€šè¿‡è¿™ä¸ªé“¾è¡¨èŠ‚ç‚¹æˆå‘˜å˜é‡è®¿é—®åˆ°ä»–çš„æ‰€æœ‰è€…ï¼ˆæŸç‰¹å®šæ•°æ®ç»“æ„çš„å˜é‡ï¼‰</span><br><span class="line">  * Linux æä¾›äº†é’ˆå¯¹è¯¥æ•°æ®ç»“æ„ XXX çš„ leXXX çš„å®</span><br><span class="line"></span><br><span class="line">    * le ä¸º list entry ç®€ç§°ï¼Œæ˜¯æŒ‡å‘æ•°æ®ç»“æ„ XXX ä¸­ list_entry_t æˆå‘˜å˜é‡çš„æŒ‡é’ˆï¼Œå³å­˜å‚¨åœ¨åŒå‘é“¾è¡¨ä¸­çš„ç»“ç‚¹åœ°å€å€¼</span><br><span class="line">    * member æ˜¯æŒ‡ XXXæ•°æ®ç±»å‹ä¸­åŒ…å«çš„é“¾è¡¨èŠ‚ç‚¹çš„æˆå‘˜å˜é‡</span><br><span class="line">  * ```C</span><br><span class="line">    //free_areaæ˜¯ç©ºé—²å—ç®¡ç†ç»“æ„ï¼Œfree_area.free_listæ˜¯ç©ºé—²å—é“¾è¡¨å¤´</span><br><span class="line">    free_area_t free_area;</span><br><span class="line">    list_entry_t * le = &amp;free_area.free_list;  //leæ˜¯ç©ºé—²å—é“¾è¡¨å¤´æŒ‡é’ˆ</span><br><span class="line">    while((le=list_next(le)) != &amp;free_area.free_list) &#123; //ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹éå†</span><br><span class="line">        struct Page *p = le2page(le, page_link); //è·å–èŠ‚ç‚¹æ‰€åœ¨åŸºäºPageæ•°æ®ç»“æ„çš„å˜é‡</span><br><span class="line">        â€¦â€¦</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>le2page å®ï¼š</p><ul><li><pre><code class="C">// convert list entry to page#define le2page(le, member)                 \to_struct((le), struct Page, member)</code></pre></li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> è¯¾ç¨‹å®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4 æµç¨‹æ§åˆ¶</title>
      <link href="p/9de48019.html"/>
      <url>p/9de48019.html</url>
      
        <content type="html"><![CDATA[<h2 id="4-æµç¨‹æ§åˆ¶"><a href="#4-æµç¨‹æ§åˆ¶" class="headerlink" title="4 æµç¨‹æ§åˆ¶"></a>4 æµç¨‹æ§åˆ¶</h2><ul><li>æµç¨‹æ§åˆ¶æ˜¯æ¯ç§è¯­è¨€æ§åˆ¶é€»è¾‘èµ°å‘å’Œæ‰§è¡Œæ¬¡åºçš„é‡è¦éƒ¨åˆ†</li><li>Go ä¸­æœ‰<code>if</code> å’Œ <code>for</code>, è€Œ<code>switch</code> å’Œ <code>goto</code>ä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–ä»£ç ã€é™ä½é‡å¤ä»£ç è€Œç”Ÿï¼Œå±äºæ‰©å±•ç±»çš„æµç¨‹æ§åˆ¶</li></ul><h3 id="if-elseåˆ†æ”¯ç»“æ„"><a href="#if-elseåˆ†æ”¯ç»“æ„" class="headerlink" title="if elseåˆ†æ”¯ç»“æ„"></a>if elseåˆ†æ”¯ç»“æ„</h3><h4 id="if-æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•"><a href="#if-æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•" class="headerlink" title="if æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•"></a>if æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•</h4><ul><li><p>if æ¡ä»¶åˆ¤æ–­æ ¼å¼</p><ul><li>```go<br>if expr1{<pre><code>block1</code></pre>}else if expr2{<pre><code>block2</code></pre>}else {<pre><code>block3</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * ==æ³¨æ„ï¼š==Go è§„å®šï¼Œ`if`çš„**å·¦æ‹¬å·**å¿…é¡»ä¸`if expr`æ”¾äºåŒä¸€è¡Œï¼›**å³æ‹¬å·å¿…é¡»ä¸ä¸‹ä¸€ä¸ªè¯­å¥åœ¨åŒä¸€è¡Œ**</span><br><span class="line"></span><br><span class="line">#### if æ¡ä»¶åˆ¤æ–­ç‰¹æ®Šå†™æ³•</span><br><span class="line"></span><br><span class="line">* å¯ä»¥åœ¨ if è¡¨è¾¾å¼å‰æ·»åŠ ä¸€ä¸ªæ‰§è¡Œè¯­å¥ï¼Œå†æ ¹æ®å˜é‡å€¼åˆ¤æ–­</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    package main</span><br><span class="line">    </span><br><span class="line">    import &quot;fmt&quot;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    </span><br><span class="line">    if score := 65; score &gt;= 90 &#123;</span><br><span class="line">    fmt.Println(&quot;A&quot;)</span><br><span class="line">    &#125; else if score &gt; 75 &#123;</span><br><span class="line">    fmt.Println(&quot;B&quot;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    fmt.Println(&quot;C&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ€è€ƒï¼šåŒºåˆ«å¯èƒ½å°±æ˜¯ä½œç”¨åŸŸä¸åŒ</p></li></ul><h3 id="for-å¾ªç¯ç»“æ„"><a href="#for-å¾ªç¯ç»“æ„" class="headerlink" title="for å¾ªç¯ç»“æ„"></a>for å¾ªç¯ç»“æ„</h3><ul><li><p>Go è¯­è¨€ä¸­çš„æ‰€æœ‰å¾ªç¯ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨å…³é”®å­— <code>for</code> å®Œæˆ</p></li><li><p>åŸºæœ¬æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for åˆå§‹è¯­å¥; å¾ªç¯æ¡ä»¶è¡¨è¾¾å¼; ç»“æŸè¯­å¥&#123;</span><br><span class="line">å¾ªç¯ä½“</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li><li><p>å½“<code>å¾ªç¯æ¡ä»¶è¡¨è¾¾å¼</code> ä¸º<code>true</code> æ—¶è¿›è¡Œå¾ªç¯ï¼Œç›´åˆ°ä¸º<code>false</code></p></li><li><p>for å¾ªç¯çš„ <code>åˆå§‹è¯­å¥</code> å¯ä»¥è¢«çœç•¥ï¼Œä½†æ˜¯<strong>åˆ†å·å¿…é¡»è¦å†™</strong></p><ul><li><code>for ;i&lt;10;i++</code></li></ul></li><li><p>for å¾ªç¯çš„åˆå§‹è¯­å¥å’Œç»“æŸè¯­å¥éƒ½å¯ä»¥è¢«çœç•¥, æ­¤æ—¶ä¸éœ€è¦åˆ†å·</p><ul><li>ç±»ä¼¼äºCä¸­çš„å…³é”®è¯<code>while</code></li><li><code>for i&lt;10 </code></li></ul></li></ul><h4 id="æ— é™å¾ªç¯"><a href="#æ— é™å¾ªç¯" class="headerlink" title="æ— é™å¾ªç¯"></a>æ— é™å¾ªç¯</h4><ul><li><p>```<br>for {</p><pre><code>å¾ªç¯ä½“</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* å¯ä»¥é€šè¿‡å…³é”®å­—`break` `goto` `return`  `panic`å¼ºåˆ¶é€€å‡ºå¾ªç¯</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### for range é”®å€¼å¾ªç¯</span><br><span class="line"></span><br><span class="line">* å¯ä»¥ä½¿ç”¨ `for range` éå† æ•°ç»„ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²ã€mapä»¥åŠé€šé“</span><br><span class="line">  * æ•°ç»„ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸² è¿”å› `ç´¢å¼•`å’Œ`å€¼`</span><br><span class="line">  * map è¿”å›`é”®`å’Œ`å€¼`</span><br><span class="line">  * é€šé“ åªè¿”å›`é€šé“å†…çš„å€¼`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### switch case</span><br><span class="line"></span><br><span class="line">* å¯¹å¤§é‡å€¼è¿›è¡Œæ¡ä»¶åˆ¤æ–­</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    i := 1</span><br><span class="line">    switch(i)&#123;</span><br><span class="line">    case 1:</span><br><span class="line">    block1</span><br><span class="line">    case 2:</span><br><span class="line">    block2</span><br><span class="line">    default :</span><br><span class="line">    block3</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>Go è§„å®šï¼Œåªèƒ½æœ‰ä¸€ä¸ª<code>default</code>åˆ†æ”¯</p></li><li><p>ä¸€ä¸ªåˆ†æ”¯å¯ä»¥æœ‰å¤šä¸ªå€¼ï¼Œå¤šä¸ªcaseå€¼ä½¿ç”¨é€—å·åˆ†å¼€</p></li><li><p><code>case 1, 3, 5:</code></p></li><li><p>åˆ†æ”¯å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼åˆ¤æ–­ï¼š</p><ul><li><code>case age&lt;25:</code></li></ul></li><li><p><code>fallthrough</code>è¯­æ³•å¯ä»¥æ‰§è¡Œæ»¡è¶³æ¡ä»¶çš„ case çš„ä¸‹ä¸€ä¸ª caseï¼Œä¸ºäº†å…¼å®¹ C ä¸­çš„case</p><ul><li>```go<br>func switchDemo5() {<pre><code> s := &quot;a&quot; switch &#123; case s == &quot;a&quot;:     fmt.Println(&quot;a&quot;)     fallthrough case s == &quot;b&quot;:     fmt.Println(&quot;b&quot;) case s == &quot;c&quot;:     fmt.Println(&quot;c&quot;) default:     fmt.Println(&quot;...&quot;) &#125;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ```</span><br><span class="line">  a</span><br><span class="line">  b</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="goto-è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾"><a href="#goto-è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾" class="headerlink" title="goto è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾"></a>goto è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾</h3><ul><li><code>goto</code>é€šè¿‡æ ‡ç­¾è¿›è¡Œä»£ç é—´çš„æ— æ¡ä»¶è·³è½¬</li><li>å¯ä»¥åœ¨å¿«é€Ÿè·³å‡ºå¾ªç¯ã€é¿å…é‡å¤é€€å‡ºä¸Šæœ‰ä¸€å®šçš„å¸®åŠ©<br>* </li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gotoDemo2</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> j == <span class="number">2</span> &#123;</span><br><span class="line"><span class="comment">// è®¾ç½®é€€å‡ºæ ‡ç­¾</span></span><br><span class="line"><span class="keyword">goto</span> breakTag</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%v-%v\n&quot;</span>, i, j)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="comment">// æ ‡ç­¾</span></span><br><span class="line">breakTag:</span><br><span class="line">fmt.Println(<span class="string">&quot;ç»“æŸforå¾ªç¯&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="break-è·³å‡ºå¾ªç¯"><a href="#break-è·³å‡ºå¾ªç¯" class="headerlink" title="break è·³å‡ºå¾ªç¯"></a>break è·³å‡ºå¾ªç¯</h3><ul><li><p>ç»“æŸ<code>for</code>ã€<code>switch</code>ã€<code>select</code> çš„ä»£ç å—</p></li><li><p>å¯ä»¥åœ¨<code>break</code>è¯­å¥åé¢æ·»åŠ æ ‡ç­¾ï¼šé€€å‡ºæŸä¸ªæ ‡ç­¾å¯¹åº”çš„ä»£ç å—</p><ul><li><p>æ ‡ç­¾å¿…é¡»å®šä¹‰åœ¨å¯¹åº”çš„<code>for</code>ã€<code>switch</code>ã€<code>select</code> çš„ä»£ç å—ä¸Š</p><ul><li>```go<br>func breakDemo1() {<br>BREAKDEMO1:<pre><code>for i := 0; i &lt; 10; i++ &#123;    for j := 0; j &lt; 10; j++ &#123;        if j == 2 &#123;            break BREAKDEMO1        &#125;        fmt.Printf(&quot;%v-%v\n&quot;, i, j)    &#125;&#125;fmt.Println(&quot;...&quot;)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">### continue ç»§ç»­ä¸‹æ¬¡å¾ªç¯</span><br><span class="line"></span><br><span class="line">* continue è¯­å¥: ç»“æŸå½“å‰å¾ªç¯ï¼Œå¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œä»…é™åœ¨`for`å¾ªç¯å†…ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">* åœ¨`continue` è¯­å¥åæ·»åŠ æ ‡ç­¾æ—¶ï¼Œè¡¨ç¤ºå¼€å§‹æ ‡ç­¾å¯¹åº”çš„å¾ªç¯</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func continueDemo() &#123;</span><br><span class="line">    forloop1:</span><br><span class="line">    for i := 0; i &lt; 5; i++ &#123;</span><br><span class="line">    // forloop2:</span><br><span class="line">    for j := 0; j &lt; 5; j++ &#123;</span><br><span class="line">    if i == 2 &amp;&amp; j == 2 &#123;</span><br><span class="line">    continue forloop1</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(&quot;%v-%v\n&quot;, i, j)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><ul><li><p>ç¼–å†™ä»£ç æ‰“å° 99 ä¹˜æ³•è¡¨</p><ul><li><pre><code class="go">package mainimport &quot;fmt&quot;func main() &#123;    for i := 1; i &lt;= 10; i++ &#123;        for j := 1; j &lt;= 10; j++ &#123;            fmt.Printf(&quot;%d * %d = %d &quot;, i, j, i*j)        &#125;        fmt.Println()    &#125;&#125;</code></pre></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3 è¿ç®—ç¬¦</title>
      <link href="p/81c9ee28.html"/>
      <url>p/81c9ee28.html</url>
      
        <content type="html"><![CDATA[<h2 id="3-è¿ç®—ç¬¦"><a href="#3-è¿ç®—ç¬¦" class="headerlink" title="3 è¿ç®—ç¬¦"></a>3 è¿ç®—ç¬¦</h2><p>Go å†…ç½®è¿ç®—ç¬¦ï¼š</p><ul><li>ç®—æœ¯è¿ç®—ç¬¦</li><li>å…³ç³»è¿ç®—ç¬¦</li><li>é€»è¾‘è¿ç®—ç¬¦</li><li>ä½è¿ç®—ç¬¦</li><li>èµ‹å€¼è¿ç®—ç¬¦</li></ul><h3 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h3><table><thead><tr><th>è¿ç®—ç¬¦</th><th></th></tr></thead><tbody><tr><td>+</td><td>ç›¸åŠ </td></tr><tr><td>-</td><td>ç›¸å‡</td></tr><tr><td>*</td><td>ç›¸ä¹˜</td></tr><tr><td>/</td><td>ç›¸é™¤</td></tr><tr><td>%</td><td>æ±‚ä½™</td></tr></tbody></table><p>æ³¨æ„ï¼š<code>++</code>å’Œ<code>--</code>æ˜¯Goä¸­å•ç‹¬çš„è¯­å¥ï¼Œè€Œéè¿ç®—ç¬¦</p><h3 id="å…³ç³»è¿ç®—ç¬¦"><a href="#å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦"></a>å…³ç³»è¿ç®—ç¬¦</h3><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>==</td><td>æ˜¯å¦ç›¸ç­‰</td></tr><tr><td>ï¼=</td><td>æ˜¯å¦ä¸ç›¸ç­‰</td></tr><tr><td>&gt;</td><td>å·¦è¾¹å€¼æ˜¯å¦å¤§äºå³è¾¹å€¼</td></tr><tr><td>&gt;=</td><td>å·¦è¾¹å€¼æ˜¯å¦å¤§äºç­‰äºå³è¾¹å€¼</td></tr><tr><td>&lt;</td><td>å·¦è¾¹å€¼æ˜¯å¦å°äºå³è¾¹å€¼</td></tr><tr><td>&lt;=</td><td>å·¦è¾¹å€¼æ˜¯å¦å°äºç­‰äºå³è¾¹å€¼</td></tr></tbody></table><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><table><thead><tr><th align="left">è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td align="left">&amp;&amp;</td><td>é€»è¾‘ANDè¿ç®—ç¬¦</td></tr><tr><td align="left">||</td><td>é€»è¾‘ORè¿ç®—ç¬¦</td></tr><tr><td align="left">ï¼</td><td>é€»è¾‘NOTè¿ç®—ç¬¦</td></tr></tbody></table><h3 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h3><ul><li>ä½è¿ç®—ç¬¦ <strong>å¯¹æ•´æ•°åœ¨å†…å­˜ä¸­çš„äºŒè¿›åˆ¶ä½</strong> è¿›è¡Œæ“ä½œ</li></ul><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>&amp;</td><td>å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ ç›¸ä¸ï¼ˆä¸¤ä½å‡ä¸º1 æ‰ä¸º1ï¼‰</td></tr><tr><td>|</td><td>å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ ç›¸æˆ–ï¼ˆä¸¤ä½æœ‰ä¸€ä¸ªä¸º1 å°±ä¸º1ï¼‰</td></tr><tr><td>^</td><td>å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ ç›¸å¼‚æˆ–ï¼ˆä¸¤ä½ç›¸å¼‚ åˆ™ä¸º1ï¼‰</td></tr><tr><td>&lt;&lt;</td><td>å·¦ç§»nä½ï¼Œå³ä¹˜ä»¥<code>2^n</code></td></tr><tr><td>&gt;&gt;</td><td>å³ç§»nä½ï¼Œå³é™¤ä»¥<code>2^n</code></td></tr></tbody></table><h3 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a>èµ‹å€¼è¿ç®—ç¬¦</h3><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>=</td><td>å°†è¡¨è¾¾å¼çš„å€¼èµ‹ç»™ä¸€ä¸ªå·¦å€¼</td></tr><tr><td>+=</td><td>ç›¸åŠ ååœ¨èµ‹å€¼</td></tr><tr><td>-=</td><td></td></tr><tr><td>*=</td><td></td></tr><tr><td>/=</td><td></td></tr><tr><td>%=</td><td></td></tr><tr><td>&lt;&lt;=</td><td>å·¦ç§»åèµ‹å€¼</td></tr><tr><td>&gt;&gt;=</td><td>å³ç§»åèµ‹å€¼</td></tr><tr><td>&amp;=</td><td>æŒ‰ä½ä¸åèµ‹å€¼</td></tr><tr><td>|=</td><td>æŒ‰ä½æˆ–åèµ‹å€¼</td></tr><tr><td>^=</td><td>æŒ‰ä½å¼‚æˆ–åèµ‹å€¼</td></tr></tbody></table><h3 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><ul><li><p>æœ‰ä¸€å †æ•°å­—ï¼Œå¦‚æœé™¤äº†ä¸€ä¸ªæ•°å­—ä»¥å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°å‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼Ÿ</p></li><li><p>ç›®å‰èƒ½æƒ³åˆ°çš„æ˜¯æš´åŠ›éå†ï¼š<br>* </p></li></ul><h2 id="4-æµç¨‹æ§åˆ¶"><a href="#4-æµç¨‹æ§åˆ¶" class="headerlink" title="4 æµç¨‹æ§åˆ¶"></a>4 æµç¨‹æ§åˆ¶</h2><ul><li>æµç¨‹æ§åˆ¶æ˜¯æ¯ç§è¯­è¨€æ§åˆ¶é€»è¾‘èµ°å‘å’Œæ‰§è¡Œæ¬¡åºçš„é‡è¦éƒ¨åˆ†</li><li>Go ä¸­æœ‰<code>if</code> å’Œ <code>for</code>, è€Œ<code>switch</code> å’Œ <code>goto</code>ä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–ä»£ç ã€é™ä½é‡å¤ä»£ç è€Œç”Ÿï¼Œå±äºæ‰©å±•ç±»çš„æµç¨‹æ§åˆ¶</li></ul><h3 id="if-elseåˆ†æ”¯ç»“æ„"><a href="#if-elseåˆ†æ”¯ç»“æ„" class="headerlink" title="if elseåˆ†æ”¯ç»“æ„"></a>if elseåˆ†æ”¯ç»“æ„</h3><h4 id="if-æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•"><a href="#if-æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•" class="headerlink" title="if æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•"></a>if æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬å†™æ³•</h4><ul><li><p>if æ¡ä»¶åˆ¤æ–­æ ¼å¼</p><ul><li>```go<br>if expr1{<pre><code>block1</code></pre>}else if expr2{<pre><code>block2</code></pre>}else {<pre><code>block3</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * ==æ³¨æ„ï¼š==Go è§„å®šï¼Œ`if`çš„**å·¦æ‹¬å·**å¿…é¡»ä¸`if expr`æ”¾äºåŒä¸€è¡Œï¼›**å³æ‹¬å·å¿…é¡»ä¸ä¸‹ä¸€ä¸ªè¯­å¥åœ¨åŒä¸€è¡Œ**</span><br><span class="line"></span><br><span class="line">#### if æ¡ä»¶åˆ¤æ–­ç‰¹æ®Šå†™æ³•</span><br><span class="line"></span><br><span class="line">* å¯ä»¥åœ¨ if è¡¨è¾¾å¼å‰æ·»åŠ ä¸€ä¸ªæ‰§è¡Œè¯­å¥ï¼Œå†æ ¹æ®å˜é‡å€¼åˆ¤æ–­</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    package main</span><br><span class="line">    </span><br><span class="line">    import &quot;fmt&quot;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    </span><br><span class="line">    if score := 65; score &gt;= 90 &#123;</span><br><span class="line">    fmt.Println(&quot;A&quot;)</span><br><span class="line">    &#125; else if score &gt; 75 &#123;</span><br><span class="line">    fmt.Println(&quot;B&quot;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    fmt.Println(&quot;C&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ€è€ƒï¼šåŒºåˆ«å¯èƒ½å°±æ˜¯ä½œç”¨åŸŸä¸åŒ</p></li></ul><h3 id="for-å¾ªç¯ç»“æ„"><a href="#for-å¾ªç¯ç»“æ„" class="headerlink" title="for å¾ªç¯ç»“æ„"></a>for å¾ªç¯ç»“æ„</h3><ul><li><p>Go è¯­è¨€ä¸­çš„æ‰€æœ‰å¾ªç¯ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨å…³é”®å­— <code>for</code> å®Œæˆ</p></li><li><p>åŸºæœ¬æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for åˆå§‹è¯­å¥; å¾ªç¯æ¡ä»¶è¡¨è¾¾å¼; ç»“æŸè¯­å¥&#123;</span><br><span class="line">å¾ªç¯ä½“</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li><li><p>å½“<code>å¾ªç¯æ¡ä»¶è¡¨è¾¾å¼</code> ä¸º<code>true</code> æ—¶è¿›è¡Œå¾ªç¯ï¼Œç›´åˆ°ä¸º<code>false</code></p></li><li><p>for å¾ªç¯çš„ <code>åˆå§‹è¯­å¥</code> å¯ä»¥è¢«çœç•¥ï¼Œä½†æ˜¯<strong>åˆ†å·å¿…é¡»è¦å†™</strong></p><ul><li><code>for ;i&lt;10;i++</code></li></ul></li><li><p>for å¾ªç¯çš„åˆå§‹è¯­å¥å’Œç»“æŸè¯­å¥éƒ½å¯ä»¥è¢«çœç•¥, æ­¤æ—¶ä¸éœ€è¦åˆ†å·</p><ul><li>ç±»ä¼¼äºCä¸­çš„å…³é”®è¯<code>while</code></li><li><code>for i&lt;10 </code></li></ul></li></ul><h4 id="æ— é™å¾ªç¯"><a href="#æ— é™å¾ªç¯" class="headerlink" title="æ— é™å¾ªç¯"></a>æ— é™å¾ªç¯</h4><ul><li><p>```<br>for {</p><pre><code>å¾ªç¯ä½“</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* å¯ä»¥é€šè¿‡å…³é”®å­—`break` `goto` `return`  `panic`å¼ºåˆ¶é€€å‡ºå¾ªç¯</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### for range é”®å€¼å¾ªç¯</span><br><span class="line"></span><br><span class="line">* å¯ä»¥ä½¿ç”¨ `for range` éå† æ•°ç»„ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²ã€mapä»¥åŠé€šé“</span><br><span class="line">  * æ•°ç»„ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸² è¿”å› `ç´¢å¼•`å’Œ`å€¼`</span><br><span class="line">  * map è¿”å›`é”®`å’Œ`å€¼`</span><br><span class="line">  * é€šé“ åªè¿”å›`é€šé“å†…çš„å€¼`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### switch case</span><br><span class="line"></span><br><span class="line">* å¯¹å¤§é‡å€¼è¿›è¡Œæ¡ä»¶åˆ¤æ–­</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    i := 1</span><br><span class="line">    switch(i)&#123;</span><br><span class="line">    case 1:</span><br><span class="line">    block1</span><br><span class="line">    case 2:</span><br><span class="line">    block2</span><br><span class="line">    default :</span><br><span class="line">    block3</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>Go è§„å®šï¼Œåªèƒ½æœ‰ä¸€ä¸ª<code>default</code>åˆ†æ”¯</p></li><li><p>ä¸€ä¸ªåˆ†æ”¯å¯ä»¥æœ‰å¤šä¸ªå€¼ï¼Œå¤šä¸ªcaseå€¼ä½¿ç”¨é€—å·åˆ†å¼€</p></li><li><p><code>case 1, 3, 5:</code></p></li><li><p>åˆ†æ”¯å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼åˆ¤æ–­ï¼š</p><ul><li><code>case age&lt;25:</code></li></ul></li><li><p><code>fallthrough</code>è¯­æ³•å¯ä»¥æ‰§è¡Œæ»¡è¶³æ¡ä»¶çš„ case çš„ä¸‹ä¸€ä¸ª caseï¼Œä¸ºäº†å…¼å®¹ C ä¸­çš„case</p><ul><li>```go<br>func switchDemo5() {<pre><code> s := &quot;a&quot; switch &#123; case s == &quot;a&quot;:     fmt.Println(&quot;a&quot;)     fallthrough case s == &quot;b&quot;:     fmt.Println(&quot;b&quot;) case s == &quot;c&quot;:     fmt.Println(&quot;c&quot;) default:     fmt.Println(&quot;...&quot;) &#125;</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ```</span><br><span class="line">  a</span><br><span class="line">  b</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="goto-è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾"><a href="#goto-è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾" class="headerlink" title="goto è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾"></a>goto è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾</h3><ul><li><code>goto</code>é€šè¿‡æ ‡ç­¾è¿›è¡Œä»£ç é—´çš„æ— æ¡ä»¶è·³è½¬</li><li>å¯ä»¥åœ¨å¿«é€Ÿè·³å‡ºå¾ªç¯ã€é¿å…é‡å¤é€€å‡ºä¸Šæœ‰ä¸€å®šçš„å¸®åŠ©<br>* </li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gotoDemo2</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> j == <span class="number">2</span> &#123;</span><br><span class="line"><span class="comment">// è®¾ç½®é€€å‡ºæ ‡ç­¾</span></span><br><span class="line"><span class="keyword">goto</span> breakTag</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%v-%v\n&quot;</span>, i, j)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="comment">// æ ‡ç­¾</span></span><br><span class="line">breakTag:</span><br><span class="line">fmt.Println(<span class="string">&quot;ç»“æŸforå¾ªç¯&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="break-è·³å‡ºå¾ªç¯"><a href="#break-è·³å‡ºå¾ªç¯" class="headerlink" title="break è·³å‡ºå¾ªç¯"></a>break è·³å‡ºå¾ªç¯</h3><ul><li><p>ç»“æŸ<code>for</code>ã€<code>switch</code>ã€<code>select</code> çš„ä»£ç å—</p></li><li><p>å¯ä»¥åœ¨<code>break</code>è¯­å¥åé¢æ·»åŠ æ ‡ç­¾ï¼šé€€å‡ºæŸä¸ªæ ‡ç­¾å¯¹åº”çš„ä»£ç å—</p><ul><li><p>æ ‡ç­¾å¿…é¡»å®šä¹‰åœ¨å¯¹åº”çš„<code>for</code>ã€<code>switch</code>ã€<code>select</code> çš„ä»£ç å—ä¸Š</p><ul><li>```go<br>func breakDemo1() {<br>BREAKDEMO1:<pre><code>for i := 0; i &lt; 10; i++ &#123;    for j := 0; j &lt; 10; j++ &#123;        if j == 2 &#123;            break BREAKDEMO1        &#125;        fmt.Printf(&quot;%v-%v\n&quot;, i, j)    &#125;&#125;fmt.Println(&quot;...&quot;)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">### continue ç»§ç»­ä¸‹æ¬¡å¾ªç¯</span><br><span class="line"></span><br><span class="line">* continue è¯­å¥: ç»“æŸå½“å‰å¾ªç¯ï¼Œå¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œä»…é™åœ¨`for`å¾ªç¯å†…ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">* åœ¨`continue` è¯­å¥åæ·»åŠ æ ‡ç­¾æ—¶ï¼Œè¡¨ç¤ºå¼€å§‹æ ‡ç­¾å¯¹åº”çš„å¾ªç¯</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    func continueDemo() &#123;</span><br><span class="line">    forloop1:</span><br><span class="line">    for i := 0; i &lt; 5; i++ &#123;</span><br><span class="line">    // forloop2:</span><br><span class="line">    for j := 0; j &lt; 5; j++ &#123;</span><br><span class="line">    if i == 2 &amp;&amp; j == 2 &#123;</span><br><span class="line">    continue forloop1</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(&quot;%v-%v\n&quot;, i, j)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="ç»ƒä¹ é¢˜-1"><a href="#ç»ƒä¹ é¢˜-1" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><ul><li><p>ç¼–å†™ä»£ç æ‰“å° 99 ä¹˜æ³•è¡¨</p><ul><li><pre><code class="go">package mainimport &quot;fmt&quot;func main() &#123;    for i := 1; i &lt;= 10; i++ &#123;        for j := 1; j &lt;= 10; j++ &#123;            fmt.Printf(&quot;%d * %d = %d &quot;, i, j, i*j)        &#125;        fmt.Println()    &#125;&#125;</code></pre></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2 åŸºæœ¬æ•°æ®ç±»å‹</title>
      <link href="p/2fa3346a.html"/>
      <url>p/2fa3346a.html</url>
      
        <content type="html"><![CDATA[<h2 id="2-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#2-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="2 åŸºæœ¬æ•°æ®ç±»å‹"></a>2 åŸºæœ¬æ•°æ®ç±»å‹</h2><p>æ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹ã€å­—ç¬¦ä¸²</p><p>æ•°ç»„ã€åˆ‡ç‰‡ã€ç»“æ„ä½“ã€å‡½æ•°ã€mapã€é€šé“ç­‰</p><h3 id="2-1-æ•´å‹"><a href="#2-1-æ•´å‹" class="headerlink" title="2.1 æ•´å‹"></a>2.1 æ•´å‹</h3><p>åˆ†ä¸ºä¸¤ä¸ªå¤§ç±»ï¼š</p><ul><li><strong>é•¿åº¦</strong>ï¼š<code>int8</code>, <code>int16</code>, <code>int32</code>, <code>int64</code><ul><li><code>int16</code>: shortç±»å‹</li><li><code>int64</code>: long ç±»å‹</li></ul></li><li><strong>æ— ç¬¦å·</strong>ï¼š<code>uint8</code>ï¼Œ<code>uint16</code>, <code>uint32</code>, <code>uint64</code><ul><li><code>uint8</code>: <code>byte</code>å‹</li></ul></li></ul><h4 id="2-1-1-ç‰¹æ®Šæ•´å‹"><a href="#2-1-1-ç‰¹æ®Šæ•´å‹" class="headerlink" title="2.1.1 ç‰¹æ®Šæ•´å‹"></a>2.1.1 ç‰¹æ®Šæ•´å‹</h4><ul><li>ç‰¹æ®Šæ•´å‹<ul><li><code>uint</code>  : 32ä¸ºæ“ä½œç³»ç»Ÿä¸Šæ˜¯<code>uint32</code></li><li><code>int</code> : 32ä½æ“ä½œç³»ç»Ÿä¸Šæ˜¯<code>int32</code></li><li><code>uintptr</code> : æ— ç¬¦å·æ•´å‹ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ</li></ul></li><li>æ³¨æ„ï¼šä½¿ç”¨<code>int</code>å’Œ<code>uint</code>éœ€è¦è€ƒè™‘ä¸åŒå¹³å°çš„å·®å¼‚</li><li>æ³¨æ„ï¼šè·å–å¯¹è±¡çš„é•¿åº¦çš„å†…å»º<code>len()</code>å‡½æ•°ï¼Œè¿”å›çš„é•¿åº¦å¯ä»¥æ ¹æ®ä¸åŒçš„å¹³å°çš„å­—èŠ‚é•¿åº¦å˜åŒ–<ul><li>å®é™…ä½¿ç”¨ä¸­ï¼Œåˆ‡ç‰‡æˆ–mapå…ƒç´ æ•°é‡å¯ä»¥ç”¨<code>int</code>è¡¨ç¤º</li><li>æ¶‰åŠäºŒè¿›åˆ¶ä¼ è¾“ã€è¯»å†™æ–‡ä»¶çš„ç»“æ„æè¿°æ—¶ï¼Œä¸è¦ä½¿ç”¨<code>int</code>å’Œ<code>uint</code></li></ul></li></ul><h4 id="2-1-2-æ•°å­—å­—é¢é‡è¯­æ³•-Number-literals-syntax"><a href="#2-1-2-æ•°å­—å­—é¢é‡è¯­æ³•-Number-literals-syntax" class="headerlink" title="2.1.2 æ•°å­—å­—é¢é‡è¯­æ³•(Number literals syntax)"></a>2.1.2 æ•°å­—å­—é¢é‡è¯­æ³•(Number literals syntax)</h4><p>ä¾¿äºå¼€å‘è€…<strong>ä»¥äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶æµ®ç‚¹æ•°çš„æ ¼å¼</strong> <strong>å®šä¹‰</strong>æ•°å­—</p><ul><li><code>v := 0b001</code>: äºŒè¿›åˆ¶çš„<code>001</code></li><li><code>v := 0o77</code>: å…«è¿›åˆ¶çš„77</li><li><code>v := 0xff</code>: åå…­è¿›åˆ¶çš„ff</li></ul><p>å…è®¸ä½¿ç”¨<code>_</code>åˆ†éš”æ•°å­—ï¼š<code>v := 12_3</code></p><p>å…è®¸å¼€å‘è€…ä½¿ç”¨<strong>ç›¸åº”çš„å ä½ç¬¦</strong>ä»¥äºŒè¿›åˆ¶<code>%b</code>ã€å…«è¿›åˆ¶<code>%o</code>ã€åè¿›åˆ¶<code>%d</code>ã€åå…­è¿›åˆ¶<code>%x</code>è¾“å‡ºï¼š</p><ul><li>ç”±ä»¥ä¸Šä¸¤ä¸ªæ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»æ„è¿›åˆ¶æ•°å­— ä»¥ä»»æ„è¿›åˆ¶å½¢å¼è¾“å‡º</li></ul><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰</span></span><br><span class="line">    <span class="keyword">var</span> x <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">var</span> b <span class="keyword">int</span> = <span class="number">077</span></span><br><span class="line">    <span class="keyword">var</span> c <span class="keyword">int</span> = <span class="number">0xff</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¾“å‡º</span></span><br><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">15</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, a) <span class="comment">//ä»¥åè¿›åˆ¶å½¢å¼è¾“å‡º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%b\n&quot;</span>, a) <span class="comment">//ä»¥äºŒè¿›åˆ¶å½¢å¼è¾“å‡º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%o\n&quot;</span>, a) <span class="comment">//ä»¥å…«è¿›åˆ¶å½¢å¼è¾“å‡º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%x\n&quot;</span>, a) <span class="comment">//ä»¥åå…­è¿›åˆ¶å½¢å¼è¾“å‡º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h3><p>ä¸¤ç§æµ®ç‚¹å‹ï¼šéƒ½éµå¾ª<code>IEEE 754</code>æ ‡å‡†</p><ul><li><code>float32</code> : æœ€å¤§èŒƒå›´<code>3.4e38</code>, å¯ä½¿ç”¨å¸¸é‡å®šä¹‰ï¼š<code>math.MaxFloat32</code></li><li><code>float64</code>ï¼šæœ€å¤§èŒƒå›´<code>1.8e308</code> ,<code>math.MaxFloat64</code></li></ul><p>æ‰“å°æµ®ç‚¹æ•°ï¼Œä½¿ç”¨å ä½ç¬¦<code>%f</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%f\n&quot;</span>,math.Pi)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%.2f\n&quot;</span>,math.Pi)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤æ•°"><a href="#å¤æ•°" class="headerlink" title="å¤æ•°"></a>å¤æ•°</h3><p>ä¸¤ç§ï¼šéƒ½ç”± å®éƒ¨ä¸è™šéƒ¨ ç»„æˆå„å ä¸€åŠ</p><ul><li><code>complex64</code> : å®éƒ¨æœª 32 ä½ï¼Œè™šéƒ¨ä¸º 32 ä½</li><li><code>complex128</code></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c <span class="keyword">complex64</span> = <span class="number">1</span> + <span class="number">2i</span></span><br><span class="line">    fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸ƒå°”å‹"><a href="#å¸ƒå°”å‹" class="headerlink" title="å¸ƒå°”å‹"></a>å¸ƒå°”å‹</h3><p><code>bool</code> å‹ä¸¤ä¸ªå€¼ï¼š<code>true</code> ã€ <code>false</code></p><p>==æ³¨æ„ï¼š==</p><ul><li>é»˜è®¤å€¼ï¼š<code>false</code></li><li><strong>ä¸å…è®¸</strong>å°†æ•´å‹å¼ºåˆ¶è½¬æ¢ä¸ºbool</li><li>bool æ— æ³•å‚ä¸æ•°å€¼è¿ç®—ï¼Œæ— æ³•ä¸å…¶ä»–ç±»å‹è½¬æ¢</li></ul><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><p>Go ä¸­çš„å­—ç¬¦ä¸²ä»¥åŸç”Ÿæ•°æ®ç±»å‹å‡ºç°</p><ul><li>æ³¨æ„ï¼šGo è¯­è¨€çš„å­—ç¬¦ä¸²å†…éƒ¨å®ç°ä½¿ç”¨<code>UTF-8</code>ç¼–ç </li><li>å­—ç¬¦ä¸²çš„å€¼ä¸º åŒå¼•å· ä¸­çš„å†…å®¹</li><li>å¯ä»¥åœ¨Goçš„æºç ä¸­ç›´æ¥æ·»åŠ é<code>ASCII</code>ç å­—ç¬¦<ul><li><code>s1 := &quot;hello&quot;</code></li><li><code>s2 := &quot;ä½ å¥½&quot;</code></li></ul></li></ul><h4 id="å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦"><a href="#å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦" class="headerlink" title="å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦"></a>å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦</h4><table><thead><tr><th>è½¬ä¹‰ç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>\r</td><td>å›è½¦ç¬¦ï¼ˆè¿”å›è¡Œé¦–</td></tr><tr><td>\n</td><td>æ¢è¡Œç¬¦ï¼ˆç›´æ¥è·³åˆ°ä¸‹ä¸€è¡Œçš„åŒåˆ—ä½ç½®</td></tr><tr><td>\t</td><td>åˆ¶è¡¨ç¬¦</td></tr><tr><td><code>\&#39;</code></td><td>å•å¼•å·</td></tr><tr><td><code>\&quot;</code></td><td>åŒå¼•å·</td></tr><tr><td><code>\\</code></td><td>åæ–œæ ï¼Œä¾‹å¦‚æ–‡ä»¶è·¯å¾„</td></tr></tbody></table><h4 id="å¤šè¡Œå­—ç¬¦ä¸²"><a href="#å¤šè¡Œå­—ç¬¦ä¸²" class="headerlink" title="å¤šè¡Œå­—ç¬¦ä¸²"></a>å¤šè¡Œå­—ç¬¦ä¸²</h4><p>Go å®šä¹‰ä¸€ä¸ªå¤šè¡Œå­—ç¬¦ä¸²ï¼Œå¿…é¡»ä½¿ç”¨åå¼•å·` å­—ç¬¦ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">`line1</span></span><br><span class="line"><span class="string">lin2</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">fmt.Println(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ"><a href="#å­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ"></a>å­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ</h4><table><thead><tr><th align="left">æ–¹æ³•</th><th align="center">ä»‹ç»</th></tr></thead><tbody><tr><td align="left">len(str)</td><td align="center">æ±‚é•¿åº¦</td></tr><tr><td align="left"><code>+</code> æˆ–è€… fmt.Sprintf</td><td align="center">æ‹¼æ¥å­—ç¬¦ä¸²</td></tr><tr><td align="left">strings.Split</td><td align="center">åˆ†å‰²</td></tr><tr><td align="left">strings.contains</td><td align="center">åˆ¤æ–­æ˜¯å¦åŒ…å«</td></tr><tr><td align="left">strings.HasPrefix, strings.HasSuffix</td><td align="center">å‰ç¼€/åç¼€åˆ¤æ–­</td></tr><tr><td align="left">strings.Index(), strings.LastIndex()</td><td align="center">å­—ä¸²å‡ºç°çš„ä½ç½®</td></tr><tr><td align="left">strings.Join(a[]stirng, sep string)</td><td align="center">joinæ“ä½œ</td></tr></tbody></table><h3 id="byte-å’Œ-rune-ç±»å‹"><a href="#byte-å’Œ-rune-ç±»å‹" class="headerlink" title="byte å’Œ rune ç±»å‹"></a>byte å’Œ rune ç±»å‹</h3><p><strong>å­—ç¬¦ä¸²çš„æ¯ä¸ªå…ƒç´ </strong>æ˜¯ å­—ç¬¦ ï¼Œå­—ç¬¦ç”¨å•å¼•å·åŒ…è£¹</p><p>å¯ä»¥é€šè¿‡ <strong>éå†</strong> æˆ– <strong>å•ä¸ªè·å–å­—ç¬¦ä¸²å…ƒç´ </strong> è·å¾—å­—ç¬¦</p><p>Go çš„å­—ç¬¦ æœ‰<strong>ä¸¤ç§</strong>ï¼š</p><ul><li><p><code>uint8</code>, æˆ–å«<code>byte</code>å‹ï¼Œä»£è¡¨<code>ASCII</code>ç çš„ä¸€ä¸ªå­—ç¬¦</p></li><li><p><code>int32</code>, æˆ–å«<code>rune</code>ç±»å‹ï¼Œä»£è¡¨ä¸€ä¸ª<code>UTF-8</code>ç çš„ä¸€ä¸ªå­—ç¬¦</p></li><li></li><li><p>å¤„ç†ä¸­æ–‡ã€æ—¥æ–‡æˆ–è€…å…¶ä»–ç¬¦åˆå­—ç¬¦ï¼šç”¨åˆ°<code>rune</code>ç±»å‹ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ª<code>int32</code></p></li><li><p>Go ä½¿ç”¨ç‰¹æ®Šçš„ rune ç±»å‹å¤„ç† Unicodeï¼Œè®©åŸºäºUnicodeçš„æ–‡æœ¬å¤„ç†æ›´æ–¹ä¾¿ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨byteå‹è¿›è¡Œé»˜è®¤å­—ç¬¦ä¸²å¤„ç†ï¼Œæ€§èƒ½å’Œæ‰©å±•æ€§éƒ½æœ‰ç…§é¡¾ï¼š</p><ul><li><p>ç¤ºä¾‹ï¼š</p></li><li><p>```Go<br>package main</p><p>import â€œfmtâ€</p><p>func main() {</p><pre><code>s := &quot;hello, ä¸–ç•Œ&quot;//bytefor i := 0; i &lt; len(s); i++ &#123;    fmt.Printf(&quot;%v %c\n&quot;, s[i], s[i])&#125;//runefor _, r := range s &#123;    fmt.Printf(&quot;%v %c\n&quot;, r, r)&#125;</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* è¾“å‡ºï¼š</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>104 h<br>101 e<br>108 l<br>108 l<br>111 o<br>44 ,<br>32<br>228 Ã¤<br>184 Â¸<br>150 Â–<br>231 Ã§<br>149 Â•<br>140 ÂŒ<br>104 h<br>101 e<br>108 l<br>108 l<br>111 o<br>44 ,<br>32<br>19990 ä¸–<br>30028 ç•Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ==æ³¨æ„ï¼š==</span><br><span class="line"></span><br><span class="line">  * `UTF-8` ç¼–ç ä¸‹ ä¸€ä¸ªæ±‰å­—ï¼Œç”±ä¸‰è‡³å››ä¸ªå­—èŠ‚ç»„æˆï¼Œæ‰€ä»¥ä¸èƒ½ç®€å•æŒ‰ç…§å­—èŠ‚å»éå† ä¸€ä¸ªåŒ…å«æ±‰å­çš„å­—ç¬¦ä¸²</span><br><span class="line">    * rune ç”¨æ¥è¡¨ç¤º`UTF-8`å­—ç¬¦ï¼Œä¸€ä¸ªrune å­—ç¬¦ç”±ä¸€ä¸ªæˆ–å¤šä¸ªbyteç»„æˆ</span><br><span class="line">  * ==å­—ç¬¦ä¸²åº•å±‚==ï¼šä¸€ä¸ª`byte`æ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥å’Œ`[]byte`ç±»å‹ç›¸äº’è½¬æ¢</span><br><span class="line">  * å­—ç¬¦ä¸²æ˜¯==ä¸èƒ½ ç›´æ¥ä¿®æ”¹== çš„</span><br><span class="line">  * ==å­—ç¬¦ä¸²é•¿åº¦==ï¼š`byte`æ•°ç»„çš„é•¿åº¦</span><br><span class="line"></span><br><span class="line">* `for _,r := range s`</span><br><span class="line"></span><br><span class="line">  * </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### ä¿®æ”¹å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">* éœ€è¦å°†å­—ç¬¦ä¸²è½¬æ¢æˆ`[]rune`æˆ–`[]byte`</span><br><span class="line"></span><br><span class="line">  * åœ¨è½¬æ¢æˆ`string`</span><br><span class="line"></span><br><span class="line">* è½¬æ¢ï¼Œéƒ½ä¼šé‡æ–°åˆ†é…å†…å­˜ï¼Œå¹¶å¤åˆ¶å­—èŠ‚æ•°ç»„</span><br><span class="line"></span><br><span class="line">* ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">  * ```go</span><br><span class="line">    package main</span><br><span class="line">    </span><br><span class="line">    import &quot;fmt&quot;</span><br><span class="line">    </span><br><span class="line">    func main() &#123;</span><br><span class="line">    s := &quot;hello world&quot;</span><br><span class="line">    </span><br><span class="line">    //å¼ºåˆ¶ç±»å‹è½¬æ¢</span><br><span class="line">    bytes := []byte(s)</span><br><span class="line">    bytes[0] = &#x27;p&#x27;</span><br><span class="line">    fmt.Println(string(bytes))</span><br><span class="line">    </span><br><span class="line">    s2 := &quot;ä½ å¥½ï¼Œä¸–ç•Œ&quot;</span><br><span class="line">    runes2 := []rune(s2)</span><br><span class="line">    runes2[0] = &#x27;æˆ‘&#x27;</span><br><span class="line">    fmt.Println(string(runes2))</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li></ul><p>`</p></li></ul><h3 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h3><p>Go ä¸­åªæœ‰ å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ—  éšå¼ç±»å‹è½¬æ¢</p><p>åªåœ¨ä¸¤ä¸ªç±»å‹ä¹‹é—´æ”¯æŒç›¸äº’è½¬æ¢çš„æ—¶å€™ä½¿ç”¨</p><ul><li><p>è¯­æ³•ï¼š<code>T(expression)</code></p><ul><li>T: è¦è½¬æ¢çš„çš„ç±»å‹</li><li>è¡¨è¾¾å¼ï¼šåŒ…æ‹¬å˜é‡ã€å¤æ‚ç®—å­ã€å‡½æ•°è¿”å›å€¼ç­‰</li></ul></li><li><p>Sqrt æ‰€æ¥å—çš„å‚æ•°æ˜¯<code>float64</code>ç±»å‹</p></li><li><p>ç¤ºä¾‹ï¼š</p><ul><li>```go<br>package mainimport (<pre><code>&quot;fmt&quot;&quot;math&quot;</code></pre>)func main() {<pre><code>var a, b = 3, 4var c intc = int(math.Sqrt(float64(a*a + b*b)))fmt.Println(c)</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">### ç»ƒä¹ é¢˜</span><br><span class="line"></span><br><span class="line">#### ç»ƒä¹ ä¸€</span><br><span class="line"></span><br><span class="line">* ç¼–å†™ä»£ç åˆ†åˆ«å®šä¹‰ä¸€ä¸ªæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹ã€å­—ç¬¦ä¸²å‹å˜é‡ï¼Œä½¿ç”¨`fmt.Printf()`æ­é…`%T`åˆ†åˆ«æ‰“å°å‡ºä¸Šè¿°å˜é‡çš„å€¼å’Œç±»å‹</span><br><span class="line"></span><br><span class="line">* ```Go</span><br><span class="line">  package main</span><br><span class="line">  </span><br><span class="line">  import &quot;fmt&quot;</span><br><span class="line">  </span><br><span class="line">  func main() &#123;</span><br><span class="line">  s := &quot;hello&quot;</span><br><span class="line">  i := 10</span><br><span class="line">  f := 3.14</span><br><span class="line">  var b bool = true</span><br><span class="line">  fmt.Printf(&quot;%s %T\n&quot;, s, s)</span><br><span class="line">  fmt.Printf(&quot;%d %T\n&quot;, i, i)</span><br><span class="line">  fmt.Printf(&quot;%f %T\n&quot;, f, f)</span><br><span class="line">  fmt.Printf(&quot;%t %T\n&quot;, b, b)\\bool çš„å ä½ç¬¦ï¼š`%t`</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="ç»ƒä¹ äºŒ"><a href="#ç»ƒä¹ äºŒ" class="headerlink" title="ç»ƒä¹ äºŒ"></a>ç»ƒä¹ äºŒ</h4><ul><li><p>ç¼–å†™ä»£ç ç»Ÿè®¡å‡ºå­—ç¬¦ä¸²<code>&quot;helloæ²™æ²³å°ç‹å­&quot;</code>ä¸­æ±‰å­—çš„æ•°é‡ã€‚</p></li><li><pre><code class="go">package mainimport &quot;fmt&quot;func main() &#123;    s := &quot;helloæ²™æ²³å°ç‹å­&quot;    count := 0    for _, i := range s &#123;            //range        if len(string(i)) &gt; 1 &#123;        //            count++        &#125;    &#125;    fmt.Println(count)&#125;</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1 å˜é‡å’Œå¸¸é‡</title>
      <link href="p/1b6782a7.html"/>
      <url>p/1b6782a7.html</url>
      
        <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title=""></a></h1><h2 id="1-å˜é‡å’Œå¸¸é‡"><a href="#1-å˜é‡å’Œå¸¸é‡" class="headerlink" title="1 å˜é‡å’Œå¸¸é‡"></a>1 å˜é‡å’Œå¸¸é‡</h2>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> ç¼–ç¨‹è¯­è¨€å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> The Go Programming Language </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo LearningNote</title>
      <link href="p/e9b15daf.html"/>
      <url>p/e9b15daf.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-åšå®¢"><a href="#Hexo-åšå®¢" class="headerlink" title="Hexo åšå®¢"></a>Hexo åšå®¢</h1><p><a href="https://io-oi.me/tech/hexo-next-optimization/">æœ€å…¨è¯¦ç»†ï¼ˆğŸ—¡ï¼‰</a></p><p><a href="https://blog.csdn.net/gdutxiaoxu/article/details/53576018?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161853970416780255223015%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=161853970416780255223015&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-53576018.first_rank_v2_pc_rank_v29&utm_term=Hexo+Github">å‚è€ƒåšå®¢</a></p><h1 id="ç¯å¢ƒæ­å»ºçš„å‡†å¤‡"><a href="#ç¯å¢ƒæ­å»ºçš„å‡†å¤‡" class="headerlink" title="ç¯å¢ƒæ­å»ºçš„å‡†å¤‡"></a>ç¯å¢ƒæ­å»ºçš„å‡†å¤‡</h1><ul><li><p><strong>Node.js çš„å®‰è£…å’Œå‡†å¤‡</strong></p><ul><li><img src="C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416102842874.png" alt="image-20210416102842874"></li></ul></li><li><p>å…³äº<code>Node.js</code>å’Œ<code>npm</code>çš„ä»‹ç»: <a href="https://www.cnblogs.com/duanweishi/p/7729292.html">å‚è€ƒåšå®¢</a></p><ul><li><p>npm æ˜¯ javascript çš„<strong>åŒ…ç®¡ç†å·¥å…·</strong></p></li><li><p>npm ä¸ Node.js ä¸€èµ·å‘å¸ƒ</p><ul><li>npm æ›´æ–°é¢‘ç‡å¿«ï¼Œéœ€å•ç‹¬æ›´æ–°npm<code>npm install npm@latest -g</code></li></ul></li><li><p><strong>å®‰è£…åŒ…</strong>ï¼šå®‰è£…å¯¹åº”çš„åŒ…è‡³å½“å‰ç›®å½•ï¼Œå¹¶åˆ›å»º<code>node_modules</code>æ–‡ä»¶ï¼Œä¸‹è½½åŒ…è¿›å»</p><ul><li><code>npm install &lt;package_name</code></li></ul></li><li><p><strong><code>package.json</code>:</strong></p><ul><li>å¯ä»¥çŸ¥é“é¡¹ç›®ä¸­ç”¨äº†ä»€ä¹ˆåŒ…</li><li>åŸºæœ¬çš„<code>package.json</code>æ–‡ä»¶ï¼šè‡³å°‘åŒ…å«<ul><li>åŒ…å name</li><li>ç‰ˆæœ¬ä¿¡æ¯ version</li></ul></li></ul></li><li><p><strong>åˆ›å»º <code>package.json</code></strong></p><ul><li><code>npm init</code> : åˆå§‹åŒ–<code>package.json</code>æ–‡ä»¶<ul><li>è¿è¡Œåï¼Œå¦‚å®å›ç­”åŸºæœ¬ä¿¡æ¯</li></ul></li><li>ä¸»è¦å­—æ®µå«ä¹‰ï¼š<ul><li>name : æ¨¡å—åï¼Œ</li><li>version: æ¨¡å—ç‰ˆæœ¬ä¿¡æ¯</li><li>description:å…³äºæ¨¡å—åŠŸèƒ½ç®€å•æè¿°ï¼Œè‹¥ä¸ºç©ºï¼Œé»˜è®¤è‘±å½“å‰ç›®å½•çš„<code>README.md</code>æˆ–è€…<code>README</code>è¯»å–ç¬¬ä¸€è¡Œä½œä¸ºé»˜è®¤å€¼</li><li>main : æ¨¡å—è¢«å¼•å…¥åï¼Œé¦–å…ˆåŠ è½½çš„æ–‡ä»¶ï¼Œé»˜è®¤ä¸º<code>index.js</code></li><li>scripts : å®šä¹‰ä¸€äº›å¸¸ç”¨å‘½ä»¤å…¥å£</li></ul></li><li>npm å¯ä»¥è¿›è¡Œç®€å•é…ç½®å¸¸ç”¨ä¿¡æ¯<ul><li><code>npm set init.author.email &quot;2638779206@qq.com&quot;</code></li><li><code>npm set init.author.name &quot;zihao&quot;</code> </li><li><code>npm set init.license &quot;XDU&quot;</code></li></ul></li></ul></li><li><p><strong>å®‰è£…æ¨¡å—</strong></p><ul><li><code>npm install</code> ä¼šè¯»å–<code>package.json</code>ä»¥å®‰è£…æ¨¡å—<ul><li>å®‰è£…çš„æ¨¡å—åˆ†ä¸ºä¸¤ç±»: ç”Ÿäº§ç¯å¢ƒéœ€è¦çš„å®‰è£…åŒ…<code>dependencies</code>.ï¼Œ å¼€å‘ç¯å¢ƒéœ€è¦çš„å®‰è£…åŒ…<code>devDependencies</code></li></ul></li><li>åœ¨å®‰è£…æ¨¡å—æ—¶ï¼Œä¿®æ”¹<code>package.json</code><ul><li><code>npm install &lt;packagename&gt; --save</code></li></ul></li></ul></li><li><p><strong>é…ç½®npmæºï¼š</strong></p><ul><li><p>é…ç½®å›½å†…é•œåƒåŠ å¿«ä¸‹è½½é€Ÿåº¦</p></li><li><p>ä¸´æ—¶ä½¿ç”¨ </p><ul><li>é€šè¿‡<code>--registry</code>: <code>npm install express --registry https://registry.npm.taobao.org</code></li></ul></li><li><p>å…¨å±€ä½¿ç”¨ï¼š</p><ul><li>```bash<br>config set registry <a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a><br>  // é…ç½®åå¯é€šè¿‡ä¸‹é¢æ–¹å¼æ¥éªŒè¯æ˜¯å¦æˆåŠŸ<br>  npm config get registry<br>  // æˆ–<br>  npm info express<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* **git çš„å®‰è£…å’Œå‡†å¤‡**</span><br><span class="line">  * ![image-20210416102902488](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416102902488.png)</span><br><span class="line">* **Githubè´¦æˆ·çš„é…ç½®**</span><br><span class="line">  * ä½¿ç”¨äº†ä½›è·³å¢™VPNï¼Œè§£å†³äº†åŠ è½½Githubæ…¢çš„é—®é¢˜</span><br><span class="line">  * æ³¨å†Œ</span><br><span class="line">  * åˆ›å»ºä»£ç åº“</span><br><span class="line">  * ä»£ç åº“è®¾ç½®</span><br><span class="line">    * `Setting`</span><br><span class="line">    * `Pages`</span><br><span class="line">    * `Automatic page generator`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å®‰è£… Hexo</span><br><span class="line"></span><br><span class="line">* åˆ›å»º`Hexo` ç›®å½•</span><br><span class="line">* `gitbash` è¯¥ç›®å½•ï¼š</span><br><span class="line">  * `npm install hexo-cli -g` ï¼š </span><br><span class="line">    * hexo æœ¬èº«æ˜¯ä¸€ä¸ªé™æ€åšå®¢ç”Ÿæˆå·¥å…·ï¼Œå…·å¤‡ç¼–è¯‘markdownã€å‡­å€Ÿä¸»é¢˜æ¨¡æ¿ã€ç”ŸæˆHTMLã€ä¸Šä¼ Gtiç­‰åŸºæœ¬åŠŸèƒ½ï¼Œ`hexo-cli`å°†è¿™äº›åŠŸèƒ½å°è£…ä¸ºå‘½ä»¤ï¼Œæä¾›ç»™ç”¨æˆ·é€šè¿‡`hexo s`ç­‰å‘½ä»¤è°ƒç”¨çš„æ¨¡å—</span><br><span class="line">    * problem:![image-20210416110241054](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110241054.png)</span><br><span class="line">    * solution ï¼š[åšå®¢](https://blog.csdn.net/m0_46256147/article/details/104725439)</span><br><span class="line">  * `npm install hexo --save`</span><br><span class="line">    * problem :![image-20210416110617131](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110617131.png)</span><br><span class="line">    * solution [å‚è€ƒåšå®¢](![image-20210416110631231](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110631231.png))</span><br><span class="line">    * problem ![image-20210416110804200](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416110804200.png)</span><br><span class="line">    * solution [å‚è€ƒ](https://blog.csdn.net/JZevin/article/details/107865683)</span><br><span class="line">    * problem ![image-20210416113337859](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416113337859.png)</span><br><span class="line">    * solution : [å‚è€ƒ](https://blog.csdn.net/weixin_42677762/article/details/112554832?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&amp;spm=1001.2101.3001.4242)</span><br><span class="line">  * `hexo -v` æ£€æŸ¥æ˜¯å¦å®‰è£…å¥½</span><br><span class="line">    * ![image-20210416113525387](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416113525387.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ç›¸å…³é…ç½®</span><br><span class="line"></span><br><span class="line">è¿›è¡Œæœ¬åœ°çš„é…ç½®</span><br><span class="line"></span><br><span class="line">* **åˆå§‹åŒ– Hexo**</span><br><span class="line"></span><br><span class="line">  * `hexo init`</span><br><span class="line"></span><br><span class="line">    * problem : ![image-20210416113819617](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416113819617.png)</span><br><span class="line"></span><br><span class="line">      * è¯¥åšå®¢è¯´æ¥ç€ä¸Šé¢çš„æ“ä½œï¼Œä½†æ˜¯ä¸Šé¢çš„æ“ä½œåˆ›å»ºäº†jsonæ–‡ä»¶ç­‰ï¼Œä¸æ˜¯ç©ºçš„ï¼Œæ˜¯å¦å¯ä»¥ç›´æ¥åœ¨è¯¥ç›®å½•ä¸‹åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Ÿ</span><br><span class="line"></span><br><span class="line">    * problem : åˆ›å»ºæ–°æ–‡ä»¶å¤¹åï¼š`hexo init`</span><br><span class="line"></span><br><span class="line">      * ![image-20210416114034172](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416114034172.png)</span><br><span class="line"></span><br><span class="line">        `fatal: unable to access &#x27;https://github.com/hexojs/hexo-starter.git/&#x27;: Failed to connect to github.com port 443: Timed out`</span><br><span class="line"></span><br><span class="line">      * solution : [å‚è€ƒåšå®¢](https://blog.csdn.net/weixin_44041700/article/details/115599817)</span><br><span class="line"></span><br><span class="line">        * æœçœŸæ˜¯ç½‘ç»œçš„é—®é¢˜ï¼Œå†æŸ¥æŸ¥çœ‹å®Œæ­¤åšå®¢åï¼Œå†æ¬¡è¾“å…¥`hexo init` </span><br><span class="line">        * ![image-20210416115639944](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416115639944.png)</span><br><span class="line"></span><br><span class="line">      * ä½†æ˜¯å¾ˆæ…¢</span><br><span class="line"></span><br><span class="line">        * å¯ä»¥åˆ‡æ¢npmæºè‡³æ·˜å®æºåŠ é€Ÿï¼š</span><br><span class="line">          * `npm install express --registry https://registry.npm.taobao.org`</span><br><span class="line">        * åŠåˆ†é’Ÿå°±å¥½ï¼š</span><br><span class="line">          * ![image-20210416121021641](C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210416121021641.png)</span><br><span class="line"></span><br><span class="line">  * `npm install`è‡ªåŠ¨å®‰è£…ç»„ä»¶</span><br><span class="line"></span><br><span class="line">    * æ— æŠ¥é”™</span><br><span class="line"></span><br><span class="line">* **é¦–æ¬¡ä½“éªŒhexo**</span><br><span class="line"></span><br><span class="line">  * `hexo g`ï¼šgenerate ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶è‡³ public æ–‡ä»¶å¤¹</span><br><span class="line">    * ä¾¿äºæŸ¥çœ‹ç½‘ç«™ç”Ÿæˆçš„é™æ€æ–‡ä»¶æˆ–è€…æ‰‹åŠ¨éƒ¨ç½²ç½‘ç«™</span><br><span class="line">  * `hexo s`ï¼šserver å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œç”¨äºé¢„è§ˆä¸»é¢˜</span><br><span class="line">    * é»˜è®¤åœ°å€ : http://localhost:4000/</span><br><span class="line">    * é¢„è§ˆçš„åŒæ—¶å¯ä»¥ä¿®æ”¹æ–‡ç« å†…å®¹æˆ–ä¸»é¢˜ä»£ç ï¼Œä¿å­˜ååˆ·æ–°é¡µé¢å³å¯</span><br><span class="line">    * å¯¹ Hexo æ ¹ç›®å½• `_config.yml` çš„ä¿®æ”¹ï¼Œéœ€è¦é‡å¯æœ¬åœ°æœåŠ¡å™¨åæ‰èƒ½é¢„è§ˆæ•ˆæœ</span><br><span class="line">  * `hexo new&quot;å­¦ä¹ ç¬”è®° ä¸€&quot; `</span><br><span class="line">    * æ–°å»ºæ ‡é¢˜ä¸ºçš„æ–‡ç« </span><br><span class="line">    * æ–‡ç« æ ‡é¢˜å¯åœ¨å¯¹åº”çš„mdæ–‡ä»¶æ”¹</span><br><span class="line">  * `hexo d `deploy</span><br><span class="line">    * è‡ªåŠ¨ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶ï¼Œå¹¶éƒ¨ç½²åˆ°è®¾å®šçš„ä»“åº“</span><br><span class="line">  * `hexo clean`</span><br><span class="line">    * æ¸…é™¤ç¼“å­˜æ–‡ä»¶ `db.json` å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶`public`</span><br><span class="line"></span><br><span class="line"># å°† hexo ä¸ github page è”ç³»èµ·æ¥</span><br><span class="line"></span><br><span class="line">* **é…ç½® git ä¸ªäººä¿¡æ¯**</span><br><span class="line"></span><br><span class="line">  * è®¾ç½® GIT çš„ user name å’Œ email</span><br><span class="line"></span><br><span class="line">    * ```bash</span><br><span class="line">      git config --global user.name &quot;ZiHao256&quot;</span><br><span class="line">      git config --global user.email &quot;2638779206@qq.com&quot;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>ç”Ÿæˆå¯†é’¥</p><ul><li>```bash<br> ssh-keygen -t rsa -C â€œ<a href="mailto:&#x32;&#x36;&#51;&#56;&#x37;&#x37;&#x39;&#50;&#x30;&#x36;&#64;&#x71;&#113;&#x2e;&#x63;&#x6f;&#109;">&#x32;&#x36;&#51;&#56;&#x37;&#x37;&#x39;&#50;&#x30;&#x36;&#64;&#x71;&#113;&#x2e;&#x63;&#x6f;&#109;</a>â€œ<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">* **é…ç½® Deployment**</span><br><span class="line"></span><br><span class="line">  * åœ¨`_config.yml`æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°Deploymentï¼š</span><br><span class="line"></span><br><span class="line">    * ```bash</span><br><span class="line">      deploy:</span><br><span class="line">        type: git</span><br><span class="line">        repo: git@github.com:ZiHao256/ZiHao256.github.io.git</span><br><span class="line">        branch: master</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h1 id="å†™åšå®¢ã€å‘å¸ƒæ–‡ç« "><a href="#å†™åšå®¢ã€å‘å¸ƒæ–‡ç« " class="headerlink" title="å†™åšå®¢ã€å‘å¸ƒæ–‡ç« "></a>å†™åšå®¢ã€å‘å¸ƒæ–‡ç« </h1><ul><li><p>æ–°å»ºä¸€ç¯‡åšå®¢</p><ul><li><code>hexo new post &quot;title&quot;</code></li><li>å¯åœ¨<code>source\_posts</code> ä¸­çœ‹åˆ°<code>title.md</code>æ–‡ä»¶</li></ul></li><li><p>æ–°å»ºå¥½åï¼Œä¿®æ”¹mdæ–‡ä»¶</p></li><li><p>è¿è¡Œç”Ÿæˆã€éƒ¨ç½²æ–‡ç« ï¼š</p><ul><li><p>ç”Ÿæˆï¼š<code>hexo g</code></p></li><li><p>éƒ¨ç½²ï¼š<code>hexo d</code></p><ul><li><p>problem 1 : </p><p>![image-20210416124223198](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416124223198.png)</p></li><li><p>solution : æœªå®‰è£…<code>hexo-deployer-git</code>æ’ä»¶ï¼Œåœ¨<strong>ç«™ç‚¹ç›®å½•</strong>(hexo init ç›®å½•)è¾“å…¥<code>npm install hexo-deployer-git --save</code></p></li><li><p><a href="https://blog.csdn.net/qq_21808961/article/details/84476504">å‚è€ƒåšå®¢</a></p></li><li><p>problem 2:</p><p>![image-20210416125451770](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416125451770.png) solution:    <code>Please make sure you have the correct access rights and the repository exist</code>: ç¡®ä¿æ‚¨å…·æœ‰æ­£ç¡®çš„è®¿é—®æƒé™å¹¶ä¸”å­˜å‚¨åº“å­˜åœ¨</p><p>åŸå› ï¼šå…¬é’¥å‡ºç°é—®é¢˜</p><p><a href="https://blog.csdn.net/qq_43705131/article/details/107965888">å‚è€ƒåšå®¢</a></p><ol><li>åˆ é™¤.sshæ–‡ä»¶</li><li>é‡æ–°è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±</li><li>é‡æ–°ç”Ÿæˆsshå…¬é’¥</li><li>é…ç½®github</li></ol></li></ul></li><li><p>æˆ–ç›´æ¥åœ¨éƒ¨ç½²å‰ç”Ÿæˆï¼š</p><ul><li><code>hexo d -g #åœ¨éƒ¨ç½²å‰å…ˆç”Ÿæˆ</code></li></ul></li></ul></li><li><p>éƒ¨ç½²æˆåŠŸåï¼Œåœ¨<code>https://ZiHao256.github.io</code>çœ‹åˆ°ç”Ÿæˆçš„æ–‡ç« </p></li></ul><h1 id="ä¸»é¢˜æ¨è"><a href="#ä¸»é¢˜æ¨è" class="headerlink" title="ä¸»é¢˜æ¨è"></a>ä¸»é¢˜æ¨è</h1><ul><li>ä¸»é¢˜é…ç½®æ–‡ä»¶åœ¨<code>_config.yml</code></li></ul><h2 id="NexTä¸»é¢˜é…ç½®"><a href="#NexTä¸»é¢˜é…ç½®" class="headerlink" title="NexTä¸»é¢˜é…ç½®"></a>NexTä¸»é¢˜é…ç½®</h2><ul><li>ç®€æ´ç¾è§‚</li><li>æ”¯æŒä¸åŒé£æ ¼</li><li>æä¾›å®Œå–„é…ç½®è¯´æ˜</li><li>Hexo ä¸¤ä»½ä¸»è¦é…ç½®æ–‡ä»¶ï¼šåç§°éƒ½æ˜¯<code>_config.yml</code><ul><li><strong>ç«™ç‚¹é…ç½®æ–‡ä»¶</strong>ç«™ç‚¹æ ¹ç›®å½•ä¸‹ ï¼šHexo æœ¬èº«çš„é…ç½®</li><li><strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong>ä¸»é¢˜ç›®å½•ä¸‹ ï¼šç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³é€‰é¡¹</li></ul></li></ul><h3 id="1-å®‰è£…NexT"><a href="#1-å®‰è£…NexT" class="headerlink" title="1 å®‰è£…NexT"></a>1 å®‰è£…NexT</h3><ul><li>åªéœ€è¦å°†ä¸»é¢˜æ–‡ä»¶æ‹·è´è‡³ <code>themes</code> ç›®å½•ä¸‹ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶</li><li>è‹¥ç†Ÿæ‚‰ git ï¼Œå»ºè®®ä½¿ç”¨ å…‹éš†æœ€æ–°ç‰ˆæœ¬çš„æ–¹å¼ï¼Œä¹‹åæ›´æ–°å¯ä»¥ä½¿ç”¨ <code>git pull</code> å¿«é€Ÿæ›´æ–°</li><li>å®šä½è‡³Hexo ç«™ç‚¹ç›®å½• <code>cd è‡³ç«™ç‚¹ç›®å½•æ–‡ä»¶</code></li><li>ä½¿ç”¨git checkout <code>git clone https://github.com/iissnan/hexo-theme-next themes/next</code><ul><li><strong>problem</strong> : git clone å¾ˆæ…¢</li><li><strong>solution</strong>  : ä½¿ç”¨å›½å†…é•œåƒç½‘ç«™:<code>github.com.cnpnjs.org</code><ul><li>å°†å‘½ä»¤ä¸­çš„<code>github.com</code>æ¢æˆè¿™ä¸ª</li><li>æ•ˆæœæ‹”ç¾¤</li></ul></li></ul></li></ul><h3 id="2-å¯ç”¨ä¸»é¢˜"><a href="#2-å¯ç”¨ä¸»é¢˜" class="headerlink" title="2 å¯ç”¨ä¸»é¢˜"></a>2 å¯ç”¨ä¸»é¢˜</h3><ul><li>å½“ å…‹éš†/ä¸‹è½½ è‡³<code>themes</code>ä¸‹åï¼Œæ‰“å¼€ <strong>ç«™ç‚¹é…ç½®æ–‡ä»¶</strong>ï¼Œæ‰¾åˆ° <strong>theme</strong> å­—æ®µï¼Œå°†å…¶å€¼æ”¹ä¸º<strong>ä¸»é¢˜å</strong></li><li>éªŒè¯æ˜¯å¦å¯ç”¨æˆåŠŸä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨<code>hexo clean</code>æ¸…é™¤ç¼“å­˜</li></ul><h3 id="3-éªŒè¯ä¸»é¢˜"><a href="#3-éªŒè¯ä¸»é¢˜" class="headerlink" title="3 éªŒè¯ä¸»é¢˜"></a>3 éªŒè¯ä¸»é¢˜</h3><ul><li>é¦–å…ˆï¼Œ<code>hexo g</code>ç”Ÿæˆé™æ€æ–‡ä»¶</li><li>å…¶æ¬¡ï¼Œå¯åŠ¨ Hexo æœ¬åœ°ç«™ç‚¹ï¼Œå¹¶å¼€å¯è°ƒè¯•æ¨¡å¼(<code>--debug</code>)<ul><li><code>hexo s --debug</code>, è‹¥æœ‰å¼‚å¸¸å¯ä»å‘½ä»¤è¡Œè¾“å‡ºï¼Œå¸®åŠ©debug</li></ul></li><li>ç„¶åï¼Œ<code>https://localhost:4000</code>ï¼Œæ£€æŸ¥æ˜¯å¦è¿è¡Œæ­£å¸¸</li><li><strong>problem:</strong> ![image-20210416144717418](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416144717418.png)<ul><li><strong>solution</strong> : ![image-20210416145430740](E:\LearningNotes\Hexo\Hexo åšå®¢.assets\image-20210416145430740.png)</li><li><ol><li>æ‰‹åŠ¨é…ç½®ï¼šæ–‡ä»¶åå’Œé…ç½®æ–‡ä»¶éƒ½æ— é—®é¢˜</li><li>æ›´æ–°ä¸»é¢˜æ–‡ä»¶ï¼š</li></ol></li></ul></li></ul><h3 id="4-ä¸»é¢˜è®¾å®š"><a href="#4-ä¸»é¢˜è®¾å®š" class="headerlink" title="4 ä¸»é¢˜è®¾å®š"></a>4 ä¸»é¢˜è®¾å®š</h3><ul><li>scheme : NexT æä¾›çš„ä¸€ç§ç‰¹æ€§ï¼Œå¯æä¾›å¤šç§å¤–è§‚<ul><li>Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½ </li><li>Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚ </li><li>Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–°</li></ul></li></ul><h3 id="5-è®¾ç½®è¯­è¨€"><a href="#5-è®¾ç½®è¯­è¨€" class="headerlink" title="5 è®¾ç½®è¯­è¨€"></a>5 è®¾ç½®è¯­è¨€</h3><ul><li>ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œå°†<code>language</code>å­—æ®µè®¾ç½®æˆéœ€è¦çš„è¯­è¨€ï¼š<ul><li><code>language: zh-Hans</code></li></ul></li></ul><h3 id="6-è®¾ç½®èœå•"><a href="#6-è®¾ç½®èœå•" class="headerlink" title="6 è®¾ç½®èœå•"></a>6 è®¾ç½®èœå•</h3><ul><li><p><strong>èœå•é…ç½®</strong>ä¸‰ä¸ªéƒ¨åˆ†ï¼š<strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong> ä¸­ å¯¹åº”çš„å­—æ®µ<code>menu</code></p><ul><li><strong>èœå•é¡¹ï¼š</strong>åç§°å’Œé“¾æ¥<ul><li><code>item name:link</code><ul><li>item name æ˜¯ä¸€ä¸ªåç§°ï¼Œä¸ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ï¼Œè€Œæ˜¯ç”¨äºåŒ¹é…å›¾æ ‡å’Œç¿»è¯‘</li></ul></li></ul></li><li><strong>èœå•é¡¹çš„æ˜¾ç¤ºæ–‡æœ¬</strong></li><li><strong>èœå•é¡¹å¯¹åº”çš„å›¾æ ‡</strong><ul><li>NexT ä½¿ç”¨ <code>Font Awesome</code>æä¾›çš„å›¾æ ‡</li></ul></li></ul></li><li><p>ç¤ºä¾‹ï¼šè‹¥ç«™ç‚¹åœ¨å­ç›®å½•ä¸­ï¼Œå»æ‰è¿æ¥å‰çš„ <code>/</code></p><ul><li>```<br>menu:<br>  home: /<br>  archives: /archives<br>  #about: /about<br>  #categories: /categories<br>  tags: /tags<br>  #commonweal: /404.html<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* **NexT é»˜è®¤çš„èœå•é¡¹ï¼š**</span><br><span class="line"></span><br><span class="line">  * *é”®å€¼*ï¼š**home**</span><br><span class="line">    * *è®¾å®šå€¼*ï¼šhome:/</span><br><span class="line">    * *æ˜¾ç¤ºæ–‡æœ¬*ï¼šä¸»é¡µ</span><br><span class="line">  * **archives**</span><br><span class="line">    * archives:/archives</span><br><span class="line">    * å½’æ¡£é¡µ</span><br><span class="line">  * **categories**</span><br><span class="line">    * categories:/categories</span><br><span class="line">    * åˆ†ç±»é¡µ</span><br><span class="line">  * **tags**</span><br><span class="line">    * tags:/tags</span><br><span class="line">    * æ ‡ç­¾é¡µ</span><br><span class="line">  * **about**</span><br><span class="line">    * about:/about</span><br><span class="line">    * å…³äºé¡µ</span><br><span class="line">  * **commonweal**</span><br><span class="line">    * commonweal:/404.html</span><br><span class="line">    * å…¬ç›Š 404</span><br><span class="line"></span><br><span class="line">* è®¾ç½®èœå•é¡¹çš„**æ˜¾ç¤ºæ–‡æœ¬ï¼š**</span><br><span class="line"></span><br><span class="line">  * Hexo ç”Ÿæˆçš„æ—¶å€™ï¼Œä½¿ç”¨**èœå•é¡¹çš„åç§°**æŸ¥æ‰¾å¯¹åº”çš„è¯­è¨€ç¿»è¯‘ï¼Œå¹¶ä¸”æå–æ˜¾ç¤ºæ–‡æœ¬</span><br><span class="line">  * æ˜¾ç¤ºæ–‡æœ¬åœ¨NexT ä¸»é¢˜ç›®å½•ä¸‹çš„`language/&#123;language&#125;.yml`</span><br><span class="line"></span><br><span class="line">* è®¾ç½®èœå•é¡¹çš„**å›¾æ ‡**ï¼Œå¯¹åº”çš„å­—æ®µ`menu_icons`</span><br><span class="line"></span><br><span class="line">  * è®¾å®šæ ¼å¼`item name:icon name`</span><br><span class="line"></span><br><span class="line">    * icon nameæ˜¯Font Awesome å›¾è¡¨çš„åå­—</span><br><span class="line">    * enable å¯ç”¨äºæ˜¯å¦æ˜¾ç¤ºå›¾æ ‡</span><br><span class="line"></span><br><span class="line">  * ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">    * ```</span><br><span class="line">      menu_icons:</span><br><span class="line">        enable: true</span><br><span class="line">        # Icon Mapping.</span><br><span class="line">        home: home</span><br><span class="line">        about: user</span><br><span class="line">        categories: th</span><br><span class="line">        tags: tags</span><br><span class="line">        archives: archive</span><br><span class="line">        commonweal: heartbeat</span><br><span class="line">      </span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="7-ä¾§æ "><a href="#7-ä¾§æ " class="headerlink" title="7 ä¾§æ "></a>7 ä¾§æ </h3><ul><li><p><strong>é»˜è®¤æƒ…å†µ</strong>ï¼šä¾§æ ä»…åœ¨æ–‡ç« é¡µé¢ï¼ˆæ‹¥æœ‰ç›®å½•åˆ—è¡¨æ—¶ï¼‰æ‰æ˜¾ç¤ºï¼Œæ”¾äºå³ä¾§</p></li><li><p>å¯é€šè¿‡æ§åˆ¶ ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>sidebar</code>å­—æ®µæ§åˆ¶ä¾§æ </p><ul><li><p><strong>ä¾§æ çš„ä½ç½®</strong>ï¼Œ<code>sidebar.position</code>, ç›®å‰ä»…Pisces Schemeæ”¯æŒ</p><ul><li>left</li><li>right</li></ul></li><li><p><strong>ä¾§æ æ˜¾ç¤ºçš„æ—¶æœº</strong>ï¼Œ<code>sidebar.display</code></p><ul><li><p><strong>post :</strong> é»˜è®¤è¡Œä¸ºï¼Œåœ¨æ–‡ç« é¡µé¢ï¼ˆæ‹¥æœ‰ç›®å½•åˆ—è¡¨ï¼‰æ—¶æ˜¾ç¤º</p></li><li><p><strong>always:</strong> åœ¨æ‰€æœ‰é¡µé¢ä¸­éƒ½æ˜¾ç¤º</p></li><li><p><strong>remove:</strong> å®Œå…¨ç§»é™¤</p></li></ul></li></ul></li></ul><h3 id="8-å¤´åƒ"><a href="#8-å¤´åƒ" class="headerlink" title="8 å¤´åƒ"></a>8 å¤´åƒ</h3><ul><li>ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ æ–°å¢<code>avatar</code>å­—æ®µï¼Œå°†å…¶å€¼è®¾ç½®ä¸ºå¤´åƒçš„é“¾æ¥åœ°å€ï¼š<ul><li>å®Œæ•´çš„äº’è”ç½‘URLï¼š</li><li>ç«™ç‚¹å†…çš„åœ°å€ï¼š<code>å°†å¤´åƒæ”¾ç½®ä¸»é¢˜ç›®å½•ä¸‹çš„ source/uploads/ ï¼ˆæ–°å»ºuploadsç›®å½•è‹¥ä¸å­˜åœ¨ï¼‰ é…ç½®ä¸ºï¼šavatar: /uploads/avatar.png æˆ–è€… æ”¾ç½®åœ¨ source/images/ ç›®å½•ä¸‹ , é…ç½®ä¸ºï¼šavatar: /images/avatar.png</code></li></ul></li></ul><h1 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h1><h2 id="ç”Ÿæˆ-åˆ†ç±»-é¡µå¹¶æ·»åŠ -type-å±æ€§"><a href="#ç”Ÿæˆ-åˆ†ç±»-é¡µå¹¶æ·»åŠ -type-å±æ€§" class="headerlink" title="ç”Ÿæˆ åˆ†ç±» é¡µå¹¶æ·»åŠ  type å±æ€§"></a>ç”Ÿæˆ åˆ†ç±» é¡µå¹¶æ·»åŠ  type å±æ€§</h2><ul><li><code>hexo new page categories</code>: ç”Ÿæˆåˆ†ç±»é¡µ</li><li>æ‰¾åˆ°<code>source/categories/index.md</code><ul><li>æ·»åŠ <code>type: &quot;xxx&quot;</code></li></ul></li></ul><h2 id="ç»™æ–‡ç« æ·»åŠ -categories-å±æ€§"><a href="#ç»™æ–‡ç« æ·»åŠ -categories-å±æ€§" class="headerlink" title="ç»™æ–‡ç« æ·»åŠ  categories å±æ€§"></a>ç»™æ–‡ç« æ·»åŠ  categories å±æ€§</h2><ul><li>æ‰“å¼€æ–‡ç« ï¼Œå†™å…¥<code>categories : -xxx</code></li><li>hexo ä¸ä¼šäº§ç”Ÿä¸¤ä¸ªåˆ†ç±»ï¼Œ<strong>è€Œæ˜¯æŠŠåˆ†ç±»åµŒå¥—</strong></li></ul><h1 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h1><p>ä¸åˆ†ç±»ç±»ä¼¼</p><h1 id="ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–"><a href="#ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–" class="headerlink" title="ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–"></a>ä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ–</h1><p><a href="https://www.jianshu.com/p/efbeddc5eb19">å‚è€ƒåšå®¢</a></p><p><a href="https://zhuanlan.zhihu.com/p/60424755">å‚è€ƒåšå®¢</a></p><p><a href="https://itrhx.blog.csdn.net/article/details/85420403?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control">cankao</a></p><h2 id="ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡"><a href="#ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡" class="headerlink" title="ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡"></a>ç»Ÿè®¡ç«™ç‚¹çš„æ€»è®¿é—®é‡</h2><h2 id="è®©ç™¾åº¦æ”¶å½•-blog"><a href="#è®©ç™¾åº¦æ”¶å½•-blog" class="headerlink" title="è®©ç™¾åº¦æ”¶å½• blog"></a>è®©ç™¾åº¦æ”¶å½• blog</h2><h2 id="åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»"><a href="#åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»" class="headerlink" title="åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»"></a>åº•éƒ¨å°å¿ƒå¿ƒå¢åŠ ç‚¹å‡»åŠ¨ç”»</h2><p>åšå®¢1ï¼š</p><h3 id="3-1-æ·»åŠ å¤´åƒ"><a href="#3-1-æ·»åŠ å¤´åƒ" class="headerlink" title="3.1 æ·»åŠ å¤´åƒ"></a>3.1 æ·»åŠ å¤´åƒ</h3><h3 id="3-2-è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢"><a href="#3-2-è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢" class="headerlink" title="3.2 è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢"></a>3.2 è®¾ç½®å¤´åƒè¾¹æ¡†ä¸ºåœ†å½¢</h3><h3 id="3-3-ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬"><a href="#3-3-ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬" class="headerlink" title="3.3 ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬"></a>3.3 ç‰¹æ•ˆï¼šé¼ æ ‡æ”¾ç½®å¤´åƒä¸Šæ—‹è½¬</h3><h2 id="4-æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦"><a href="#4-æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦" class="headerlink" title="4 æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦"></a>4 æµè§ˆé¡µé¢æ—¶ï¼Œæ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦</h2><h2 id="5-ä¾§è¾¹æ è®¾ç½®"><a href="#5-ä¾§è¾¹æ è®¾ç½®" class="headerlink" title="5 ä¾§è¾¹æ è®¾ç½®"></a>5 ä¾§è¾¹æ è®¾ç½®</h2><h3 id="5-1-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"><a href="#5-1-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥" class="headerlink" title="5.1 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥"></a>5.1 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥</h3><h3 id="5-2-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡"><a href="#5-2-è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡" class="headerlink" title="5.2 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡"></a>5.2 è®¾ç½®ä¾§è¾¹æ ç¤¾äº¤å›¾æ ‡</h3><h3 id="5-3-RSS"><a href="#5-3-RSS" class="headerlink" title="5.3 RSS"></a>5.3 RSS</h3><p>é…ç½®</p><h3 id="5-4-å‹æƒ…é“¾æ¥"><a href="#5-4-å‹æƒ…é“¾æ¥" class="headerlink" title="5.4 å‹æƒ…é“¾æ¥"></a>5.4 å‹æƒ…é“¾æ¥</h3><h2 id="6-ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ"><a href="#6-ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ" class="headerlink" title="6 ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ"></a>6 ä¸»é¡µæ–‡ç« æ·»åŠ è¾¹æ¡†é˜´å½±æ•ˆæœ</h2><h2 id="7-ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿"><a href="#7-ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿" class="headerlink" title="7 ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿"></a>7 ä¿®æ”¹æ–‡ç« é—´åˆ†å‰²çº¿</h2><h2 id="8-ä»£ç å—è‡ªå®šä¹‰æ ·å¼"><a href="#8-ä»£ç å—è‡ªå®šä¹‰æ ·å¼" class="headerlink" title="8 ä»£ç å—è‡ªå®šä¹‰æ ·å¼"></a>8 ä»£ç å—è‡ªå®šä¹‰æ ·å¼</h2><h2 id="9-å¼€å¯ç‰ˆæƒå£°æ˜"><a href="#9-å¼€å¯ç‰ˆæƒå£°æ˜" class="headerlink" title="9 å¼€å¯ç‰ˆæƒå£°æ˜"></a>9 å¼€å¯ç‰ˆæƒå£°æ˜</h2><h2 id="10-è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜"><a href="#10-è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜" class="headerlink" title="10 è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜"></a>10 è‡ªå®šä¹‰æ–‡ç« åº•éƒ¨ç‰ˆæƒå£°æ˜</h2><h2 id="11-åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°fork-me-on-github"><a href="#11-åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°fork-me-on-github" class="headerlink" title="11 åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°fork me on github"></a>11 åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®ç°<code>fork me on github</code></h2><h2 id="12-ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦-å·çš„æ ‡ç­¾"><a href="#12-ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦-å·çš„æ ‡ç­¾" class="headerlink" title="12 ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦ # å·çš„æ ‡ç­¾"></a>12 ä¿®æ”¹æ–‡ç« åº•éƒ¨å¸¦ # å·çš„æ ‡ç­¾</h2><h2 id="13-æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡"><a href="#13-æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡" class="headerlink" title="13 æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡"></a>13 æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡</h2><h2 id="14"><a href="#14" class="headerlink" title="14"></a>14</h2><h2 id="15-ä¿®æ”¹ç½‘é¡µåº•éƒ¨"><a href="#15-ä¿®æ”¹ç½‘é¡µåº•éƒ¨" class="headerlink" title="15 ä¿®æ”¹ç½‘é¡µåº•éƒ¨"></a>15 ä¿®æ”¹ç½‘é¡µåº•éƒ¨</h2><h3 id="1-ä¿®æ”¹æ¡ƒå¿ƒ"><a href="#1-ä¿®æ”¹æ¡ƒå¿ƒ" class="headerlink" title="1 ä¿®æ”¹æ¡ƒå¿ƒ"></a>1 ä¿®æ”¹æ¡ƒå¿ƒ</h3><h2 id="16"><a href="#16" class="headerlink" title="16"></a>16</h2><h2 id="23-æ–°å»º404ç•Œé¢"><a href="#23-æ–°å»º404ç•Œé¢" class="headerlink" title="23 æ–°å»º404ç•Œé¢"></a>23 æ–°å»º404ç•Œé¢</h2><h2 id="32-ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨"><a href="#32-ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨" class="headerlink" title="32 ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨"></a>32 ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨</h2><h2 id="39-æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹"><a href="#39-æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹" class="headerlink" title="39 æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹"></a>39 æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹</h2><h2 id="è®¾ç½®æ˜¾ç¤ºç›®å½•"><a href="#è®¾ç½®æ˜¾ç¤ºç›®å½•" class="headerlink" title="è®¾ç½®æ˜¾ç¤ºç›®å½•"></a>è®¾ç½®æ˜¾ç¤ºç›®å½•</h2><h2 id="ç»Ÿè®¡å­—æ•°"><a href="#ç»Ÿè®¡å­—æ•°" class="headerlink" title="ç»Ÿè®¡å­—æ•°"></a>ç»Ÿè®¡å­—æ•°</h2><p>åšå®¢2</p><h2 id="åŠ å® ç‰©"><a href="#åŠ å® ç‰©" class="headerlink" title="åŠ å® ç‰©"></a>åŠ å® ç‰©</h2><h2 id="ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ"><a href="#ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ" class="headerlink" title="ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ"></a>ç½‘é¡µåº•éƒ¨çš„åŠ¨æ€æ¡ƒå¿ƒå›¾åƒ</h2><h2 id="404-é¡µé¢"><a href="#404-é¡µé¢" class="headerlink" title="404 é¡µé¢"></a>404 é¡µé¢</h2><h1 id="è®¿å®¢æ•°è®¿é—®æ¬¡æ•°"><a href="#è®¿å®¢æ•°è®¿é—®æ¬¡æ•°" class="headerlink" title="è®¿å®¢æ•°è®¿é—®æ¬¡æ•°"></a>è®¿å®¢æ•°è®¿é—®æ¬¡æ•°</h1><p><a href="https://blog.csdn.net/baidu_34310405/article/details/102665373">https://blog.csdn.net/baidu_34310405/article/details/102665373</a></p><h1 id="æ·»åŠ èƒŒæ™¯å›¾ç‰‡"><a href="#æ·»åŠ èƒŒæ™¯å›¾ç‰‡" class="headerlink" title="æ·»åŠ èƒŒæ™¯å›¾ç‰‡"></a>æ·»åŠ èƒŒæ™¯å›¾ç‰‡</h1><p><a href="https://tding.top/archives/761b6f4d.html">https://tding.top/archives/761b6f4d.html</a></p><h1 id="æ·»åŠ è·³åŠ¨çš„å¿ƒ"><a href="#æ·»åŠ è·³åŠ¨çš„å¿ƒ" class="headerlink" title="æ·»åŠ è·³åŠ¨çš„å¿ƒ"></a>æ·»åŠ è·³åŠ¨çš„å¿ƒ</h1><p><a href="https://io-oi.me/tech/hexo-next-optimization/#%E8%AE%A9%E9%A1%B5%E8%84%9A%E7%9A%84%E5%BF%83%E8%B7%B3%E5%8A%A8%E8%B5%B7%E6%9D%A5">https://io-oi.me/tech/hexo-next-optimization/#%E8%AE%A9%E9%A1%B5%E8%84%9A%E7%9A%84%E5%BF%83%E8%B7%B3%E5%8A%A8%E8%B5%B7%E6%9D%A5</a></p><h1 id="ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´"><a href="#ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´" class="headerlink" title="ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´"></a>ä¾§æ åŠ å…¥è¿è¡Œæ—¶é—´</h1><p><a href="https://io-oi.me/tech/hexo-next-optimization/#%E4%BE%A7%E6%A0%8F%E5%8A%A0%E5%85%A5%E5%B7%B2%E8%BF%90%E8%A1%8C%E7%9A%84%E6%97%B6%E9%97%B4">https://io-oi.me/tech/hexo-next-optimization/#%E4%BE%A7%E6%A0%8F%E5%8A%A0%E5%85%A5%E5%B7%B2%E8%BF%90%E8%A1%8C%E7%9A%84%E6%97%B6%E9%97%B4</a></p><h1 id="æœ¬åœ°æœç´¢"><a href="#æœ¬åœ°æœç´¢" class="headerlink" title="æœ¬åœ°æœç´¢"></a>æœ¬åœ°æœç´¢</h1><p><a href="https://zhuanlan.zhihu.com/p/266119565">https://zhuanlan.zhihu.com/p/266119565</a></p><h1 id="å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜"><a href="#å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜" class="headerlink" title="å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜"></a>å¤œé—´æ¨¡å¼åˆ‡æ¢â€˜</h1><p><a href="https://www.techgrow.cn/posts/abf4aee1.html">https://www.techgrow.cn/posts/abf4aee1.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> åšå®¢æ›´æ–° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> DIY </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lab 2 ç‰©ç†å†…å­˜ç®¡ç†</title>
      <link href="p/e2bef277.html"/>
      <url>p/e2bef277.html</url>
      
        <content type="html"><![CDATA[<h1 id="Lab-2-ç‰©ç†å†…å­˜ç®¡ç†"><a href="#Lab-2-ç‰©ç†å†…å­˜ç®¡ç†" class="headerlink" title="Lab 2 ç‰©ç†å†…å­˜ç®¡ç†"></a>Lab 2 ç‰©ç†å†…å­˜ç®¡ç†</h1><h1 id="1-å®éªŒç›®çš„"><a href="#1-å®éªŒç›®çš„" class="headerlink" title="1 å®éªŒç›®çš„"></a>1 å®éªŒç›®çš„</h1><ul><li>ç†è§£åŸºäº<strong>æ®µé¡µå¼å†…å­˜åœ°å€çš„è½¬æ¢æœºåˆ¶</strong></li><li>é¡µè¡¨çš„å»ºç«‹å’Œä½¿ç”¨</li><li>ç‰©ç†å†…å­˜çš„ç®¡ç†æ–¹æ³•</li></ul><h1 id="2-å®éªŒå†…å®¹"><a href="#2-å®éªŒå†…å®¹" class="headerlink" title="2 å®éªŒå†…å®¹"></a>2 å®éªŒå†…å®¹</h1><p><strong>ä¸‰ä¸ªéƒ¨åˆ†ï¼š</strong></p><ul><li>å‘ç°<strong>ç³»ç»Ÿä¸­çš„ç‰©ç†å†…å­˜</strong></li><li>å»ºç«‹å¯¹ç‰©ç†å†…å­˜çš„åˆæ­¥ç®¡ç†ï¼šäº†è§£<strong>è¿ç»­å†…å­˜ç®¡ç†</strong></li><li>å»ºç«‹<strong>é¡µè¡¨å®ç°è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜ä¹‹é—´çš„æ˜ å°„</strong>ï¼Œäº†è§£æ®µé¡µå¼å†…å­˜ç®¡ç†æœºåˆ¶</li></ul><h2 id="2-1-ç»ƒä¹ "><a href="#2-1-ç»ƒä¹ " class="headerlink" title="2.1 ç»ƒä¹ "></a>2.1 ç»ƒä¹ </h2><ul><li>åˆ†æ ucoreæä¾›çš„ç­”æ¡ˆï¼Œè¯´æ˜è‡ªå·±çš„å®ç°ä¸å‚è€ƒç­”æ¡ˆåŒºåˆ«</li><li>åˆ—å‡ºæœ¬å®éªŒä¸­é‡è¦çš„çŸ¥è¯†ç‚¹<ul><li>å¯¹åº”çš„ OS åŸç†</li></ul></li><li>æœªå‡ºç°ä½†å¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹</li></ul><h3 id="ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ"><a href="#ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ" class="headerlink" title="ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ"></a>ç»ƒä¹ 0ï¼šå¡«å†™å·²æœ‰å®éªŒ</h3><ul><li>æœ¬å®éªŒä¾èµ–äºå®éªŒä¸€</li><li>éœ€è¦å°†å®éªŒä¸€çš„ä»£ç å¡«å…¥lab2ç›¸åº”ä½ç½®</li></ul><h3 id="ç»ƒä¹ 1ï¼šå®ç°first-fit-è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•"><a href="#ç»ƒä¹ 1ï¼šå®ç°first-fit-è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•" class="headerlink" title="ç»ƒä¹ 1ï¼šå®ç°first-fit è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•"></a>ç»ƒä¹ 1ï¼šå®ç°first-fit è¿ç»­ç‰©ç†å†…å­˜åˆ†é…ç®—æ³•</h3><h1 id="3-ç‰©ç†å†…å­˜ç®¡ç†"><a href="#3-ç‰©ç†å†…å­˜ç®¡ç†" class="headerlink" title="3 ç‰©ç†å†…å­˜ç®¡ç†"></a>3 ç‰©ç†å†…å­˜ç®¡ç†</h1><h2 id="3-1-å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°"><a href="#3-1-å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°" class="headerlink" title="3.1 å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°"></a>3.1 å®éªŒæ‰§è¡Œæµç¨‹æ¦‚è¿°</h2><ul><li>æ€»æ§å‡½æ•°ï¼škern_init<ul><li>è°ƒç”¨å®Œæˆç‰©ç†å†…å­˜åˆå§‹åŒ–çš„pmm_initå‡½æ•°ä¹‹å‰å’Œä¹‹åçš„åŒºåˆ«ï¼š<ul><li>é¦–å…ˆï¼Œbootloaderå·¥ä½œæœ‰æ‰€å¢åŠ ï¼Œåœ¨bootloaderä¸­å®Œæˆäº†å¯¹å†…å­˜èµ„æºçš„æ¢æµ‹å·¥ä½œï¼Œä½¿å¾— ucore kernel åœ¨åç»­æ‰§è¡Œä¸­èƒ½å¤ŸåŸºäºå…¶æ¢æµ‹å‡ºçš„ç‰©ç†å†…å­˜æƒ…å†µè¿›è¡Œç‰©ç†å†…å­˜ç®¡ç†åˆå§‹åŒ–å·¥ä½œ</li><li>å…¶æ¬¡ï¼Œbootloader ä¸åƒlab1ï¼Œç›´æ¥è°ƒç”¨kern_initï¼Œè€Œæ˜¯å…ˆè°ƒç”¨kern_entryå‡½æ•°ï¼ˆ<code>/lab2/kern/init/entry.S</code>ï¼‰å®Œæˆä»¥ä¸‹å·¥ä½œåï¼Œå†è°ƒç”¨kern_init<ul><li><strong>kern_entry</strong> ä¸»è¦ä»»åŠ¡ï¼šä¸ºäº†æ‰§è¡Œkern_initå»ºç«‹è‰¯å¥½çš„Cè¯­è¨€è¿è¡Œç¯å¢ƒï¼ˆè®¾ç½®å †æ ˆï¼‰ï¼Œå¹¶ä¸”ä¸´æ—¶å»ºç«‹ä¸€ä¸ªæ®µæ˜ å°„å…³ç³»ï¼Œä¸ºä¹‹åå»ºç«‹åˆ†é¡µæœºåˆ¶çš„è¿‡ç¨‹åšå‡†å¤‡</li></ul></li></ul></li></ul></li><li>kern_init åœ¨å®Œæˆä¸€äº›è¾“å‡ºå¹¶å¯¹lab1å®éªŒç»“æœæ£€æŸ¥åï¼Œè¿›å…¥ç‰©ç†å†…å­˜ç®¡ç†åˆå§‹åŒ–å·¥ä½œ<ul><li>å³è°ƒç”¨pmm_initå‡½æ•°å®Œæˆå¯¹ç‰©ç†å†…å­˜çš„ç®¡ç†çš„åˆå§‹åŒ–ï¼ˆlab 2ï¼‰</li><li>æ¥ç€ï¼Œæ‰§è¡Œä¸­æ–­ å’Œ å¼‚å¸¸ç›¸å…³çš„åˆå§‹åŒ–å·¥ä½œï¼ˆå³è°ƒç”¨pic_initå’Œidt_initï¼‰ï¼Œè¿™äº›å·¥ä½œä¸lab 1ä¸­æ–­å¼‚å¸¸åˆå§‹åŒ–å·¥ä½œå†…å®¹ä¸€æ ·</li></ul></li><li>ç‰©ç†å†…å­˜ç®¡ç†ï¼š<ul><li>é¦–å…ˆï¼Œæ¢æµ‹å¯ç”¨çš„ç‰©ç†å†…å­˜ç©ºé—´èµ„æºï¼›äº†è§£ç‰©ç†å†…å­˜ä½äºä½•å¤„ã€å¤§å°<ul><li>ä¾¿å¯ç”¨å›ºå®šé¡µé¢å¤§å°æ¥åˆ’åˆ†æ•´ä¸ªç‰©ç†å†…å­˜ç©ºé—´ï¼Œå¹¶å‡†å¤‡ä»¥æ­¤ä¸ºæœ€å°å†…å­˜åˆ†é…å•å…ƒæ¥ç®¡ç†æ•´ä¸ªç‰©ç†å†…å­˜ï¼Œç®¡ç†åœ¨å†…æ ¸è¿è¡Œè¿‡ç¨‹ä¸­æ¯é¡µå†…å­˜ï¼ˆçŠ¶æ€ï¼šfreeã€usedã€reservedï¼‰</li></ul></li><li>æ¥ç€ï¼Œucore kernel å»ºç«‹é¡µè¡¨ï¼Œå¯åŠ¨åˆ†é¡µæœºåˆ¶ï¼Œä½¿å¾— CPU ä¸­çš„ MMU æŠŠé¢„å…ˆå»ºç«‹å¥½çš„é¡µè¡¨ä¸­çš„é¡µè¡¨é¡¹è¯»å…¥TLBï¼Œæ ¹æ®é¡µè¡¨é¡¹æè¿°çš„ è™šæ‹Ÿé¡µï¼ˆPageï¼‰ä¸ç‰©ç†é¡µå¸§ï¼ˆPage Frameï¼‰çš„å¯¹åº”å…³ç³»å®ŒæˆCPUå¯¹å†…å­˜çš„è¯»å†™å’Œæ‰§è¡Œæ“ä½œã€‚</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> è¯¾ç¨‹å®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹</title>
      <link href="p/32a74a00.html"/>
      <url>p/32a74a00.html</url>
      
        <content type="html"><![CDATA[<h1 id="Lab-1-ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹"><a href="#Lab-1-ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹"></a>Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹</h1><p><a href="https://www.jianshu.com/p/2f95d38afa1d">å‚è€ƒåšå®¢</a></p><p><a href="https://www.git2get.com/av/102915460.html">å‚è€ƒåšå®¢</a></p><p>[toc]</p><h1 id="1-å®éªŒç›®çš„"><a href="#1-å®éªŒç›®çš„" class="headerlink" title="1 å®éªŒç›®çš„"></a>1 å®éªŒç›®çš„</h1><ul><li>éœ€è¦æŸç§æœºåˆ¶åŠ è½½å¹¶è¿è¡Œæ“ä½œç³»ç»Ÿ<ul><li>æ›´åŠ ç®€å•çš„è½¯ä»¶â€”â€”Bootloader</li><li>èƒ½å®Œæˆåˆ‡æ¢åˆ° x86 ä¿æŠ¤æ¨¡å¼å¹¶æ˜¾ç¤ºå­—ç¬¦</li><li>ä¸ºå¯åŠ¨ ucore</li></ul></li><li>æ•´ä¸ª Bootloader æ‰§è¡Œä»£ç å°äº512ä¸ªå­—èŠ‚ï¼Œèƒ½æ”¾åˆ°ç¡¬ç›˜çš„ä¸»å¼•å¯¼æ‰‡åŒº</li></ul><p>åˆ†æå’Œå®ç° Bootloaderå’Œucore</p><ul><li><strong>è®¡ç®—æœºåŸç†</strong><ul><li>CPU çš„ç¼–å€ä¸å¯»å€ï¼šåŸºäºåˆ†æ®µæœºåˆ¶çš„å†…å­˜ç®¡ç†   <strong>ã€è¿ç»­ç‰©ç†å†…å­˜åˆ†é…</strong></li><li>CPU çš„ä¸­æ–­æœºåˆ¶</li><li>å¤–è®¾ï¼šä¸²å£/å¹¶å£/CGAï¼ˆæ˜¾ç¤ºå™¨ï¼‰ï¼Œæ—¶é’Ÿï¼ˆäº§ç”Ÿæ—¶é’Ÿä¸­æ–­ï¼‰ï¼Œç¡¬ç›˜ï¼ˆè¯»å–ï¼‰</li></ul></li><li><strong>Bootloader</strong><ul><li>ç¼–è¯‘è¿è¡Œ Bootloader çš„è¿‡ç¨‹</li><li>è°ƒè¯•çš„æ–¹æ³•</li><li>PC å¯åŠ¨ Bootloader çš„è¿‡ç¨‹</li><li>ELFæ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼å’ŒåŠ è½½</li><li>å¤–è®¾è®¿é—®ï¼šè¯»ç¡¬ç›˜ï¼Œåœ¨CGAä¸Šæ˜¾ç¤ºå­—ç¬¦ä¸²</li></ul></li><li><strong>ucore OS</strong><ul><li>ç¼–è¯‘è¿è¡Œ</li><li>å¯åŠ¨è¿‡ç¨‹</li><li>è°ƒè¯•æ–¹æ³•</li><li>å‡½æ•°è°ƒç”¨å…³ç³»ï¼šåœ¨æ±‡ç¼–çº§äº†è§£å‡½æ•°è°ƒç”¨æ ˆçš„ç»“æ„å’Œå¤„ç†è¿‡ç¨‹</li><li>ä¸­æ–­ç®¡ç†ï¼šä¸è½¯ä»¶ç›¸å…³çš„ä¸­æ–­å¤„ç†    <strong>ã€ç³»ç»Ÿè°ƒç”¨ï¼Œå¼‚å¸¸</strong></li><li>å¤–è®¾ç®¡ç†ï¼šæ—¶é’Ÿ</li></ul></li></ul><h1 id="2-å®éªŒå†…å®¹"><a href="#2-å®éªŒå†…å®¹" class="headerlink" title="2 å®éªŒå†…å®¹"></a>2 å®éªŒå†…å®¹</h1><ul><li>lab 1 ä¸­åŒ…å«ä¸€ä¸ª Bootloader å’Œ ä¸€ä¸ª OS<ul><li>Bootloader å¯ä»¥åˆ‡æ¢åˆ° x86 ä¿æŠ¤æ¨¡å¼ï¼Œèƒ½å¤Ÿè¯»ç£ç›˜å¹¶åŠ è½½ELFæ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œå¹¶æ˜¾ç¤ºå­—ç¬¦</li><li>OS åªæ˜¯ä¸€ä¸ªå¯ä»¥å¤„ç†æ—¶é’Ÿä¸­æ–­å¹¶æ˜¾ç¤ºå­—ç¬¦çš„ OS</li></ul></li></ul><h2 id="2-1-ç»ƒä¹ "><a href="#2-1-ç»ƒä¹ " class="headerlink" title="2.1 ç»ƒä¹ "></a>2.1 ç»ƒä¹ </h2><ul><li>lab 1 æä¾›äº† 6 ä¸ª<strong>åŸºæœ¬ç»ƒä¹ </strong>å’Œ 1 ä¸ª<strong>æ‰©å±•ç»ƒä¹ </strong></li><li>å®Œæˆå®éªŒæŠ¥å‘Š<ul><li>åŸºäºmarkdown æ ¼å¼ï¼Œä»¥æ–‡æœ¬æ–¹å¼ä¸ºä¸»</li><li>å¡«å†™å„ä¸ªåŸºæœ¬ç»ƒä¹ ä¸­è¦æ±‚å®Œæˆçš„æŠ¥å‘Šå†…å®¹</li><li>å®Œæˆè¯•éªŒåï¼Œåˆ†æ ucore_lab æä¾›çš„å‚è€ƒç­”æ¡ˆï¼Œå¹¶åœ¨å®éªŒæŠ¥å‘Šä¸­è¯´æ˜ä½ çš„å®ç°ä¸å‚è€ƒç­”æ¡ˆçš„åŒºåˆ«</li><li>åˆ—å‡ºæœ¬å®éªŒä¸­é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œä»¥åŠå¯¹åº”çš„ OS åŸç†çŸ¥è¯†ç‚¹ï¼Œå¹¶ç®€è¦è¯´æ˜ä½ å¯¹äºŒè€…çš„å«ä¹‰ï¼Œå…³ç³»ï¼Œå·®å¼‚ç­‰æ–¹é¢çš„ç†è§£</li><li>åˆ—å‡ºä½ è®¤ä¸º OS åŸç†ä¸­å¾ˆé‡è¦ï¼Œä½†å®éªŒä¸­æ²¡æœ‰å¯¹åº”çš„çŸ¥è¯†ç‚¹</li></ul></li></ul><h3 id="ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡-make-ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹"><a href="#ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡-make-ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹" class="headerlink" title="ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡ make ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹"></a>ç»ƒä¹ ä¸€ï¼šç†è§£é€šè¿‡ make ç”Ÿæˆæ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹</h3><ul><li>é€šè¿‡é™æ€åˆ†æä»£ç æ¥äº†è§£ï¼š<ul><li><strong>æ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶</strong> <code>ucore.img</code> å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰</li><li>ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„<strong>ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº</strong>çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ</li></ul></li><li>è¡¥å……ææ–™ï¼š<ul><li>å¦‚ä½•è°ƒè¯• <code>Makefile</code></li><li>å½“æ‰§è¡Œ <code>make</code>æ—¶ï¼Œä¸€èˆ¬åªä¼šæ˜¾ç¤ºè¾“å‡ºï¼Œä¸ä¼šæ˜¾ç¤º <code>make</code>æ‰§è¡Œäº†é‚£äº›å‘½ä»¤</li><li>å¦‚æƒ³äº†è§£ <code>make</code>æ‰§è¡Œé‚£äº›å‘½ä»¤ï¼Œå¯ä»¥æ‰§è¡Œ <code>make V=</code></li><li>ä¸Šç½‘æŸ¥è¯¢ makeï¼Œæ‰§è¡Œ <code>man make</code></li></ul></li></ul><h4 id="æŠ¥å‘Š"><a href="#æŠ¥å‘Š" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><h5 id="é—®é¢˜ä¸€ï¼šæ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶-ucore-img-å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile-ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰"><a href="#é—®é¢˜ä¸€ï¼šæ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶-ucore-img-å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile-ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰" class="headerlink" title="é—®é¢˜ä¸€ï¼šæ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶ ucore.img å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile ä¸­æ¯ä¸€æ¡ç›¸å…³å‘½ä»¤å’Œå‘½ä»¤å‚æ•°çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰"></a><strong>é—®é¢˜ä¸€ï¼š</strong>æ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶ <code>ucore.img</code> å¦‚ä½•ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„ï¼ˆéœ€è¦æ¯”è¾ƒè¯¦ç»†çš„è§£é‡ŠMakefile ä¸­æ¯ä¸€æ¡<strong>ç›¸å…³å‘½ä»¤</strong>å’Œ<strong>å‘½ä»¤å‚æ•°</strong>çš„å«ä¹‰ï¼Œä»¥åŠè¯´æ˜å‘½ä»¤å¯¼è‡´çš„ç»“æœï¼‰</h5><ul><li><p><strong>GCC</strong> ç›¸å…³ç¼–è¯‘é€‰é¡¹ï¼š</p><ul><li><blockquote><p><strong>GCC</strong><br><code>-g</code>  å¢åŠ gdbçš„è°ƒè¯•ä¿¡æ¯<br><code>-Wall</code>   æ˜¾ç¤ºå‘Šè­¦ä¿¡æ¯<br><code>-O2 </code>    ä¼˜åŒ–å¤„ç† (æœ‰ 0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ0æ˜¯ä¸ä¼˜åŒ–)<br><code>-fno-builtin</code>   åªæ¥å—ä»¥â€__â€å¼€å¤´çš„å†…å»ºå‡½æ•°<br><code>-ggdb</code>   è®©gccä¸ºgdbç”Ÿæˆæ¯”è¾ƒä¸°å¯Œçš„è°ƒè¯•ä¿¡æ¯<br><code>-m32</code>    ç¼–è¯‘32ä½ç¨‹åº<br><code>-gstabs</code>     æ­¤é€‰é¡¹ä»¥stabsæ ¼å¼ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬gdbè°ƒè¯•ä¿¡æ¯<br><code>-nostdinc</code>   ä¸åœ¨æ ‡å‡†ç³»ç»Ÿç›®å½•ä¸­æœç´¢å¤´æ–‡ä»¶ï¼Œåªåœ¨-læŒ‡å®šçš„ç›®å½•ä¸­æœç´¢<br><code>-fstack-protector-all </code>  å¯ç”¨å †æ ˆä¿æŠ¤ï¼Œä¸ºæ‰€æœ‰å‡½æ•°æ’å…¥ä¿æŠ¤ä»£ç <br><code>-E</code>  ä»…åšé¢„å¤„ç†ï¼Œä¸è¿›è¡Œç¼–è¯‘ï¼Œæ±‡ç¼–å’Œé“¾æ¥<br><code>-x c</code>  æŒ‡æ˜ä½¿ç”¨çš„è¯­è¨€ä¸ºCè¯­è¨€</p><p><strong>LDD Flags</strong><br><code>-nostdlib</code>   ä¸è¿æ¥ç³»ç»Ÿæ ‡å‡†å¯åŠ¨æ–‡ä»¶å’Œæ ‡å‡†åº“æ–‡ä»¶ï¼ŒåªæŠŠæŒ‡å®šçš„æ–‡ä»¶ä¼ é€’ç»™è¿æ¥å™¨<br><code>-m elf\_i386</code>    ä½¿ç”¨ <code>elf_i386</code>æ¨¡æ‹Ÿå™¨<br><code>-N</code>      æŠŠtextå’ŒdataèŠ‚è®¾ç½®ä¸ºå¯è¯»å†™ï¼ŒåŒæ—¶å–æ¶ˆæ•°æ®èŠ‚çš„é¡µå¯¹é½ï¼Œå–æ¶ˆå¯¹å…±äº«åº“çš„é“¾æ¥<br><code>-e func</code>     ä»¥ç¬¦å· <code>func</code>çš„ä½ç½®ä½œä¸ºç¨‹åºå¼€å§‹è¿è¡Œçš„ä½ç½®<br><code>-Ttext addr</code>  æ˜¯è¿æ¥æ—¶å°†åˆå§‹åœ°å€é‡å®šå‘ä¸º <code>addr</code> ï¼ˆè‹¥ä¸æ³¨æ˜æ­¤ï¼Œåˆ™ç¨‹åºçš„èµ·å§‹åœ°å€ä¸º0ï¼‰</p></blockquote></li></ul></li><li><p><strong>ç¼–è¯‘ bootloader</strong></p><ul><li><p>ç”¨äº<strong>åŠ è½½</strong> Kernel æ“ä½œç³»ç»Ÿ</p></li><li><p>å…ˆæŠŠ <code>bootasm.S</code> , <code>bootmain.c</code> ç¼–è¯‘æˆç›¸åº”çš„ <strong>ç›®æ ‡æ–‡ä»¶</strong></p></li><li><p>åœ¨ä½¿ç”¨<strong>è¿æ¥å™¨</strong>è¿æ¥åˆ°ä¸€èµ·ï¼Œä½¿ç”¨ <code>start</code> ç¬¦å·ä½œä¸ºå…¥å£ï¼Œå¹¶æŒ‡å®š text æ®µåœ¨ç¨‹åºä¸­çš„ç»å¯¹ä½ç½® æ˜¯ <code>0x7c00</code></p><ul><li><code>0x7c00</code> : æ˜¯<strong>æ“ä½œç³»ç»Ÿä¸€å¼€å§‹åŠ è½½çš„åœ°å€</strong></li></ul></li><li><p>```bash<br>//bootasm.o</p><ul><li>cc boot/bootasm.S<br>gcc -Iboot/ -fno-builtin  -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Os -nostdinc -c boot/bootasm.S -o obj/boot/bootasm.o</li></ul><p>//ç”Ÿæˆbootmain.o</p><ul><li>cc boot/bootmain.c<br>gcc -Iboot/ -fno-builtin  -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Os -nostdinc -c boot/bootmain.c -o obj/boot/bootmain.o</li></ul><p>//ld bin/bootblock<br>ld -m    elf_i386 -nostdlib -N -e start -Ttext 0x7C00 obj/boot/bootasm.o obj/boot/bootmain.o -o obj/bootblock.o</p><p>â€˜obj/bootblock.outâ€™ size: 468 bytes<br>build 512 bytes boot sector: â€˜bin/bootblockâ€™ success!</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">* **ç¼–è¯‘ Kernel**</span><br><span class="line"></span><br><span class="line">  * æ“ä½œç³»ç»Ÿæœ¬èº«</span><br><span class="line">  * å…ˆæŠŠ.cæ–‡ä»¶ å’Œ .S æ±‡ç¼–æ–‡ä»¶ç”Ÿæˆ**ç›®æ ‡æ–‡ä»¶**ï¼Œä¹‹åä½¿ç”¨**è¿æ¥å™¨**ç”Ÿæˆ Kernel</span><br><span class="line">  * ```bash</span><br><span class="line">    + cc kern/init/init.c</span><br><span class="line">    gcc -Ikern/init/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/init/init.c -o obj/kern/init/init.o</span><br><span class="line">    + cc kern/libs/readline.c</span><br><span class="line">    gcc -Ikern/libs/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/libs/readline.c -o obj/kern/libs/readline.o</span><br><span class="line">    + cc kern/libs/stdio.c</span><br><span class="line">    gcc -Ikern/libs/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/libs/stdio.c -o obj/kern/libs/stdio.o</span><br><span class="line">    + cc kern/debug/kdebug.c</span><br><span class="line">    gcc -Ikern/debug/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/debug/kdebug.c -o obj/kern/debug/kdebug.o</span><br><span class="line">    + cc kern/debug/kmonitor.c</span><br><span class="line">    gcc -Ikern/debug/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/debug/kmonitor.c -o obj/kern/debug/kmonitor.o</span><br><span class="line">    + cc kern/debug/panic.c</span><br><span class="line">    gcc -Ikern/debug/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/debug/panic.c -o obj/kern/debug/panic.o</span><br><span class="line">    + cc kern/driver/clock.c</span><br><span class="line">    gcc -Ikern/driver/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/driver/clock.c -o obj/kern/driver/clock.o</span><br><span class="line">    + cc kern/driver/console.c</span><br><span class="line">    gcc -Ikern/driver/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/driver/console.c -o obj/kern/driver/console.o</span><br><span class="line">    + cc kern/driver/intr.c</span><br><span class="line">    gcc -Ikern/driver/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/driver/intr.c -o obj/kern/driver/intr.o</span><br><span class="line">    + cc kern/driver/picirq.c</span><br><span class="line">    gcc -Ikern/driver/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/driver/picirq.c -o obj/kern/driver/picirq.o</span><br><span class="line">    + cc kern/trap/trap.c</span><br><span class="line">    gcc -Ikern/trap/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/trap/trap.c -o obj/kern/trap/trap.o</span><br><span class="line">    + cc kern/trap/trapentry.S</span><br><span class="line">    gcc -Ikern/trap/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/trap/trapentry.S -o obj/kern/trap/trapentry.o</span><br><span class="line">    + cc kern/trap/vectors.S</span><br><span class="line">    gcc -Ikern/trap/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/trap/vectors.S -o obj/kern/trap/vectors.o</span><br><span class="line">    + cc kern/mm/pmm.c</span><br><span class="line">    gcc -Ikern/mm/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/ -Ikern/debug/ -Ikern/driver/ -Ikern/trap/ -Ikern/mm/ -c kern/mm/pmm.c -o obj/kern/mm/pmm.o</span><br><span class="line">    + cc libs/printfmt.c</span><br><span class="line">    gcc -Ilibs/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/  -c libs/printfmt.c -o obj/libs/printfmt.o</span><br><span class="line">    + cc libs/string.c</span><br><span class="line">    gcc -Ilibs/ -fno-builtin -Wall -ggdb -m32 -gstabs -nostdinc  -fno-stack-protector -Ilibs/  -c libs/string.c -o obj/libs/string.o</span><br><span class="line"></span><br><span class="line">    + ld bin/kernel</span><br><span class="line">    ld -m    elf_i386 -nostdlib -T tools/kernel.ld -o bin/kernel  obj/kern/init/init.o obj/kern/libs/readline.o obj/kern/libs/stdio.o obj/kern/debug/kdebug.o obj/kern/debug/kmonitor.o obj/kern/debug/panic.o obj/kern/driver/clock.o obj/kern/driver/console.o obj/kern/driver/intr.o obj/kern/driver/picirq.o obj/kern/trap/trap.o obj/kern/trap/trapentry.o obj/kern/trap/vectors.o obj/kern/mm/pmm.o  obj/libs/printfmt.o obj/libs/string.o</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ç¼–è¯‘ sign</strong></p><ul><li>ç”¨äºç”Ÿæˆä¸€ä¸ª<strong>ç¬¦åˆè§„èŒƒ</strong> çš„ <strong>ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº</strong></li><li>```bash<ul><li>cc tools/sign.c<br>gcc -Itools/ -g -Wall -O2 -c tools/sign.c -o obj/sign/tools/sign.o<br>gcc -g -Wall -O2 obj/sign/tools/sign.o -o bin/sign<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* **ç”Ÿæˆ ucore.img**</span><br><span class="line"></span><br><span class="line">  * **dd** - **è½¬æ¢å’Œæ‹·è´æ–‡ä»¶**</span><br><span class="line"></span><br><span class="line">    * &gt; `if`  ä»£è¡¨**è¾“å…¥æ–‡ä»¶**ã€‚å¦‚æœä¸æŒ‡å®šifï¼Œé»˜è®¤å°±ä¼šä» `stdin`ä¸­è¯»å–è¾“å…¥ã€‚</span><br><span class="line">      &gt; `of`  ä»£è¡¨**è¾“å‡ºæ–‡ä»¶**ã€‚å¦‚æœä¸æŒ‡å®šofï¼Œé»˜è®¤å°±ä¼šå°† `stdout`ä½œä¸ºé»˜è®¤è¾“å‡ºã€‚</span><br><span class="line">      &gt; `bs` ä»£è¡¨å­—èŠ‚ä¸ºå•ä½çš„å—å¤§å°ã€‚</span><br><span class="line">      &gt; `count` ä»£è¡¨è¢«å¤åˆ¶çš„å—æ•°ã€‚</span><br><span class="line">      &gt; `/dev/zero` æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡ï¼Œä¼šä¸æ–­è¿”å›0å€¼å­—èŠ‚ï¼ˆ\0ï¼‰</span><br><span class="line">      &gt; `conv=notrunc`    è¾“å…¥æ–‡ä»¶çš„æ—¶å€™ï¼Œæºæ–‡ä»¶ä¸ä¼šè¢«æˆªæ–­</span><br><span class="line">      &gt; `seek=blocks`     ä»è¾“å‡ºæ–‡ä»¶å¼€å¤´è·³è¿‡ blocks(512å­—èŠ‚) ä¸ªå—åå†å¼€å§‹å¤åˆ¶</span><br><span class="line">      &gt;</span><br><span class="line">  * **è¿‡ç¨‹**ï¼šç”Ÿæˆä¸€ä¸ªç©ºçš„è½¯ç›˜é•œåƒï¼Œç„¶åæŠŠ bootloader ä»¥ä¸æˆªæ–­çš„æ–¹å¼å¡«å……åˆ°**å¼€å§‹çš„å—**ä¸­ï¼Œç„¶å kernel è·³è¿‡bootloader æ‰€åœ¨çš„å—ï¼Œå†å¡«å……</span><br><span class="line">  * ```bash</span><br><span class="line">    dd if=/dev/zero of=bin/ucore.img count=10000</span><br><span class="line">    dd if=bin/bootblock of=bin/ucore.img conv=notrunc</span><br><span class="line">    dd if=bin/kernel of=bin/ucore.img seek=1 conv=notrunc</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><p><strong>uCore.imgçš„ç”Ÿæˆè¿‡ç¨‹ï¼š</strong></p><ol><li><strong>ç¼–è¯‘</strong>æ‰€æœ‰ç”Ÿæˆ bin/<strong>kernel</strong> æ‰€éœ€çš„æ–‡ä»¶(.Sæ±‡ç¼–æ–‡ä»¶, .cæ–‡ä»¶)</li><li><strong>é“¾æ¥</strong>ç”Ÿæˆ bin/<strong>kernel</strong></li><li><strong>ç¼–è¯‘</strong> bootasm.S bootmain.c  sign.c</li><li>æ ¹æ® sign è§„èŒƒ<strong>ç”Ÿæˆ</strong> obj/bootblock.o</li><li>ç”Ÿæˆ <strong>ucore.img</strong></li></ol><ul><li><p><strong>ç”Ÿæˆ Kernel æ–‡ä»¶</strong></p><ol><li>æ ¹æ® .c, .s æ–‡ä»¶ç”Ÿæˆ .oæ–‡ä»¶</li><li>æ ¹æ® <code>kernel.ld </code>æ–‡ä»¶ï¼Œä½¿ç”¨ <code>ld</code>é“¾æ¥å™¨ï¼Œå°† .o æ–‡ä»¶é“¾æ¥æˆ kernel æ–‡ä»¶</li></ol></li><li><p><strong>ç”Ÿæˆ Bootblock æ–‡ä»¶</strong></p><ol><li>å°† <code>bootasm.S</code> , <code>bootmain.c </code>ç¼–è¯‘æˆå„è‡ªç›¸å¯¹åº” .o æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆ .d</li><li>ä½¿ç”¨ é“¾æ¥å™¨ å°† .o æ–‡ä»¶ç”Ÿæˆ bootblock.o æ–‡ä»¶</li><li>ä½¿ç”¨ <code>objcopy</code> å°† bootblock.o äºŒè¿›åˆ¶æ‹·è´è‡³ <code>bootblock.out</code></li><li><code>sign.c</code> ç”Ÿæˆ <code>sign.o</code>ï¼Œ å†ç”± <code>sign.o </code>ç”Ÿæˆ sign æ–‡ä»¶</li><li>ç”¨ <code>sig</code>n ç¨‹åºï¼Œåˆ©ç”¨ <code>bootblock.out</code>ç”Ÿæˆ bootblock æ–‡ä»¶</li></ol></li><li><p><strong>åˆ©ç”¨ddå‘½ä»¤ï¼Œä½¿ç”¨ kernelã€bootblock ç”Ÿæˆ ucore.img</strong></p><ol><li><p>ä» <code>/dev/zero</code> æ–‡ä»¶ï¼Œè·å¾— 10000 ä¸ªblockï¼ˆæ¯ä¸ªblock 512 å­—èŠ‚ï¼‰ï¼Œå‡ä¸ºç©ºå­—ç¬¦ï¼Œè¾“å‡ºåˆ° ucore.img</p></li><li><p>ä» bootblock æ–‡ä»¶ä¸­è·å–æ•°æ®ï¼Œè¾“å‡ºåˆ° ucore.img ä¸­çš„ç¬¬ä¸€ä¸ªblock</p><ul><li><code>-notruct</code> ä¸å¯¹æ•°æ®è¿›è¡Œåˆ å‡</li></ul></li><li><p>ä» kernel æ–‡ä»¶è·å–æ•°æ®ï¼Œè¾“å‡ºåˆ° ucore.img çš„ç¬¬äºŒä¸ª block</p><ul><li><code>seek = 1</code> è·³è¿‡ç¬¬ä¸€ä¸ªblock</li></ul></li></ol></li></ul><h5 id="é—®é¢˜äºŒï¼šä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„-ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº-çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ"><a href="#é—®é¢˜äºŒï¼šä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„-ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº-çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ" class="headerlink" title="é—®é¢˜äºŒï¼šä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº çš„ç‰¹å¾æ˜¯ä»€ä¹ˆ"></a><strong>é—®é¢˜äºŒï¼š</strong>ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯<strong>ç¬¦åˆè§„èŒƒçš„ ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒº çš„ç‰¹å¾</strong>æ˜¯ä»€ä¹ˆ</h5><ul><li><code>less tools/sign.c</code><ul><li><img src="C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210405162827372.png" alt="image-20210405162827372"></li><li>è¯¥æ‰‡åŒºç¬¬ 510 ä¸ªå­—èŠ‚æ˜¯ <code>0x55</code>, ç¬¬ 511 ä¸ªå­—èŠ‚æ˜¯ <code>0xAA</code></li><li>è¯¥æ‰‡åŒºæœ‰ 512 ä¸ªå­—èŠ‚</li><li>å¤šä½™ç©ºé—´å¡« 0</li></ul></li></ul><h3 id="ç»ƒä¹ äºŒï¼šä½¿ç”¨-qemu-æ‰§è¡Œå¹¶è°ƒè¯•-lab-1-ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰"><a href="#ç»ƒä¹ äºŒï¼šä½¿ç”¨-qemu-æ‰§è¡Œå¹¶è°ƒè¯•-lab-1-ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰" class="headerlink" title="ç»ƒä¹ äºŒï¼šä½¿ç”¨ qemu æ‰§è¡Œå¹¶è°ƒè¯• lab 1 ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰"></a>ç»ƒä¹ äºŒï¼šä½¿ç”¨ qemu æ‰§è¡Œå¹¶è°ƒè¯• lab 1 ä¸­çš„è½¯ä»¶ï¼ˆåœ¨æŠ¥å‘Šä¸­å†™å‡ºç»ƒä¹ è¿‡ç¨‹ï¼‰</h3><ul><li><p><strong>ä¸ºäº†ç†Ÿæ‚‰ä½¿ç”¨ qemu å’Œ gdb è¿›è¡Œçš„è°ƒè¯•å·¥ä½œï¼Œå°ç»ƒä¹ ï¼š</strong></p><ol><li>ä» CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª BIOS çš„æ‰§è¡Œ</li><li>åœ¨åˆå§‹åŒ–ä½ç½®è®¾ç½® 0x7c00 è®¾ç½®æ—¶åœ°å€æ–­ç‚¹ï¼Œæµ‹è¯•æ–­ç‚¹æ­£å¸¸</li><li>ä» 0x7c00 å¼€å§‹è·Ÿè¸ªä»£ç è¿è¡Œï¼Œå°†å•æ­¥è·Ÿè¸ªåæ±‡ç¼–å¾—åˆ°çš„ä»£ç ä¸ bootasm.S å’Œ bootblock.asm è¿›è¡Œæ¯”è¾ƒ</li><li>è‡ªå·±æ‰¾ä¸€ä¸ª bootloader æˆ–å†…æ ¸ä¸­çš„ä»£ç ä½ç½®ï¼Œè®¾ç½®æ–­ç‚¹å¹¶è¿›è¡Œæµ‹è¯•</li></ol></li><li><p>æç¤ºï¼šå‚è€ƒ é™„å½•â€œå¯åŠ¨åç¬¬ä¸€æ¡æ‰§è¡Œçš„æŒ‡ä»¤â€ï¼Œå¯äº†è§£æ›´è¯¦ç»†çš„è§£é‡Šï¼Œä»¥åŠå¦‚ä½•å•æ­¥è°ƒè¯•å¹¶æŸ¥çœ‹ BIOS ä»£ç </p></li><li><p>æç¤ºï¼šæŸ¥çœ‹ <code>labcodes_answer/lab1_result/tools/lab1init </code>æ–‡ä»¶ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤è¯•è¯•å¦‚ä½•è°ƒè¯•bootloaderç¬¬ä¸€æ¡æŒ‡ä»¤ï¼š</p><ul><li>```<br>$ cd labcodes_answer/lab1_result/<br>$ make lab1-mon<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* **é»˜è®¤çš„ gdb éœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®æ‰è¿›è¡Œ qemu çš„è°ƒè¯•**ï¼Œqemu å’Œgdbä¹‹é—´ä½¿ç”¨ ç½‘ç»œç«¯å£ 1234 è¿›è¡Œé€šè®¯</span><br><span class="line"></span><br><span class="line">  * æ‰“å¼€qemu è¿›è¡Œæ¨¡æ‹Ÿä¹‹åï¼Œæ‰§è¡Œgdbå¹¶è¾“å…¥ `target remote local:1234`</span><br><span class="line">  * å¯è¿æ¥qemuï¼Œæ­¤æ—¶qemuè¿›å…¥åœæ­¢çŠ¶æ€ï¼Œå¬ä» gdb å‘½ä»¤</span><br><span class="line">* *gdb çš„åœ°å€æ–­ç‚¹*ï¼š</span><br><span class="line"></span><br><span class="line">  * `b *[åœ°å€]`ï¼šåœ¨æŒ‡å®šå†…å­˜åœ°å€è®¾ç½®æ–­ç‚¹ï¼Œå½“qemu ä¸­çš„ CPU æ‰§è¡Œåˆ°æŒ‡å®šåœ°å€æ—¶ï¼Œä¾¿ä¼šå°†æ§åˆ¶æƒäº¤ç»™ gdb</span><br><span class="line">* *å…³äºä»£ç çš„åæ±‡ç¼–*</span><br><span class="line"></span><br><span class="line">  * å¯èƒ½ gdb æ— æ³•æ­£ç¡®è·å– å½“å‰ qemu æ‰§è¡Œçš„æ±‡ç¼–æŒ‡ä»¤ï¼Œå¦‚ä¸‹é…ç½®å¯ä»¥åœ¨æ¯æ¬¡ gdb å‘½ä»¤è¡Œå‰å¼ºåˆ¶åæ±‡ç¼–å½“å‰çš„æŒ‡ä»¤ï¼Œåœ¨ gdb å‘½ä»¤è¡Œæˆ–é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š</span><br><span class="line"></span><br><span class="line">    * ```</span><br><span class="line">      define hook-stop</span><br><span class="line">      x/i $pc</span><br><span class="line">      end</span><br></pre></td></tr></table></figure></li></ul></li><li><p><em>gdb çš„å•æ­¥å‘½ä»¤ï¼š</em></p><ul><li>next ï¼š å•æ­¥åˆ°ç¨‹åºæºä»£ç çš„ä¸‹ä¸€è¡Œï¼Œä¸è¿›å…¥å‡½æ•°</li><li>nexti ï¼š ä½†ä¸ä¸€æ¡æœºå™¨æŒ‡ä»¤ï¼Œä¸è¿›å…¥å‡½æ•°</li><li>stepï¼šå•æ­¥åˆ°ä¸‹ä¸€ä¸ªä¸åŒçš„æºä»£ç è¡Œï¼ˆè¿›å…¥å‡½æ•°ï¼‰</li><li>stepiï¼šå•æ­¥ä¸€æ¡æœºå™¨æŒ‡ä»¤ï¼Œè¿›å…¥å‡½æ•°</li></ul></li></ul><h4 id="æŠ¥å‘Š-1"><a href="#æŠ¥å‘Š-1" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><h5 id="2-1-ä»CPU-åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª-BIOS-çš„æ‰§è¡Œ"><a href="#2-1-ä»CPU-åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª-BIOS-çš„æ‰§è¡Œ" class="headerlink" title="2.1 ä»CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª BIOS çš„æ‰§è¡Œ"></a>2.1 ä»CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹ï¼Œå•æ­¥è·Ÿè¸ª BIOS çš„æ‰§è¡Œ</h5><ul><li><p>é™„å½•ï¼š<strong>å•æ­¥è°ƒè¯•å’ŒæŸ¥çœ‹ BIOS ä»£ç </strong></p><ol><li><p>ä¿®æ”¹ <code> lab1/tools/gdbinit</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set architecture i8086</span><br><span class="line">target remote :1234</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ lab 1 ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ <code>make debug</code></p><p>è¿™æ—¶ï¼Œgdb åœåœ¨ BIOS çš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¤„ï¼š<code>0xffff0: ljmp $0xf000, $0xe05b</code></p></li><li><p>åœ¨è¿›å…¥ gdb è°ƒè¯•ç•Œé¢åï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ° BIOS åœ¨æ‰§è¡Œäº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">si</span><br><span class="line">si</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>æ­¤æ—¶çš„ <code>CS=0xf, IP=fff0</code>,å¦‚æœæƒ³çœ‹ BIOS ä»£ç </p><p><code>x /2i 0xffff0</code></p><p>å¯ä»¥çœ‹åˆ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0xffff0: ljmp $0xf000,$0xe05b</span><br><span class="line">0xffff5: xor %dh,0x322f</span><br></pre></td></tr></table></figure><p>è¿›ä¸€æ­¥æ‰§è¡Œ <code>x /10i 0xfe05b</code></p><p>å¯ä»¥çœ‹åˆ°åç»­ä»£ç </p></li></ol></li><li><p><code>gdbinit  </code>åŸå†…å®¹ä¸ºï¼šå¯¹å†…æ ¸ä»£ç è¿›è¡Œè°ƒè¯•ï¼Œå¹¶ä¸”å°†æ–­ç‚¹è®¾ç½®åœ¨å†…æ ¸ä»£ç çš„å…¥å£åœ°å€ï¼Œå³ <code>kern_intit</code>  å‡½æ•°</p><ul><li>```<br>file bin/kernel            //å¯¹å†…æ ¸ä»£ç è¿›è¡Œè°ƒè¯•<br>target remote :1234<br>break kern_init            //å°†æ–­ç‚¹è®¾ç½®åœ¨kern_init<br>continue<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* ä¸ºäº†ä»CPU åŠ ç”µåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¼€å§‹è°ƒè¯•ï¼Œå°† `gdbinit`å†…å®¹æ”¹ä¸ºï¼š</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    set architecture i8086//æ”¹åŠ¨</span><br><span class="line"></span><br><span class="line">    target remote :1234</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ‰§è¡Œ <code>make debug</code>ï¼šå¼¹å‡º QEMU å’Œ Terminalçª—å£ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ Makefile ä¸­å®šä¹‰äº†debugçš„æ“ä½œæ­£æ˜¯å¯åŠ¨ QEMUã€Terminalå¹¶åœ¨å…¶ä¸­è¿è¡Œ gdb</p><ul><li><p>-hda file: ç¡¬ç›˜é€‰é¡¹</p></li><li><p>-S : å¯åŠ¨çš„æ—¶å€™ä¸ç›´æ¥ä»CPUå¯åŠ¨ï¼Œéœ€è¦åœ¨çª—å£ä¸­æŒ‰ c æ¥ç»§ç»­</p></li><li><p>-parallel dev : é‡å®šå‘è™šæ‹Ÿ<strong>å¹¶å£</strong>åˆ°ä¸»æœºè®¾å¤‡</p></li><li><p>-serial devï¼šé‡å®šå‘è™šæ‹Ÿ<strong>ä¸²å£</strong>åˆ°ä¸»æœºè®¾å¤‡</p><ul><li>vc: è™šæ‹Ÿæ§åˆ¶å°</li><li>ptyï¼šä»…ä»…linuxæœ‰æ•ˆï¼Œè™šæ‹Ÿttyï¼ˆä¸€ä¸ªè™šæ‹Ÿä¼ªç»ˆç«¯ä¼šè¢«ç«‹åˆ»åˆ†é…</li><li>noneï¼šæ²¡æœ‰è®¾å¤‡è¢«åˆ†é…</li><li>nullï¼šæ— æ•ˆè®¾å¤‡</li></ul></li><li><p>gdbï¼š</p><ul><li>-x ï¼šä»æ–‡ä»¶ä¸­æ‰§è¡Œ gdb</li><li>-qï¼šä¸è¦æ‰“å°ä»‹ç»å’Œç‰ˆæƒä¿¡æ¯</li><li>-tuiï¼šå¯ä»¥å°†ç»ˆç«¯å±å¹•åˆ†æˆæºæ–‡æœ¬çª—å£å’Œæ§åˆ¶å°çš„å¤šä¸ªå­çª—å£</li></ul></li><li><p>```<br>debug: $(UCOREIMG)</p><pre><code>$(V)$(QEMU) -S -s -parallel stdio -hda $&lt; -serial null &amp;    $(V)sleep 2$(V)$(TERMINAL) -e &quot;gdb -q -tui -x tools/gdbinit&quot;</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">* `make debug` : Terminal çª—å£æ­¤æ—¶åœåœ¨ `0x0000fff0`ä½ç½®ï¼Œè¿™æ˜¯ eip å¯„å­˜å™¨çš„å€¼</span><br><span class="line"></span><br><span class="line">      è€Œcs å¯„å­˜å™¨çš„å€¼ä¸º`0xf000`</span><br><span class="line"></span><br><span class="line">  ![image-20210406205944058](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406205944058.png)</span><br><span class="line">* è¾“å…¥ `si`ï¼Œæ‰§è¡Œä¸€æ­¥, eip å˜æˆ `0xe05b`ï¼Œè€Œcs ä¸å˜</span><br><span class="line"></span><br><span class="line">  * ![image-20210406210105732](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406210105732.png)</span><br><span class="line"></span><br><span class="line">##### 2.2 åœ¨åˆå§‹åŒ–ä½ç½®è®¾ç½® 0x7c00 è®¾ç½®æ—¶åœ°å€æ–­ç‚¹ï¼Œæµ‹è¯•æ–­ç‚¹æ­£å¸¸</span><br><span class="line"></span><br><span class="line">* `break *adress`: åœ¨æŒ‡å®šåœ°å€å¤„è®¾ç½®æ–­ç‚¹ï¼Œä¸€èˆ¬åœ¨æ²¡æœ‰æºä»£ç æ—¶ä½¿ç”¨</span><br><span class="line">* è¾“å…¥ `break *0x7c00`</span><br><span class="line">* è¾“å…¥ `continue`</span><br><span class="line"></span><br><span class="line">  * ![image-20210406210223703](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406210223703.png)</span><br><span class="line"></span><br><span class="line">##### 2.3 ä» 0x7c00 å¼€å§‹è·Ÿè¸ªä»£ç è¿è¡Œï¼Œå°†å•æ­¥è·Ÿè¸ªåæ±‡ç¼–å¾—åˆ°çš„ä»£ç ä¸ bootasm.S å’Œ bootblock.asm è¿›è¡Œæ¯”è¾ƒ</span><br><span class="line"></span><br><span class="line">* `x/10i $pc`:æ˜¾ç¤ºç¨‹åºå½“å‰ä½ç½®å¼€å§‹å¾€å 10 æ¡æ±‡ç¼–æŒ‡ä»¤</span><br><span class="line">* è¾“å…¥ `x/10i $pc`</span><br><span class="line"></span><br><span class="line">  * ![image-20210406210251460](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210406210251460.png)</span><br><span class="line"></span><br><span class="line">##### 2.4 è‡ªå·±æ‰¾ä¸€ä¸ª bootloader æˆ–å†…æ ¸ä¸­çš„ä»£ç ä½ç½®ï¼Œè®¾ç½®æ–­ç‚¹å¹¶è¿›è¡Œæµ‹è¯•</span><br><span class="line"></span><br><span class="line">* è°ƒè¯• bootblock çš„ä»£ç </span><br><span class="line">* è®¾ç½®æ–­ç‚¹ä¸º 0x7c00åœ°å€ å¤„</span><br><span class="line">* ä¿®æ”¹ `tools/gdbinit`ä¸º</span><br><span class="line"></span><br><span class="line">  * ```</span><br><span class="line">    //tools/gdbinit&quot;  </span><br><span class="line">    file obj/bootblock.o </span><br><span class="line">    target remote :1234 </span><br><span class="line">    set architecture i8086 </span><br><span class="line">    b *0x7c00 </span><br><span class="line">    continue </span><br><span class="line">    x /10i $pc</span><br></pre></td></tr></table></figure></li><li><p>![image-20210405213757021](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210405213757021.png)</p></li><li><p>![image-20210405213817816](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210405213817816.png)</p></li></ul></li></ul><h3 id="ç»ƒä¹ ä¸‰ï¼šåˆ†æ-bootloader-è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹"><a href="#ç»ƒä¹ ä¸‰ï¼šåˆ†æ-bootloader-è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹" class="headerlink" title="ç»ƒä¹ ä¸‰ï¼šåˆ†æ bootloader è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹"></a>ç»ƒä¹ ä¸‰ï¼šåˆ†æ bootloader è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„è¿‡ç¨‹</h3><ul><li><strong>BIOS</strong> å°†é€šè¿‡<strong>è¯»å–ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºåˆ°å†…å­˜</strong>ï¼Œå¹¶è·³è½¬åˆ°å¯¹åº”å†…å­˜ä¸­çš„ä½ç½®æ‰§è¡Œ bootloader</li><li>åˆ†æ bootloader å¦‚ä½•ä»å®æ¨¡å¼è¿›å…¥ä¿æŠ¤æ¨¡å¼</li><li>éœ€è¦é˜…è¯»ï¼š<strong>ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶</strong> å’Œ <code>lab1/boot/bootasm.S</code> æºç ï¼Œ<ul><li>ä¸ºä½•å¼€å¯ A20 ï¼Œä»¥åŠå¦‚ä½•å¼€å¯</li><li>å¦‚ä½•åˆå§‹åŒ– GDT è¡¨</li><li>å¦‚ä½• ä½¿èƒ½ å’Œ è¿›å…¥ä¿æŠ¤æ¨¡å¼</li></ul></li></ul><h4 id="æŠ¥å‘Š-2"><a href="#æŠ¥å‘Š-2" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><p>bootloader ä»å®æ¨¡å¼è¿›å…¥ä¿æŠ¤æ¨¡å¼çš„ä»£ç  ä¿æŒåœ¨ <code>lab1/boot/bootasm.S</code> ä¸­</p><h5 id="ä¸ºä½•å¼€å¯-A20-ï¼Œ-å¦‚ä½•å¼€å¯A-20"><a href="#ä¸ºä½•å¼€å¯-A20-ï¼Œ-å¦‚ä½•å¼€å¯A-20" class="headerlink" title="ä¸ºä½•å¼€å¯ A20 ï¼Œ å¦‚ä½•å¼€å¯A 20"></a>ä¸ºä½•å¼€å¯ A20 ï¼Œ å¦‚ä½•å¼€å¯A 20</h5><ul><li><p>bootloader çš„å…¥å£ ä¸º start</p></li><li><p>bootloader ä¼šè¢« BIOS åŠ è½½åˆ°å†…å­˜ <code>0x7c00</code> å¤„ <code>cs = 0, eip = 0x7c</code></p></li><li><p>åˆšè¿›å…¥ bootloader æ—¶ï¼Œå…ˆæ‰§è¡Œï¼š</p><ul><li>![image-20210407191652178](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407191652178.png)</li><li>å…³é—­ä¸­æ–­</li><li>æ¸…é™¤ <code>EFLAGS</code> çš„ <code> DF</code> ä½</li><li>å°† <code>axã€dsã€esã€ss</code> åˆå§‹åŒ–ä¸º0</li></ul></li><li><p><strong>ä¸ºä½•å¼€å¯ A20 :</strong></p><ul><li>ä¸ºäº†ä½¿å¾— CPU è¿›å…¥ä¿æŠ¤æ¨¡å¼åï¼Œèƒ½å……åˆ†ä½¿ç”¨ 32 ä½çš„å¯»å€èƒ½åŠ›</li></ul></li><li><p><strong>å¦‚ä½•å¼€å¯ A20ï¼š</strong></p><ul><li>ç­‰å¾… 8042 æ§åˆ¶å™¨ Input Bufferä¸ºç©º</li><li>å‘é€ P2å‘½ä»¤åˆ°Input Buffer</li><li>ç­‰å¾… Input Buffer ä¸ºç©º</li><li>å°† P2 å¾—åˆ°çš„ç¬¬äºŒä¸ªä½ï¼ˆA20é€‰é€šï¼‰ç½®ä¸º1</li><li>å†™å›Input Buffer</li></ul></li><li><p>é¦–å…ˆï¼Œä»0x64å†…å­˜åœ°å€ä¸­ï¼ˆæ˜ å°„åˆ°8042çš„status registerï¼‰ä¸­è¯»å–8042çš„çŠ¶æ€ï¼Œç›´åˆ°è¯»å–åˆ°çš„è¯¥å­—èŠ‚çš„ç¬¬äºŒä½ï¼ˆinput bufferï¼‰ä¸º0ï¼Œè¡¨ç¤ºæ­¤æ—¶ input bufferä¸­æ— æ•°æ®</p><ul><li>![image-20210407194037024](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194037024.png)</li></ul></li><li><p>æ¥ä¸‹æ¥å‘ 0x64 ä¸­å†™å…¥ 0xd1 å‘½ä»¤ï¼Œè¡¨ç¤ºä¿®æ”¹ 8042 P2 port</p><ul><li>![image-20210407194155534](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194155534.png)</li></ul></li><li><p>æ¥ä¸‹æ¥ç­‰å¾… input bufferä¸ºç©º</p><ul><li>![image-20210407194234798](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194234798.png)</li></ul></li><li><p>æ¥ä¸‹æ¥ï¼Œå‘ 0x60 ç«¯å£å†™å…¥ 0xdf, è¡¨ç¤ºå°† P2 portçš„ç¬¬äºŒä¸ªä½ï¼ˆA20ï¼‰é€‰é€šï¼Œç½®ä¸º1</p><ul><li>![image-20210407194403140](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194403140.png)</li></ul></li><li></li></ul><h5 id="å¦‚ä½•åˆå§‹åŒ–-GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰"><a href="#å¦‚ä½•åˆå§‹åŒ–-GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰" class="headerlink" title="å¦‚ä½•åˆå§‹åŒ– GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰"></a>å¦‚ä½•åˆå§‹åŒ– GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰</h5><ul><li>åœ¨ bootasm.S ä¸­å·²ç»é™æ€çš„æè¿°äº†ä¸€ä¸ªç®€å•çš„ GDT<ul><li>![image-20210407194832302](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407194832302.png)</li><li>GDT ä¸­ä»£ç æ®µå’Œæ•°æ®æ®µ çš„baseå‡è®¾ç½®ä¸ºäº† 0</li><li>è€Œ limitè®¾ç½®ä¸ºäº† 2^32-1 å³ 4 Gï¼Œä½¿å¾—é€»è¾‘åœ°å€ç­‰äºçº¿æ€§åœ°å€</li></ul></li></ul><h5 id="å¦‚ä½•-ä½¿èƒ½-å’Œ-è¿›å…¥ä¿æŠ¤æ¨¡å¼"><a href="#å¦‚ä½•-ä½¿èƒ½-å’Œ-è¿›å…¥ä¿æŠ¤æ¨¡å¼" class="headerlink" title="å¦‚ä½• ä½¿èƒ½ å’Œ è¿›å…¥ä¿æŠ¤æ¨¡å¼"></a>å¦‚ä½• ä½¿èƒ½ å’Œ è¿›å…¥ä¿æŠ¤æ¨¡å¼</h5><ul><li>åªéœ€è¦å°†cr0 å¯„å­˜å™¨çš„PEä½ ç½®ä¸º1ï¼Œå³å¯åˆ‡æ¢è‡³ä¿æŠ¤æ¨¡å¼<ul><li>A20 å¼€å¯åï¼Œ<code>lgdt gdtdesc</code> å¯è½½å…¥å…¨å±€æè¿°ç¬¦è¡¨</li><li>![image-20210407195211157](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407195211157.png)</li></ul></li><li>ä½¿ç”¨é•¿è·³è½¬æŒ‡ä»¤ , å°† cs ä¿®æ”¹ä¸º 32 ä½å¯„å­˜å™¨ï¼Œå¹¶ä¸”è·³è½¬åˆ° protcseg è¿™ä¸€32ä½ä»£ç å…¥å£ï¼Œæ­¤æ—¶CPUè¿›å…¥32ä½æ¨¡å¼ï¼š<ul><li>![image-20210407195333677](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407195333677.png)</li></ul></li></ul><h3 id="ç»ƒä¹ å››ï¼šåˆ†æ-bootloader-åŠ è½½-ELF-æ ¼å¼çš„-OS-çš„è¿‡ç¨‹"><a href="#ç»ƒä¹ å››ï¼šåˆ†æ-bootloader-åŠ è½½-ELF-æ ¼å¼çš„-OS-çš„è¿‡ç¨‹" class="headerlink" title="ç»ƒä¹ å››ï¼šåˆ†æ bootloader åŠ è½½ ELF æ ¼å¼çš„ OS çš„è¿‡ç¨‹"></a>ç»ƒä¹ å››ï¼šåˆ†æ bootloader åŠ è½½ ELF æ ¼å¼çš„ OS çš„è¿‡ç¨‹</h3><p>è¦æ±‚ï¼š</p><ul><li>é€šè¿‡é˜…è¯» <code>bootmain.c</code>, äº†è§£ bootloader å¦‚ä½•åŠ è½½ ELF æ–‡ä»¶</li><li>é€šè¿‡åˆ†ææºä»£ç å’Œé€šè¿‡ qemu æ¥è¿è¡Œ å¹¶è°ƒè¯•bootloaderå’ŒOS<ul><li>bootloader å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº</li><li>bootloader å¦‚ä½•åŠ è½½ ELF æ ¼å¼çš„ OS</li></ul></li></ul><h4 id="æŠ¥å‘Š-3"><a href="#æŠ¥å‘Š-3" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><h5 id="bootloader-å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº"><a href="#bootloader-å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº" class="headerlink" title="bootloader å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº"></a>bootloader å¦‚ä½•è¯»å–ç¡¬ç›˜æ‰‡åŒº</h5><p>å¯¹ bootmain.c ä¸­ä¸è¯»å–ç¡¬ç›˜æ‰‡åŒºä»£ç åˆ†æï¼š</p><ul><li><p>é¦–å…ˆï¼Œ<code>waitdisk</code>, è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯è¿ç»­ä¸æ–­åœ°ä» <code>0x1f7</code>åœ°å€ï¼Œè¯»å–ç£ç›˜çš„çŠ¶æ€ï¼Œç›´åˆ°ç£ç›˜ä¸å¿™ä¸ºæ­¢</p><ul><li>![image-20210407204024075](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407204024075.png)</li></ul></li><li><p>æ¥ä¸‹æ¥ï¼Œ<code>readsect</code>, è¯»å–ä¸€ä¸ªç¡¬ç›˜æ‰‡åŒºï¼Œ</p><ul><li><p>```c<br>static void<br>readsect(void *dst, uint32_t secno) {</p><pre><code>waitdisk(); // ç­‰å¾…ç£ç›˜åˆ°ä¸å¿™ä¸ºæ­¢outb(0x1F2, 1);             // å¾€0X1F2åœ°å€ä¸­å†™å…¥è¦è¯»å–çš„æ‰‡åŒºæ•°ï¼Œç”±äºæ­¤å¤„éœ€è¦è¯»ä¸€ä¸ªæ‰‡åŒºï¼Œå› æ­¤å‚æ•°ä¸º1outb(0x1F3, secno &amp; 0xFF); // è¾“å…¥LBAå‚æ•°çš„0...7ä½ï¼›outb(0x1F4, (secno &gt;&gt; 8) &amp; 0xFF); // è¾“å…¥LBAå‚æ•°çš„8-15ä½ï¼›outb(0x1F5, (secno &gt;&gt; 16) &amp; 0xFF); // è¾“å…¥LBAå‚æ•°çš„16-23ä½ï¼›outb(0x1F6, ((secno &gt;&gt; 24) &amp; 0xF) | 0xE0); // è¾“å…¥LBAå‚æ•°çš„24-27ä½ï¼ˆå¯¹åº”åˆ°0-3ä½ï¼‰ï¼Œç¬¬å››ä½ä¸º0è¡¨ç¤ºä»ä¸»ç›˜è¯»å–ï¼Œå…¶ä½™ä½è¢«å¼ºåˆ¶ç½®ä¸º1ï¼›outb(0x1F7, 0x20);                      // å‘ç£ç›˜å‘å‡ºè¯»å‘½ä»¤0x20waitdisk(); // ç­‰å¾…ç£ç›˜ç›´åˆ°ä¸å¿™insl(0x1F0, dst, SECTSIZE / 4); // ä»æ•°æ®ç«¯å£0x1F0è¯»å–æ•°æ®ï¼Œé™¤ä»¥4æ˜¯å› ä¸ºæ­¤å¤„æ˜¯ä»¥4ä¸ªå­—èŠ‚ä¸ºå•ä½çš„ï¼Œè¿™ä¸ªä»æŒ‡ä»¤æ˜¯ä»¥l(long)ç»“å°¾è¿™ç‚¹å¯ä»¥æ¨æµ‹å‡ºæ¥ï¼›</code></pre><p>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">  * **è¯»å–ç£ç›˜æ‰‡åŒºçš„è¿‡ç¨‹ï¼š**</span><br><span class="line"></span><br><span class="line">    * ç­‰å¾…ç£ç›˜ä¸å¿™</span><br><span class="line">    * å‘ `0x1f2-0x1f6`ä¸­ è®¾ç½®è¯»å–æ‰‡åŒºéœ€è¦çš„å‚æ•°ï¼Œ</span><br><span class="line">      * è¯»å–çš„æ‰‡åŒºæ•°</span><br><span class="line">      * LBA å‚æ•°</span><br><span class="line">    * å‘ `0x1f7`å‘é€å‘½ä»¤ `0X20`â€”â€”è¯»å‘½ä»¤</span><br><span class="line">    * ç­‰å¾…ç£ç›˜å®Œæˆè¯»æ“ä½œ</span><br><span class="line">    * ä»æ•°æ®ç«¯å£ `0x1f0`è¯»å–æ•°æ®åˆ°æŒ‡å®šå†…å­˜ä¸­</span><br><span class="line">* å¦å¤–ä¸€ä¸ªä¸è¯»å–ç£ç›˜ç›¸å…³çš„å‡½æ•° `readseg`ï¼Œ</span><br><span class="line"></span><br><span class="line">  * å°† `readsec`è¿›ä¸€æ­¥å°è£…</span><br><span class="line">  * æä¾›èƒ½å¤Ÿä»ç£ç›˜ ç¬¬äºŒä¸ªæ‰‡åŒºèµ·ï¼ˆkernelï¼‰ offset ä¸ªä½ç½®å¤„ï¼Œè¯»å– count ä¸ªå­—èŠ‚åˆ°æŒ‡å®šå†…å­˜</span><br><span class="line">  * `readsec` åªèƒ½å¯¹æ•´ä¸ªæ‰‡åŒºè¿›è¡Œè¯»å–</span><br><span class="line"></span><br><span class="line">##### bootloader å¦‚ä½•å°† ELF æ ¼å¼çš„ OS åŠ è½½å…¥å†…å­˜</span><br><span class="line"></span><br><span class="line">* bootloader åŠ è½½ ELF æ ¼å¼çš„ OS ä»£ç ä½äºÂ·`bootmain.c` ä¸­çš„ bootmain å‡½æ•°</span><br><span class="line">  * **é¦–å…ˆï¼Œ**ä»ç£ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼ˆkernelï¼Œç¬¬é›¶ä¸ªæ‰‡åŒºä¸ºbootloaderï¼‰ä¸­è¯»å–kernelæœ€å¼€å§‹çš„ 4 KBä»£ç ï¼Œç„¶ååˆ¤æ–­æœ€å¼€å§‹çš„å››ä¸ªå­—èŠ‚æ˜¯å¦ç­‰äºæŒ‡å®šçš„ `ELF_MAGIC`, ç”¨äºåˆ¤æ–­ ELF headeræ˜¯å¦åˆæ³•</span><br><span class="line">    * ![image-20210407205626699](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407205626699.png)</span><br><span class="line">  * **æ¥ä¸‹æ¥**ï¼Œä» `ELFHDR `â€”â€”ELF å¤´æ–‡ä»¶ä¸­è·å–åˆ° `program header`**è¡¨**çš„ä½ç½®ï¼Œä»¥åŠè¯¥è¡¨çš„å…¥å£æ•°ç›®ï¼Œç„¶åéå†è¯¥è¡¨æ¯ä¸€é¡¹ï¼Œå¹¶ä¸”ä»æ¯ä¸€ä¸ªprogram headerä¸­è·å–åˆ° **æ®µ** åº”è¯¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­çš„ä½ç½®ï¼ˆLoad Addressï¼Œè™šæ‹Ÿåœ°å€ï¼‰ï¼Œä»¥åŠæ®µçš„å¤§å°ï¼Œç„¶åè°ƒç”¨ `readseg` å‡½æ•°å°†æ¯ä¸€ä¸ªæ®µåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè‡³æ­¤å®Œæˆäº†å°† OS åŠ è½½åˆ°å†…å­˜ä¸­çš„æ“ä½œ</span><br><span class="line">    * ![image-20210407210008007](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407210008007.png)</span><br><span class="line">  * **æœ€å**ï¼Œä» `ELFHDR`â€”â€”ELF å¤´æ–‡ä»¶ä¸­æŸ¥è¯¢åˆ° OS kernelçš„**å…¥å£åœ°å€**ï¼Œç„¶åä½¿ç”¨å‡½æ•°è°ƒç”¨çš„æ–¹å¼è·³è½¬åˆ°è¯¥åœ°å€</span><br><span class="line">    * ![image-20210407210213172](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210407210213172.png)</span><br><span class="line"></span><br><span class="line">### ç»ƒä¹ äº”ï¼šå®ç°å‡½æ•°è°ƒç”¨å †æ ˆè·Ÿè¸ªå‡½æ•°</span><br><span class="line"></span><br><span class="line">* åœ¨ `lab1` ä¸­å®Œæˆ `kdebug.c` ä¸­å‡½æ•° `print_stackframe`çš„å®ç°</span><br><span class="line"></span><br><span class="line">  * å¯ä»¥é€šè¿‡è¯¥å‡½æ•° è·Ÿè¸ªå‡½æ•°è°ƒç”¨å †æ ˆä¸­è®°å½•çš„è¿”å›åœ°å€</span><br><span class="line">* è‹¥èƒ½æ­£ç¡®å®ç°è¯¥å‡½æ•°ï¼Œ`make qemu`åï¼š</span><br><span class="line"></span><br><span class="line">  * ```bash</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    ebp:0x00007b28 eip:0x00100992 args:0x00010094 0x00010094 0x00007b58 0x00100096</span><br><span class="line">        kern/debug/kdebug.c:305: print_stackframe+22</span><br><span class="line">    ebp:0x00007b38 eip:0x00100c79 args:0x00000000 0x00000000 0x00000000 0x00007ba8</span><br><span class="line">        kern/debug/kmonitor.c:125: mon_backtrace+10</span><br><span class="line">    ebp:0x00007b58 eip:0x00100096 args:0x00000000 0x00007b80 0xffff0000 0x00007b84</span><br><span class="line">        kern/init/init.c:48: grade_backtrace2+33</span><br><span class="line">    ebp:0x00007b78 eip:0x001000bf args:0x00000000 0xffff0000 0x00007ba4 0x00000029</span><br><span class="line">        kern/init/init.c:53: grade_backtrace1+38</span><br><span class="line">    ebp:0x00007b98 eip:0x001000dd args:0x00000000 0x00100000 0xffff0000 0x0000001d</span><br><span class="line">        kern/init/init.c:58: grade_backtrace0+23</span><br><span class="line">    ebp:0x00007bb8 eip:0x00100102 args:0x0010353c 0x00103520 0x00001308 0x00000000</span><br><span class="line">        kern/init/init.c:63: grade_backtrace+34</span><br><span class="line">    ebp:0x00007be8 eip:0x00100059 args:0x00000000 0x00000000 0x00000000 0x00007c53</span><br><span class="line">        kern/init/init.c:28: kern_init+88</span><br><span class="line">    ebp:0x00007bf8 eip:0x00007d73 args:0xc031fcfa 0xc08ed88e 0x64e4d08e 0xfa7502a8</span><br><span class="line">    &lt;unknow&gt;: -- 0x00007d72 â€“</span><br><span class="line">    â€¦â€¦</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å‰ç½®çŸ¥è¯†ï¼šå‡½æ•°å †æ ˆï¼š</p><ul><li>äº†è§£ç¼–è¯‘å™¨å¦‚ä½•å»ºç«‹<strong>å‡½æ•°è°ƒç”¨å…³ç³»</strong></li><li>æŸ¥çœ‹ <code>bootblock.asm</code>, äº†è§£bootloaderæºç ä¸æœºå™¨ç çš„è¯­å¥å’Œåœ°å€ç­‰å¯¹åº”å…³ç³»</li><li>æŸ¥çœ‹ <code>kernel.asm</code>, äº†è§£ ucore æºç ä¸æœºå™¨ç çš„è¯­å¥å’Œåœ°å€ç­‰å¯¹åº”å…³ç³»</li><li>å®Œæˆ <code>kern/debug/kdebug.c::print_stackframe</code>çš„å®ç°</li></ul></li></ul><h4 id="æŠ¥å‘Š-4"><a href="#æŠ¥å‘Š-4" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><p>å‰æçŸ¥è¯†ï¼š</p><p>ä¸€èˆ¬è€Œè¨€ï¼š<code>ss:[ebp+4]</code>ä¸º<strong>è¿”å›åœ°å€</strong>ï¼Œ<code>ss:[ebp+8]</code>ä¸º<strong>ç¬¬ä¸€ä¸ªå‚æ•°å€¼ï¼ˆ</strong>æœ€åä¸€ä¸ªå…¥æ ˆï¼‰,<code>ss:[ebp-4]</code>ä¸ºç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œ<code>ss:[ebp]</code>ä¸º<strong>ä¸Šä¸€å±‚ ebp å€¼</strong></p><ul><li><strong>ebp ä¸­çš„åœ°å€å¤„æ€»æ˜¯ä¸Šä¸€å±‚å‡½æ•°è°ƒç”¨æ—¶ ebp çš„å€¼</strong></li><li>è€Œæ¯ä¸€å±‚å‡½æ•°è°ƒç”¨ä¸­ï¼Œéƒ½èƒ½é€šè¿‡å½“æ—¶çš„ ebp å€¼ï¼Œ<strong>å‘ä¸Šï¼ˆæ ˆåº•æ–¹å‘ï¼‰è·å–è¿”å›åœ°å€ï¼Œå‚æ•°å€¼ï¼›å‘ä¸‹ï¼ˆæ ˆé¡¶æ–¹å‘ï¼‰è·å–å‡½æ•°å±€éƒ¨å˜é‡å€¼</strong></li><li>ç”±æ­¤å½¢æˆé€’å½’ï¼Œç›´è‡³åˆ°è¾¾æ ˆåº•ï¼Œè¿™å°±æ˜¯å‡½æ•°è°ƒç”¨æ ˆ</li></ul><p>æˆ‘çš„åšæ³•ï¼š</p><ul><li><p>å°è¯•æ ¹æ®ä»–çš„æ³¨é‡Šæ¥åšï¼š</p><ul><li><p>![image-20210409150011984](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210409150011984.png)</p></li><li><p>(1) è°ƒç”¨ å‡½æ•° <code>read_ebp()</code>å¾—åˆ° ebpçš„å€¼</p></li><li><p>(2) è°ƒç”¨å‡½æ•° <code>read_eip()</code> å¾—åˆ° eipçš„å€¼</p></li><li><p>(3) å¯¹äºæ ˆå¸§ <code>0-STACKFRAME_DEPTH</code></p><ul><li><p>ä½¿ç”¨ <code>cprintf</code>è¾“å‡º ebpå’Œeipçš„å€¼</p></li><li><p>æœ‰äº†ebpçš„å€¼ï¼Œéœ€è¦æˆ‘ä»¬æ‰“å°å‰å››ä¸ªå‚æ•°å€¼ï¼Œè€Œæˆ‘ä»¬çŸ¥é“ ç¬¬ä¸€ä¸ªå‚æ•°å€¼ åœ¨ <code>ss:[ebp+8]</code>ï¼Œå¯ç”¨ <code>(uint32_t*)ï¼ˆebp+8ï¼‰</code>å–å¾—è¯¥å†…å­˜åœ°å€çš„å€¼</p></li><li><p>ä½¿ç”¨ <code>print_debuginfo()</code>æ‰“å°å‡½æ•°å</p></li><li><p><em>è·å–ä¸Šä¸€å±‚å‡½æ•°çš„è¿”å›åœ°å€å’Œebpçš„å€¼</em></p><ul><li><blockquote><p>æ ¹æ®åŠ¨æ€é“¾æŸ¥æ‰¾å½“å‰å‡½æ•°çš„è°ƒç”¨è€…(caller)çš„æ ˆå¸§, æ ¹æ®çº¦å®šï¼Œcallerçš„æ ˆå¸§çš„base pointerå­˜æ”¾åœ¨calleeçš„ebpæŒ‡å‘çš„å†…å­˜å•å…ƒï¼Œå°†å…¶æ›´æ–°åˆ°ebpä¸´æ—¶å˜é‡ä¸­ï¼ŒåŒæ—¶å°†eip(ä»£ç ä¸­å¯¹åº”çš„å˜é‡ä¸ºra)æ›´æ–°ä¸ºè°ƒç”¨å½“å‰å‡½æ•°çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨ä½ç½®ï¼ˆreturn addressï¼‰ï¼Œå…¶æ ¹æ®çº¦å®šå­˜æ”¾åœ¨ebp+4æ‰€åœ¨çš„å†…å­˜å•å…ƒä¸­ï¼›</p></blockquote><blockquote><p>å¦‚æœebpéé›¶å¹¶ä¸”æ²¡æœ‰è¾¾åˆ°è§„å®šçš„ <code>STACKFRAME DEPTH</code>çš„ä¸Šé™ï¼Œåˆ™è·³è½¬åˆ°2ï¼Œç»§ç»­å¾ªç¯æ‰“å°æ ˆä¸Šæ ˆå¸§å’Œå¯¹åº”å‡½æ•°çš„ä¿¡æ¯ï¼›</p></blockquote></li></ul></li></ul></li></ul></li><li><p><strong>unknownï¼š</strong></p><ul><li><code>*(uint32_t*)x</code>: xæ˜¯ä¸€ä¸ªåœ°å€ï¼Œ<code>(unint32_t*)å°†xå¼ºåˆ¶è½¬æ¢æˆæŒ‡å‘unint32_tçš„æŒ‡é’ˆ</code></li><li><code>read_ebp()</code></li><li><code>read_eip()</code></li><li><code>STACKFRAME_DEPTH</code></li><li><code>cprintf(&quot;\n&quot;)</code></li><li><code>print_debuginfo()</code></li></ul></li><li><p>```C<br>void print_stackframe(void) {</p><pre><code>uint32_t value_ebp = read_ebp();uint32_t value_eip = read_eip();for(int i = 0; i&lt;STACKFRAME_DEPTH; i++)&#123;    cprintf(&quot;ebp: 0x%08x eip:0x%08x&quot;,value_ebp, value_eip);    cprintf(&quot;arguments: &quot;);    uint32_t* p = (uint32_t*)(value_ebp+8);    cprintf(&quot;0x%08x 0x%08x 0x%08x 0x%08x &quot;,p[0],p[1],p[2],p[3]);     //(uint32_t)calling arguments [0..4] = the contents in address (uint32_t)ebp +2 [0..4]    cprintf(&quot;\n&quot;);    print_debuginfo(value_eip-1);    value_eip = *(uint32_t*)(value_ebp+4);    value_ebp = *(uint32_t*)(value_ebp);    //popup a calling stackframe&#125;</code></pre></li></ul><p>  }<br>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* ![image-20210409161023480](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210409161023480.png)</span><br><span class="line">* å®ç°å‡½æ•°</span><br><span class="line"></span><br><span class="line">1. é¦–å…ˆä½¿ç”¨read_ebpå’Œread_eipå‡½æ•°è·å–å½“å‰stack frameçš„base pointerä»¥åŠ `call read_eip`è¿™æ¡æŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œå­˜å…¥ebp, eipä¸¤ä¸ªä¸´æ—¶å˜é‡ä¸­ï¼›</span><br><span class="line">2. æ¥ä¸‹æ¥ä½¿ç”¨cprintå‡½æ•°æ‰“å°å‡ºebp, eipçš„æ•°å€¼ï¼›</span><br><span class="line">3. æ¥ä¸‹æ¥æ‰“å°å‡ºå½“å‰æ ˆå¸§å¯¹åº”çš„å‡½æ•°å¯èƒ½çš„å‚æ•°ï¼Œæ ¹æ®cè¯­è¨€ç¼–è¯‘åˆ°x86æ±‡ç¼–çš„çº¦å®šï¼Œå¯ä»¥çŸ¥é“å‚æ•°å­˜æ”¾åœ¨ebp+8æŒ‡å‘çš„å†…å­˜ä¸Šï¼ˆæ ˆï¼‰ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ª...å‚æ•°æ‰€åœ¨çš„å†…å­˜åœ°å€åˆ†åˆ«ä¸ºebp+8, ebp+12, ebp+16, ...ï¼Œæ ¹æ®è¦æ±‚è¯»å–å‡ºå½“å‰å‡½æ•°çš„å‰å››ä¸ªå‚æ•°(ç”¨å¯èƒ½è¿™äº›å‚æ•°å¹¶ä¸æ˜¯å…¨éƒ½å­˜åœ¨ï¼Œè§†å…·ä½“å‡½æ•°è€Œå®š)ï¼Œå¹¶æ‰“å°å‡ºæ¥ï¼›</span><br><span class="line">4. ä½¿ç”¨print_debuginfoæ‰“å°å‡ºå½“å‰å‡½æ•°çš„å‡½æ•°åï¼›</span><br><span class="line">5. æ ¹æ®åŠ¨æ€é“¾æŸ¥æ‰¾å½“å‰å‡½æ•°çš„è°ƒç”¨è€…(caller)çš„æ ˆå¸§, æ ¹æ®çº¦å®šï¼Œcallerçš„æ ˆå¸§çš„base pointerå­˜æ”¾åœ¨calleeçš„ebpæŒ‡å‘çš„å†…å­˜å•å…ƒï¼Œå°†å…¶æ›´æ–°åˆ°ebpä¸´æ—¶å˜é‡ä¸­ï¼ŒåŒæ—¶å°†eip(ä»£ç ä¸­å¯¹åº”çš„å˜é‡ä¸ºra)æ›´æ–°ä¸ºè°ƒç”¨å½“å‰å‡½æ•°çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨ä½ç½®ï¼ˆreturn addressï¼‰ï¼Œå…¶æ ¹æ®çº¦å®šå­˜æ”¾åœ¨ebp+4æ‰€åœ¨çš„å†…å­˜å•å…ƒä¸­ï¼›</span><br><span class="line">6. å¦‚æœebpéé›¶å¹¶ä¸”æ²¡æœ‰è¾¾åˆ°è§„å®šçš„STACKFRAME DEPTHçš„ä¸Šé™ï¼Œåˆ™è·³è½¬åˆ°2ï¼Œç»§ç»­å¾ªç¯æ‰“å°æ ˆä¸Šæ ˆå¸§å’Œå¯¹åº”å‡½æ•°çš„ä¿¡æ¯ï¼›</span><br><span class="line"></span><br><span class="line">```C</span><br><span class="line">void</span><br><span class="line">print_stackframe(void) &#123;</span><br><span class="line">    uint32_t ebp = read_ebp();</span><br><span class="line">    uint32_t ra = read_eip(); </span><br><span class="line">    for (int i = 0; i &lt; STACKFRAME_DEPTH &amp;&amp; ebp != 0; ++ i) &#123;</span><br><span class="line">        cprintf(&quot;ebp:0x%08x eip:0x%08x &quot;, ebp, ra);</span><br><span class="line">        uint32_t* ptr = (uint32_t *) (ebp + 8);</span><br><span class="line">        cprintf(&quot;args:0x%08x 0x%08x 0x%08x 0x%08x\n&quot;, ptr[0], ptr[1], ptr[2], ptr[3]);</span><br><span class="line">        print_debuginfo(ra - 1);</span><br><span class="line">        ra = *((uint32_t *) (ebp + 4));</span><br><span class="line">        ebp = *((uint32_t *) ebp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><p>åˆ†ææœ€åä¸€è¡Œè¾“å‡ºå„ä¸ªæ•°å€¼çš„æ„ä¹‰ï¼š</p></li><li><p>```css<br>ebp:0x00007bf8 eip:0x00007d6e args:0xc031fcfa 0xc08ed88e 0x64e4d08e 0xfa7502a8</p><pre><code>&lt;unknow&gt;: -- 0x00007d6d --</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* ![image-20210408100708052](E:\LearningNotes\THæ“ä½œç³»ç»Ÿ\æ“ä½œç³»ç»Ÿå®éªŒ\Lab 1 ç³»ç»Ÿè½¯ä»¶å¯åŠ¨è¿‡ç¨‹.assets\image-20210408100708052.png)</span><br><span class="line"></span><br><span class="line">##### è§£é‡Šæœ€åä¸€è¡Œå„ä¸ªæ•°å€¼</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">ebp:0x00007bf8 eip:0x00007d6e args:0xc031fcfa 0xc08ed88e 0x64e4d08e 0xfa7502a8</span><br><span class="line">    &lt;unknow&gt;: -- 0x00007d6d --</span><br></pre></td></tr></table></figure></li><li><p><code>ebp:0x00007bf8</code>:ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨å‡½æ•°æ ˆå¸§çš„base pointer</p></li><li><p><code>eip:0x00007d6e</code>: è¯¥æ ˆå¸§å¯¹åº”å‡½æ•°ä¸­è°ƒç”¨çš„ä¸‹ä¸€ä¸ªæ ˆå¸§å¯¹åº”å‡½æ•°çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤</p></li><li><p><code>args:0xc031fcfa 0xc08ed88e 0x64e4d08e</code>: ä¼ é€’ç»™ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°</p></li><li><p><code>   &lt;unknow&gt;: -- 0x00007d6d --</code> : bootmain å‡½æ•°è°ƒç”¨OS kernelå…¥å£å‡½æ•°çš„è¯¥æŒ‡ä»¤çš„åœ°å€</p></li></ul><h3 id="ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†"><a href="#ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†" class="headerlink" title="ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†"></a>ç»ƒä¹ å…­ï¼šå®Œå–„ä¸­æ–­åˆå§‹åŒ–å’Œå¤„ç†</h3><ol><li>ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆä¿æŠ¤æ¨¡å¼ä¸‹çš„ä¸­æ–­å‘é‡è¡¨ï¼‰ä¸­ä¸€ä¸ªè¡¨é¡¹å å¤šå°‘å­—èŠ‚ï¼Ÿå…¶ä¸­å“ªå‡ ä½ä»£è¡¨ä¸­æ–­å¤„ç†ä»£ç ï¼Ÿ</li><li>ç¼–ç¨‹å®Œå–„ <code>kern/trap/trap.c</code>ä¸­å¯¹ä¸­æ–­å‘é‡è¡¨è¿›è¡Œåˆå§‹åŒ–çš„å‡½æ•° <code>idt_init</code>, åœ¨è¯¥å‡½æ•°ä¸­ï¼Œä¾æ¬¡å¯¹æ‰€æœ‰ä¸­æ–­å…¥å£è¿›è¡Œåˆå§‹åŒ–ã€‚ä½¿ç”¨ <code>mmu.h</code>ä¸­çš„ <code>SETGATE</code>å®ï¼Œå¡«å…… <code>idt</code>æ•°ç»„å†…å®¹ã€‚æ¯ä¸ªä¸­æ–­å…¥å£ç”± <code>tools/vector.c</code>ç”Ÿæˆï¼Œä½¿ç”¨ <code>trap.c</code>ä¸­å£°æ˜çš„vectorsæ•°æ®å³å¯</li><li>ç¼–ç¨‹å®Œå–„trap.cä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°trap , åœ¨å¯¹æ—¶é’Ÿä¸­æ–­è¿›è¡Œå¤„ç†çš„éƒ¨åˆ†å¡«å†™trapå‡½æ•°ä¸­å¤„ç†æ—¶é’Ÿä¸­æ–­çš„éƒ¨åˆ†ï¼Œä½¿æ“ä½œç³»ç»Ÿæ¯é‡åˆ°100æ¬¡æ—¶é’Ÿä¸­æ–­åï¼Œè°ƒç”¨print_tickså­ç¨‹åºï¼Œå‘å±å¹•æ‰“å°ä¸€è¡Œæ–‡å­— <code>100 ticks</code></li></ol><ul><li>æ³¨æ„ï¼š<ul><li>é™¤äº†ç³»ç»Ÿè°ƒç”¨ï¼ˆ<code>T_SYSCALL</code>ï¼‰ä½¿ç”¨ <strong>é™·é˜±é—¨æè¿°ç¬¦</strong> ä¸”æƒé™ä¸º <strong>ç”¨æˆ·æ€æƒé™</strong> ä»¥å¤–</li><li>å…¶ä»–ä¸­æ–­å‡ä½¿ç”¨<strong>ç‰¹æƒçº§ï¼ˆDPLï¼‰ä¸º0</strong>çš„ <strong>ä¸­æ–­é—¨æè¿°ç¬¦</strong></li><li>uCoreçš„åº”ç”¨ç¨‹åºå¤„äºç‰¹æƒçº§ 3 ï¼Œéœ€é‡‡ç”¨ <code>int 0x80</code></li><li>ç³»ç»Ÿè°ƒç”¨ä¸­æ–­ <code>T_SYSCALL</code>æ‰€å¯¹åº”çš„ä¸­æ–­é—¨æè¿°ç¬¦ä¸­çš„ç‰¹æƒçº§è®¾ç½®ä¸º 3</li></ul></li><li>è¦æ±‚ï¼š<ul><li>å®Œæˆé—®é¢˜2å’Œé—®é¢˜3 æå‡ºçš„ç›¸å…³å‡½æ•°å®ç°ï¼Œæäº¤æ”¹è¿›åçš„æºä»£ç åŒ…ï¼ˆå¯ä»¥ç¼–è¯‘æ‰§è¡Œï¼‰ï¼Œå¹¶åœ¨å®éªŒæŠ¥å‘Šä¸­ç®€è¦è¯´æ˜å®ç°è¿‡ç¨‹ï¼Œå¹¶å†™å‡ºå¯¹é—®é¢˜1çš„å›ç­”</li><li>å®Œæˆè¿™é—®é¢˜2å’Œ3è¦æ±‚çš„éƒ¨åˆ†ä»£ç åï¼Œè¿è¡Œæ•´ä¸ªç³»ç»Ÿï¼Œå¯ä»¥çœ‹åˆ°å¤§çº¦æ¯1ç§’ä¼šè¾“å‡ºä¸€æ¬¡â€100 ticksâ€ï¼Œè€ŒæŒ‰ä¸‹çš„é”®ä¹Ÿä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤º</li></ul></li></ul><h4 id="æŠ¥å‘Š-5"><a href="#æŠ¥å‘Š-5" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h4><blockquote><p><strong>ä¸­æ–­å‘é‡è¡¨è°ƒç”¨å…³ç³»</strong><br>ç³»ç»Ÿå‘ç”Ÿä¸­æ–­â€”&gt;ä¸­æ–­å·ï¼ˆ0~255ï¼‰â€“&gt;æ‰¾åˆ°IDTï¼Œæ‹¿åˆ°æ®µé€‰æ‹©å­å’Œåç§»â€”â€“&gt; æ‹¿ç€æ®µé€‰æ‹©å­æ‰¾GDTï¼Œæ‰¾åˆ°æ®µåŸºå€ï¼Œå†ä½¿ç”¨åç§»è·³è½¬åˆ°ç¨‹åºå…¥å£åœ°å€</p></blockquote><h5 id="ç¬¬ä¸€é—®"><a href="#ç¬¬ä¸€é—®" class="headerlink" title="ç¬¬ä¸€é—®"></a>ç¬¬ä¸€é—®</h5><blockquote><p>ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆä¿æŠ¤æ¨¡å¼ä¸‹çš„ä¸­æ–­å‘é‡è¡¨ï¼‰ä¸­ä¸€ä¸ªè¡¨é¡¹å å¤šå°‘å­—èŠ‚ï¼Ÿå…¶ä¸­å“ªå‡ ä½ä»£è¡¨ä¸­æ–­å¤„ç†ä»£ç ï¼Ÿ</p></blockquote><ul><li>ä¸­æ–­å‘é‡è¡¨ä¸€ä¸ªè¡¨é¡¹å ç”¨8å­—èŠ‚</li><li>2-3å­—èŠ‚æ˜¯æ®µé€‰æ‹©å­ï¼Œ0-1å­—èŠ‚å’Œ6-7å­—èŠ‚æ‹¼æˆåç§»ï¼Œä¸¤è€…è”åˆä¾¿æ˜¯ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€</li></ul><h5 id="ç¬¬äºŒé—®"><a href="#ç¬¬äºŒé—®" class="headerlink" title="ç¬¬äºŒé—®"></a>ç¬¬äºŒé—®</h5><blockquote><p>ç¼–ç¨‹å®Œå–„ <code>kern/trap/trap.c</code>ä¸­å¯¹ä¸­æ–­å‘é‡è¡¨è¿›è¡Œåˆå§‹åŒ–çš„å‡½æ•° <code>idt_init</code>, åœ¨è¯¥å‡½æ•°ä¸­ï¼Œä¾æ¬¡å¯¹æ‰€æœ‰ä¸­æ–­å…¥å£è¿›è¡Œåˆå§‹åŒ–ã€‚ä½¿ç”¨ <code>mmu.h</code>ä¸­çš„ <code>SETGATE</code>å®ï¼Œå¡«å…… <code>idt</code>æ•°ç»„å†…å®¹ã€‚æ¯ä¸ªä¸­æ–­å…¥å£ç”± <code>tools/vector.c</code>ç”Ÿæˆï¼Œä½¿ç”¨ <code>trap.c</code>ä¸­å£°æ˜çš„vectorsæ•°æ®å³å¯</p></blockquote><ul><li><p>åœ¨idt.initå‡½æ•°ä¸­ï¼Œä¾æ¬¡å¯¹æ‰€æœ‰ä¸­æ–­å…¥å£è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨mmu.hä¸­çš„SETGATEå®</p><ul><li><blockquote><p>#define SETGATE(gate, istrap, sel, off, dpl) {<br>(gate).gd_off_15_0 = (uint32_t)(off) &amp; 0xffff;<br>(gate).gd_ss = (sel);<br>(gate).gd_args = 0;<br>(gate).gd_rsv1 = 0;<br>(gate).gd_type = (istrap) ? STS_TG32 : STS_IG32;<br>(gate).gd_s = 0;<br>(gate).gd_dpl = (dpl);<br>(gate).gd_p = 1;<br>(gate).gd_off_31_16 = (uint32_t)(off) &gt;&gt; 16;<br>}<br>å‚æ•°ï¼š<br>gate:<br>istrap:é™·é˜±é—¨è®¾ä¸º1ï¼Œä¸­æ–­é—¨è®¾ä¸º0.<br>sel:æ®µé€‰æ‹©å­ï¼Œå…¨å±€æè¿°ç¬¦è¡¨çš„ä»£ç æ®µæ®µé€‰æ‹©å­ //memlayout.hé‡Œé¢æœ‰å®å®šä¹‰GD_KTEXT<br>off:å¤„ç†å‡½æ•°çš„å…¥å£åœ°å€ï¼Œå³__vectors[]ä¸­çš„å†…å®¹ã€‚<br>dpl:ç‰¹æƒçº§.ä»å®éªŒæŒ‡å¯¼ä¹¦ä¸­å¯çŸ¥ï¼Œucoreä¸­çš„åº”ç”¨ç¨‹åºå¤„äºç‰¹æƒçº§3ï¼Œå†…æ ¸æ€ç‰¹æƒçº§ä¸º0.</p></blockquote></li></ul></li><li><p>æ ¹æ®æ³¨é‡Šï¼š</p><ul><li>```C<br>/* LAB1 YOUR CODE : STEP 2 */<pre><code> /* (1) Where are the entry addrs of each Interrupt Service Routine (ISR)?  *     All ISR&#39;s entry addrs are stored in __vectors. where is uintptr_t __vectors[] ?  *     __vectors[] is in kern/trap/vector.S which is produced by tools/vector.c  *     (try &quot;make&quot; command in lab1, then you will find vector.S in kern/trap DIR)  *     You can use  &quot;extern uintptr_t __vectors[];&quot; to define this extern variable which will be used later.  * (2) Now you should setup the entries of ISR in Interrupt Description Table (IDT).  *     Can you see idt[256] in this file? Yes, it&#39;s IDT! you can use SETGATE macro to setup each item of IDT  * (3) After setup the contents of IDT, you will let CPU know where is the IDT by using &#39;lidt&#39; instruction.  *     You don&#39;t know the meaning of this instruction? just google it! and check the libs/x86.h to know more.  *     Notice: the argument of lidt is idt_pd. try to find it!  */</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* ```C</span><br><span class="line">  void</span><br><span class="line">  idt_init(void) &#123;</span><br><span class="line">      extern uintptr_t __vectors[];</span><br><span class="line">      for(int i = 0; i &lt; sizeof(idt)/sizeof(struct gatedesc); i++)</span><br><span class="line">      &#123;</span><br><span class="line">          SETGATE(idt[i], 0, GD_KTEXT, __vectors[i]; 0);</span><br><span class="line">      &#125;</span><br><span class="line">      SETGATE(idt[T_SYSCALL], 0, GD_KTEXT, __vectors[T_SYSCALL]; 3);</span><br><span class="line">      lidt(&amp;idt_pd);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h5 id="ç¬¬ä¸‰é—®"><a href="#ç¬¬ä¸‰é—®" class="headerlink" title="ç¬¬ä¸‰é—®"></a>ç¬¬ä¸‰é—®</h5><blockquote><p>ç¼–ç¨‹å®Œå–„trap.cä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°trap , åœ¨å¯¹æ—¶é’Ÿä¸­æ–­è¿›è¡Œå¤„ç†çš„éƒ¨åˆ†å¡«å†™trapå‡½æ•°ä¸­å¤„ç†æ—¶é’Ÿä¸­æ–­çš„éƒ¨åˆ†ï¼Œä½¿æ“ä½œç³»ç»Ÿæ¯é‡åˆ°100æ¬¡æ—¶é’Ÿä¸­æ–­åï¼Œè°ƒç”¨print_tickså­ç¨‹åºï¼Œå‘å±å¹•æ‰“å°ä¸€è¡Œæ–‡å­— <code>100 ticks</code></p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> IRQ_OFFSET+IRQ_TIMER:</span><br><span class="line">    ticks++;</span><br><span class="line">    <span class="keyword">if</span> (ticks % TICK_NUM == <span class="number">0</span>) &#123;</span><br><span class="line">        print_ticks();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    make</span></span><br><span class="line"><span class="comment">    make qemu</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h1 id="3-ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹"><a href="#3-ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹" class="headerlink" title="3 ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹"></a>3 ä»æœºå™¨å¯åŠ¨åˆ°æ“ä½œç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹</h1><h2 id="3-1-BIOS-å¯åŠ¨è¿‡ç¨‹"><a href="#3-1-BIOS-å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="3.1 BIOS å¯åŠ¨è¿‡ç¨‹"></a>3.1 BIOS å¯åŠ¨è¿‡ç¨‹</h2><ul><li><p>è®¡ç®—æœº<strong>åŠ ç”µå</strong>ï¼Œå…ˆæ‰§è¡Œ<strong>ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶</strong>ï¼Œå®Œæˆ<strong>åŸºæœ¬IOåˆå§‹åŒ–</strong>å’Œ<strong>å¼•å¯¼åŠ è½½åŠŸèƒ½</strong></p><ul><li><strong>åˆå§‹åŒ–ç¡¬ä»¶è®¾å¤‡</strong> ï¼Œ å»ºç«‹ç³»ç»Ÿçš„å†…å­˜ç©ºé—´æ˜ å°„å›¾</li><li>å°†ç³»ç»Ÿçš„è½¯ç¡¬ä»¶ç¯å¢ƒå¸¦åˆ°ä¸€ä¸ªåˆé€‚çš„çŠ¶æ€ï¼Œä»¥ä¾¿æœ€ç»ˆè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸å‡†å¤‡å¥½æ­£ç¡®çš„ç¯å¢ƒ</li><li><strong>æœ€ç»ˆå¼•å¯¼åŠ è½½ç¨‹åº</strong> æŠŠæ“ä½œç³»ç»Ÿå†…æ ¸æ˜ åƒ åŠ è½½åˆ° RAMä¸­ï¼Œå¹¶å°†ç³»ç»Ÿæ§åˆ¶æƒä¼ é€’ç»™å®ƒ</li></ul></li><li><p>æ“ä½œç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶ å­˜æ”¾åœ¨ ç£ç›˜ï¼ˆç¡¬ç›˜/è½¯ç›˜ï¼‰ã€å…‰ç›˜ã€EPROMã€ROMã€Flashç­‰ å¯åœ¨æ‰ç”µåç»§ç»­ä¿å­˜æ•°æ®çš„å­˜å‚¨ä»‹è´¨</p></li><li><p>è®¡ç®—æœºå¯åŠ¨åï¼ŒCPU ä¸€å¼€å§‹ä¼šåˆ°ä¸€ä¸ªç‰¹å®šçš„åœ°å€ å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤ï¼Œ</p><ul><li>è¿™ä¸ªç‰¹å®šçš„åœ°å€ å­˜æ”¾äº†<strong>ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶</strong>ï¼ˆIntel 80386 ä¸­æ˜¯ BIOS, å…¶æœ¬è´¨æ˜¯ä¸€ä¸ªå›ºå®šåœ¨ä¸»æ¿Flash/CMOS ä¸Šçš„è½¯ä»¶ï¼‰ï¼Œè´Ÿè´£å®Œæˆè®¡ç®—æœºçš„ <strong>åŸºæœ¬çš„I/Oåˆå§‹åŒ–</strong></li></ul></li><li><p><strong>ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶</strong>ï¼šç”± <strong>BIOS</strong> å’Œ ä½äº è½¯ç›˜/ç¡¬ç›˜<strong>å¼•å¯¼æ‰‡åŒº</strong>ä¸­çš„ <strong>OS Bootloader</strong>ï¼ˆåœ¨ucore ä¸­çš„ bootasm.S å’Œ bootmain.c ï¼‰ä¸€èµ·ç»„æˆ</p></li><li><p><strong>BIOS</strong> ï¼š<strong>å›ºå®šåœ¨è®¡ç®—æœº ROMï¼ˆ</strong>åªè¯»å­˜å‚¨å™¨ï¼‰ èŠ¯ç‰‡ä¸Šçš„ä¸€ä¸ªç‰¹æ®Šè½¯ä»¶ï¼Œä¸ºä¸Šå±‚è½¯ä»¶æä¾›æœ€åº•å±‚çš„ã€æœ€ç›´æ¥çš„ç¡¬ä»¶æ§åˆ¶ä¸æ”¯æŒ</p><ul><li>æ˜¯ PCè®¡ç®—æœºç¡¬ä»¶ ä¸ ä¸Šå±‚è½¯ä»¶ç¨‹åº ä¹‹é—´çš„æ¡¥æ¢ï¼Œè´Ÿè´£<strong>è®¿é—®å’Œæ§åˆ¶ç¡¬ä»¶</strong></li></ul></li><li><p>å¯¹äº Intel 80386ï¼š</p><ul><li>è®¡ç®—æœºåŠ ç”µåï¼ŒCPU ä»ç‰©ç†åœ°å€ <code>0xfffffff0</code>ï¼ˆç”±åˆå§‹åŒ–çš„ <code>CS: EIP</code> ç¡®å®šï¼Œæ­¤æ—¶ CS å’Œ IP çš„å€¼åˆ†åˆ«æ˜¯ <code>0xf000</code> å’Œ <code>0xfff0</code>ï¼‰å¼€å§‹æ‰§è¡Œ</li><li>åœ¨ <code>0xfffffff0</code> å¤„ï¼Œå­˜æ”¾äº†ä¸€æ¡<strong>è·³è½¬æŒ‡ä»¤</strong>ï¼Œé€šè¿‡è·³è½¬æŒ‡ä»¤è·³åˆ° <strong>BIOS ä¾‹è¡Œç¨‹åºèµ·å§‹ç‚¹</strong></li><li>BIOS åšå®Œ<strong>è®¡ç®—æœºç¡¬ä»¶è‡ªæ£€å’Œåˆå§‹åŒ–</strong>åï¼Œä¼šé€‰æ‹©ä¸€ä¸ªå¯åŠ¨è®¾å¤‡ï¼ˆè½¯ç›˜ã€ç¡¬ç›˜ã€å…‰ç›˜ç­‰ï¼‰ï¼Œå¹¶ä¸”<strong>è¯»å–è¯¥è®¾å¤‡çš„ç¬¬ä¸€æ‰‡åŒºï¼ˆå³ä¸»å¼•å¯¼æ‰‡åŒºæˆ–å¯åŠ¨æ‰‡åŒºï¼‰åˆ°å†…å­˜ä¸€ä¸ªç‰¹å®šçš„åœ°å€</strong> <code>0x7c00</code>å¤„</li><li>ç„¶åå°† <strong>CPU æ§åˆ¶æƒä¼šè½¬ç§»</strong>åˆ°é‚£ä¸ªåœ°å€ç»§ç»­æ‰§è¡Œ</li><li>è‡³æ­¤ï¼ŒBIOSçš„åˆå§‹åŒ–å·¥ä½œå®Œæˆï¼Œè¿›ä¸€æ­¥çš„å·¥ä½œäº¤ç»™ uCore çš„<strong>bootloader</strong></li></ul></li></ul><h2 id="3-2-Bootloader-çš„å¯åŠ¨è¿‡ç¨‹"><a href="#3-2-Bootloader-çš„å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="3.2 Bootloader çš„å¯åŠ¨è¿‡ç¨‹"></a>3.2 Bootloader çš„å¯åŠ¨è¿‡ç¨‹</h2><ul><li><strong>BIOS</strong> å°†é€šè¿‡è¯»å–ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºåˆ°å†…å­˜ï¼Œå¹¶è·³è½¬åˆ°å¯¹åº”å†…å­˜ä¸­çš„ä½ç½®æ‰§è¡Œ bootloader</li><li><strong>Bootloaderï¼š</strong><ul><li>åˆ‡æ¢åˆ°<strong>ä¿æŠ¤æ¨¡å¼</strong>ï¼Œå¯ç”¨<strong>åˆ†æ®µæœºåˆ¶</strong></li><li>è¯»ç£ç›˜ä¸­ <strong>ELF æ‰§è¡Œæ–‡ä»¶æ ¼å¼</strong>çš„ uCore æ“ä½œç³»ç»Ÿåˆ°å†…å­˜</li><li>æ˜¾ç¤ºå­—ç¬¦ä¸²ä¿¡æ¯</li><li>æŠŠ<strong>æ§åˆ¶æƒ</strong>äº¤ç»™uCoreæ“ä½œç³»ç»Ÿ</li></ul></li><li>Bootloader å·¥ä½œçš„å®ç°æ–‡ä»¶ åœ¨ <code>lab1/boot/</code> ä¸‹çš„ asm.h, bootasm.S å’Œ bootmain.c</li></ul><h3 id="3-2-1-ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶"><a href="#3-2-1-ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶" class="headerlink" title="3.2.1 ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶"></a>3.2.1 ä¿æŠ¤æ¨¡å¼å’Œåˆ†æ®µæœºåˆ¶</h3><ul><li>Intel 80386 åªæœ‰è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼Œæ‰èƒ½å……åˆ†å‘æŒ¥å…¶å¼ºå¤§çš„åŠŸèƒ½<ul><li>æä¾›æ›´å¥½çš„ä¿æŠ¤æœºåˆ¶å’Œå¼ºå¤§çš„å¯»å€èƒ½åŠ›</li></ul></li><li>è‹¥æ²¡æœ‰ä¿æŠ¤æ¨¡å¼ï¼šåªæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ 8086 ï¼Œ<ul><li>æ²¡æœ‰ä¿æŠ¤æœºåˆ¶</li><li>ä»»ä½•åº”ç”¨è½¯ä»¶éƒ½å¯ä»¥ä»»æ„è®¿é—®æ‰€æœ‰çš„è®¡ç®—æœºèµ„æº</li><li>ä¸” åˆ†æ®µæœºåˆ¶ ä¸€ç›´å­˜åœ¨ï¼Œæ— æ³•å±è”½æˆ–é¿å…</li></ul></li><li>æ“ä½œç³»ç»ŸåŠŸèƒ½ï¼ˆå¦‚åˆ†é¡µæœºåˆ¶ï¼‰æ˜¯å»ºç«‹åœ¨ Intel 80386çš„ä¿æŠ¤æ¨¡å¼ä¸Šæ¥è®¾è®¡çš„</li></ul><h4 id="å®æ¨¡å¼"><a href="#å®æ¨¡å¼" class="headerlink" title="å®æ¨¡å¼"></a>å®æ¨¡å¼</h4><ul><li>åœ¨ Bootloader æ¥æ‰‹ BIOS çš„å·¥ä½œåï¼ŒPC ç³»ç»Ÿå¤„äºå®æ¨¡å¼ï¼ˆ16ä½æ¨¡å¼ï¼‰è¿è¡ŒçŠ¶æ€<ul><li>è¿™ç§çŠ¶æ€ä¸‹ï¼Œè½¯ä»¶å¯è®¿é—®çš„ç‰©ç†å†…å­˜ç©ºé—´ ä¸èƒ½è¶…è¿‡ 1 MB</li><li>æ— æ³•å‘æŒ¥Intel 80386 ä»¥ä¸Šçº§åˆ«çš„32ä½ CPU çš„4 GBçš„å†…å­˜ç®¡ç†èƒ½åŠ›</li></ul></li><li>å®æ¨¡å¼ å°†æ•´ä¸ªç‰©ç†å†…å­˜ çœ‹æˆåˆ†æ®µåŒºåŸŸ<ul><li>ç¨‹åºä»£ç  å’Œ æ•°æ®ä½äºä¸åŒçš„åŒºåŸŸ</li><li>æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·ç¨‹åºå¹¶æ²¡æœ‰åŒºåˆ«å¯¹å¾…</li><li>æ¯ä¸€ä¸ªæŒ‡é’ˆéƒ½æ˜¯æŒ‡å‘å®é™…çš„ç‰©ç†åœ°å€</li></ul></li><li>é€šè¿‡ä¿®æ”¹ A20 åœ°å€çº¿å¯ä»¥å®Œæˆä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼çš„è½¬æ¢</li></ul><h4 id="ä¿æŠ¤æ¨¡å¼"><a href="#ä¿æŠ¤æ¨¡å¼" class="headerlink" title="ä¿æŠ¤æ¨¡å¼"></a>ä¿æŠ¤æ¨¡å¼</h4><ul><li>åªæœ‰åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œ80386çš„å…¨éƒ¨ 32 æ ¹åœ°å€çº¿æœ‰æ•ˆ<ul><li>å¯»å€èƒ½åŠ›é«˜è¾¾ 4 GB çš„çº¿æ€§åœ°å€ç©ºé—´å’Œç‰©ç†åœ°å€ç©ºé—´</li><li>å¯è®¿é—® 64 TB ï¼ˆæœ‰2^14ä¸ªæ®µï¼Œæ¯ä¸ªæ®µæœ€å¸¦ç©ºé—´ä¸º 2^32 å­—èŠ‚ï¼‰çš„é€»è¾‘åœ°å€ç©ºé—´</li><li>å¯é‡‡ç”¨åˆ†æ®µå­˜å‚¨ç®¡ç† å’Œ åˆ†é¡µå­˜å‚¨ç®¡ç†æœºåˆ¶</li><li>ä¸ä»…ä¸º <strong>å­˜å‚¨å…±äº«å’Œä¿æŠ¤</strong> æä¾›äº†ç¡¬ä»¶æ”¯æŒï¼Œè€Œä¸”ä¸º<strong>å®ç°è™šæ‹Ÿå­˜å‚¨</strong>æä¾›äº†ç¡¬ä»¶æ”¯æŒ</li><li>æä¾›äº† <strong>4ä¸ªç‰¹æƒçº§</strong>å’Œ<strong>å®Œå–„çš„ç‰¹æƒæ£€æŸ¥æœºåˆ¶</strong> ï¼š æ—¢èƒ½å®ç° <strong>èµ„æºå…±äº«</strong>ï¼Œåˆèƒ½ <strong>ä¿è¯ä»£ç æ•°æ®çš„å®‰å…¨</strong> åŠ <strong>ä»»åŠ¡çš„éš”ç¦»</strong></li></ul></li><li>ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæœ‰ä¸¤ä¸ªæ®µè¡¨ï¼šéƒ½å¯ä»¥åŒ…å« 2^13 ä¸ª<strong>æè¿°ç¬¦</strong>ï¼Œå› æ­¤æœ€å¤šå¯ä»¥åŒæ—¶å­˜åœ¨ 2*2^13 ä¸ªæ®µ<ul><li><strong>GDT</strong> <strong>ï¼ˆGlobal Descriptor Tableï¼‰</strong></li><li><strong>LDT</strong> <strong>ï¼ˆLocal Descriptor Tableï¼‰</strong></li></ul></li><li>å®é™…ä¸Šï¼Œæ®µæœºåˆ¶ å¹¶ä¸èƒ½æ‰©å±•ç‰©ç†åœ°å€ç©ºé—´ï¼Œå¾ˆå¤§ç¨‹åº¦å±±ï¼Œå„ä¸ªæ®µçš„åœ°å€ç©ºé—´æ˜¯ç›¸äº’é‡å çš„<ul><li>æ‰€è°“ 64 TBï¼ˆ2^(14+32)ï¼‰é€»è¾‘åœ°å€ç©ºé—´åªæ˜¯ä¸€ä¸ªç†è®ºå€¼</li><li>32 ä½ä¿æŠ¤æ¨¡å¼ä¸‹ï¼ŒçœŸæ­£çš„ç‰©ç†ç©ºé—´åªæœ‰ 2^32 å­—èŠ‚</li></ul></li></ul><h4 id="åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶"><a href="#åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶" class="headerlink" title="åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶"></a>åˆ†æ®µå­˜å‚¨ç®¡ç†æœºåˆ¶</h4><ul><li><p>åªèƒ½åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä½¿ç”¨</p></li><li><p>åˆ†æ®µæœºåˆ¶ï¼šå°†å†…å­˜åˆ’åˆ†æˆä»¥ <strong>èµ·å§‹åœ°å€</strong> å’Œ <strong>é•¿åº¦é™åˆ¶</strong> è¿™ä¸¤ä¸ªäºŒç»´å‚æ•°è¡¨ç¤ºçš„å†…å­˜å—â€”â€”<strong>æ®µï¼ˆSegmentï¼‰</strong></p><ul><li>å³ç¼–è¯‘å™¨å°†æºç¨‹åºç¼–è¯‘æˆæ‰§è¡Œç¨‹åºæ—¶ç”¨åˆ°çš„ ä»£ç æ®µã€æ•°æ®æ®µã€å †å’Œæ ˆç­‰</li></ul></li><li><p>åˆ†æ®µæœºåˆ¶ï¼š</p><ul><li><strong>é€»è¾‘åœ°å€</strong></li><li><strong>æ®µæè¿°ç¬¦</strong>ï¼šæè¿°æ®µçš„å±æ€§</li><li><strong>æ®µæè¿°ç¬¦è¡¨</strong>ï¼šåŒ…å«å¤šä¸ªæ®µæè¿°ç¬¦çš„ æ•°ç»„</li><li><strong>æ®µé€‰æ‹©å­</strong>ï¼šæ®µå¯„å­˜å™¨ï¼Œç”¨äºå®šä½æ®µæè¿°ç¬¦è¡¨ä¸­ è¡¨é¡¹çš„<strong>ç´¢å¼•</strong></li></ul></li><li><p><strong>é€»è¾‘åœ°å€</strong> â€”â€”&gt; <strong>ç‰©ç†åœ°å€</strong></p><ul><li><strong>åˆ†æ®µåœ°å€è½¬æ¢</strong>ï¼š<strong>CPU</strong> æŠŠé€»è¾‘åœ°å€ï¼ˆç”±<strong>æ®µé€‰æ‹©å­ selector</strong> å’Œ <strong>æ®µåç§» offset</strong> ç»„æˆï¼‰<ul><li>å°† <strong>æ®µé€‰æ‹©å­</strong> çš„å†…å®¹ ä½œä¸º <strong>æ®µæè¿°ç¬¦è¡¨</strong> çš„ç´¢å¼•ï¼Œæ‰¾åˆ°è¡¨ä¸­å¯¹åº”çš„ <strong>æ®µæè¿°ç¬¦</strong>ï¼Œç„¶åæŠŠ æ®µæè¿°ç¬¦ ä¸­ä¿å­˜çš„ <strong>æ®µåŸºå€</strong> åŠ ä¸Š <strong>æ®µåç§»å€¼</strong>ï¼Œå½¢æˆ <strong>çº¿æ€§åœ°å€ï¼ˆLinear addressï¼‰</strong></li><li>è‹¥ä¸å¯åŠ¨ åˆ†é¡µå­˜å‚¨ç®¡ç†æœºåˆ¶ï¼Œåˆ™çº¿æ€§åœ°å€ ç­‰äº ç‰©ç†åœ°å€</li><li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image002.png" alt="åˆ†æ®µåœ°å€è½¬æ¢åŸºæœ¬è¿‡ç¨‹"></li></ul></li><li><strong>åˆ†é¡µåœ°å€è½¬æ¢</strong>ï¼š<ul><li>æŠŠçº¿æ€§åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€</li></ul></li><li>çº¿æ€§åœ°å€ç©ºé—´ ç”±ä¸€ç»´çš„çº¿æ€§åœ°å€æ„æˆï¼Œçº¿æ€§åœ°å€ç©ºé—´å’Œç‰©ç†åœ°å€ç©ºé—´å¯¹ç­‰<ul><li>çº¿æ€§åœ°å€ 32 ä½é•¿ï¼Œçº¿æ€§åœ°å€ç©ºé—´å®¹é‡ä¸º 4 GB</li></ul></li></ul></li></ul><h5 id="æ®µæè¿°ç¬¦"><a href="#æ®µæè¿°ç¬¦" class="headerlink" title="æ®µæè¿°ç¬¦"></a>æ®µæè¿°ç¬¦</h5><ul><li><p>ä¿æŠ¤æ¨¡å¼ä¸‹çš„åˆ†æ®µç®¡ç†æœºåˆ¶ï¼Œæ¯ä¸ªæ®µæœ‰ä¸‰ä¸ªå‚æ•°æ„æˆï¼š</p><ul><li><blockquote><p>åœ¨ucoreä¸­çš„kern/mm/mmu.hä¸­çš„struct segdesc æ•°æ®ç»“æ„ä¸­æœ‰å…·ä½“çš„å®šä¹‰ã€‚</p></blockquote></li><li><p><strong>æ®µåŸºåœ°å€ï¼ˆBase Addressï¼‰</strong>ï¼šè§„å®šçº¿æ€§åœ°å€ç©ºé—´ä¸­ æ®µçš„èµ·å§‹åœ°å€</p><ul><li>80386 ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ®µåŸºåœ°å€ é•¿ 32 ä½</li><li>ä¸å¯»å€åœ°å€é•¿åº¦ç›¸åŒï¼Œæ‰€ä»¥ä»»ä½•ä¸€ä¸ªæ®µéƒ½å¯ä»¥ä»32ä½çº¿æ€§åœ°å€ç©ºé—´ä¸­çš„ä»»ä½•ä¸€ä¸ªå­—èŠ‚å¼€å§‹ï¼Œä¸åƒå®æ¨¡å¼ä¸‹è§„å®šçš„è¾¹ç•Œå¿…é¡»è¢« 16æ•´é™¤</li></ul></li><li><p><strong>æ®µç•Œé™ï¼ˆLimitï¼‰</strong>ï¼šè§„å®šç«¯çš„å¤§å°ã€‚</p><ul><li>80386 ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œç”¨ 20 ä½è¡¨ç¤º</li><li>æ®µç•Œé™ å¯ä»¥æ˜¯ä»¥ å­—èŠ‚ ä¸ºå•ä½æˆ–ä»¥ 4 K å­—èŠ‚ä¸ºå•ä½</li></ul></li><li><p><strong>æ®µå±æ€§ï¼ˆAttributesï¼‰</strong>ï¼šç¡®å®šæ®µçš„å„ç§æ€§è´¨</p><ul><li>æ®µå±æ€§ä¸­çš„ç²’åº¦ä½</li><li>ç±»å‹</li><li>æè¿°ç¬¦ç‰¹æƒçº§</li><li>æ®µå­˜åœ¨ä½</li><li>å·²è®¿é—®ä½</li></ul></li></ul></li><li><p><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image003.png" alt="æ®µæè¿°ç¬¦ç»“æ„"></p></li></ul><h5 id="å…¨å±€æè¿°ç¬¦è¡¨"><a href="#å…¨å±€æè¿°ç¬¦è¡¨" class="headerlink" title="å…¨å±€æè¿°ç¬¦è¡¨"></a>å…¨å±€æè¿°ç¬¦è¡¨</h5><ul><li><p>ä¿å­˜<strong>å¤šä¸ªæ®µæè¿°ç¬¦çš„ â€œæ•°ç»„â€</strong></p></li><li><p>å…¶ èµ·å§‹åœ°å€ ä¿å­˜åœ¨ å…¨å±€æè¿°ç¬¦è¡¨å¯„å­˜å™¨ GDTR</p><ul><li>GDTR é•¿48ä½ï¼Œé«˜32ä½ä¸ºåŸºåœ°å€ï¼Œä½16ä½ä¸ºæ®µç•Œé™</li></ul></li><li><p>ç”±äº GDT ä¸èƒ½æœ‰ GDT æœ¬èº«ä¹‹å†…çš„æè¿°ç¬¦è¿›è¡Œæè¿°å®šä¹‰ï¼Œæ‰€ä»¥ å¤„ç†å™¨ é‡‡ç”¨ GDTR ä¸º GDT è¿™ä¸€ç‰¹æ®Šçš„ç³»ç»Ÿæ®µ</p></li><li><p>å…¨å±€æè¿°ç¬¦è¡¨ ä¸­ç¬¬ä¸€ä¸ªæ®µæè¿°ç¬¦è®¾å®šä¸ºç©ºæ®µæè¿°ç¬¦</p></li><li><p>GDTR ä¸­çš„æ®µç•Œé™ä»¥å­—èŠ‚ ä¸ºå•ä½</p><ul><li>å¯¹äºå«æœ‰ N ä¸ªæè¿°ç¬¦çš„æè¿°ç¬¦è¡¨ï¼Œæ®µç•Œé™å¯è®¾ä¸º <code>8*N-1</code></li><li><blockquote><p>åœ¨ucoreä¸­çš„boot/bootasm.Sä¸­çš„gdtåœ°å€å¤„å’Œkern/mm/pmm.cä¸­çš„å…¨å±€å˜é‡æ•°ç»„gdt[]åˆ†åˆ«æœ‰åŸºäºæ±‡ç¼–è¯­è¨€å’ŒCè¯­è¨€çš„å…¨å±€æè¿°ç¬¦è¡¨çš„å…·ä½“å®ç°</p></blockquote></li></ul></li></ul><h5 id="é€‰æ‹©å­"><a href="#é€‰æ‹©å­" class="headerlink" title="é€‰æ‹©å­"></a>é€‰æ‹©å­</h5><ul><li>çº¿æ€§åœ°å€éƒ¨åˆ†çš„é€‰æ‹©å­ï¼šé€‰æ‹© æ®µæè¿°ç¬¦è¡¨ å’Œ åœ¨è¯¥è¡¨ä¸­ç´¢å¼• ä¸€ä¸ªæ®µæè¿°ç¬¦</li><li>é€‰æ‹©å­å¯ä»¥ä½œä¸º æŒ‡é’ˆå˜é‡çš„ä¸€éƒ¨åˆ†<ul><li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image004.png" alt="æ®µé€‰æ‹©å­ç»“æ„"></li><li>ç´¢å¼• Index : åœ¨æè¿°ç¬¦è¡¨ä¸­ä» 8192 ä¸ªæè¿°ç¬¦ä¸­é€‰æ‹©ä¸€ä¸ª<ul><li>å¤„ç†å™¨è‡ªåŠ¨å°†è¿™ä¸ªç´¢å¼•å€¼ ä¹˜ 8ï¼Œå†åŠ ä¸Šæè¿°ç¬¦è¡¨çš„åŸºåœ°å€æ¥ç´¢å¼•æè¿°ç¬¦è¡¨ï¼Œä»è€Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æè¿°ç¬¦</li></ul></li><li>è¡¨æŒ‡ç¤ºä½ Table Indicatorï¼ˆTIï¼‰ï¼šé€‰æ‹©è®¿é—®å“ªä¸€ä¸ªæè¿°ç¬¦è¡¨ï¼Œ<ul><li>0ï¼šGDT</li><li>1ï¼šLDT</li></ul></li><li>è¯·æ±‚ç‰¹æƒçº§ï¼ˆRequest Privilege Levelï¼ŒRPLï¼‰ï¼šä¿æŠ¤æœºåˆ¶</li></ul></li></ul><blockquote><p>å…¨å±€æè¿°ç¬¦è¡¨çš„ç¬¬ä¸€é¡¹æ˜¯ä¸èƒ½è¢«CPUä½¿ç”¨ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªæ®µé€‰æ‹©å­çš„ç´¢å¼•ï¼ˆIndexï¼‰éƒ¨åˆ†å’Œè¡¨æŒ‡ç¤ºä½ï¼ˆTable Indicatorï¼‰éƒ½ä¸º0çš„æ—¶ï¼ˆå³æ®µé€‰æ‹©å­æŒ‡å‘å…¨å±€æè¿°ç¬¦è¡¨çš„ç¬¬ä¸€é¡¹æ—¶ï¼‰ï¼Œå¯ä»¥å½“åšä¸€ä¸ªç©ºçš„é€‰æ‹©å­ï¼ˆè§mmu.hä¸­çš„SEG_NULLï¼‰ã€‚å½“ä¸€ä¸ªæ®µå¯„å­˜å™¨è¢«åŠ è½½ä¸€ä¸ªç©ºé€‰æ‹©å­æ—¶ï¼Œå¤„ç†å™¨å¹¶ä¸ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œå½“ç”¨ä¸€ä¸ªç©ºé€‰æ‹©å­å»è®¿é—®å†…å­˜æ—¶ï¼Œåˆ™ä¼šäº§ç”Ÿå¼‚å¸¸</p></blockquote><h4 id="ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§"><a href="#ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§" class="headerlink" title="ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§"></a>ä¿æŠ¤æ¨¡å¼ä¸‹çš„ç‰¹æƒçº§</h4><ul><li>ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œç‰¹æƒçº§å…±å››ä¸ªï¼š0 - 3ï¼Œè¢«ç§°ä¸ºä¿æŠ¤ç¯ï¼ˆprotection ringï¼‰<ul><li>ring 0 ä¸ºæœ€é«˜ç‰¹æƒçº§ : å†…æ ¸æ€</li><li>ring 3 æœ€ä½ç‰¹æƒçº§ï¼šä¸€èˆ¬ç»™ åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œç”¨æˆ·æ€</li></ul></li><li>å—åˆ°ä¿æŠ¤çš„èµ„æºï¼šå†…å­˜ï¼ŒI/Oç«¯å£ï¼Œæ‰§è¡Œç‰¹æ®Šæœºå™¨æŒ‡ä»¤çš„èƒ½åŠ›</li><li>åœ¨ä»»æ„æ—¶åˆ»ï¼Œx86 CPU éƒ½æ˜¯åœ¨ä¸€ä¸ªç‰¹å®šçš„ç‰¹æƒçº§ä¸‹è¿è¡Œçš„<ul><li>å†³å®šä»£ç å¯ä»¥åšä»€ä¹ˆï¼Œä¸å¯ä»¥åšä»€ä¹ˆ</li></ul></li><li>å¤§çº¦ 15 æ¡æœºå™¨æŒ‡ä»¤è¢« CPU é™åˆ¶åªèƒ½åœ¨å†…æ ¸æ€æ‰§è¡Œ<ul><li>è‹¥è¢«ç”¨æˆ·æ¨¡å¼çš„ç¨‹åºä½¿ç”¨ï¼Œä¼šå¼•èµ·æ··ä¹±</li><li>å¯¼è‡´ä¸€ä¸ªä¸€èˆ¬ä¿æŠ¤å¼‚å¸¸ï¼ˆgeneral-protection exceptionï¼‰</li></ul></li><li><strong>æ•°æ®æ®µé€‰æ‹©å­</strong> çš„æ•´ä¸ªå†…å®¹å¯ç”±ç¨‹åºç›´æ¥åŠ è½½åˆ°å„ä¸ªå¯„å­˜å™¨ï¼ˆSS, DSï¼‰<ul><li>åŒ…å«äº† è¯·æ±‚ç‰¹æƒçº§å­—æ®µï¼ˆRequested Privilege Levelï¼‰</li></ul></li><li>ä»£ç æ®µå¯„å­˜å™¨ï¼ˆCSï¼‰ çš„å†…å®¹ï¼Œä¸èƒ½ç”±è£…è½½æŒ‡ä»¤ï¼ˆå¦‚ MOVï¼‰ç›´æ¥è®¾ç½®ï¼Œåªèƒ½è¢«é—´æ¥è®¾ç½®<ul><li>CS æ‹¥æœ‰ä¸€ä¸ªç”±CPU ç»´æŠ¤çš„å½“å‰ç‰¹æƒçº§å­—æ®µ ï¼ˆCurrent Privilege Levelï¼‰</li><li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image005.png" alt="DSå’ŒCSçš„ç»“æ„å›¾"></li></ul></li><li></li></ul><h3 id="3-2-3-ç¡¬ç›˜è®¿é—®æ¦‚è¿°"><a href="#3-2-3-ç¡¬ç›˜è®¿é—®æ¦‚è¿°" class="headerlink" title="3.2.3 ç¡¬ç›˜è®¿é—®æ¦‚è¿°"></a>3.2.3 ç¡¬ç›˜è®¿é—®æ¦‚è¿°</h3><ul><li><p>bootloader ä½¿å¾—CPUè¿›å…¥ä¿æŠ¤æ¨¡å¼åï¼Œä¸‹ä¸€æ­¥ä»ç¡¬ç›˜ä¸ŠåŠ è½½å¹¶è¿è¡Œ OS</p></li><li><p>bootloader çš„è®¿é—®ç¡¬ç›˜éƒ½æ˜¯ LBA æ¨¡å¼çš„ <strong>PIO(Program IO)æ–¹å¼</strong>ï¼Œ</p><ul><li>å³<strong>æ‰€æœ‰çš„ IO æ“ä½œ</strong>ï¼Œéƒ½æ˜¯é€šè¿‡ CPU <strong>è®¿é—®ç¡¬ç›˜çš„ IO åœ°å€å¯„å­˜å™¨</strong>å®Œæˆ</li></ul></li><li><p>ä¸€èˆ¬ï¼Œä¸»æ¿æ‹¥æœ‰ 2 ä¸ª IDEé€šé“ï¼Œæ¯ä¸ªé€šé“å¯ä»¥æ¥ 2 ä¸ª IDE ç¡¬ç›˜</p><ul><li>è®¿é—®ç¬¬ä¸€ä¸ªç¡¬ç›˜çš„æ‰‡åŒºï¼Œå¯è®¾ç½® IO åœ°å€å¯„å­˜å™¨ä¸º <code>0x1f0-0x1f7</code>å®ç°</li></ul></li><li><p>ç¡¬ç›˜æ•°æ®æ˜¯å­˜å‚¨åˆ°ç¡¬ç›˜æ‰‡åŒºä¸­ï¼Œä¸€ä¸ªæ‰‡åŒºä¸º 512 å­—èŠ‚</p></li><li><p>éƒ½ä¸€ä¸ªæ‰‡åŒºçš„æµç¨‹åœ¨ <code>boot/bootmain.c</code>ä¸­å®ç°ï¼š</p><ul><li>ç­‰å¾…ç£ç›˜å‡†å¤‡å¥½</li><li>å‘å‡ºè¯»å–æ‰‡åŒºçš„å‘½ä»¤</li><li>ç­‰å¾…ç£ç›˜å‡†å¤‡å¥½</li><li>æŠŠç£ç›˜æ‰‡åŒºçš„æ•°æ®è¯»åˆ°æŒ‡å®šå†…å­˜</li></ul></li></ul><h3 id="ELF-æ ¼å¼æ–‡ä»¶æ¦‚è¿°"><a href="#ELF-æ ¼å¼æ–‡ä»¶æ¦‚è¿°" class="headerlink" title="ELF æ ¼å¼æ–‡ä»¶æ¦‚è¿°"></a>ELF æ ¼å¼æ–‡ä»¶æ¦‚è¿°</h3><ul><li><p><strong>Executable and Linking Format</strong></p><ul><li>æ˜¯ Linux ç³»ç»Ÿä¸‹çš„ä¸€ç§å¸¸ç”¨<strong>ç›®æ ‡æ–‡ä»¶ï¼ˆobject fileï¼‰</strong>æ ¼å¼ï¼Œä¸‰ç§ä¸»è¦ç±»å‹<ul><li><strong>ç”¨äºæ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆExecutable fileï¼‰</strong>ï¼Œç”¨äºæä¾›ç¨‹åºçš„è¿›ç¨‹æ˜ åƒï¼ŒåŠ è½½çš„å†…å­˜æ‰§è¡Œ</li><li><strong>ç”¨äºè¿æ¥çš„å¯é‡å®šä½æ–‡ä»¶ï¼ˆrelocatable fileï¼‰</strong>ï¼Œå¯ä¸å…¶ä»–ç›®æ ‡æ–‡ä»¶ä¸€èµ·åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶</li><li><strong>å…±äº«ç›®æ ‡æ–‡ä»¶ï¼ˆshared object fileï¼‰</strong>ï¼Œè¿æ¥å™¨å¯å°†ä»–ä¸å…¶ä»–å¯é‡å®šä½æ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶è¿æ¥æˆå…¶ä»–çš„ç›®æ ‡æ–‡ä»¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨åˆå¯å°†å®ƒä¸å¯æ‰§è¡Œæ–‡ä»¶å’Œå…¶ä»–å…±äº«ç›®æ ‡æ–‡ä»¶ç»“åˆèµ·æ¥åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ˜ åƒ</li></ul></li></ul></li><li><p>ä¸æœ¬å®éªŒç›¸å…³çš„ ELF å¯æ‰§è¡Œæ–‡ä»¶</p><ul><li><strong>ELF header</strong>åœ¨æ–‡ä»¶å¼€å¤´å¤„ï¼Œæè¿°äº†æ•´ä¸ªæ–‡ä»¶çš„ç»„ç»‡</li><li>ELF çš„æ–‡ä»¶å¤´åŒ…å«äº†æ•´ä¸ªæ‰§è¡Œæ–‡ä»¶çš„æ§åˆ¶ç»“æ„ï¼Œå…¶å®šä¹‰åœ¨ <code>elf.h</code>ä¸­</li></ul></li><li><p><strong>program header</strong>ï¼Œ ä»…å¯¹å¯æ‰§è¡Œæ–‡ä»¶ å’Œ å…±äº«ç›®æ ‡æ–‡ä»¶æœ‰æ„ä¹‰</p><ul><li>æè¿°ä¸ç¨‹åºæ‰§è¡Œç›´æ¥ç›¸å…³çš„<em>ç›®æ ‡æ–‡ä»¶ç»“æ„ä¿¡æ¯</em>ï¼Œç”¨äºåœ¨æ–‡ä»¶ä¸­<em>å®šä½å„ä¸ªæ®µçš„æ˜ åƒ</em>ï¼ŒåŒæ—¶åŒ…å«å…¶ä»–ä¸€äº›ç”¨æ¥<em>ä¸ºç¨‹åºåˆ›å»ºè¿›ç¨‹æ˜ åƒæ‰€å¿…éœ€çš„ä¿¡æ¯</em></li></ul></li><li><p>å¯æ‰§è¡Œæ–‡ä»¶çš„ç¨‹åºå¤´éƒ¨æ˜¯ä¸€ä¸ª program headerç»“æ„çš„æ•°ç»„ï¼Œæ¯ä¸ªç»“æ„æè¿°äº†ä¸€ä¸ªæ®µæˆ–è€…ç³»ç»Ÿå‡†å¤‡ç¨‹åºæ‰§è¡Œæ‰€å¿…éœ€çš„å…¶ä»–ä¿¡æ¯</p></li><li><p><strong>ç›®æ ‡æ–‡ä»¶ çš„æ®µ</strong>åŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ª <strong>èŠ‚åŒº ï¼ˆsectionï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯ <strong>æ®µå†…å®¹ï¼ˆsegment contentsï¼‰</strong></p></li><li><p>å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶åœ¨ELFå¤´éƒ¨çš„ <code>e_phentsize</code> , <code>e_phnum</code>æˆå‘˜ä¸­ç»™å‡ºå…¶è‡ªèº«ç¨‹åºå¤´éƒ¨å¤§å°</p><ul><li><p>ç¨‹åºå¤´éƒ¨çš„æ•°æ®ç»“æ„ï¼š</p><ul><li>```C<br>struct proghdr {<br>  uint type;   // æ®µç±»å‹<br>  uint offset;  // æ®µç›¸å¯¹æ–‡ä»¶å¤´çš„åç§»å€¼<br>  uint va;     // æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚å°†è¢«æ”¾åˆ°å†…å­˜ä¸­çš„è™šæ‹Ÿåœ°å€<br>  uint pa;<br>  uint filesz;<br>  uint memsz;  // æ®µåœ¨å†…å­˜æ˜ åƒä¸­å ç”¨çš„å­—èŠ‚æ•°<br>  uint flags;<br>  uint align;<br>};<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">* æ ¹æ® `elfhdr`, `prohdr`çš„ç»“æ„æè¿°ï¼Œbootloader å¯ä»¥å®Œæˆå¯¹ ELF æ ¼å¼çš„ucoreçš„åŠ è½½è¿‡ç¨‹</span><br><span class="line"></span><br><span class="line">## 3.3 æ“ä½œç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹</span><br><span class="line"></span><br><span class="line">### 3.3.1 å‡½æ•°å †æ ˆ</span><br><span class="line"></span><br><span class="line">* ç†è§£è°ƒç”¨æ ˆï¼š**æ ˆçš„ç»“æ„** å’Œ **EBPå¯„å­˜å™¨çš„ä½¿ç”¨**</span><br><span class="line">* ebp ï¼šåŸºå€å¯„å­˜å™¨</span><br><span class="line">* espï¼šæ ˆæŒ‡é’ˆå¯„å­˜å™¨</span><br><span class="line">* eipï¼šç¨‹åºæŒ‡ä»¤æŒ‡é’ˆï¼Œå½“å‰ç¨‹åºè¿è¡Œçš„æŒ‡ä»¤</span><br><span class="line">* ä¸€ä¸ªå‡½æ•°è°ƒç”¨åŠ¨ä½œï¼š</span><br><span class="line"></span><br><span class="line">  * 0-n ä¸ª **PUSH** æŒ‡ä»¤ï¼Œä¸€ä¸ª **CALL** æŒ‡ä»¤ã€‚**CALL** æŒ‡ä»¤å†…éƒ¨æš—å«ä¸€ä¸ªå°†**è¿”å›åœ°å€**å‹æ ˆçš„åŠ¨ä½œ</span><br><span class="line">    * PUSH ï¼š å‚æ•°å…¥æ ˆ</span><br><span class="line">    * è¿”å›åœ°å€ï¼šCALL æŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€</span><br><span class="line">    * å°†è¿”å›åœ°å€å‹æ ˆï¼šç”±ç¡¬ä»¶å®Œæˆ</span><br><span class="line">* å‡ ä¹æ¯ä¸ªæœ¬åœ°ç¼–è¯‘å™¨éƒ½ä¼šåœ¨æ¯ä¸ªå‡½æ•°ä½“ä¹‹å‰æ’å…¥ï¼š</span><br><span class="line"></span><br><span class="line">  * ```assembly</span><br><span class="line">    pushl   %ebp</span><br><span class="line">    movl   %esp , %ebp</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ‰§è¡Œåˆ°ç¨‹åºçš„å®é™…æŒ‡ä»¤å‰ï¼Œå‚æ•°ã€è¿”å›åœ°å€ã€ebpå¯„å­˜å™¨ å·²æŒ‰é¡ºåºå…¥æ ˆï¼š</p><ul><li><pre><code class="assembly">+|  æ ˆåº•æ–¹å‘        | é«˜ä½åœ°å€ |    ...        | |    ...        | |  å‚æ•°3        | |  å‚æ•°2        | |  å‚æ•°1        | |  è¿”å›åœ°å€        | |  ä¸Šä¸€å±‚[ebp]    | &lt;-------- [ebp] |  å±€éƒ¨å˜é‡        |  ä½ä½åœ°å€</code></pre></li></ul></li></ul></li><li><p>é¦–å…ˆå°† ebp å¯„å­˜å™¨å…¥æ ˆï¼Œç„¶åå°†æ ˆé¡¶æŒ‡é’ˆ esp èµ‹å€¼ç»™ ebp</p><ul><li>åœ¨ç»™ ebp èµ‹å€¼å‰ï¼ŒåŸ ebp å€¼å·²ç»è¢«å‹æ ˆï¼ˆä½äºæ ˆé¡¶ï¼‰ï¼Œè€Œæ–°çš„ ebp åˆæ°æ°æŒ‡å‘æ ˆé¡¶</li><li><strong>æ­¤æ—¶ ebp å¯„å­˜å™¨å¤„äºååˆ†é‡è¦çš„åœ°ä½</strong>ï¼šebpä¸­å­˜å‚¨ç€æ ˆä¸­çš„ä¸€ä¸ªåœ°å€ï¼ˆåŸebpå…¥æ ˆåçš„æ ˆé¡¶ï¼‰ï¼Œä»è¯¥åœ°å€ä¸ºåŸºå‡†ï¼Œ<ul><li>å‘ä¸Šï¼ˆæ ˆåº•æ–¹å‘ï¼‰èƒ½è·å–è¿”å›åœ°å€ã€å‚æ•°å€¼ï¼Œ</li><li>å‘ä¸‹ï¼ˆæ ˆé¡¶æ–¹å‘ï¼‰èƒ½è·å–åˆ°å‡½æ•°å±€éƒ¨å˜é‡å€¼ï¼Œè€Œæ”¹åœ°å€å¤„æœ‰å­˜å‚¨ç€ä¸Šä¸€å±‚å‡½æ•°è°ƒç”¨æ—¶çš„ ebp å€¼</li></ul></li></ul></li><li><p>ä¸€èˆ¬è€Œè¨€ï¼š<code>ss:[ebp+4]</code>ä¸ºè¿”å›åœ°å€ï¼Œ<code>ss:[ebp+8]</code>ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å€¼ï¼ˆæœ€åä¸€ä¸ªå…¥æ ˆï¼‰,<code>ss:[ebp-4]</code>ä¸ºç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œ<code>ss:[ebp]</code>ä¸ºä¸Šä¸€å±‚ ebp å€¼</p><ul><li>ebp ä¸­çš„åœ°å€å¤„æ€»æ˜¯ä¸Šä¸€å±‚å‡½æ•°è°ƒç”¨æ—¶ ebp çš„å€¼</li><li>è€Œæ¯ä¸€å±‚å‡½æ•°è°ƒç”¨ä¸­ï¼Œéƒ½èƒ½é€šè¿‡å½“æ—¶çš„ ebp å€¼ï¼Œå‘ä¸Šï¼ˆæ ˆåº•æ–¹å‘ï¼‰è·å–è¿”å›åœ°å€ï¼Œï¼Œå‚æ•°å€¼ï¼›å‘ä¸‹ï¼ˆæ ˆé¡¶æ–¹å‘ï¼‰è·å–å‡½æ•°å±€éƒ¨å˜é‡å€¼</li><li>ç”±æ­¤å½¢æˆé€’å½’ï¼Œç›´è‡³åˆ°è¾¾æ ˆåº•ï¼Œè¿™å°±æ˜¯å‡½æ•°è°ƒç”¨æ ˆ</li></ul></li></ul><h3 id="3-3-2-ä¸­æ–­ä¸å¼‚å¸¸"><a href="#3-3-2-ä¸­æ–­ä¸å¼‚å¸¸" class="headerlink" title="3.3.2 ä¸­æ–­ä¸å¼‚å¸¸"></a>3.3.2 ä¸­æ–­ä¸å¼‚å¸¸</h3><ul><li><p>æ“ä½œç³»ç»Ÿéœ€è¦å¯¹è®¡ç®—æœºç³»ç»Ÿä¸­çš„å„ç§å¤–è®¾è¿›è¡Œç®¡ç†ï¼Œéœ€è¦ CPU å’Œå¤–è®¾èƒ½å¤Ÿç›¸äº’é€šä¿¡</p></li><li><p>éœ€è¦ OS å’Œ CPUèƒ½å¤Ÿä¸€èµ·æä¾›æŸç§æœºåˆ¶ï¼Œè®©å¤–è®¾åœ¨éœ€è¦æ“ä½œç³»ç»Ÿå¤„ç†å¤–è®¾ç›¸å…³äº‹ä»¶çš„æ—¶å€™ï¼Œèƒ½ä¸»åŠ¨é€šçŸ¥æ“ä½œç³»ç»Ÿ</p><ul><li>å³æ‰“æ–­æ“ä½œç³»ç»Ÿå’Œåº”ç”¨çš„æ­£å¸¸æ‰§è¡Œï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿå®Œæˆå¤–è®¾çš„ç›¸å…³å¤„ç†ï¼Œ</li><li>ç„¶åæ¢å¤OS å’Œåº”ç”¨çš„æ­£å¸¸æ‰§è¡Œ</li><li>è¯¥æœºåˆ¶å³ä¸ºä¸­æ–­æœºåˆ¶</li></ul></li><li><p>ä¸­æ–­æœºåˆ¶ç»™æ“ä½œç³»ç»Ÿæä¾›äº†å¤„ç†æ„å¤–æƒ…å†µçš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å®ç° è¿›ç¨‹/çº¿ç¨‹ æŠ¢å å¼è°ƒåº¦çš„é‡è¦åŸºçŸ³</p></li><li><p>ä¸‰ç§ç‰¹æ®Šçš„ä¸­æ–­äº‹ä»¶ï¼š</p><ul><li><strong>å¼‚æ­¥ä¸­æ–­(asynchronous interrupt)</strong>, ä¹Ÿç§°å¤–éƒ¨ä¸­æ–­ï¼Œç®€ç§°ä¸­æ–­<ul><li>ç”± CPU <strong>å¤–éƒ¨è®¾å¤‡</strong>å¼•èµ·çš„å¤–éƒ¨äº‹ä»¶ï¼ˆIOä¸­æ–­ã€æ—¶é’Ÿä¸­æ–­ã€æ§åˆ¶å°ä¸­æ–­ï¼‰æ˜¯å¼‚æ­¥äº§ç”Ÿï¼Œå³äº§ç”Ÿçš„æ—¶åˆ»ä¸ç¡®å®šï¼Œä¸CPUçš„æ‰§è¡Œæ— å…³</li></ul></li><li><strong>åŒæ­¥ä¸­æ–­ï¼ˆsynchronous interruptï¼‰</strong>,å†…éƒ¨ä¸­æ–­ï¼Œç®€ç§°å¼‚å¸¸ï¼ˆexceptionï¼‰<ul><li>åœ¨ CPU <strong>æ‰§è¡ŒæŒ‡ä»¤æœŸé—´æ£€æµ‹åˆ°ä¸æ­£å¸¸çš„ æˆ– éæ³•çš„æ¡ä»¶</strong>ï¼ˆé™¤0ï¼Œåœ°å€è®¿é—®è¶Šç•Œï¼‰ï¼Œæ‰€å¼•èµ·çš„å†…éƒ¨äº‹ä»¶</li></ul></li><li><strong>é™·å…¥ä¸­æ–­ï¼ˆtrap interruptï¼‰</strong>ï¼Œä¹Ÿç§°è½¯ä¸­æ–­ï¼ˆsoft interruptï¼‰ï¼Œç³»ç»Ÿè°ƒç”¨ç®€ç§°trap<ul><li>åœ¨ç¨‹åºä¸­ä½¿ç”¨ <strong>è¯·æ±‚ç³»ç»ŸæœåŠ¡çš„ç³»ç»Ÿè°ƒç”¨</strong>è€Œå¼•å‘çš„äº‹ä»¶</li></ul></li></ul></li><li><p>å½“ CPU æ”¶åˆ°ä¸­æ–­æˆ–è€…å¼‚å¸¸äº‹ä»¶æ—¶ï¼Œä¼šæš‚åœæ‰§è¡Œå½“å‰çš„ç¨‹åºæˆ–ä»»åŠ¡ï¼Œé€šè¿‡ä¸€å®šçš„æœºåˆ¶è·³è½¬åˆ°è´Ÿè´£å¤„ç†è¿™ä¸ªä¿¡å·çš„ç›¸å…³å¤„ç†ä¾‹ç¨‹ä¸­ï¼Œå®Œæˆå¯¹è¿™ä¸ªæ—¶é—´æ®µçš„å¤„ç†ååœ¨è·³å›åˆ°åˆšæ‰è¢«æ‰“æ–­çš„ç¨‹åºæˆ–ä»»åŠ¡ä¸­ã€‚</p><ul><li>ä¸­æ–­å‘é‡å’Œä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„å¯¹åº”å…³ç³»ï¼Œä¸»è¦æ˜¯ç”± IDTï¼ˆä¸­æ–­æè¿°ç¬¦è¡¨è´Ÿè´£ï¼‰</li><li>æ“ä½œç³»ç»Ÿ åœ¨IDT ä¸­è®¾ç½®å¥½å„ç§<strong>ä¸­æ–­å‘é‡</strong>å¯¹åº”çš„<strong>ä¸­æ–­æè¿°ç¬¦</strong>ï¼Œç­‰ CPU åœ¨äº§ç”Ÿä¸­æ–­åæŸ¥è¯¢å¯¹åº”ç»ˆç«¯æœåŠ¡ä¾‹ç¨‹çš„èµ·å§‹åœ°å€</li><li>è€ŒIDTæœ¬èº«çš„èµ·å§‹åœ°å€ä¿å­˜åœ¨ idträ¸­</li></ul><ol><li><p><strong>ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆInterrupt Descriptor Table)</strong></p><ul><li><p>IDT å°†æ¯ä¸ªä¸­æ–­æˆ–å¼‚å¸¸ç¼–å· å’Œ ä¸€ä¸ªæŒ‡å‘ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æè¿°ç¬¦è”ç³»èµ·æ¥ã€‚</p></li><li><p>å’Œ GDT ä¸€æ ·ï¼ŒIDTæ˜¯ä¸€ä¸ª8 bitçš„æè¿°ç¬¦æ•°ç»„ï¼Œä½† IDT ç¬¬ä¸€é¡¹å¯ä»¥åŒ…å«ä¸€ä¸ªæè¿°ç¬¦</p></li><li><p>CPU æŠŠä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰ç¼–å· ä¹˜ä»¥ 8 ä½œä¸ºIDTçš„ç´¢å¼•</p></li><li><p>IDT å¯ä»¥ä½äºå†…å­˜çš„ä»»æ„ä½ç½®ï¼ŒCPU é€šè¿‡IDTå¯„å­˜å™¨ï¼ˆidtrï¼‰çš„å†…å®¹æ¥å¯»æ‰¾ IDTçš„èµ·å§‹åœ°å€</p></li><li><p>æ“ä½œ IDTR çš„æŒ‡ä»¤ï¼šLIDTï¼ŒSIDT</p><ul><li>éƒ½æœ‰ä¸€ä¸ªæ˜¾ç¤ºçš„æ“ä½œæ•°ï¼šä¸€ä¸ª6 å­—èŠ‚è¡¨ç¤ºçš„å†…å­˜åœ°å€</li><li><strong>LIDT(Load IDT Register)ï¼š</strong>ä½¿ç”¨ä¸€ä¸ªåŒ…å«çº¿æ€§åœ°å€ <strong>åŸºè´¨å’Œç•Œé™</strong> çš„å†…å­˜æ“ä½œæ•°åŠ è½½IDTã€‚<ul><li>æ“ä½œç³»ç»Ÿåˆ›å»º IDT æ—¶ï¼Œéœ€è¦æ‰§è¡Œå®ƒæ¥è®¾å®š<strong>IDTçš„èµ·å§‹åœ°å€</strong></li><li>è¯¥æŒ‡ä»¤åªèƒ½åœ¨ç‰¹æƒçº§ 0 æ‰§è¡Œ</li><li><code>libs/x86.h</code>ä¸­çš„lidtå‡½æ•°å®ç°ï¼Œæ˜¯ä¸€æ¡æ±‡ç¼–æŒ‡ä»¤</li></ul></li><li><strong>SIDT(Store IDT Register)ï¼š</strong>æ‹·è´ IDTR çš„ <strong>åŸºå€å’Œç•Œé™</strong>éƒ¨åˆ†åˆ°ä¸€ä¸ªå†…å­˜åœ°å€<ul><li>å¯åœ¨ä»»æ„ç‰¹æƒçº§æ‰§è¡Œ</li></ul></li><li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image007.png" alt="IDTå’ŒIDTRå¯„å­˜å™¨çš„ç»“æ„å’Œå…³ç³»å›¾"></li></ul></li><li><blockquote><p>åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæœ€å¤šä¼šå­˜åœ¨256ä¸ªInterrupt/<strong>Exception Vectors</strong>ã€‚</p><p>èŒƒå›´[0ï¼Œ31]å†…çš„32ä¸ªå‘é‡è¢«å¼‚å¸¸Exceptionå’ŒNMIä½¿ç”¨ï¼Œä½†å½“å‰å¹¶éæ‰€æœ‰è¿™32ä¸ªå‘é‡éƒ½å·²ç»è¢«ä½¿ç”¨ï¼Œæœ‰å‡ ä¸ªå½“å‰æ²¡æœ‰è¢«ä½¿ç”¨çš„ï¼Œè¯·ä¸è¦æ“…è‡ªä½¿ç”¨å®ƒä»¬ï¼Œå®ƒä»¬è¢«ä¿ç•™ï¼Œä»¥å¤‡å°†æ¥å¯èƒ½å¢åŠ æ–°çš„Exceptionã€‚</p><p>èŒƒå›´[32ï¼Œ255]å†…çš„å‘é‡è¢«ä¿ç•™ç»™ç”¨æˆ·å®šä¹‰çš„Interruptsã€‚Intelæ²¡æœ‰å®šä¹‰ï¼Œä¹Ÿæ²¡æœ‰ä¿ç•™è¿™äº›Interruptsã€‚ç”¨æˆ·å¯ä»¥å°†å®ƒä»¬ç”¨ä½œå¤–éƒ¨I/Oè®¾å¤‡ä¸­æ–­ï¼ˆ8259A IRQï¼‰ï¼Œæˆ–è€…ç³»ç»Ÿè°ƒç”¨ï¼ˆSystem Call ã€Software Interruptsï¼‰ç­‰</p></blockquote></li></ul></li><li><p><strong>IDT gate descriptors</strong></p><ul><li><strong>Interrupts/Exceptions</strong> åº”è¯¥ä½¿ç”¨<strong>Interrupt Gate</strong>å’Œ<strong>Trap Gate</strong><ul><li>å”¯ä¸€çš„åŒºåˆ«ï¼šå½“è°ƒç”¨Interrupt Gateæ—¶ï¼Œ<strong>Interruptä¼šè¢«CPUè‡ªåŠ¨ç¦æ­¢</strong><ul><li>è‡ªåŠ¨ç¦æ­¢ï¼šCPU è·³è½¬åˆ°Interrupt Gateé‡Œçš„åœ°å€æ—¶ï¼Œåœ¨å°†EFLAGSä¿å­˜åœ¨æ ˆä¸Šåï¼Œæ¸…é™¤EFLAGSé‡Œçš„IFä½ï¼Œä»¥å…é‡å¤è§¦å‘ä¸­æ–­ã€‚</li></ul></li><li>è€Œå½“è°ƒç”¨Trap Gateæ—¶ï¼Œ<strong>CPUåˆ™ä¸ä¼šå»ç¦æ­¢æˆ–æ‰“å¼€ä¸­æ–­</strong>ï¼Œè€Œæ˜¯ä¿ç•™ä»–åŸæ¥çš„æ ·å­</li></ul></li><li>åœ¨IDTä¸­ï¼Œå¯ä»¥åŒ…å«3ç§ç±»å‹çš„ Descriptorï¼š<ul><li>Task-gate descriptor</li><li>Interrupt-gate descriptor: ä¸­æ–­æ–¹å¼ç”¨åˆ°</li><li>Trap-gate descriptorï¼šç³»ç»Ÿè°ƒç”¨ç”¨åˆ°</li></ul></li></ul></li><li><p><strong>ä¸­æ–­å¤„ç†ä¸­ç¡¬ä»¶è´Ÿè´£å®Œæˆçš„å·¥ä½œ</strong></p><ul><li><p>ä¸­æ–­æœåŠ¡ä¾‹ç¨‹åŒ…æ‹¬å…·ä½“è´Ÿè´£å¤„ç†ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰çš„ä»£ç æ˜¯æ“ä½œç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><ul><li><p>ç¡¬ä»¶ä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼ˆèµ·å§‹ï¼‰:ä»CPUå—åˆ°ä¸­æ–­äº‹ä»¶åï¼Œæ‰“æ–­å½“å‰ç¨‹åºæˆ–ä»»åŠ¡çš„æ‰§è¡Œï¼Œæ ¹æ®æŸç§æœºåˆ¶è·³è½¬åˆ°ä¸­æ–­æœåŠ¡ä¾‹ç¨‹å»æ‰§è¡Œçš„è¿‡ç¨‹ï¼š</p><ul><li><blockquote><ul><li>CPUåœ¨æ‰§è¡Œå®Œå½“å‰ç¨‹åºçš„æ¯ä¸€æ¡æŒ‡ä»¤åï¼Œéƒ½ä¼šå»ç¡®è®¤åœ¨æ‰§è¡Œåˆšæ‰çš„æŒ‡ä»¤è¿‡ç¨‹ä¸­ä¸­æ–­æ§åˆ¶å™¨ï¼ˆå¦‚ï¼š8259Aï¼‰æ˜¯å¦å‘é€ä¸­æ–­è¯·æ±‚è¿‡æ¥ï¼Œå¦‚æœæœ‰é‚£ä¹ˆCPUå°±ä¼šåœ¨ç›¸åº”çš„æ—¶é’Ÿè„‰å†²åˆ°æ¥æ—¶ä»æ€»çº¿ä¸Šè¯»å–ä¸­æ–­è¯·æ±‚å¯¹åº”çš„ä¸­æ–­å‘é‡ï¼›</li><li>CPUæ ¹æ®å¾—åˆ°çš„ä¸­æ–­å‘é‡ï¼ˆä»¥æ­¤ä¸ºç´¢å¼•ï¼‰åˆ°IDTä¸­æ‰¾åˆ°è¯¥å‘é‡å¯¹åº”çš„ä¸­æ–­æè¿°ç¬¦ï¼Œä¸­æ–­æè¿°ç¬¦é‡Œä¿å­˜ç€ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µé€‰æ‹©å­ï¼›</li><li>CPUä½¿ç”¨IDTæŸ¥åˆ°çš„ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µé€‰æ‹©å­ä»GDTä¸­å–å¾—ç›¸åº”çš„æ®µæè¿°ç¬¦ï¼Œæ®µæè¿°ç¬¦é‡Œä¿å­˜äº†ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µåŸºå€å’Œå±æ€§ä¿¡æ¯ï¼Œæ­¤æ—¶CPUå°±å¾—åˆ°äº†ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„èµ·å§‹åœ°å€ï¼Œå¹¶è·³è½¬åˆ°è¯¥åœ°å€ï¼›</li><li>CPUä¼šæ ¹æ®CPLå’Œä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µæè¿°ç¬¦çš„DPLä¿¡æ¯ç¡®è®¤æ˜¯å¦å‘ç”Ÿäº†ç‰¹æƒçº§çš„è½¬æ¢ã€‚æ¯”å¦‚å½“å‰ç¨‹åºæ­£è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼Œè€Œä¸­æ–­ç¨‹åºæ˜¯è¿è¡Œåœ¨å†…æ ¸æ€çš„ï¼Œåˆ™æ„å‘³ç€å‘ç”Ÿäº†ç‰¹æƒçº§çš„è½¬æ¢ï¼Œè¿™æ—¶CPUä¼šä»å½“å‰ç¨‹åºçš„TSSä¿¡æ¯ï¼ˆè¯¥ä¿¡æ¯åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€å­˜åœ¨TRå¯„å­˜å™¨ä¸­ï¼‰é‡Œå–å¾—è¯¥ç¨‹åºçš„å†…æ ¸æ ˆåœ°å€ï¼Œå³åŒ…æ‹¬å†…æ ¸æ€çš„sså’Œespçš„å€¼ï¼Œå¹¶ç«‹å³å°†ç³»ç»Ÿå½“å‰ä½¿ç”¨çš„æ ˆåˆ‡æ¢æˆæ–°çš„å†…æ ¸æ ˆã€‚è¿™ä¸ªæ ˆå°±æ˜¯å³å°†è¿è¡Œçš„ä¸­æ–­æœåŠ¡ç¨‹åºè¦ä½¿ç”¨çš„æ ˆã€‚ç´§æ¥ç€å°±å°†å½“å‰ç¨‹åºä½¿ç”¨çš„ç”¨æˆ·æ€çš„sså’Œespå‹åˆ°æ–°çš„å†…æ ¸æ ˆä¸­ä¿å­˜èµ·æ¥ï¼›</li><li>CPUéœ€è¦å¼€å§‹ä¿å­˜å½“å‰è¢«æ‰“æ–­çš„ç¨‹åºçš„ç°åœºï¼ˆå³ä¸€äº›å¯„å­˜å™¨çš„å€¼ï¼‰ï¼Œä»¥ä¾¿äºå°†æ¥æ¢å¤è¢«æ‰“æ–­çš„ç¨‹åºç»§ç»­æ‰§è¡Œã€‚è¿™éœ€è¦åˆ©ç”¨å†…æ ¸æ ˆæ¥ä¿å­˜ç›¸å…³ç°åœºä¿¡æ¯ï¼Œå³ä¾æ¬¡å‹å…¥å½“å‰è¢«æ‰“æ–­ç¨‹åºä½¿ç”¨çš„eflagsï¼Œcsï¼Œeipï¼ŒerrorCodeï¼ˆå¦‚æœæ˜¯æœ‰é”™è¯¯ç çš„å¼‚å¸¸ï¼‰ä¿¡æ¯ï¼›</li><li>CPUåˆ©ç”¨ä¸­æ–­æœåŠ¡ä¾‹ç¨‹çš„æ®µæè¿°ç¬¦å°†å…¶ç¬¬ä¸€æ¡æŒ‡ä»¤çš„åœ°å€åŠ è½½åˆ°cså’Œeipå¯„å­˜å™¨ä¸­ï¼Œå¼€å§‹æ‰§è¡Œä¸­æ–­æœåŠ¡ä¾‹ç¨‹ã€‚è¿™æ„å‘³ç€å…ˆå‰çš„ç¨‹åºè¢«æš‚åœæ‰§è¡Œï¼Œä¸­æ–­æœåŠ¡ç¨‹åºæ­£å¼å¼€å§‹å·¥ä½œã€‚</li></ul></blockquote></li></ul></li><li><p>ç¡¬ä»¶ä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼ˆç»“æŸï¼‰:æ¯ä¸ªä¸­æ–­æœåŠ¡ä¾‹ç¨‹åœ¨æœ‰ä¸­æ–­å¤„ç†å·¥ä½œå®Œæˆåéœ€è¦é€šè¿‡ <code>iret</code>æŒ‡ä»¤æ¢å¤è¢«æ‰“æ–­çš„ç¨‹åºæ‰§è¡Œï¼š</p><ul><li><blockquote><ul><li>ç¨‹åºæ‰§è¡Œè¿™æ¡iretæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆä¼šä»å†…æ ¸æ ˆé‡Œå¼¹å‡ºå…ˆå‰ä¿å­˜çš„è¢«æ‰“æ–­çš„ç¨‹åºçš„ç°åœºä¿¡æ¯ï¼Œå³eflagsï¼Œcsï¼Œeipé‡æ–°å¼€å§‹æ‰§è¡Œï¼›</li><li>å¦‚æœå­˜åœ¨ç‰¹æƒçº§è½¬æ¢ï¼ˆä»å†…æ ¸æ€è½¬æ¢åˆ°ç”¨æˆ·æ€ï¼‰ï¼Œåˆ™è¿˜éœ€è¦ä»å†…æ ¸æ ˆä¸­å¼¹å‡ºç”¨æˆ·æ€æ ˆçš„sså’Œespï¼Œè¿™æ ·ä¹Ÿæ„å‘³ç€æ ˆä¹Ÿè¢«åˆ‡æ¢å›åŸå…ˆä½¿ç”¨çš„ç”¨æˆ·æ€çš„æ ˆäº†ï¼›</li><li>å¦‚æœæ­¤æ¬¡å¤„ç†çš„æ˜¯å¸¦æœ‰é”™è¯¯ç ï¼ˆerrorCodeï¼‰çš„å¼‚å¸¸ï¼ŒCPUåœ¨æ¢å¤å…ˆå‰ç¨‹åºçš„ç°åœºæ—¶ï¼Œå¹¶ä¸ä¼šå¼¹å‡ºerrorCodeã€‚è¿™ä¸€æ­¥éœ€è¦é€šè¿‡è½¯ä»¶å®Œæˆï¼Œå³è¦æ±‚ç›¸å…³çš„ä¸­æ–­æœåŠ¡ä¾‹ç¨‹åœ¨è°ƒç”¨iretè¿”å›ä¹‹å‰æ·»åŠ å‡ºæ ˆä»£ç ä¸»åŠ¨å¼¹å‡ºerrorCodeã€‚</li></ul></blockquote></li></ul></li></ul></li></ul></li><li><p><strong>ä¸­æ–­äº§ç”Ÿåçš„å †æ ˆå˜åŒ–</strong></p><ul><li>ç›¸åŒç‰¹æƒçº§å’Œä¸åŒç‰¹æƒçº§æƒ…å†µä¸‹ä¸­æ–­äº§ç”Ÿåçš„å †æ ˆå˜æ¢ï¼š<ul><li><img src="https://objectkuan.gitbooks.io/ucore-docs/content/lab1_figs/image010.png" alt="ç›¸åŒç‰¹æƒçº§å’Œä¸åŒç‰¹æƒçº§æƒ…å†µä¸‹ä¸­æ–­äº§ç”Ÿåçš„å †æ ˆæ ˆå˜åŒ–ç¤ºæ„å›¾"></li></ul></li></ul></li><li><p><strong>ä¸­æ–­å¤„ç†çš„ç‰¹æƒçº§è½¬æ¢</strong></p><ul><li><p>é€šè¿‡é—¨æè¿°ç¬¦ï¼ˆgate descriptorï¼‰å’Œç›¸å…³æŒ‡ä»¤å®Œæˆ</p></li><li><p>ä¸€ä¸ªé—¨æè¿°ç¬¦å°±æ˜¯ä¸€ä¸ªç³»ç»Ÿç±»å‹çš„æ®µæè¿°ç¬¦ï¼Œä¸€å…±å››ä¸ªå­ç±»å‹ï¼š</p><ul><li>è°ƒç”¨é—¨æè¿°ç¬¦(call-gate)</li><li>ä¸­æ–­é—¨æè¿°ç¬¦(interrupt-gate)</li><li>é™·é˜±é—¨æè¿°ç¬¦(trap-gate)</li><li>ä»»åŠ¡é—¨æè¿°ç¬¦(task-gate)</li></ul></li><li><p>ä¸ä¸­æ–­å¤„ç†ç›¸å…³ï¼šä¸­æ–­é—¨æè¿°ç¬¦ï¼Œé™·é˜±é—¨æè¿°ç¬¦</p></li><li><p>è¿™äº›é—¨æè¿°ç¬¦è¢«å­˜å‚¨åœ¨ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆIDTï¼‰</p></li><li><p>CPU æŠŠä¸­æ–­å‘é‡å½“ä½œIDTè¡¨é¡¹çš„ç´¢å¼•ï¼ŒæŒ‡å‡ºå½“ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œä½¿ç”¨é‚£ä¸€ä¸ªé—¨æè¿°ç¬¦æ¥å¤„ç†ä¸­æ–­</p></li><li><blockquote><p>é—¨ä¸­çš„DPLå’Œæ®µé€‰æ‹©ç¬¦ä¸€èµ·æ§åˆ¶ç€è®¿é—®ï¼ŒåŒæ—¶ï¼Œæ®µé€‰æ‹©ç¬¦ç»“åˆåç§»é‡ï¼ˆOffsetï¼‰æŒ‡å‡ºäº†ä¸­æ–­å¤„ç†ä¾‹ç¨‹çš„å…¥å£ç‚¹ã€‚å†…æ ¸ä¸€èˆ¬åœ¨é—¨æè¿°ç¬¦ä¸­å¡«å…¥å†…æ ¸ä»£ç æ®µçš„æ®µé€‰æ‹©å­ã€‚äº§ç”Ÿä¸­æ–­åï¼ŒCPUä¸€å®šä¸ä¼šå°†è¿è¡Œæ§åˆ¶ä»é«˜ç‰¹æƒç¯è½¬å‘ä½ç‰¹æƒç¯ï¼Œç‰¹æƒçº§å¿…é¡»è¦ä¹ˆä¿æŒä¸å˜ï¼ˆå½“æ“ä½œç³»ç»Ÿå†…æ ¸è‡ªå·±è¢«ä¸­æ–­çš„æ—¶å€™ï¼‰ï¼Œæˆ–è¢«æå‡ï¼ˆå½“ç”¨æˆ·æ€ç¨‹åºè¢«ä¸­æ–­çš„æ—¶å€™ï¼‰ã€‚æ— è®ºå“ªä¸€ç§æƒ…å†µï¼Œä½œä¸ºç»“æœçš„CPLå¿…é¡»ç­‰äºç›®çš„ä»£ç æ®µçš„DPLã€‚å¦‚æœCPLå‘ç”Ÿäº†æ”¹å˜ï¼Œä¸€ä¸ªå †æ ˆåˆ‡æ¢æ“ä½œï¼ˆé€šè¿‡TSSå®Œæˆï¼‰å°±ä¼šå‘ç”Ÿã€‚å¦‚æœä¸­æ–­æ˜¯è¢«ç”¨æˆ·æ€ç¨‹åºä¸­çš„æŒ‡ä»¤æ‰€è§¦å‘çš„ï¼ˆæ¯”å¦‚è½¯ä»¶æ‰§è¡ŒINT nç”Ÿäº§çš„ä¸­æ–­ï¼‰ï¼Œè¿˜ä¼šå¢åŠ ä¸€ä¸ªé¢å¤–çš„æ£€æŸ¥ï¼šé—¨çš„DPLå¿…é¡»å…·æœ‰ä¸CPLç›¸åŒæˆ–æ›´ä½çš„ç‰¹æƒã€‚è¿™å°±é˜²æ­¢äº†ç”¨æˆ·ä»£ç éšæ„è§¦å‘ä¸­æ–­ã€‚å¦‚æœè¿™äº›æ£€æŸ¥å¤±è´¥ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªä¸€èˆ¬ä¿æŠ¤å¼‚å¸¸ï¼ˆgeneral-protection exceptionï¼‰ã€‚</p></blockquote></li></ul></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> è¯¾ç¨‹å®éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å…¥é—¨å­¦ä¹ 3</title>
      <link href="p/a525d295.html"/>
      <url>p/a525d295.html</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-å…¥é—¨å­¦ä¹ 3"><a href="#Linux-å…¥é—¨å­¦ä¹ 3" class="headerlink" title="Linux å…¥é—¨å­¦ä¹ 3"></a>Linux å…¥é—¨å­¦ä¹ 3</h1><p>[toc]</p><blockquote><p>å­¦ä¹ ä½¿ç”¨ Vim ç¼–è¾‘å™¨ï¼Œç¼–è¾‘ã€ä¿å­˜æ–‡ä»¶ï¼Œä»¥åŠæŸ¥çœ‹ã€æµè§ˆæ–‡ä»¶</p></blockquote><h1 id="1-ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨-Vim"><a href="#1-ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨-Vim" class="headerlink" title="1 ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ Vim"></a>1 ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ Vim</h1><h2 id="1-1-åŸºæœ¬å‘½ä»¤"><a href="#1-1-åŸºæœ¬å‘½ä»¤" class="headerlink" title="1.1 åŸºæœ¬å‘½ä»¤"></a>1.1 åŸºæœ¬å‘½ä»¤</h2><p><img src="https://img-blog.csdn.net/20171206113916293?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZG92ZTEyMDJseQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><ul><li>ä»»ä½•æ–‡ä»¶éœ€è¦ç¼–è¾‘é»˜è®¤åŒ–çš„ç¼–è¾‘å™¨</li><li>åŠŸèƒ½å¼ºå¤§çš„å…¨å±å¹•æ–‡æœ¬ç¼–è¾‘å™¨</li><li>æ–°å»ºã€ç¼–è¾‘ã€æ˜¾ç¤ºæ–‡ä»¶</li><li>Vimåªæœ‰ <code>å‘½ä»¤</code>ï¼Œæ²¡æœ‰ <code>èœå•</code></li><li>å‘½ä»¤ï¼š<ul><li><code>vi</code>: æ–°å»ºä¸€ä¸ªæ–‡ä»¶<ul><li>è¯­æ³•ï¼š<code>vi æ–‡ä»¶å</code></li></ul></li><li>ç¼–è¾‘ï¼šå›è½¦åè¿›å…¥å…¨å±å¹•çš„<strong>å‘½ä»¤æ¨¡å¼</strong><ul><li>è¿›å…¥<strong>å‘½ä»¤æ¨¡å¼</strong>ï¼š<code>Vim</code> ç­‰å¾…è¾“å…¥æŒ‡ä»¤</li><li>è¾“å…¥ <code>i</code>, <code>a</code>, <code>o</code>ï¼Œ è¿›å…¥<strong>è¾“å…¥æ¨¡å¼</strong>ï¼ˆå·¦ä¸‹è§’ä¼šæœ‰ <code>insert</code>ï¼‰<ul><li><code>i</code>: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„å‰é¢ï¼Œè½¬ä¸ºè¾“å…¥æ¨¡å¼</li><li><code>I</code>ï¼š åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–è½¬æ¢ä¸ºè¾“å…¥æ¨¡å¼</li><li><code>a</code>: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„åé¢ï¼Œè½¬ä¸ºè¾“å…¥æ¨¡å¼</li><li><code>A</code>:</li><li><code>o</code>: åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹æ–¹ï¼Œæ–°å»ºä¸€è¡Œï¼Œå¹¶è½¬ä¸ºè¾“å…¥æ¨¡å¼</li><li><code>O</code>:</li><li><code>s</code>: åˆ é™¤å…‰æ ‡æ‰€åœ¨å­—ç¬¦</li><li><code>r</code>: æ›¿æ¢å…‰æ ‡å¤„å­—ç¬¦</li></ul></li><li>é€€å‡ºç¼–è¾‘ï¼šæŒ‰ <code>ESC</code></li><li><code>ESC</code> åè¿›å…¥<strong>å‘½ä»¤æ¨¡å¼</strong>ï¼Œ==å…ˆè¾“å…¥ <code>å†’å·</code>==ï¼š<ul><li><code>w</code>: ä¿å­˜ä¸é€€å‡º</li><li><code>w!</code>: å¼ºåˆ¶ä¿å­˜ä¸é€€å‡º</li><li><code>wq</code>æˆ– <code>x</code>: ä¿å­˜å¹¶é€€å‡º</li><li><code>wq!</code>: <strong>å¼ºåˆ¶ä¿å­˜å¹¶é€€å‡º</strong></li><li><code>q</code>: <strong>ä¸ä¿å­˜é€€å‡º</strong></li><li><code>q!</code>: ä¸ä¿å­˜å¼ºåˆ¶é€€å‡º</li><li><code>e!</code>: <strong>æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œä»ä¸Šæ¬¡ä¿å­˜æ–‡ä»¶å¼€å§‹ç¼–è¾‘</strong></li></ul></li></ul></li></ul></li><li>é‡åˆ°çš„é—®é¢˜ï¼šç”±äºæˆ‘åœ¨æ’å…¥æ¨¡å¼ç¼–è¾‘å®Œåï¼ŒæŒ‰ <code>ESC</code>é€€å›ä¸åˆ°å‘½ä»¤æ¨¡å¼ï¼ŒæŠŠè™šæ‹Ÿæœºå…³æ‰åï¼Œ<code>1.txt</code>æ–‡ä»¶è½¬æ¢æˆäº† <code>.1.txt.swp</code>ã€‚å†æ¬¡åˆ›å»º1.txtå¹¶ç”¨vimæ‰“å¼€ï¼š<ul><li>![image-20210312201009164](E:\LearningNotes\Linux\Linux 3.assets\image-20210312201009164.png)</li><li>Analysisï¼š<ul><li><code>.</code> æ˜¯è¯´æ˜å…¶æ˜¯éšè—æ–‡ä»¶</li><li>çŒœæµ‹æ˜¯ç”±äºæˆ‘æœªèƒ½æˆåŠŸä¿å­˜æ–‡ä»¶ï¼Œäº§ç”Ÿçš„ä¾ç„¶æ­£åœ¨è¢«ç¼–è¾‘ä¸­çš„æ–‡ä»¶ï¼Œè¢«å ç”¨äº†</li></ul></li><li>solutionï¼š<ul><li>ä½¿ç”¨ <code>rm -rf .1.txt.swp</code>å¯ä»¥åˆ é™¤</li></ul></li></ul></li></ul><h2 id="1-2-g-å’Œgdbçš„å®‰è£…"><a href="#1-2-g-å’Œgdbçš„å®‰è£…" class="headerlink" title="1.2 g++å’Œgdbçš„å®‰è£…"></a>1.2 g++å’Œgdbçš„å®‰è£…</h2><p><strong>==é‡åˆ°çš„ä¸‹è½½å®‰è£…é—®é¢˜ä»ç„¶æœªè§£å†³ï¼Œæœ€åé€‰æ‹©ä¸‹è½½å®‰è£…CentOS7ï¼Œä¸‹è½½å®‰è£…æ— ä»»ä½•é—®é¢˜ï¼Ÿï¼Ÿï¼Ÿ==</strong></p><ul><li><p><strong>æ£€æŸ¥gccæ˜¯å¦å­˜åœ¨</strong>ï¼š<code>which gcc</code></p><ul><li>è‹¥æ²¡æœ‰å®‰è£…ï¼Œè¾“å…¥ <code>yum install gcc-c++</code></li></ul></li><li><p><strong>æ£€æŸ¥gdbæ˜¯å¦å­˜åœ¨</strong>ï¼š<code>which gdb</code></p><ul><li>è‹¥æ²¡æœ‰å®‰è£…ï¼Œè¾“å…¥ <code>yum install gdb</code></li></ul></li><li><p>æ£€æŸ¥g++æ˜¯å¦å­˜åœ¨ï¼š<code>which g++</code></p><ul><li>è‹¥æ²¡æœ‰å®‰è£…ï¼Œè¾“å…¥ <code>yum install gcc-c++ libstdc++devel</code></li></ul></li><li><ul><li><p><input disabled="" type="checkbox">  é‡åˆ°äº†<strong>é—®é¢˜</strong>ï¼šæœªå®‰è£…gccï¼Œå°è¯•ç”¨å‘½ä»¤å®‰è£…æ—¶å‡ºç°ï¼š`</p></li><li><p>![image-20210313192827363](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 3.assets\image-20210313192827363.png)</p></li><li><p><strong>analysis:</strong> ä¼¼ä¹æ˜¯ç½‘ç»œé—®é¢˜</p></li><li><p><strong>solution1</strong>:</p><ul><li><a href="https://blog.csdn.net/qq_34430649/article/details/51474730?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=1328642.24663.16156346773373449&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control">å‚è€ƒåšå®¢</a></li><li>è¾“å…¥å†…å®¹åä¸èƒ½ä¿å­˜ï¼š<code>Cant open the file for writing</code><ul><li><strong>analysis</strong>:å¯èƒ½æƒé™ä¸è¶³æˆ–è€…æ–‡ä»¶è¢«å ç”¨</li><li><strong>solution1:</strong> ç”¨viæ—¶ï¼ŒåŠ ä¸Š <code>sudo</code>æ¥ä¸´æ—¶æä¾›ç®¡ç†å‘˜æƒé™</li><li>ä»ç„¶ä¸è¡Œã€‚ã€‚</li></ul></li></ul></li><li><p><strong>solution2</strong>:</p><ul><li>æ”¹å˜æ€è·¯ï¼Œåº”è¯¥ç½‘ç»œé…ç½®</li></ul></li><li><p><strong>solution3</strong>:</p><ul><li>åœ¨åˆšå¼€å§‹æ–°å»ºLinuxç³»ç»Ÿçš„æ—¶å€™ï¼Œé€‰æ‹© <code>é•œåƒç³»ç»Ÿå®‰è£…</code>ï¼Œ<code>gcc</code>å’Œ <code>g++</code>ä¼¼ä¹å·²è¢«å®‰è£…</li></ul></li></ul></li><li><p><strong>é—®é¢˜ï¼š</strong><code>yum install g++</code></p><ul><li><blockquote><p>Loaded plugins: fastestmirror, refresh-packagekit, security<br>You need to be root to perform this command.</p></blockquote></li><li><p><strong>solution</strong>ï¼š<a href="https://blog.csdn.net/qq_26963433/article/details/78222506">å‚è€ƒ </a></p><ul><li><p>å°è¯•ä½¿ç”¨ <code>su</code>å‘½ä»¤åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œè·å–æ›´å¤§æƒé™</p></li><li><p>result:</p><ul><li><blockquote><p>Loaded plugins: fastestmirror, refresh-packagekit, security<br>Setting up Install Process<br>YumRepo Error: All mirror URLs are not using ftp, http[s] or file.<br>Eg. Invalid release/repo/arch combination/<br>removing mirrorlist with no valid mirrors: /var/cache/yum/i386/6/base/mirrorlist.txt<br>Error: Cannot retrieve repository metadata (repomd.xml) for repository: base. Please verify its path and try again</p></blockquote></li></ul></li></ul></li><li><p><strong>analysis:</strong></p><ul><li><p><code>YumRepo Error: All mirror URLs are not using ftp, http[s] or file.</code></p><ul><li><a href="https://blog.csdn.net/weixin_44160584/article/details/110872926">å‚è€ƒåšå®¢</a></li></ul></li><li><p><code>http://mirror.centos.org/centos/6/os/i386/repodata/repomd.xml: [Errno 14] PYCURL ERROR 22 - &quot;The requested URL returned error: 404 Not Found&quot;</code></p></li><li></li><li><ol><li>æ²¡ç½‘ï¼Œ<code>ping www.baidu.com</code></li><li>pingé€šäº†çš„è¯ï¼Œè‹¥è¿˜æ˜¯ç”¨ä¸äº†yumå‘½ä»¤ï¼Œè¯´æ˜yumé•œåƒæ— äº†ï¼Œé‚£ä¹ˆéœ€è¦å°±å¾—ä¸‹è½½ä¸€ä¸ªæ¥æ›´æ–°ã€‚</li></ol></li></ul></li><li></li></ul></li></ul><h2 id="1-3-ç¼–è¯‘ä¸è¿è¡Œ"><a href="#1-3-ç¼–è¯‘ä¸è¿è¡Œ" class="headerlink" title="1.3 ç¼–è¯‘ä¸è¿è¡Œ"></a>1.3 ç¼–è¯‘ä¸è¿è¡Œ</h2><ul><li><p>ç¼–è¯‘ <code>.c</code>æ–‡ä»¶ï¼šè¾“å…¥æŒ‡ä»¤ <code>gcc æ–‡ä»¶å.c -o å¯æ‰§è¡Œç¨‹åºå</code></p><ul><li><code>gcc</code>: ç¼–è¯‘è¯¥æ–‡ä»¶</li><li><code>-o</code>: åœ¨å½“å‰ç›®å½•ä¸‹</li></ul></li><li><p>è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼šè¾“å…¥ <code>./æ–‡ä»¶å</code></p></li><li><p>ç¼–è¯‘ <code>.cpp</code>æ–‡ä»¶ï¼šè¾“å…¥æŒ‡ä»¤ï¼š``</p></li></ul><h2 id="1-4-ç®€å•é…ç½®-Vim"><a href="#1-4-ç®€å•é…ç½®-Vim" class="headerlink" title="1.4 ç®€å•é…ç½® Vim"></a>1.4 ç®€å•é…ç½® Vim</h2><ul><li><p>ä½¿ç”¨rootæƒé™è¿›å…¥æ ¹ç›®å½•ä¸‹çš„ <code>etc/</code>ç›®å½•ï¼Œåˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼Œ<code>vimrc</code>å³æ˜¯å­˜æ”¾Linuxé»˜è®¤é…ç½®çš„åœ°æ–¹</p></li><li><p>å¯ä»¥ç”¨å‘½ä»¤ <code>vim vimrc</code>è¿›å…¥æ–‡ä»¶ï¼Œä½†ä¸€èˆ¬è‡ªå·±è¿›è¡Œé…ç½®æ—¶ï¼Œé€‰æ‹©åœ¨å½“å‰ç”¨æˆ·çš„ä¸»å·¥ä½œç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>.vimrc</code>æ–‡ä»¶æ¥å­˜æ”¾æˆ‘ä»¬æ–°å¢çš„é…ç½®</p></li><li><blockquote><p>set number<br>filetype on<br>set history=1000<br>set nocompatible<br>set shiftwidth=4<br>color evening<br>syntax on<br>set autoindent<br>set smartindent<br>set tabstop=4<br>set showmatch<br>set guioptions-=T<br>set vb t_vb=<br>set ruler<br>set nohls<br>set incsearch<br>if has(â€œvmsâ€)<br>set nobackup<br>else<br>set backup<br>endif</p></blockquote><ul><li><blockquote><p>set nocompatible æ³¨é‡Šæ‰è®¨åŒçš„æœ‰å…³viä¸€è‡´æ€§æ¨¡å¼ï¼Œé¿å…ä»¥å‰ç‰ˆæœ¬çš„ä¸€äº›bugå’Œå±€é™<br>set number æ˜¾ç¤ºè¡Œå·<br>filetype on æ£€æµ‹æ–‡ä»¶çš„ç±»å‹<br>set history=1000 è®°å½•å†å²è¡Œæ•°<br>color eveing å¤œé—´èƒŒæ™¯æ¨¡å¼<br>syntax on è¯­æ³•é«˜äº®åº¦æ˜¾ç¤º<br>set autoindent<br>vimä½¿ç”¨è‡ªåŠ¨å¯¹èµ·ï¼Œä¹Ÿå°±æ˜¯æŠŠå½“å‰è¡Œçš„å¯¹èµ·æ ¼å¼åº”ç”¨åˆ°ä¸‹ä¸€è¡Œï¼›<br>set smartindentä¾æ®ä¸Šé¢çš„å¯¹èµ·æ ¼å¼ï¼Œæ™ºèƒ½çš„é€‰æ‹©å¯¹èµ·æ–¹å¼<br>set tabstop=4 ç¬¬ä¸€è¡Œè®¾ç½®tabé”®ä¸º4ä¸ªç©ºæ ¼<br>set shiftwidth=4 è®¾ç½®å½“è¡Œä¹‹é—´äº¤é”™æ—¶ä½¿ç”¨4ä¸ªç©ºæ ¼<br>set showmatch è®¾ç½®åŒ¹é…æ¨¡å¼ï¼Œç±»ä¼¼å½“è¾“å…¥ä¸€ä¸ªå·¦æ‹¬å·æ—¶ä¼šåŒ¹é…ç›¸åº”çš„é‚£ä¸ªå³æ‹¬å·<br>set guioptions=T å»é™¤vimçš„GUIç‰ˆæœ¬ä¸­çš„toolbar<br>set vb t_vb= å½“vimè¿›è¡Œç¼–è¾‘æ—¶ï¼Œå¦‚æœå‘½ä»¤é”™è¯¯ï¼Œä¼šå‘å‡ºä¸€ä¸ªå“å£°ï¼Œè¯¥è®¾ç½®å»æ‰å“å£°<br>set ruler åœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­ï¼Œåœ¨å³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡ä½ç½®çš„çŠ¶æ€è¡Œ<br>set nohls é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯»æ‰¾åŒ¹é…æ˜¯é«˜äº®åº¦æ˜¾ç¤ºçš„ï¼Œè¯¥è®¾ç½®å…³é—­é«˜äº®æ˜¾ç¤º<br>set incsearch æŸ¥è¯¢æ—¶éå¸¸æ–¹ä¾¿ï¼Œå¦‚è¦æŸ¥æ‰¾bookå•è¯ï¼Œå½“è¾“å…¥åˆ°/b ä¼šè‡ªåŠ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªbå¼€å¤´çš„å•è¯ï¼Œä½¿ç”¨æ­¤è®¾ç½®ä¼šå¿«é€Ÿæ‰¾åˆ°ç­”æ¡ˆ<br>if has(â€œvmsâ€) ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶åï¼Œè‡ªåŠ¨è¿›è¡Œå¤‡ä»½ï¼Œå¤‡ä»½çš„æ–‡ä»¶åä¸ºåŸæ–‡ä»¶ååŠ â€œ~â€œåç¼€<br>set nobackup<br>else<br>set backup<br>endif</p></blockquote></li></ul></li></ul><h1 id="2-æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼"><a href="#2-æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼" class="headerlink" title="2 æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼"></a>2 æŸ¥çœ‹æ–‡ä»¶çš„æ–¹å¼</h1><h2 id="2-1-cat-å‘½ä»¤"><a href="#2-1-cat-å‘½ä»¤" class="headerlink" title="2.1 cat å‘½ä»¤"></a>2.1 <code>cat</code> å‘½ä»¤</h2><ul><li>ä½œç”¨ï¼šæŸ¥çœ‹æµè§ˆæ–‡ä»¶</li><li>è¯­æ³•ï¼š<code>cat æ–‡ä»¶å</code></li><li>é€‰é¡¹ï¼š<code>-n</code>: æ˜¾ç¤ºè¡Œå·</li></ul><h2 id="2-2-tacå‘½ä»¤"><a href="#2-2-tacå‘½ä»¤" class="headerlink" title="2.2 tacå‘½ä»¤"></a>2.2 <code>tac</code>å‘½ä»¤</h2><ul><li>ä½œç”¨ï¼šä»æœ€åä¸€è¡Œæµè§ˆæ–‡ä»¶å†…å®¹</li><li>æ—  <code>-n</code>é€‰é¡¹</li></ul><h2 id="2-3-moreå‘½ä»¤"><a href="#2-3-moreå‘½ä»¤" class="headerlink" title="2.3 moreå‘½ä»¤"></a>2.3 <code>more</code>å‘½ä»¤</h2><ul><li>è¯­æ³• <code>more æ–‡ä»¶è·¯å¾„</code></li><li>ä½œç”¨ï¼šå¯¹ä¸€äº›é•¿çš„å†…å®¹å¯ä»¥è¿›è¡Œç¿»é¡µæ˜¾ç¤ºï¼Œå·¦ä¸‹è§’æœ‰è¿›åº¦ç™¾åˆ†æ¯”</li><li>æŒ‰ç©ºæ ¼æˆ– <code>f</code>è¿›è¡Œç¿»é¡µ</li><li>æŒ‰ <code>Enter</code>æ¢è¡Œ</li><li>æŒ‰ <code>q</code>é€€å‡º</li></ul><h2 id="2-4-lesså‘½ä»¤"><a href="#2-4-lesså‘½ä»¤" class="headerlink" title="2.4 lesså‘½ä»¤"></a>2.4 <code>less</code>å‘½ä»¤</h2><ul><li>ä½œç”¨ï¼šæœ‰ç€ <code>more</code>çš„åŠŸèƒ½</li><li>æ›´å¤šåŠŸèƒ½ï¼š<ul><li><code>pageup</code>æˆ–è€… <code>up</code>,å‘å‰ç¿»é¡µ</li><li>æŸ¥å…³é”®å­—ï¼š<ul><li>è¯­æ³•ï¼š<code>/å…³é”®å­—</code></li><li>æŒ‰ <code>n</code>æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå…³é”®å­—æ‰€åœ¨ä½ç½®</li></ul></li></ul></li></ul><h2 id="2-5-head-å‘½ä»¤"><a href="#2-5-head-å‘½ä»¤" class="headerlink" title="2.5 head å‘½ä»¤"></a>2.5 <code>head</code> å‘½ä»¤</h2><ul><li>ä½œç”¨ï¼šæŸ¥çœ‹æ–‡ä»¶çš„å‰å‡ è¡Œ</li><li>é»˜è®¤æ˜¾ç¤ºå‰åè¡Œ</li><li>é€‰é¡¹ï¼š<code>-n</code><ul><li><code>head -n æ˜¾ç¤ºè¡Œæ•°</code></li></ul></li></ul><h2 id="2-6-tailå‘½ä»¤"><a href="#2-6-tailå‘½ä»¤" class="headerlink" title="2.6 tailå‘½ä»¤"></a>2.6 <code>tail</code>å‘½ä»¤</h2><ul><li>ä½œç”¨ï¼šæŸ¥çœ‹æ–‡ä»¶æœ€åå‡ è¡Œ</li><li>é»˜è®¤æ˜¾ç¤ºæœ€ååè¡Œ</li><li>é€‰é¡¹ï¼š<code>-n</code><ul><li><code>tail -n æ˜¾ç¤ºè¡Œæ•°</code></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> æ“ä½œç³»ç»Ÿå­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å…¥é—¨å­¦ä¹ 2</title>
      <link href="p/d222e203.html"/>
      <url>p/d222e203.html</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-å…¥é—¨å­¦ä¹ 2"><a href="#Linux-å…¥é—¨å­¦ä¹ 2" class="headerlink" title="Linux å…¥é—¨å­¦ä¹ 2"></a>Linux å…¥é—¨å­¦ä¹ 2</h1><p><a href="https://jiannan.blog.csdn.net/article/details/79512948">å‚è€ƒåšå®¢</a></p><p>[toc]</p><p>å­¦ä¹ å¦‚ä½•åˆ›å»ºæ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€ä»¥åŠæ–‡ä»¶çš„å¤åˆ¶ç²˜è´´å‰ªåˆ‡ç­‰æ“ä½œã€‚</p><h1 id="1-æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º"><a href="#1-æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º" class="headerlink" title="1 æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º"></a>1 æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åˆ›å»º</h1><h2 id="1-1-åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#1-1-åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="1.1 åˆ›å»ºæ–‡ä»¶å¤¹"></a>1.1 åˆ›å»ºæ–‡ä»¶å¤¹</h2><ul><li>å‘½ä»¤ï¼š<code>mkdir</code> make directories</li><li>é»˜è®¤ç™»é™†æ‰€åœ¨ç›®å½•æ˜¯ <code>root</code>çš„ <code>home</code>ç›®å½•</li><li>æŒ‡å®šåœ¨æŸä¸ªç›®å½•ä¸‹åˆ›å»ºï¼š<code>mkdir /ç›®å½•å/æ–‡ä»¶å¤¹å</code></li><li>åˆ›å»ºæ–‡ä»¶å¤¹çš„åŒæ—¶åˆ›å»ºå­æ–‡ä»¶å¤¹ï¼š<code>mkdir -p æ–‡ä»¶å¤¹å/å­æ–‡ä»¶å¤¹å</code><ul><li><code>-p</code>é€‰é¡¹ï¼šé€’å½’åˆ›å»º</li></ul></li></ul><h2 id="1-2-åˆ›å»ºæ–‡ä»¶"><a href="#1-2-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="1.2 åˆ›å»ºæ–‡ä»¶"></a>1.2 åˆ›å»ºæ–‡ä»¶</h2><ul><li>å‘½ä»¤ï¼š<code>touch</code></li><li>è¯­æ³•ï¼š<code>touch /ç›®å½•/æ–‡ä»¶å</code><ul><li>åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶</li></ul></li><li>æ³¨æ„ï¼š<ul><li><code>ç›®å½•</code>éœ€è¦å†™ç»å¯¹è·¯å¾„</li></ul></li></ul><h1 id="2-æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•"><a href="#2-æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•" class="headerlink" title="2 æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•"></a>2 æŸ¥çœ‹å½“å‰ç›®å½•ä»¥åŠåˆ‡æ¢ç›®å½•</h1><h2 id="2-1-æŸ¥çœ‹å½“å‰ç›®å½•"><a href="#2-1-æŸ¥çœ‹å½“å‰ç›®å½•" class="headerlink" title="2.1 æŸ¥çœ‹å½“å‰ç›®å½•"></a>2.1 æŸ¥çœ‹å½“å‰ç›®å½•</h2><ul><li>å‘½ä»¤ï¼š<code>pwd</code></li></ul><h2 id="2-2-åˆ‡æ¢ç›®å½•"><a href="#2-2-åˆ‡æ¢ç›®å½•" class="headerlink" title="2.2 åˆ‡æ¢ç›®å½•"></a>2.2 åˆ‡æ¢ç›®å½•</h2><ul><li>å‘½ä»¤ï¼š<code>cd</code>,<code>change directories</code></li><li>è¯­æ³•ï¼š<code>cd /ç›®å½•</code></li></ul><h1 id="3-å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ"><a href="#3-å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ" class="headerlink" title="3 å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ"></a>3 å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤æ“ä½œ</h1><h2 id="3-1-å¤åˆ¶"><a href="#3-1-å¤åˆ¶" class="headerlink" title="3.1 å¤åˆ¶"></a>3.1 å¤åˆ¶</h2><ul><li>å‘½ä»¤ï¼š<code>cp</code>,copy</li><li>è¯­æ³•ï¼š<code>cp åŸæ–‡ä»¶è·¯å¾„ ç›®æ ‡è·¯å¾„</code></li><li>é€‰é¡¹ï¼š<ul><li><code>-r</code>: å¤åˆ¶ä¸€ä¸ªç›®å½•</li><li><code>-p</code>: å¤åˆ¶æ–‡ä»¶çš„å±æ€§ä¸ä¹‹å‰åŸæ–‡ä»¶ä¸€è‡´</li></ul></li><li>å¤åˆ¶æ”¹åä¸€èµ·å®Œæˆï¼šå†å¤åˆ¶çš„ç›®æ ‡è·¯å¾„æœ€åå†™ä¸Šæ–‡ä»¶å</li></ul><h2 id="3-2-åˆ é™¤"><a href="#3-2-åˆ é™¤" class="headerlink" title="3.2 åˆ é™¤"></a>3.2 åˆ é™¤</h2><ul><li>åˆ é™¤ç©ºç›®å½•<ul><li>å‘½ä»¤ï¼š<code>rmdir</code>ï¼Œåˆ é™¤<strong>ç©ºç›®å½•</strong></li></ul></li><li>åˆ é™¤æ–‡ä»¶<ul><li>å‘½ä»¤ï¼š<code>rm</code></li><li>é€‰é¡¹<ul><li><code>-f</code>: æ— ç¡®è®¤æç¤º</li></ul></li></ul></li><li>åˆ é™¤ç›®å½•ï¼šå¿…é¡»è¿›è¡Œé€’å½’æ“ä½œï¼Œéœ€è¦åŠ ä¸Šé€‰é¡¹ <code>-r</code><ul><li>å‘½ä»¤ï¼š<code>rm -r ç›®å½•</code><ul><li>ä¼šä¸€ä¸ªä¸€ä¸ªæç¤ºæ˜¯å¦åˆ é™¤é‡Œé¢çš„æ–‡ä»¶</li></ul></li><li>å‘½ä»¤ï¼š<code>rm -rf ç›®å½•</code><ul><li>ä¸ä¼šæç¤º</li></ul></li></ul></li></ul><h2 id="3-3-å‰ªåˆ‡"><a href="#3-3-å‰ªåˆ‡" class="headerlink" title="3.3 å‰ªåˆ‡"></a>3.3 å‰ªåˆ‡</h2><ul><li>å‘½ä»¤ï¼š<code>mv</code>,move</li><li>è¯­æ³•ï¼š<code>mv åŸæ–‡ä»¶è·¯å¾„ ç›®æ ‡è·¯å¾„</code></li><li>å‰ªåˆ‡åŒæ—¶æ”¹åï¼šæœ€åå†™ä¸Šæ–‡ä»¶å</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> æ“ä½œç³»ç»Ÿå­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å…¥é—¨å­¦ä¹ 1</title>
      <link href="p/4b2bb3b9.html"/>
      <url>p/4b2bb3b9.html</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-å…¥é—¨å­¦ä¹ 1"><a href="#Linux-å…¥é—¨å­¦ä¹ 1" class="headerlink" title="Linux å…¥é—¨å­¦ä¹ 1"></a>Linux å…¥é—¨å­¦ä¹ 1</h1><p><a href="https://jiannan.blog.csdn.net/article/details/79473507">å‚è€ƒåšå®¢</a></p><p>[toc]</p><h1 id="1-å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼"><a href="#1-å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼" class="headerlink" title="1 å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼"></a>1 å­¦ä¹ å‘½ä»¤åŸºæœ¬æ ¼å¼</h1><h2 id="1-1-åŸºæœ¬æ ¼å¼"><a href="#1-1-åŸºæœ¬æ ¼å¼" class="headerlink" title="1.1 åŸºæœ¬æ ¼å¼"></a>1.1 åŸºæœ¬æ ¼å¼</h2><ul><li><strong>å‘½ä»¤</strong>ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š<code>å‘½ä»¤ [-é€‰é¡¹] [å‚æ•°]</code><ul><li><strong>é€‰é¡¹</strong>ä¸<strong>å‚æ•°</strong>å¯ä»¥çœç•¥</li><li>æœ‰å¤šä¸ªé€‰é¡¹æ˜¯å¯ä»¥å†™åœ¨ä¸€èµ·çš„ï¼Œâ€œ-â€ä»£è¡¨é€‰é¡¹</li><li><strong>å‚æ•°</strong>å¯ä»¥æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>ç›®å½•</strong></li></ul></li></ul><p><strong>ä¾‹ï¼š</strong><code>ls -l /</code> ä»£è¡¨<strong>æŸ¥çœ‹ç›®å½•</strong></p><ul><li><code>ls</code>: <strong>æŸ¥çœ‹ç›®å½•</strong>ã€‚æ˜¾ç¤ºç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼ˆåªèƒ½çœ‹åˆ°æ–‡ä»¶åï¼‰</li><li><code>-l</code>: æ˜¾ç¤ºç›®å½•ä¸‹çš„<strong>è¯¦ç»†</strong>æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„ä¿¡æ¯</li><li><code>/</code>: <strong>æ ¹ç›®å½•</strong>ã€‚å¤¹ä¸Šå‚æ•°åï¼Œè¡¨ç¤º<strong>æŸ¥çœ‹ æ ¹ç›®å½• ä¸‹çš„æ–‡ä»¶</strong></li></ul><h2 id="1-2-ç›®å½•"><a href="#1-2-ç›®å½•" class="headerlink" title="1.2 ç›®å½•"></a>1.2 ç›®å½•</h2><pre><code>æŸ¥çœ‹æ ¹ç›®å½•æ—¶ï¼Œå¯ä»¥çœ‹åˆ°è®¸å¤šæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</code></pre><p><img src="C:\Users\Light\AppData\Roaming\Typora\typora-user-images\image-20210307101148483.png" alt="image-20210307101148483"></p><ol><li><code>/</code>: æ ¹ç›®å½•ï¼Œæ— ä¸Šä¸€çº§</li><li><code>/home</code>: æ¯ä¸ªç”¨æˆ·çš„å®¶ç›®å½•ï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·æ—¶ï¼Œhomeç›®å½•ä¸‹ä¼šåˆ›å»ºä¸€ä¸ªä»¥ç”¨æˆ·åæ–‡åç§°çš„æ–‡ä»¶å¤¹</li><li><code>/tmp</code>: ä¸´æ—¶å­˜æ”¾æ–‡ä»¶çš„åœ°æ–¹</li><li><code>/bin</code>: å‘½ä»¤ä¿å­˜çš„ç›®å½•</li><li><code>/boot</code>: å¯åŠ¨ç›®å½•ï¼ŒåŒ…å«ç³»ç»Ÿå¯åŠ¨æ—¶çš„ç›¸å…³æ–‡ä»¶</li><li><code>/root</code>: rootç”¨æˆ·çš„å®¶ç›®å½•ï¼Œ</li></ol><h1 id="2-ls-ç›®å½•å‘½ä»¤å¤„ç†"><a href="#2-ls-ç›®å½•å‘½ä»¤å¤„ç†" class="headerlink" title="2 ls ç›®å½•å‘½ä»¤å¤„ç†"></a>2 <code>ls</code> ç›®å½•å‘½ä»¤å¤„ç†</h1><pre><code>`ls`ç›®å½•å¤„ç†å‘½ä»¤ï¼Œå…¨ç§°: `list`å…¶ä»–ç›®å½•å‘½ä»¤ï¼š</code></pre><ul><li><code>ls -a</code>æˆ– <code>ls --all</code>: æŸ¥çœ‹ç›®å½•ä¸‹çš„å…¨éƒ¨æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰<ul><li>![image-20210307103745762](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103745762.png)</li><li><code>ls</code>å‘½ä»¤ååŠ  <code>-a</code>å¯ä»¥æŸ¥çœ‹åˆ°<strong>å½“å‰ç›®å½•</strong>ä¸‹çš„<strong>å…¨éƒ¨æ–‡ä»¶</strong></li><li>éšè—æ–‡ä»¶çš„åç§°ä»¥ <code>.</code>å¼€å§‹</li><li>éšè—æ–‡ä»¶çš„æ„ä¹‰:å‘Šè¯‰ç”¨æˆ·ï¼Œå…¶æ˜¯ç³»ç»Ÿçš„æ–‡ä»¶ï¼Œä¸è¦éšæ„çš„æ›´æ”¹</li><li><code>-a</code> æ˜¯ <code>--all</code> çš„ç®€åŒ–</li></ul></li><li><code>ls -l</code>: æŸ¥çœ‹ç›®å½•ä¸‹çš„è¯¦ç»†æ–‡ä»¶ä¿¡æ¯<ul><li>![image-20210307103816519](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103816519.png)</li><li>å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„<strong>å¤§å°</strong>,<strong>ä¿®æ”¹æ—¥æœŸ</strong>åŠ<strong>æ–‡ä»¶å</strong>ç­‰</li><li>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ–‡ä»¶å¤§å° <code>1255</code>,<code>26533</code>ç­‰ï¼Œå¤§å°å•ä½ä¸º<strong>å­—èŠ‚</strong></li><li><code>l</code>å…¨ç§°ä¸º <code>long</code></li></ul></li><li><code>ls -al</code>: æŸ¥çœ‹è¿™ä¸ªç›®å½•ä¸‹å…¨éƒ¨æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯<ul><li>![image-20210307103854462](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103854462.png)</li></ul></li><li><code>ls -al /tmp</code>: æŸ¥çœ‹ <code>tmp</code> æ–‡ä»¶ä¸‹çš„å…¨éƒ¨æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯<ul><li>![image-20210307103921974](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307103921974.png)</li></ul></li><li><code>ls -alh</code>: æ›´äººæ€§åŒ–çš„æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯<ul><li>![image-20210307104048576](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307104048576.png)</li><li>æ­¤æ—¶ï¼Œå¯¹æ–‡ä»¶å¤§å°æ ‡æ³¨äº†å•ä½</li><li>æˆ‘ä»¬æ¥çœ‹ä¸Šå›¾ç¬¬ä¸€è¡Œï¼Œ<code>dr-xr-x---.  2 root root 4.0K Mar 7 05:37     </code>ï¼Œå¯¹å…¶è¿›è¡Œè§£è¯»ï¼š<ul><li><code>dr-xr-x---</code>ä»£è¡¨<strong>æ–‡ä»¶ç±»å‹åŠæƒé™</strong>ï¼Œåº”æ‹†æˆ<strong>å››éƒ¨åˆ†</strong>ï¼š<code>d r-x r-x ---</code>:<ul><li>ç¬¬ä¸€éƒ¨åˆ† <code>d</code>: <strong>ä»£è¡¨æ˜¯ä»€ä¹ˆæ–‡ä»¶</strong>ï¼Œ<code>directory</code>ç›®å½•çš„é¦–å­—æ¯ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ã€‚<ul><li>è‹¥ç¬¬ä¸€ä¸ªå­—æ¯ä¸º <code>l</code>ï¼šæ˜¯ <code>link</code>çš„é¦–å­—æ¯ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ª<strong>è½¯è¿æ¥æ–‡ä»¶</strong></li><li>è‹¥ç¬¬ä¸€ä¸ªå­—æ¯ä¸º <code>-</code>ï¼šä»£è¡¨è¿™æ˜¯ä¸€ä¸ª<strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong></li></ul></li><li>ç¬¬äºŒéƒ¨åˆ† <code>r-x</code>: ä»£è¡¨<strong>æ‰€æœ‰è€…</strong>æ‹¥æœ‰æŸä¸ªæƒé™ï¼šè¯»å’Œæ‰§è¡Œ<ul><li><code>r</code>: ä»£è¡¨è¯»çš„æƒé™</li><li><code>w</code>: ä»£è¡¨å†™çš„æƒé™</li><li><code>x</code>: ä»£è¡¨æ‰§è¡Œçš„æƒé™</li></ul></li><li>ç¬¬ä¸‰éƒ¨åˆ† <code>r-x</code>: ä»£è¡¨<strong>æ‰€å±ç»„</strong>æ‹¥æœ‰çš„æƒé™ï¼šè¯»å’Œæ‰§è¡Œ</li><li>ç¬¬å››éƒ¨åˆ† <code>---</code>: ä»£è¡¨<strong>å…¶ä»–äºº</strong>æ‹¥æœ‰çš„æƒé™ï¼š<code>null</code></li></ul></li><li><code>2</code> : ä»£è¡¨æ˜¯ä¸€ä¸ª<strong>å¼•ç”¨æŠ€æœ¯</strong>ï¼Œä»£è¡¨è¿™ä¸ªæ–‡ä»¶è¢«å¼•ç”¨äº† <code>2</code>æ¬¡</li><li><code>root</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„æ‰€æœ‰è€…</li><li><code>root</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„æ‰€å±ç»„</li><li><code>4.0K</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„å¤§å°</li><li><code>Mar 7 05:37</code>: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´</li><li>``: ä»£è¡¨è¿™ä¸ªæ–‡ä»¶çš„åç§°</li></ul></li></ul></li><li><code>ls -i</code>: æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„ <code>i</code>èŠ‚ç‚¹<ul><li>![image-20210307111054562](E:\LearningNotes\Linux\Linux å…¥é—¨å­¦ä¹ 1.assets\image-20210307111054562.png)</li><li>åœ¨ Linux ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„ <code>i</code>èŠ‚ç‚¹ï¼Œç±»ä¼¼äºæ¯ä¸ªäººçš„èº«ä»½è¯å·</li><li><code>i</code>èŠ‚ç‚¹å¯ä»¥å¯¹åº”å¤šä¸ªæ–‡ä»¶</li></ul></li></ul><h1 id="3-æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº"><a href="#3-æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº" class="headerlink" title="3 æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº"></a>3 æ‰€æœ‰è€…ã€æ‰€å±ç»„åŠå…¶ä»–äºº</h1><ul><li>æ‰€æœ‰è€…ï¼šåˆ›å»ºäº†è¿™ä¸ªæ–‡ä»¶çš„äººã€‚ä½†æ‰€æœ‰è€…å¯ä»¥è½¬æ¢</li><li>æ‰€å±ç»„ï¼šå¾ˆå¤šäººç»„æˆçš„ç»„</li><li>å…¶ä»–äººï¼šæ‰€æœ‰è€…å’Œæ‰€å±ç»„ä¹‹å¤–çš„ç”¨æˆ·</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> æ“ä½œç³»ç»Ÿå­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxLearning</title>
      <link href="p/9750b399.html"/>
      <url>p/9750b399.html</url>
      
        <content type="html"><![CDATA[<h1 id="LinuxLearning"><a href="#LinuxLearning" class="headerlink" title="LinuxLearning"></a>LinuxLearning</h1><p>[toc]</p><h1 id="0-Linux-ç³»ç»Ÿç®€ä»‹"><a href="#0-Linux-ç³»ç»Ÿç®€ä»‹" class="headerlink" title="0 Linux ç³»ç»Ÿç®€ä»‹"></a>0 Linux ç³»ç»Ÿç®€ä»‹</h1><h2 id="0-0-å†å²"><a href="#0-0-å†å²" class="headerlink" title="0.0 å†å²"></a>0.0 å†å²</h2><ul><li>æ“ä½œç³»ç»Ÿå§‹äºäºŒåä¸–çºªäº”åå¹´ä»£ï¼Œå½“æ—¶çš„æ“ä½œç³»ç»Ÿèƒ½è¿è¡Œæ‰¹å¤„ç†ç¨‹åºã€‚æ‰¹å¤„ç†ç¨‹åºä¸éœ€è¦ç”¨æˆ·çš„äº¤äº’ï¼Œå®ƒä»æ–‡ä»¶æˆ–è€…ç©¿å­”å¡ç‰‡è¯»å–æ•°æ®ï¼Œç„¶åè¾“å‡ºåˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ‰“å°æœº</li><li>äºŒåä¸–çºªå…­åå¹´ä»£åˆï¼Œäº¤äº’å¼æ“ä½œç³»ç»Ÿå¼€å§‹æµè¡Œã€‚å®ƒä¸ä»…ä»…å¯ä»¥äº¤äº’ï¼Œè¿˜èƒ½ä½¿å¤šä¸ªç”¨æˆ·ä»ä¸åŒçš„ç»ˆç«¯åŒæ—¶æ“ä½œä¸»æœºã€‚è¿™æ ·çš„æ“ä½œç³»ç»Ÿè¢«ç§°ä½œåˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„å‡ºç°å¯¹æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿæ˜¯ä¸ªæå¤§çš„æŒ‘æˆ˜ã€‚</li><li>UNIX æœ€åˆå…è´¹å‘å¸ƒå¹¶å› æ­¤åœ¨å¤§å­¦é‡Œå—åˆ°æ¬¢è¿ã€‚åæ¥ï¼ŒUNIX å®ç°äº† TCP/IP åè®®æ ˆ</li><li>Linux æœ¬èº«åªæ˜¯æ“ä½œç³»ç»Ÿçš„å†…æ ¸ã€‚å†…æ ¸æ˜¯ä½¿å…¶å®ƒç¨‹åºèƒ½å¤Ÿè¿è¡Œçš„åŸºç¡€ã€‚å®ƒå®ç°äº†å¤šä»»åŠ¡å’Œç¡¬ä»¶ç®¡ç†ï¼Œç”¨æˆ·æˆ–è€…ç³»ç»Ÿç®¡ç†å‘˜äº¤äº’è¿è¡Œçš„æ‰€æœ‰ç¨‹åºå®é™…ä¸Šéƒ½è¿è¡Œåœ¨å†…æ ¸ä¹‹ä¸Š<ul><li>å…¶ä¸­æœ‰äº›ç¨‹åºæ˜¯å¿…éœ€çš„ï¼Œæ¯”å¦‚è¯´ï¼Œå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼ˆshellï¼‰ï¼Œå®ƒç”¨äºç”¨æˆ·äº¤äº’å’Œç¼–å†™ shell è„šæœ¬ã€‚</li></ul></li><li>è®¸å¤šé‡è¦çš„è½¯ä»¶ï¼ŒåŒ…æ‹¬ C ç¼–è¯‘å™¨ï¼Œéƒ½æ¥è‡ªäºè‡ªç”±è½¯ä»¶åŸºé‡‘ GNU é¡¹ç›®ã€‚GNU é¡¹ç›®å¼€å§‹äº 1984 å¹´ï¼Œç›®çš„æ˜¯ä¸ºäº†å¼€å‘ä¸€ä¸ªå®Œå…¨ç±»ä¼¼äº UNIX çš„å…è´¹æ“ä½œç³»ç»Ÿã€‚ä¸ºäº†è¡¨æ‰¬ GNU å¯¹ Linux çš„è´¡çŒ®ï¼Œè®¸å¤šäººæŠŠ Linux ç§°ä¸º GNU/Linuxï¼ˆGNU æœ‰è‡ªå·±çš„å†…æ ¸ï¼‰</li><li>1992ï¼1993 å¹´ï¼ŒLinux å†…æ ¸å…·å¤‡äº†æŒ‘æˆ˜ UNIX çš„æ‰€æœ‰æœ¬è´¨ç‰¹æ€§ï¼ŒåŒ…æ‹¬ TCP/IP ç½‘ç»œï¼Œå›¾å½¢ç•Œé¢ç³»ç»Ÿï¼ˆX window )ï¼ŒLinux åŒæ ·ä¹Ÿå¸å¼•äº†è®¸å¤šè¡Œä¸šçš„å…³æ³¨ã€‚ä¸€äº›å°çš„å…¬å¸å¼€å§‹å¼€å‘å’Œå‘è¡Œ Linuxï¼Œæœ‰å‡ åä¸ª Linux ç”¨æˆ·ç¤¾åŒºæˆç«‹ã€‚1994 å¹´ï¼ŒLinux æ‚å¿—ä¹Ÿå¼€å§‹å‘è¡Œã€‚</li><li>Linux å†…æ ¸ 1.0 åœ¨ 1994 å¹´ 3 æœˆå‘å¸ƒï¼Œå†…æ ¸çš„å‘å¸ƒè¦ç»å†è®¸å¤šå¼€å‘å‘¨æœŸï¼Œç›´è‡³è¾¾åˆ°ä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬ã€‚</li></ul><h2 id="0-1-ç®€ä»‹"><a href="#0-1-ç®€ä»‹" class="headerlink" title="0.1 ç®€ä»‹"></a>0.1 ç®€ä»‹</h2><ul><li><p>æ˜¯ä¸€ç§è‡ªç”±å’Œå¼€æ”¾æºç çš„æ“ä½œç³»ç»Ÿï¼Œæœ‰ç€ä¸åŒçš„Linuxç‰ˆæœ¬ï¼Œä½†éƒ½æ˜¯ç”¨äº†Linuxå†…æ ¸ã€‚</p><ul><li><img src="https://img-blog.csdn.net/20180527120259589?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nja2V2aW5jeWg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></li></ul></li><li><p>Linux å¯å®‰è£…åœ¨å„ç§è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ä¸­ï¼šæ‰‹æœºã€å¹³æ¿ç”µè„‘ã€è·¯ç”±å™¨ã€å°å¼è®¡ç®—æœº</p><ul><li><img src="https://img-blog.csdn.net/2018090315211355?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNTMwOTQz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></li></ul></li></ul><h2 id="0-2-ç‰¹ç‚¹"><a href="#0-2-ç‰¹ç‚¹" class="headerlink" title="0.2 ç‰¹ç‚¹"></a>0.2 ç‰¹ç‚¹</h2><ul><li>å¤šç”¨æˆ·ï¼Œå¤šä»»åŠ¡ï¼Œ</li><li>ä¸°å¯Œçš„ç½‘ç»œåŠŸèƒ½ï¼Œ</li><li>å¯é çš„ç³»ç»Ÿå®‰å…¨ï¼Œ</li><li>è‰¯å¥½çš„å¯ç§»æ¤æ€§ï¼Œ</li><li>å…·æœ‰æ ‡å‡†å…¼å®¹æ€§ï¼Œ</li><li>è‰¯å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œ</li><li>å‡ºè‰²çš„é€Ÿåº¦æ€§èƒ½</li></ul><h2 id="0-3-CentOS"><a href="#0-3-CentOS" class="headerlink" title="0.3 CentOS"></a>0.3 CentOS</h2><ul><li>ä¸»æµï¼šç›®å‰çš„Linuxæ“ä½œç³»ç»Ÿä¸»è¦åº”ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œä¸»æµä¼ä¸šçº§Linuxç³»ç»Ÿä»æ—§æ˜¯RedHatæˆ–è€…CentOS</li><li>å…è´¹ï¼šRedHat å’ŒCentOSå·®åˆ«ä¸å¤§</li><li>æ›´æ–°æ–¹ä¾¿ï¼šCentOSç‹¬æœ‰çš„yumå‘½ä»¤æ”¯æŒåœ¨çº¿å‡çº§ï¼Œå¯ä»¥å³æ—¶æ›´æ–°ç³»ç»Ÿï¼Œä¸åƒRedHat é‚£æ ·éœ€è¦èŠ±é’±è´­ä¹°æ”¯æŒæœåŠ¡ï¼</li></ul><h2 id="0-4-Linux-ç›®å½•ç»“æ„"><a href="#0-4-Linux-ç›®å½•ç»“æ„" class="headerlink" title="0.4 Linux ç›®å½•ç»“æ„"></a>0.4 Linux ç›®å½•ç»“æ„</h2><p><img src="https://img-blog.csdn.net/20180527120637267?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nja2V2aW5jeWg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><ul><li>bin(binaries): äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶</li><li>sbin(super user binaries)ï¼šå­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªæœ‰rootèƒ½è®¿é—®</li><li>etc(etcetera)ï¼šå­˜æ”¾ç³»ç»Ÿé…ç½®æ–‡ä»¶</li><li>usr(unix shared resources)ï¼šå­˜æ”¾å…±äº«çš„ç³»ç»Ÿèµ„æº</li><li>homeï¼š å­˜æ”¾ç”¨æˆ·æ–‡ä»¶çš„æ ¹ç›®å½•</li><li>rootï¼šè¶…çº§ç”¨æˆ·ç›®å½•</li><li>dev(devices)ï¼šå­˜æ”¾è®¾å¤‡æ–‡ä»¶</li><li>lib(library)ï¼šå­˜æ”¾è·Ÿæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„å…±äº«åº“åŠå†…æ ¸æ¨¡å—</li><li>mnt(mountï¼šç³»ç»Ÿç®¡ç†å‘˜å®‰è£…ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿçš„å®‰è£…ç‚¹</li><li>bootï¼šå­˜æ”¾ç”¨äºç³»ç»Ÿå¼•å¯¼æ—¶ä½¿ç”¨çš„å„ç§æ–‡ä»¶</li><li>tmp(temporary)ï¼šç”¨äºå­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶</li><li>var(variable)ï¼šå­˜æ”¾è¿è¡Œæ—¶éœ€è¦æ”¹å˜æ•°æ®çš„æ–‡ä»¶</li></ul><h2 id="0-5-Linux-ä¸-Windowsçš„åŒºåˆ«"><a href="#0-5-Linux-ä¸-Windowsçš„åŒºåˆ«" class="headerlink" title="0.5 Linux ä¸ Windowsçš„åŒºåˆ«"></a>0.5 Linux ä¸ Windowsçš„åŒºåˆ«</h2><ol><li>å…è´¹ä¸æ”¶è´¹<ul><li>æœ€æ–°æ­£ç‰ˆWindows10éœ€ä»˜è´¹</li><li>Linux å…è´¹æˆ–å°‘è®¸è´¹ç”¨</li></ul></li><li>è½¯ä»¶ä¸æ”¯æŒ</li><li>å®‰å…¨æ€§</li><li>ä½¿ç”¨ä¹ æƒ¯<ul><li>Windowsï¼šæ™®é€šç”¨æˆ·åŸºæœ¬éƒ½æ˜¯çº¯å›¾å½¢ç•Œé¢ä¸‹æ“ä½œä½¿ç”¨ï¼Œä¾é é¼ æ ‡å’Œé”®ç›˜å®Œæˆä¸€åˆ‡æ“ä½œï¼Œç”¨æˆ·ä¸Šæ‰‹å®¹æ˜“ï¼Œå…¥é—¨ç®€å•ï¼›</li><li>Linuxï¼šå…¼å…·å›¾å½¢ç•Œé¢æ“ä½œï¼ˆéœ€è¦ä½¿ç”¨å¸¦æœ‰æ¡Œé¢ç¯å¢ƒçš„å‘è¡Œç‰ˆï¼‰å’Œå®Œå…¨çš„å‘½ä»¤è¡Œæ“ä½œï¼Œå¯ä»¥åªç”¨é”®ç›˜å®Œæˆä¸€åˆ‡æ“ä½œï¼Œæ–°æ‰‹å…¥é—¨è¾ƒå›°éš¾ï¼Œéœ€è¦ä¸€äº›å­¦ä¹ å’ŒæŒ‡å¯¼ï¼ˆè¿™æ­£æ˜¯æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼‰ï¼Œä¸€æ—¦ç†Ÿç»ƒä¹‹åæ•ˆç‡æé«˜ã€‚</li></ul></li><li>å¯å®šåˆ¶æ€§</li><li>åº”ç”¨èŒƒç•´<ul><li>åœ¨ Windows ä½¿ç”¨ç™¾åº¦ã€è°·æ­Œï¼Œä¸Šæ·˜å®ï¼ŒèŠ QQ æ—¶ï¼Œæ”¯æ’‘è¿™äº›è½¯ä»¶å’ŒæœåŠ¡çš„ï¼Œæ˜¯åå°æˆåƒä¸Šä¸‡çš„ Linux æœåŠ¡å™¨ä¸»æœºï¼Œå®ƒä»¬æ—¶æ—¶åˆ»åˆ»éƒ½åœ¨å¿™ç¢Œåœ°è¿›è¡Œç€æ•°æ®å¤„ç†å’Œè¿ç®—ï¼Œå¯ä»¥è¯´ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†è½¯ä»¶å’ŒæœåŠ¡éƒ½æ˜¯è¿è¡Œåœ¨ Linux ä¹‹ä¸Šçš„ã€‚</li></ul></li><li>Windows æ²¡æœ‰çš„ï¼š<ul><li>ç¨³å®šçš„ç³»ç»Ÿ</li><li>å®‰å…¨æ€§å’Œæ¼æ´çš„å¿«é€Ÿä¿®è¡¥</li><li>å¤šç”¨æˆ·</li><li>ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„è§„åˆ’</li><li>ç›¸å¯¹è¾ƒå°‘çš„èµ„æºå ç”¨</li><li>å¯å®šåˆ¶è£å‰ªï¼Œç§»æ¤åˆ°åµŒå…¥å¼å¹³å°</li><li>å¯é€‰æ‹©çš„å¤šç§å›¾å½¢ç”¨æˆ·ç•Œé¢</li></ul></li><li>Linux æ²¡æœ‰çš„ï¼š<ul><li>ç‰¹å®šçš„æ”¯æŒå‚å•†</li><li>è¶³å¤Ÿçš„æ¸¸æˆå¨±ä¹æ”¯æŒåº¦</li><li>è¶³å¤Ÿçš„ä¸“ä¸šè½¯ä»¶æ”¯æŒåº¦</li></ul></li></ol><h1 id="1-VMware-è™šæ‹Ÿæœº"><a href="#1-VMware-è™šæ‹Ÿæœº" class="headerlink" title="1 VMware è™šæ‹Ÿæœº"></a>1 VMware è™šæ‹Ÿæœº</h1><h2 id="1-1-ä»‹ç»"><a href="#1-1-ä»‹ç»" class="headerlink" title="1.1 ä»‹ç»"></a>1.1 ä»‹ç»</h2><h2 id="1-2-ä¸‹è½½åŠå®‰è£…"><a href="#1-2-ä¸‹è½½åŠå®‰è£…" class="headerlink" title="1.2 ä¸‹è½½åŠå®‰è£…"></a>1.2 ä¸‹è½½åŠå®‰è£…</h2><p><a href="https://www.cnblogs.com/98han/p/13170117.html">å‚è€ƒåšå®¢</a></p><p><strong>å®‰è£…ç‰ˆæœ¬ï¼š</strong><code> VMware-workstation-full-15.5.0-14665864</code></p><p>ä½¿ç”¨ç¬¬ä¸€ä¸ªå¯†é’¥æˆåŠŸï¼</p><p><img src="E:\LearningNotes\Linux\LinuxLearning.assets\image-20210306193651528.png" alt="image-20210306193651528"></p><h1 id="2-Linux-ç³»ç»Ÿä¸‹è½½åŠå®‰è£…"><a href="#2-Linux-ç³»ç»Ÿä¸‹è½½åŠå®‰è£…" class="headerlink" title="2 Linux ç³»ç»Ÿä¸‹è½½åŠå®‰è£…"></a>2 Linux ç³»ç»Ÿä¸‹è½½åŠå®‰è£…</h1><p><a href="https://jiannan.blog.csdn.net/article/details/79417947?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control&dist_request_id=1328603.29514.16150273040264577&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control">å‚è€ƒåšå®¢</a></p><p><a href="https://pan.baidu.com/s/1HVKs4tQaghwxF215LXpWyg">Linux å®‰è£…åŒ…ï¼ˆç™¾åº¦äº‘ç›˜ï¼‰</a></p><p><del>èŠ±äº†ä¹å—é’±ï¼Œä¹°äº†ç™¾åº¦äº‘ç›˜åŠ é€Ÿåˆ¸ï¼Œå‘œå‘œå‘œ</del></p><h2 id="2-1-è™šæ‹Ÿæœºçš„åˆ›å»º"><a href="#2-1-è™šæ‹Ÿæœºçš„åˆ›å»º" class="headerlink" title="2.1 è™šæ‹Ÿæœºçš„åˆ›å»º"></a>2.1 è™šæ‹Ÿæœºçš„åˆ›å»º</h2><p><a href="https://jiannan.blog.csdn.net/article/details/79417947?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control&dist_request_id=1328603.29514.16150273040264577&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control">å‚è€ƒåšå®¢</a></p><h2 id="2-2-å®‰è£…Linux-ç³»ç»Ÿ"><a href="#2-2-å®‰è£…Linux-ç³»ç»Ÿ" class="headerlink" title="2.2 å®‰è£…Linux ç³»ç»Ÿ"></a>2.2 å®‰è£…Linux ç³»ç»Ÿ</h2><p><a href="https://jiannan.blog.csdn.net/article/details/79417947?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control&dist_request_id=1328603.29514.16150273040264577&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.control">å‚è€ƒåšå®¢</a></p><p><strong>é‡åˆ°çš„é—®é¢˜ï¼š</strong></p><ul><li><ul><li><p><input checked="" disabled="" type="checkbox">  é—®é¢˜ä¸€ï¼š<img src="https://img-blog.csdn.net/2018030316140063?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VpeGluXzM4MTExOTU3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p></li><li><p>æˆ‘é€‰æ‹©å°† D ç›˜å‹ç¼© 30G ï¼Œæ–°å»ºç©ºçš„ç®€å•å·æ¥è£…æ­¤ç³»ç»Ÿ</p></li></ul></li><li><ul><li><p><input checked="" disabled="" type="checkbox">  é—®é¢˜äºŒï¼š<code>have no enough available....</code></p></li><li><p>æœ€ååœ¨ç»™ <code>æ ¹ç›®å½•</code>åˆ†åŒºï¼Œæ ¹ç›®å½•å°±æ˜¯åœ¨é€‰æ‹©æŒ‚è½½ç‚¹çš„ç¬¬ä¸€ä¸ª <code>/</code>ï¼Œç„¶åä¸‹é¢æœ‰ä¸ªé€‰æ‹©æ¡† <code>é€‰æ‹©æœ€å¤§çš„å€¼</code>ï¼Œåˆ†åŒº4ä¸ªå°±å¤Ÿäº†ã€‚</p></li></ul></li><li><p><strong>password</strong>ï¼š<code>ZihaoMa123</code></p></li><li><p><strong>Congratulations</strong><img src="E:\LearningNotes\Linux\LinuxLearning.assets\image-20210306213821201.png" alt="image-20210306213821201"></p></li><li><p>åœ¨è¾“å…¥å¯†ç ï¼ˆ<em>å¯†ç å°±æ˜¯åœ¨å®‰è£…ç³»ç»Ÿæ—¶è¾“å…¥çš„å¯†ç </em>ï¼‰çš„æ—¶å€™æ˜¯ä¸ä¼šå‡ºç° <code>****</code></p></li></ul><p>è™šæ‹ŸæœºæŒ‚èµ·å’Œå…³æœºçš„åŒºåˆ«</p><ul><li>æŒ‚èµ·ï¼šç›¸å½“äºç‰©ç†æœºä¸­çš„ä¼‘çœ åˆ°å†…å­˜åŠŸèƒ½</li><li>å…³æœºï¼šæ‰§è¡Œæ™®é€šå…³æœºæ“ä½œ</li></ul><h1 id="3-å­¦ä¹ -Linux-çš„å¥½ä¹ æƒ¯"><a href="#3-å­¦ä¹ -Linux-çš„å¥½ä¹ æƒ¯" class="headerlink" title="3 å­¦ä¹  Linux çš„å¥½ä¹ æƒ¯"></a>3 å­¦ä¹  Linux çš„å¥½ä¹ æƒ¯</h1><ul><li>å–„äºä½¿ç”¨ <code>man å‘½ä»¤</code>æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</li><li>åˆ©ç”¨å¥½ <code>Tab</code>é”®</li><li>æŒæ¡å¥½ï¼š<ul><li><code>ctrl + c</code> åœæ­¢å½“å‰è¿›ç¨‹</li><li><code>ctrl + r æŸ¥çœ‹å‘½ä»¤å†å²</code></li><li><code>ctrl + l</code> æ¸…å±</li></ul></li></ul><h1 id="å¦‚ä½•å­¦ä¹ -Linux"><a href="#å¦‚ä½•å­¦ä¹ -Linux" class="headerlink" title="å¦‚ä½•å­¦ä¹  Linux"></a>å¦‚ä½•å­¦ä¹  Linux</h1><h2 id="1-å¿ƒæ€"><a href="#1-å¿ƒæ€" class="headerlink" title="1 å¿ƒæ€"></a>1 å¿ƒæ€</h2><ul><li><p>æ˜ç¡®ç›®çš„ï¼šç”¨Linuxæ¥å¹²ä»€ä¹ˆï¼ˆæ­å»ºæœåŠ¡å™¨ï¼Œåšç¨‹åºå¼€å‘ï¼Œæ—¥å¸¸åŠå…¬ï¼Œè¿˜æ˜¯å¨±ä¹æ¸¸æˆï¼‰</p></li><li><p>é¢å¯¹ç°å®ï¼šLinux å¤§éƒ½åœ¨å‘½ä»¤è¡Œä¸‹æ“ä½œï¼Œèƒ½å¦æ¥å—ä¸ç”¨å›¾å½¢åŒ–ç•Œé¢</p></li><li><p>æ˜¯å­¦ä¹ Linuxæ“ä½œç³»ç»Ÿæœ¬èº«ï¼Œè¿˜æ˜¯æŸä¸€ä¸ªå‘è¡Œç‰ˆï¼ˆUbuntuï¼ŒCentOSï¼ŒFedoraï¼ŒOpenSUSEç­‰ï¼‰</p><ul><li><a href="https://baike.baidu.com/item/Linux%E7%89%88%E6%9C%AC">Linuxå‘è¡Œç‰ˆ</a></li></ul></li><li><blockquote><p>ä¸€ä¸ªå…¸å‹çš„Linuxå‘è¡Œç‰ˆåŒ…æ‹¬ï¼š<a href="https://baike.baidu.com/item/Linux%E5%86%85%E6%A0%B8">Linuxå†…æ ¸</a>ï¼Œä¸€äº›<a href="https://baike.baidu.com/item/GNU">GNU</a><a href="https://baike.baidu.com/item/%E7%A8%8B%E5%BA%8F%E5%BA%93/7662317">ç¨‹åºåº“</a>å’Œå·¥å…·ï¼Œå‘½ä»¤è¡Œshellï¼Œå›¾å½¢ç•Œé¢çš„[X Window](<a href="https://baike.baidu.com/item/X">https://baike.baidu.com/item/X</a> Window)ç³»ç»Ÿå’Œç›¸åº”çš„<a href="https://baike.baidu.com/item/%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83/3373875">æ¡Œé¢ç¯å¢ƒ</a>ï¼Œå¦‚<a href="https://baike.baidu.com/item/KDE">KDE</a>æˆ–<a href="https://baike.baidu.com/item/GNOME">GNOME</a>ï¼Œå¹¶åŒ…å«æ•°åƒç§ä»åŠå…¬å¥—ä»¶ï¼Œ<a href="https://baike.baidu.com/item/%E7%BC%96%E8%AF%91%E5%99%A8/8853067">ç¼–è¯‘å™¨</a>ï¼Œ<a href="https://baike.baidu.com/item/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/8853160">æ–‡æœ¬ç¼–è¾‘å™¨</a>åˆ°ç§‘å­¦å·¥å…·çš„åº”ç”¨è½¯ä»¶ã€‚</p></blockquote></li></ul><h2 id="2-æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹"><a href="#2-æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹" class="headerlink" title="2 æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹"></a>2 æ³¨é‡åŸºç¡€ï¼Œä»å¤´å¼€å§‹</h2><p><img src="https://img-blog.csdn.net/20180903153014660?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNTMwOTQz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ— æ­¢å¢ƒ </category>
          
          <category> æ“ä½œç³»ç»Ÿå­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
